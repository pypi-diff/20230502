# Comparing `tmp/sfctools-1.0.5.4.tar.gz` & `tmp/sfctools-1.0.5.5.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "sfctools-1.0.5.4.tar", max compression
+gzip compressed data, was "sfctools-1.0.5.5.tar", max compression
```

## Comparing `sfctools-1.0.5.4.tar` & `sfctools-1.0.5.5.tar`

### file list

```diff
@@ -1,261 +1,121 @@
--rw-r--r--   0        0        0     1157 2022-07-11 05:48:16.488771 sfctools-1.0.5.4/LICENSE
--rw-r--r--   0        0        0     1620 2023-05-02 06:30:42.897545 sfctools-1.0.5.4/pyproject.toml
--rw-r--r--   0        0        0     1308 2023-03-20 13:09:06.583059 sfctools-1.0.5.4/README.md
--rw-r--r--   0        0        0     1938 2022-09-30 18:37:37.788985 sfctools-1.0.5.4/sfctools/__init__.py
--rw-r--r--   0        0        0     2655 2023-03-20 13:09:02.730363 sfctools-1.0.5.4/sfctools/__main__.py
--rw-r--r--   0        0        0        0 2022-07-11 05:48:24.669104 sfctools-1.0.5.4/sfctools/automation/__init__.py
--rw-r--r--   0        0        0      181 2023-03-16 10:38:20.023327 sfctools-1.0.5.4/sfctools/automation/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      174 2022-07-11 05:48:24.852145 sfctools-1.0.5.4/sfctools/automation/__pycache__/__init__.cpython-37.pyc
--rw-r--r--   0        0        0      161 2022-07-14 14:53:28.114796 sfctools-1.0.5.4/sfctools/automation/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0     8951 2022-07-11 05:48:24.892154 sfctools-1.0.5.4/sfctools/automation/__pycache__/calibration.cpython-37.pyc
--rw-r--r--   0        0        0     8898 2022-07-14 14:53:28.119798 sfctools-1.0.5.4/sfctools/automation/__pycache__/calibration.cpython-39.pyc
--rw-r--r--   0        0        0     4367 2023-03-16 10:38:20.031582 sfctools-1.0.5.4/sfctools/automation/__pycache__/runner.cpython-310.pyc
--rw-r--r--   0        0        0     4193 2022-07-11 05:48:24.932106 sfctools-1.0.5.4/sfctools/automation/__pycache__/runner.cpython-37.pyc
--rw-r--r--   0        0        0     4333 2022-09-30 16:40:10.831925 sfctools-1.0.5.4/sfctools/automation/__pycache__/runner.cpython-39.pyc
--rw-r--r--   0        0        0    10574 2023-03-20 13:09:06.605805 sfctools-1.0.5.4/sfctools/automation/calibration.py
--rw-r--r--   0        0        0    14589 2023-03-20 13:09:06.606808 sfctools-1.0.5.4/sfctools/automation/cgesolver.py
--rw-r--r--   0        0        0       75 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/automation/README.md
--rw-r--r--   0        0        0     5077 2022-09-30 16:39:54.806932 sfctools-1.0.5.4/sfctools/automation/runner.py
--rw-r--r--   0        0        0        0 2022-07-11 05:48:24.973114 sfctools-1.0.5.4/sfctools/bottomup/__init__.py
--rw-r--r--   0        0        0      179 2023-03-16 10:38:19.102455 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      172 2022-07-11 05:48:25.178556 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/__init__.cpython-37.pyc
--rw-r--r--   0        0        0      159 2022-07-14 14:53:26.693846 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0     8523 2023-03-16 10:38:19.499116 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/matching.cpython-310.pyc
--rw-r--r--   0        0        0     6980 2022-07-11 05:48:25.218566 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/matching.cpython-37.pyc
--rw-r--r--   0        0        0     8669 2023-01-19 10:02:01.106949 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/matching.cpython-39.pyc
--rw-r--r--   0        0        0    11963 2022-07-11 05:48:25.261577 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/productiontree.cpython-37.pyc
--rw-r--r--   0        0        0    11869 2023-03-16 08:20:45.496012 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/productiontree.cpython-39.pyc
--rw-r--r--   0        0        0     5897 2023-03-16 10:38:19.114458 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/stock_manager.cpython-310.pyc
--rw-r--r--   0        0        0     5944 2022-07-11 05:48:25.303584 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/stock_manager.cpython-37.pyc
--rw-r--r--   0        0        0     5923 2022-07-14 14:53:26.695845 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/stock_manager.cpython-39.pyc
--rw-r--r--   0        0        0     2864 2022-07-11 05:48:25.347595 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/treestruct.cpython-37.pyc
--rw-r--r--   0        0        0     2865 2022-07-14 14:53:28.124799 sfctools-1.0.5.4/sfctools/bottomup/__pycache__/treestruct.cpython-39.pyc
--rw-r--r--   0        0        0     8900 2023-03-20 13:09:02.731669 sfctools-1.0.5.4/sfctools/bottomup/matching.py
--rw-r--r--   0        0        0    17465 2023-03-20 13:09:06.607816 sfctools-1.0.5.4/sfctools/bottomup/productiontree.py
--rw-r--r--   0        0        0     6904 2022-07-11 05:48:25.096539 sfctools-1.0.5.4/sfctools/bottomup/stock_manager.py
--rw-r--r--   0        0        0     2737 2022-07-11 05:48:25.136548 sfctools-1.0.5.4/sfctools/bottomup/treestruct.py
--rw-r--r--   0        0        0        0 2022-09-30 17:46:40.211773 sfctools-1.0.5.4/sfctools/core/__init__.py
--rw-r--r--   0        0        0      175 2023-03-16 10:38:18.224225 sfctools-1.0.5.4/sfctools/core/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      168 2022-07-11 05:48:25.714915 sfctools-1.0.5.4/sfctools/core/__pycache__/__init__.cpython-37.pyc
--rw-r--r--   0        0        0      173 2022-09-30 18:17:01.307791 sfctools-1.0.5.4/sfctools/core/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0     7081 2023-03-16 10:38:18.232227 sfctools-1.0.5.4/sfctools/core/__pycache__/agent.cpython-310.pyc
--rw-r--r--   0        0        0     7065 2022-07-11 05:48:25.754924 sfctools-1.0.5.4/sfctools/core/__pycache__/agent.cpython-37.pyc
--rw-r--r--   0        0        0     7116 2022-09-30 18:17:01.309791 sfctools-1.0.5.4/sfctools/core/__pycache__/agent.cpython-39.pyc
--rw-r--r--   0        0        0     2519 2023-03-16 10:38:18.462762 sfctools-1.0.5.4/sfctools/core/__pycache__/clock.cpython-310.pyc
--rw-r--r--   0        0        0     2228 2022-07-11 05:48:25.792933 sfctools-1.0.5.4/sfctools/core/__pycache__/clock.cpython-37.pyc
--rw-r--r--   0        0        0     2523 2022-10-06 07:42:06.067716 sfctools-1.0.5.4/sfctools/core/__pycache__/clock.cpython-39.pyc
--rw-r--r--   0        0        0      700 2023-03-16 10:38:18.488869 sfctools-1.0.5.4/sfctools/core/__pycache__/custom_warnings.cpython-310.pyc
--rw-r--r--   0        0        0      689 2022-07-11 05:48:25.831942 sfctools-1.0.5.4/sfctools/core/__pycache__/custom_warnings.cpython-37.pyc
--rw-r--r--   0        0        0      697 2023-03-20 10:43:57.805837 sfctools-1.0.5.4/sfctools/core/__pycache__/custom_warnings.cpython-39.pyc
--rw-r--r--   0        0        0    12097 2023-03-16 10:38:19.125461 sfctools-1.0.5.4/sfctools/core/__pycache__/flow_matrix.cpython-310.pyc
--rw-r--r--   0        0        0    10804 2022-07-11 05:48:25.870600 sfctools-1.0.5.4/sfctools/core/__pycache__/flow_matrix.cpython-37.pyc
--rw-r--r--   0        0        0    12108 2023-03-15 14:52:01.430183 sfctools-1.0.5.4/sfctools/core/__pycache__/flow_matrix.cpython-39.pyc
--rw-r--r--   0        0        0     9045 2023-03-16 10:38:19.069972 sfctools-1.0.5.4/sfctools/core/__pycache__/settings.cpython-310.pyc
--rw-r--r--   0        0        0     8563 2022-07-11 05:48:25.909608 sfctools-1.0.5.4/sfctools/core/__pycache__/settings.cpython-37.pyc
--rw-r--r--   0        0        0     8975 2023-03-20 11:25:40.651219 sfctools-1.0.5.4/sfctools/core/__pycache__/settings.cpython-39.pyc
--rw-r--r--   0        0        0     1115 2023-03-16 10:38:18.468828 sfctools-1.0.5.4/sfctools/core/__pycache__/singleton.cpython-310.pyc
--rw-r--r--   0        0        0     1100 2022-07-11 05:48:25.947509 sfctools-1.0.5.4/sfctools/core/__pycache__/singleton.cpython-37.pyc
--rw-r--r--   0        0        0     1111 2022-10-06 07:42:06.067716 sfctools-1.0.5.4/sfctools/core/__pycache__/singleton.cpython-39.pyc
--rw-r--r--   0        0        0     5689 2023-03-16 10:38:18.240234 sfctools-1.0.5.4/sfctools/core/__pycache__/world.cpython-310.pyc
--rw-r--r--   0        0        0     5101 2022-07-11 05:48:25.984517 sfctools-1.0.5.4/sfctools/core/__pycache__/world.cpython-37.pyc
--rw-r--r--   0        0        0     5678 2023-01-19 10:02:00.514230 sfctools-1.0.5.4/sfctools/core/__pycache__/world.cpython-39.pyc
--rw-r--r--   0        0        0     7572 2022-09-30 18:03:18.887479 sfctools-1.0.5.4/sfctools/core/agent.py
--rw-r--r--   0        0        0     2249 2022-10-06 06:50:49.792046 sfctools-1.0.5.4/sfctools/core/clock.py
--rw-r--r--   0        0        0      495 2023-03-20 13:09:06.608843 sfctools-1.0.5.4/sfctools/core/custom_warnings.py
--rw-r--r--   0        0        0    15032 2023-03-20 13:09:06.609847 sfctools-1.0.5.4/sfctools/core/flow_matrix.py
--rw-r--r--   0        0        0    11632 2023-03-20 13:09:06.609847 sfctools-1.0.5.4/sfctools/core/settings.py
--rw-r--r--   0        0        0      661 2022-10-06 06:49:21.703590 sfctools-1.0.5.4/sfctools/core/singleton.py
--rw-r--r--   0        0        0     7304 2023-03-20 13:09:02.733973 sfctools-1.0.5.4/sfctools/core/world.py
--rw-r--r--   0        0        0        0 2022-07-11 05:48:26.022730 sfctools-1.0.5.4/sfctools/datastructs/__init__.py
--rw-r--r--   0        0        0      182 2023-03-16 10:38:18.241287 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      175 2022-07-11 05:48:26.477116 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/__init__.cpython-37.pyc
--rw-r--r--   0        0        0      162 2022-07-14 14:53:25.760835 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0    21890 2023-03-16 10:38:19.059018 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/balance.cpython-310.pyc
--rw-r--r--   0        0        0    16862 2022-07-11 05:48:26.516125 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/balance.cpython-37.pyc
--rw-r--r--   0        0        0    21984 2023-03-16 07:14:59.247947 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/balance.cpython-39.pyc
--rw-r--r--   0        0        0    13764 2023-03-16 10:38:19.488458 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/bank_order_book.cpython-310.pyc
--rw-r--r--   0        0        0    13090 2022-07-11 05:48:26.560135 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/bank_order_book.cpython-37.pyc
--rw-r--r--   0        0        0    13939 2023-01-19 10:02:01.103949 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/bank_order_book.cpython-39.pyc
--rw-r--r--   0        0        0     6602 2023-03-16 10:38:19.464002 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-310.pyc
--rw-r--r--   0        0        0     5819 2022-07-11 05:48:26.603144 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-37.pyc
--rw-r--r--   0        0        0     6634 2023-02-07 11:42:52.752256 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-39.pyc
--rw-r--r--   0        0        0     4736 2023-03-16 10:38:18.251830 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/collection.cpython-310.pyc
--rw-r--r--   0        0        0     4707 2022-07-11 05:48:26.644154 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/collection.cpython-37.pyc
--rw-r--r--   0        0        0     4720 2022-07-14 14:53:25.761835 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/collection.cpython-39.pyc
--rw-r--r--   0        0        0    13268 2023-03-16 10:38:19.455788 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/income_statement.cpython-310.pyc
--rw-r--r--   0        0        0    13260 2022-07-11 05:48:26.686163 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/income_statement.cpython-37.pyc
--rw-r--r--   0        0        0    13330 2023-01-19 10:02:01.098948 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/income_statement.cpython-39.pyc
--rw-r--r--   0        0        0     5641 2023-03-16 10:38:20.001156 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/inventory.cpython-310.pyc
--rw-r--r--   0        0        0     5657 2022-07-11 05:48:26.723171 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/inventory.cpython-37.pyc
--rw-r--r--   0        0        0     5611 2022-07-14 14:53:28.110796 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/inventory.cpython-39.pyc
--rw-r--r--   0        0        0     5165 2023-03-16 10:38:20.013167 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/market_registry.cpython-310.pyc
--rw-r--r--   0        0        0     5145 2022-07-11 05:48:26.760179 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/market_registry.cpython-37.pyc
--rw-r--r--   0        0        0     5169 2022-07-14 14:53:28.111795 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/market_registry.cpython-39.pyc
--rw-r--r--   0        0        0     5830 2023-03-16 10:38:19.476803 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/signalslot.cpython-310.pyc
--rw-r--r--   0        0        0     6108 2022-07-11 05:48:26.796187 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/signalslot.cpython-37.pyc
--rw-r--r--   0        0        0     6004 2022-07-14 14:53:28.104795 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/signalslot.cpython-39.pyc
--rw-r--r--   0        0        0     3673 2023-03-16 10:38:20.021317 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/worker_registry.cpython-310.pyc
--rw-r--r--   0        0        0     3063 2022-07-11 05:48:26.831196 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/worker_registry.cpython-37.pyc
--rw-r--r--   0        0        0     3669 2022-10-06 07:42:06.567829 sfctools-1.0.5.4/sfctools/datastructs/__pycache__/worker_registry.cpython-39.pyc
--rw-r--r--   0        0        0    32494 2023-03-20 13:09:06.610850 sfctools-1.0.5.4/sfctools/datastructs/balance.py
--rw-r--r--   0        0        0    17441 2023-03-20 13:09:02.735065 sfctools-1.0.5.4/sfctools/datastructs/bank_order_book.py
--rw-r--r--   0        0        0     6175 2023-03-20 13:09:06.611852 sfctools-1.0.5.4/sfctools/datastructs/cash_flow_statement.py
--rw-r--r--   0        0        0     4900 2022-07-11 05:48:26.175050 sfctools-1.0.5.4/sfctools/datastructs/collection.py
--rw-r--r--   0        0        0    14241 2022-12-30 14:49:34.085439 sfctools-1.0.5.4/sfctools/datastructs/income_statement.py
--rw-r--r--   0        0        0     6043 2022-07-11 05:48:26.251065 sfctools-1.0.5.4/sfctools/datastructs/inventory.py
--rw-r--r--   0        0        0     4272 2022-07-11 05:48:26.289074 sfctools-1.0.5.4/sfctools/datastructs/market_registry.py
--rw-r--r--   0        0        0     5313 2022-07-11 05:48:26.401099 sfctools-1.0.5.4/sfctools/datastructs/signalslot.py
--rw-r--r--   0        0        0     2961 2022-10-05 17:45:14.259714 sfctools-1.0.5.4/sfctools/datastructs/worker_registry.py
--rw-r--r--   0        0        0      550 2023-03-20 13:09:06.612897 sfctools-1.0.5.4/sfctools/examples/__init__.py
--rw-r--r--   0        0        0      833 2023-03-20 09:18:37.178882 sfctools-1.0.5.4/sfctools/examples/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0     3007 2023-03-20 09:33:42.712207 sfctools-1.0.5.4/sfctools/examples/__pycache__/balance.cpython-39.pyc
--rw-r--r--   0        0        0     1454 2023-03-20 08:52:08.670778 sfctools-1.0.5.4/sfctools/examples/__pycache__/clock.cpython-39.pyc
--rw-r--r--   0        0        0     1593 2023-03-20 08:43:41.586115 sfctools-1.0.5.4/sfctools/examples/__pycache__/example_wrapper.cpython-39.pyc
--rw-r--r--   0        0        0     3895 2023-03-20 09:32:19.561606 sfctools-1.0.5.4/sfctools/examples/__pycache__/flowmatrix.cpython-39.pyc
--rw-r--r--   0        0        0     1447 2023-03-20 08:54:47.185338 sfctools-1.0.5.4/sfctools/examples/__pycache__/hello_agent.cpython-39.pyc
--rw-r--r--   0        0        0     1600 2023-03-20 08:54:47.195574 sfctools-1.0.5.4/sfctools/examples/__pycache__/inventory.cpython-39.pyc
--rw-r--r--   0        0        0     3730 2023-03-20 08:56:31.554149 sfctools-1.0.5.4/sfctools/examples/__pycache__/order_book.cpython-39.pyc
--rw-r--r--   0        0        0     1937 2023-03-20 08:54:47.193426 sfctools-1.0.5.4/sfctools/examples/__pycache__/signal_slot.cpython-39.pyc
--rw-r--r--   0        0        0     2491 2023-03-20 13:09:06.614389 sfctools-1.0.5.4/sfctools/examples/balance.py
--rw-r--r--   0        0        0     2091 2023-03-20 09:14:35.444195 sfctools-1.0.5.4/sfctools/examples/basic_example/__pycache__/basic_example.cpython-39.pyc
--rw-r--r--   0        0        0     1701 2023-03-20 13:09:06.615392 sfctools-1.0.5.4/sfctools/examples/basic_example/basic_example.py
--rw-r--r--   0        0        0      202 2023-03-20 13:09:06.615392 sfctools-1.0.5.4/sfctools/examples/basic_example/my_settings.yml
--rw-r--r--   0        0        0     1087 2023-03-20 13:09:06.616409 sfctools-1.0.5.4/sfctools/examples/clock.py
--rw-r--r--   0        0        0     1378 2023-03-20 13:09:06.616409 sfctools-1.0.5.4/sfctools/examples/example_wrapper.py
--rw-r--r--   0        0        0     2872 2023-03-20 09:33:42.718208 sfctools-1.0.5.4/sfctools/examples/exampleabm/__pycache__/model.cpython-39.pyc
--rw-r--r--   0        0        0        0 2023-03-20 13:09:06.616409 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/__init__.py
--rw-r--r--   0        0        0      204 2022-10-06 09:05:11.681416 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0     2159 2022-10-06 09:05:12.296862 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/__pycache__/government.cpython-39.pyc
--rw-r--r--   0        0        0     2219 2022-10-06 09:05:11.682417 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/__pycache__/household.cpython-39.pyc
--rw-r--r--   0        0        0     2369 2022-10-06 09:05:12.294862 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/__pycache__/production.cpython-39.pyc
--rw-r--r--   0        0        0     2824 2022-10-06 09:05:12.293860 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/__pycache__/transactions.cpython-39.pyc
--rw-r--r--   0        0        0     1845 2023-03-20 13:09:06.617415 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/government.py
--rw-r--r--   0        0        0     2370 2023-03-20 13:09:06.617415 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/household.py
--rw-r--r--   0        0        0     2198 2023-03-20 13:09:06.618422 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/production.py
--rw-r--r--   0        0        0     4365 2023-03-20 13:09:06.618422 sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/transactions.py
--rw-r--r--   0        0        0      910 2023-03-20 13:09:06.618422 sfctools-1.0.5.4/sfctools/examples/exampleabm/data/preprocess.py
--rw-r--r--   0        0        0    13152 2023-03-20 13:09:06.619427 sfctools-1.0.5.4/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt
--rw-r--r--   0        0        0      818 2023-03-20 13:09:06.619427 sfctools-1.0.5.4/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv
--rw-r--r--   0        0        0    31241 2023-03-20 13:09:06.621437 sfctools-1.0.5.4/sfctools/examples/exampleabm/figures/matrix.png
--rw-r--r--   0        0        0    42423 2023-03-20 13:09:06.622441 sfctools-1.0.5.4/sfctools/examples/exampleabm/figures/outputs.png
--rw-r--r--   0        0        0    43865 2023-03-20 13:09:06.623445 sfctools-1.0.5.4/sfctools/examples/exampleabm/figures/sankey.png
--rw-r--r--   0        0        0     1264 2023-03-20 13:09:06.623445 sfctools-1.0.5.4/sfctools/examples/exampleabm/info.md
--rw-r--r--   0        0        0     3730 2023-03-20 13:09:06.624450 sfctools-1.0.5.4/sfctools/examples/exampleabm/model.py
--rw-r--r--   0        0        0     1148 2023-03-20 13:09:06.624450 sfctools-1.0.5.4/sfctools/examples/exampleabm/settings.yml
--rw-r--r--   0        0        0     2805 2023-03-20 13:09:06.625458 sfctools-1.0.5.4/sfctools/examples/flowmatrix.py
--rw-r--r--   0        0        0      813 2023-03-20 13:09:06.625458 sfctools-1.0.5.4/sfctools/examples/hello_agent.py
--rw-r--r--   0        0        0     1168 2023-03-20 13:09:06.626464 sfctools-1.0.5.4/sfctools/examples/inventory.py
--rw-r--r--   0        0        0     2740 2023-03-20 09:33:42.726210 sfctools-1.0.5.4/sfctools/examples/market_example/__pycache__/market.cpython-39.pyc
--rw-r--r--   0        0        0     3748 2023-03-20 09:33:42.728212 sfctools-1.0.5.4/sfctools/examples/market_example/__pycache__/market2.cpython-39.pyc
--rw-r--r--   0        0        0     1783 2023-03-20 13:09:06.626464 sfctools-1.0.5.4/sfctools/examples/market_example/market.py
--rw-r--r--   0        0        0     2735 2023-03-20 13:09:06.627470 sfctools-1.0.5.4/sfctools/examples/market_example/market2.py
--rw-r--r--   0        0        0     1330 2023-03-20 09:33:42.730224 sfctools-1.0.5.4/sfctools/examples/monte_carlo/__pycache__/monte_carlo.cpython-39.pyc
--rw-r--r--   0        0        0      999 2023-03-20 13:09:06.628492 sfctools-1.0.5.4/sfctools/examples/monte_carlo/monte_carlo.py
--rw-r--r--   0        0        0       28 2023-03-20 13:09:06.628492 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/errors.txt
--rw-r--r--   0        0        0      418 2023-03-20 13:09:06.629556 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.0
--rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.1
--rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.2
--rw-r--r--   0        0        0      413 2023-03-20 13:09:06.630562 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.3
--rw-r--r--   0        0        0      417 2023-03-20 13:09:06.630562 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.4
--rw-r--r--   0        0        0      410 2023-03-20 13:09:06.631568 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.5
--rw-r--r--   0        0        0      417 2023-03-20 13:09:06.631568 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.6
--rw-r--r--   0        0        0      412 2023-03-20 13:09:06.632574 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.7
--rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.8
--rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.9
--rw-r--r--   0        0        0      527 2023-03-20 13:09:06.633581 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.txt
--rw-r--r--   0        0        0      258 2023-03-20 13:09:06.633581 sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/progress.txt
--rw-r--r--   0        0        0      184 2023-03-20 13:09:06.634587 sfctools-1.0.5.4/sfctools/examples/monte_carlo/testsettings.yml
--rw-r--r--   0        0        0     3411 2023-03-20 13:09:06.635591 sfctools-1.0.5.4/sfctools/examples/order_book.py
--rw-r--r--   0        0        0      124 2023-03-20 13:09:06.635591 sfctools-1.0.5.4/sfctools/examples/paper_example.py
--rw-r--r--   0        0        0     1471 2023-03-20 13:09:06.636593 sfctools-1.0.5.4/sfctools/examples/signal_slot.py
--rw-r--r--   0        0        0       27 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/.gitignore
--rw-r--r--   0        0        0      854 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/.gitlab-ci.yml
--rw-r--r--   0        0        0       39 2023-01-24 08:33:15.193475 sfctools-1.0.5.4/sfctools/gui/.pytest_cache/.gitignore
--rw-r--r--   0        0        0      191 2023-01-24 08:33:15.193475 sfctools-1.0.5.4/sfctools/gui/.pytest_cache/CACHEDIR.TAG
--rw-r--r--   0        0        0      310 2023-01-24 08:33:15.192472 sfctools-1.0.5.4/sfctools/gui/.pytest_cache/README.md
--rw-r--r--   0        0        0        2 2023-01-24 08:33:15.193475 sfctools-1.0.5.4/sfctools/gui/.pytest_cache/v/cache/nodeids
--rw-r--r--   0        0        0        2 2023-01-24 08:33:15.194472 sfctools-1.0.5.4/sfctools/gui/.pytest_cache/v/cache/stepwise
--rw-r--r--   0        0        0       64 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/__init__.py
--rw-r--r--   0        0        0      243 2023-03-16 10:38:20.055180 sfctools-1.0.5.4/sfctools/gui/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      241 2022-09-30 07:48:48.099780 sfctools-1.0.5.4/sfctools/gui/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0     1960 2023-03-16 10:38:20.062235 sfctools-1.0.5.4/sfctools/gui/__pycache__/attune_main.cpython-310.pyc
--rw-r--r--   0        0        0      855 2023-03-20 10:44:38.447093 sfctools-1.0.5.4/sfctools/gui/__pycache__/attune_main.cpython-39.pyc
--rw-r--r--   0        0        0     2005 2022-07-29 14:53:58.284631 sfctools-1.0.5.4/sfctools/gui/__pycache__/attune_starter.cpython-39.pyc
--rw-r--r--   0        0        0       41 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/attune/.gitignore
--rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/attune/__init__.py
--rw-r--r--   0        0        0      181 2023-03-16 10:38:20.177666 sfctools-1.0.5.4/sfctools/gui/attune/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      179 2022-08-10 04:14:09.129434 sfctools-1.0.5.4/sfctools/gui/attune/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0        0 2022-07-11 05:48:42.091729 sfctools-1.0.5.4/sfctools/gui/attune/projects/.gitkeep
--rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/attune/src/__init__.py
--rw-r--r--   0        0        0      185 2023-03-16 10:38:20.178668 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      183 2022-08-10 04:14:09.132435 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0    20459 2023-03-16 10:38:21.506165 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/agent_editor.cpython-310.pyc
--rw-r--r--   0        0        0    20423 2023-04-27 08:43:40.018893 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/agent_editor.cpython-39.pyc
--rw-r--r--   0        0        0    27791 2023-03-16 10:38:21.482759 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/draw_widget.cpython-310.pyc
--rw-r--r--   0        0        0    30587 2023-04-27 13:02:30.424086 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/draw_widget.cpython-39.pyc
--rw-r--r--   0        0        0    10246 2023-03-16 10:38:20.975792 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/mainloop_editor.cpython-310.pyc
--rw-r--r--   0        0        0    10586 2023-05-02 06:24:56.065214 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/mainloop_editor.cpython-39.pyc
--rw-r--r--   0        0        0     4761 2023-03-16 10:38:20.964542 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/mamba_interpreter2.cpython-310.pyc
--rw-r--r--   0        0        0     4821 2023-04-27 08:43:39.534405 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/mamba_interpreter2.cpython-39.pyc
--rw-r--r--   0        0        0    12619 2023-03-16 10:38:20.989896 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/output_display.cpython-310.pyc
--rw-r--r--   0        0        0    12551 2023-04-27 08:43:39.557140 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/output_display.cpython-39.pyc
--rw-r--r--   0        0        0     1695 2023-03-16 10:38:20.953703 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/pandasmodel.cpython-310.pyc
--rw-r--r--   0        0        0     1706 2023-04-27 08:43:39.525108 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/pandasmodel.cpython-39.pyc
--rw-r--r--   0        0        0    65699 2023-03-16 10:38:20.204674 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/qtattune.cpython-310.pyc
--rw-r--r--   0        0        0    68150 2023-05-02 06:14:03.972425 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/qtattune.cpython-39.pyc
--rw-r--r--   0        0        0     6502 2023-03-16 10:38:21.469679 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/resources.cpython-310.pyc
--rw-r--r--   0        0        0     6520 2022-08-10 04:14:13.291061 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/resources.cpython-39.pyc
--rw-r--r--   0        0        0     5017 2023-03-16 10:38:21.524693 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/theme_manager.cpython-310.pyc
--rw-r--r--   0        0        0     5152 2023-05-02 06:10:35.687431 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/theme_manager.cpython-39.pyc
--rw-r--r--   0        0        0     6646 2023-03-16 10:38:21.516295 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/yaml_editor.cpython-310.pyc
--rw-r--r--   0        0        0     9663 2023-05-02 06:24:56.286461 sfctools-1.0.5.4/sfctools/gui/attune/src/__pycache__/yaml_editor.cpython-39.pyc
--rw-r--r--   0        0        0    34561 2023-03-20 13:09:06.637593 sfctools-1.0.5.4/sfctools/gui/attune/src/agent_editor.py
--rw-r--r--   0        0        0     6944 2023-04-27 13:29:45.411196 sfctools-1.0.5.4/sfctools/gui/attune/src/code_editor.ui
--rw-r--r--   0        0        0    66127 2023-04-27 13:02:27.854230 sfctools-1.0.5.4/sfctools/gui/attune/src/draw_widget.py
--rw-r--r--   0        0        0     1645 2023-03-20 13:09:02.740428 sfctools-1.0.5.4/sfctools/gui/attune/src/income_viewer.ui
--rw-r--r--   0        0        0    13476 2023-05-02 06:24:19.629663 sfctools-1.0.5.4/sfctools/gui/attune/src/mainloop_editor.py
--rw-r--r--   0        0        0     8176 2023-03-20 13:09:02.741615 sfctools-1.0.5.4/sfctools/gui/attune/src/mamba_interpreter2.py
--rw-r--r--   0        0        0     1334 2023-03-20 13:09:06.640594 sfctools-1.0.5.4/sfctools/gui/attune/src/matrix_viewer.ui
--rw-r--r--   0        0        0    19411 2023-03-20 13:09:06.641594 sfctools-1.0.5.4/sfctools/gui/attune/src/output_display.py
--rw-r--r--   0        0        0    11200 2022-08-09 15:11:37.968071 sfctools-1.0.5.4/sfctools/gui/attune/src/output_display.ui
--rw-r--r--   0        0        0     1066 2023-04-27 08:43:06.249807 sfctools-1.0.5.4/sfctools/gui/attune/src/pandasmodel.py
--rw-r--r--   0        0        0   134123 2023-05-02 06:14:02.488168 sfctools-1.0.5.4/sfctools/gui/attune/src/qtattune.py
--rw-r--r--   0        0        0    24104 2022-08-09 15:11:37.968071 sfctools-1.0.5.4/sfctools/gui/attune/src/resources.py
--rw-r--r--   0        0        0      107 2022-08-09 15:11:37.968071 sfctools-1.0.5.4/sfctools/gui/attune/src/resources.qrc
--rw-r--r--   0        0        0     1259 2023-04-27 13:07:33.967008 sfctools-1.0.5.4/sfctools/gui/attune/src/search_dialog.ui
--rw-r--r--   0        0        0     5927 2023-03-20 13:09:06.643594 sfctools-1.0.5.4/sfctools/gui/attune/src/settings_edit.ui
--rw-r--r--   0        0        0     3012 2023-03-20 13:09:06.644595 sfctools-1.0.5.4/sfctools/gui/attune/src/simulation_edit.ui
--rw-r--r--   0        0        0      216 2023-03-20 13:09:02.744421 sfctools-1.0.5.4/sfctools/gui/attune/src/styles/bright/background.txt
--rw-r--r--   0        0        0     4020 2023-03-20 13:09:06.645595 sfctools-1.0.5.4/sfctools/gui/attune/src/styles/bright/main.txt
--rw-r--r--   0        0        0       62 2023-03-20 13:09:02.745871 sfctools-1.0.5.4/sfctools/gui/attune/src/styles/bright/tables.txt
--rw-r--r--   0        0        0      727 2023-03-20 13:09:02.746872 sfctools-1.0.5.4/sfctools/gui/attune/src/styles/dark/background.txt
--rw-r--r--   0        0        0     4228 2023-03-20 13:09:06.646595 sfctools-1.0.5.4/sfctools/gui/attune/src/styles/dark/main.txt
--rw-r--r--   0        0        0       37 2023-03-20 13:09:02.748074 sfctools-1.0.5.4/sfctools/gui/attune/src/styles/dark/tables.txt
--rw-r--r--   0        0        0     6964 2023-04-27 16:25:31.372347 sfctools-1.0.5.4/sfctools/gui/attune/src/theme_manager.py
--rw-r--r--   0        0        0    84670 2023-05-02 06:26:40.873896 sfctools-1.0.5.4/sfctools/gui/attune/src/transaction_designer_mainwindow.ui
--rw-r--r--   0        0        0    11636 2023-05-02 06:27:52.607491 sfctools-1.0.5.4/sfctools/gui/attune/src/yaml_editor.py
--rw-r--r--   0        0        0      357 2023-03-20 13:09:06.647595 sfctools-1.0.5.4/sfctools/gui/attune_main.py
--rw-r--r--   0        0        0      389 2023-03-20 13:09:06.648596 sfctools-1.0.5.4/sfctools/gui/attune_starter.py
--rw-r--r--   0        0        0    27804 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/CLA.pdf
--rw-r--r--   0        0        0     1434 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/CONTRIBUTING.md
--rw-r--r--   0        0        0     1157 2022-08-09 15:11:37.952444 sfctools-1.0.5.4/sfctools/gui/LICENSE
--rw-r--r--   0        0        0      819 2023-03-20 13:09:02.736482 sfctools-1.0.5.4/sfctools/gui/README.md
--rw-r--r--   0        0        0       47 2023-03-20 12:39:06.880624 sfctools-1.0.5.4/sfctools/gui/runner.py
--rw-r--r--   0        0        0      275 2023-04-27 11:35:47.715548 sfctools-1.0.5.4/sfctools/gui/sfctheme
--rw-r--r--   0        0        0        0 2022-07-11 05:48:26.867204 sfctools-1.0.5.4/sfctools/misc/__init__.py
--rw-r--r--   0        0        0      175 2023-03-16 10:38:20.032660 sfctools-1.0.5.4/sfctools/misc/__pycache__/__init__.cpython-310.pyc
--rw-r--r--   0        0        0      168 2022-07-11 05:48:27.008235 sfctools-1.0.5.4/sfctools/misc/__pycache__/__init__.cpython-37.pyc
--rw-r--r--   0        0        0      155 2022-07-14 14:53:28.094792 sfctools-1.0.5.4/sfctools/misc/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0    12027 2022-07-11 05:48:27.042672 sfctools-1.0.5.4/sfctools/misc/__pycache__/mpl_plotting.cpython-37.pyc
--rw-r--r--   0        0        0    13303 2023-03-16 07:14:59.951082 sfctools-1.0.5.4/sfctools/misc/__pycache__/mpl_plotting.cpython-39.pyc
--rw-r--r--   0        0        0     7596 2023-03-16 10:38:20.042421 sfctools-1.0.5.4/sfctools/misc/__pycache__/reporting_sheet.cpython-310.pyc
--rw-r--r--   0        0        0     6074 2022-07-11 05:48:27.075993 sfctools-1.0.5.4/sfctools/misc/__pycache__/reporting_sheet.cpython-37.pyc
--rw-r--r--   0        0        0     7626 2023-03-16 07:21:02.159986 sfctools-1.0.5.4/sfctools/misc/__pycache__/reporting_sheet.cpython-39.pyc
--rw-r--r--   0        0        0     6427 2023-03-16 10:38:21.002901 sfctools-1.0.5.4/sfctools/misc/__pycache__/timeseries.cpython-310.pyc
--rw-r--r--   0        0        0     6532 2022-07-11 05:48:27.110000 sfctools-1.0.5.4/sfctools/misc/__pycache__/timeseries.cpython-37.pyc
--rw-r--r--   0        0        0     6401 2022-07-14 14:53:28.126799 sfctools-1.0.5.4/sfctools/misc/__pycache__/timeseries.cpython-39.pyc
--rw-r--r--   0        0        0    18645 2023-03-20 13:09:06.649596 sfctools-1.0.5.4/sfctools/misc/mpl_plotting.py
--rw-r--r--   0        0        0     7795 2023-03-20 13:09:06.650596 sfctools-1.0.5.4/sfctools/misc/reporting_sheet.py
--rw-r--r--   0        0        0     7074 2022-07-11 05:48:26.971227 sfctools-1.0.5.4/sfctools/misc/timeseries.py
--rw-r--r--   0        0        0     3303 1970-01-01 00:00:00.000000 sfctools-1.0.5.4/setup.py
--rw-r--r--   0        0        0     2838 1970-01-01 00:00:00.000000 sfctools-1.0.5.4/PKG-INFO
+-rw-r--r--   0        0        0     1157 2022-07-11 05:48:16.488771 sfctools-1.0.5.5/LICENSE
+-rw-r--r--   0        0        0     1620 2023-05-02 09:39:43.191914 sfctools-1.0.5.5/pyproject.toml
+-rw-r--r--   0        0        0     1308 2023-03-20 13:09:06.583059 sfctools-1.0.5.5/README.md
+-rw-r--r--   0        0        0     1938 2022-09-30 18:37:37.788985 sfctools-1.0.5.5/sfctools/__init__.py
+-rw-r--r--   0        0        0     2655 2023-03-20 13:09:02.730363 sfctools-1.0.5.5/sfctools/__main__.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:24.669104 sfctools-1.0.5.5/sfctools/automation/__init__.py
+-rw-r--r--   0        0        0    10574 2023-03-20 13:09:06.605805 sfctools-1.0.5.5/sfctools/automation/calibration.py
+-rw-r--r--   0        0        0    14589 2023-03-20 13:09:06.606808 sfctools-1.0.5.5/sfctools/automation/cgesolver.py
+-rw-r--r--   0        0        0       75 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/automation/README.md
+-rw-r--r--   0        0        0     5077 2022-09-30 16:39:54.806932 sfctools-1.0.5.5/sfctools/automation/runner.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:24.973114 sfctools-1.0.5.5/sfctools/bottomup/__init__.py
+-rw-r--r--   0        0        0     8900 2023-03-20 13:09:02.731669 sfctools-1.0.5.5/sfctools/bottomup/matching.py
+-rw-r--r--   0        0        0    17465 2023-03-20 13:09:06.607816 sfctools-1.0.5.5/sfctools/bottomup/productiontree.py
+-rw-r--r--   0        0        0     6904 2022-07-11 05:48:25.096539 sfctools-1.0.5.5/sfctools/bottomup/stock_manager.py
+-rw-r--r--   0        0        0     2737 2022-07-11 05:48:25.136548 sfctools-1.0.5.5/sfctools/bottomup/treestruct.py
+-rw-r--r--   0        0        0        0 2022-09-30 17:46:40.211773 sfctools-1.0.5.5/sfctools/core/__init__.py
+-rw-r--r--   0        0        0     7572 2022-09-30 18:03:18.887479 sfctools-1.0.5.5/sfctools/core/agent.py
+-rw-r--r--   0        0        0     2249 2022-10-06 06:50:49.792046 sfctools-1.0.5.5/sfctools/core/clock.py
+-rw-r--r--   0        0        0      495 2023-03-20 13:09:06.608843 sfctools-1.0.5.5/sfctools/core/custom_warnings.py
+-rw-r--r--   0        0        0    15032 2023-03-20 13:09:06.609847 sfctools-1.0.5.5/sfctools/core/flow_matrix.py
+-rw-r--r--   0        0        0    11632 2023-03-20 13:09:06.609847 sfctools-1.0.5.5/sfctools/core/settings.py
+-rw-r--r--   0        0        0      661 2022-10-06 06:49:21.703590 sfctools-1.0.5.5/sfctools/core/singleton.py
+-rw-r--r--   0        0        0     7304 2023-03-20 13:09:02.733973 sfctools-1.0.5.5/sfctools/core/world.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:26.022730 sfctools-1.0.5.5/sfctools/datastructs/__init__.py
+-rw-r--r--   0        0        0    32494 2023-03-20 13:09:06.610850 sfctools-1.0.5.5/sfctools/datastructs/balance.py
+-rw-r--r--   0        0        0    17441 2023-03-20 13:09:02.735065 sfctools-1.0.5.5/sfctools/datastructs/bank_order_book.py
+-rw-r--r--   0        0        0     6175 2023-03-20 13:09:06.611852 sfctools-1.0.5.5/sfctools/datastructs/cash_flow_statement.py
+-rw-r--r--   0        0        0     4900 2022-07-11 05:48:26.175050 sfctools-1.0.5.5/sfctools/datastructs/collection.py
+-rw-r--r--   0        0        0    14241 2022-12-30 14:49:34.085439 sfctools-1.0.5.5/sfctools/datastructs/income_statement.py
+-rw-r--r--   0        0        0     6043 2022-07-11 05:48:26.251065 sfctools-1.0.5.5/sfctools/datastructs/inventory.py
+-rw-r--r--   0        0        0     4272 2022-07-11 05:48:26.289074 sfctools-1.0.5.5/sfctools/datastructs/market_registry.py
+-rw-r--r--   0        0        0     5313 2022-07-11 05:48:26.401099 sfctools-1.0.5.5/sfctools/datastructs/signalslot.py
+-rw-r--r--   0        0        0     2961 2022-10-05 17:45:14.259714 sfctools-1.0.5.5/sfctools/datastructs/worker_registry.py
+-rw-r--r--   0        0        0      550 2023-03-20 13:09:06.612897 sfctools-1.0.5.5/sfctools/examples/__init__.py
+-rw-r--r--   0        0        0     2491 2023-03-20 13:09:06.614389 sfctools-1.0.5.5/sfctools/examples/balance.py
+-rw-r--r--   0        0        0     1701 2023-03-20 13:09:06.615392 sfctools-1.0.5.5/sfctools/examples/basic_example/basic_example.py
+-rw-r--r--   0        0        0      202 2023-03-20 13:09:06.615392 sfctools-1.0.5.5/sfctools/examples/basic_example/my_settings.yml
+-rw-r--r--   0        0        0     1087 2023-03-20 13:09:06.616409 sfctools-1.0.5.5/sfctools/examples/clock.py
+-rw-r--r--   0        0        0     1378 2023-03-20 13:09:06.616409 sfctools-1.0.5.5/sfctools/examples/example_wrapper.py
+-rw-r--r--   0        0        0        0 2023-03-20 13:09:06.616409 sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/__init__.py
+-rw-r--r--   0        0        0     1845 2023-03-20 13:09:06.617415 sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/government.py
+-rw-r--r--   0        0        0     2370 2023-03-20 13:09:06.617415 sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/household.py
+-rw-r--r--   0        0        0     2198 2023-03-20 13:09:06.618422 sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/production.py
+-rw-r--r--   0        0        0     4365 2023-03-20 13:09:06.618422 sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/transactions.py
+-rw-r--r--   0        0        0      910 2023-03-20 13:09:06.618422 sfctools-1.0.5.5/sfctools/examples/exampleabm/data/preprocess.py
+-rw-r--r--   0        0        0    13152 2023-03-20 13:09:06.619427 sfctools-1.0.5.5/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt
+-rw-r--r--   0        0        0      818 2023-03-20 13:09:06.619427 sfctools-1.0.5.5/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv
+-rw-r--r--   0        0        0    31241 2023-03-20 13:09:06.621437 sfctools-1.0.5.5/sfctools/examples/exampleabm/figures/matrix.png
+-rw-r--r--   0        0        0    42423 2023-03-20 13:09:06.622441 sfctools-1.0.5.5/sfctools/examples/exampleabm/figures/outputs.png
+-rw-r--r--   0        0        0    43865 2023-03-20 13:09:06.623445 sfctools-1.0.5.5/sfctools/examples/exampleabm/figures/sankey.png
+-rw-r--r--   0        0        0     1264 2023-03-20 13:09:06.623445 sfctools-1.0.5.5/sfctools/examples/exampleabm/info.md
+-rw-r--r--   0        0        0     3730 2023-03-20 13:09:06.624450 sfctools-1.0.5.5/sfctools/examples/exampleabm/model.py
+-rw-r--r--   0        0        0     1148 2023-03-20 13:09:06.624450 sfctools-1.0.5.5/sfctools/examples/exampleabm/settings.yml
+-rw-r--r--   0        0        0     2805 2023-03-20 13:09:06.625458 sfctools-1.0.5.5/sfctools/examples/flowmatrix.py
+-rw-r--r--   0        0        0      813 2023-03-20 13:09:06.625458 sfctools-1.0.5.5/sfctools/examples/hello_agent.py
+-rw-r--r--   0        0        0     1168 2023-03-20 13:09:06.626464 sfctools-1.0.5.5/sfctools/examples/inventory.py
+-rw-r--r--   0        0        0     1783 2023-03-20 13:09:06.626464 sfctools-1.0.5.5/sfctools/examples/market_example/market.py
+-rw-r--r--   0        0        0     2735 2023-03-20 13:09:06.627470 sfctools-1.0.5.5/sfctools/examples/market_example/market2.py
+-rw-r--r--   0        0        0      999 2023-03-20 13:09:06.628492 sfctools-1.0.5.5/sfctools/examples/monte_carlo/monte_carlo.py
+-rw-r--r--   0        0        0       28 2023-03-20 13:09:06.628492 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/errors.txt
+-rw-r--r--   0        0        0      418 2023-03-20 13:09:06.629556 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.0
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.1
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.2
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.630562 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.3
+-rw-r--r--   0        0        0      417 2023-03-20 13:09:06.630562 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.4
+-rw-r--r--   0        0        0      410 2023-03-20 13:09:06.631568 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.5
+-rw-r--r--   0        0        0      417 2023-03-20 13:09:06.631568 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.6
+-rw-r--r--   0        0        0      412 2023-03-20 13:09:06.632574 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.7
+-rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.8
+-rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.9
+-rw-r--r--   0        0        0      527 2023-03-20 13:09:06.633581 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.txt
+-rw-r--r--   0        0        0      258 2023-03-20 13:09:06.633581 sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/progress.txt
+-rw-r--r--   0        0        0      184 2023-03-20 13:09:06.634587 sfctools-1.0.5.5/sfctools/examples/monte_carlo/testsettings.yml
+-rw-r--r--   0        0        0     3411 2023-03-20 13:09:06.635591 sfctools-1.0.5.5/sfctools/examples/order_book.py
+-rw-r--r--   0        0        0      124 2023-03-20 13:09:06.635591 sfctools-1.0.5.5/sfctools/examples/paper_example.py
+-rw-r--r--   0        0        0     1471 2023-03-20 13:09:06.636593 sfctools-1.0.5.5/sfctools/examples/signal_slot.py
+-rw-r--r--   0        0        0       27 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/.gitignore
+-rw-r--r--   0        0        0      854 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/.gitlab-ci.yml
+-rw-r--r--   0        0        0       64 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/__init__.py
+-rw-r--r--   0        0        0       41 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/attune/.gitignore
+-rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/attune/__init__.py
+-rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/attune/src/__init__.py
+-rw-r--r--   0        0        0    34561 2023-03-20 13:09:06.637593 sfctools-1.0.5.5/sfctools/gui/attune/src/agent_editor.py
+-rw-r--r--   0        0        0     6944 2023-04-27 13:29:45.411196 sfctools-1.0.5.5/sfctools/gui/attune/src/code_editor.ui
+-rw-r--r--   0        0        0    66447 2023-05-02 09:33:59.109731 sfctools-1.0.5.5/sfctools/gui/attune/src/draw_widget.py
+-rw-r--r--   0        0        0     1645 2023-03-20 13:09:02.740428 sfctools-1.0.5.5/sfctools/gui/attune/src/income_viewer.ui
+-rw-r--r--   0        0        0    13476 2023-05-02 06:24:19.629663 sfctools-1.0.5.5/sfctools/gui/attune/src/mainloop_editor.py
+-rw-r--r--   0        0        0     8176 2023-03-20 13:09:02.741615 sfctools-1.0.5.5/sfctools/gui/attune/src/mamba_interpreter2.py
+-rw-r--r--   0        0        0     1334 2023-03-20 13:09:06.640594 sfctools-1.0.5.5/sfctools/gui/attune/src/matrix_viewer.ui
+-rw-r--r--   0        0        0    19411 2023-03-20 13:09:06.641594 sfctools-1.0.5.5/sfctools/gui/attune/src/output_display.py
+-rw-r--r--   0        0        0    11200 2022-08-09 15:11:37.968071 sfctools-1.0.5.5/sfctools/gui/attune/src/output_display.ui
+-rw-r--r--   0        0        0     1066 2023-04-27 08:43:06.249807 sfctools-1.0.5.5/sfctools/gui/attune/src/pandasmodel.py
+-rw-r--r--   0        0        0   134543 2023-05-02 09:39:24.656669 sfctools-1.0.5.5/sfctools/gui/attune/src/qtattune.py
+-rw-r--r--   0        0        0    24104 2022-08-09 15:11:37.968071 sfctools-1.0.5.5/sfctools/gui/attune/src/resources.py
+-rw-r--r--   0        0        0      107 2022-08-09 15:11:37.968071 sfctools-1.0.5.5/sfctools/gui/attune/src/resources.qrc
+-rw-r--r--   0        0        0     1259 2023-04-27 13:07:33.967008 sfctools-1.0.5.5/sfctools/gui/attune/src/search_dialog.ui
+-rw-r--r--   0        0        0     5927 2023-03-20 13:09:06.643594 sfctools-1.0.5.5/sfctools/gui/attune/src/settings_edit.ui
+-rw-r--r--   0        0        0     3012 2023-03-20 13:09:06.644595 sfctools-1.0.5.5/sfctools/gui/attune/src/simulation_edit.ui
+-rw-r--r--   0        0        0      216 2023-03-20 13:09:02.744421 sfctools-1.0.5.5/sfctools/gui/attune/src/styles/bright/background.txt
+-rw-r--r--   0        0        0     4020 2023-03-20 13:09:06.645595 sfctools-1.0.5.5/sfctools/gui/attune/src/styles/bright/main.txt
+-rw-r--r--   0        0        0       62 2023-03-20 13:09:02.745871 sfctools-1.0.5.5/sfctools/gui/attune/src/styles/bright/tables.txt
+-rw-r--r--   0        0        0      727 2023-03-20 13:09:02.746872 sfctools-1.0.5.5/sfctools/gui/attune/src/styles/dark/background.txt
+-rw-r--r--   0        0        0     4228 2023-03-20 13:09:06.646595 sfctools-1.0.5.5/sfctools/gui/attune/src/styles/dark/main.txt
+-rw-r--r--   0        0        0       37 2023-03-20 13:09:02.748074 sfctools-1.0.5.5/sfctools/gui/attune/src/styles/dark/tables.txt
+-rw-r--r--   0        0        0     6964 2023-04-27 16:25:31.372347 sfctools-1.0.5.5/sfctools/gui/attune/src/theme_manager.py
+-rw-r--r--   0        0        0    84670 2023-05-02 09:36:58.487399 sfctools-1.0.5.5/sfctools/gui/attune/src/transaction_designer_mainwindow.ui
+-rw-r--r--   0        0        0    11636 2023-05-02 06:27:52.607491 sfctools-1.0.5.5/sfctools/gui/attune/src/yaml_editor.py
+-rw-r--r--   0        0        0      357 2023-03-20 13:09:06.647595 sfctools-1.0.5.5/sfctools/gui/attune_main.py
+-rw-r--r--   0        0        0      389 2023-03-20 13:09:06.648596 sfctools-1.0.5.5/sfctools/gui/attune_starter.py
+-rw-r--r--   0        0        0    27804 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/CLA.pdf
+-rw-r--r--   0        0        0     1434 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/CONTRIBUTING.md
+-rw-r--r--   0        0        0     1157 2022-08-09 15:11:37.952444 sfctools-1.0.5.5/sfctools/gui/LICENSE
+-rw-r--r--   0        0        0      819 2023-03-20 13:09:02.736482 sfctools-1.0.5.5/sfctools/gui/README.md
+-rw-r--r--   0        0        0       47 2023-03-20 12:39:06.880624 sfctools-1.0.5.5/sfctools/gui/runner.py
+-rw-r--r--   0        0        0      275 2023-04-27 11:35:47.715548 sfctools-1.0.5.5/sfctools/gui/sfctheme
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:26.867204 sfctools-1.0.5.5/sfctools/misc/__init__.py
+-rw-r--r--   0        0        0    18645 2023-03-20 13:09:06.649596 sfctools-1.0.5.5/sfctools/misc/mpl_plotting.py
+-rw-r--r--   0        0        0     7795 2023-03-20 13:09:06.650596 sfctools-1.0.5.5/sfctools/misc/reporting_sheet.py
+-rw-r--r--   0        0        0     7074 2022-07-11 05:48:26.971227 sfctools-1.0.5.5/sfctools/misc/timeseries.py
+-rw-r--r--   0        0        0     3164 1970-01-01 00:00:00.000000 sfctools-1.0.5.5/setup.py
+-rw-r--r--   0        0        0     2838 1970-01-01 00:00:00.000000 sfctools-1.0.5.5/PKG-INFO
```

### Comparing `sfctools-1.0.5.4/LICENSE` & `sfctools-1.0.5.5/LICENSE`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/pyproject.toml` & `sfctools-1.0.5.5/pyproject.toml`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "sfctools"
-version = "1.0.5.4"
+version = "1.0.5.5"
 description = "Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields."
 
 authors = ["Thomas Baldauf <thomas.baldauf@dlr.de>"]
 license = "MIT"
 maintainers = ["Thomas Baldauf, Benjamin Fuchs <thomas.baldauf@dlr.de, benjamin.fuchs@dlr.de>"]
 homepage = 'https://gitlab.com/dlr-ve/esy/sfctools/framework'
 documentation = 'https://sfctools-framework.readthedocs.io/en/latest/'
```

### Comparing `sfctools-1.0.5.4/README.md` & `sfctools-1.0.5.5/README.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/__init__.py` & `sfctools-1.0.5.5/sfctools/__init__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/__main__.py` & `sfctools-1.0.5.5/sfctools/__main__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/automation/calibration.py` & `sfctools-1.0.5.5/sfctools/automation/calibration.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/automation/cgesolver.py` & `sfctools-1.0.5.5/sfctools/automation/cgesolver.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/automation/runner.py` & `sfctools-1.0.5.5/sfctools/automation/runner.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/bottomup/matching.py` & `sfctools-1.0.5.5/sfctools/bottomup/matching.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/bottomup/productiontree.py` & `sfctools-1.0.5.5/sfctools/bottomup/productiontree.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/bottomup/stock_manager.py` & `sfctools-1.0.5.5/sfctools/bottomup/stock_manager.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/bottomup/treestruct.py` & `sfctools-1.0.5.5/sfctools/bottomup/treestruct.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/core/agent.py` & `sfctools-1.0.5.5/sfctools/core/agent.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/core/clock.py` & `sfctools-1.0.5.5/sfctools/core/clock.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/core/flow_matrix.py` & `sfctools-1.0.5.5/sfctools/core/flow_matrix.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/core/settings.py` & `sfctools-1.0.5.5/sfctools/core/settings.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/core/singleton.py` & `sfctools-1.0.5.5/sfctools/core/singleton.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/core/world.py` & `sfctools-1.0.5.5/sfctools/core/world.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/balance.py` & `sfctools-1.0.5.5/sfctools/datastructs/balance.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/bank_order_book.py` & `sfctools-1.0.5.5/sfctools/datastructs/bank_order_book.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/cash_flow_statement.py` & `sfctools-1.0.5.5/sfctools/datastructs/cash_flow_statement.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/collection.py` & `sfctools-1.0.5.5/sfctools/datastructs/collection.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/income_statement.py` & `sfctools-1.0.5.5/sfctools/datastructs/income_statement.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/inventory.py` & `sfctools-1.0.5.5/sfctools/datastructs/inventory.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/market_registry.py` & `sfctools-1.0.5.5/sfctools/datastructs/market_registry.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/signalslot.py` & `sfctools-1.0.5.5/sfctools/datastructs/signalslot.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/datastructs/worker_registry.py` & `sfctools-1.0.5.5/sfctools/datastructs/worker_registry.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/__init__.py` & `sfctools-1.0.5.5/sfctools/examples/__init__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/balance.py` & `sfctools-1.0.5.5/sfctools/examples/balance.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/basic_example/basic_example.py` & `sfctools-1.0.5.5/sfctools/examples/basic_example/basic_example.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/clock.py` & `sfctools-1.0.5.5/sfctools/examples/clock.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/example_wrapper.py` & `sfctools-1.0.5.5/sfctools/examples/example_wrapper.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/government.py` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/government.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/household.py` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/household.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/production.py` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/production.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/agents/transactions.py` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/agents/transactions.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/data/preprocess.py` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/data/preprocess.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/figures/matrix.png` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/figures/matrix.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/figures/outputs.png` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/figures/outputs.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/figures/sankey.png` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/figures/sankey.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/info.md` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/info.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/model.py` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/model.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/exampleabm/settings.yml` & `sfctools-1.0.5.5/sfctools/examples/exampleabm/settings.yml`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/flowmatrix.py` & `sfctools-1.0.5.5/sfctools/examples/flowmatrix.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/hello_agent.py` & `sfctools-1.0.5.5/sfctools/examples/hello_agent.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/inventory.py` & `sfctools-1.0.5.5/sfctools/examples/inventory.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/market_example/market.py` & `sfctools-1.0.5.5/sfctools/examples/market_example/market.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/market_example/market2.py` & `sfctools-1.0.5.5/sfctools/examples/market_example/market2.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/monte_carlo/monte_carlo.py` & `sfctools-1.0.5.5/sfctools/examples/monte_carlo/monte_carlo.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/monte_carlo/result/output.txt` & `sfctools-1.0.5.5/sfctools/examples/monte_carlo/result/output.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/order_book.py` & `sfctools-1.0.5.5/sfctools/examples/order_book.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/examples/signal_slot.py` & `sfctools-1.0.5.5/sfctools/examples/signal_slot.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/.gitlab-ci.yml` & `sfctools-1.0.5.5/sfctools/gui/.gitlab-ci.yml`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/agent_editor.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/agent_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/code_editor.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/code_editor.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/draw_widget.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/draw_widget.py`

 * *Files 1% similar despite different names*

```diff
@@ -19,19 +19,20 @@
 from .agent_editor import CodeEditor
 
 
 class Label:
     """
     A label for a box
     """
-    def __init__(self,x,y,name,parent_box):
+    def __init__(self,x,y,name,subject,parent_box):
         self.x = x
         self.y =  y
         self.box = parent_box
         self.name = name
+        self.subject = subject
 
         self.offx = 0
         self.offy = 0
 
     def draw(self, qp, brush, position = None):
         #
         #
@@ -39,15 +40,15 @@
         dw = MyDrawWidget.instance
         zf = dw.zoom_factor
 
         # set the name according to the checkbox settings
         if not dw.main_widget.checkBox_8.isChecked():
             name = self.name.replace("_"," ")
         else:
-            name = self.name.replace("_"," ")
+            name = self.subject.replace("_"," ")
 
         # check the actually dispalyed height and length
         fm = qp.fontMetrics()
 
         text_length = fm.boundingRect(name).width() + 2
         text_height = fm.boundingRect(name).height() + 2
 
@@ -68,24 +69,25 @@
 
 
 
 class Box:
     """
     A box (representing an agent)
     """
-    def __init__(self,x,y, name,ishelper=False,parent=None,parent_widget=None,is_support=False):
+    def __init__(self,x,y, name, subject,ishelper=False,parent=None,parent_widget=None,is_support=False):
 
         self._x = x
         self._y = y
 
         self.x0 = x
         self.y0 = y
 
         self.name = name #.capitalize()
-        self.label = Label(x+1,y-7,name,parent_box = self)
+        self.subject = subject # if is a helper box, subject is the transaction subject
+        self.label = Label(x+1,y-7,name,subject,parent_box = self)
 
         self.ishelper = ishelper
         self.is_support = is_support
         self.parent = parent
         self.n_connections = 0
 
         self.parent_widget = parent_widget
@@ -249,19 +251,19 @@
         dx = self.b.x +25/2. - self.a.x #+ 25
         dy = self.b.y +25/2. - self.a.y #+ 25
 
         u = np.random.uniform(-1,1)
         v = np.random.uniform(-1,1)
 
         if a != b:
-            self.c = Box(self.a.x + 0.5*dx + u, self.a.y + 0.5*dy + v,name,ishelper=True,parent=self)
-            self.d = Box(self.a.x + 0.75*dx, self.a.y + 0.75*dy,name+"<support>",ishelper=True,parent=self,is_support=True) # <- is support handle for better line interpolation
+            self.c = Box(self.a.x + 0.5*dx + u, self.a.y + 0.5*dy + v,name,subject,ishelper=True,parent=self)
+            self.d = Box(self.a.x + 0.75*dx, self.a.y + 0.75*dy,name+"<support>",subject,ishelper=True,parent=self,is_support=True) # <- is support handle for better line interpolation
         else:
-            self.c = Box(self.a.x + 5*u, self.a.y + 5*u ,name,ishelper=True,parent=self)
-            self.d = Box(self.a.x + 0.75*dx, self.a.y + 0.75*dy,name+"<support>",ishelper=True,parent=self,is_support=True)
+            self.c = Box(self.a.x + 5*u, self.a.y + 5*u ,name,subject,ishelper=True,parent=self)
+            self.d = Box(self.a.x + 0.75*dx, self.a.y + 0.75*dy,name+"<support>",subject,ishelper=True,parent=self,is_support=True)
 
         self.a.ishelper = False
         self.b.ishelper = False
 
 
 
 class MyDrawWidget(QtWidgets.QWidget):
@@ -537,15 +539,15 @@
         # actually a new agent?
         if name not in self.old_positions:
             u = np.random.uniform(40-self.gox,self.W-40-self.goy)
             v = np.random.uniform(40-self.gox ,self.H-40-self.goy)
         else:
             u,v = self.old_positions[name]
 
-        new_box = Box(u,v,name,ishelper=False,parent_widget=self)
+        new_box = Box(u,v,name,subject=name,ishelper=False,parent_widget=self)
         self.boxes.append(new_box)
         self.update()
 
         return new_box
 
     def arrange_pretty(self):
         for box in self.boxes:
@@ -1288,27 +1290,29 @@
                         if self.highlighted == conn.c:
                             brush = QtGui.QBrush(self.main_widget.theme_manager.get_color(4),1)
                         else:
                             brush = QtGui.QBrush(self.main_widget.theme_manager.get_color(3),1)
 
 
                         if conn.a.x != conn.b.x and conn.a.y != conn.b.y:
+                            # label ends and starts at different box
+
                             a = self.zoom_factor*(tx)
                             b = self.zoom_factor*(ty)
 
                             a2 = self.zoom_factor*(tx+5)
                             b2 = self.zoom_factor*(ty+5)
 
 
-                        else:
+                        else: # label ends and starts at same box
                             a = self.zoom_factor*(self.gox +conn.c.x)
-                            b = self.zoom_factor*(self.goy + conn.c.y+conn.c.name_osx)
+                            b = self.zoom_factor*(self.goy + conn.c.y)
 
-                            a2 = self.zoom_factor*(self.gox +conn.d.x)
-                            b2 = self.zoom_factor*(self.goy + conn.d.y+conn.c.name.osy)
+                            a2 = self.zoom_factor*(self.gox +conn.d.label.x + conn.d.label.offx)
+                            b2 = self.zoom_factor*(self.goy + conn.d.label.y+conn.d.label.offy)
 
 
                         fontsize = 8
 
                         try:
                             fontsize = int(self.main_widget.spinBoxFontSize_2.value())
                             qp.setFont(QFont("Arial", fontsize))
```

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/income_viewer.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/income_viewer.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/mainloop_editor.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/mainloop_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/mamba_interpreter2.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/mamba_interpreter2.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/matrix_viewer.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/matrix_viewer.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/output_display.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/output_display.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/output_display.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/output_display.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/pandasmodel.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/pandasmodel.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/qtattune.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/qtattune.py`

 * *Files 1% similar despite different names*

```diff
@@ -835,7549 +835,7575 @@
 00003420: 2e73 686f 7274 6375 745f 7365 6172 6368  .shortcut_search
 00003430: 2e61 6374 6976 6174 6564 2e63 6f6e 6e65  .activated.conne
 00003440: 6374 2873 656c 662e 7365 6172 6368 5f64  ct(self.search_d
 00003450: 6c67 290d 0a0d 0a20 2020 2020 2020 2073  lg)....        s
 00003460: 656c 662e 6163 7469 6f6e 4162 6f75 742e  elf.actionAbout.
 00003470: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
 00003480: 7428 6c61 6d62 6461 3a20 7365 6c66 2e6e  t(lambda: self.n
-00003490: 6f74 6966 7928 2273 6663 746f 6c73 2d61  otify("sfctols-a
-000034a0: 7474 756e 6520 7665 722e 2030 2e32 2063  ttune ver. 0.2 c
-000034b0: 6f6d 7061 7469 626c 6520 7769 7468 2073  ompatible with s
-000034c0: 6663 746f 6f6c 7320 3e3d 2031 2e30 2e31  fctools >= 1.0.1
-000034d0: 2e20 5468 616e 6b73 2066 6f72 2075 7369  . Thanks for usi
-000034e0: 6e67 2120 506c 6561 7365 2072 6570 6f72  ng! Please repor
-000034f0: 7420 6275 6773 2074 6f20 7468 6f6d 6173  t bugs to thomas
-00003500: 2e62 616c 6461 7566 4064 6c72 2e64 6522  .baldauf@dlr.de"
-00003510: 2c74 6974 6c65 3d22 4162 6f75 7420 7468  ,title="About th
-00003520: 6973 2073 6f66 7477 6172 6522 2929 0d0a  is software"))..
-00003530: 2020 2020 2020 2020 7365 6c66 2e61 6374          self.act
-00003540: 696f 6e46 6c6f 774d 6174 7269 785f 746f  ionFlowMatrix_to
-00003550: 5f45 7863 656c 5f66 696c 652e 7472 6967  _Excel_file.trig
-00003560: 6765 7265 642e 636f 6e6e 6563 7428 6c61  gered.connect(la
-00003570: 6d62 6461 3a20 7365 6c66 2e67 656e 5f6d  mbda: self.gen_m
-00003580: 6174 7269 7828 6d6f 6465 3d22 6578 6365  atrix(mode="exce
-00003590: 6c22 2929 0d0a 0d0a 2020 2020 2020 2020  l"))....        
-000035a0: 7365 6c66 2e61 6374 696f 6e53 7769 7463  self.actionSwitc
-000035b0: 685f 4461 726b 5f42 7269 6768 745f 4d6f  h_Dark_Bright_Mo
-000035c0: 6465 2e74 7269 6767 6572 6564 2e63 6f6e  de.triggered.con
-000035d0: 6e65 6374 2873 656c 662e 7377 6974 6368  nect(self.switch
-000035e0: 5f74 6865 6d65 290d 0a0d 0a20 2020 2020  _theme)....     
-000035f0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-00003600: 696f 6e56 6965 772e 7365 7445 6469 7454  ionView.setEditT
-00003610: 7269 6767 6572 7328 5141 6273 7472 6163  riggers(QAbstrac
-00003620: 7449 7465 6d56 6965 772e 4e6f 4564 6974  tItemView.NoEdit
-00003630: 5472 6967 6765 7273 290d 0a20 2020 2020  Triggers)..     
-00003640: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-00003650: 696f 6e56 6965 772e 646f 7562 6c65 436c  ionView.doubleCl
-00003660: 6963 6b65 642e 636f 6e6e 6563 7428 7365  icked.connect(se
-00003670: 6c66 2e64 6174 615f 7365 6c65 6374 290d  lf.data_select).
-00003680: 0a20 2020 2020 2020 2073 656c 662e 7472  .        self.tr
-00003690: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-000036a0: 7443 6f6c 756d 6e57 6964 7468 2830 2c20  tColumnWidth(0, 
-000036b0: 3132 3029 0d0a 0d0a 2020 2020 2020 2020  120)....        
-000036c0: 7365 6c66 2e61 7272 616e 6765 4275 7474  self.arrangeButt
-000036d0: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
-000036e0: 6374 2873 656c 662e 6172 7261 6e67 655f  ct(self.arrange_
-000036f0: 7072 6574 7479 290d 0a20 2020 2020 2020  pretty)..       
-00003700: 2073 656c 662e 7265 6d6f 7665 4275 7474   self.removeButt
-00003710: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
-00003720: 6374 2873 656c 662e 7265 6d6f 7665 5f69  ct(self.remove_i
-00003730: 7465 6d29 0d0a 0d0a 2020 2020 2020 2020  tem)....        
-00003740: 7365 6c66 2e62 6331 2e70 7265 7373 6564  self.bc1.pressed
-00003750: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00003760: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-00003770: 6f72 2831 2929 0d0a 2020 2020 2020 2020  or(1))..        
-00003780: 7365 6c66 2e62 6332 2e70 7265 7373 6564  self.bc2.pressed
-00003790: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000037a0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-000037b0: 6f72 2832 2929 0d0a 2020 2020 2020 2020  or(2))..        
-000037c0: 7365 6c66 2e62 6333 2e70 7265 7373 6564  self.bc3.pressed
-000037d0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000037e0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-000037f0: 6f72 2833 2929 0d0a 2020 2020 2020 2020  or(3))..        
-00003800: 7365 6c66 2e62 6334 2e70 7265 7373 6564  self.bc4.pressed
-00003810: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00003820: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-00003830: 6f72 2834 2929 0d0a 2020 2020 2020 2020  or(4))..        
-00003840: 7365 6c66 2e62 6335 2e70 7265 7373 6564  self.bc5.pressed
-00003850: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00003860: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-00003870: 6f72 2835 2929 0d0a 2020 2020 2020 2020  or(5))..        
-00003880: 7365 6c66 2e62 6336 2e70 7265 7373 6564  self.bc6.pressed
-00003890: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000038a0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-000038b0: 6f72 2836 2929 0d0a 2020 2020 2020 2020  or(6))..        
-000038c0: 7365 6c66 2e62 6337 2e70 7265 7373 6564  self.bc7.pressed
-000038d0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000038e0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-000038f0: 6f72 2837 2929 0d0a 2020 2020 2020 2020  or(7))..        
-00003900: 7365 6c66 2e62 6338 2e70 7265 7373 6564  self.bc8.pressed
-00003910: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00003920: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
-00003930: 6f72 2838 2929 0d0a 0d0a 2020 2020 2020  or(8))....      
-00003940: 2020 7365 6c66 2e62 746e 5f63 7361 7665    self.btn_csave
-00003950: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
-00003960: 286c 616d 6264 613a 2073 656c 662e 7468  (lambda: self.th
-00003970: 656d 655f 6d61 6e61 6765 722e 7361 7665  eme_manager.save
-00003980: 5f63 6f6c 6f72 7328 2929 0d0a 2020 2020  _colors())..    
-00003990: 2020 2020 7365 6c66 2e62 746e 5f63 6c6f      self.btn_clo
-000039a0: 6164 2e70 7265 7373 6564 2e63 6f6e 6e65  ad.pressed.conne
-000039b0: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
-000039c0: 7468 656d 655f 6d61 6e61 6765 722e 6c6f  theme_manager.lo
-000039d0: 6164 5f63 6f6c 6f72 7328 2929 0d0a 2020  ad_colors())..  
-000039e0: 2020 2020 2020 7365 6c66 2e62 746e 5f63        self.btn_c
-000039f0: 7265 7374 6f72 652e 7072 6573 7365 642e  restore.pressed.
-00003a00: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
-00003a10: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00003a20: 6572 2e72 6573 746f 7265 2829 290d 0a20  er.restore()).. 
-00003a30: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00003a40: 6c6f 6f70 5f73 7472 203d 2022 220d 0a20  loop_str = "".. 
-00003a50: 2020 2020 2020 2073 656c 662e 7365 7474         self.sett
-00003a60: 696e 6773 5f73 7472 203d 2022 2222 0d0a  ings_str = """..
-00003a70: 6d65 7461 696e 666f 3a0d 0a09 6175 7468  metainfo:...auth
-00003a80: 6f72 3a20 796f 7572 206e 616d 6520 6865  or: your name he
-00003a90: 7265 0d0a 0964 6174 653a 2032 3037 300d  re...date: 2070.
-00003aa0: 0a09 696e 666f 3a20 6578 616d 706c 6520  ..info: example 
-00003ab0: 7365 7474 696e 6773 0d0a 0d0a 6879 7065  settings....hype
-00003ac0: 7270 6172 616d 733a 0d0a 2020 2020 2020  rparams:..      
-00003ad0: 202d 206e 616d 653a 2065 7861 6d70 6c65   - name: example
-00003ae0: 0d0a 2020 2020 2020 2020 2076 616c 7565  ..         value
-00003af0: 3a20 3432 2e30 0d0a 2020 2020 2020 2020  : 42.0..        
-00003b00: 2064 6573 6372 6970 7469 6f6e 3a20 616e   description: an
-00003b10: 2065 7861 6d70 6c65 2070 6172 616d 6574   example paramet
-00003b20: 6572 0d0a 2222 220d 0a20 2020 2020 2020  er.."""..       
-00003b30: 2073 656c 662e 6564 6974 5365 7474 696e   self.editSettin
-00003b40: 6773 4275 7474 6f6e 2e74 7269 6767 6572  gsButton.trigger
-00003b50: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00003b60: 6564 6974 5f73 6574 7469 6e67 7329 0d0a  edit_settings)..
-00003b70: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00003b80: 4275 7474 6f6e 2e70 7265 7373 6564 2e63  Button.pressed.c
-00003b90: 6f6e 6e65 6374 2873 656c 662e 6164 645f  onnect(self.add_
-00003ba0: 6e65 7729 2023 2061 6464 2061 6e20 6167  new) # add an ag
-00003bb0: 656e 740d 0a20 2020 2020 2020 2073 656c  ent..        sel
-00003bc0: 662e 6164 6442 7574 746f 6e32 2e70 7265  f.addButton2.pre
-00003bd0: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
-00003be0: 662e 6164 645f 6865 6c70 6572 2920 2320  f.add_helper) # 
-00003bf0: 6164 6420 6120 6865 6c70 6572 2061 6765  add a helper age
-00003c00: 6e74 2028 6e6f 2074 7261 6e73 6163 7469  nt (no transacti
-00003c10: 6f6e 7329 0d0a 2020 2020 2020 2020 7365  ons)..        se
-00003c20: 6c66 2e67 7261 7068 4465 6c65 7465 4275  lf.graphDeleteBu
-00003c30: 7474 6f6e 2e70 7265 7373 6564 2e63 6f6e  tton.pressed.con
-00003c40: 6e65 6374 2873 656c 662e 7265 6d6f 7665  nect(self.remove
-00003c50: 5f68 656c 7065 7229 0d0a 2020 2020 2020  _helper)..      
-00003c60: 2020 2373 656c 662e 7361 7665 4275 7474    #self.saveButt
-00003c70: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
-00003c80: 6374 2873 656c 662e 7361 7665 290d 0a20  ct(self.save).. 
-00003c90: 2020 2020 2020 2023 2073 656c 662e 6772         # self.gr
-00003ca0: 6170 6853 656c 6563 7442 7574 746f 6e2e  aphSelectButton.
-00003cb0: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
-00003cc0: 7365 6c66 2e63 6861 6e67 655f 6772 6170  self.change_grap
-00003cd0: 686d 6f64 655f 7365 6c65 6374 290d 0a20  hmode_select).. 
-00003ce0: 2020 2020 2020 2023 2073 656c 662e 6772         # self.gr
-00003cf0: 6170 6844 7261 6742 7574 746f 6e2e 7072  aphDragButton.pr
-00003d00: 6573 7365 642e 636f 6e6e 6563 7428 7365  essed.connect(se
-00003d10: 6c66 2e63 6861 6e67 655f 6772 6170 686d  lf.change_graphm
-00003d20: 6f64 655f 6472 6167 290d 0a20 2020 2020  ode_drag)..     
-00003d30: 2020 2073 656c 662e 6772 6170 6845 6469     self.graphEdi
-00003d40: 7442 7574 746f 6e2e 7072 6573 7365 642e  tButton.pressed.
-00003d50: 636f 6e6e 6563 7428 7365 6c66 2e65 6469  connect(self.edi
-00003d60: 745f 6772 6170 685f 6167 656e 7429 0d0a  t_graph_agent)..
-00003d70: 2020 2020 2020 2020 2366 6f72 2077 6964          #for wid
-00003d80: 6765 7420 696e 205b 7365 6c66 2e41 7373  get in [self.Ass
-00003d90: 6574 4c69 7374 4c65 6674 2c20 7365 6c66  etListLeft, self
-00003da0: 2e41 7373 6574 4c69 7374 5269 6768 742c  .AssetListRight,
-00003db0: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
-00003dc0: 2020 2020 2020 2020 2020 7365 6c66 2e4c            self.L
-00003dd0: 6961 6269 6c69 7479 4c69 7374 4c65 6674  iabilityListLeft
-00003de0: 2c20 7365 6c66 2e4c 6961 6269 6c69 7479  , self.Liability
-00003df0: 4c69 7374 5269 6768 742c 0d0a 2020 2020  ListRight,..    
-00003e00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00003e10: 2020 2020 7365 6c66 2e45 7175 6974 794c      self.EquityL
-00003e20: 6973 744c 6566 742c 2073 656c 662e 4571  istLeft, self.Eq
-00003e30: 7569 7479 4c69 7374 5269 6768 745d 3a0d  uityListRight]:.
-00003e40: 0a20 2020 2020 2020 2023 2020 2020 7769  .        #    wi
-00003e50: 6467 6574 2e74 6578 7443 6861 6e67 6564  dget.textChanged
-00003e60: 2e63 6f6e 6e65 6374 2873 656c 662e 7570  .connect(self.up
-00003e70: 6461 7465 5f64 6174 6129 0d0a 2020 2020  date_data)..    
-00003e80: 2020 2020 7365 6c66 2e61 6374 696f 6e53      self.actionS
-00003e90: 7761 705f 4c69 6e65 5f49 6e74 6572 706f  wap_Line_Interpo
-00003ea0: 6c61 7469 6f6e 2e74 7269 6767 6572 6564  lation.triggered
-00003eb0: 2e63 6f6e 6e65 6374 2873 656c 662e 6472  .connect(self.dr
-00003ec0: 6177 6361 6e76 6173 2e73 7761 705f 696e  awcanvas.swap_in
-00003ed0: 7465 7270 6f6c 5f73 7479 6c65 290d 0a20  terpol_style).. 
-00003ee0: 2020 2020 2020 2073 656c 662e 6163 7469         self.acti
-00003ef0: 6f6e 4578 706f 7274 5f47 7261 7068 5f74  onExport_Graph_t
-00003f00: 6f5f 5044 462e 7472 6967 6765 7265 642e  o_PDF.triggered.
-00003f10: 636f 6e6e 6563 7428 7365 6c66 2e64 7261  connect(self.dra
-00003f20: 7763 616e 7661 732e 6578 706f 7274 5f70  wcanvas.export_p
-00003f30: 6466 290d 0a0d 0a20 2020 2020 2020 2073  df)....        s
-00003f40: 656c 662e 7564 7061 7465 4275 7474 6f6e  elf.udpateButton
-00003f50: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
-00003f60: 2873 656c 662e 7570 6461 7465 5f64 6174  (self.update_dat
-00003f70: 6129 0d0a 0d0a 2020 2020 2020 2020 7365  a)....        se
-00003f80: 6c66 2e66 696c 656e 616d 6520 3d20 4e6f  lf.filename = No
-00003f90: 6e65 2020 2020 2320 6375 7272 656e 7420  ne    # current 
-00003fa0: 2e79 616d 6c20 6669 6c65 0d0a 2020 2020  .yaml file..    
-00003fb0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-00003fc0: 6174 6120 3d20 5b5d 2023 2073 746f 7265  ata = [] # store
-00003fd0: 2063 7572 7265 6e74 2065 6e74 7269 6573   current entries
-00003fe0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-00003ff0: 656c 6563 7469 6f6e 5f69 6478 203d 204e  election_idx = N
-00004000: 6f6e 650d 0a0d 0a20 2020 2020 2020 2023  one....        #
-00004010: 7365 6c66 2e6d 6174 7269 7856 6965 7720  self.matrixView 
-00004020: 3d20 4d61 7472 6978 5669 6577 6572 2873  = MatrixViewer(s
-00004030: 656c 6629 0d0a 2020 2020 2020 2020 7365  elf)..        se
-00004040: 6c66 2e6d 6f76 6555 7042 746e 2e70 7265  lf.moveUpBtn.pre
-00004050: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
-00004060: 662e 6d6f 7665 5f75 7029 0d0a 2020 2020  f.move_up)..    
-00004070: 2020 2020 7365 6c66 2e6d 6f76 6544 6e42      self.moveDnB
-00004080: 746e 2e70 7265 7373 6564 2e63 6f6e 6e65  tn.pressed.conne
-00004090: 6374 2873 656c 662e 6d6f 7665 5f64 6f77  ct(self.move_dow
-000040a0: 6e29 0d0a 0d0a 2020 2020 2020 2020 7365  n)....        se
-000040b0: 6c66 2e66 696c 7465 7243 6f6d 626f 2e69  lf.filterCombo.i
-000040c0: 7465 6d53 656c 6563 7469 6f6e 4368 616e  temSelectionChan
-000040d0: 6765 642e 636f 6e6e 6563 7428 6c61 6d62  ged.connect(lamb
-000040e0: 6461 3a20 7365 6c66 2e64 7261 7763 616e  da: self.drawcan
-000040f0: 7661 732e 7570 6461 7465 2829 290d 0a20  vas.update()).. 
-00004100: 2020 2020 2020 2073 656c 662e 636c 6561         self.clea
-00004110: 7246 696c 7465 7242 7574 746f 6e2e 7072  rFilterButton.pr
-00004120: 6573 7365 642e 636f 6e6e 6563 7428 7365  essed.connect(se
-00004130: 6c66 2e63 6c65 6172 5f66 696c 7465 7229  lf.clear_filter)
-00004140: 0d0a 0d0a 2020 2020 2020 2020 2320 6d61  ....        # ma
-00004150: 696e 6c6f 6f70 2065 6469 746f 7220 6973  inloop editor is
-00004160: 2061 6c77 6179 7320 7275 6e6e 696e 6720   always running 
-00004170: 746f 2063 6865 636b 2066 6f72 2066 696c  to check for fil
-00004180: 6520 6368 616e 6765 730d 0a20 2020 2020  e changes..     
-00004190: 2020 2073 656c 662e 6d61 696e 6c6f 6f70     self.mainloop
-000041a0: 5f65 6469 746f 7220 3d20 4d61 696e 4c6f  _editor = MainLo
-000041b0: 6f70 4564 6974 6f72 2873 656c 662c 7365  opEditor(self,se
-000041c0: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7229  lf.mainloop_str)
-000041d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
-000041e0: 6169 6e6c 6f6f 705f 6564 6974 6f72 2e73  ainloop_editor.s
-000041f0: 686f 7728 290d 0a20 2020 2020 2020 2073  how()..        s
-00004200: 656c 662e 6d61 696e 6c6f 6f70 5f65 6469  elf.mainloop_edi
-00004210: 746f 722e 6869 6465 2829 0d0a 0d0a 2020  tor.hide()....  
-00004220: 2020 2020 2020 2320 7365 7474 696e 6773        # settings
-00004230: 2065 6469 746f 7220 6973 2061 6c77 6179   editor is alway
-00004240: 7320 7275 6e6e 696e 6720 746f 2063 6865  s running to che
-00004250: 636b 2066 6f72 2066 696c 6520 6368 616e  ck for file chan
-00004260: 6765 730d 0a20 2020 2020 2020 2073 656c  ges..        sel
-00004270: 662e 7365 7474 696e 6773 5f65 6469 746f  f.settings_edito
-00004280: 7220 3d20 5365 7474 696e 6773 4564 6974  r = SettingsEdit
-00004290: 6f72 2873 656c 662c 2073 656c 662e 7365  or(self, self.se
-000042a0: 7474 696e 6773 5f73 7472 290d 0a20 2020  ttings_str)..   
-000042b0: 2020 2020 2073 656c 662e 7365 7474 696e       self.settin
-000042c0: 6773 5f65 6469 746f 722e 7368 6f77 2829  gs_editor.show()
-000042d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-000042e0: 6574 7469 6e67 735f 6564 6974 6f72 2e68  ettings_editor.h
-000042f0: 6964 6528 290d 0a0d 0a20 2020 2020 2020  ide()....       
-00004300: 2023 2074 6865 6d65 206d 616e 6167 6572   # theme manager
-00004310: 2073 6574 7570 0d0a 2020 2020 2020 2020   setup..        
-00004320: 2320 7468 656d 6520 6d61 6e61 6765 7220  # theme manager 
-00004330: 6861 7320 2764 6172 6b27 2061 6e64 2027  has 'dark' and '
-00004340: 6272 6967 6874 2720 6d6f 6465 0d0a 2020  bright' mode..  
-00004350: 2020 2020 2020 7365 6c66 2e74 6865 6d65        self.theme
-00004360: 5f6d 616e 6167 6572 2e74 6865 6d65 203d  _manager.theme =
-00004370: 2022 6461 726b 220d 0a20 2020 2020 2020   "dark"..       
-00004380: 2073 656c 662e 7377 6974 6368 5f74 6865   self.switch_the
-00004390: 6d65 2829 0d0a 2020 2020 2020 2020 7365  me()..        se
-000043a0: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
-000043b0: 2e72 6573 746f 7265 2829 0d0a 2020 2020  .restore()..    
-000043c0: 2020 2020 7365 6c66 2e73 7769 7463 685f      self.switch_
-000043d0: 7468 656d 6528 290d 0a20 2020 2020 2020  theme()..       
-000043e0: 2073 656c 662e 7377 6974 6368 5f74 6865   self.switch_the
-000043f0: 6d65 2829 0d0a 0d0a 0d0a 2020 2020 6465  me()......    de
-00004400: 6620 7365 6172 6368 5f64 6c67 2873 656c  f search_dlg(sel
-00004410: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
-00004420: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
-00004430: 2066 6f72 2061 6e20 6167 656e 740d 0a20   for an agent.. 
-00004440: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-00004450: 2020 2020 2020 6966 2053 6561 7263 6844        if SearchD
-00004460: 6961 6c6f 672e 696e 7374 616e 6365 2069  ialog.instance i
-00004470: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-00004480: 2020 2020 206e 6577 5f64 6c67 203d 2053       new_dlg = S
-00004490: 6561 7263 6844 6961 6c6f 6728 7365 6c66  earchDialog(self
-000044a0: 290d 0a20 2020 2020 2020 2020 2020 206e  )..            n
-000044b0: 6577 5f64 6c67 2e73 686f 7728 290d 0a20  ew_dlg.show().. 
-000044c0: 2020 2020 2020 2023 2073 656c 662e 6e6f         # self.no
-000044d0: 7469 6679 2822 5465 7374 2053 6561 7263  tify("Test Searc
-000044e0: 6822 2c20 7469 746c 653d 2253 6561 7263  h", title="Searc
-000044f0: 6820 4167 656e 7422 290d 0a0d 0a20 2020  h Agent")....   
-00004500: 2064 6566 2063 6861 6e67 655f 636f 6c6f   def change_colo
-00004510: 7228 7365 6c66 2c77 6869 6368 293a 0d0a  r(self,which):..
-00004520: 2020 2020 2020 2020 636f 6c6f 7220 3d20          color = 
-00004530: 5143 6f6c 6f72 4469 616c 6f67 2e67 6574  QColorDialog.get
-00004540: 436f 6c6f 7228 290d 0a0d 0a20 2020 2020  Color()....     
-00004550: 2020 2069 6620 636f 6c6f 722e 6973 5661     if color.isVa
-00004560: 6c69 6428 293a 0d0a 2020 2020 2020 2020  lid():..        
-00004570: 2020 2020 7072 696e 7428 2243 4841 4e47      print("CHANG
-00004580: 4520 434f 4c4f 5222 2c20 7768 6963 682c  E COLOR", which,
-00004590: 2063 6f6c 6f72 2e6e 616d 6528 2929 0d0a   color.name())..
-000045a0: 0d0a 2020 2020 2020 2020 2020 2020 6274  ..            bt
-000045b0: 6e5f 7461 626c 6520 3d20 7b0d 0a20 2020  n_table = {..   
-000045c0: 2020 2020 2020 2020 2020 2020 2031 3a20               1: 
-000045d0: 7365 6c66 2e62 6331 2c0d 0a20 2020 2020  self.bc1,..     
-000045e0: 2020 2020 2020 2020 2020 2032 3a20 7365             2: se
-000045f0: 6c66 2e62 6332 2c0d 0a20 2020 2020 2020  lf.bc2,..       
-00004600: 2020 2020 2020 2020 2033 3a20 7365 6c66           3: self
-00004610: 2e62 6333 2c0d 0a20 2020 2020 2020 2020  .bc3,..         
-00004620: 2020 2020 2020 2034 3a20 7365 6c66 2e62         4: self.b
-00004630: 6334 2c0d 0a20 2020 2020 2020 2020 2020  c4,..           
-00004640: 2020 2020 2035 3a20 7365 6c66 2e62 6335       5: self.bc5
-00004650: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00004660: 2020 2036 3a20 7365 6c66 2e62 6336 2c0d     6: self.bc6,.
-00004670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004680: 2037 3a20 7365 6c66 2e62 6337 2c0d 0a20   7: self.bc7,.. 
-00004690: 2020 2020 2020 2020 2020 2020 2020 2038                 8
-000046a0: 3a20 7365 6c66 2e62 6338 2c0d 0a20 2020  : self.bc8,..   
-000046b0: 2020 2020 2020 2020 207d 0d0a 0d0a 2020           }....  
-000046c0: 2020 2020 2020 2020 2020 6274 6e5f 7461            btn_ta
-000046d0: 626c 655b 7768 6963 685d 2e73 6574 5374  ble[which].setSt
-000046e0: 796c 6553 6865 6574 2822 6261 636b 6772  yleSheet("backgr
-000046f0: 6f75 6e64 2d63 6f6c 6f72 3a20 7267 6228  ound-color: rgb(
-00004700: 2573 2c25 732c 2573 293b 2225 2863 6f6c  %s,%s,%s);"%(col
-00004710: 6f72 2e72 6564 2829 2c63 6f6c 6f72 2e67  or.red(),color.g
-00004720: 7265 656e 2829 2c63 6f6c 6f72 2e62 6c75  reen(),color.blu
-00004730: 6528 2929 290d 0a20 2020 2020 2020 2020  e()))..         
-00004740: 2020 2073 656c 662e 7468 656d 655f 6d61     self.theme_ma
-00004750: 6e61 6765 722e 636f 6c6f 7273 5b73 656c  nager.colors[sel
-00004760: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-00004770: 7468 656d 655d 5b77 6869 6368 2d31 5d20  theme][which-1] 
-00004780: 3d20 636f 6c6f 720d 0a0d 0a0d 0a20 2020  = color......   
-00004790: 2064 6566 2063 6c65 6172 5f66 696c 7465   def clear_filte
-000047a0: 7228 7365 6c66 293a 0d0a 2020 2020 2020  r(self):..      
-000047b0: 2020 7365 6c66 2e66 696c 7465 7243 6f6d    self.filterCom
-000047c0: 626f 2e63 6c65 6172 5365 6c65 6374 696f  bo.clearSelectio
-000047d0: 6e28 290d 0a0d 0a20 2020 2064 6566 2067  n()....    def g
-000047e0: 656e 5f62 616c 616e 6365 5f6d 6174 7269  en_balance_matri
-000047f0: 7828 7365 6c66 2c64 6574 6169 6c65 643d  x(self,detailed=
-00004800: 5472 7565 293a 0d0a 2020 2020 2020 2020  True):..        
-00004810: 2320 6765 6e65 7261 7465 7320 6120 6261  # generates a ba
-00004820: 6c61 6e63 6520 7368 6565 7420 6d61 7472  lance sheet matr
-00004830: 6978 2066 6f72 2061 6c6c 2061 6765 6e74  ix for all agent
-00004840: 730d 0a20 2020 2020 2020 2023 203a 7061  s..        # :pa
-00004850: 7261 6d3a 2064 6574 6169 6c65 643a 2073  ram: detailed: s
-00004860: 686f 7720 6c61 7267 6520 6d61 7472 6978  how large matrix
-00004870: 206f 7220 6167 6772 6567 6174 6520 696e   or aggregate in
-00004880: 6469 7669 6475 616c 2072 6f77 733f 0d0a  dividual rows?..
-00004890: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-000048a0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-000048b0: 696e 6564 5f62 616c 616e 6365 203d 2020  ined_balance =  
-000048c0: 6465 6661 756c 7464 6963 7428 6c61 6d62  defaultdict(lamb
-000048d0: 6461 3a20 7b22 4974 656d 223a 5b5d 2c22  da: {"Item":[],"
-000048e0: 4173 7365 7473 223a 5b5d 2c22 4c69 6162  Assets":[],"Liab
-000048f0: 696c 6974 6965 7322 3a20 5b5d 7d29 0d0a  ilities": []})..
-00004900: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00004910: 666f 7220 6669 6c65 6461 7461 2069 6e20  for filedata in 
-00004920: 7365 6c66 2e65 6e74 7279 5f64 6174 613a  self.entry_data:
-00004930: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00004940: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
-00004950: 6564 6174 615b 2261 6765 6e74 3122 5d2e  edata["agent1"].
-00004960: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
-00004970: 2020 2020 2020 2020 2061 6765 6e74 3220           agent2 
-00004980: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
-00004990: 7432 225d 2e73 7472 6970 2829 0d0a 0d0a  t2"].strip()....
-000049a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049b0: 6173 7365 7473 3120 3d20 6669 6c65 6461  assets1 = fileda
-000049c0: 7461 5b22 6131 225d 0d0a 2020 2020 2020  ta["a1"]..      
-000049d0: 2020 2020 2020 2020 2020 6c69 6162 7331            liabs1
-000049e0: 203d 2066 696c 6564 6174 615b 226c 3122   = filedata["l1"
-000049f0: 5d20 232b 2066 696c 6564 6174 615b 2265  ] #+ filedata["e
-00004a00: 3122 5d20 2b20 225c 6e22 0d0a 0d0a 2020  1"] + "\n"....  
-00004a10: 2020 2020 2020 2020 2020 2020 2020 6173                as
-00004a20: 7365 7473 3220 3d20 6669 6c65 6461 7461  sets2 = filedata
-00004a30: 5b22 6132 225d 0d0a 2020 2020 2020 2020  ["a2"]..        
-00004a40: 2020 2020 2020 2020 6c69 6162 7332 203d          liabs2 =
-00004a50: 2066 696c 6564 6174 615b 226c 3222 5d20   filedata["l2"] 
-00004a60: 232b 2066 696c 6564 6174 615b 2265 3222  #+ filedata["e2"
-00004a70: 5d20 2b20 225c 6e22 0d0a 0d0a 2020 2020  ] + "\n"....    
-00004a80: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-00004a90: 6574 6169 6c65 643a 0d0a 2020 2020 2020  etailed:..      
-00004aa0: 2020 2020 2020 2020 2020 2020 2020 7375                su
-00004ab0: 626a 6563 7420 3d20 2220 2825 7329 5c6e  bject = " (%s)\n
-00004ac0: 2220 2520 6669 6c65 6461 7461 5b22 7375  " % filedata["su
-00004ad0: 626a 6563 7422 5d0d 0a20 2020 2020 2020  bject"]..       
-00004ae0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00004af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b00: 2020 2020 7375 626a 6563 7420 3d20 225c      subject = "\
-00004b10: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
-00004b20: 2020 2020 6d79 5f61 7373 6574 7331 203d      my_assets1 =
-00004b30: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
-00004b40: 2020 2020 206d 795f 6c69 6162 7331 203d       my_liabs1 =
-00004b50: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
-00004b60: 2020 2020 206d 795f 6173 7365 7473 3220       my_assets2 
-00004b70: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
-00004b80: 2020 2020 2020 6d79 5f6c 6961 6273 3220        my_liabs2 
-00004b90: 3d20 5b5d 0d0a 0d0a 2020 2020 2020 2020  = []....        
-00004ba0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00004bb0: 2061 7373 6574 7331 2e73 706c 6974 2822   assets1.split("
-00004bc0: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
-00004bd0: 2020 2020 2020 2020 2020 2069 6620 692e             if i.
-00004be0: 7374 7269 7028 292e 7374 6172 7473 7769  strip().startswi
-00004bf0: 7468 2822 2b22 293a 0d0a 2020 2020 2020  th("+"):..      
-00004c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c10: 2020 6d79 5f69 7465 6d20 3d20 692e 7370    my_item = i.sp
-00004c20: 6c69 7428 222b 2229 5b31 5d20 2b20 7375  lit("+")[1] + su
-00004c30: 626a 6563 740d 0a20 2020 2020 2020 2020  bject..         
-00004c40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00004c50: 6967 6e20 3d20 222b 220d 0a20 2020 2020  ign = "+"..     
-00004c60: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00004c70: 6c69 6620 692e 7374 7269 7028 292e 7374  lif i.strip().st
-00004c80: 6172 7473 7769 7468 2822 2d22 293a 0d0a  artswith("-"):..
-00004c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ca0: 2020 2020 2020 2020 6d79 5f69 7465 6d20          my_item 
-00004cb0: 3d20 692e 7370 6c69 7428 222d 2229 5b31  = i.split("-")[1
-00004cc0: 5d20 2b20 7375 626a 6563 740d 0a20 2020  ] + subject..   
+00003490: 6f74 6966 7928 2254 6869 7320 7366 6374  otify("This sfct
+000034a0: 6f6c 732d 6174 7475 6e65 2c20 6465 7665  ols-attune, deve
+000034b0: 6c6f 7065 6420 6174 2047 6572 6d61 6e20  loped at German 
+000034c0: 4165 726f 7370 6163 6520 4365 6e74 6572  Aerospace Center
+000034d0: 2c20 496e 7374 6974 7574 6520 6f66 204e  , Institute of N
+000034e0: 6574 776f 726b 6564 2045 6e65 7267 7920  etworked Energy 
+000034f0: 5379 7374 656d 7320 2844 4c52 2d56 4529  Systems (DLR-VE)
+00003500: 2e5c 6e4d 4954 206c 6963 656e 7365 2e5c  .\nMIT license.\
+00003510: 6e54 6861 6e6b 7320 666f 7220 7573 696e  nThanks for usin
+00003520: 6721 2050 6c65 6173 6520 7265 706f 7274  g! Please report
+00003530: 2062 7567 7320 746f 2074 686f 6d61 732e   bugs to thomas.
+00003540: 6261 6c64 6175 6640 646c 722e 6465 222c  baldauf@dlr.de",
+00003550: 7469 746c 653d 2241 626f 7574 2074 6869  title="About thi
+00003560: 7320 736f 6674 7761 7265 2229 290d 0a20  s software")).. 
+00003570: 2020 2020 2020 2073 656c 662e 6163 7469         self.acti
+00003580: 6f6e 466c 6f77 4d61 7472 6978 5f74 6f5f  onFlowMatrix_to_
+00003590: 4578 6365 6c5f 6669 6c65 2e74 7269 6767  Excel_file.trigg
+000035a0: 6572 6564 2e63 6f6e 6e65 6374 286c 616d  ered.connect(lam
+000035b0: 6264 613a 2073 656c 662e 6765 6e5f 6d61  bda: self.gen_ma
+000035c0: 7472 6978 286d 6f64 653d 2265 7863 656c  trix(mode="excel
+000035d0: 2229 290d 0a0d 0a20 2020 2020 2020 2073  "))....        s
+000035e0: 656c 662e 6163 7469 6f6e 5377 6974 6368  elf.actionSwitch
+000035f0: 5f44 6172 6b5f 4272 6967 6874 5f4d 6f64  _Dark_Bright_Mod
+00003600: 652e 7472 6967 6765 7265 642e 636f 6e6e  e.triggered.conn
+00003610: 6563 7428 7365 6c66 2e73 7769 7463 685f  ect(self.switch_
+00003620: 7468 656d 6529 0d0a 0d0a 2020 2020 2020  theme)....      
+00003630: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+00003640: 6f6e 5669 6577 2e73 6574 4564 6974 5472  onView.setEditTr
+00003650: 6967 6765 7273 2851 4162 7374 7261 6374  iggers(QAbstract
+00003660: 4974 656d 5669 6577 2e4e 6f45 6469 7454  ItemView.NoEditT
+00003670: 7269 6767 6572 7329 0d0a 2020 2020 2020  riggers)..      
+00003680: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+00003690: 6f6e 5669 6577 2e64 6f75 626c 6543 6c69  onView.doubleCli
+000036a0: 636b 6564 2e63 6f6e 6e65 6374 2873 656c  cked.connect(sel
+000036b0: 662e 6461 7461 5f73 656c 6563 7429 0d0a  f.data_select)..
+000036c0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+000036d0: 6e73 6163 7469 6f6e 5669 6577 2e73 6574  nsactionView.set
+000036e0: 436f 6c75 6d6e 5769 6474 6828 302c 2031  ColumnWidth(0, 1
+000036f0: 3230 290d 0a0d 0a20 2020 2020 2020 2073  20)....        s
+00003700: 656c 662e 6172 7261 6e67 6542 7574 746f  elf.arrangeButto
+00003710: 6e2e 7072 6573 7365 642e 636f 6e6e 6563  n.pressed.connec
+00003720: 7428 7365 6c66 2e61 7272 616e 6765 5f70  t(self.arrange_p
+00003730: 7265 7474 7929 0d0a 2020 2020 2020 2020  retty)..        
+00003740: 7365 6c66 2e72 656d 6f76 6542 7574 746f  self.removeButto
+00003750: 6e2e 7072 6573 7365 642e 636f 6e6e 6563  n.pressed.connec
+00003760: 7428 7365 6c66 2e72 656d 6f76 655f 6974  t(self.remove_it
+00003770: 656d 290d 0a0d 0a20 2020 2020 2020 2073  em)....        s
+00003780: 656c 662e 6263 312e 7072 6573 7365 642e  elf.bc1.pressed.
+00003790: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+000037a0: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+000037b0: 7228 3129 290d 0a20 2020 2020 2020 2073  r(1))..        s
+000037c0: 656c 662e 6263 322e 7072 6573 7365 642e  elf.bc2.pressed.
+000037d0: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+000037e0: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+000037f0: 7228 3229 290d 0a20 2020 2020 2020 2073  r(2))..        s
+00003800: 656c 662e 6263 332e 7072 6573 7365 642e  elf.bc3.pressed.
+00003810: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00003820: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+00003830: 7228 3329 290d 0a20 2020 2020 2020 2073  r(3))..        s
+00003840: 656c 662e 6263 342e 7072 6573 7365 642e  elf.bc4.pressed.
+00003850: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00003860: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+00003870: 7228 3429 290d 0a20 2020 2020 2020 2073  r(4))..        s
+00003880: 656c 662e 6263 352e 7072 6573 7365 642e  elf.bc5.pressed.
+00003890: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+000038a0: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+000038b0: 7228 3529 290d 0a20 2020 2020 2020 2073  r(5))..        s
+000038c0: 656c 662e 6263 362e 7072 6573 7365 642e  elf.bc6.pressed.
+000038d0: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+000038e0: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+000038f0: 7228 3629 290d 0a20 2020 2020 2020 2073  r(6))..        s
+00003900: 656c 662e 6263 372e 7072 6573 7365 642e  elf.bc7.pressed.
+00003910: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00003920: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+00003930: 7228 3729 290d 0a20 2020 2020 2020 2073  r(7))..        s
+00003940: 656c 662e 6263 382e 7072 6573 7365 642e  elf.bc8.pressed.
+00003950: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00003960: 7365 6c66 2e63 6861 6e67 655f 636f 6c6f  self.change_colo
+00003970: 7228 3829 290d 0a0d 0a20 2020 2020 2020  r(8))....       
+00003980: 2073 656c 662e 6274 6e5f 6373 6176 652e   self.btn_csave.
+00003990: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+000039a0: 6c61 6d62 6461 3a20 7365 6c66 2e74 6865  lambda: self.the
+000039b0: 6d65 5f6d 616e 6167 6572 2e73 6176 655f  me_manager.save_
+000039c0: 636f 6c6f 7273 2829 290d 0a20 2020 2020  colors())..     
+000039d0: 2020 2073 656c 662e 6274 6e5f 636c 6f61     self.btn_cloa
+000039e0: 642e 7072 6573 7365 642e 636f 6e6e 6563  d.pressed.connec
+000039f0: 7428 6c61 6d62 6461 3a20 7365 6c66 2e74  t(lambda: self.t
+00003a00: 6865 6d65 5f6d 616e 6167 6572 2e6c 6f61  heme_manager.loa
+00003a10: 645f 636f 6c6f 7273 2829 290d 0a20 2020  d_colors())..   
+00003a20: 2020 2020 2073 656c 662e 6274 6e5f 6372       self.btn_cr
+00003a30: 6573 746f 7265 2e70 7265 7373 6564 2e63  estore.pressed.c
+00003a40: 6f6e 6e65 6374 286c 616d 6264 613a 2073  onnect(lambda: s
+00003a50: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00003a60: 722e 7265 7374 6f72 6528 2929 0d0a 2020  r.restore())..  
+00003a70: 2020 2020 2020 7365 6c66 2e6d 6169 6e6c        self.mainl
+00003a80: 6f6f 705f 7374 7220 3d20 2222 0d0a 2020  oop_str = ""..  
+00003a90: 2020 2020 2020 7365 6c66 2e73 6574 7469        self.setti
+00003aa0: 6e67 735f 7374 7220 3d20 2222 220d 0a6d  ngs_str = """..m
+00003ab0: 6574 6169 6e66 6f3a 0d0a 0961 7574 686f  etainfo:...autho
+00003ac0: 723a 2079 6f75 7220 6e61 6d65 2068 6572  r: your name her
+00003ad0: 650d 0a09 6461 7465 3a20 3230 3730 0d0a  e...date: 2070..
+00003ae0: 0969 6e66 6f3a 2065 7861 6d70 6c65 2073  .info: example s
+00003af0: 6574 7469 6e67 730d 0a0d 0a68 7970 6572  ettings....hyper
+00003b00: 7061 7261 6d73 3a0d 0a20 2020 2020 2020  params:..       
+00003b10: 2d20 6e61 6d65 3a20 6578 616d 706c 650d  - name: example.
+00003b20: 0a20 2020 2020 2020 2020 7661 6c75 653a  .         value:
+00003b30: 2034 322e 300d 0a20 2020 2020 2020 2020   42.0..         
+00003b40: 6465 7363 7269 7074 696f 6e3a 2061 6e20  description: an 
+00003b50: 6578 616d 706c 6520 7061 7261 6d65 7465  example paramete
+00003b60: 720d 0a22 2222 0d0a 2020 2020 2020 2020  r.."""..        
+00003b70: 7365 6c66 2e65 6469 7453 6574 7469 6e67  self.editSetting
+00003b80: 7342 7574 746f 6e2e 7472 6967 6765 7265  sButton.triggere
+00003b90: 642e 636f 6e6e 6563 7428 7365 6c66 2e65  d.connect(self.e
+00003ba0: 6469 745f 7365 7474 696e 6773 290d 0a20  dit_settings).. 
+00003bb0: 2020 2020 2020 2073 656c 662e 6164 6442         self.addB
+00003bc0: 7574 746f 6e2e 7072 6573 7365 642e 636f  utton.pressed.co
+00003bd0: 6e6e 6563 7428 7365 6c66 2e61 6464 5f6e  nnect(self.add_n
+00003be0: 6577 2920 2320 6164 6420 616e 2061 6765  ew) # add an age
+00003bf0: 6e74 0d0a 2020 2020 2020 2020 7365 6c66  nt..        self
+00003c00: 2e61 6464 4275 7474 6f6e 322e 7072 6573  .addButton2.pres
+00003c10: 7365 642e 636f 6e6e 6563 7428 7365 6c66  sed.connect(self
+00003c20: 2e61 6464 5f68 656c 7065 7229 2023 2061  .add_helper) # a
+00003c30: 6464 2061 2068 656c 7065 7220 6167 656e  dd a helper agen
+00003c40: 7420 286e 6f20 7472 616e 7361 6374 696f  t (no transactio
+00003c50: 6e73 290d 0a20 2020 2020 2020 2073 656c  ns)..        sel
+00003c60: 662e 6772 6170 6844 656c 6574 6542 7574  f.graphDeleteBut
+00003c70: 746f 6e2e 7072 6573 7365 642e 636f 6e6e  ton.pressed.conn
+00003c80: 6563 7428 7365 6c66 2e72 656d 6f76 655f  ect(self.remove_
+00003c90: 6865 6c70 6572 290d 0a20 2020 2020 2020  helper)..       
+00003ca0: 2023 7365 6c66 2e73 6176 6542 7574 746f   #self.saveButto
+00003cb0: 6e2e 7072 6573 7365 642e 636f 6e6e 6563  n.pressed.connec
+00003cc0: 7428 7365 6c66 2e73 6176 6529 0d0a 2020  t(self.save)..  
+00003cd0: 2020 2020 2020 2320 7365 6c66 2e67 7261        # self.gra
+00003ce0: 7068 5365 6c65 6374 4275 7474 6f6e 2e70  phSelectButton.p
+00003cf0: 7265 7373 6564 2e63 6f6e 6e65 6374 2873  ressed.connect(s
+00003d00: 656c 662e 6368 616e 6765 5f67 7261 7068  elf.change_graph
+00003d10: 6d6f 6465 5f73 656c 6563 7429 0d0a 2020  mode_select)..  
+00003d20: 2020 2020 2020 2320 7365 6c66 2e67 7261        # self.gra
+00003d30: 7068 4472 6167 4275 7474 6f6e 2e70 7265  phDragButton.pre
+00003d40: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
+00003d50: 662e 6368 616e 6765 5f67 7261 7068 6d6f  f.change_graphmo
+00003d60: 6465 5f64 7261 6729 0d0a 2020 2020 2020  de_drag)..      
+00003d70: 2020 7365 6c66 2e67 7261 7068 4564 6974    self.graphEdit
+00003d80: 4275 7474 6f6e 2e70 7265 7373 6564 2e63  Button.pressed.c
+00003d90: 6f6e 6e65 6374 2873 656c 662e 6564 6974  onnect(self.edit
+00003da0: 5f67 7261 7068 5f61 6765 6e74 290d 0a20  _graph_agent).. 
+00003db0: 2020 2020 2020 2023 666f 7220 7769 6467         #for widg
+00003dc0: 6574 2069 6e20 5b73 656c 662e 4173 7365  et in [self.Asse
+00003dd0: 744c 6973 744c 6566 742c 2073 656c 662e  tListLeft, self.
+00003de0: 4173 7365 744c 6973 7452 6967 6874 2c0d  AssetListRight,.
+00003df0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00003e00: 2020 2020 2020 2020 2073 656c 662e 4c69           self.Li
+00003e10: 6162 696c 6974 794c 6973 744c 6566 742c  abilityListLeft,
+00003e20: 2073 656c 662e 4c69 6162 696c 6974 794c   self.LiabilityL
+00003e30: 6973 7452 6967 6874 2c0d 0a20 2020 2020  istRight,..     
+00003e40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00003e50: 2020 2073 656c 662e 4571 7569 7479 4c69     self.EquityLi
+00003e60: 7374 4c65 6674 2c20 7365 6c66 2e45 7175  stLeft, self.Equ
+00003e70: 6974 794c 6973 7452 6967 6874 5d3a 0d0a  ityListRight]:..
+00003e80: 2020 2020 2020 2020 2320 2020 2077 6964          #    wid
+00003e90: 6765 742e 7465 7874 4368 616e 6765 642e  get.textChanged.
+00003ea0: 636f 6e6e 6563 7428 7365 6c66 2e75 7064  connect(self.upd
+00003eb0: 6174 655f 6461 7461 290d 0a20 2020 2020  ate_data)..     
+00003ec0: 2020 2073 656c 662e 6163 7469 6f6e 5377     self.actionSw
+00003ed0: 6170 5f4c 696e 655f 496e 7465 7270 6f6c  ap_Line_Interpol
+00003ee0: 6174 696f 6e2e 7472 6967 6765 7265 642e  ation.triggered.
+00003ef0: 636f 6e6e 6563 7428 7365 6c66 2e64 7261  connect(self.dra
+00003f00: 7763 616e 7661 732e 7377 6170 5f69 6e74  wcanvas.swap_int
+00003f10: 6572 706f 6c5f 7374 796c 6529 0d0a 2020  erpol_style)..  
+00003f20: 2020 2020 2020 7365 6c66 2e61 6374 696f        self.actio
+00003f30: 6e45 7870 6f72 745f 4772 6170 685f 746f  nExport_Graph_to
+00003f40: 5f50 4446 2e74 7269 6767 6572 6564 2e63  _PDF.triggered.c
+00003f50: 6f6e 6e65 6374 2873 656c 662e 6472 6177  onnect(self.draw
+00003f60: 6361 6e76 6173 2e65 7870 6f72 745f 7064  canvas.export_pd
+00003f70: 6629 0d0a 0d0a 2020 2020 2020 2020 7365  f)....        se
+00003f80: 6c66 2e75 6470 6174 6542 7574 746f 6e2e  lf.udpateButton.
+00003f90: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00003fa0: 7365 6c66 2e75 7064 6174 655f 6461 7461  self.update_data
+00003fb0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00003fc0: 662e 6669 6c65 6e61 6d65 203d 204e 6f6e  f.filename = Non
+00003fd0: 6520 2020 2023 2063 7572 7265 6e74 202e  e    # current .
+00003fe0: 7961 6d6c 2066 696c 650d 0a20 2020 2020  yaml file..     
+00003ff0: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+00004000: 7461 203d 205b 5d20 2320 7374 6f72 6520  ta = [] # store 
+00004010: 6375 7272 656e 7420 656e 7472 6965 730d  current entries.
+00004020: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00004030: 6c65 6374 696f 6e5f 6964 7820 3d20 4e6f  lection_idx = No
+00004040: 6e65 0d0a 0d0a 2020 2020 2020 2020 2373  ne....        #s
+00004050: 656c 662e 6d61 7472 6978 5669 6577 203d  elf.matrixView =
+00004060: 204d 6174 7269 7856 6965 7765 7228 7365   MatrixViewer(se
+00004070: 6c66 290d 0a20 2020 2020 2020 2073 656c  lf)..        sel
+00004080: 662e 6d6f 7665 5570 4274 6e2e 7072 6573  f.moveUpBtn.pres
+00004090: 7365 642e 636f 6e6e 6563 7428 7365 6c66  sed.connect(self
+000040a0: 2e6d 6f76 655f 7570 290d 0a20 2020 2020  .move_up)..     
+000040b0: 2020 2073 656c 662e 6d6f 7665 446e 4274     self.moveDnBt
+000040c0: 6e2e 7072 6573 7365 642e 636f 6e6e 6563  n.pressed.connec
+000040d0: 7428 7365 6c66 2e6d 6f76 655f 646f 776e  t(self.move_down
+000040e0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+000040f0: 662e 6669 6c74 6572 436f 6d62 6f2e 6974  f.filterCombo.it
+00004100: 656d 5365 6c65 6374 696f 6e43 6861 6e67  emSelectionChang
+00004110: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
+00004120: 613a 2073 656c 662e 6472 6177 6361 6e76  a: self.drawcanv
+00004130: 6173 2e75 7064 6174 6528 2929 0d0a 2020  as.update())..  
+00004140: 2020 2020 2020 7365 6c66 2e63 6c65 6172        self.clear
+00004150: 4669 6c74 6572 4275 7474 6f6e 2e70 7265  FilterButton.pre
+00004160: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
+00004170: 662e 636c 6561 725f 6669 6c74 6572 290d  f.clear_filter).
+00004180: 0a0d 0a20 2020 2020 2020 2023 206d 6169  ...        # mai
+00004190: 6e6c 6f6f 7020 6564 6974 6f72 2069 7320  nloop editor is 
+000041a0: 616c 7761 7973 2072 756e 6e69 6e67 2074  always running t
+000041b0: 6f20 6368 6563 6b20 666f 7220 6669 6c65  o check for file
+000041c0: 2063 6861 6e67 6573 0d0a 2020 2020 2020   changes..      
+000041d0: 2020 7365 6c66 2e6d 6169 6e6c 6f6f 705f    self.mainloop_
+000041e0: 6564 6974 6f72 203d 204d 6169 6e4c 6f6f  editor = MainLoo
+000041f0: 7045 6469 746f 7228 7365 6c66 2c73 656c  pEditor(self,sel
+00004200: 662e 6d61 696e 6c6f 6f70 5f73 7472 290d  f.mainloop_str).
+00004210: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00004220: 696e 6c6f 6f70 5f65 6469 746f 722e 7368  inloop_editor.sh
+00004230: 6f77 2829 0d0a 2020 2020 2020 2020 7365  ow()..        se
+00004240: 6c66 2e6d 6169 6e6c 6f6f 705f 6564 6974  lf.mainloop_edit
+00004250: 6f72 2e68 6964 6528 290d 0a0d 0a20 2020  or.hide()....   
+00004260: 2020 2020 2023 2073 6574 7469 6e67 7320       # settings 
+00004270: 6564 6974 6f72 2069 7320 616c 7761 7973  editor is always
+00004280: 2072 756e 6e69 6e67 2074 6f20 6368 6563   running to chec
+00004290: 6b20 666f 7220 6669 6c65 2063 6861 6e67  k for file chang
+000042a0: 6573 0d0a 2020 2020 2020 2020 7365 6c66  es..        self
+000042b0: 2e73 6574 7469 6e67 735f 6564 6974 6f72  .settings_editor
+000042c0: 203d 2053 6574 7469 6e67 7345 6469 746f   = SettingsEdito
+000042d0: 7228 7365 6c66 2c20 7365 6c66 2e73 6574  r(self, self.set
+000042e0: 7469 6e67 735f 7374 7229 0d0a 2020 2020  tings_str)..    
+000042f0: 2020 2020 7365 6c66 2e73 6574 7469 6e67      self.setting
+00004300: 735f 6564 6974 6f72 2e73 686f 7728 290d  s_editor.show().
+00004310: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00004320: 7474 696e 6773 5f65 6469 746f 722e 6869  ttings_editor.hi
+00004330: 6465 2829 0d0a 0d0a 2020 2020 2020 2020  de()....        
+00004340: 2320 7468 656d 6520 6d61 6e61 6765 7220  # theme manager 
+00004350: 7365 7475 700d 0a20 2020 2020 2020 2023  setup..        #
+00004360: 2074 6865 6d65 206d 616e 6167 6572 2068   theme manager h
+00004370: 6173 2027 6461 726b 2720 616e 6420 2762  as 'dark' and 'b
+00004380: 7269 6768 7427 206d 6f64 650d 0a20 2020  right' mode..   
+00004390: 2020 2020 2073 656c 662e 7468 656d 655f       self.theme_
+000043a0: 6d61 6e61 6765 722e 7468 656d 6520 3d20  manager.theme = 
+000043b0: 2264 6172 6b22 0d0a 2020 2020 2020 2020  "dark"..        
+000043c0: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
+000043d0: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+000043e0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+000043f0: 7265 7374 6f72 6528 290d 0a20 2020 2020  restore()..     
+00004400: 2020 2073 656c 662e 7377 6974 6368 5f74     self.switch_t
+00004410: 6865 6d65 2829 0d0a 2020 2020 2020 2020  heme()..        
+00004420: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
+00004430: 6528 290d 0a0d 0a0d 0a20 2020 2064 6566  e()......    def
+00004440: 2073 6561 7263 685f 646c 6728 7365 6c66   search_dlg(self
+00004450: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+00004460: 0a20 2020 2020 2020 2073 6561 7263 6820  .        search 
+00004470: 666f 7220 616e 2061 6765 6e74 0d0a 2020  for an agent..  
+00004480: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+00004490: 2020 2020 2069 6620 5365 6172 6368 4469       if SearchDi
+000044a0: 616c 6f67 2e69 6e73 7461 6e63 6520 6973  alog.instance is
+000044b0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+000044c0: 2020 2020 6e65 775f 646c 6720 3d20 5365      new_dlg = Se
+000044d0: 6172 6368 4469 616c 6f67 2873 656c 6629  archDialog(self)
+000044e0: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
+000044f0: 775f 646c 672e 7368 6f77 2829 0d0a 2020  w_dlg.show()..  
+00004500: 2020 2020 2020 2320 7365 6c66 2e6e 6f74        # self.not
+00004510: 6966 7928 2254 6573 7420 5365 6172 6368  ify("Test Search
+00004520: 222c 2074 6974 6c65 3d22 5365 6172 6368  ", title="Search
+00004530: 2041 6765 6e74 2229 0d0a 0d0a 2020 2020   Agent")....    
+00004540: 6465 6620 6368 616e 6765 5f63 6f6c 6f72  def change_color
+00004550: 2873 656c 662c 7768 6963 6829 3a0d 0a20  (self,which):.. 
+00004560: 2020 2020 2020 2063 6f6c 6f72 203d 2051         color = Q
+00004570: 436f 6c6f 7244 6961 6c6f 672e 6765 7443  ColorDialog.getC
+00004580: 6f6c 6f72 2829 0d0a 0d0a 2020 2020 2020  olor()....      
+00004590: 2020 6966 2063 6f6c 6f72 2e69 7356 616c    if color.isVal
+000045a0: 6964 2829 3a0d 0a20 2020 2020 2020 2020  id():..         
+000045b0: 2020 2070 7269 6e74 2822 4348 414e 4745     print("CHANGE
+000045c0: 2043 4f4c 4f52 222c 2077 6869 6368 2c20   COLOR", which, 
+000045d0: 636f 6c6f 722e 6e61 6d65 2829 290d 0a0d  color.name())...
+000045e0: 0a20 2020 2020 2020 2020 2020 2062 746e  .            btn
+000045f0: 5f74 6162 6c65 203d 207b 0d0a 2020 2020  _table = {..    
+00004600: 2020 2020 2020 2020 2020 2020 313a 2073              1: s
+00004610: 656c 662e 6263 312c 0d0a 2020 2020 2020  elf.bc1,..      
+00004620: 2020 2020 2020 2020 2020 323a 2073 656c            2: sel
+00004630: 662e 6263 322c 0d0a 2020 2020 2020 2020  f.bc2,..        
+00004640: 2020 2020 2020 2020 333a 2073 656c 662e          3: self.
+00004650: 6263 332c 0d0a 2020 2020 2020 2020 2020  bc3,..          
+00004660: 2020 2020 2020 343a 2073 656c 662e 6263        4: self.bc
+00004670: 342c 0d0a 2020 2020 2020 2020 2020 2020  4,..            
+00004680: 2020 2020 353a 2073 656c 662e 6263 352c      5: self.bc5,
+00004690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000046a0: 2020 363a 2073 656c 662e 6263 362c 0d0a    6: self.bc6,..
+000046b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046c0: 373a 2073 656c 662e 6263 372c 0d0a 2020  7: self.bc7,..  
+000046d0: 2020 2020 2020 2020 2020 2020 2020 383a                8:
+000046e0: 2073 656c 662e 6263 382c 0d0a 2020 2020   self.bc8,..    
+000046f0: 2020 2020 2020 2020 7d0d 0a0d 0a20 2020          }....   
+00004700: 2020 2020 2020 2020 2062 746e 5f74 6162           btn_tab
+00004710: 6c65 5b77 6869 6368 5d2e 7365 7453 7479  le[which].setSty
+00004720: 6c65 5368 6565 7428 2262 6163 6b67 726f  leSheet("backgro
+00004730: 756e 642d 636f 6c6f 723a 2072 6762 2825  und-color: rgb(%
+00004740: 732c 2573 2c25 7329 3b22 2528 636f 6c6f  s,%s,%s);"%(colo
+00004750: 722e 7265 6428 292c 636f 6c6f 722e 6772  r.red(),color.gr
+00004760: 6565 6e28 292c 636f 6c6f 722e 626c 7565  een(),color.blue
+00004770: 2829 2929 0d0a 2020 2020 2020 2020 2020  ()))..          
+00004780: 2020 7365 6c66 2e74 6865 6d65 5f6d 616e    self.theme_man
+00004790: 6167 6572 2e63 6f6c 6f72 735b 7365 6c66  ager.colors[self
+000047a0: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
+000047b0: 6865 6d65 5d5b 7768 6963 682d 315d 203d  heme][which-1] =
+000047c0: 2063 6f6c 6f72 0d0a 0d0a 0d0a 2020 2020   color......    
+000047d0: 6465 6620 636c 6561 725f 6669 6c74 6572  def clear_filter
+000047e0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+000047f0: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
+00004800: 6f2e 636c 6561 7253 656c 6563 7469 6f6e  o.clearSelection
+00004810: 2829 0d0a 0d0a 2020 2020 6465 6620 6765  ()....    def ge
+00004820: 6e5f 6261 6c61 6e63 655f 6d61 7472 6978  n_balance_matrix
+00004830: 2873 656c 662c 6465 7461 696c 6564 3d54  (self,detailed=T
+00004840: 7275 6529 3a0d 0a20 2020 2020 2020 2023  rue):..        #
+00004850: 2067 656e 6572 6174 6573 2061 2062 616c   generates a bal
+00004860: 616e 6365 2073 6865 6574 206d 6174 7269  ance sheet matri
+00004870: 7820 666f 7220 616c 6c20 6167 656e 7473  x for all agents
+00004880: 0d0a 2020 2020 2020 2020 2320 3a70 6172  ..        # :par
+00004890: 616d 3a20 6465 7461 696c 6564 3a20 7368  am: detailed: sh
+000048a0: 6f77 206c 6172 6765 206d 6174 7269 7820  ow large matrix 
+000048b0: 6f72 2061 6767 7265 6761 7465 2069 6e64  or aggregate ind
+000048c0: 6976 6964 7561 6c20 726f 7773 3f0d 0a0d  ividual rows?...
+000048d0: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+000048e0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+000048f0: 6e65 645f 6261 6c61 6e63 6520 3d20 2064  ned_balance =  d
+00004900: 6566 6175 6c74 6469 6374 286c 616d 6264  efaultdict(lambd
+00004910: 613a 207b 2249 7465 6d22 3a5b 5d2c 2241  a: {"Item":[],"A
+00004920: 7373 6574 7322 3a5b 5d2c 224c 6961 6269  ssets":[],"Liabi
+00004930: 6c69 7469 6573 223a 205b 5d7d 290d 0a0d  lities": []})...
+00004940: 0a0d 0a20 2020 2020 2020 2020 2020 2066  ...            f
+00004950: 6f72 2066 696c 6564 6174 6120 696e 2073  or filedata in s
+00004960: 656c 662e 656e 7472 795f 6461 7461 3a0d  elf.entry_data:.
+00004970: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00004980: 2020 2061 6765 6e74 3120 3d20 6669 6c65     agent1 = file
+00004990: 6461 7461 5b22 6167 656e 7431 225d 2e73  data["agent1"].s
+000049a0: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+000049b0: 2020 2020 2020 2020 6167 656e 7432 203d          agent2 =
+000049c0: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
+000049d0: 3222 5d2e 7374 7269 7028 290d 0a0d 0a20  2"].strip().... 
+000049e0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000049f0: 7373 6574 7331 203d 2066 696c 6564 6174  ssets1 = filedat
+00004a00: 615b 2261 3122 5d0d 0a20 2020 2020 2020  a["a1"]..       
+00004a10: 2020 2020 2020 2020 206c 6961 6273 3120           liabs1 
+00004a20: 3d20 6669 6c65 6461 7461 5b22 6c31 225d  = filedata["l1"]
+00004a30: 2023 2b20 6669 6c65 6461 7461 5b22 6531   #+ filedata["e1
+00004a40: 225d 202b 2022 5c6e 220d 0a0d 0a20 2020  "] + "\n"....   
+00004a50: 2020 2020 2020 2020 2020 2020 2061 7373               ass
+00004a60: 6574 7332 203d 2066 696c 6564 6174 615b  ets2 = filedata[
+00004a70: 2261 3222 5d0d 0a20 2020 2020 2020 2020  "a2"]..         
+00004a80: 2020 2020 2020 206c 6961 6273 3220 3d20         liabs2 = 
+00004a90: 6669 6c65 6461 7461 5b22 6c32 225d 2023  filedata["l2"] #
+00004aa0: 2b20 6669 6c65 6461 7461 5b22 6532 225d  + filedata["e2"]
+00004ab0: 202b 2022 5c6e 220d 0a0d 0a20 2020 2020   + "\n"....     
+00004ac0: 2020 2020 2020 2020 2020 2069 6620 6465             if de
+00004ad0: 7461 696c 6564 3a0d 0a20 2020 2020 2020  tailed:..       
+00004ae0: 2020 2020 2020 2020 2020 2020 2073 7562               sub
+00004af0: 6a65 6374 203d 2022 2028 2573 295c 6e22  ject = " (%s)\n"
+00004b00: 2025 2066 696c 6564 6174 615b 2273 7562   % filedata["sub
+00004b10: 6a65 6374 225d 0d0a 2020 2020 2020 2020  ject"]..        
+00004b20: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00004b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b40: 2020 2073 7562 6a65 6374 203d 2022 5c6e     subject = "\n
+00004b50: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00004b60: 2020 206d 795f 6173 7365 7473 3120 3d20     my_assets1 = 
+00004b70: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
+00004b80: 2020 2020 6d79 5f6c 6961 6273 3120 3d20      my_liabs1 = 
+00004b90: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
+00004ba0: 2020 2020 6d79 5f61 7373 6574 7332 203d      my_assets2 =
+00004bb0: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
+00004bc0: 2020 2020 206d 795f 6c69 6162 7332 203d       my_liabs2 =
+00004bd0: 205b 5d0d 0a0d 0a20 2020 2020 2020 2020   []....         
+00004be0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00004bf0: 6173 7365 7473 312e 7370 6c69 7428 225c  assets1.split("\
+00004c00: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+00004c10: 2020 2020 2020 2020 2020 6966 2069 2e73            if i.s
+00004c20: 7472 6970 2829 2e73 7461 7274 7377 6974  trip().startswit
+00004c30: 6828 222b 2229 3a0d 0a20 2020 2020 2020  h("+"):..       
+00004c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004c50: 206d 795f 6974 656d 203d 2069 2e73 706c   my_item = i.spl
+00004c60: 6974 2822 2b22 295b 315d 202b 2073 7562  it("+")[1] + sub
+00004c70: 6a65 6374 0d0a 2020 2020 2020 2020 2020  ject..          
+00004c80: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00004c90: 676e 203d 2022 2b22 0d0a 2020 2020 2020  gn = "+"..      
+00004ca0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00004cb0: 6966 2069 2e73 7472 6970 2829 2e73 7461  if i.strip().sta
+00004cc0: 7274 7377 6974 6828 222d 2229 3a0d 0a20  rtswith("-"):.. 
 00004cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ce0: 2020 2020 2073 6967 6e20 3d20 222d 220d       sign = "-".
-00004cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004d00: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00004ce0: 2020 2020 2020 206d 795f 6974 656d 203d         my_item =
+00004cf0: 2069 2e73 706c 6974 2822 2d22 295b 315d   i.split("-")[1]
+00004d00: 202b 2073 7562 6a65 6374 0d0a 2020 2020   + subject..    
 00004d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004d20: 2020 2020 6272 6561 6b0d 0a20 2020 2020      break..     
-00004d30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00004d40: 6f6d 6269 6e65 645f 6261 6c61 6e63 655b  ombined_balance[
-00004d50: 6167 656e 7431 5d5b 2249 7465 6d22 5d2e  agent1]["Item"].
-00004d60: 6170 7065 6e64 286d 795f 6974 656d 290d  append(my_item).
-00004d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004d80: 2020 2020 2063 6f6d 6269 6e65 645f 6261       combined_ba
-00004d90: 6c61 6e63 655b 6167 656e 7431 5d5b 2241  lance[agent1]["A
-00004da0: 7373 6574 7322 5d2e 6170 7065 6e64 2873  ssets"].append(s
-00004db0: 6967 6e2b 6669 6c65 6461 7461 5b22 7175  ign+filedata["qu
-00004dc0: 616e 7469 7479 225d 2b22 5c6e 2229 0d0a  antity"]+"\n")..
-00004dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004de0: 2020 2020 636f 6d62 696e 6564 5f62 616c      combined_bal
-00004df0: 616e 6365 5b61 6765 6e74 315d 5b22 4c69  ance[agent1]["Li
-00004e00: 6162 696c 6974 6965 7322 5d2e 6170 7065  abilities"].appe
-00004e10: 6e64 2822 2229 0d0a 0d0a 2020 2020 2020  nd("")....      
-00004e20: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00004e30: 696e 2061 7373 6574 7332 2e73 706c 6974  in assets2.split
-00004e40: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-00004e50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00004e60: 692e 7374 7269 7028 292e 7374 6172 7473  i.strip().starts
-00004e70: 7769 7468 2822 2b22 293a 0d0a 2020 2020  with("+"):..    
-00004e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004e90: 2020 2020 6d79 5f69 7465 6d20 3d20 692e      my_item = i.
-00004ea0: 7370 6c69 7428 222b 2229 5b31 5d20 2b20  split("+")[1] + 
-00004eb0: 7375 626a 6563 740d 0a20 2020 2020 2020  subject..       
+00004d20: 2020 2020 7369 676e 203d 2022 2d22 0d0a      sign = "-"..
+00004d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d40: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00004d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d60: 2020 2062 7265 616b 0d0a 2020 2020 2020     break..      
+00004d70: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00004d80: 6d62 696e 6564 5f62 616c 616e 6365 5b61  mbined_balance[a
+00004d90: 6765 6e74 315d 5b22 4974 656d 225d 2e61  gent1]["Item"].a
+00004da0: 7070 656e 6428 6d79 5f69 7465 6d29 0d0a  ppend(my_item)..
+00004db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004dc0: 2020 2020 636f 6d62 696e 6564 5f62 616c      combined_bal
+00004dd0: 616e 6365 5b61 6765 6e74 315d 5b22 4173  ance[agent1]["As
+00004de0: 7365 7473 225d 2e61 7070 656e 6428 7369  sets"].append(si
+00004df0: 676e 2b66 696c 6564 6174 615b 2271 7561  gn+filedata["qua
+00004e00: 6e74 6974 7922 5d2b 225c 6e22 290d 0a20  ntity"]+"\n").. 
+00004e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004e20: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
+00004e30: 6e63 655b 6167 656e 7431 5d5b 224c 6961  nce[agent1]["Lia
+00004e40: 6269 6c69 7469 6573 225d 2e61 7070 656e  bilities"].appen
+00004e50: 6428 2222 290d 0a0d 0a20 2020 2020 2020  d("")....       
+00004e60: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00004e70: 6e20 6173 7365 7473 322e 7370 6c69 7428  n assets2.split(
+00004e80: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+00004e90: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00004ea0: 2e73 7472 6970 2829 2e73 7461 7274 7377  .strip().startsw
+00004eb0: 6974 6828 222b 2229 3a0d 0a20 2020 2020  ith("+"):..     
 00004ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ed0: 2073 6967 6e20 3d20 222b 220d 0a20 2020   sign = "+"..   
-00004ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ef0: 2065 6c69 6620 692e 7374 7269 7028 292e   elif i.strip().
-00004f00: 7374 6172 7473 7769 7468 2822 2d22 293a  startswith("-"):
-00004f10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004f20: 2020 2020 2020 2020 2020 6d79 5f69 7465            my_ite
-00004f30: 6d20 3d20 692e 7370 6c69 7428 222d 2229  m = i.split("-")
-00004f40: 5b31 5d20 2b20 7375 626a 6563 740d 0a20  [1] + subject.. 
-00004f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004f60: 2020 2020 2020 2073 6967 6e20 3d20 222d         sign = "-
-00004f70: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00004f80: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00004ed0: 2020 206d 795f 6974 656d 203d 2069 2e73     my_item = i.s
+00004ee0: 706c 6974 2822 2b22 295b 315d 202b 2073  plit("+")[1] + s
+00004ef0: 7562 6a65 6374 0d0a 2020 2020 2020 2020  ubject..        
+00004f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004f10: 7369 676e 203d 2022 2b22 0d0a 2020 2020  sign = "+"..    
+00004f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004f30: 656c 6966 2069 2e73 7472 6970 2829 2e73  elif i.strip().s
+00004f40: 7461 7274 7377 6974 6828 222d 2229 3a0d  tartswith("-"):.
+00004f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004f60: 2020 2020 2020 2020 206d 795f 6974 656d           my_item
+00004f70: 203d 2069 2e73 706c 6974 2822 2d22 295b   = i.split("-")[
+00004f80: 315d 202b 2073 7562 6a65 6374 0d0a 2020  1] + subject..  
 00004f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004fa0: 2020 2020 2020 6272 6561 6b0d 0a20 2020        break..   
-00004fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004fc0: 2063 6f6d 6269 6e65 645f 6261 6c61 6e63   combined_balanc
-00004fd0: 655b 6167 656e 7432 5d5b 2249 7465 6d22  e[agent2]["Item"
-00004fe0: 5d2e 6170 7065 6e64 286d 795f 6974 656d  ].append(my_item
-00004ff0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00005000: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-00005010: 6261 6c61 6e63 655b 6167 656e 7432 5d5b  balance[agent2][
-00005020: 2241 7373 6574 7322 5d2e 6170 7065 6e64  "Assets"].append
-00005030: 2873 6967 6e2b 6669 6c65 6461 7461 5b22  (sign+filedata["
-00005040: 7175 616e 7469 7479 225d 2b22 5c6e 2229  quantity"]+"\n")
-00005050: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005060: 2020 2020 2020 636f 6d62 696e 6564 5f62        combined_b
-00005070: 616c 616e 6365 5b61 6765 6e74 325d 5b22  alance[agent2]["
-00005080: 4c69 6162 696c 6974 6965 7322 5d2e 6170  Liabilities"].ap
-00005090: 7065 6e64 2822 2229 0d0a 0d0a 0d0a 2020  pend("")......  
-000050a0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-000050b0: 7220 6a20 696e 206c 6961 6273 312e 7370  r j in liabs1.sp
-000050c0: 6c69 7428 225c 6e22 293a 0d0a 2020 2020  lit("\n"):..    
-000050d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050e0: 6966 206a 2e73 7472 6970 2829 2e73 7461  if j.strip().sta
-000050f0: 7274 7377 6974 6828 222b 2229 3a0d 0a20  rtswith("+"):.. 
-00005100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005110: 2020 2020 2020 206d 795f 6974 656d 203d         my_item =
-00005120: 206a 2e73 706c 6974 2822 2b22 295b 315d   j.split("+")[1]
-00005130: 202b 2073 7562 6a65 6374 0d0a 2020 2020   + subject..    
+00004fa0: 2020 2020 2020 7369 676e 203d 2022 2d22        sign = "-"
+00004fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004fc0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00004fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004fe0: 2020 2020 2062 7265 616b 0d0a 2020 2020       break..    
+00004ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005000: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
+00005010: 5b61 6765 6e74 325d 5b22 4974 656d 225d  [agent2]["Item"]
+00005020: 2e61 7070 656e 6428 6d79 5f69 7465 6d29  .append(my_item)
+00005030: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005040: 2020 2020 2020 636f 6d62 696e 6564 5f62        combined_b
+00005050: 616c 616e 6365 5b61 6765 6e74 325d 5b22  alance[agent2]["
+00005060: 4173 7365 7473 225d 2e61 7070 656e 6428  Assets"].append(
+00005070: 7369 676e 2b66 696c 6564 6174 615b 2271  sign+filedata["q
+00005080: 7561 6e74 6974 7922 5d2b 225c 6e22 290d  uantity"]+"\n").
+00005090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000050a0: 2020 2020 2063 6f6d 6269 6e65 645f 6261       combined_ba
+000050b0: 6c61 6e63 655b 6167 656e 7432 5d5b 224c  lance[agent2]["L
+000050c0: 6961 6269 6c69 7469 6573 225d 2e61 7070  iabilities"].app
+000050d0: 656e 6428 2222 290d 0a0d 0a0d 0a20 2020  end("")......   
+000050e0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+000050f0: 206a 2069 6e20 6c69 6162 7331 2e73 706c   j in liabs1.spl
+00005100: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
+00005110: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00005120: 6620 6a2e 7374 7269 7028 292e 7374 6172  f j.strip().star
+00005130: 7473 7769 7468 2822 2b22 293a 0d0a 2020  tswith("+"):..  
 00005140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005150: 2020 2020 7369 676e 203d 2022 2b22 0d0a      sign = "+"..
-00005160: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005170: 2020 2020 2020 656c 6966 206a 2e73 7472        elif j.str
-00005180: 6970 2829 2e73 7461 7274 7377 6974 6828  ip().startswith(
-00005190: 222d 2229 3a0d 0a20 2020 2020 2020 2020  "-"):..         
-000051a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000051b0: 795f 6974 656d 203d 206a 2e73 706c 6974  y_item = j.split
-000051c0: 2822 2d22 295b 315d 202b 2073 7562 6a65  ("-")[1] + subje
-000051d0: 6374 0d0a 2020 2020 2020 2020 2020 2020  ct..            
-000051e0: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-000051f0: 203d 2022 2d22 0d0a 2020 2020 2020 2020   = "-"..        
-00005200: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00005210: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00005220: 2020 2020 2020 2020 2020 2062 7265 616b             break
-00005230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005240: 2020 2020 2020 636f 6d62 696e 6564 5f62        combined_b
-00005250: 616c 616e 6365 5b61 6765 6e74 315d 5b22  alance[agent1]["
-00005260: 4974 656d 225d 2e61 7070 656e 6428 6d79  Item"].append(my
-00005270: 5f69 7465 6d29 0d0a 2020 2020 2020 2020  _item)..        
-00005280: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-00005290: 696e 6564 5f62 616c 616e 6365 5b61 6765  ined_balance[age
-000052a0: 6e74 315d 5b22 4c69 6162 696c 6974 6965  nt1]["Liabilitie
-000052b0: 7322 5d2e 6170 7065 6e64 2873 6967 6e2b  s"].append(sign+
-000052c0: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
-000052d0: 7479 225d 2b22 5c6e 2229 0d0a 2020 2020  ty"]+"\n")..    
-000052e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000052f0: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
-00005300: 5b61 6765 6e74 315d 5b22 4173 7365 7473  [agent1]["Assets
-00005310: 225d 2e61 7070 656e 6428 2222 290d 0a0d  "].append("")...
-00005320: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005330: 2066 6f72 206a 2069 6e20 6c69 6162 7332   for j in liabs2
-00005340: 2e73 706c 6974 2822 5c6e 2229 3a0d 0a20  .split("\n"):.. 
-00005350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005360: 2020 2069 6620 6a2e 7374 7269 7028 292e     if j.strip().
-00005370: 7374 6172 7473 7769 7468 2822 2b22 293a  startswith("+"):
-00005380: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005390: 2020 2020 2020 2020 2020 6d79 5f69 7465            my_ite
-000053a0: 6d20 3d20 6a2e 7370 6c69 7428 222b 2229  m = j.split("+")
-000053b0: 5b31 5d20 2b20 7375 626a 6563 740d 0a20  [1] + subject.. 
-000053c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000053d0: 2020 2020 2020 2073 6967 6e20 3d20 222b         sign = "+
-000053e0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-000053f0: 2020 2020 2020 2020 2065 6c69 6620 6a2e           elif j.
-00005400: 7374 7269 7028 292e 7374 6172 7473 7769  strip().startswi
-00005410: 7468 2822 2d22 293a 0d0a 2020 2020 2020  th("-"):..      
-00005420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005430: 2020 6d79 5f69 7465 6d20 3d20 6a2e 7370    my_item = j.sp
-00005440: 6c69 7428 222d 2229 5b31 5d20 2b20 7375  lit("-")[1] + su
-00005450: 626a 6563 740d 0a20 2020 2020 2020 2020  bject..         
-00005460: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00005470: 6967 6e20 3d20 222d 220d 0a20 2020 2020  ign = "-"..     
-00005480: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00005490: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-000054a0: 2020 2020 2020 2020 2020 2020 2020 6272                br
-000054b0: 6561 6b0d 0a20 2020 2020 2020 2020 2020  eak..           
-000054c0: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
-000054d0: 645f 6261 6c61 6e63 655b 6167 656e 7432  d_balance[agent2
-000054e0: 5d5b 2249 7465 6d22 5d2e 6170 7065 6e64  ]["Item"].append
-000054f0: 286d 795f 6974 656d 290d 0a20 2020 2020  (my_item)..     
-00005500: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00005510: 6f6d 6269 6e65 645f 6261 6c61 6e63 655b  ombined_balance[
-00005520: 6167 656e 7432 5d5b 224c 6961 6269 6c69  agent2]["Liabili
-00005530: 7469 6573 225d 2e61 7070 656e 6428 7369  ties"].append(si
-00005540: 676e 2b66 696c 6564 6174 615b 2271 7561  gn+filedata["qua
-00005550: 6e74 6974 7922 5d2b 225c 6e22 290d 0a20  ntity"]+"\n").. 
-00005560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005570: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
-00005580: 6e63 655b 6167 656e 7432 5d5b 2241 7373  nce[agent2]["Ass
-00005590: 6574 7322 5d2e 6170 7065 6e64 2822 2229  ets"].append("")
-000055a0: 0d0a 0d0a 0d0a 0d0a 2020 2020 2020 2020  ........        
-000055b0: 2020 2020 7072 696e 7428 636f 6d62 696e      print(combin
-000055c0: 6564 5f62 616c 616e 6365 290d 0a0d 0a20  ed_balance).... 
-000055d0: 2020 2020 2020 2020 2020 2064 6673 203d             dfs =
-000055e0: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
-000055f0: 2066 6f72 206b 2c76 2069 6e20 636f 6d62   for k,v in comb
-00005600: 696e 6564 5f62 616c 616e 6365 2e69 7465  ined_balance.ite
-00005610: 6d73 2829 3a0d 0a20 2020 2020 2020 2020  ms():..         
-00005620: 2020 2020 2020 2064 7620 3d20 7064 2e44         dv = pd.D
-00005630: 6174 6146 7261 6d65 2876 290d 0a20 2020  ataFrame(v)..   
-00005640: 2020 2020 2020 2020 2020 2020 2064 7620               dv 
-00005650: 3d20 6476 2e72 656e 616d 6528 636f 6c75  = dv.rename(colu
-00005660: 6d6e 733d 7b22 4c69 6162 696c 6974 6965  mns={"Liabilitie
-00005670: 7322 3a22 4c69 6162 696c 6974 6965 7320  s":"Liabilities 
-00005680: 2825 7329 2225 6b2c 2022 4173 7365 7473  (%s)"%k, "Assets
-00005690: 223a 2022 4173 7365 7473 2028 2573 2922  ": "Assets (%s)"
-000056a0: 256b 7d29 0d0a 0d0a 2020 2020 2020 2020  %k})....        
-000056b0: 2020 2020 2020 2020 6966 206e 6f74 2064          if not d
-000056c0: 6574 6169 6c65 643a 0d0a 2020 2020 2020  etailed:..      
-000056d0: 2020 2020 2020 2020 2020 2020 2020 6167                ag
-000056e0: 6772 6567 6174 696f 6e5f 6675 6e63 7469  gregation_functi
-000056f0: 6f6e 7320 3d20 7b7d 0d0a 2020 2020 2020  ons = {}..      
-00005700: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00005710: 7220 636f 6c20 696e 2064 762e 636f 6c75  r col in dv.colu
-00005720: 6d6e 733a 0d0a 2020 2020 2020 2020 2020  mns:..          
-00005730: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00005740: 2063 6f6c 203d 3d20 2249 7465 6d22 3a0d   col == "Item":.
-00005750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005760: 2020 2020 2020 2020 2020 2020 2061 6767               agg
-00005770: 7265 6761 7469 6f6e 5f66 756e 6374 696f  regation_functio
-00005780: 6e73 5b63 6f6c 5d20 3d20 2266 6972 7374  ns[col] = "first
-00005790: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-000057a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000057b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000057c0: 2020 2020 2020 2020 2020 2020 2020 6167                ag
-000057d0: 6772 6567 6174 696f 6e5f 6675 6e63 7469  gregation_functi
-000057e0: 6f6e 735b 636f 6c5d 203d 2022 7375 6d22  ons[col] = "sum"
-000057f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005800: 2020 2020 2020 6476 203d 2064 762e 6772        dv = dv.gr
-00005810: 6f75 7062 7928 6476 5b27 4974 656d 275d  oupby(dv['Item']
-00005820: 292e 6167 6772 6567 6174 6528 6167 6772  ).aggregate(aggr
-00005830: 6567 6174 696f 6e5f 6675 6e63 7469 6f6e  egation_function
-00005840: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00005850: 2020 2020 2020 2020 6476 203d 2064 762e          dv = dv.
-00005860: 6472 6f70 2863 6f6c 756d 6e73 3d22 4974  drop(columns="It
-00005870: 656d 2229 0d0a 0d0a 2020 2020 2020 2020  em")....        
-00005880: 2020 2020 2020 2020 6466 732e 6170 7065          dfs.appe
-00005890: 6e64 2870 642e 4461 7461 4672 616d 6528  nd(pd.DataFrame(
-000058a0: 6476 2929 0d0a 0d0a 0d0a 2020 2020 2020  dv))......      
-000058b0: 2020 2020 2020 6466 203d 2070 642e 636f        df = pd.co
-000058c0: 6e63 6174 2864 6673 2c61 7869 733d 3129  ncat(dfs,axis=1)
-000058d0: 2023 2c6b 6579 7320 3d63 6f6d 6269 6e65   #,keys =combine
-000058e0: 645f 6261 6c61 6e63 652e 6b65 7973 2829  d_balance.keys()
-000058f0: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
-00005900: 7269 6e74 2864 662e 746f 5f73 7472 696e  rint(df.to_strin
-00005910: 6728 2929 0d0a 2020 2020 2020 2020 2020  g())..          
-00005920: 2020 6466 203d 2064 662e 7265 706c 6163    df = df.replac
-00005930: 6528 6e70 2e6e 616e 2c22 2229 0d0a 0d0a  e(np.nan,"")....
-00005940: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00005950: 6d6f 6465 6c20 3d20 5061 6e64 6173 4d6f  model = PandasMo
-00005960: 6465 6c28 6466 290d 0a20 2020 2020 2020  del(df)..       
-00005970: 2020 2020 206d 7669 6577 203d 204d 6174       mview = Mat
-00005980: 7269 7856 6965 7765 7228 6d6f 6465 6c2c  rixViewer(model,
-00005990: 7061 7265 6e74 3d73 656c 6629 0d0a 0d0a  parent=self)....
-000059a0: 2020 2020 2020 2020 2020 2020 2320 6d76              # mv
-000059b0: 6965 772e 7765 6256 6965 772e 7365 7448  iew.webView.setH
-000059c0: 746d 6c28 6466 5f68 746d 6c29 0d0a 2020  tml(df_html)..  
-000059d0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000059e0: 2073 656c 662e 7465 7374 5f6d 6f64 653a   self.test_mode:
-000059f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005a00: 2020 6d76 6965 772e 7368 6f77 2829 0d0a    mview.show()..
-00005a10: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00005a20: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-00005a30: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00005a40: 6c66 2e6e 6f74 6966 7928 7469 746c 653d  lf.notify(title=
-00005a50: 2245 7272 6f72 222c 6d65 7373 6167 653d  "Error",message=
-00005a60: 2245 7272 6f72 3a22 202b 2073 7472 2865  "Error:" + str(e
-00005a70: 2929 0d0a 0d0a 0d0a 2020 2020 6465 6620  ))......    def 
-00005a80: 6564 6974 5f6d 6169 6e6c 6f6f 7028 7365  edit_mainloop(se
-00005a90: 6c66 293a 0d0a 2020 2020 2020 2020 7472  lf):..        tr
-00005aa0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00005ab0: 7072 696e 7428 2273 656c 662e 6d61 696e  print("self.main
-00005ac0: 6c6f 6f70 5f73 7472 222c 7365 6c66 2e6d  loop_str",self.m
-00005ad0: 6169 6e6c 6f6f 705f 7374 7229 0d0a 2020  ainloop_str)..  
-00005ae0: 2020 2020 2020 2020 2020 6c69 6e65 7320            lines 
-00005af0: 3d20 7365 6c66 2e6d 6169 6e6c 6f6f 705f  = self.mainloop_
-00005b00: 7374 720d 0a0d 0a20 2020 2020 2020 2020  str....         
-00005b10: 2020 206d 795f 6564 6974 203d 2073 656c     my_edit = sel
-00005b20: 662e 6d61 696e 6c6f 6f70 5f65 6469 746f  f.mainloop_edito
-00005b30: 7220 2320 4d61 696e 4c6f 6f70 4564 6974  r # MainLoopEdit
-00005b40: 6f72 2870 6172 656e 743d 7365 6c66 2c20  or(parent=self, 
-00005b50: 7465 7874 3d6c 696e 6573 290d 0a20 2020  text=lines)..   
-00005b60: 2020 2020 2020 2020 206d 795f 6564 6974           my_edit
-00005b70: 2e73 6574 5f74 6578 7428 6c69 6e65 7329  .set_text(lines)
-00005b80: 0d0a 2020 2020 2020 2020 2020 2020 6d79  ..            my
-00005b90: 5f65 6469 742e 7365 7453 7479 6c65 5368  _edit.setStyleSh
-00005ba0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-00005bb0: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-00005bc0: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-00005bd0: 2020 2020 2020 2020 2020 2020 6d79 5f65              my_e
-00005be0: 6469 742e 7365 7453 7479 6c65 5368 6565  dit.setStyleShee
-00005bf0: 7428 7365 6c66 2e74 6865 6d65 5f6d 616e  t(self.theme_man
-00005c00: 6167 6572 2e67 6574 5f73 7479 6c65 7368  ager.get_stylesh
-00005c10: 6565 7428 226d 6169 6e22 2929 0d0a 2020  eet("main"))..  
-00005c20: 2020 2020 2020 2020 2020 6d79 5f65 6469            my_edi
-00005c30: 742e 7374 6172 745f 7761 7463 6864 6f67  t.start_watchdog
-00005c40: 2873 656c 662e 6375 7272 656e 745f 6669  (self.current_fi
-00005c50: 6c65 290d 0a20 2020 2020 2020 2020 2020  le)..           
-00005c60: 206d 795f 6564 6974 2e73 686f 7728 290d   my_edit.show().
-00005c70: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-00005c80: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00005c90: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00005ca0: 656c 662e 6e6f 7469 6679 2822 436f 756c  elf.notify("Coul
-00005cb0: 6420 6e6f 7420 6564 6974 206d 6169 6e6c  d not edit mainl
-00005cc0: 6f6f 7020 6669 6c65 2e20 4861 7665 2079  oop file. Have y
-00005cd0: 6f75 2073 6176 6564 2074 6865 2070 726f  ou saved the pro
-00005ce0: 6a65 6374 2079 6574 3f5c 6e22 2020 2b20  ject yet?\n"  + 
-00005cf0: 7374 7228 6529 2c20 7469 746c 653d 2245  str(e), title="E
-00005d00: 7272 6f72 2229 0d0a 0d0a 2020 2020 6465  rror")....    de
-00005d10: 6620 7265 7374 6f72 655f 6f72 6967 696e  f restore_origin
-00005d20: 616c 5f73 697a 6528 7365 6c66 293a 0d0a  al_size(self):..
-00005d30: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
-00005d40: 4669 7865 6453 697a 6528 3138 3231 2c31  FixedSize(1821,1
-00005d50: 3031 3029 0d0a 2020 2020 2020 2020 7365  010)..        se
-00005d60: 6c66 2e73 6574 4d61 7869 6d75 6d53 697a  lf.setMaximumSiz
-00005d70: 6528 3430 3030 302c 3430 3030 3029 0d0a  e(40000,40000)..
-00005d80: 0d0a 2020 2020 6465 6620 666c 6970 5f68  ..    def flip_h
-00005d90: 6569 6768 7428 7365 6c66 293a 0d0a 2020  eight(self):..  
-00005da0: 2020 2020 2020 6966 2073 656c 662e 666c        if self.fl
-00005db0: 6970 7065 643a 0d0a 2020 2020 2020 2020  ipped:..        
-00005dc0: 2020 2020 5720 3d20 7365 6c66 2e66 7261      W = self.fra
-00005dd0: 6d65 4765 6f6d 6574 7279 2829 2e77 6964  meGeometry().wid
-00005de0: 7468 2829 0d0a 2020 2020 2020 2020 2020  th()..          
-00005df0: 2020 4820 3d20 7365 6c66 2e66 7261 6d65    H = self.frame
-00005e00: 4765 6f6d 6574 7279 2829 2e68 6569 6768  Geometry().heigh
-00005e10: 7428 290d 0a0d 0a20 2020 2020 2020 2020  t()....         
-00005e20: 2020 2073 656c 662e 7365 744d 696e 696d     self.setMinim
-00005e30: 756d 5369 7a65 2873 656c 662e 6c61 7374  umSize(self.last
-00005e40: 5f77 6964 7468 2c73 656c 662e 6c61 7374  _width,self.last
-00005e50: 5f68 6569 6768 7429 0d0a 2020 2020 2020  _height)..      
-00005e60: 2020 2020 2020 2320 7365 6c66 2e73 6574        # self.set
-00005e70: 4d61 7869 6d75 6d53 697a 6528 7365 6c66  MaximumSize(self
-00005e80: 2e6c 6173 745f 7769 6474 682c 7365 6c66  .last_width,self
-00005e90: 2e6c 6173 745f 6865 6967 6874 290d 0a20  .last_height).. 
-00005ea0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005eb0: 7365 744d 6178 696d 756d 5369 7a65 2834  setMaximumSize(4
-00005ec0: 3030 3030 2c34 3030 3030 290d 0a20 2020  0000,40000)..   
-00005ed0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-00005ee0: 7365 744d 696e 696d 756d 5369 7a65 2834  setMinimumSize(4
-00005ef0: 3030 2c34 3030 290d 0a0d 0a20 2020 2020  00,400)....     
-00005f00: 2020 2020 2020 2023 2057 203d 2073 656c         # W = sel
-00005f10: 662e 6672 616d 6547 656f 6d65 7472 7928  f.frameGeometry(
-00005f20: 292e 7769 6474 6828 290d 0a20 2020 2020  ).width()..     
-00005f30: 2020 2020 2020 2023 2073 656c 662e 466c         # self.Fl
-00005f40: 6970 4865 6967 6874 4275 7474 6f6e 2e73  ipHeightButton.s
-00005f50: 6574 4765 6f6d 6574 7279 2869 6e74 2857  etGeometry(int(W
-00005f60: 292d 3831 2d32 352c 352c 3831 2c32 3129  )-81-25,5,81,21)
-00005f70: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00005f80: 7365 6c66 2e66 6c69 7070 6564 203d 2046  self.flipped = F
-00005f90: 616c 7365 0d0a 2020 2020 2020 2020 656c  alse..        el
-00005fa0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00005fb0: 2057 203d 2073 656c 662e 6672 616d 6547   W = self.frameG
-00005fc0: 656f 6d65 7472 7928 292e 7769 6474 6828  eometry().width(
-00005fd0: 290d 0a20 2020 2020 2020 2020 2020 2048  )..            H
-00005fe0: 203d 2073 656c 662e 6672 616d 6547 656f   = self.frameGeo
-00005ff0: 6d65 7472 7928 292e 6865 6967 6874 2829  metry().height()
-00006000: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00006010: 6c66 2e6c 6173 745f 7769 6474 6820 3d20  lf.last_width = 
-00006020: 570d 0a20 2020 2020 2020 2020 2020 2073  W..            s
-00006030: 656c 662e 6c61 7374 5f68 6569 6768 7420  elf.last_height 
-00006040: 3d20 480d 0a0d 0a20 2020 2020 2020 2020  = H....         
-00006050: 2020 2073 656c 662e 7365 7446 6978 6564     self.setFixed
-00006060: 5369 7a65 2838 3030 2c37 3029 0d0a 0d0a  Size(800,70)....
-00006070: 2020 2020 2020 2020 2020 2020 2357 203d              #W =
-00006080: 2073 656c 662e 6672 616d 6547 656f 6d65   self.frameGeome
-00006090: 7472 7928 292e 7769 6474 6828 290d 0a20  try().width().. 
-000060a0: 2020 2020 2020 2020 2020 2023 7365 6c66             #self
-000060b0: 2e46 6c69 7048 6569 6768 7442 7574 746f  .FlipHeightButto
-000060c0: 6e2e 7365 7447 656f 6d65 7472 7928 696e  n.setGeometry(in
-000060d0: 7428 5729 2d38 312d 3235 2c35 2c38 312c  t(W)-81-25,5,81,
-000060e0: 3231 290d 0a0d 0a20 2020 2020 2020 2020  21)....         
-000060f0: 2020 2073 656c 662e 666c 6970 7065 6420     self.flipped 
-00006100: 3d20 5472 7565 0d0a 0d0a 0d0a 2020 2020  = True......    
-00006110: 6465 6620 6368 616e 6765 5f61 6c65 7274  def change_alert
-00006120: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00006130: 2073 656c 662e 6d61 6465 5f63 6861 6e67   self.made_chang
-00006140: 6573 203d 2054 7275 650d 0a20 2020 2020  es = True..     
-00006150: 2020 2023 2073 656c 662e 7564 7061 7465     # self.udpate
-00006160: 4275 7474 6f6e 2e73 6574 5465 7874 2822  Button.setText("
-00006170: 5570 6461 7465 2056 616c 7565 7320 2a22  Update Values *"
-00006180: 290d 0a0d 0a20 2020 2064 6566 2073 686f  )....    def sho
-00006190: 775f 6f75 7470 7574 5f64 6973 706c 6179  w_output_display
-000061a0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-000061b0: 2023 2073 686f 7773 2074 6865 206c 6f67   # shows the log
-000061c0: 6765 7220 6469 7370 6c61 7920 666f 7220  ger display for 
-000061d0: 6f75 7470 7574 2071 7561 6e74 6974 6965  output quantitie
-000061e0: 730d 0a0d 0a20 2020 2020 2020 2074 7279  s....        try
-000061f0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-00006200: 2070 6174 6820 3d20 6f73 2e70 6174 682e   path = os.path.
-00006210: 6469 726e 616d 6528 7365 6c66 2e63 7572  dirname(self.cur
-00006220: 7265 6e74 5f66 696c 6529 2b22 2f6f 7574  rent_file)+"/out
-00006230: 7075 742f 220d 0a20 2020 2020 2020 2020  put/"..         
-00006240: 2020 2070 7269 6e74 2822 5b44 4542 5547     print("[DEBUG
-00006250: 204d 4553 5341 4745 5d20 6f70 656e 206f   MESSAGE] open o
-00006260: 7574 7075 7420 6469 7370 6c61 7920 696e  utput display in
-00006270: 2070 6174 6822 2c20 7061 7468 290d 0a0d   path", path)...
-00006280: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
-00006290: 7075 745f 6469 7370 6c61 7920 3d20 4f75  put_display = Ou
-000062a0: 7470 7574 4469 7370 6c61 7928 7365 6c66  tputDisplay(self
-000062b0: 2c70 6174 6820 3d20 7061 7468 290d 0a20  ,path = path).. 
-000062c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-000062d0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-000062e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000062f0: 6e6f 7469 6679 2873 7472 2865 292c 7469  notify(str(e),ti
-00006300: 746c 653d 2245 7272 6f72 2229 0d0a 0d0a  tle="Error")....
-00006310: 0d0a 0d0a 2020 2020 6465 6620 7361 7665  ....    def save
-00006320: 5f61 6e64 5f62 7569 6c64 2873 656c 6629  _and_build(self)
-00006330: 3a0d 0a0d 0a20 2020 2020 2020 2023 202d  :....        # -
-00006340: 2d20 6372 6561 7465 206e 6577 2073 7461  - create new sta
-00006350: 7475 7320 7369 676e 616c 0d0a 0d0a 2020  tus signal....  
-00006360: 2020 2020 2020 7365 6c66 2e77 6f72 6b65        self.worke
-00006370: 722e 7377 6974 6368 5f73 7461 7465 2829  r.switch_state()
-00006380: 0d0a 2020 2020 2020 2020 2320 2d2d 2d0d  ..        # ---.
-00006390: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-000063a0: 7361 7665 2829 0d0a 0d0a 2020 2020 2020  save()....      
-000063b0: 2020 6120 3d20 5b5d 0d0a 2020 2020 2020    a = []..      
-000063c0: 2020 666f 7220 6365 2069 6e20 436f 6465    for ce in Code
-000063d0: 4564 6974 6f72 2e69 6e73 7461 6e63 6573  Editor.instances
-000063e0: 2e76 616c 7565 7328 293a 0d0a 2020 2020  .values():..    
-000063f0: 2020 2020 2020 2020 6e61 6d65 7320 3d20          names = 
-00006400: 6365 2e73 6176 655f 616e 645f 6275 696c  ce.save_and_buil
-00006410: 6428 290d 0a20 2020 2020 2020 2020 2020  d()..           
-00006420: 2069 6620 6e61 6d65 7320 6973 206e 6f74   if names is not
-00006430: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00006440: 2020 2020 2020 2020 612e 6170 7065 6e64          a.append
-00006450: 286e 616d 6573 290d 0a0d 0a20 2020 2020  (names)....     
-00006460: 2020 2066 6f72 2061 6920 696e 2061 3a0d     for ai in a:.
-00006470: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00006480: 6169 5b30 5d20 696e 2043 6f64 6545 6469  ai[0] in CodeEdi
-00006490: 746f 722e 696e 7374 616e 6365 733a 0d0a  tor.instances:..
-000064a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000064b0: 436f 6465 4564 6974 6f72 2e69 6e73 7461  CodeEditor.insta
-000064c0: 6e63 6573 5b61 695b 305d 5d20 3d20 4e6f  nces[ai[0]] = No
-000064d0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-000064e0: 2020 2020 6465 6c20 436f 6465 4564 6974      del CodeEdit
-000064f0: 6f72 2e69 6e73 7461 6e63 6573 5b61 695b  or.instances[ai[
-00006500: 305d 5d0d 0a20 2020 2020 2020 2020 2020  0]]..           
-00006510: 2043 6f64 6545 6469 746f 722e 696e 7374   CodeEditor.inst
-00006520: 616e 6365 735b 6169 5b31 5d5d 203d 2061  ances[ai[1]] = a
-00006530: 695b 325d 0d0a 0d0a 2020 2020 2020 2020  i[2]....        
-00006540: 7072 696e 7428 225c 6e4e 4557 2049 4e53  print("\nNEW INS
-00006550: 5441 4e43 4553 5c6e 222c 2043 6f64 6545  TANCES\n", CodeE
-00006560: 6469 746f 722e 696e 7374 616e 6365 7329  ditor.instances)
-00006570: 0d0a 0d0a 0d0a 2020 2020 2020 2020 7472  ......        tr
-00006580: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00006590: 7365 6c66 2e62 7569 6c64 5f70 726f 6a65  self.build_proje
-000065a0: 6374 2873 696c 656e 743d 5472 7565 290d  ct(silent=True).
-000065b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000065c0: 662e 7374 6174 7573 4261 7228 292e 7368  f.statusBar().sh
-000065d0: 6f77 4d65 7373 6167 6528 2253 6176 6564  owMessage("Saved
-000065e0: 2022 202b 2073 656c 662e 6375 7272 656e   " + self.curren
-000065f0: 745f 6669 6c65 290d 0a0d 0a20 2020 2020  t_file)....     
-00006600: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00006610: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-00006620: 2020 2020 2020 2023 2073 656c 662e 6e6f         # self.no
-00006630: 7469 6679 2873 7472 2865 292c 7469 746c  tify(str(e),titl
-00006640: 653d 2245 7863 6570 7469 6f6e 2229 0d0a  e="Exception")..
-00006650: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00006660: 7428 7374 7228 6529 290d 0a0d 0a0d 0a0d  t(str(e)).......
-00006670: 0a20 2020 2064 6566 2072 756e 5f70 726f  .    def run_pro
-00006680: 6a65 6374 2873 656c 6629 3a0d 0a0d 0a20  ject(self):.... 
-00006690: 2020 2020 2020 2073 656c 662e 7361 7665         self.save
-000066a0: 5f61 6e64 5f62 7569 6c64 2829 0d0a 0d0a  _and_build()....
-000066b0: 2020 2020 2020 2020 2320 7365 6c66 2e73          # self.s
-000066c0: 686f 775f 6f75 7470 7574 5f64 6973 706c  how_output_displ
-000066d0: 6179 2829 0d0a 0d0a 2020 2020 2020 2020  ay()....        
-000066e0: 7365 6c66 2e73 6574 4375 7273 6f72 2851  self.setCursor(Q
-000066f0: 742e 5761 6974 4375 7273 6f72 290d 0a0d  t.WaitCursor)...
-00006700: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-00006710: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
-00006720: 662e 7461 6257 6964 6765 742e 7365 7443  f.tabWidget.setC
-00006730: 7572 7265 6e74 496e 6465 7828 3129 0d0a  urrentIndex(1)..
-00006740: 0d0a 2020 2020 2020 2020 2020 2020 2366  ..            #f
-00006750: 696c 656e 616d 6520 3d20 6f73 2e70 6174  ilename = os.pat
-00006760: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
-00006770: 7572 7265 6e74 5f66 696c 6529 202b 2022  urrent_file) + "
-00006780: 2f70 7974 686f 6e5f 636f 6465 2f6d 6169  /python_code/mai
-00006790: 6e6c 6f6f 702e 7079 220d 0a20 2020 2020  nloop.py"..     
-000067a0: 2020 2020 2020 2066 696c 656e 616d 6520         filename 
-000067b0: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-000067c0: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-000067d0: 696c 6529 202b 2022 2f72 756e 6e65 722e  ile) + "/runner.
-000067e0: 7079 220d 0a20 2020 2020 2020 2020 2020  py"..           
-000067f0: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
-00006800: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
-00006810: 7572 7265 6e74 5f66 696c 6529 202b 2022  urrent_file) + "
-00006820: 2f22 0d0a 0d0a 2020 2020 2020 2020 2020  /"....          
-00006830: 2020 6966 2022 2022 2069 6e20 6669 6c65    if " " in file
-00006840: 6e61 6d65 206f 7220 2220 2220 696e 2066  name or " " in f
-00006850: 6f6c 6465 723a 0d0a 2020 2020 2020 2020  older:..        
-00006860: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00006870: 6966 7928 7469 746c 653d 2249 6e76 616c  ify(title="Inval
-00006880: 6964 2066 696c 6520 6e61 6d65 222c 206d  id file name", m
-00006890: 6573 7361 6765 3d22 5468 6572 6520 6172  essage="There ar
-000068a0: 6520 7370 6163 6573 2069 6e20 796f 7572  e spaces in your
-000068b0: 2066 6f6c 6465 7220 6f72 2066 696c 6520   folder or file 
-000068c0: 6e61 6d65 2e20 5468 6973 206d 6967 6874  name. This might
-000068d0: 2063 6175 7365 2070 726f 626c 656d 732e   cause problems.
-000068e0: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-000068f0: 2020 7072 696e 7428 226c 6f6f 6b75 7022    print("lookup"
-00006900: 2c20 6669 6c65 6e61 6d65 2c20 2269 6e22  , filename, "in"
-00006910: 2c20 666f 6c64 6572 290d 0a0d 0a20 2020  , folder)....   
-00006920: 2020 2020 2020 2020 206f 6c64 5f64 6972           old_dir
-00006930: 203d 206f 732e 6765 7463 7764 2829 0d0a   = os.getcwd()..
-00006940: 2020 2020 2020 2020 2020 2020 2320 7072              # pr
-00006950: 696e 7428 226f 6c64 5f64 6972 222c 6f6c  int("old_dir",ol
-00006960: 645f 6469 7229 0d0a 0d0a 2020 2020 2020  d_dir)....      
-00006970: 2020 2020 2020 6f73 2e63 6864 6972 2866        os.chdir(f
-00006980: 6f6c 6465 7229 0d0a 2020 2020 2020 2020  older)..        
-00006990: 2020 2020 636d 6420 3d20 2263 6f6e 6461      cmd = "conda
-000069a0: 2061 6374 6976 6174 6520 6174 7475 6e65   activate attune
-000069b0: 202f 6b20 7079 7468 6f6e 2025 7322 2025   /k python %s" %
-000069c0: 2066 696c 656e 616d 650d 0a20 2020 2020   filename..     
-000069d0: 2020 2020 2020 2070 7269 6e74 2822 434f         print("CO
-000069e0: 4d4d 414e 4422 2c20 636d 6429 0d0a 2020  MMAND", cmd)..  
-000069f0: 2020 2020 2020 2020 2020 6f73 2e73 7973            os.sys
-00006a00: 7465 6d28 2273 7461 7274 2063 6d64 2020  tem("start cmd  
-00006a10: 2020 2025 7322 2025 2063 6d64 290d 0a0d     %s" % cmd)...
-00006a20: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
-00006a30: 6368 6469 7228 6f6c 645f 6469 7229 0d0a  chdir(old_dir)..
-00006a40: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00006a50: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-00006a60: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00006a70: 7365 6c66 2e6e 6f74 6966 7928 7374 7228  self.notify(str(
-00006a80: 6529 2c74 6974 6c65 3d22 2229 0d0a 2020  e),title="")..  
-00006a90: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00006aa0: 6574 4375 7273 6f72 2851 742e 4172 726f  etCursor(Qt.Arro
-00006ab0: 7743 7572 736f 7229 0d0a 0d0a 2020 2020  wCursor)....    
-00006ac0: 2020 2020 7365 6c66 2e73 6574 4375 7273      self.setCurs
-00006ad0: 6f72 2851 742e 4172 726f 7743 7572 736f  or(Qt.ArrowCurso
-00006ae0: 7229 0d0a 0d0a 2020 2020 6465 6620 6275  r)....    def bu
-00006af0: 696c 645f 7072 6f6a 6563 7428 7365 6c66  ild_project(self
-00006b00: 2c73 696c 656e 743d 4661 6c73 652c 6f76  ,silent=False,ov
-00006b10: 6572 7772 6974 653d 4661 6c73 6529 3a0d  erwrite=False):.
-00006b20: 0a0d 0a20 2020 2020 2020 2023 666f 6c64  ...        #fold
-00006b30: 6572 203d 2051 4669 6c65 4469 616c 6f67  er = QFileDialog
-00006b40: 2e67 6574 4578 6973 7469 6e67 4469 7265  .getExistingDire
-00006b50: 6374 6f72 7920 2873 656c 662c 2027 4275  ctory (self, 'Bu
-00006b60: 696c 6420 5072 6f6a 6563 742e 2e2e 272c  ild Project...',
-00006b70: 206f 732e 6765 7463 7764 2829 290d 0a0d   os.getcwd())...
-00006b80: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00006b90: 2e63 7572 7265 6e74 5f66 696c 6520 6973  .current_file is
-00006ba0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00006bb0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-00006bc0: 6d65 7373 6167 653d 2243 616e 6e6f 7420  message="Cannot 
-00006bd0: 6275 696c 6420 7072 6f6a 6563 742e 2050  build project. P
-00006be0: 6c65 6173 6520 7361 7665 2074 6f20 6669  lease save to fi
-00006bf0: 6c65 2066 6972 7374 2e22 2c74 6974 6c65  le first.",title
-00006c00: 3d22 4572 726f 7222 290d 0a20 2020 2020  ="Error")..     
-00006c10: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
-00006c20: 0a20 2020 2020 2020 2066 6f6c 6465 7220  .        folder 
-00006c30: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00006c40: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-00006c50: 696c 6529 0d0a 2020 2020 2020 2020 7072  ile)..        pr
-00006c60: 696e 7428 2262 7569 6c64 2070 726f 6a65  int("build proje
-00006c70: 6374 2069 6e20 222c 2066 6f6c 6465 7229  ct in ", folder)
-00006c80: 0d0a 0d0a 2020 2020 2020 2020 7472 793a  ....        try:
-00006c90: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-00006ca0: 2e6d 6b64 6972 2866 6f6c 6465 7220 2b20  .mkdir(folder + 
-00006cb0: 222f 6d61 6d62 615f 636f 6465 2f22 290d  "/mamba_code/").
-00006cc0: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-00006cd0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
-00006ce0: 7373 0d0a 0d0a 2020 2020 2020 2020 7472  ss....        tr
-00006cf0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00006d00: 6f73 2e6d 6b64 6972 2866 6f6c 6465 7220  os.mkdir(folder 
-00006d10: 2b20 222f 7079 7468 6f6e 5f63 6f64 652f  + "/python_code/
-00006d20: 2229 0d0a 2020 2020 2020 2020 6578 6365  ")..        exce
-00006d30: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
-00006d40: 2070 6173 730d 0a0d 0a20 2020 2020 2020   pass....       
-00006d50: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00006d60: 2020 206f 732e 6d6b 6469 7228 666f 6c64     os.mkdir(fold
-00006d70: 6572 202b 2022 2f6f 7574 7075 742f 2229  er + "/output/")
-00006d80: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00006d90: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00006da0: 6173 730d 0a0d 0a20 2020 2020 2020 2074  ass....        t
-00006db0: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
-00006dc0: 2020 2066 6f72 2061 6765 6e74 2c20 636f     for agent, co
-00006dd0: 6465 2069 6e20 7365 6c66 2e64 7261 7763  de in self.drawc
-00006de0: 616e 7661 732e 636f 6465 5f64 6174 612e  anvas.code_data.
-00006df0: 6974 656d 7328 293a 0d0a 2020 2020 2020  items():..      
-00006e00: 2020 2020 2020 2020 2020 6966 2061 6765            if age
-00006e10: 6e74 2069 6e20 436f 6465 4564 6974 6f72  nt in CodeEditor
-00006e20: 2e69 6e73 7461 6e63 6573 3a20 2320 6f6e  .instances: # on
-00006e30: 6c79 2063 6f6e 7665 7274 2065 6469 7465  ly convert edite
-00006e40: 6420 636f 6465 0d0a 0d0a 2020 2020 2020  d code....      
-00006e50: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00006e60: 7772 6974 6520 6d61 6d62 6120 636f 6465  write mamba code
-00006e70: 2066 6f72 2063 6f6d 706c 6574 656e 6573   for completenes
-00006e80: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-00006e90: 2020 2020 2020 2070 6174 6820 3d20 666f         path = fo
-00006ea0: 6c64 6572 202b 2022 2f6d 616d 6261 5f63  lder + "/mamba_c
-00006eb0: 6f64 652f 2573 2e70 7922 2025 2061 6765  ode/%s.py" % age
-00006ec0: 6e74 2023 2066 6f72 6d65 7220 2e74 7874  nt # former .txt
-00006ed0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00006ee0: 2020 2020 2020 2020 7072 696e 7428 2270          print("p
-00006ef0: 6174 6822 2c70 6174 6829 0d0a 0d0a 2020  ath",path)....  
-00006f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f10: 2020 7769 7468 206f 7065 6e28 7061 7468    with open(path
-00006f20: 2c20 2277 2229 2061 7320 6669 6c65 3a0d  , "w") as file:.
-00006f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006f40: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
-00006f50: 6974 6528 636f 6465 290d 0a0d 0a20 2020  ite(code)....   
-00006f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f70: 2023 2077 7269 7465 2070 7974 686f 6e20   # write python 
-00006f80: 636f 6465 0d0a 2020 2020 2020 2020 2020  code..          
-00006f90: 2020 2020 2020 2020 2020 7061 7468 203d            path =
-00006fa0: 2066 6f6c 6465 7220 2b20 222f 7079 7468   folder + "/pyth
-00006fb0: 6f6e 5f63 6f64 652f 2573 2e70 7922 2025  on_code/%s.py" %
-00006fc0: 2061 6765 6e74 2e6c 6f77 6572 2829 0d0a   agent.lower()..
-00006fd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006fe0: 2020 2020 2020 7072 696e 7428 2270 6174        print("pat
-00006ff0: 6822 2c70 6174 6829 0d0a 0d0a 2020 2020  h",path)....    
-00007000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007010: 7769 7468 206f 7065 6e28 7061 7468 2c20  with open(path, 
-00007020: 2277 2229 2061 7320 6669 6c65 3a0d 0a20  "w") as file:.. 
-00007030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007040: 2020 2020 2020 206e 6577 5f63 6f64 6520         new_code 
-00007050: 3d20 636f 6e76 6572 745f 636f 6465 2863  = convert_code(c
-00007060: 6f64 652e 7370 6c69 7428 225c 6e22 2929  ode.split("\n"))
-00007070: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
-00007080: 2020 2020 2020 2020 2020 2020 206e 6577               new
-00007090: 5f63 6f64 6520 3d20 6e65 775f 636f 6465  _code = new_code
-000070a0: 2e65 6e63 6f64 6528 2275 7466 2d38 2229  .encode("utf-8")
-000070b0: 2e64 6563 6f64 6528 2763 7031 3235 3227  .decode('cp1252'
-000070c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000070d0: 2020 2020 2020 2020 2020 2066 696c 652e             file.
-000070e0: 7772 6974 6528 6e65 775f 636f 6465 2920  write(new_code) 
-000070f0: 2320 636f 6e76 6572 7420 7573 696e 6720  # convert using 
-00007100: 7468 6520 6d61 6d62 6120 696e 7465 7270  the mamba interp
-00007110: 7265 7465 720d 0a0d 0a20 2020 2020 2020  reter....       
-00007120: 2020 2020 2023 2077 7269 7465 2073 6574       # write set
-00007130: 7469 6e67 7320 6669 6c65 0d0a 2020 2020  tings file..    
-00007140: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00007150: 6e28 666f 6c64 6572 202b 2022 2f73 6574  n(folder + "/set
-00007160: 7469 6e67 732e 796d 6c22 2c22 7722 2920  tings.yml","w") 
-00007170: 6173 2066 696c 653a 0d0a 2020 2020 2020  as file:..      
-00007180: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
-00007190: 7269 7465 2873 656c 662e 7365 7474 696e  rite(self.settin
-000071a0: 6773 5f73 7472 290d 0a0d 0a20 2020 2020  gs_str)....     
-000071b0: 2020 2020 2020 2023 2077 7269 7465 2074         # write t
-000071c0: 6865 2072 756e 6e65 7220 6669 6c65 0d0a  he runner file..
-000071d0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-000071e0: 656c 662e 6d61 696e 6c6f 6f70 5f73 7472  elf.mainloop_str
-000071f0: 203d 3d20 2222 206f 7220 6f76 6572 7772   == "" or overwr
-00007200: 6974 653a 0d0a 2020 2020 2020 2020 2020  ite:..          
-00007210: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00007220: 666f 6c64 6572 2b22 2f72 756e 6e65 722e  folder+"/runner.
-00007230: 7079 222c 2277 2229 2061 7320 6669 6c65  py","w") as file
-00007240: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007250: 2020 2020 2020 2066 696c 652e 7772 6974         file.writ
-00007260: 6528 2266 726f 6d20 7079 7468 6f6e 5f63  e("from python_c
-00007270: 6f64 652e 6d61 696e 6c6f 6f70 2069 6d70  ode.mainloop imp
-00007280: 6f72 7420 7275 6e5c 6e5c 6e72 756e 2829  ort run\n\nrun()
-00007290: 5c6e 2229 0d0a 0d0a 2020 2020 2020 2020  \n")....        
-000072a0: 2020 2020 2320 7772 6974 6520 6d61 696e      # write main
-000072b0: 2073 696d 756c 6174 696f 6e20 6669 6c65   simulation file
-000072c0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-000072d0: 7468 206f 7065 6e28 666f 6c64 6572 202b  th open(folder +
-000072e0: 2022 2f70 7974 686f 6e5f 636f 6465 2f6d   "/python_code/m
-000072f0: 6169 6e6c 6f6f 702e 7079 222c 2277 2229  ainloop.py","w")
-00007300: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
-00007310: 2020 2020 2020 2023 7769 7468 206f 7065         #with ope
-00007320: 6e28 666f 6c64 6572 202b 2022 2e2f 6d61  n(folder + "./ma
+00005150: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
+00005160: 6a2e 7370 6c69 7428 222b 2229 5b31 5d20  j.split("+")[1] 
+00005170: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
+00005180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005190: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
+000051a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000051b0: 2020 2020 2065 6c69 6620 6a2e 7374 7269       elif j.stri
+000051c0: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
+000051d0: 2d22 293a 0d0a 2020 2020 2020 2020 2020  -"):..          
+000051e0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+000051f0: 5f69 7465 6d20 3d20 6a2e 7370 6c69 7428  _item = j.split(
+00005200: 222d 2229 5b31 5d20 2b20 7375 626a 6563  "-")[1] + subjec
+00005210: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00005220: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
+00005230: 3d20 222d 220d 0a20 2020 2020 2020 2020  = "-"..         
+00005240: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00005250: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005260: 2020 2020 2020 2020 2020 6272 6561 6b0d            break.
+00005270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005280: 2020 2020 2063 6f6d 6269 6e65 645f 6261       combined_ba
+00005290: 6c61 6e63 655b 6167 656e 7431 5d5b 2249  lance[agent1]["I
+000052a0: 7465 6d22 5d2e 6170 7065 6e64 286d 795f  tem"].append(my_
+000052b0: 6974 656d 290d 0a20 2020 2020 2020 2020  item)..         
+000052c0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+000052d0: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
+000052e0: 7431 5d5b 224c 6961 6269 6c69 7469 6573  t1]["Liabilities
+000052f0: 225d 2e61 7070 656e 6428 7369 676e 2b66  "].append(sign+f
+00005300: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
+00005310: 7922 5d2b 225c 6e22 290d 0a20 2020 2020  y"]+"\n")..     
+00005320: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00005330: 6f6d 6269 6e65 645f 6261 6c61 6e63 655b  ombined_balance[
+00005340: 6167 656e 7431 5d5b 2241 7373 6574 7322  agent1]["Assets"
+00005350: 5d2e 6170 7065 6e64 2822 2229 0d0a 0d0a  ].append("")....
+00005360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005370: 666f 7220 6a20 696e 206c 6961 6273 322e  for j in liabs2.
+00005380: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
+00005390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000053a0: 2020 6966 206a 2e73 7472 6970 2829 2e73    if j.strip().s
+000053b0: 7461 7274 7377 6974 6828 222b 2229 3a0d  tartswith("+"):.
+000053c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000053d0: 2020 2020 2020 2020 206d 795f 6974 656d           my_item
+000053e0: 203d 206a 2e73 706c 6974 2822 2b22 295b   = j.split("+")[
+000053f0: 315d 202b 2073 7562 6a65 6374 0d0a 2020  1] + subject..  
+00005400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005410: 2020 2020 2020 7369 676e 203d 2022 2b22        sign = "+"
+00005420: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00005430: 2020 2020 2020 2020 656c 6966 206a 2e73          elif j.s
+00005440: 7472 6970 2829 2e73 7461 7274 7377 6974  trip().startswit
+00005450: 6828 222d 2229 3a0d 0a20 2020 2020 2020  h("-"):..       
+00005460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005470: 206d 795f 6974 656d 203d 206a 2e73 706c   my_item = j.spl
+00005480: 6974 2822 2d22 295b 315d 202b 2073 7562  it("-")[1] + sub
+00005490: 6a65 6374 0d0a 2020 2020 2020 2020 2020  ject..          
+000054a0: 2020 2020 2020 2020 2020 2020 2020 7369                si
+000054b0: 676e 203d 2022 2d22 0d0a 2020 2020 2020  gn = "-"..      
+000054c0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000054d0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000054e0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+000054f0: 616b 0d0a 2020 2020 2020 2020 2020 2020  ak..            
+00005500: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00005510: 5f62 616c 616e 6365 5b61 6765 6e74 325d  _balance[agent2]
+00005520: 5b22 4974 656d 225d 2e61 7070 656e 6428  ["Item"].append(
+00005530: 6d79 5f69 7465 6d29 0d0a 2020 2020 2020  my_item)..      
+00005540: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00005550: 6d62 696e 6564 5f62 616c 616e 6365 5b61  mbined_balance[a
+00005560: 6765 6e74 325d 5b22 4c69 6162 696c 6974  gent2]["Liabilit
+00005570: 6965 7322 5d2e 6170 7065 6e64 2873 6967  ies"].append(sig
+00005580: 6e2b 6669 6c65 6461 7461 5b22 7175 616e  n+filedata["quan
+00005590: 7469 7479 225d 2b22 5c6e 2229 0d0a 2020  tity"]+"\n")..  
+000055a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000055b0: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
+000055c0: 6365 5b61 6765 6e74 325d 5b22 4173 7365  ce[agent2]["Asse
+000055d0: 7473 225d 2e61 7070 656e 6428 2222 290d  ts"].append("").
+000055e0: 0a0d 0a0d 0a0d 0a20 2020 2020 2020 2020  .......         
+000055f0: 2020 2070 7269 6e74 2863 6f6d 6269 6e65     print(combine
+00005600: 645f 6261 6c61 6e63 6529 0d0a 0d0a 2020  d_balance)....  
+00005610: 2020 2020 2020 2020 2020 6466 7320 3d20            dfs = 
+00005620: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
+00005630: 666f 7220 6b2c 7620 696e 2063 6f6d 6269  for k,v in combi
+00005640: 6e65 645f 6261 6c61 6e63 652e 6974 656d  ned_balance.item
+00005650: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+00005660: 2020 2020 2020 6476 203d 2070 642e 4461        dv = pd.Da
+00005670: 7461 4672 616d 6528 7629 0d0a 2020 2020  taFrame(v)..    
+00005680: 2020 2020 2020 2020 2020 2020 6476 203d              dv =
+00005690: 2064 762e 7265 6e61 6d65 2863 6f6c 756d   dv.rename(colum
+000056a0: 6e73 3d7b 224c 6961 6269 6c69 7469 6573  ns={"Liabilities
+000056b0: 223a 224c 6961 6269 6c69 7469 6573 2028  ":"Liabilities (
+000056c0: 2573 2922 256b 2c20 2241 7373 6574 7322  %s)"%k, "Assets"
+000056d0: 3a20 2241 7373 6574 7320 2825 7329 2225  : "Assets (%s)"%
+000056e0: 6b7d 290d 0a0d 0a20 2020 2020 2020 2020  k})....         
+000056f0: 2020 2020 2020 2069 6620 6e6f 7420 6465         if not de
+00005700: 7461 696c 6564 3a0d 0a20 2020 2020 2020  tailed:..       
+00005710: 2020 2020 2020 2020 2020 2020 2061 6767               agg
+00005720: 7265 6761 7469 6f6e 5f66 756e 6374 696f  regation_functio
+00005730: 6e73 203d 207b 7d0d 0a20 2020 2020 2020  ns = {}..       
+00005740: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00005750: 2063 6f6c 2069 6e20 6476 2e63 6f6c 756d   col in dv.colum
+00005760: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
+00005770: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00005780: 636f 6c20 3d3d 2022 4974 656d 223a 0d0a  col == "Item":..
+00005790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057a0: 2020 2020 2020 2020 2020 2020 6167 6772              aggr
+000057b0: 6567 6174 696f 6e5f 6675 6e63 7469 6f6e  egation_function
+000057c0: 735b 636f 6c5d 203d 2022 6669 7273 7422  s[col] = "first"
+000057d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000057e0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+000057f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005800: 2020 2020 2020 2020 2020 2020 2061 6767               agg
+00005810: 7265 6761 7469 6f6e 5f66 756e 6374 696f  regation_functio
+00005820: 6e73 5b63 6f6c 5d20 3d20 2273 756d 220d  ns[col] = "sum".
+00005830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005840: 2020 2020 2064 7620 3d20 6476 2e67 726f       dv = dv.gro
+00005850: 7570 6279 2864 765b 2749 7465 6d27 5d29  upby(dv['Item'])
+00005860: 2e61 6767 7265 6761 7465 2861 6767 7265  .aggregate(aggre
+00005870: 6761 7469 6f6e 5f66 756e 6374 696f 6e73  gation_functions
+00005880: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00005890: 2020 2020 2020 2064 7620 3d20 6476 2e64         dv = dv.d
+000058a0: 726f 7028 636f 6c75 6d6e 733d 2249 7465  rop(columns="Ite
+000058b0: 6d22 290d 0a0d 0a20 2020 2020 2020 2020  m")....         
+000058c0: 2020 2020 2020 2064 6673 2e61 7070 656e         dfs.appen
+000058d0: 6428 7064 2e44 6174 6146 7261 6d65 2864  d(pd.DataFrame(d
+000058e0: 7629 290d 0a0d 0a0d 0a20 2020 2020 2020  v))......       
+000058f0: 2020 2020 2064 6620 3d20 7064 2e63 6f6e       df = pd.con
+00005900: 6361 7428 6466 732c 6178 6973 3d31 2920  cat(dfs,axis=1) 
+00005910: 232c 6b65 7973 203d 636f 6d62 696e 6564  #,keys =combined
+00005920: 5f62 616c 616e 6365 2e6b 6579 7328 2929  _balance.keys())
+00005930: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00005940: 696e 7428 6466 2e74 6f5f 7374 7269 6e67  int(df.to_string
+00005950: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+00005960: 2064 6620 3d20 6466 2e72 6570 6c61 6365   df = df.replace
+00005970: 286e 702e 6e61 6e2c 2222 290d 0a0d 0a0d  (np.nan,"").....
+00005980: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+00005990: 6f64 656c 203d 2050 616e 6461 734d 6f64  odel = PandasMod
+000059a0: 656c 2864 6629 0d0a 2020 2020 2020 2020  el(df)..        
+000059b0: 2020 2020 6d76 6965 7720 3d20 4d61 7472      mview = Matr
+000059c0: 6978 5669 6577 6572 286d 6f64 656c 2c70  ixViewer(model,p
+000059d0: 6172 656e 743d 7365 6c66 290d 0a0d 0a20  arent=self).... 
+000059e0: 2020 2020 2020 2020 2020 2023 206d 7669             # mvi
+000059f0: 6577 2e77 6562 5669 6577 2e73 6574 4874  ew.webView.setHt
+00005a00: 6d6c 2864 665f 6874 6d6c 290d 0a20 2020  ml(df_html)..   
+00005a10: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00005a20: 7365 6c66 2e74 6573 745f 6d6f 6465 3a0d  self.test_mode:.
+00005a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005a40: 206d 7669 6577 2e73 686f 7728 290d 0a0d   mview.show()...
+00005a50: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00005a60: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00005a70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00005a80: 662e 6e6f 7469 6679 2874 6974 6c65 3d22  f.notify(title="
+00005a90: 4572 726f 7222 2c6d 6573 7361 6765 3d22  Error",message="
+00005aa0: 4572 726f 723a 2220 2b20 7374 7228 6529  Error:" + str(e)
+00005ab0: 290d 0a0d 0a0d 0a20 2020 2064 6566 2065  )......    def e
+00005ac0: 6469 745f 6d61 696e 6c6f 6f70 2873 656c  dit_mainloop(sel
+00005ad0: 6629 3a0d 0a20 2020 2020 2020 2074 7279  f):..        try
+00005ae0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00005af0: 7269 6e74 2822 7365 6c66 2e6d 6169 6e6c  rint("self.mainl
+00005b00: 6f6f 705f 7374 7222 2c73 656c 662e 6d61  oop_str",self.ma
+00005b10: 696e 6c6f 6f70 5f73 7472 290d 0a20 2020  inloop_str)..   
+00005b20: 2020 2020 2020 2020 206c 696e 6573 203d           lines =
+00005b30: 2073 656c 662e 6d61 696e 6c6f 6f70 5f73   self.mainloop_s
+00005b40: 7472 0d0a 0d0a 2020 2020 2020 2020 2020  tr....          
+00005b50: 2020 6d79 5f65 6469 7420 3d20 7365 6c66    my_edit = self
+00005b60: 2e6d 6169 6e6c 6f6f 705f 6564 6974 6f72  .mainloop_editor
+00005b70: 2023 204d 6169 6e4c 6f6f 7045 6469 746f   # MainLoopEdito
+00005b80: 7228 7061 7265 6e74 3d73 656c 662c 2074  r(parent=self, t
+00005b90: 6578 743d 6c69 6e65 7329 0d0a 2020 2020  ext=lines)..    
+00005ba0: 2020 2020 2020 2020 6d79 5f65 6469 742e          my_edit.
+00005bb0: 7365 745f 7465 7874 286c 696e 6573 290d  set_text(lines).
+00005bc0: 0a20 2020 2020 2020 2020 2020 206d 795f  .            my_
+00005bd0: 6564 6974 2e73 6574 5374 796c 6553 6865  edit.setStyleShe
+00005be0: 6574 2873 656c 662e 7468 656d 655f 6d61  et(self.theme_ma
+00005bf0: 6e61 6765 722e 6765 745f 6261 636b 6772  nager.get_backgr
+00005c00: 6f75 6e64 5f73 7479 6c65 2829 290d 0a20  ound_style()).. 
+00005c10: 2020 2020 2020 2020 2020 206d 795f 6564             my_ed
+00005c20: 6974 2e73 6574 5374 796c 6553 6865 6574  it.setStyleSheet
+00005c30: 2873 656c 662e 7468 656d 655f 6d61 6e61  (self.theme_mana
+00005c40: 6765 722e 6765 745f 7374 796c 6573 6865  ger.get_styleshe
+00005c50: 6574 2822 6d61 696e 2229 290d 0a20 2020  et("main"))..   
+00005c60: 2020 2020 2020 2020 206d 795f 6564 6974           my_edit
+00005c70: 2e73 7461 7274 5f77 6174 6368 646f 6728  .start_watchdog(
+00005c80: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
+00005c90: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00005ca0: 6d79 5f65 6469 742e 7368 6f77 2829 0d0a  my_edit.show()..
+00005cb0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00005cc0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+00005cd0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00005ce0: 6c66 2e6e 6f74 6966 7928 2243 6f75 6c64  lf.notify("Could
+00005cf0: 206e 6f74 2065 6469 7420 6d61 696e 6c6f   not edit mainlo
+00005d00: 6f70 2066 696c 652e 2048 6176 6520 796f  op file. Have yo
+00005d10: 7520 7361 7665 6420 7468 6520 7072 6f6a  u saved the proj
+00005d20: 6563 7420 7965 743f 5c6e 2220 202b 2073  ect yet?\n"  + s
+00005d30: 7472 2865 292c 2074 6974 6c65 3d22 4572  tr(e), title="Er
+00005d40: 726f 7222 290d 0a0d 0a20 2020 2064 6566  ror")....    def
+00005d50: 2072 6573 746f 7265 5f6f 7269 6769 6e61   restore_origina
+00005d60: 6c5f 7369 7a65 2873 656c 6629 3a0d 0a20  l_size(self):.. 
+00005d70: 2020 2020 2020 2073 656c 662e 7365 7446         self.setF
+00005d80: 6978 6564 5369 7a65 2831 3832 312c 3130  ixedSize(1821,10
+00005d90: 3130 290d 0a20 2020 2020 2020 2073 656c  10)..        sel
+00005da0: 662e 7365 744d 6178 696d 756d 5369 7a65  f.setMaximumSize
+00005db0: 2834 3030 3030 2c34 3030 3030 290d 0a0d  (40000,40000)...
+00005dc0: 0a20 2020 2064 6566 2066 6c69 705f 6865  .    def flip_he
+00005dd0: 6967 6874 2873 656c 6629 3a0d 0a20 2020  ight(self):..   
+00005de0: 2020 2020 2069 6620 7365 6c66 2e66 6c69       if self.fli
+00005df0: 7070 6564 3a0d 0a20 2020 2020 2020 2020  pped:..         
+00005e00: 2020 2057 203d 2073 656c 662e 6672 616d     W = self.fram
+00005e10: 6547 656f 6d65 7472 7928 292e 7769 6474  eGeometry().widt
+00005e20: 6828 290d 0a20 2020 2020 2020 2020 2020  h()..           
+00005e30: 2048 203d 2073 656c 662e 6672 616d 6547   H = self.frameG
+00005e40: 656f 6d65 7472 7928 292e 6865 6967 6874  eometry().height
+00005e50: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
+00005e60: 2020 7365 6c66 2e73 6574 4d69 6e69 6d75    self.setMinimu
+00005e70: 6d53 697a 6528 7365 6c66 2e6c 6173 745f  mSize(self.last_
+00005e80: 7769 6474 682c 7365 6c66 2e6c 6173 745f  width,self.last_
+00005e90: 6865 6967 6874 290d 0a20 2020 2020 2020  height)..       
+00005ea0: 2020 2020 2023 2073 656c 662e 7365 744d       # self.setM
+00005eb0: 6178 696d 756d 5369 7a65 2873 656c 662e  aximumSize(self.
+00005ec0: 6c61 7374 5f77 6964 7468 2c73 656c 662e  last_width,self.
+00005ed0: 6c61 7374 5f68 6569 6768 7429 0d0a 2020  last_height)..  
+00005ee0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00005ef0: 6574 4d61 7869 6d75 6d53 697a 6528 3430  etMaximumSize(40
+00005f00: 3030 302c 3430 3030 3029 0d0a 2020 2020  000,40000)..    
+00005f10: 2020 2020 2020 2020 2320 7365 6c66 2e73          # self.s
+00005f20: 6574 4d69 6e69 6d75 6d53 697a 6528 3430  etMinimumSize(40
+00005f30: 302c 3430 3029 0d0a 0d0a 2020 2020 2020  0,400)....      
+00005f40: 2020 2020 2020 2320 5720 3d20 7365 6c66        # W = self
+00005f50: 2e66 7261 6d65 4765 6f6d 6574 7279 2829  .frameGeometry()
+00005f60: 2e77 6964 7468 2829 0d0a 2020 2020 2020  .width()..      
+00005f70: 2020 2020 2020 2320 7365 6c66 2e46 6c69        # self.Fli
+00005f80: 7048 6569 6768 7442 7574 746f 6e2e 7365  pHeightButton.se
+00005f90: 7447 656f 6d65 7472 7928 696e 7428 5729  tGeometry(int(W)
+00005fa0: 2d38 312d 3235 2c35 2c38 312c 3231 290d  -81-25,5,81,21).
+00005fb0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+00005fc0: 656c 662e 666c 6970 7065 6420 3d20 4661  elf.flipped = Fa
+00005fd0: 6c73 650d 0a20 2020 2020 2020 2065 6c73  lse..        els
+00005fe0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00005ff0: 5720 3d20 7365 6c66 2e66 7261 6d65 4765  W = self.frameGe
+00006000: 6f6d 6574 7279 2829 2e77 6964 7468 2829  ometry().width()
+00006010: 0d0a 2020 2020 2020 2020 2020 2020 4820  ..            H 
+00006020: 3d20 7365 6c66 2e66 7261 6d65 4765 6f6d  = self.frameGeom
+00006030: 6574 7279 2829 2e68 6569 6768 7428 290d  etry().height().
+00006040: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00006050: 662e 6c61 7374 5f77 6964 7468 203d 2057  f.last_width = W
+00006060: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00006070: 6c66 2e6c 6173 745f 6865 6967 6874 203d  lf.last_height =
+00006080: 2048 0d0a 0d0a 2020 2020 2020 2020 2020   H....          
+00006090: 2020 7365 6c66 2e73 6574 4669 7865 6453    self.setFixedS
+000060a0: 697a 6528 3830 302c 3730 290d 0a0d 0a20  ize(800,70).... 
+000060b0: 2020 2020 2020 2020 2020 2023 5720 3d20             #W = 
+000060c0: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
+000060d0: 7279 2829 2e77 6964 7468 2829 0d0a 2020  ry().width()..  
+000060e0: 2020 2020 2020 2020 2020 2373 656c 662e            #self.
+000060f0: 466c 6970 4865 6967 6874 4275 7474 6f6e  FlipHeightButton
+00006100: 2e73 6574 4765 6f6d 6574 7279 2869 6e74  .setGeometry(int
+00006110: 2857 292d 3831 2d32 352c 352c 3831 2c32  (W)-81-25,5,81,2
+00006120: 3129 0d0a 0d0a 2020 2020 2020 2020 2020  1)....          
+00006130: 2020 7365 6c66 2e66 6c69 7070 6564 203d    self.flipped =
+00006140: 2054 7275 650d 0a0d 0a0d 0a20 2020 2064   True......    d
+00006150: 6566 2063 6861 6e67 655f 616c 6572 7428  ef change_alert(
+00006160: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00006170: 7365 6c66 2e6d 6164 655f 6368 616e 6765  self.made_change
+00006180: 7320 3d20 5472 7565 0d0a 2020 2020 2020  s = True..      
+00006190: 2020 2320 7365 6c66 2e75 6470 6174 6542    # self.udpateB
+000061a0: 7574 746f 6e2e 7365 7454 6578 7428 2255  utton.setText("U
+000061b0: 7064 6174 6520 5661 6c75 6573 202a 2229  pdate Values *")
+000061c0: 0d0a 0d0a 2020 2020 6465 6620 7368 6f77  ....    def show
+000061d0: 5f6f 7574 7075 745f 6469 7370 6c61 7928  _output_display(
+000061e0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+000061f0: 2320 7368 6f77 7320 7468 6520 6c6f 6767  # shows the logg
+00006200: 6572 2064 6973 706c 6179 2066 6f72 206f  er display for o
+00006210: 7574 7075 7420 7175 616e 7469 7469 6573  utput quantities
+00006220: 0d0a 0d0a 2020 2020 2020 2020 7472 793a  ....        try:
+00006230: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00006240: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
+00006250: 6972 6e61 6d65 2873 656c 662e 6375 7272  irname(self.curr
+00006260: 656e 745f 6669 6c65 292b 222f 6f75 7470  ent_file)+"/outp
+00006270: 7574 2f22 0d0a 2020 2020 2020 2020 2020  ut/"..          
+00006280: 2020 7072 696e 7428 225b 4445 4255 4720    print("[DEBUG 
+00006290: 4d45 5353 4147 455d 206f 7065 6e20 6f75  MESSAGE] open ou
+000062a0: 7470 7574 2064 6973 706c 6179 2069 6e20  tput display in 
+000062b0: 7061 7468 222c 2070 6174 6829 0d0a 0d0a  path", path)....
+000062c0: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
+000062d0: 7574 5f64 6973 706c 6179 203d 204f 7574  ut_display = Out
+000062e0: 7075 7444 6973 706c 6179 2873 656c 662c  putDisplay(self,
+000062f0: 7061 7468 203d 2070 6174 6829 0d0a 2020  path = path)..  
+00006300: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00006310: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+00006320: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+00006330: 6f74 6966 7928 7374 7228 6529 2c74 6974  otify(str(e),tit
+00006340: 6c65 3d22 4572 726f 7222 290d 0a0d 0a0d  le="Error").....
+00006350: 0a0d 0a20 2020 2064 6566 2073 6176 655f  ...    def save_
+00006360: 616e 645f 6275 696c 6428 7365 6c66 293a  and_build(self):
+00006370: 0d0a 0d0a 2020 2020 2020 2020 2320 2d2d  ....        # --
+00006380: 2063 7265 6174 6520 6e65 7720 7374 6174   create new stat
+00006390: 7573 2073 6967 6e61 6c0d 0a0d 0a20 2020  us signal....   
+000063a0: 2020 2020 2073 656c 662e 776f 726b 6572       self.worker
+000063b0: 2e73 7769 7463 685f 7374 6174 6528 290d  .switch_state().
+000063c0: 0a20 2020 2020 2020 2023 202d 2d2d 0d0a  .        # ---..
+000063d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+000063e0: 6176 6528 290d 0a0d 0a20 2020 2020 2020  ave()....       
+000063f0: 2061 203d 205b 5d0d 0a20 2020 2020 2020   a = []..       
+00006400: 2066 6f72 2063 6520 696e 2043 6f64 6545   for ce in CodeE
+00006410: 6469 746f 722e 696e 7374 616e 6365 732e  ditor.instances.
+00006420: 7661 6c75 6573 2829 3a0d 0a20 2020 2020  values():..     
+00006430: 2020 2020 2020 206e 616d 6573 203d 2063         names = c
+00006440: 652e 7361 7665 5f61 6e64 5f62 7569 6c64  e.save_and_build
+00006450: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00006460: 6966 206e 616d 6573 2069 7320 6e6f 7420  if names is not 
+00006470: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00006480: 2020 2020 2020 2061 2e61 7070 656e 6428         a.append(
+00006490: 6e61 6d65 7329 0d0a 0d0a 2020 2020 2020  names)....      
+000064a0: 2020 666f 7220 6169 2069 6e20 613a 0d0a    for ai in a:..
+000064b0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+000064c0: 695b 305d 2069 6e20 436f 6465 4564 6974  i[0] in CodeEdit
+000064d0: 6f72 2e69 6e73 7461 6e63 6573 3a0d 0a20  or.instances:.. 
+000064e0: 2020 2020 2020 2020 2020 2020 2020 2043                 C
+000064f0: 6f64 6545 6469 746f 722e 696e 7374 616e  odeEditor.instan
+00006500: 6365 735b 6169 5b30 5d5d 203d 204e 6f6e  ces[ai[0]] = Non
+00006510: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00006520: 2020 2064 656c 2043 6f64 6545 6469 746f     del CodeEdito
+00006530: 722e 696e 7374 616e 6365 735b 6169 5b30  r.instances[ai[0
+00006540: 5d5d 0d0a 2020 2020 2020 2020 2020 2020  ]]..            
+00006550: 436f 6465 4564 6974 6f72 2e69 6e73 7461  CodeEditor.insta
+00006560: 6e63 6573 5b61 695b 315d 5d20 3d20 6169  nces[ai[1]] = ai
+00006570: 5b32 5d0d 0a0d 0a20 2020 2020 2020 2070  [2]....        p
+00006580: 7269 6e74 2822 5c6e 4e45 5720 494e 5354  rint("\nNEW INST
+00006590: 414e 4345 535c 6e22 2c20 436f 6465 4564  ANCES\n", CodeEd
+000065a0: 6974 6f72 2e69 6e73 7461 6e63 6573 290d  itor.instances).
+000065b0: 0a0d 0a0d 0a20 2020 2020 2020 2074 7279  .....        try
+000065c0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+000065d0: 656c 662e 6275 696c 645f 7072 6f6a 6563  elf.build_projec
+000065e0: 7428 7369 6c65 6e74 3d54 7275 6529 0d0a  t(silent=True)..
+000065f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00006600: 2e73 7461 7475 7342 6172 2829 2e73 686f  .statusBar().sho
+00006610: 774d 6573 7361 6765 2822 5361 7665 6420  wMessage("Saved 
+00006620: 2220 2b20 7365 6c66 2e63 7572 7265 6e74  " + self.current
+00006630: 5f66 696c 6529 0d0a 0d0a 2020 2020 2020  _file)....      
+00006640: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+00006650: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
+00006660: 2020 2020 2020 2320 7365 6c66 2e6e 6f74        # self.not
+00006670: 6966 7928 7374 7228 6529 2c74 6974 6c65  ify(str(e),title
+00006680: 3d22 4578 6365 7074 696f 6e22 290d 0a20  ="Exception").. 
+00006690: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000066a0: 2873 7472 2865 2929 0d0a 0d0a 0d0a 0d0a  (str(e))........
+000066b0: 2020 2020 6465 6620 7275 6e5f 7072 6f6a      def run_proj
+000066c0: 6563 7428 7365 6c66 293a 0d0a 0d0a 2020  ect(self):....  
+000066d0: 2020 2020 2020 7365 6c66 2e73 6176 655f        self.save_
+000066e0: 616e 645f 6275 696c 6428 290d 0a0d 0a20  and_build().... 
+000066f0: 2020 2020 2020 2023 2073 656c 662e 7368         # self.sh
+00006700: 6f77 5f6f 7574 7075 745f 6469 7370 6c61  ow_output_displa
+00006710: 7928 290d 0a0d 0a20 2020 2020 2020 2073  y()....        s
+00006720: 656c 662e 7365 7443 7572 736f 7228 5174  elf.setCursor(Qt
+00006730: 2e57 6169 7443 7572 736f 7229 0d0a 0d0a  .WaitCursor)....
+00006740: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00006750: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+00006760: 2e74 6162 5769 6467 6574 2e73 6574 4375  .tabWidget.setCu
+00006770: 7272 656e 7449 6e64 6578 2831 290d 0a0d  rrentIndex(1)...
+00006780: 0a20 2020 2020 2020 2020 2020 2023 6669  .            #fi
+00006790: 6c65 6e61 6d65 203d 206f 732e 7061 7468  lename = os.path
+000067a0: 2e64 6972 6e61 6d65 2873 656c 662e 6375  .dirname(self.cu
+000067b0: 7272 656e 745f 6669 6c65 2920 2b20 222f  rrent_file) + "/
+000067c0: 7079 7468 6f6e 5f63 6f64 652f 6d61 696e  python_code/main
+000067d0: 6c6f 6f70 2e70 7922 0d0a 2020 2020 2020  loop.py"..      
+000067e0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
+000067f0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+00006800: 2873 656c 662e 6375 7272 656e 745f 6669  (self.current_fi
+00006810: 6c65 2920 2b20 222f 7275 6e6e 6572 2e70  le) + "/runner.p
+00006820: 7922 0d0a 2020 2020 2020 2020 2020 2020  y"..            
+00006830: 666f 6c64 6572 203d 206f 732e 7061 7468  folder = os.path
+00006840: 2e64 6972 6e61 6d65 2873 656c 662e 6375  .dirname(self.cu
+00006850: 7272 656e 745f 6669 6c65 2920 2b20 222f  rrent_file) + "/
+00006860: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+00006870: 2069 6620 2220 2220 696e 2066 696c 656e   if " " in filen
+00006880: 616d 6520 6f72 2022 2022 2069 6e20 666f  ame or " " in fo
+00006890: 6c64 6572 3a0d 0a20 2020 2020 2020 2020  lder:..         
+000068a0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+000068b0: 6679 2874 6974 6c65 3d22 496e 7661 6c69  fy(title="Invali
+000068c0: 6420 6669 6c65 206e 616d 6522 2c20 6d65  d file name", me
+000068d0: 7373 6167 653d 2254 6865 7265 2061 7265  ssage="There are
+000068e0: 2073 7061 6365 7320 696e 2079 6f75 7220   spaces in your 
+000068f0: 666f 6c64 6572 206f 7220 6669 6c65 206e  folder or file n
+00006900: 616d 652e 2054 6869 7320 6d69 6768 7420  ame. This might 
+00006910: 6361 7573 6520 7072 6f62 6c65 6d73 2e22  cause problems."
+00006920: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00006930: 2070 7269 6e74 2822 6c6f 6f6b 7570 222c   print("lookup",
+00006940: 2066 696c 656e 616d 652c 2022 696e 222c   filename, "in",
+00006950: 2066 6f6c 6465 7229 0d0a 0d0a 2020 2020   folder)....    
+00006960: 2020 2020 2020 2020 6f6c 645f 6469 7220          old_dir 
+00006970: 3d20 6f73 2e67 6574 6377 6428 290d 0a20  = os.getcwd().. 
+00006980: 2020 2020 2020 2020 2020 2023 2070 7269             # pri
+00006990: 6e74 2822 6f6c 645f 6469 7222 2c6f 6c64  nt("old_dir",old
+000069a0: 5f64 6972 290d 0a0d 0a20 2020 2020 2020  _dir)....       
+000069b0: 2020 2020 206f 732e 6368 6469 7228 666f       os.chdir(fo
+000069c0: 6c64 6572 290d 0a20 2020 2020 2020 2020  lder)..         
+000069d0: 2020 2063 6d64 203d 2022 636f 6e64 6120     cmd = "conda 
+000069e0: 6163 7469 7661 7465 2061 7474 756e 6520  activate attune 
+000069f0: 2f6b 2070 7974 686f 6e20 2573 2220 2520  /k python %s" % 
+00006a00: 6669 6c65 6e61 6d65 0d0a 2020 2020 2020  filename..      
+00006a10: 2020 2020 2020 7072 696e 7428 2243 4f4d        print("COM
+00006a20: 4d41 4e44 222c 2063 6d64 290d 0a20 2020  MAND", cmd)..   
+00006a30: 2020 2020 2020 2020 206f 732e 7379 7374           os.syst
+00006a40: 656d 2822 7374 6172 7420 636d 6420 2020  em("start cmd   
+00006a50: 2020 2573 2220 2520 636d 6429 0d0a 0d0a    %s" % cmd)....
+00006a60: 2020 2020 2020 2020 2020 2020 6f73 2e63              os.c
+00006a70: 6864 6972 286f 6c64 5f64 6972 290d 0a0d  hdir(old_dir)...
+00006a80: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00006a90: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00006aa0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+00006ab0: 656c 662e 6e6f 7469 6679 2873 7472 2865  elf.notify(str(e
+00006ac0: 292c 7469 746c 653d 2222 290d 0a20 2020  ),title="")..   
+00006ad0: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
+00006ae0: 7443 7572 736f 7228 5174 2e41 7272 6f77  tCursor(Qt.Arrow
+00006af0: 4375 7273 6f72 290d 0a0d 0a20 2020 2020  Cursor)....     
+00006b00: 2020 2073 656c 662e 7365 7443 7572 736f     self.setCurso
+00006b10: 7228 5174 2e41 7272 6f77 4375 7273 6f72  r(Qt.ArrowCursor
+00006b20: 290d 0a0d 0a20 2020 2064 6566 2062 7569  )....    def bui
+00006b30: 6c64 5f70 726f 6a65 6374 2873 656c 662c  ld_project(self,
+00006b40: 7369 6c65 6e74 3d46 616c 7365 2c6f 7665  silent=False,ove
+00006b50: 7277 7269 7465 3d46 616c 7365 293a 0d0a  rwrite=False):..
+00006b60: 0d0a 2020 2020 2020 2020 2366 6f6c 6465  ..        #folde
+00006b70: 7220 3d20 5146 696c 6544 6961 6c6f 672e  r = QFileDialog.
+00006b80: 6765 7445 7869 7374 696e 6744 6972 6563  getExistingDirec
+00006b90: 746f 7279 2028 7365 6c66 2c20 2742 7569  tory (self, 'Bui
+00006ba0: 6c64 2050 726f 6a65 6374 2e2e 2e27 2c20  ld Project...', 
+00006bb0: 6f73 2e67 6574 6377 6428 2929 0d0a 0d0a  os.getcwd())....
+00006bc0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00006bd0: 6375 7272 656e 745f 6669 6c65 2069 7320  current_file is 
+00006be0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00006bf0: 2020 2073 656c 662e 6e6f 7469 6679 286d     self.notify(m
+00006c00: 6573 7361 6765 3d22 4361 6e6e 6f74 2062  essage="Cannot b
+00006c10: 7569 6c64 2070 726f 6a65 6374 2e20 506c  uild project. Pl
+00006c20: 6561 7365 2073 6176 6520 746f 2066 696c  ease save to fil
+00006c30: 6520 6669 7273 742e 222c 7469 746c 653d  e first.",title=
+00006c40: 2245 7272 6f72 2229 0d0a 2020 2020 2020  "Error")..      
+00006c50: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
+00006c60: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
+00006c70: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+00006c80: 2873 656c 662e 6375 7272 656e 745f 6669  (self.current_fi
+00006c90: 6c65 290d 0a20 2020 2020 2020 2070 7269  le)..        pri
+00006ca0: 6e74 2822 6275 696c 6420 7072 6f6a 6563  nt("build projec
+00006cb0: 7420 696e 2022 2c20 666f 6c64 6572 290d  t in ", folder).
+00006cc0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+00006cd0: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
+00006ce0: 6d6b 6469 7228 666f 6c64 6572 202b 2022  mkdir(folder + "
+00006cf0: 2f6d 616d 6261 5f63 6f64 652f 2229 0d0a  /mamba_code/")..
+00006d00: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+00006d10: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
+00006d20: 730d 0a0d 0a20 2020 2020 2020 2074 7279  s....        try
+00006d30: 3a0d 0a20 2020 2020 2020 2020 2020 206f  :..            o
+00006d40: 732e 6d6b 6469 7228 666f 6c64 6572 202b  s.mkdir(folder +
+00006d50: 2022 2f70 7974 686f 6e5f 636f 6465 2f22   "/python_code/"
+00006d60: 290d 0a20 2020 2020 2020 2065 7863 6570  )..        excep
+00006d70: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00006d80: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
+00006d90: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00006da0: 2020 6f73 2e6d 6b64 6972 2866 6f6c 6465    os.mkdir(folde
+00006db0: 7220 2b20 222f 6f75 7470 7574 2f22 290d  r + "/output/").
+00006dc0: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00006dd0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00006de0: 7373 0d0a 0d0a 2020 2020 2020 2020 7472  ss....        tr
+00006df0: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
+00006e00: 2020 666f 7220 6167 656e 742c 2063 6f64    for agent, cod
+00006e10: 6520 696e 2073 656c 662e 6472 6177 6361  e in self.drawca
+00006e20: 6e76 6173 2e63 6f64 655f 6461 7461 2e69  nvas.code_data.i
+00006e30: 7465 6d73 2829 3a0d 0a20 2020 2020 2020  tems():..       
+00006e40: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
+00006e50: 7420 696e 2043 6f64 6545 6469 746f 722e  t in CodeEditor.
+00006e60: 696e 7374 616e 6365 733a 2023 206f 6e6c  instances: # onl
+00006e70: 7920 636f 6e76 6572 7420 6564 6974 6564  y convert edited
+00006e80: 2063 6f64 650d 0a0d 0a20 2020 2020 2020   code....       
+00006e90: 2020 2020 2020 2020 2020 2020 2023 2077               # w
+00006ea0: 7269 7465 206d 616d 6261 2063 6f64 6520  rite mamba code 
+00006eb0: 666f 7220 636f 6d70 6c65 7465 6e65 7373  for completeness
+00006ec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006ed0: 2020 2020 2020 7061 7468 203d 2066 6f6c        path = fol
+00006ee0: 6465 7220 2b20 222f 6d61 6d62 615f 636f  der + "/mamba_co
+00006ef0: 6465 2f25 732e 7079 2220 2520 6167 656e  de/%s.py" % agen
+00006f00: 7420 2320 666f 726d 6572 202e 7478 740d  t # former .txt.
+00006f10: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00006f20: 2020 2020 2020 2070 7269 6e74 2822 7061         print("pa
+00006f30: 7468 222c 7061 7468 290d 0a0d 0a20 2020  th",path)....   
+00006f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f50: 2077 6974 6820 6f70 656e 2870 6174 682c   with open(path,
+00006f60: 2022 7722 2920 6173 2066 696c 653a 0d0a   "w") as file:..
+00006f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f80: 2020 2020 2020 2020 6669 6c65 2e77 7269          file.wri
+00006f90: 7465 2863 6f64 6529 0d0a 0d0a 2020 2020  te(code)....    
+00006fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006fb0: 2320 7772 6974 6520 7079 7468 6f6e 2063  # write python c
+00006fc0: 6f64 650d 0a20 2020 2020 2020 2020 2020  ode..           
+00006fd0: 2020 2020 2020 2020 2070 6174 6820 3d20           path = 
+00006fe0: 666f 6c64 6572 202b 2022 2f70 7974 686f  folder + "/pytho
+00006ff0: 6e5f 636f 6465 2f25 732e 7079 2220 2520  n_code/%s.py" % 
+00007000: 6167 656e 742e 6c6f 7765 7228 290d 0a0d  agent.lower()...
+00007010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007020: 2020 2020 2070 7269 6e74 2822 7061 7468       print("path
+00007030: 222c 7061 7468 290d 0a0d 0a20 2020 2020  ",path)....     
+00007040: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00007050: 6974 6820 6f70 656e 2870 6174 682c 2022  ith open(path, "
+00007060: 7722 2920 6173 2066 696c 653a 0d0a 2020  w") as file:..  
+00007070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007080: 2020 2020 2020 6e65 775f 636f 6465 203d        new_code =
+00007090: 2063 6f6e 7665 7274 5f63 6f64 6528 636f   convert_code(co
+000070a0: 6465 2e73 706c 6974 2822 5c6e 2229 295b  de.split("\n"))[
+000070b0: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
+000070c0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+000070d0: 636f 6465 203d 206e 6577 5f63 6f64 652e  code = new_code.
+000070e0: 656e 636f 6465 2822 7574 662d 3822 292e  encode("utf-8").
+000070f0: 6465 636f 6465 2827 6370 3132 3532 2729  decode('cp1252')
+00007100: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007110: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
+00007120: 7269 7465 286e 6577 5f63 6f64 6529 2023  rite(new_code) #
+00007130: 2063 6f6e 7665 7274 2075 7369 6e67 2074   convert using t
+00007140: 6865 206d 616d 6261 2069 6e74 6572 7072  he mamba interpr
+00007150: 6574 6572 0d0a 0d0a 2020 2020 2020 2020  eter....        
+00007160: 2020 2020 2320 7772 6974 6520 7365 7474      # write sett
+00007170: 696e 6773 2066 696c 650d 0a20 2020 2020  ings file..     
+00007180: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+00007190: 2866 6f6c 6465 7220 2b20 222f 7365 7474  (folder + "/sett
+000071a0: 696e 6773 2e79 6d6c 222c 2277 2229 2061  ings.yml","w") a
+000071b0: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
+000071c0: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
+000071d0: 6974 6528 7365 6c66 2e73 6574 7469 6e67  ite(self.setting
+000071e0: 735f 7374 7229 0d0a 0d0a 2020 2020 2020  s_str)....      
+000071f0: 2020 2020 2020 2320 7772 6974 6520 7468        # write th
+00007200: 6520 7275 6e6e 6572 2066 696c 650d 0a20  e runner file.. 
+00007210: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00007220: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7220  lf.mainloop_str 
+00007230: 3d3d 2022 2220 6f72 206f 7665 7277 7269  == "" or overwri
+00007240: 7465 3a0d 0a20 2020 2020 2020 2020 2020  te:..           
+00007250: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
+00007260: 6f6c 6465 722b 222f 7275 6e6e 6572 2e70  older+"/runner.p
+00007270: 7922 2c22 7722 2920 6173 2066 696c 653a  y","w") as file:
+00007280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007290: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
+000072a0: 2822 6672 6f6d 2070 7974 686f 6e5f 636f  ("from python_co
+000072b0: 6465 2e6d 6169 6e6c 6f6f 7020 696d 706f  de.mainloop impo
+000072c0: 7274 2072 756e 5c6e 5c6e 7275 6e28 295c  rt run\n\nrun()\
+000072d0: 6e22 290d 0a0d 0a20 2020 2020 2020 2020  n")....         
+000072e0: 2020 2023 2077 7269 7465 206d 6169 6e20     # write main 
+000072f0: 7369 6d75 6c61 7469 6f6e 2066 696c 650d  simulation file.
+00007300: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
+00007310: 6820 6f70 656e 2866 6f6c 6465 7220 2b20  h open(folder + 
+00007320: 222f 7079 7468 6f6e 5f63 6f64 652f 6d61  "/python_code/ma
 00007330: 696e 6c6f 6f70 2e70 7922 2c22 7722 2920  inloop.py","w") 
 00007340: 6173 2066 696c 653a 0d0a 2020 2020 2020  as file:..      
-00007350: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00007360: 662e 6d61 696e 6c6f 6f70 5f73 7472 203d  f.mainloop_str =
-00007370: 3d20 2222 206f 7220 6f76 6572 7772 6974  = "" or overwrit
-00007380: 653a 0d0a 0d0a 2020 2020 2020 2020 2020  e:....          
-00007390: 2020 2020 2020 2020 2020 6966 206f 7665            if ove
-000073a0: 7277 7269 7465 3a0d 0a20 2020 2020 2020  rwrite:..       
-000073b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000073c0: 2079 6573 203d 2073 656c 662e 6173 6b5f   yes = self.ask_
-000073d0: 7175 6573 7469 6f6e 2827 272c 2022 5741  question('', "WA
-000073e0: 524e 494e 4720 2d20 596f 7520 6172 6520  RNING - You are 
-000073f0: 6162 6f75 7420 746f 2063 7265 6174 6520  about to create 
-00007400: 6120 6672 6573 6820 6d61 696e 2073 6372  a fresh main scr
-00007410: 6970 742e 2054 6869 7320 636f 756c 6420  ipt. This could 
-00007420: 706f 7465 6e74 6961 6c6c 7920 6f76 6572  potentially over
-00007430: 7772 6974 6520 7072 6576 696f 7573 2076  write previous v
-00007440: 6572 7369 6f6e 7320 2869 6620 616e 7929  ersions (if any)
-00007450: 2e5c 6e54 6869 7320 6f70 6572 6174 696f  .\nThis operatio
-00007460: 6e20 6361 6e6e 6f74 2062 6520 7265 7665  n cannot be reve
-00007470: 7274 6564 2e20 436f 6e74 696e 7565 3f22  rted. Continue?"
-00007480: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00007490: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-000074a0: 7420 7965 733a 0d0a 2020 2020 2020 2020  t yes:..        
-000074b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074c0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
-000074d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074e0: 2020 6966 206f 7665 7277 7269 7465 2061    if overwrite a
-000074f0: 6e64 2073 656c 662e 6d61 696e 6c6f 6f70  nd self.mainloop
-00007500: 5f73 7472 2021 3d20 2222 3a0d 0a20 2020  _str != "":..   
+00007350: 2020 2020 2020 2377 6974 6820 6f70 656e        #with open
+00007360: 2866 6f6c 6465 7220 2b20 222e 2f6d 6169  (folder + "./mai
+00007370: 6e6c 6f6f 702e 7079 222c 2277 2229 2061  nloop.py","w") a
+00007380: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
+00007390: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000073a0: 2e6d 6169 6e6c 6f6f 705f 7374 7220 3d3d  .mainloop_str ==
+000073b0: 2022 2220 6f72 206f 7665 7277 7269 7465   "" or overwrite
+000073c0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+000073d0: 2020 2020 2020 2020 2069 6620 6f76 6572           if over
+000073e0: 7772 6974 653a 0d0a 2020 2020 2020 2020  write:..        
+000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007400: 7965 7320 3d20 7365 6c66 2e61 736b 5f71  yes = self.ask_q
+00007410: 7565 7374 696f 6e28 2727 2c20 2257 4152  uestion('', "WAR
+00007420: 4e49 4e47 202d 2059 6f75 2061 7265 2061  NING - You are a
+00007430: 626f 7574 2074 6f20 6372 6561 7465 2061  bout to create a
+00007440: 2066 7265 7368 206d 6169 6e20 7363 7269   fresh main scri
+00007450: 7074 2e20 5468 6973 2063 6f75 6c64 2070  pt. This could p
+00007460: 6f74 656e 7469 616c 6c79 206f 7665 7277  otentially overw
+00007470: 7269 7465 2070 7265 7669 6f75 7320 7665  rite previous ve
+00007480: 7273 696f 6e73 2028 6966 2061 6e79 292e  rsions (if any).
+00007490: 5c6e 5468 6973 206f 7065 7261 7469 6f6e  \nThis operation
+000074a0: 2063 616e 6e6f 7420 6265 2072 6576 6572   cannot be rever
+000074b0: 7465 642e 2043 6f6e 7469 6e75 653f 2229  ted. Continue?")
+000074c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000074d0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000074e0: 2079 6573 3a0d 0a20 2020 2020 2020 2020   yes:..         
+000074f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007500: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
 00007510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007520: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-00007530: 6f6c 6465 7220 2b20 222f 7079 7468 6f6e  older + "/python
-00007540: 5f63 6f64 652f 6d61 696e 6c6f 6f70 5f62  _code/mainloop_b
-00007550: 6163 6b75 702e 7079 222c 2277 2229 2061  ackup.py","w") a
-00007560: 7320 6261 636b 7570 6669 6c65 3a0d 0a20  s backupfile:.. 
-00007570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007580: 2020 2020 2020 2023 7769 7468 206f 7065         #with ope
-00007590: 6e28 666f 6c64 6572 202b 2022 2e2f 6d61  n(folder + "./ma
-000075a0: 696e 6c6f 6f70 5f62 6163 6b75 702e 7079  inloop_backup.py
-000075b0: 222c 2277 2229 2061 7320 6261 636b 7570  ","w") as backup
-000075c0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
-000075d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000075e0: 2020 2062 6163 6b75 7066 696c 652e 7772     backupfile.wr
-000075f0: 6974 6528 7365 6c66 2e6d 6169 6e6c 6f6f  ite(self.mainloo
-00007600: 705f 7374 722e 7265 706c 6163 6528 225c  p_str.replace("\
-00007610: 7422 2c22 2020 2020 2229 290d 0a0d 0a20  t","    ")).... 
-00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007630: 2020 2073 696d 755f 7374 7220 3d20 2222     simu_str = ""
-00007640: 220d 0a5c 225c 225c 220d 0a54 6869 7320  "..\"\"\"..This 
-00007650: 7468 6520 6d61 696e 2041 424d 2053 696d  the main ABM Sim
-00007660: 756c 6174 696f 6e20 6669 6c65 0d0a 4372  ulation file..Cr
-00007670: 6574 6165 6420 7769 7468 204d 414d 4241  etaed with MAMBA
-00007680: 2047 5549 0d0a 0d0a 4061 7574 686f 723a   GUI....@author:
-00007690: 203c 596f 7572 206e 616d 653e 0d0a 4064   <Your name>..@d
-000076a0: 6174 653a 203c 596f 7572 2064 6174 653e  ate: <Your date>
-000076b0: 0d0a 5c22 5c22 5c22 0d0a 0d0a 6672 6f6d  ..\"\"\"....from
-000076c0: 2073 6663 746f 6f6c 7320 696d 706f 7274   sfctools import
-000076d0: 2041 6765 6e74 2c20 576f 726c 642c 2053   Agent, World, S
-000076e0: 6574 7469 6e67 732c 2043 6c6f 636b 2c20  ettings, Clock, 
-000076f0: 466c 6f77 4d61 7472 6978 0d0a 2222 220d  FlowMatrix..""".
-00007700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007710: 2020 2020 2066 6f72 2061 6765 6e74 2069       for agent i
-00007720: 6e20 7365 6c66 2e64 7261 7763 616e 7661  n self.drawcanva
-00007730: 732e 636f 6465 5f64 6174 612e 6b65 7973  s.code_data.keys
-00007740: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00007750: 2020 2020 2020 2020 2020 2020 2073 696d               sim
-00007760: 755f 7374 7220 2b3d 2022 6672 6f6d 2070  u_str += "from p
-00007770: 7974 686f 6e5f 636f 6465 2e25 7320 696d  ython_code.%s im
-00007780: 706f 7274 2025 735c 6e22 2025 2028 6167  port %s\n" % (ag
-00007790: 656e 742e 6c6f 7765 7228 292c 6167 656e  ent.lower(),agen
-000077a0: 742e 6361 7069 7461 6c69 7a65 2829 290d  t.capitalize()).
-000077b0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000077c0: 2020 2020 2020 2073 696d 755f 7374 7220         simu_str 
-000077d0: 2b3d 2022 2222 0d0a 0d0a 6465 6620 6974  += """....def it
-000077e0: 6572 2829 3a0d 0a20 2020 205c 225c 225c  er():..    \"\"\
-000077f0: 220d 0a20 2020 2074 6869 7320 6973 206f  "..    this is o
-00007800: 6e65 2069 7465 7261 7469 6f6e 0d0a 2020  ne iteration..  
-00007810: 2020 5c22 5c22 5c22 0d0a 0d0a 2020 2020    \"\"\"....    
-00007820: 2320 544f 444f 206d 6f64 6966 7920 6974  # TODO modify it
-00007830: 6572 6174 696f 6e20 6865 7265 0d0a 2222  eration here..""
-00007840: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-00007850: 2020 2020 2020 2020 2066 6f72 2061 6765           for age
-00007860: 6e74 2069 6e20 7365 6c66 2e64 7261 7763  nt in self.drawc
-00007870: 616e 7661 732e 636f 6465 5f64 6174 612e  anvas.code_data.
-00007880: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-00007890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000078a0: 2061 203d 2061 6765 6e74 2e63 6170 6974   a = agent.capit
-000078b0: 616c 697a 6528 290d 0a20 2020 2020 2020  alize()..       
-000078c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000078d0: 2073 696d 755f 7374 7220 2b3d 2022 5c74   simu_str += "\t
-000078e0: 666f 7220 6120 696e 2057 6f72 6c64 2829  for a in World()
-000078f0: 2e67 6574 5f61 6765 6e74 735f 6f66 5f74  .get_agents_of_t
-00007900: 7970 6528 2725 7327 293a 5c6e 5c74 5c74  ype('%s'):\n\t\t
-00007910: 7072 696e 7428 2744 6f20 736f 6d65 7468  print('Do someth
-00007920: 696e 6720 7769 7468 2720 2b20 7374 7228  ing with' + str(
-00007930: 6129 295c 6e5c 6e22 2025 2028 6129 0d0a  a))\n\n" % (a)..
-00007940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007950: 2020 2020 7369 6d75 5f73 7472 202b 3d20      simu_str += 
-00007960: 2222 225c 6e0d 0a64 6566 2072 756e 2829  """\n..def run()
-00007970: 3a0d 0a20 2020 205c 225c 225c 220d 0a20  :..    \"\"\".. 
-00007980: 2020 2074 6869 7320 6973 2074 6865 206d     this is the m
-00007990: 6169 6e20 7369 6d75 6c61 7469 6f6e 206c  ain simulation l
-000079a0: 6f6f 700d 0a20 2020 205c 225c 225c 220d  oop..    \"\"\".
-000079b0: 0a22 2222 0d0a 0d0a 0d0a 2020 2020 2020  ."""......      
-000079c0: 2020 2020 2020 2020 2020 2020 2020 7369                si
-000079d0: 6d75 5f73 7472 202b 3d20 2222 225c 6e0d  mu_str += """\n.
-000079e0: 0a0d 0a20 2020 2053 6574 7469 6e67 7328  ...    Settings(
-000079f0: 292e 7265 6164 285c 2273 6574 7469 6e67  ).read(\"setting
-00007a00: 732e 796d 6c5c 2229 2023 2072 6561 6420  s.yml\") # read 
-00007a10: 7365 7474 696e 6773 2066 696c 650d 0a0d  settings file...
-00007a20: 0a20 2020 205c 225c 225c 220d 0a20 2020  .    \"\"\"..   
-00007a30: 2053 696d 756c 6174 696f 6e20 7061 7261   Simulation para
-00007a40: 6d65 7465 7273 0d0a 2020 2020 5c22 5c22  meters..    \"\"
-00007a50: 5c22 0d0a 0d0a 2020 2020 2320 6e75 6d62  \"....    # numb
-00007a60: 6572 206f 6620 6167 656e 7473 2074 6f20  er of agents to 
-00007a70: 6265 2063 7265 6174 6564 0d0a 2222 220d  be created..""".
-00007a80: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00007a90: 2020 2020 2020 2066 6f72 2061 6765 6e74         for agent
-00007aa0: 2069 6e20 7365 6c66 2e64 7261 7763 616e   in self.drawcan
-00007ab0: 7661 732e 636f 6465 5f64 6174 612e 6b65  vas.code_data.ke
-00007ac0: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
-00007ad0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007ae0: 696d 755f 7374 7220 2b3d 2022 5c74 4e5f  imu_str += "\tN_
-00007af0: 2573 203d 2031 5c6e 2220 2520 6167 656e  %s = 1\n" % agen
-00007b00: 742e 6361 7069 7461 6c69 7a65 2829 0d0a  t.capitalize()..
-00007b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b20: 2020 2020 7369 6d75 5f73 7472 202b 3d20      simu_str += 
-00007b30: 2222 220d 0a20 2020 2023 2054 4f44 4f5e  """..    # TODO^
-00007b40: 2073 6574 2074 6865 2063 6f72 7265 6374   set the correct
-00007b50: 2076 616c 7565 0d0a 0d0a 2020 2020 2320   value....    # 
-00007b60: 6e75 6d62 6572 206f 6620 7369 6d75 6c61  number of simula
-00007b70: 7469 6f6e 2073 7465 7073 0d0a 2020 2020  tion steps..    
-00007b80: 5420 3d20 3130 300d 0a0d 0a20 2020 2023  T = 100....    #
-00007b90: 2054 4f44 4f5e 2073 6574 2074 6865 2063   TODO^ set the c
-00007ba0: 6f72 7265 6374 2076 616c 7565 730d 0a0d  orrect values...
-00007bb0: 0a20 2020 2023 2063 7265 6174 6520 4167  .    # create Ag
-00007bc0: 656e 7473 3a0d 0a22 2222 0d0a 2020 2020  ents:.."""..    
-00007bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007be0: 666f 7220 6167 656e 7420 696e 2073 656c  for agent in sel
-00007bf0: 662e 6472 6177 6361 6e76 6173 2e63 6f64  f.drawcanvas.cod
-00007c00: 655f 6461 7461 2e6b 6579 7328 293a 0d0a  e_data.keys():..
-00007c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c20: 2020 2020 2020 2020 6120 3d20 6167 656e          a = agen
-00007c30: 742e 6361 7069 7461 6c69 7a65 2829 0d0a  t.capitalize()..
-00007c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c50: 2020 2020 2020 2020 7369 6d75 5f73 7472          simu_str
-00007c60: 202b 3d20 225c 745b 2573 2829 2066 6f72   += "\t[%s() for
-00007c70: 2069 2069 6e20 7261 6e67 6528 4e5f 2573   i in range(N_%s
-00007c80: 295d 5c6e 2220 2520 2861 2c61 290d 0a0d  )]\n" % (a,a)...
-00007c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007ca0: 2020 2020 2073 696d 755f 7374 7220 2b3d       simu_str +=
-00007cb0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
-00007cc0: 2020 2020 2020 2020 2020 2073 696d 755f             simu_
-00007cd0: 7374 7220 2b3d 2022 5c74 2320 696e 7465  str += "\t# inte
-00007ce0: 722d 6c69 6e6b 2061 6765 6e74 7320 5c6e  r-link agents \n
-00007cf0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-00007d00: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
-00007d10: 7220 2b3d 2022 5c74 576f 726c 6428 292e  r += "\tWorld().
-00007d20: 6c69 6e6b 2829 5c6e 5c6e 220d 0a0d 0a20  link()\n\n".... 
-00007d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d40: 2020 2023 2066 6f72 2061 6765 6e74 2069     # for agent i
-00007d50: 6e20 7365 6c66 2e64 7261 7763 616e 7661  n self.drawcanva
-00007d60: 732e 636f 6465 5f64 6174 612e 6b65 7973  s.code_data.keys
-00007d70: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00007d80: 2020 2020 2020 2020 2023 2020 2020 6120           #    a 
-00007d90: 3d20 6167 656e 742e 6361 7069 7461 6c69  = agent.capitali
-00007da0: 7a65 2829 0d0a 2020 2020 2020 2020 2020  ze()..          
-00007db0: 2020 2020 2020 2020 2020 2320 2020 2073            #    s
-00007dc0: 696d 755f 7374 7220 2b3d 2022 5c74 5b69  imu_str += "\t[i
-00007dd0: 2e6c 696e 6b28 2920 666f 7220 6920 696e  .link() for i in
-00007de0: 2025 735f 7069 6c65 5d5c 6e22 2025 2028   %s_pile]\n" % (
-00007df0: 6129 0d0a 0d0a 2020 2020 2020 2020 2020  a)....          
-00007e00: 2020 2020 2020 2020 2020 7369 6d75 5f73            simu_s
-00007e10: 7472 202b 3d20 2222 220d 0a20 2020 2066  tr += """..    f
-00007e20: 6f72 2069 2069 6e20 7261 6e67 6528 5429  or i in range(T)
-00007e30: 3a0d 0a20 2020 2020 2020 2069 7465 7228  :..        iter(
-00007e40: 290d 0a0d 0a20 2020 2020 2020 2023 2054  )....        # T
-00007e50: 4f44 4f20 7772 6974 6520 6f75 7470 7574  ODO write output
-00007e60: 7320 6865 7265 202e 2e2e 0d0a 0d0a 2020  s here .......  
-00007e70: 2020 2020 2020 436c 6f63 6b28 292e 7469        Clock().ti
-00007e80: 636b 2829 0d0a 0d0a 2020 2020 7072 696e  ck()....    prin
-00007e90: 7428 466c 6f77 4d61 7472 6978 2829 2e74  t(FlowMatrix().t
-00007ea0: 6f5f 7374 7269 6e67 2829 290d 0a22 2222  o_string()).."""
-00007eb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007ec0: 2020 2020 2020 7365 6c66 2e6d 6169 6e6c        self.mainl
-00007ed0: 6f6f 705f 7374 7220 3d20 7369 6d75 5f73  oop_str = simu_s
-00007ee0: 7472 0d0a 0d0a 2020 2020 2020 2020 2020  tr....          
-00007ef0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00007f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f10: 2073 696d 755f 7374 7220 3d20 7365 6c66   simu_str = self
-00007f20: 2e6d 6169 6e6c 6f6f 705f 7374 720d 0a0d  .mainloop_str...
-00007f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007f40: 2070 7269 6e74 2822 5349 4d55 2053 5452   print("SIMU STR
-00007f50: 222c 2073 696d 755f 7374 7229 0d0a 2020  ", simu_str)..  
-00007f60: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00007f70: 6c65 2e77 7269 7465 2873 696d 755f 7374  le.write(simu_st
-00007f80: 722e 7265 706c 6163 6528 225c 7422 2c22  r.replace("\t","
-00007f90: 2020 2020 2229 290d 0a0d 0a20 2020 2020      "))....     
-00007fa0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00007fb0: 7420 7369 6c65 6e74 3a0d 0a20 2020 2020  t silent:..     
-00007fc0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007fd0: 656c 662e 6e6f 7469 6679 2822 5072 6f6a  elf.notify("Proj
-00007fe0: 6563 7420 6669 6c65 7320 6275 696c 7421  ect files built!
-00007ff0: 222c 7469 746c 653d 2253 7563 6365 7373  ",title="Success
-00008000: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-00008010: 2020 2020 2020 7365 6c66 2e67 656e 5f63        self.gen_c
-00008020: 6f64 6528 2920 2320 6765 6e65 7261 7465  ode() # generate
-00008030: 2074 7261 6e73 6163 7469 6f6e 732e 7079   transactions.py
-00008040: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
-00008050: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-00008060: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00008070: 6578 6365 7074 696f 6e5f 7479 7065 2c20  exception_type, 
-00008080: 6578 6365 7074 696f 6e5f 6f62 6a65 6374  exception_object
-00008090: 2c20 6578 6365 7074 696f 6e5f 7472 6163  , exception_trac
-000080a0: 6562 6163 6b20 3d20 7379 732e 6578 635f  eback = sys.exc_
-000080b0: 696e 666f 2829 0d0a 2020 2020 2020 2020  info()..        
-000080c0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-000080d0: 2243 6f75 6c64 206e 6f74 2062 7569 6c64  "Could not build
-000080e0: 2070 726f 6a65 6374 2e5c 6e22 202b 2073   project.\n" + s
-000080f0: 7472 2865 7863 6570 7469 6f6e 5f6f 626a  tr(exception_obj
-00008100: 6563 7429 202b 2073 7472 2865 7863 6570  ect) + str(excep
-00008110: 7469 6f6e 5f74 7261 6365 6261 636b 292c  tion_traceback),
-00008120: 7469 746c 653d 2245 7272 6f72 206f 6e20  title="Error on 
-00008130: 5072 6f6a 6563 7420 4275 696c 6422 290d  Project Build").
-00008140: 0a0d 0a20 2020 2064 6566 2061 7574 6f5f  ...    def auto_
-00008150: 6261 636b 7570 2873 656c 6629 3a0d 0a20  backup(self):.. 
-00008160: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00008170: 2020 2020 2020 2020 2066 6f6c 6465 7220           folder 
-00008180: 3d20 7365 6c66 2e63 7572 7265 6e74 5f66  = self.current_f
-00008190: 696c 650d 0a20 2020 2020 2020 2020 2020  ile..           
-000081a0: 2069 6620 666f 6c64 6572 2069 7320 6e6f   if folder is no
-000081b0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-000081c0: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
-000081d0: 7665 6173 2866 6f6c 6465 725b 3a2d 365d  veas(folder[:-6]
-000081e0: 202b 225f 6175 746f 6261 636b 7570 2e73   +"_autobackup.s
-000081f0: 6663 746c 2229 2023 206d 616b 6573 2061  fctl") # makes a
-00008200: 2062 6163 6b75 7020 6669 6c65 0d0a 2020   backup file..  
-00008210: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00008220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008230: 2023 2073 656c 662e 6e6f 7469 6679 2822   # self.notify("
-00008240: 596f 7520 6172 6520 776f 726b 696e 6720  You are working 
-00008250: 6f6e 2061 2062 6c61 6e6b 2070 726f 6a65  on a blank proje
-00008260: 6374 2066 696c 652e 2050 6c65 6173 6520  ct file. Please 
-00008270: 7361 7665 2079 6f75 7220 6368 616e 6765  save your change
-00008280: 7320 736f 6f6e 2e22 2c20 7469 746c 653d  s soon.", title=
-00008290: 2257 6172 6e69 6e67 2229 0d0a 2020 2020  "Warning")..    
-000082a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000082b0: 2e73 7461 7475 7342 6172 2829 2e73 686f  .statusBar().sho
-000082c0: 774d 6573 7361 6765 2822 5741 524e 494e  wMessage("WARNIN
-000082d0: 473a 2059 6f75 2061 7265 2077 6f72 6b69  G: You are worki
-000082e0: 6e67 206f 6e20 6120 626c 616e 6b20 7072  ng on a blank pr
-000082f0: 6f6a 6563 7420 6669 6c65 2e20 506c 6561  oject file. Plea
-00008300: 7365 2073 6176 6520 796f 7572 2063 6861  se save your cha
-00008310: 6e67 6573 2073 6f6f 6e2e 2229 0d0a 2020  nges soon.")..  
-00008320: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00008330: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00008340: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-00008350: 6f74 6966 7928 7374 7228 6529 2c20 7469  otify(str(e), ti
-00008360: 746c 653d 2245 7272 6f72 206f 6e20 4175  tle="Error on Au
-00008370: 746f 4261 636b 7570 2229 0d0a 0d0a 2020  toBackup")....  
-00008380: 2020 6465 6620 6564 6974 5f73 6574 7469    def edit_setti
-00008390: 6e67 7328 7365 6c66 293a 0d0a 2020 2020  ngs(self):..    
-000083a0: 2020 2020 6966 2073 656c 662e 7365 7474      if self.sett
-000083b0: 696e 6773 5f73 7472 203d 3d22 2220 6f72  ings_str =="" or
-000083c0: 2073 656c 662e 7365 7474 696e 6773 5f73   self.settings_s
-000083d0: 7472 2069 7320 4e6f 6e65 3a0d 0a20 2020  tr is None:..   
-000083e0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-000083f0: 7469 6679 286d 6573 7361 6765 3d22 536f  tify(message="So
-00008400: 6d65 7468 696e 6720 7765 6e74 2077 726f  mething went wro
-00008410: 6e67 2e20 4861 7665 2079 6f75 2062 7569  ng. Have you bui
-00008420: 6c74 2074 6865 2070 726f 6a65 6374 3f22  lt the project?"
-00008430: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
-00008440: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00008450: 7572 6e0d 0a0d 0a20 2020 2020 2020 2023  urn....        #
-00008460: 206d 795f 6564 6974 203d 2053 6574 7469   my_edit = Setti
-00008470: 6e67 7345 6469 746f 7228 7061 7265 6e74  ngsEditor(parent
-00008480: 3d73 656c 662c 2074 6578 743d 7365 6c66  =self, text=self
-00008490: 2e73 6574 7469 6e67 735f 7374 7229 0d0a  .settings_str)..
-000084a0: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
-000084b0: 7469 6e67 735f 6564 6974 6f72 2e73 686f  tings_editor.sho
-000084c0: 7728 290d 0a0d 0a20 2020 2064 6566 2065  w()....    def e
-000084d0: 6469 745f 6772 6170 685f 6167 656e 7428  dit_graph_agent(
-000084e0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000084f0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-00008500: 6564 6974 5f61 6765 6e74 2829 0d0a 0d0a  edit_agent()....
-00008510: 2020 2020 6465 6620 6368 616e 6765 5f67      def change_g
-00008520: 7261 7068 6d6f 6465 5f73 656c 6563 7428  raphmode_select(
-00008530: 7365 6c66 293a 0d0a 0d0a 2020 2020 2020  self):....      
-00008540: 2020 7365 6c66 2e64 7261 7763 616e 7661    self.drawcanva
-00008550: 732e 6d6f 6465 203d 2022 7365 6c65 6374  s.mode = "select
-00008560: 220d 0a0d 0a20 2020 2064 6566 2063 6861  "....    def cha
-00008570: 6e67 655f 6772 6170 686d 6f64 655f 6472  nge_graphmode_dr
-00008580: 6167 2873 656c 6629 3a0d 0a0d 0a20 2020  ag(self):....   
-00008590: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-000085a0: 6e76 6173 2e6d 6f64 6520 3d20 2264 7261  nvas.mode = "dra
-000085b0: 6722 0d0a 0d0a 2020 2020 6465 6620 6172  g"....    def ar
-000085c0: 7261 6e67 655f 7072 6574 7479 2873 656c  range_pretty(sel
-000085d0: 6629 3a0d 0a20 2020 2020 2020 2073 656c  f):..        sel
-000085e0: 662e 7570 6461 7465 5f74 6162 6c65 2829  f.update_table()
-000085f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-00008600: 7261 7763 616e 7661 732e 6172 7261 6e67  rawcanvas.arrang
-00008610: 655f 7072 6574 7479 2829 0d0a 0d0a 0d0a  e_pretty()......
-00008620: 2020 2020 6465 6620 7570 6461 7465 5f67      def update_g
-00008630: 7261 7068 6963 735f 6461 7461 2873 656c  raphics_data(sel
-00008640: 662c 2062 6f78 2c20 636f 6e6e 293a 0d0a  f, box, conn):..
-00008650: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-00008660: 0d0a 2020 2020 6465 6620 7377 6974 6368  ..    def switch
-00008670: 5f74 6865 6d65 2873 656c 6629 3a0d 0a0d  _theme(self):...
-00008680: 0a0d 0a20 2020 2020 2020 2023 2066 726f  ...        # fro
-00008690: 6d20 7174 5f6d 6174 6572 6961 6c20 696d  m qt_material im
-000086a0: 706f 7274 2061 7070 6c79 5f73 7479 6c65  port apply_style
-000086b0: 7368 6565 740d 0a0d 0a20 2020 2020 2020  sheet....       
-000086c0: 2069 6620 7365 6c66 2e74 6865 6d65 5f6d   if self.theme_m
-000086d0: 616e 6167 6572 2e74 6865 6d65 203d 3d20  anager.theme == 
-000086e0: 2264 6172 6b22 3a0d 0a20 2020 2020 2020  "dark":..       
-000086f0: 2020 2020 2073 656c 662e 7468 656d 655f       self.theme_
-00008700: 6d61 6e61 6765 722e 7468 656d 6520 3d20  manager.theme = 
-00008710: 2262 7269 6768 7422 0d0a 0d0a 2020 2020  "bright"....    
-00008720: 2020 2020 656c 6966 2073 656c 662e 7468      elif self.th
-00008730: 656d 655f 6d61 6e61 6765 722e 7468 656d  eme_manager.them
-00008740: 6520 3d3d 2022 6272 6967 6874 223a 0d0a  e == "bright":..
-00008750: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00008760: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
-00008770: 6865 6d65 203d 2022 6461 726b 220d 0a0d  heme = "dark"...
-00008780: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00008790: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
-000087a0: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
-000087b0: 2e67 6574 5f73 7479 6c65 7368 6565 7428  .get_stylesheet(
-000087c0: 226d 6169 6e22 2929 0d0a 0d0a 2020 2020  "main"))....    
-000087d0: 2020 2020 7365 6c66 2e74 6865 6d65 5f6d      self.theme_m
-000087e0: 616e 6167 6572 2e72 6573 746f 7265 5f62  anager.restore_b
-000087f0: 7574 746f 6e73 2829 0d0a 0d0a 2020 2020  uttons()....    
-00008800: 2020 2020 7365 6c66 2e74 6162 5769 6467      self.tabWidg
-00008810: 6574 5f32 2e73 6574 5374 796c 6553 6865  et_2.setStyleShe
-00008820: 6574 2873 656c 662e 7468 656d 655f 6d61  et(self.theme_ma
-00008830: 6e61 6765 722e 6765 745f 6261 636b 6772  nager.get_backgr
-00008840: 6f75 6e64 5f73 7479 6c65 2829 290d 0a20  ound_style()).. 
-00008850: 2020 2020 2020 2073 656c 662e 646f 636b         self.dock
-00008860: 5769 6467 6574 5f33 2e73 6574 5374 796c  Widget_3.setStyl
-00008870: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
-00008880: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
-00008890: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
-000088a0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000088b0: 646f 636b 5769 6467 6574 5f34 2e73 6574  dockWidget_4.set
-000088c0: 5374 796c 6553 6865 6574 2873 656c 662e  StyleSheet(self.
-000088d0: 7468 656d 655f 6d61 6e61 6765 722e 6765  theme_manager.ge
-000088e0: 745f 6261 636b 6772 6f75 6e64 5f73 7479  t_background_sty
-000088f0: 6c65 2829 290d 0a20 2020 2020 2020 2073  le())..        s
-00008900: 656c 662e 646f 636b 5769 6467 6574 5f35  elf.dockWidget_5
-00008910: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-00008920: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00008930: 722e 6765 745f 6261 636b 6772 6f75 6e64  r.get_background
-00008940: 5f73 7479 6c65 2829 290d 0a0d 0a20 2020  _style())....   
-00008950: 2020 2020 2073 656c 662e 7769 6467 6574       self.widget
-00008960: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-00008970: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00008980: 722e 6765 745f 6261 636b 6772 6f75 6e64  r.get_background
-00008990: 5f73 7479 6c65 2829 290d 0a0d 0a20 2020  _style())....   
-000089a0: 2020 2020 2073 656c 662e 646f 636b 5769       self.dockWi
-000089b0: 6467 6574 5f37 2e73 6574 5374 796c 6553  dget_7.setStyleS
-000089c0: 6865 6574 2873 656c 662e 7468 656d 655f  heet(self.theme_
-000089d0: 6d61 6e61 6765 722e 6765 745f 6261 636b  manager.get_back
-000089e0: 6772 6f75 6e64 5f73 7479 6c65 2829 290d  ground_style()).
-000089f0: 0a20 2020 2020 2020 2073 656c 662e 7461  .        self.ta
-00008a00: 6257 6964 6765 742e 7365 7453 7479 6c65  bWidget.setStyle
-00008a10: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
-00008a20: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
-00008a30: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
-00008a40: 0d0a 0d0a 2020 2020 2020 2020 666f 7220  ....        for 
-00008a50: 6365 2069 6e20 436f 6465 4564 6974 6f72  ce in CodeEditor
-00008a60: 2e69 6e73 7461 6e63 6573 2e76 616c 7565  .instances.value
-00008a70: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
-00008a80: 2020 6365 2e73 6574 5374 796c 6553 6865    ce.setStyleShe
-00008a90: 6574 2873 656c 662e 7468 656d 655f 6d61  et(self.theme_ma
-00008aa0: 6e61 6765 722e 6765 745f 6261 636b 6772  nager.get_backgr
-00008ab0: 6f75 6e64 5f73 7479 6c65 2829 290d 0a0d  ound_style())...
-00008ac0: 0a20 2020 2020 2020 2073 656c 662e 6167  .        self.ag
-00008ad0: 656e 7431 4564 6974 2e73 6574 5374 796c  ent1Edit.setStyl
-00008ae0: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
-00008af0: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
-00008b00: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
-00008b10: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00008b20: 6167 656e 7432 4564 6974 2e73 6574 5374  agent2Edit.setSt
-00008b30: 796c 6553 6865 6574 2873 656c 662e 7468  yleSheet(self.th
-00008b40: 656d 655f 6d61 6e61 6765 722e 6765 745f  eme_manager.get_
-00008b50: 6261 636b 6772 6f75 6e64 5f73 7479 6c65  background_style
-00008b60: 2829 290d 0a0d 0a20 2020 2020 2020 2074  ())....        t
-00008b70: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
-00008b80: 2020 2069 6620 4d61 696e 4c6f 6f70 4564     if MainLoopEd
-00008b90: 6974 6f72 2e69 6e73 7461 6e63 6520 6973  itor.instance is
-00008ba0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00008bb0: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-00008bc0: 203d 204d 6169 6e4c 6f6f 7045 6469 746f   = MainLoopEdito
-00008bd0: 722e 696e 7374 616e 6365 0d0a 2020 2020  r.instance..    
-00008be0: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-00008bf0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-00008c00: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00008c10: 722e 6765 745f 6261 636b 6772 6f75 6e64  r.get_background
-00008c20: 5f73 7479 6c65 2829 290d 0a20 2020 2020  _style())..     
-00008c30: 2020 2020 2020 2020 2020 2069 6e73 742e             inst.
-00008c40: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
-00008c50: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
-00008c60: 2e67 6574 5f73 7479 6c65 7368 6565 7428  .get_stylesheet(
-00008c70: 226d 6169 6e22 2929 0d0a 0d0a 2020 2020  "main"))....    
-00008c80: 2020 2020 6578 6365 7074 3a0d 0a0d 0a20      except:.... 
-00008c90: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-00008ca0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00008cb0: 7570 6461 7465 5f74 6162 6c65 2829 0d0a  update_table()..
-00008cc0: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
-00008cd0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-00008ce0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-00008cf0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00008d00: 722e 6765 745f 7461 626c 655f 7374 796c  r.get_table_styl
-00008d10: 6528 2929 0d0a 0d0a 2020 2020 6465 6620  e())....    def 
-00008d20: 6173 6b5f 7175 6573 7469 6f6e 2873 656c  ask_question(sel
-00008d30: 662c 7469 746c 652c 6d65 7373 6167 6529  f,title,message)
-00008d40: 3a0d 0a20 2020 2020 2020 2023 2061 736b  :..        # ask
-00008d50: 2061 2071 7565 7374 696f 6e20 7965 7320   a question yes 
-00008d60: 2f20 6e6f 0d0a 2020 2020 2020 2020 6d73  / no..        ms
-00008d70: 6720 3d20 514d 6573 7361 6765 426f 7828  g = QMessageBox(
-00008d80: 514d 6573 7361 6765 426f 782e 5175 6573  QMessageBox.Ques
-00008d90: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
-00008da0: 2020 2020 2020 2074 6974 6c65 2c20 6d65         title, me
-00008db0: 7373 6167 652c 6275 7474 6f6e 733d 514d  ssage,buttons=QM
-00008dc0: 6573 7361 6765 426f 782e 5965 7320 7c20  essageBox.Yes | 
-00008dd0: 514d 6573 7361 6765 426f 782e 4e6f 2c0d  QMessageBox.No,.
-00008de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008df0: 2070 6172 656e 743d 7365 6c66 290d 0a20   parent=self).. 
-00008e00: 2020 2020 2020 206d 7367 2e73 6574 5769         msg.setWi
-00008e10: 6e64 6f77 5469 746c 6528 7469 746c 6529  ndowTitle(title)
-00008e20: 0d0a 2020 2020 2020 2020 6d73 672e 7365  ..        msg.se
-00008e30: 7453 7479 6c65 5368 6565 7428 7365 6c66  tStyleSheet(self
-00008e40: 2e74 6865 6d65 5f6d 616e 6167 6572 2e67  .theme_manager.g
-00008e50: 6574 5f6e 6f74 6966 6963 6174 696f 6e5f  et_notification_
-00008e60: 7374 796c 6528 2929 0d0a 2020 2020 2020  style())..      
-00008e70: 2020 6d73 672e 6578 6563 5f28 290d 0a20    msg.exec_().. 
-00008e80: 2020 2020 2020 2072 6570 6c79 203d 206d         reply = m
-00008e90: 7367 2e73 7461 6e64 6172 6442 7574 746f  sg.standardButto
-00008ea0: 6e28 6d73 672e 636c 6963 6b65 6442 7574  n(msg.clickedBut
-00008eb0: 746f 6e28 2929 0d0a 0d0a 2020 2020 2020  ton())....      
-00008ec0: 2020 6966 2072 6570 6c79 203d 3d20 6d73    if reply == ms
-00008ed0: 672e 5965 733a 0d0a 2020 2020 2020 2020  g.Yes:..        
-00008ee0: 2020 2020 7265 7475 726e 2054 7275 650d      return True.
-00008ef0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00008f00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00008f10: 726e 2046 616c 7365 0d0a 0d0a 2020 2020  rn False....    
-00008f20: 6465 6620 6e6f 7469 6679 2873 656c 662c  def notify(self,
-00008f30: 6d65 7373 6167 652c 7469 746c 6529 3a0d  message,title):.
-00008f40: 0a20 2020 2020 2020 2023 6d73 6720 3d20  .        #msg = 
-00008f50: 514d 6573 7361 6765 426f 7828 7365 6c66  QMessageBox(self
-00008f60: 290d 0a20 2020 2020 2020 206d 7367 203d  )..        msg =
-00008f70: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
-00008f80: 6629 0d0a 2020 2020 2020 2020 6d73 672e  f)..        msg.
-00008f90: 7365 7457 696e 646f 7754 6974 6c65 2874  setWindowTitle(t
-00008fa0: 6974 6c65 290d 0a20 2020 2020 2020 206d  itle)..        m
-00008fb0: 7367 2e73 6574 5465 7874 286d 6573 7361  sg.setText(messa
-00008fc0: 6765 290d 0a20 2020 2020 2020 2023 6d73  ge)..        #ms
-00008fd0: 672e 7365 7453 7479 6c65 5368 6565 7428  g.setStyleSheet(
-00008fe0: 7365 6c66 2e73 7479 6c65 7368 6565 7429  self.stylesheet)
-00008ff0: 0d0a 2020 2020 2020 2020 2320 6765 7420  ..        # get 
-00009000: 6261 636b 6772 6f75 6e64 2063 6f6c 6f72  background color
-00009010: 2066 726f 6d20 7468 656d 6520 6d61 6e61   from theme mana
-00009020: 6765 720d 0a20 2020 2020 2020 2023 2067  ger..        # g
-00009030: 6574 2066 6f72 6567 726f 756e 6420 636f  et foreground co
-00009040: 6c6f 7220 6672 6f6d 2074 6865 6d65 206d  lor from theme m
-00009050: 616e 6167 6572 0d0a 2020 2020 2020 2020  anager..        
-00009060: 7374 796c 6520 3d20 7365 6c66 2e74 6865  style = self.the
-00009070: 6d65 5f6d 616e 6167 6572 2e67 6574 5f6e  me_manager.get_n
-00009080: 6f74 6966 6963 6174 696f 6e5f 7374 796c  otification_styl
-00009090: 6528 290d 0a20 2020 2020 2020 206d 7367  e()..        msg
-000090a0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-000090b0: 7479 6c65 290d 0a20 2020 2020 2020 206d  tyle)..        m
-000090c0: 7367 2e6f 7065 6e28 290d 0a0d 0a0d 0a20  sg.open()...... 
-000090d0: 2020 2064 6566 2063 6c65 616e 7570 5f74     def cleanup_t
-000090e0: 7261 6e73 6163 7469 6f6e 5f64 6174 6128  ransaction_data(
-000090f0: 7365 6c66 2c64 6174 6129 3a0d 0a20 2020  self,data):..   
-00009100: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00009110: 2020 636c 6561 6e73 2075 7020 7472 616e    cleans up tran
-00009120: 7361 6374 696f 6e20 6461 7461 2066 726f  saction data fro
-00009130: 6d20 6f6c 6420 6669 6c65 2076 6572 7369  m old file versi
-00009140: 6f6e 730d 0a20 2020 2020 2020 2022 2222  ons..        """
-00009150: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00009160: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00009170: 7428 226f 6c64 5f64 6174 6122 2c64 6174  t("old_data",dat
-00009180: 6129 0d0a 2020 2020 2020 2020 2020 2020  a)..            
-00009190: 2320 6461 7461 203d 2064 6963 7428 6461  # data = dict(da
-000091a0: 7461 290d 0a20 2020 2020 2020 2020 2020  ta)..           
-000091b0: 206e 6577 5f64 6174 6120 3d20 7b22 6167   new_data = {"ag
-000091c0: 656e 7473 223a 7b7d 2c22 7472 616e 7361  ents":{},"transa
-000091d0: 6374 696f 6e73 223a 5b5d 2c22 626f 785f  ctions":[],"box_
-000091e0: 706f 7369 7469 6f6e 7322 3a7b 7d2c 2022  positions":{}, "
-000091f0: 6c61 6265 6c5f 706f 7369 7469 6f6e 7322  label_positions"
-00009200: 3a7b 7d2c 2274 6865 6d65 223a 4e6f 6e65  :{},"theme":None
-00009210: 7d20 2320 6461 7461 2e63 6f70 7928 290d  } # data.copy().
-00009220: 0a20 2020 2020 2020 2020 2020 2023 206e  .            # n
-00009230: 6577 5f64 6174 615b 2274 7261 6e73 6163  ew_data["transac
-00009240: 7469 6f6e 7322 5d20 3d20 6461 7461 5b22  tions"] = data["
-00009250: 7472 616e 7361 6374 696f 6e73 225d 2e63  transactions"].c
-00009260: 6f70 7928 290d 0a0d 0a20 2020 2020 2020  opy()....       
-00009270: 2020 2020 2066 6f72 206b 2c76 2069 6e20       for k,v in 
-00009280: 6461 7461 2e69 7465 6d73 2829 3a0d 0a0d  data.items():...
-00009290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000092a0: 2069 6620 6b20 3d3d 2022 7468 656d 6522   if k == "theme"
-000092b0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000092c0: 2020 2020 2020 206e 6577 5f64 6174 615b         new_data[
-000092d0: 2274 6865 6d65 225d 203d 2064 6174 615b  "theme"] = data[
-000092e0: 6b5d 2023 207b 2267 6c6f 6261 6c74 6865  k] # {"globalthe
-000092f0: 6d65 223a 2062 7269 6768 742f 6461 726b  me": bright/dark
-00009300: 2c20 2263 6f6c 6f72 7322 3a20 636f 6c6f  , "colors": colo
-00009310: 7273 7d20 2320 6c6f 6164 2074 6865 2063  rs} # load the c
-00009320: 6f6c 6f72 2074 6865 6d65 0d0a 0d0a 2020  olor theme....  
-00009330: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00009340: 206b 203d 3d20 2261 6765 6e74 7322 3a0d   k == "agents":.
-00009350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009360: 2020 2020 2066 6f72 206b 322c 7632 2069       for k2,v2 i
-00009370: 6e20 6461 7461 5b6b 5d2e 6974 656d 7328  n data[k].items(
-00009380: 293a 0d0a 0d0a 2020 2020 2020 2020 2020  ):....          
-00009390: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000093a0: 312e 2072 656e 616d 6520 6167 656e 740d  1. rename agent.
-000093b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000093c0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-000093d0: 5245 4e41 4d45 2041 4745 4e54 532e 2e2e  RENAME AGENTS...
-000093e0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-000093f0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-00009400: 636f 6465 5f6c 696e 6573 203d 205b 5d0d  code_lines = [].
-00009410: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00009420: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
-00009430: 696e 6520 696e 2076 322e 7370 6c69 7428  ine in v2.split(
-00009440: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-00009450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009460: 2020 2020 6966 2022 4147 454e 5422 2069      if "AGENT" i
-00009470: 6e20 6c69 6e65 3a20 2320 2061 6e64 206c  n line: #  and l
-00009480: 656e 286c 696e 6529 203e 3d20 393a 0d0a  en(line) >= 9:..
+00007520: 2069 6620 6f76 6572 7772 6974 6520 616e   if overwrite an
+00007530: 6420 7365 6c66 2e6d 6169 6e6c 6f6f 705f  d self.mainloop_
+00007540: 7374 7220 213d 2022 223a 0d0a 2020 2020  str != "":..    
+00007550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007560: 2020 2020 7769 7468 206f 7065 6e28 666f      with open(fo
+00007570: 6c64 6572 202b 2022 2f70 7974 686f 6e5f  lder + "/python_
+00007580: 636f 6465 2f6d 6169 6e6c 6f6f 705f 6261  code/mainloop_ba
+00007590: 636b 7570 2e70 7922 2c22 7722 2920 6173  ckup.py","w") as
+000075a0: 2062 6163 6b75 7066 696c 653a 0d0a 2020   backupfile:..  
+000075b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000075c0: 2020 2020 2020 2377 6974 6820 6f70 656e        #with open
+000075d0: 2866 6f6c 6465 7220 2b20 222e 2f6d 6169  (folder + "./mai
+000075e0: 6e6c 6f6f 705f 6261 636b 7570 2e70 7922  nloop_backup.py"
+000075f0: 2c22 7722 2920 6173 2062 6163 6b75 7066  ,"w") as backupf
+00007600: 696c 653a 0d0a 2020 2020 2020 2020 2020  ile:..          
+00007610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007620: 2020 6261 636b 7570 6669 6c65 2e77 7269    backupfile.wri
+00007630: 7465 2873 656c 662e 6d61 696e 6c6f 6f70  te(self.mainloop
+00007640: 5f73 7472 2e72 6570 6c61 6365 2822 5c74  _str.replace("\t
+00007650: 222c 2220 2020 2022 2929 0d0a 0d0a 2020  ","    "))....  
+00007660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007670: 2020 7369 6d75 5f73 7472 203d 2022 2222    simu_str = """
+00007680: 0d0a 5c22 5c22 5c22 0d0a 5468 6973 2074  ..\"\"\"..This t
+00007690: 6865 206d 6169 6e20 4142 4d20 5369 6d75  he main ABM Simu
+000076a0: 6c61 7469 6f6e 2066 696c 650d 0a43 7265  lation file..Cre
+000076b0: 7461 6564 2077 6974 6820 4d41 4d42 4120  taed with MAMBA 
+000076c0: 4755 490d 0a0d 0a40 6175 7468 6f72 3a20  GUI....@author: 
+000076d0: 3c59 6f75 7220 6e61 6d65 3e0d 0a40 6461  <Your name>..@da
+000076e0: 7465 3a20 3c59 6f75 7220 6461 7465 3e0d  te: <Your date>.
+000076f0: 0a5c 225c 225c 220d 0a0d 0a66 726f 6d20  .\"\"\"....from 
+00007700: 7366 6374 6f6f 6c73 2069 6d70 6f72 7420  sfctools import 
+00007710: 4167 656e 742c 2057 6f72 6c64 2c20 5365  Agent, World, Se
+00007720: 7474 696e 6773 2c20 436c 6f63 6b2c 2046  ttings, Clock, F
+00007730: 6c6f 774d 6174 7269 780d 0a22 2222 0d0a  lowMatrix.."""..
+00007740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007750: 2020 2020 666f 7220 6167 656e 7420 696e      for agent in
+00007760: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00007770: 2e63 6f64 655f 6461 7461 2e6b 6579 7328  .code_data.keys(
+00007780: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00007790: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
+000077a0: 5f73 7472 202b 3d20 2266 726f 6d20 7079  _str += "from py
+000077b0: 7468 6f6e 5f63 6f64 652e 2573 2069 6d70  thon_code.%s imp
+000077c0: 6f72 7420 2573 5c6e 2220 2520 2861 6765  ort %s\n" % (age
+000077d0: 6e74 2e6c 6f77 6572 2829 2c61 6765 6e74  nt.lower(),agent
+000077e0: 2e63 6170 6974 616c 697a 6528 2929 0d0a  .capitalize())..
+000077f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007800: 2020 2020 2020 7369 6d75 5f73 7472 202b        simu_str +
+00007810: 3d20 2222 220d 0a0d 0a64 6566 2069 7465  = """....def ite
+00007820: 7228 293a 0d0a 2020 2020 5c22 5c22 5c22  r():..    \"\"\"
+00007830: 0d0a 2020 2020 7468 6973 2069 7320 6f6e  ..    this is on
+00007840: 6520 6974 6572 6174 696f 6e0d 0a20 2020  e iteration..   
+00007850: 205c 225c 225c 220d 0a0d 0a20 2020 2023   \"\"\"....    #
+00007860: 2054 4f44 4f20 6d6f 6469 6679 2069 7465   TODO modify ite
+00007870: 7261 7469 6f6e 2068 6572 650d 0a22 2222  ration here.."""
+00007880: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00007890: 2020 2020 2020 2020 666f 7220 6167 656e          for agen
+000078a0: 7420 696e 2073 656c 662e 6472 6177 6361  t in self.drawca
+000078b0: 6e76 6173 2e63 6f64 655f 6461 7461 2e6b  nvas.code_data.k
+000078c0: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
+000078d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000078e0: 6120 3d20 6167 656e 742e 6361 7069 7461  a = agent.capita
+000078f0: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
+00007900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007910: 7369 6d75 5f73 7472 202b 3d20 225c 7466  simu_str += "\tf
+00007920: 6f72 2061 2069 6e20 576f 726c 6428 292e  or a in World().
+00007930: 6765 745f 6167 656e 7473 5f6f 665f 7479  get_agents_of_ty
+00007940: 7065 2827 2573 2729 3a5c 6e5c 745c 7470  pe('%s'):\n\t\tp
+00007950: 7269 6e74 2827 446f 2073 6f6d 6574 6869  rint('Do somethi
+00007960: 6e67 2077 6974 6827 202b 2073 7472 2861  ng with' + str(a
+00007970: 2929 5c6e 5c6e 2220 2520 2861 290d 0a20  ))\n\n" % (a).. 
+00007980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007990: 2020 2073 696d 755f 7374 7220 2b3d 2022     simu_str += "
+000079a0: 2222 5c6e 0d0a 6465 6620 7275 6e28 293a  ""\n..def run():
+000079b0: 0d0a 2020 2020 5c22 5c22 5c22 0d0a 2020  ..    \"\"\"..  
+000079c0: 2020 7468 6973 2069 7320 7468 6520 6d61    this is the ma
+000079d0: 696e 2073 696d 756c 6174 696f 6e20 6c6f  in simulation lo
+000079e0: 6f70 0d0a 2020 2020 5c22 5c22 5c22 0d0a  op..    \"\"\"..
+000079f0: 2222 220d 0a0d 0a0d 0a20 2020 2020 2020  """......       
+00007a00: 2020 2020 2020 2020 2020 2020 2073 696d               sim
+00007a10: 755f 7374 7220 2b3d 2022 2222 5c6e 0d0a  u_str += """\n..
+00007a20: 0d0a 2020 2020 5365 7474 696e 6773 2829  ..    Settings()
+00007a30: 2e72 6561 6428 5c22 7365 7474 696e 6773  .read(\"settings
+00007a40: 2e79 6d6c 5c22 2920 2320 7265 6164 2073  .yml\") # read s
+00007a50: 6574 7469 6e67 7320 6669 6c65 0d0a 0d0a  ettings file....
+00007a60: 2020 2020 5c22 5c22 5c22 0d0a 2020 2020      \"\"\"..    
+00007a70: 5369 6d75 6c61 7469 6f6e 2070 6172 616d  Simulation param
+00007a80: 6574 6572 730d 0a20 2020 205c 225c 225c  eters..    \"\"\
+00007a90: 220d 0a0d 0a20 2020 2023 206e 756d 6265  "....    # numbe
+00007aa0: 7220 6f66 2061 6765 6e74 7320 746f 2062  r of agents to b
+00007ab0: 6520 6372 6561 7465 640d 0a22 2222 0d0a  e created.."""..
+00007ac0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007ad0: 2020 2020 2020 666f 7220 6167 656e 7420        for agent 
+00007ae0: 696e 2073 656c 662e 6472 6177 6361 6e76  in self.drawcanv
+00007af0: 6173 2e63 6f64 655f 6461 7461 2e6b 6579  as.code_data.key
+00007b00: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+00007b10: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00007b20: 6d75 5f73 7472 202b 3d20 225c 744e 5f25  mu_str += "\tN_%
+00007b30: 7320 3d20 315c 6e22 2025 2061 6765 6e74  s = 1\n" % agent
+00007b40: 2e63 6170 6974 616c 697a 6528 290d 0a20  .capitalize().. 
+00007b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b60: 2020 2073 696d 755f 7374 7220 2b3d 2022     simu_str += "
+00007b70: 2222 0d0a 2020 2020 2320 544f 444f 5e20  ""..    # TODO^ 
+00007b80: 7365 7420 7468 6520 636f 7272 6563 7420  set the correct 
+00007b90: 7661 6c75 650d 0a0d 0a20 2020 2023 206e  value....    # n
+00007ba0: 756d 6265 7220 6f66 2073 696d 756c 6174  umber of simulat
+00007bb0: 696f 6e20 7374 6570 730d 0a20 2020 2054  ion steps..    T
+00007bc0: 203d 2031 3030 0d0a 0d0a 2020 2020 2320   = 100....    # 
+00007bd0: 544f 444f 5e20 7365 7420 7468 6520 636f  TODO^ set the co
+00007be0: 7272 6563 7420 7661 6c75 6573 0d0a 0d0a  rrect values....
+00007bf0: 2020 2020 2320 6372 6561 7465 2041 6765      # create Age
+00007c00: 6e74 733a 0d0a 2222 220d 0a20 2020 2020  nts:.."""..     
+00007c10: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00007c20: 6f72 2061 6765 6e74 2069 6e20 7365 6c66  or agent in self
+00007c30: 2e64 7261 7763 616e 7661 732e 636f 6465  .drawcanvas.code
+00007c40: 5f64 6174 612e 6b65 7973 2829 3a0d 0a20  _data.keys():.. 
+00007c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c60: 2020 2020 2020 2061 203d 2061 6765 6e74         a = agent
+00007c70: 2e63 6170 6974 616c 697a 6528 290d 0a20  .capitalize().. 
+00007c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c90: 2020 2020 2020 2073 696d 755f 7374 7220         simu_str 
+00007ca0: 2b3d 2022 5c74 5b25 7328 2920 666f 7220  += "\t[%s() for 
+00007cb0: 6920 696e 2072 616e 6765 284e 5f25 7329  i in range(N_%s)
+00007cc0: 5d5c 6e22 2025 2028 612c 6129 0d0a 0d0a  ]\n" % (a,a)....
+00007cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007ce0: 2020 2020 7369 6d75 5f73 7472 202b 3d20      simu_str += 
+00007cf0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+00007d00: 2020 2020 2020 2020 2020 7369 6d75 5f73            simu_s
+00007d10: 7472 202b 3d20 225c 7423 2069 6e74 6572  tr += "\t# inter
+00007d20: 2d6c 696e 6b20 6167 656e 7473 205c 6e22  -link agents \n"
+00007d30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00007d40: 2020 2020 2020 2020 7369 6d75 5f73 7472          simu_str
+00007d50: 202b 3d20 225c 7457 6f72 6c64 2829 2e6c   += "\tWorld().l
+00007d60: 696e 6b28 295c 6e5c 6e22 0d0a 0d0a 2020  ink()\n\n"....  
+00007d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d80: 2020 2320 666f 7220 6167 656e 7420 696e    # for agent in
+00007d90: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00007da0: 2e63 6f64 655f 6461 7461 2e6b 6579 7328  .code_data.keys(
+00007db0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00007dc0: 2020 2020 2020 2020 2320 2020 2061 203d          #    a =
+00007dd0: 2061 6765 6e74 2e63 6170 6974 616c 697a   agent.capitaliz
+00007de0: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+00007df0: 2020 2020 2020 2020 2023 2020 2020 7369           #    si
+00007e00: 6d75 5f73 7472 202b 3d20 225c 745b 692e  mu_str += "\t[i.
+00007e10: 6c69 6e6b 2829 2066 6f72 2069 2069 6e20  link() for i in 
+00007e20: 2573 5f70 696c 655d 5c6e 2220 2520 2861  %s_pile]\n" % (a
+00007e30: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00007e40: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
+00007e50: 7220 2b3d 2022 2222 0d0a 2020 2020 666f  r += """..    fo
+00007e60: 7220 6920 696e 2072 616e 6765 2854 293a  r i in range(T):
+00007e70: 0d0a 2020 2020 2020 2020 6974 6572 2829  ..        iter()
+00007e80: 0d0a 0d0a 2020 2020 2020 2020 2320 544f  ....        # TO
+00007e90: 444f 2077 7269 7465 206f 7574 7075 7473  DO write outputs
+00007ea0: 2068 6572 6520 2e2e 2e0d 0a0d 0a20 2020   here .......   
+00007eb0: 2020 2020 2043 6c6f 636b 2829 2e74 6963       Clock().tic
+00007ec0: 6b28 290d 0a0d 0a20 2020 2070 7269 6e74  k()....    print
+00007ed0: 2846 6c6f 774d 6174 7269 7828 292e 746f  (FlowMatrix().to
+00007ee0: 5f73 7472 696e 6728 2929 0d0a 2222 220d  _string())..""".
+00007ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007f00: 2020 2020 2073 656c 662e 6d61 696e 6c6f       self.mainlo
+00007f10: 6f70 5f73 7472 203d 2073 696d 755f 7374  op_str = simu_st
+00007f20: 720d 0a0d 0a20 2020 2020 2020 2020 2020  r....           
+00007f30: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00007f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007f50: 7369 6d75 5f73 7472 203d 2073 656c 662e  simu_str = self.
+00007f60: 6d61 696e 6c6f 6f70 5f73 7472 0d0a 0d0a  mainloop_str....
+00007f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007f80: 7072 696e 7428 2253 494d 5520 5354 5222  print("SIMU STR"
+00007f90: 2c20 7369 6d75 5f73 7472 290d 0a20 2020  , simu_str)..   
+00007fa0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00007fb0: 652e 7772 6974 6528 7369 6d75 5f73 7472  e.write(simu_str
+00007fc0: 2e72 6570 6c61 6365 2822 5c74 222c 2220  .replace("\t"," 
+00007fd0: 2020 2022 2929 0d0a 0d0a 2020 2020 2020     "))....      
+00007fe0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00007ff0: 2073 696c 656e 743a 0d0a 2020 2020 2020   silent:..      
+00008000: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00008010: 6c66 2e6e 6f74 6966 7928 2250 726f 6a65  lf.notify("Proje
+00008020: 6374 2066 696c 6573 2062 7569 6c74 2122  ct files built!"
+00008030: 2c74 6974 6c65 3d22 5375 6363 6573 7322  ,title="Success"
+00008040: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00008050: 2020 2020 2073 656c 662e 6765 6e5f 636f       self.gen_co
+00008060: 6465 2829 2023 2067 656e 6572 6174 6520  de() # generate 
+00008070: 7472 616e 7361 6374 696f 6e73 2e70 790d  transactions.py.
+00008080: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+00008090: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+000080a0: 3a0d 0a20 2020 2020 2020 2020 2020 2065  :..            e
+000080b0: 7863 6570 7469 6f6e 5f74 7970 652c 2065  xception_type, e
+000080c0: 7863 6570 7469 6f6e 5f6f 626a 6563 742c  xception_object,
+000080d0: 2065 7863 6570 7469 6f6e 5f74 7261 6365   exception_trace
+000080e0: 6261 636b 203d 2073 7973 2e65 7863 5f69  back = sys.exc_i
+000080f0: 6e66 6f28 290d 0a20 2020 2020 2020 2020  nfo()..         
+00008100: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
+00008110: 436f 756c 6420 6e6f 7420 6275 696c 6420  Could not build 
+00008120: 7072 6f6a 6563 742e 5c6e 2220 2b20 7374  project.\n" + st
+00008130: 7228 6578 6365 7074 696f 6e5f 6f62 6a65  r(exception_obje
+00008140: 6374 2920 2b20 7374 7228 6578 6365 7074  ct) + str(except
+00008150: 696f 6e5f 7472 6163 6562 6163 6b29 2c74  ion_traceback),t
+00008160: 6974 6c65 3d22 4572 726f 7220 6f6e 2050  itle="Error on P
+00008170: 726f 6a65 6374 2042 7569 6c64 2229 0d0a  roject Build")..
+00008180: 0d0a 2020 2020 6465 6620 6175 746f 5f62  ..    def auto_b
+00008190: 6163 6b75 7028 7365 6c66 293a 0d0a 2020  ackup(self):..  
+000081a0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+000081b0: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
+000081c0: 2073 656c 662e 6375 7272 656e 745f 6669   self.current_fi
+000081d0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
+000081e0: 6966 2066 6f6c 6465 7220 6973 206e 6f74  if folder is not
+000081f0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00008200: 2020 2020 2020 2020 7365 6c66 2e73 6176          self.sav
+00008210: 6561 7328 666f 6c64 6572 5b3a 2d36 5d20  eas(folder[:-6] 
+00008220: 2b22 5f61 7574 6f62 6163 6b75 702e 7366  +"_autobackup.sf
+00008230: 6374 6c22 2920 2320 6d61 6b65 7320 6120  ctl") # makes a 
+00008240: 6261 636b 7570 2066 696c 650d 0a20 2020  backup file..   
+00008250: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00008260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008270: 2320 7365 6c66 2e6e 6f74 6966 7928 2259  # self.notify("Y
+00008280: 6f75 2061 7265 2077 6f72 6b69 6e67 206f  ou are working o
+00008290: 6e20 6120 626c 616e 6b20 7072 6f6a 6563  n a blank projec
+000082a0: 7420 6669 6c65 2e20 506c 6561 7365 2073  t file. Please s
+000082b0: 6176 6520 796f 7572 2063 6861 6e67 6573  ave your changes
+000082c0: 2073 6f6f 6e2e 222c 2074 6974 6c65 3d22   soon.", title="
+000082d0: 5761 726e 696e 6722 290d 0a20 2020 2020  Warning")..     
+000082e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000082f0: 7374 6174 7573 4261 7228 292e 7368 6f77  statusBar().show
+00008300: 4d65 7373 6167 6528 2257 4152 4e49 4e47  Message("WARNING
+00008310: 3a20 596f 7520 6172 6520 776f 726b 696e  : You are workin
+00008320: 6720 6f6e 2061 2062 6c61 6e6b 2070 726f  g on a blank pro
+00008330: 6a65 6374 2066 696c 652e 2050 6c65 6173  ject file. Pleas
+00008340: 6520 7361 7665 2079 6f75 7220 6368 616e  e save your chan
+00008350: 6765 7320 736f 6f6e 2e22 290d 0a20 2020  ges soon.")..   
+00008360: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00008370: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+00008380: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+00008390: 7469 6679 2873 7472 2865 292c 2074 6974  tify(str(e), tit
+000083a0: 6c65 3d22 4572 726f 7220 6f6e 2041 7574  le="Error on Aut
+000083b0: 6f42 6163 6b75 7022 290d 0a0d 0a20 2020  oBackup")....   
+000083c0: 2064 6566 2065 6469 745f 7365 7474 696e   def edit_settin
+000083d0: 6773 2873 656c 6629 3a0d 0a20 2020 2020  gs(self):..     
+000083e0: 2020 2069 6620 7365 6c66 2e73 6574 7469     if self.setti
+000083f0: 6e67 735f 7374 7220 3d3d 2222 206f 7220  ngs_str =="" or 
+00008400: 7365 6c66 2e73 6574 7469 6e67 735f 7374  self.settings_st
+00008410: 7220 6973 204e 6f6e 653a 0d0a 2020 2020  r is None:..    
+00008420: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00008430: 6966 7928 6d65 7373 6167 653d 2253 6f6d  ify(message="Som
+00008440: 6574 6869 6e67 2077 656e 7420 7772 6f6e  ething went wron
+00008450: 672e 2048 6176 6520 796f 7520 6275 696c  g. Have you buil
+00008460: 7420 7468 6520 7072 6f6a 6563 743f 222c  t the project?",
+00008470: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+00008480: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00008490: 726e 0d0a 0d0a 2020 2020 2020 2020 2320  rn....        # 
+000084a0: 6d79 5f65 6469 7420 3d20 5365 7474 696e  my_edit = Settin
+000084b0: 6773 4564 6974 6f72 2870 6172 656e 743d  gsEditor(parent=
+000084c0: 7365 6c66 2c20 7465 7874 3d73 656c 662e  self, text=self.
+000084d0: 7365 7474 696e 6773 5f73 7472 290d 0a20  settings_str).. 
+000084e0: 2020 2020 2020 2073 656c 662e 7365 7474         self.sett
+000084f0: 696e 6773 5f65 6469 746f 722e 7368 6f77  ings_editor.show
+00008500: 2829 0d0a 0d0a 2020 2020 6465 6620 6564  ()....    def ed
+00008510: 6974 5f67 7261 7068 5f61 6765 6e74 2873  it_graph_agent(s
+00008520: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+00008530: 656c 662e 6472 6177 6361 6e76 6173 2e65  elf.drawcanvas.e
+00008540: 6469 745f 6167 656e 7428 290d 0a0d 0a20  dit_agent().... 
+00008550: 2020 2064 6566 2063 6861 6e67 655f 6772     def change_gr
+00008560: 6170 686d 6f64 655f 7365 6c65 6374 2873  aphmode_select(s
+00008570: 656c 6629 3a0d 0a0d 0a20 2020 2020 2020  elf):....       
+00008580: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00008590: 2e6d 6f64 6520 3d20 2273 656c 6563 7422  .mode = "select"
+000085a0: 0d0a 0d0a 2020 2020 6465 6620 6368 616e  ....    def chan
+000085b0: 6765 5f67 7261 7068 6d6f 6465 5f64 7261  ge_graphmode_dra
+000085c0: 6728 7365 6c66 293a 0d0a 0d0a 2020 2020  g(self):....    
+000085d0: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
+000085e0: 7661 732e 6d6f 6465 203d 2022 6472 6167  vas.mode = "drag
+000085f0: 220d 0a0d 0a20 2020 2064 6566 2061 7272  "....    def arr
+00008600: 616e 6765 5f70 7265 7474 7928 7365 6c66  ange_pretty(self
+00008610: 293a 0d0a 2020 2020 2020 2020 7365 6c66  ):..        self
+00008620: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
+00008630: 0a20 2020 2020 2020 2073 656c 662e 6472  .        self.dr
+00008640: 6177 6361 6e76 6173 2e61 7272 616e 6765  awcanvas.arrange
+00008650: 5f70 7265 7474 7928 290d 0a0d 0a0d 0a20  _pretty()...... 
+00008660: 2020 2064 6566 2075 7064 6174 655f 6772     def update_gr
+00008670: 6170 6869 6373 5f64 6174 6128 7365 6c66  aphics_data(self
+00008680: 2c20 626f 782c 2063 6f6e 6e29 3a0d 0a20  , box, conn):.. 
+00008690: 2020 2020 2020 2070 6173 730d 0a0d 0a0d         pass.....
+000086a0: 0a20 2020 2064 6566 2073 7769 7463 685f  .    def switch_
+000086b0: 7468 656d 6528 7365 6c66 293a 0d0a 0d0a  theme(self):....
+000086c0: 0d0a 2020 2020 2020 2020 2320 6672 6f6d  ..        # from
+000086d0: 2071 745f 6d61 7465 7269 616c 2069 6d70   qt_material imp
+000086e0: 6f72 7420 6170 706c 795f 7374 796c 6573  ort apply_styles
+000086f0: 6865 6574 0d0a 0d0a 2020 2020 2020 2020  heet....        
+00008700: 6966 2073 656c 662e 7468 656d 655f 6d61  if self.theme_ma
+00008710: 6e61 6765 722e 7468 656d 6520 3d3d 2022  nager.theme == "
+00008720: 6461 726b 223a 0d0a 2020 2020 2020 2020  dark":..        
+00008730: 2020 2020 7365 6c66 2e74 6865 6d65 5f6d      self.theme_m
+00008740: 616e 6167 6572 2e74 6865 6d65 203d 2022  anager.theme = "
+00008750: 6272 6967 6874 220d 0a0d 0a20 2020 2020  bright"....     
+00008760: 2020 2065 6c69 6620 7365 6c66 2e74 6865     elif self.the
+00008770: 6d65 5f6d 616e 6167 6572 2e74 6865 6d65  me_manager.theme
+00008780: 203d 3d20 2262 7269 6768 7422 3a0d 0a20   == "bright":.. 
+00008790: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000087a0: 7468 656d 655f 6d61 6e61 6765 722e 7468  theme_manager.th
+000087b0: 656d 6520 3d20 2264 6172 6b22 0d0a 0d0a  eme = "dark"....
+000087c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+000087d0: 6574 5374 796c 6553 6865 6574 2873 656c  etStyleSheet(sel
+000087e0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+000087f0: 6765 745f 7374 796c 6573 6865 6574 2822  get_stylesheet("
+00008800: 6d61 696e 2229 290d 0a0d 0a20 2020 2020  main"))....     
+00008810: 2020 2073 656c 662e 7468 656d 655f 6d61     self.theme_ma
+00008820: 6e61 6765 722e 7265 7374 6f72 655f 6275  nager.restore_bu
+00008830: 7474 6f6e 7328 290d 0a0d 0a20 2020 2020  ttons()....     
+00008840: 2020 2073 656c 662e 7461 6257 6964 6765     self.tabWidge
+00008850: 745f 322e 7365 7453 7479 6c65 5368 6565  t_2.setStyleShee
+00008860: 7428 7365 6c66 2e74 6865 6d65 5f6d 616e  t(self.theme_man
+00008870: 6167 6572 2e67 6574 5f62 6163 6b67 726f  ager.get_backgro
+00008880: 756e 645f 7374 796c 6528 2929 0d0a 2020  und_style())..  
+00008890: 2020 2020 2020 7365 6c66 2e64 6f63 6b57        self.dockW
+000088a0: 6964 6765 745f 332e 7365 7453 7479 6c65  idget_3.setStyle
+000088b0: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
+000088c0: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
+000088d0: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
+000088e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+000088f0: 6f63 6b57 6964 6765 745f 342e 7365 7453  ockWidget_4.setS
+00008900: 7479 6c65 5368 6565 7428 7365 6c66 2e74  tyleSheet(self.t
+00008910: 6865 6d65 5f6d 616e 6167 6572 2e67 6574  heme_manager.get
+00008920: 5f62 6163 6b67 726f 756e 645f 7374 796c  _background_styl
+00008930: 6528 2929 0d0a 2020 2020 2020 2020 7365  e())..        se
+00008940: 6c66 2e64 6f63 6b57 6964 6765 745f 352e  lf.dockWidget_5.
+00008950: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
+00008960: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
+00008970: 2e67 6574 5f62 6163 6b67 726f 756e 645f  .get_background_
+00008980: 7374 796c 6528 2929 0d0a 0d0a 2020 2020  style())....    
+00008990: 2020 2020 7365 6c66 2e77 6964 6765 742e      self.widget.
+000089a0: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
+000089b0: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
+000089c0: 2e67 6574 5f62 6163 6b67 726f 756e 645f  .get_background_
+000089d0: 7374 796c 6528 2929 0d0a 0d0a 2020 2020  style())....    
+000089e0: 2020 2020 7365 6c66 2e64 6f63 6b57 6964      self.dockWid
+000089f0: 6765 745f 372e 7365 7453 7479 6c65 5368  get_7.setStyleSh
+00008a00: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
+00008a10: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
+00008a20: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
+00008a30: 2020 2020 2020 2020 7365 6c66 2e74 6162          self.tab
+00008a40: 5769 6467 6574 2e73 6574 5374 796c 6553  Widget.setStyleS
+00008a50: 6865 6574 2873 656c 662e 7468 656d 655f  heet(self.theme_
+00008a60: 6d61 6e61 6765 722e 6765 745f 6261 636b  manager.get_back
+00008a70: 6772 6f75 6e64 5f73 7479 6c65 2829 290d  ground_style()).
+00008a80: 0a0d 0a20 2020 2020 2020 2066 6f72 2063  ...        for c
+00008a90: 6520 696e 2043 6f64 6545 6469 746f 722e  e in CodeEditor.
+00008aa0: 696e 7374 616e 6365 732e 7661 6c75 6573  instances.values
+00008ab0: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+00008ac0: 2063 652e 7365 7453 7479 6c65 5368 6565   ce.setStyleShee
+00008ad0: 7428 7365 6c66 2e74 6865 6d65 5f6d 616e  t(self.theme_man
+00008ae0: 6167 6572 2e67 6574 5f62 6163 6b67 726f  ager.get_backgro
+00008af0: 756e 645f 7374 796c 6528 2929 0d0a 0d0a  und_style())....
+00008b00: 2020 2020 2020 2020 7365 6c66 2e61 6765          self.age
+00008b10: 6e74 3145 6469 742e 7365 7453 7479 6c65  nt1Edit.setStyle
+00008b20: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
+00008b30: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
+00008b40: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
+00008b50: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00008b60: 6765 6e74 3245 6469 742e 7365 7453 7479  gent2Edit.setSty
+00008b70: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
+00008b80: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
+00008b90: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
+00008ba0: 2929 0d0a 0d0a 2020 2020 2020 2020 7472  ))....        tr
+00008bb0: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
+00008bc0: 2020 6966 204d 6169 6e4c 6f6f 7045 6469    if MainLoopEdi
+00008bd0: 746f 722e 696e 7374 616e 6365 2069 7320  tor.instance is 
+00008be0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00008bf0: 2020 2020 2020 2020 2020 2069 6e73 7420             inst 
+00008c00: 3d20 4d61 696e 4c6f 6f70 4564 6974 6f72  = MainLoopEditor
+00008c10: 2e69 6e73 7461 6e63 650d 0a20 2020 2020  .instance..     
+00008c20: 2020 2020 2020 2020 2020 2069 6e73 742e             inst.
+00008c30: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
+00008c40: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
+00008c50: 2e67 6574 5f62 6163 6b67 726f 756e 645f  .get_background_
+00008c60: 7374 796c 6528 2929 0d0a 2020 2020 2020  style())..      
+00008c70: 2020 2020 2020 2020 2020 696e 7374 2e73            inst.s
+00008c80: 6574 5374 796c 6553 6865 6574 2873 656c  etStyleSheet(sel
+00008c90: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+00008ca0: 6765 745f 7374 796c 6573 6865 6574 2822  get_stylesheet("
+00008cb0: 6d61 696e 2229 290d 0a0d 0a20 2020 2020  main"))....     
+00008cc0: 2020 2065 7863 6570 743a 0d0a 0d0a 2020     except:....  
+00008cd0: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
+00008ce0: 0d0a 2020 2020 2020 2020 7365 6c66 2e75  ..        self.u
+00008cf0: 7064 6174 655f 7461 626c 6528 290d 0a0d  pdate_table()...
+00008d00: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
+00008d10: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+00008d20: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
+00008d30: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
+00008d40: 2e67 6574 5f74 6162 6c65 5f73 7479 6c65  .get_table_style
+00008d50: 2829 290d 0a0d 0a20 2020 2064 6566 2061  ())....    def a
+00008d60: 736b 5f71 7565 7374 696f 6e28 7365 6c66  sk_question(self
+00008d70: 2c74 6974 6c65 2c6d 6573 7361 6765 293a  ,title,message):
+00008d80: 0d0a 2020 2020 2020 2020 2320 6173 6b20  ..        # ask 
+00008d90: 6120 7175 6573 7469 6f6e 2079 6573 202f  a question yes /
+00008da0: 206e 6f0d 0a20 2020 2020 2020 206d 7367   no..        msg
+00008db0: 203d 2051 4d65 7373 6167 6542 6f78 2851   = QMessageBox(Q
+00008dc0: 4d65 7373 6167 6542 6f78 2e51 7565 7374  MessageBox.Quest
+00008dd0: 696f 6e2c 0d0a 2020 2020 2020 2020 2020  ion,..          
+00008de0: 2020 2020 2020 7469 746c 652c 206d 6573        title, mes
+00008df0: 7361 6765 2c62 7574 746f 6e73 3d51 4d65  sage,buttons=QMe
+00008e00: 7373 6167 6542 6f78 2e59 6573 207c 2051  ssageBox.Yes | Q
+00008e10: 4d65 7373 6167 6542 6f78 2e4e 6f2c 0d0a  MessageBox.No,..
+00008e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e30: 7061 7265 6e74 3d73 656c 6629 0d0a 2020  parent=self)..  
+00008e40: 2020 2020 2020 6d73 672e 7365 7457 696e        msg.setWin
+00008e50: 646f 7754 6974 6c65 2874 6974 6c65 290d  dowTitle(title).
+00008e60: 0a20 2020 2020 2020 206d 7367 2e73 6574  .        msg.set
+00008e70: 5374 796c 6553 6865 6574 2873 656c 662e  StyleSheet(self.
+00008e80: 7468 656d 655f 6d61 6e61 6765 722e 6765  theme_manager.ge
+00008e90: 745f 6e6f 7469 6669 6361 7469 6f6e 5f73  t_notification_s
+00008ea0: 7479 6c65 2829 290d 0a20 2020 2020 2020  tyle())..       
+00008eb0: 206d 7367 2e65 7865 635f 2829 0d0a 2020   msg.exec_()..  
+00008ec0: 2020 2020 2020 7265 706c 7920 3d20 6d73        reply = ms
+00008ed0: 672e 7374 616e 6461 7264 4275 7474 6f6e  g.standardButton
+00008ee0: 286d 7367 2e63 6c69 636b 6564 4275 7474  (msg.clickedButt
+00008ef0: 6f6e 2829 290d 0a0d 0a20 2020 2020 2020  on())....       
+00008f00: 2069 6620 7265 706c 7920 3d3d 206d 7367   if reply == msg
+00008f10: 2e59 6573 3a0d 0a20 2020 2020 2020 2020  .Yes:..         
+00008f20: 2020 2072 6574 7572 6e20 5472 7565 0d0a     return True..
+00008f30: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00008f40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00008f50: 6e20 4661 6c73 650d 0a0d 0a20 2020 2064  n False....    d
+00008f60: 6566 206e 6f74 6966 7928 7365 6c66 2c6d  ef notify(self,m
+00008f70: 6573 7361 6765 2c74 6974 6c65 293a 0d0a  essage,title):..
+00008f80: 2020 2020 2020 2020 236d 7367 203d 2051          #msg = Q
+00008f90: 4d65 7373 6167 6542 6f78 2873 656c 6629  MessageBox(self)
+00008fa0: 0d0a 2020 2020 2020 2020 6d73 6720 3d20  ..        msg = 
+00008fb0: 514d 6573 7361 6765 426f 7828 7365 6c66  QMessageBox(self
+00008fc0: 290d 0a20 2020 2020 2020 206d 7367 2e73  )..        msg.s
+00008fd0: 6574 5769 6e64 6f77 5469 746c 6528 7469  etWindowTitle(ti
+00008fe0: 746c 6529 0d0a 2020 2020 2020 2020 6d73  tle)..        ms
+00008ff0: 672e 7365 7454 6578 7428 6d65 7373 6167  g.setText(messag
+00009000: 6529 0d0a 2020 2020 2020 2020 236d 7367  e)..        #msg
+00009010: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+00009020: 656c 662e 7374 796c 6573 6865 6574 290d  elf.stylesheet).
+00009030: 0a20 2020 2020 2020 2023 2067 6574 2062  .        # get b
+00009040: 6163 6b67 726f 756e 6420 636f 6c6f 7220  ackground color 
+00009050: 6672 6f6d 2074 6865 6d65 206d 616e 6167  from theme manag
+00009060: 6572 0d0a 2020 2020 2020 2020 2320 6765  er..        # ge
+00009070: 7420 666f 7265 6772 6f75 6e64 2063 6f6c  t foreground col
+00009080: 6f72 2066 726f 6d20 7468 656d 6520 6d61  or from theme ma
+00009090: 6e61 6765 720d 0a20 2020 2020 2020 2073  nager..        s
+000090a0: 7479 6c65 203d 2073 656c 662e 7468 656d  tyle = self.them
+000090b0: 655f 6d61 6e61 6765 722e 6765 745f 6e6f  e_manager.get_no
+000090c0: 7469 6669 6361 7469 6f6e 5f73 7479 6c65  tification_style
+000090d0: 2829 0d0a 2020 2020 2020 2020 6d73 672e  ()..        msg.
+000090e0: 7365 7453 7479 6c65 5368 6565 7428 7374  setStyleSheet(st
+000090f0: 796c 6529 0d0a 2020 2020 2020 2020 6d73  yle)..        ms
+00009100: 672e 6f70 656e 2829 0d0a 0d0a 0d0a 2020  g.open()......  
+00009110: 2020 6465 6620 636c 6561 6e75 705f 7472    def cleanup_tr
+00009120: 616e 7361 6374 696f 6e5f 6461 7461 2873  ansaction_data(s
+00009130: 656c 662c 6461 7461 293a 0d0a 2020 2020  elf,data):..    
+00009140: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00009150: 2063 6c65 616e 7320 7570 2074 7261 6e73   cleans up trans
+00009160: 6163 7469 6f6e 2064 6174 6120 6672 6f6d  action data from
+00009170: 206f 6c64 2066 696c 6520 7665 7273 696f   old file versio
+00009180: 6e73 0d0a 2020 2020 2020 2020 2222 220d  ns..        """.
+00009190: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+000091a0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000091b0: 2822 6f6c 645f 6461 7461 222c 6461 7461  ("old_data",data
+000091c0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+000091d0: 2064 6174 6120 3d20 6469 6374 2864 6174   data = dict(dat
+000091e0: 6129 0d0a 2020 2020 2020 2020 2020 2020  a)..            
+000091f0: 6e65 775f 6461 7461 203d 207b 2261 6765  new_data = {"age
+00009200: 6e74 7322 3a7b 7d2c 2274 7261 6e73 6163  nts":{},"transac
+00009210: 7469 6f6e 7322 3a5b 5d2c 2262 6f78 5f70  tions":[],"box_p
+00009220: 6f73 6974 696f 6e73 223a 7b7d 2c20 226c  ositions":{}, "l
+00009230: 6162 656c 5f70 6f73 6974 696f 6e73 223a  abel_positions":
+00009240: 7b7d 2c22 7468 656d 6522 3a4e 6f6e 657d  {},"theme":None}
+00009250: 2023 2064 6174 612e 636f 7079 2829 0d0a   # data.copy()..
+00009260: 2020 2020 2020 2020 2020 2020 2320 6e65              # ne
+00009270: 775f 6461 7461 5b22 7472 616e 7361 6374  w_data["transact
+00009280: 696f 6e73 225d 203d 2064 6174 615b 2274  ions"] = data["t
+00009290: 7261 6e73 6163 7469 6f6e 7322 5d2e 636f  ransactions"].co
+000092a0: 7079 2829 0d0a 0d0a 2020 2020 2020 2020  py()....        
+000092b0: 2020 2020 666f 7220 6b2c 7620 696e 2064      for k,v in d
+000092c0: 6174 612e 6974 656d 7328 293a 0d0a 0d0a  ata.items():....
+000092d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000092e0: 6966 206b 203d 3d20 2274 6865 6d65 223a  if k == "theme":
+000092f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009300: 2020 2020 2020 6e65 775f 6461 7461 5b22        new_data["
+00009310: 7468 656d 6522 5d20 3d20 6461 7461 5b6b  theme"] = data[k
+00009320: 5d20 2320 7b22 676c 6f62 616c 7468 656d  ] # {"globalthem
+00009330: 6522 3a20 6272 6967 6874 2f64 6172 6b2c  e": bright/dark,
+00009340: 2022 636f 6c6f 7273 223a 2063 6f6c 6f72   "colors": color
+00009350: 737d 2023 206c 6f61 6420 7468 6520 636f  s} # load the co
+00009360: 6c6f 7220 7468 656d 650d 0a0d 0a20 2020  lor theme....   
+00009370: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00009380: 6b20 3d3d 2022 6167 656e 7473 223a 0d0a  k == "agents":..
+00009390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000093a0: 2020 2020 666f 7220 6b32 2c76 3220 696e      for k2,v2 in
+000093b0: 2064 6174 615b 6b5d 2e69 7465 6d73 2829   data[k].items()
+000093c0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+000093d0: 2020 2020 2020 2020 2020 2020 2023 2031               # 1
+000093e0: 2e20 7265 6e61 6d65 2061 6765 6e74 0d0a  . rename agent..
+000093f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009400: 2020 2020 2020 2020 7072 696e 7428 2252          print("R
+00009410: 454e 414d 4520 4147 454e 5453 2e2e 2e22  ENAME AGENTS..."
+00009420: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00009430: 2020 2020 2020 2020 2020 206e 6577 5f63             new_c
+00009440: 6f64 655f 6c69 6e65 7320 3d20 5b5d 0d0a  ode_lines = []..
+00009450: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009460: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
+00009470: 6e65 2069 6e20 7632 2e73 706c 6974 2822  ne in v2.split("
+00009480: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
 00009490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094b0: 6e6c 696e 6520 3d20 6c69 6e65 5b3a 395d  nline = line[:9]
-000094c0: 202b 2063 616d 656c 286c 696e 655b 395d   + camel(line[9]
-000094d0: 2920 2b20 6c69 6e65 5b31 303a 5d0d 0a20  ) + line[10:].. 
-000094e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094f0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00009500: 7269 6e74 2822 2020 2072 656e 616d 6564  rint("   renamed
-00009510: 222c 206c 696e 652c 6e6c 696e 6529 0d0a  ", line,nline)..
-00009520: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009530: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00009540: 6966 2022 434c 4153 5322 2069 6e20 6c69  if "CLASS" in li
-00009550: 6e65 3a20 230d 0a20 2020 2020 2020 2020  ne: #..         
-00009560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009570: 2020 2020 2020 206e 6c69 6e65 203d 2020         nline =  
-00009580: 6c69 6e65 5b3a 395d 202b 2063 616d 656c  line[:9] + camel
-00009590: 286c 696e 655b 395d 2920 2b20 6c69 6e65  (line[9]) + line
-000095a0: 5b31 303a 5d0d 0a20 2020 2020 2020 2020  [10:]..         
-000095b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000095c0: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
-000095d0: 2072 656e 616d 6564 222c 206c 696e 652c   renamed", line,
-000095e0: 6e6c 696e 6529 0d0a 0d0a 2020 2020 2020  nline)....      
+000094a0: 2020 2069 6620 2241 4745 4e54 2220 696e     if "AGENT" in
+000094b0: 206c 696e 653a 2023 2020 616e 6420 6c65   line: #  and le
+000094c0: 6e28 6c69 6e65 2920 3e3d 2039 3a0d 0a20  n(line) >= 9:.. 
+000094d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000094e0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000094f0: 6c69 6e65 203d 206c 696e 655b 3a39 5d20  line = line[:9] 
+00009500: 2b20 6361 6d65 6c28 6c69 6e65 5b39 5d29  + camel(line[9])
+00009510: 202b 206c 696e 655b 3130 3a5d 0d0a 2020   + line[10:]..  
+00009520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009530: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00009540: 696e 7428 2220 2020 7265 6e61 6d65 6422  int("   renamed"
+00009550: 2c20 6c69 6e65 2c6e 6c69 6e65 290d 0a0d  , line,nline)...
+00009560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009570: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00009580: 6620 2243 4c41 5353 2220 696e 206c 696e  f "CLASS" in lin
+00009590: 653a 2023 0d0a 2020 2020 2020 2020 2020  e: #..          
+000095a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000095b0: 2020 2020 2020 6e6c 696e 6520 3d20 206c        nline =  l
+000095c0: 696e 655b 3a39 5d20 2b20 6361 6d65 6c28  ine[:9] + camel(
+000095d0: 6c69 6e65 5b39 5d29 202b 206c 696e 655b  line[9]) + line[
+000095e0: 3130 3a5d 0d0a 2020 2020 2020 2020 2020  10:]..          
 000095f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009600: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00009610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009620: 2020 2020 2020 2020 2020 2020 206e 6c69               nli
-00009630: 6e65 203d 206c 696e 6520 2320 224e 4f54  ne = line # "NOT
-00009640: 2046 4f55 4e44 2220 2320 6c69 6e65 0d0a   FOUND" # line..
+00009600: 2020 2020 2020 7072 696e 7428 2220 2020        print("   
+00009610: 7265 6e61 6d65 6422 2c20 6c69 6e65 2c6e  renamed", line,n
+00009620: 6c69 6e65 290d 0a0d 0a20 2020 2020 2020  line)....       
+00009630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009640: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
 00009650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009660: 2020 2020 2020 2020 2020 2020 2320 7072              # pr
-00009670: 696e 7428 226e 6c69 6e65 222c 6e6c 696e  int("nline",nlin
-00009680: 652c 226f 6c64 222c 7632 290d 0a0d 0a20  e,"old",v2).... 
+00009660: 2020 2020 2020 2020 2020 2020 6e6c 696e              nlin
+00009670: 6520 3d20 6c69 6e65 2023 2022 4e4f 5420  e = line # "NOT 
+00009680: 464f 554e 4422 2023 206c 696e 650d 0a20  FOUND" # line.. 
 00009690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096a0: 2020 2020 2020 2020 2020 206e 6577 5f63             new_c
-000096b0: 6f64 655f 6c69 6e65 732e 6170 7065 6e64  ode_lines.append
-000096c0: 286e 6c69 6e65 290d 0a0d 0a20 2020 2020  (nline)....     
+000096a0: 2020 2020 2020 2020 2020 2023 2070 7269             # pri
+000096b0: 6e74 2822 6e6c 696e 6522 2c6e 6c69 6e65  nt("nline",nline
+000096c0: 2c22 6f6c 6422 2c76 3229 0d0a 0d0a 2020  ,"old",v2)....  
 000096d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096e0: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
-000096f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009700: 2020 2020 2020 206e 6577 5f63 6f64 6520         new_code 
-00009710: 3d20 225c 6e22 2e6a 6f69 6e28 6e65 775f  = "\n".join(new_
-00009720: 636f 6465 5f6c 696e 6573 290d 0a0d 0a20  code_lines).... 
+000096e0: 2020 2020 2020 2020 2020 6e65 775f 636f            new_co
+000096f0: 6465 5f6c 696e 6573 2e61 7070 656e 6428  de_lines.append(
+00009700: 6e6c 696e 6529 0d0a 0d0a 2020 2020 2020  nline)....      
+00009710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009720: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
 00009730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009740: 2020 2020 2020 2061 6765 6e74 5f6e 616d         agent_nam
-00009750: 6520 3d20 6361 6d65 6c28 7374 7228 6b32  e = camel(str(k2
-00009760: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-00009770: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00009780: 7428 2220 2020 2061 6765 6e74 206e 616d  t("    agent nam
-00009790: 6522 2c20 7374 7228 6b32 292c 2022 2d3e  e", str(k2), "->
-000097a0: 2220 2c20 6361 6d65 6c28 7374 7228 6b32  " , camel(str(k2
-000097b0: 2929 290d 0a0d 0a0d 0a20 2020 2020 2020  )))......       
-000097c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000097d0: 2069 6620 7374 7228 6b32 2920 696e 2064   if str(k2) in d
-000097e0: 6174 615b 2262 6f78 5f70 6f73 6974 696f  ata["box_positio
-000097f0: 6e73 225d 3a20 2320 7472 7920 6966 2061  ns"]: # try if a
-00009800: 6765 6e74 2069 7320 706c 6163 6564 2073  gent is placed s
-00009810: 6f6d 6577 6865 7265 0d0a 0d0a 2020 2020  omewhere....    
-00009820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009830: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
-00009840: 5b22 6167 656e 7473 225d 5b61 6765 6e74  ["agents"][agent
-00009850: 5f6e 616d 655d 203d 206e 6577 5f63 6f64  _name] = new_cod
-00009860: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
-00009870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009880: 2023 2032 2e20 6173 7369 676e 206e 6577   # 2. assign new
-00009890: 2062 6f78 2070 6f73 6974 696f 6e0d 0a20   box position.. 
-000098a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000098c0: 2822 4153 5349 474e 204e 4557 2042 4f58  ("ASSIGN NEW BOX
-000098d0: 2050 4f53 4954 494f 4e53 2e2e 2e22 290d   POSITIONS...").
-000098e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000098f0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00009900: 6c64 5f70 6f73 203d 2064 6174 615b 2262  ld_pos = data["b
-00009910: 6f78 5f70 6f73 6974 696f 6e73 225d 5b73  ox_positions"][s
-00009920: 7472 286b 3229 5d0d 0a20 2020 2020 2020  tr(k2)]..       
-00009930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009940: 2020 2020 206e 6577 5f64 6174 615b 2262       new_data["b
-00009950: 6f78 5f70 6f73 6974 696f 6e73 225d 5b61  ox_positions"][a
-00009960: 6765 6e74 5f6e 616d 655d 203d 206f 6c64  gent_name] = old
-00009970: 5f70 6f73 0d0a 0d0a 2020 2020 2020 2020  _pos....        
-00009980: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00009990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000099a0: 2020 206e 6577 5f64 6174 615b 6b5d 203d     new_data[k] =
-000099b0: 2076 0d0a 0d0a 2020 2020 2020 2020 2020   v....          
-000099c0: 2020 7072 696e 7428 2252 454e 414d 4520    print("RENAME 
-000099d0: 5452 414e 5341 4354 494f 4e53 2e2e 2e22  TRANSACTIONS..."
-000099e0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-000099f0: 2033 2e20 7265 6e61 6d65 2074 7261 6e73   3. rename trans
-00009a00: 6163 7469 6f6e 730d 0a20 2020 2020 2020  actions..       
-00009a10: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-00009a20: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-00009a30: 2c74 2069 6e20 656e 756d 6572 6174 6528  ,t in enumerate(
-00009a40: 6c69 7374 2864 6174 615b 2274 7261 6e73  list(data["trans
-00009a50: 6163 7469 6f6e 7322 5d29 293a 0d0a 2020  actions"])):..  
-00009a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a70: 2020 6e65 775f 6461 7461 5b22 7472 616e    new_data["tran
-00009a80: 7361 6374 696f 6e73 225d 5b69 5d5b 2261  sactions"][i]["a
-00009a90: 6765 6e74 3122 5d20 3d20 6361 6d65 6c28  gent1"] = camel(
-00009aa0: 6461 7461 5b22 7472 616e 7361 6374 696f  data["transactio
-00009ab0: 6e73 225d 5b69 5d5b 2261 6765 6e74 3122  ns"][i]["agent1"
-00009ac0: 5d29 2023 2e63 6170 6974 616c 697a 6528  ]) #.capitalize(
-00009ad0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00009ae0: 2020 2020 2020 206e 6577 5f64 6174 615b         new_data[
-00009af0: 2274 7261 6e73 6163 7469 6f6e 7322 5d5b  "transactions"][
-00009b00: 695d 5b22 6167 656e 7432 225d 203d 2063  i]["agent2"] = c
-00009b10: 616d 656c 2864 6174 615b 2274 7261 6e73  amel(data["trans
-00009b20: 6163 7469 6f6e 7322 5d5b 695d 5b22 6167  actions"][i]["ag
-00009b30: 656e 7432 225d 2920 232e 6361 7069 7461  ent2"]) #.capita
-00009b40: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
-00009b50: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00009b60: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-00009b70: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00009b80: 7074 696f 6e5f 7479 7065 2c20 6578 6365  ption_type, exce
-00009b90: 7074 696f 6e5f 6f62 6a65 6374 2c20 6578  ption_object, ex
-00009ba0: 6365 7074 696f 6e5f 7472 6163 6562 6163  ception_tracebac
-00009bb0: 6b20 3d20 7379 732e 6578 635f 696e 666f  k = sys.exc_info
-00009bc0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00009bd0: 2020 2020 6669 6c65 6e61 6d65 203d 2065      filename = e
-00009be0: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
-00009bf0: 636b 2e74 625f 6672 616d 652e 665f 636f  ck.tb_frame.f_co
-00009c00: 6465 2e63 6f5f 6669 6c65 6e61 6d65 0d0a  de.co_filename..
-00009c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c20: 6c69 6e65 5f6e 756d 6265 7220 3d20 6578  line_number = ex
-00009c30: 6365 7074 696f 6e5f 7472 6163 6562 6163  ception_tracebac
-00009c40: 6b2e 7462 5f6c 696e 656e 6f0d 0a20 2020  k.tb_lineno..   
-00009c50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00009c60: 662e 6e6f 7469 6679 2822 536f 6d65 7468  f.notify("Someth
-00009c70: 696e 6720 7765 6e20 7772 6f6e 6720 7768  ing wen wrong wh
-00009c80: 656e 2069 6e73 6572 7469 6e67 2074 6865  en inserting the
-00009c90: 2074 7261 6e73 6163 7469 6f6e 733a 5c6e   transactions:\n
-00009ca0: 2220 2b20 7374 7228 6529 202b 2022 5c6e  " + str(e) + "\n
-00009cb0: 4c69 6e65 3a22 202b 2073 7472 286c 696e  Line:" + str(lin
-00009cc0: 655f 6e75 6d62 6572 292c 7469 746c 653d  e_number),title=
-00009cd0: 2245 7272 6f72 2229 0d0a 0d0a 2020 2020  "Error")....    
-00009ce0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00009cf0: 6577 5f64 6174 610d 0a20 2020 2020 2020  ew_data..       
-00009d00: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00009d10: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-00009d20: 2020 2020 2065 7863 6570 7469 6f6e 5f74       exception_t
-00009d30: 7970 652c 2065 7863 6570 7469 6f6e 5f6f  ype, exception_o
-00009d40: 626a 6563 742c 2065 7863 6570 7469 6f6e  bject, exception
-00009d50: 5f74 7261 6365 6261 636b 203d 2073 7973  _traceback = sys
-00009d60: 2e65 7863 5f69 6e66 6f28 290d 0a20 2020  .exc_info()..   
-00009d70: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-00009d80: 6520 3d20 6578 6365 7074 696f 6e5f 7472  e = exception_tr
-00009d90: 6163 6562 6163 6b2e 7462 5f66 7261 6d65  aceback.tb_frame
-00009da0: 2e66 5f63 6f64 652e 636f 5f66 696c 656e  .f_code.co_filen
-00009db0: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
-00009dc0: 206c 696e 655f 6e75 6d62 6572 203d 2065   line_number = e
-00009dd0: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
-00009de0: 636b 2e74 625f 6c69 6e65 6e6f 0d0a 0d0a  ck.tb_lineno....
-00009df0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00009e00: 2e6e 6f74 6966 7928 2243 6f75 6c74 206e  .notify("Coult n
-00009e10: 6f74 206f 7074 6e20 7468 6520 7072 6f6a  ot optn the proj
-00009e20: 6563 7420 6669 6c65 2e20 4973 2069 7420  ect file. Is it 
-00009e30: 616e 206f 6c64 2076 6572 7369 6f6e 3f5c  an old version?\
-00009e40: 6e20 4572 726f 7220 696e 204c 696e 6520  n Error in Line 
-00009e50: 2569 3a20 2225 6c69 6e65 5f6e 756d 6265  %i: "%line_numbe
-00009e60: 7220 2b20 7374 7228 6529 2c74 6974 6c65  r + str(e),title
-00009e70: 3d22 4572 726f 7222 290d 0a0d 0a20 2020  ="Error")....   
-00009e80: 2064 6566 206e 6f74 6966 795f 746f 6f6c   def notify_tool
-00009e90: 7469 7028 7365 6c66 2c77 6869 6368 293a  tip(self,which):
-00009ea0: 0d0a 2020 2020 2020 2020 7474 203d 2077  ..        tt = w
-00009eb0: 6869 6368 2e74 6f6f 6c54 6970 2028 290d  hich.toolTip ().
-00009ec0: 0a20 2020 2020 2020 2073 656c 662e 6e6f  .        self.no
-00009ed0: 7469 6679 2874 6974 6c65 3d22 5469 7022  tify(title="Tip"
-00009ee0: 2c6d 6573 7361 6765 3d73 7472 2874 7429  ,message=str(tt)
-00009ef0: 290d 0a0d 0a0d 0a20 2020 2064 6566 2072  )......    def r
-00009f00: 6573 697a 6545 7665 6e74 2873 656c 662c  esizeEvent(self,
-00009f10: 2065 7665 6e74 293a 0d0a 2020 2020 2020   event):..      
-00009f20: 2020 7072 696e 7428 2272 6573 697a 6522    print("resize"
-00009f30: 290d 0a0d 0a20 2020 2020 2020 2023 7365  )....        #se
-00009f40: 6c66 2e64 7261 7763 616e 7661 732e 7061  lf.drawcanvas.pa
-00009f50: 7265 6e74 2e72 6573 697a 655f 6672 616d  rent.resize_fram
-00009f60: 6528 290d 0a20 2020 2020 2020 2051 7457  e()..        QtW
-00009f70: 6964 6765 7473 2e51 4d61 696e 5769 6e64  idgets.QMainWind
-00009f80: 6f77 2e72 6573 697a 6545 7665 6e74 2873  ow.resizeEvent(s
-00009f90: 656c 662c 2065 7665 6e74 290d 0a0d 0a20  elf, event).... 
-00009fa0: 2020 2020 2020 2023 2072 6573 697a 6520         # resize 
-00009fb0: 7472 616e 7361 6374 696f 6e0d 0a20 2020  transaction..   
-00009fc0: 2020 2020 2077 203d 2037 3431 0d0a 2020       w = 741..  
-00009fd0: 2020 2020 2020 6820 3d20 3139 3120 2b20        h = 191 + 
-00009fe0: 6d61 7828 302c 7365 6c66 2e66 7261 6d65  max(0,self.frame
-00009ff0: 4765 6f6d 6574 7279 2829 2e68 6569 6768  Geometry().heigh
-0000a000: 7428 292d 3938 3529 0d0a 2020 2020 2020  t()-985)..      
-0000a010: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
-0000a020: 6f6e 5669 6577 2e70 6172 656e 7420 3d20  onView.parent = 
-0000a030: 7365 6c66 2e64 6f63 6b57 6964 6765 745f  self.dockWidget_
-0000a040: 350d 0a20 2020 2020 2020 2023 2073 656c  5..        # sel
-0000a050: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000a060: 772e 7365 7447 656f 6d65 7472 7928 3330  w.setGeometry(30
-0000a070: 2c36 352c 772c 6829 2023 2033 302c 3637  ,65,w,h) # 30,67
-0000a080: 302c 772c 6829 0d0a 0d0a 2020 2020 2020  0,w,h)....      
-0000a090: 2020 2373 656c 662e 6c61 6265 6c5f 3137    #self.label_17
-0000a0a0: 2e73 6574 4765 6f6d 6574 7279 2831 302c  .setGeometry(10,
-0000a0b0: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
-0000a0c0: 7279 2829 2e68 6569 6768 7428 292d 3135  ry().height()-15
-0000a0d0: 302c 3133 312c 3839 2920 2320 6c6f 676f  0,131,89) # logo
-0000a0e0: 0d0a 2020 2020 2020 2020 2373 656c 662e  ..        #self.
-0000a0f0: 6c61 6265 6c5f 3137 2e73 6574 5669 7369  label_17.setVisi
-0000a100: 626c 6528 4661 6c73 6529 0d0a 0d0a 2020  ble(False)....  
-0000a110: 2020 2020 2020 7365 6c66 2e72 6164 696f        self.radio
-0000a120: 4275 7474 6f6e 2e73 6574 4765 6f6d 6574  Button.setGeomet
-0000a130: 7279 2830 2c73 656c 662e 6672 616d 6547  ry(0,self.frameG
-0000a140: 656f 6d65 7472 7928 292e 6865 6967 6874  eometry().height
-0000a150: 2829 2d32 382c 3232 2c32 3229 0d0a 0d0a  ()-28,22,22)....
-0000a160: 2020 2020 6465 6620 6272 6f77 7365 2873      def browse(s
-0000a170: 656c 6629 3a0d 0a0d 0a0d 0a20 2020 2020  elf):......     
-0000a180: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0000a190: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
-0000a1a0: 5146 696c 6544 6961 6c6f 672e 6765 744f  QFileDialog.getO
-0000a1b0: 7065 6e46 696c 654e 616d 6528 7365 6c66  penFileName(self
-0000a1c0: 2c20 274f 7065 6e20 6669 6c65 272c 6f73  , 'Open file',os
-0000a1d0: 2e67 6574 6377 6428 292c 2022 6174 7475  .getcwd(), "attu
-0000a1e0: 6e65 2046 696c 6573 2028 2a2e 7366 6374  ne Files (*.sfct
-0000a1f0: 6c29 3b3b 4d41 4d42 4120 4669 6c65 7320  l);;MAMBA Files 
-0000a200: 282a 2e6d 616d 6261 293b 3b54 7261 6e73  (*.mamba);;Trans
-0000a210: 6163 7469 6f6e 2046 696c 6573 2028 2a2e  action Files (*.
-0000a220: 7472 616e 7329 2229 5b30 5d0d 0a20 2020  trans)")[0]..   
-0000a230: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
-0000a240: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-0000a250: 6f74 6966 7928 2253 6565 6d73 2061 7320  otify("Seems as 
-0000a260: 6966 2074 6865 2070 726f 6a65 6374 7320  if the projects 
-0000a270: 666f 6c64 6572 2064 6f65 7320 6e6f 7420  folder does not 
-0000a280: 7965 7420 6578 6973 742e 2070 6c65 6173  yet exist. pleas
-0000a290: 6520 6372 6561 7465 2069 7420 6d61 6e75  e create it manu
-0000a2a0: 616c 6c79 2069 6e20 7468 6520 7061 7265  ally in the pare
-0000a2b0: 6e74 2064 6972 6563 746f 7279 206f 6620  nt directory of 
-0000a2c0: 7372 6322 2c20 7469 746c 653d 2250 726f  src", title="Pro
-0000a2d0: 6a65 6374 7320 666f 6c64 6572 2229 0d0a  jects folder")..
-0000a2e0: 0d0a 0d0a 2020 2020 2020 2020 2320 7265  ....        # re
-0000a2f0: 6d6f 7665 2061 6c6c 2074 6162 7320 6672  move all tabs fr
-0000a300: 6f6d 2074 6162 2077 6964 6765 740d 0a20  om tab widget.. 
-0000a310: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0000a320: 7261 6e67 6528 312c 7365 6c66 2e74 6162  range(1,self.tab
-0000a330: 5769 6467 6574 2e63 6f75 6e74 2829 293a  Widget.count()):
-0000a340: 0d0a 2020 2020 2020 2020 2020 2020 7461  ..            ta
-0000a350: 6220 3d20 7365 6c66 2e74 6162 5769 6467  b = self.tabWidg
-0000a360: 6574 2e77 6964 6765 7428 3129 0d0a 2020  et.widget(1)..  
-0000a370: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000a380: 6162 5769 6467 6574 2e72 656d 6f76 6554  abWidget.removeT
-0000a390: 6162 2831 290d 0a20 2020 2020 2020 2020  ab(1)..         
-0000a3a0: 2020 2064 656c 2074 6162 0d0a 0d0a 2020     del tab....  
-0000a3b0: 2020 2020 2020 436f 6465 4564 6974 6f72        CodeEditor
-0000a3c0: 2e69 6e73 7461 6e63 6573 203d 207b 7d0d  .instances = {}.
-0000a3d0: 0a0d 0a0d 0a20 2020 2020 2020 2066 696c  .....        fil
-0000a3e0: 656e 616d 655f 6261 636b 7570 203d 2073  ename_backup = s
-0000a3f0: 656c 662e 6669 6c65 6e61 6d65 0d0a 2020  elf.filename..  
-0000a400: 2020 2020 2020 6375 7272 656e 745f 6669        current_fi
-0000a410: 6c65 5f62 6163 6b75 7020 3d20 7365 6c66  le_backup = self
-0000a420: 2e63 7572 7265 6e74 5f66 696c 650d 0a0d  .current_file...
-0000a430: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-0000a440: 6c65 6e61 6d65 203d 2066 696c 656e 616d  lename = filenam
-0000a450: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-0000a460: 6375 7272 656e 745f 6669 6c65 203d 2066  current_file = f
-0000a470: 696c 656e 616d 650d 0a0d 0a20 2020 2020  ilename....     
-0000a480: 2020 2073 656c 662e 6d61 696e 6c6f 6f70     self.mainloop
-0000a490: 5f65 6469 746f 722e 7374 6172 745f 7761  _editor.start_wa
-0000a4a0: 7463 6864 6f67 2873 656c 662e 6375 7272  tchdog(self.curr
-0000a4b0: 656e 745f 6669 6c65 290d 0a20 2020 2020  ent_file)..     
-0000a4c0: 2020 2073 656c 662e 7365 7474 696e 6773     self.settings
-0000a4d0: 5f65 6469 746f 722e 7374 6172 745f 7761  _editor.start_wa
-0000a4e0: 7463 6864 6f67 2873 656c 662e 6375 7272  tchdog(self.curr
-0000a4f0: 656e 745f 6669 6c65 290d 0a0d 0a20 2020  ent_file)....   
-0000a500: 2020 2020 2073 656c 662e 6c61 6265 6c5f       self.label_
-0000a510: 666e 616d 652e 7365 7454 6578 7428 6669  fname.setText(fi
-0000a520: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2020  lename)....     
-0000a530: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0000a540: 2020 2020 2070 7269 6e74 2822 4649 4c45       print("FILE
-0000a550: 4e41 4d45 222c 6669 6c65 6e61 6d65 290d  NAME",filename).
-0000a560: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-0000a570: 206c 6f61 6420 656e 7472 6965 7320 696e   load entries in
-0000a580: 746f 2074 6865 206c 6973 740d 0a20 2020  to the list..   
-0000a590: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-0000a5a0: 656e 2866 696c 656e 616d 652c 2027 7227  en(filename, 'r'
-0000a5b0: 2920 6173 2073 7472 6561 6d3a 0d0a 0d0a  ) as stream:....
-0000a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5d0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-0000a5e0: 2020 2020 2020 2020 2020 7472 616e 7361            transa
-0000a5f0: 6374 696f 6e5f 6461 7461 203d 2073 656c  ction_data = sel
-0000a600: 662e 636c 6561 6e75 705f 7472 616e 7361  f.cleanup_transa
-0000a610: 6374 696f 6e5f 6461 7461 2879 616d 6c2e  ction_data(yaml.
-0000a620: 7361 6665 5f6c 6f61 6428 7374 7265 616d  safe_load(stream
-0000a630: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000a640: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-0000a650: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-0000a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a670: 7365 6c66 2e6e 6f74 6966 7928 2245 7272  self.notify("Err
-0000a680: 6f72 2072 6574 7265 6976 696e 6720 7468  or retreiving th
-0000a690: 6520 7472 616e 7361 6374 696f 6e20 6461  e transaction da
-0000a6a0: 7461 2066 726f 6d20 7468 6520 736f 7572  ta from the sour
-0000a6b0: 6365 2066 696c 652e 2041 626f 7274 696e  ce file. Abortin
-0000a6c0: 672e 5c6e 222b 7374 7228 6529 2c74 6974  g.\n"+str(e),tit
-0000a6d0: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
-0000a6e0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000a6f0: 7269 6e74 2822 7472 616e 7361 6374 696f  rint("transactio
-0000a700: 6e5f 6461 7461 222c 7472 616e 7361 6374  n_data",transact
-0000a710: 696f 6e5f 6461 7461 290d 0a20 2020 2020  ion_data)..     
-0000a720: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-0000a730: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a740: 2020 2020 2020 2023 2074 7279 2074 6f20         # try to 
-0000a750: 6c6f 6164 206e 6f74 6573 0d0a 2020 2020  load notes..    
-0000a760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a770: 6966 2022 6e6f 7465 7322 2069 6e20 7472  if "notes" in tr
-0000a780: 616e 7361 6374 696f 6e5f 6461 7461 3a0d  ansaction_data:.
-0000a790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a7a0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0000a7b0: 7465 7345 6469 742e 7365 7450 6c61 696e  tesEdit.setPlain
-0000a7c0: 5465 7874 2874 7261 6e73 6163 7469 6f6e  Text(transaction
-0000a7d0: 5f64 6174 615b 226e 6f74 6573 225d 290d  _data["notes"]).
-0000a7e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a7f0: 2020 2020 2020 2023 2074 7279 2074 6f20         # try to 
-0000a800: 6c6f 6164 2063 6f6c 6f72 2074 6865 6d65  load color theme
-0000a810: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a820: 2020 2020 2020 6966 2074 7261 6e73 6163        if transac
-0000a830: 7469 6f6e 5f64 6174 615b 2274 6865 6d65  tion_data["theme
-0000a840: 225d 2069 7320 6e6f 7420 4e6f 6e65 3a0d  "] is not None:.
+00009740: 2020 2020 2020 6e65 775f 636f 6465 203d        new_code =
+00009750: 2022 5c6e 222e 6a6f 696e 286e 6577 5f63   "\n".join(new_c
+00009760: 6f64 655f 6c69 6e65 7329 0d0a 0d0a 2020  ode_lines)....  
+00009770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009780: 2020 2020 2020 6167 656e 745f 6e61 6d65        agent_name
+00009790: 203d 2063 616d 656c 2873 7472 286b 3229   = camel(str(k2)
+000097a0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000097b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000097c0: 2822 2020 2020 6167 656e 7420 6e61 6d65  ("    agent name
+000097d0: 222c 2073 7472 286b 3229 2c20 222d 3e22  ", str(k2), "->"
+000097e0: 202c 2063 616d 656c 2873 7472 286b 3229   , camel(str(k2)
+000097f0: 2929 0d0a 0d0a 0d0a 2020 2020 2020 2020  ))......        
+00009800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009810: 6966 2073 7472 286b 3229 2069 6e20 6461  if str(k2) in da
+00009820: 7461 5b22 626f 785f 706f 7369 7469 6f6e  ta["box_position
+00009830: 7322 5d3a 2023 2074 7279 2069 6620 6167  s"]: # try if ag
+00009840: 656e 7420 6973 2070 6c61 6365 6420 736f  ent is placed so
+00009850: 6d65 7768 6572 650d 0a0d 0a20 2020 2020  mewhere....     
+00009860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009870: 2020 2020 2020 206e 6577 5f64 6174 615b         new_data[
+00009880: 2261 6765 6e74 7322 5d5b 6167 656e 745f  "agents"][agent_
+00009890: 6e61 6d65 5d20 3d20 6e65 775f 636f 6465  name] = new_code
+000098a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000098b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000098c0: 2320 322e 2061 7373 6967 6e20 6e65 7720  # 2. assign new 
+000098d0: 626f 7820 706f 7369 7469 6f6e 0d0a 2020  box position..  
+000098e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000098f0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00009900: 2241 5353 4947 4e20 4e45 5720 424f 5820  "ASSIGN NEW BOX 
+00009910: 504f 5349 5449 4f4e 532e 2e2e 2229 0d0a  POSITIONS...")..
+00009920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009930: 2020 2020 2020 2020 2020 2020 2020 6f6c                ol
+00009940: 645f 706f 7320 3d20 6461 7461 5b22 626f  d_pos = data["bo
+00009950: 785f 706f 7369 7469 6f6e 7322 5d5b 7374  x_positions"][st
+00009960: 7228 6b32 295d 0d0a 2020 2020 2020 2020  r(k2)]..        
+00009970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009980: 2020 2020 6e65 775f 6461 7461 5b22 626f      new_data["bo
+00009990: 785f 706f 7369 7469 6f6e 7322 5d5b 6167  x_positions"][ag
+000099a0: 656e 745f 6e61 6d65 5d20 3d20 6f6c 645f  ent_name] = old_
+000099b0: 706f 730d 0a0d 0a20 2020 2020 2020 2020  pos....         
+000099c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000099d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000099e0: 2020 6e65 775f 6461 7461 5b6b 5d20 3d20    new_data[k] = 
+000099f0: 760d 0a0d 0a20 2020 2020 2020 2020 2020  v....           
+00009a00: 2070 7269 6e74 2822 5245 4e41 4d45 2054   print("RENAME T
+00009a10: 5241 4e53 4143 5449 4f4e 532e 2e2e 2229  RANSACTIONS...")
+00009a20: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00009a30: 332e 2072 656e 616d 6520 7472 616e 7361  3. rename transa
+00009a40: 6374 696f 6e73 0d0a 2020 2020 2020 2020  ctions..        
+00009a50: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00009a60: 2020 2020 2020 2020 2020 666f 7220 692c            for i,
+00009a70: 7420 696e 2065 6e75 6d65 7261 7465 286c  t in enumerate(l
+00009a80: 6973 7428 6461 7461 5b22 7472 616e 7361  ist(data["transa
+00009a90: 6374 696f 6e73 225d 2929 3a0d 0a20 2020  ctions"])):..   
+00009aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009ab0: 206e 6577 5f64 6174 615b 2274 7261 6e73   new_data["trans
+00009ac0: 6163 7469 6f6e 7322 5d5b 695d 5b22 6167  actions"][i]["ag
+00009ad0: 656e 7431 225d 203d 2063 616d 656c 2864  ent1"] = camel(d
+00009ae0: 6174 615b 2274 7261 6e73 6163 7469 6f6e  ata["transaction
+00009af0: 7322 5d5b 695d 5b22 6167 656e 7431 225d  s"][i]["agent1"]
+00009b00: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
+00009b10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009b20: 2020 2020 2020 6e65 775f 6461 7461 5b22        new_data["
+00009b30: 7472 616e 7361 6374 696f 6e73 225d 5b69  transactions"][i
+00009b40: 5d5b 2261 6765 6e74 3222 5d20 3d20 6361  ]["agent2"] = ca
+00009b50: 6d65 6c28 6461 7461 5b22 7472 616e 7361  mel(data["transa
+00009b60: 6374 696f 6e73 225d 5b69 5d5b 2261 6765  ctions"][i]["age
+00009b70: 6e74 3222 5d29 2023 2e63 6170 6974 616c  nt2"]) #.capital
+00009b80: 697a 6528 290d 0a20 2020 2020 2020 2020  ize()..         
+00009b90: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00009ba0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+00009bb0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00009bc0: 7469 6f6e 5f74 7970 652c 2065 7863 6570  tion_type, excep
+00009bd0: 7469 6f6e 5f6f 626a 6563 742c 2065 7863  tion_object, exc
+00009be0: 6570 7469 6f6e 5f74 7261 6365 6261 636b  eption_traceback
+00009bf0: 203d 2073 7973 2e65 7863 5f69 6e66 6f28   = sys.exc_info(
+00009c00: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00009c10: 2020 2066 696c 656e 616d 6520 3d20 6578     filename = ex
+00009c20: 6365 7074 696f 6e5f 7472 6163 6562 6163  ception_tracebac
+00009c30: 6b2e 7462 5f66 7261 6d65 2e66 5f63 6f64  k.tb_frame.f_cod
+00009c40: 652e 636f 5f66 696c 656e 616d 650d 0a20  e.co_filename.. 
+00009c50: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00009c60: 696e 655f 6e75 6d62 6572 203d 2065 7863  ine_number = exc
+00009c70: 6570 7469 6f6e 5f74 7261 6365 6261 636b  eption_traceback
+00009c80: 2e74 625f 6c69 6e65 6e6f 0d0a 2020 2020  .tb_lineno..    
+00009c90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00009ca0: 2e6e 6f74 6966 7928 2253 6f6d 6574 6869  .notify("Somethi
+00009cb0: 6e67 2077 656e 2077 726f 6e67 2077 6865  ng wen wrong whe
+00009cc0: 6e20 696e 7365 7274 696e 6720 7468 6520  n inserting the 
+00009cd0: 7472 616e 7361 6374 696f 6e73 3a5c 6e22  transactions:\n"
+00009ce0: 202b 2073 7472 2865 2920 2b20 225c 6e4c   + str(e) + "\nL
+00009cf0: 696e 653a 2220 2b20 7374 7228 6c69 6e65  ine:" + str(line
+00009d00: 5f6e 756d 6265 7229 2c74 6974 6c65 3d22  _number),title="
+00009d10: 4572 726f 7222 290d 0a0d 0a20 2020 2020  Error")....     
+00009d20: 2020 2020 2020 2072 6574 7572 6e20 6e65         return ne
+00009d30: 775f 6461 7461 0d0a 2020 2020 2020 2020  w_data..        
+00009d40: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00009d50: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+00009d60: 2020 2020 6578 6365 7074 696f 6e5f 7479      exception_ty
+00009d70: 7065 2c20 6578 6365 7074 696f 6e5f 6f62  pe, exception_ob
+00009d80: 6a65 6374 2c20 6578 6365 7074 696f 6e5f  ject, exception_
+00009d90: 7472 6163 6562 6163 6b20 3d20 7379 732e  traceback = sys.
+00009da0: 6578 635f 696e 666f 2829 0d0a 2020 2020  exc_info()..    
+00009db0: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
+00009dc0: 203d 2065 7863 6570 7469 6f6e 5f74 7261   = exception_tra
+00009dd0: 6365 6261 636b 2e74 625f 6672 616d 652e  ceback.tb_frame.
+00009de0: 665f 636f 6465 2e63 6f5f 6669 6c65 6e61  f_code.co_filena
+00009df0: 6d65 0d0a 2020 2020 2020 2020 2020 2020  me..            
+00009e00: 6c69 6e65 5f6e 756d 6265 7220 3d20 6578  line_number = ex
+00009e10: 6365 7074 696f 6e5f 7472 6163 6562 6163  ception_tracebac
+00009e20: 6b2e 7462 5f6c 696e 656e 6f0d 0a0d 0a20  k.tb_lineno.... 
+00009e30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00009e40: 6e6f 7469 6679 2822 436f 756c 7420 6e6f  notify("Coult no
+00009e50: 7420 6f70 746e 2074 6865 2070 726f 6a65  t optn the proje
+00009e60: 6374 2066 696c 652e 2049 7320 6974 2061  ct file. Is it a
+00009e70: 6e20 6f6c 6420 7665 7273 696f 6e3f 5c6e  n old version?\n
+00009e80: 2045 7272 6f72 2069 6e20 4c69 6e65 2025   Error in Line %
+00009e90: 693a 2022 256c 696e 655f 6e75 6d62 6572  i: "%line_number
+00009ea0: 202b 2073 7472 2865 292c 7469 746c 653d   + str(e),title=
+00009eb0: 2245 7272 6f72 2229 0d0a 0d0a 2020 2020  "Error")....    
+00009ec0: 6465 6620 6e6f 7469 6679 5f74 6f6f 6c74  def notify_toolt
+00009ed0: 6970 2873 656c 662c 7768 6963 6829 3a0d  ip(self,which):.
+00009ee0: 0a20 2020 2020 2020 2074 7420 3d20 7768  .        tt = wh
+00009ef0: 6963 682e 746f 6f6c 5469 7020 2829 0d0a  ich.toolTip ()..
+00009f00: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00009f10: 6966 7928 7469 746c 653d 2254 6970 222c  ify(title="Tip",
+00009f20: 6d65 7373 6167 653d 7374 7228 7474 2929  message=str(tt))
+00009f30: 0d0a 0d0a 0d0a 2020 2020 6465 6620 7265  ......    def re
+00009f40: 7369 7a65 4576 656e 7428 7365 6c66 2c20  sizeEvent(self, 
+00009f50: 6576 656e 7429 3a0d 0a20 2020 2020 2020  event):..       
+00009f60: 2070 7269 6e74 2822 7265 7369 7a65 2229   print("resize")
+00009f70: 0d0a 0d0a 2020 2020 2020 2020 2373 656c  ....        #sel
+00009f80: 662e 6472 6177 6361 6e76 6173 2e70 6172  f.drawcanvas.par
+00009f90: 656e 742e 7265 7369 7a65 5f66 7261 6d65  ent.resize_frame
+00009fa0: 2829 0d0a 2020 2020 2020 2020 5174 5769  ()..        QtWi
+00009fb0: 6467 6574 732e 514d 6169 6e57 696e 646f  dgets.QMainWindo
+00009fc0: 772e 7265 7369 7a65 4576 656e 7428 7365  w.resizeEvent(se
+00009fd0: 6c66 2c20 6576 656e 7429 0d0a 0d0a 2020  lf, event)....  
+00009fe0: 2020 2020 2020 2320 7265 7369 7a65 2074        # resize t
+00009ff0: 7261 6e73 6163 7469 6f6e 0d0a 2020 2020  ransaction..    
+0000a000: 2020 2020 7720 3d20 3734 310d 0a20 2020      w = 741..   
+0000a010: 2020 2020 2068 203d 2031 3931 202b 206d       h = 191 + m
+0000a020: 6178 2830 2c73 656c 662e 6672 616d 6547  ax(0,self.frameG
+0000a030: 656f 6d65 7472 7928 292e 6865 6967 6874  eometry().height
+0000a040: 2829 2d39 3835 290d 0a20 2020 2020 2020  ()-985)..       
+0000a050: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000a060: 6e56 6965 772e 7061 7265 6e74 203d 2073  nView.parent = s
+0000a070: 656c 662e 646f 636b 5769 6467 6574 5f35  elf.dockWidget_5
+0000a080: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+0000a090: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000a0a0: 2e73 6574 4765 6f6d 6574 7279 2833 302c  .setGeometry(30,
+0000a0b0: 3635 2c77 2c68 2920 2320 3330 2c36 3730  65,w,h) # 30,670
+0000a0c0: 2c77 2c68 290d 0a0d 0a20 2020 2020 2020  ,w,h)....       
+0000a0d0: 2023 7365 6c66 2e6c 6162 656c 5f31 372e   #self.label_17.
+0000a0e0: 7365 7447 656f 6d65 7472 7928 3130 2c73  setGeometry(10,s
+0000a0f0: 656c 662e 6672 616d 6547 656f 6d65 7472  elf.frameGeometr
+0000a100: 7928 292e 6865 6967 6874 2829 2d31 3530  y().height()-150
+0000a110: 2c31 3331 2c38 3929 2023 206c 6f67 6f0d  ,131,89) # logo.
+0000a120: 0a20 2020 2020 2020 2023 7365 6c66 2e6c  .        #self.l
+0000a130: 6162 656c 5f31 372e 7365 7456 6973 6962  abel_17.setVisib
+0000a140: 6c65 2846 616c 7365 290d 0a0d 0a20 2020  le(False)....   
+0000a150: 2020 2020 2073 656c 662e 7261 6469 6f42       self.radioB
+0000a160: 7574 746f 6e2e 7365 7447 656f 6d65 7472  utton.setGeometr
+0000a170: 7928 302c 7365 6c66 2e66 7261 6d65 4765  y(0,self.frameGe
+0000a180: 6f6d 6574 7279 2829 2e68 6569 6768 7428  ometry().height(
+0000a190: 292d 3238 2c32 322c 3232 290d 0a0d 0a20  )-28,22,22).... 
+0000a1a0: 2020 2064 6566 2062 726f 7773 6528 7365     def browse(se
+0000a1b0: 6c66 293a 0d0a 0d0a 0d0a 2020 2020 2020  lf):......      
+0000a1c0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000a1d0: 2020 2020 6669 6c65 6e61 6d65 203d 2051      filename = Q
+0000a1e0: 4669 6c65 4469 616c 6f67 2e67 6574 4f70  FileDialog.getOp
+0000a1f0: 656e 4669 6c65 4e61 6d65 2873 656c 662c  enFileName(self,
+0000a200: 2027 4f70 656e 2066 696c 6527 2c6f 732e   'Open file',os.
+0000a210: 6765 7463 7764 2829 2c20 2261 7474 756e  getcwd(), "attun
+0000a220: 6520 4669 6c65 7320 282a 2e73 6663 746c  e Files (*.sfctl
+0000a230: 293b 3b4d 414d 4241 2046 696c 6573 2028  );;MAMBA Files (
+0000a240: 2a2e 6d61 6d62 6129 3b3b 5472 616e 7361  *.mamba);;Transa
+0000a250: 6374 696f 6e20 4669 6c65 7320 282a 2e74  ction Files (*.t
+0000a260: 7261 6e73 2922 295b 305d 0d0a 2020 2020  rans)")[0]..    
+0000a270: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
+0000a280: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0000a290: 7469 6679 2822 5365 656d 7320 6173 2069  tify("Seems as i
+0000a2a0: 6620 7468 6520 7072 6f6a 6563 7473 2066  f the projects f
+0000a2b0: 6f6c 6465 7220 646f 6573 206e 6f74 2079  older does not y
+0000a2c0: 6574 2065 7869 7374 2e20 706c 6561 7365  et exist. please
+0000a2d0: 2063 7265 6174 6520 6974 206d 616e 7561   create it manua
+0000a2e0: 6c6c 7920 696e 2074 6865 2070 6172 656e  lly in the paren
+0000a2f0: 7420 6469 7265 6374 6f72 7920 6f66 2073  t directory of s
+0000a300: 7263 222c 2074 6974 6c65 3d22 5072 6f6a  rc", title="Proj
+0000a310: 6563 7473 2066 6f6c 6465 7222 290d 0a0d  ects folder")...
+0000a320: 0a0d 0a20 2020 2020 2020 2023 2072 656d  ...        # rem
+0000a330: 6f76 6520 616c 6c20 7461 6273 2066 726f  ove all tabs fro
+0000a340: 6d20 7461 6220 7769 6467 6574 0d0a 2020  m tab widget..  
+0000a350: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+0000a360: 616e 6765 2831 2c73 656c 662e 7461 6257  ange(1,self.tabW
+0000a370: 6964 6765 742e 636f 756e 7428 2929 3a0d  idget.count()):.
+0000a380: 0a20 2020 2020 2020 2020 2020 2074 6162  .            tab
+0000a390: 203d 2073 656c 662e 7461 6257 6964 6765   = self.tabWidge
+0000a3a0: 742e 7769 6467 6574 2831 290d 0a20 2020  t.widget(1)..   
+0000a3b0: 2020 2020 2020 2020 2073 656c 662e 7461           self.ta
+0000a3c0: 6257 6964 6765 742e 7265 6d6f 7665 5461  bWidget.removeTa
+0000a3d0: 6228 3129 0d0a 2020 2020 2020 2020 2020  b(1)..          
+0000a3e0: 2020 6465 6c20 7461 620d 0a0d 0a20 2020    del tab....   
+0000a3f0: 2020 2020 2043 6f64 6545 6469 746f 722e       CodeEditor.
+0000a400: 696e 7374 616e 6365 7320 3d20 7b7d 0d0a  instances = {}..
+0000a410: 0d0a 0d0a 2020 2020 2020 2020 6669 6c65  ....        file
+0000a420: 6e61 6d65 5f62 6163 6b75 7020 3d20 7365  name_backup = se
+0000a430: 6c66 2e66 696c 656e 616d 650d 0a20 2020  lf.filename..   
+0000a440: 2020 2020 2063 7572 7265 6e74 5f66 696c       current_fil
+0000a450: 655f 6261 636b 7570 203d 2073 656c 662e  e_backup = self.
+0000a460: 6375 7272 656e 745f 6669 6c65 0d0a 0d0a  current_file....
+0000a470: 2020 2020 2020 2020 7365 6c66 2e66 696c          self.fil
+0000a480: 656e 616d 6520 3d20 6669 6c65 6e61 6d65  ename = filename
+0000a490: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+0000a4a0: 7572 7265 6e74 5f66 696c 6520 3d20 6669  urrent_file = fi
+0000a4b0: 6c65 6e61 6d65 0d0a 0d0a 2020 2020 2020  lename....      
+0000a4c0: 2020 7365 6c66 2e6d 6169 6e6c 6f6f 705f    self.mainloop_
+0000a4d0: 6564 6974 6f72 2e73 7461 7274 5f77 6174  editor.start_wat
+0000a4e0: 6368 646f 6728 7365 6c66 2e63 7572 7265  chdog(self.curre
+0000a4f0: 6e74 5f66 696c 6529 0d0a 2020 2020 2020  nt_file)..      
+0000a500: 2020 7365 6c66 2e73 6574 7469 6e67 735f    self.settings_
+0000a510: 6564 6974 6f72 2e73 7461 7274 5f77 6174  editor.start_wat
+0000a520: 6368 646f 6728 7365 6c66 2e63 7572 7265  chdog(self.curre
+0000a530: 6e74 5f66 696c 6529 0d0a 0d0a 2020 2020  nt_file)....    
+0000a540: 2020 2020 7365 6c66 2e6c 6162 656c 5f66      self.label_f
+0000a550: 6e61 6d65 2e73 6574 5465 7874 2866 696c  name.setText(fil
+0000a560: 656e 616d 6529 0d0a 0d0a 2020 2020 2020  ename)....      
+0000a570: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000a580: 2020 2020 7072 696e 7428 2246 494c 454e      print("FILEN
+0000a590: 414d 4522 2c66 696c 656e 616d 6529 0d0a  AME",filename)..
+0000a5a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0000a5b0: 6c6f 6164 2065 6e74 7269 6573 2069 6e74  load entries int
+0000a5c0: 6f20 7468 6520 6c69 7374 0d0a 2020 2020  o the list..    
+0000a5d0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+0000a5e0: 6e28 6669 6c65 6e61 6d65 2c20 2772 2729  n(filename, 'r')
+0000a5f0: 2061 7320 7374 7265 616d 3a0d 0a0d 0a20   as stream:.... 
+0000a600: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0000a610: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0000a620: 2020 2020 2020 2020 2074 7261 6e73 6163           transac
+0000a630: 7469 6f6e 5f64 6174 6120 3d20 7365 6c66  tion_data = self
+0000a640: 2e63 6c65 616e 7570 5f74 7261 6e73 6163  .cleanup_transac
+0000a650: 7469 6f6e 5f64 6174 6128 7961 6d6c 2e73  tion_data(yaml.s
+0000a660: 6166 655f 6c6f 6164 2873 7472 6561 6d29  afe_load(stream)
+0000a670: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000a680: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+0000a690: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+0000a6a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000a6b0: 656c 662e 6e6f 7469 6679 2822 4572 726f  elf.notify("Erro
+0000a6c0: 7220 7265 7472 6569 7669 6e67 2074 6865  r retreiving the
+0000a6d0: 2074 7261 6e73 6163 7469 6f6e 2064 6174   transaction dat
+0000a6e0: 6120 6672 6f6d 2074 6865 2073 6f75 7263  a from the sourc
+0000a6f0: 6520 6669 6c65 2e20 4162 6f72 7469 6e67  e file. Aborting
+0000a700: 2e5c 6e22 2b73 7472 2865 292c 7469 746c  .\n"+str(e),titl
+0000a710: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
+0000a720: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000a730: 696e 7428 2274 7261 6e73 6163 7469 6f6e  int("transaction
+0000a740: 5f64 6174 6122 2c74 7261 6e73 6163 7469  _data",transacti
+0000a750: 6f6e 5f64 6174 6129 0d0a 2020 2020 2020  on_data)..      
+0000a760: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0000a770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a780: 2020 2020 2020 2320 7472 7920 746f 206c        # try to l
+0000a790: 6f61 6420 6e6f 7465 730d 0a20 2020 2020  oad notes..     
+0000a7a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000a7b0: 6620 226e 6f74 6573 2220 696e 2074 7261  f "notes" in tra
+0000a7c0: 6e73 6163 7469 6f6e 5f64 6174 613a 0d0a  nsaction_data:..
+0000a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7e0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+0000a7f0: 6573 4564 6974 2e73 6574 506c 6169 6e54  esEdit.setPlainT
+0000a800: 6578 7428 7472 616e 7361 6374 696f 6e5f  ext(transaction_
+0000a810: 6461 7461 5b22 6e6f 7465 7322 5d29 0d0a  data["notes"])..
+0000a820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a830: 2020 2020 2020 2320 7472 7920 746f 206c        # try to l
+0000a840: 6f61 6420 636f 6c6f 7220 7468 656d 650d  oad color theme.
 0000a850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a860: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-0000a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a880: 2020 2020 2020 2020 2020 2074 6865 6d65             theme
-0000a890: 5f66 6e61 6d65 203d 2074 7261 6e73 6163  _fname = transac
-0000a8a0: 7469 6f6e 5f64 6174 615b 2274 6865 6d65  tion_data["theme
-0000a8b0: 225d 5b22 636f 6c6f 7273 225d 0d0a 2020  "]["colors"]..  
-0000a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8d0: 2020 2020 2020 2020 2020 6774 6865 6d65            gtheme
-0000a8e0: 203d 2074 7261 6e73 6163 7469 6f6e 5f64   = transaction_d
-0000a8f0: 6174 615b 2274 6865 6d65 225d 5b22 676c  ata["theme"]["gl
-0000a900: 6f62 616c 7468 656d 6522 5d0d 0a20 2020  obaltheme"]..   
-0000a910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a920: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-0000a930: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
-0000a940: 6865 6d65 2021 3d20 6774 6865 6d65 3a0d  heme != gtheme:.
-0000a950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a970: 2073 656c 662e 7377 6974 6368 5f74 6865   self.switch_the
-0000a980: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
+0000a860: 2020 2020 2069 6620 7472 616e 7361 6374       if transact
+0000a870: 696f 6e5f 6461 7461 5b22 7468 656d 6522  ion_data["theme"
+0000a880: 5d20 6973 206e 6f74 204e 6f6e 653a 0d0a  ] is not None:..
+0000a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8a0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8c0: 2020 2020 2020 2020 2020 7468 656d 655f            theme_
+0000a8d0: 666e 616d 6520 3d20 7472 616e 7361 6374  fname = transact
+0000a8e0: 696f 6e5f 6461 7461 5b22 7468 656d 6522  ion_data["theme"
+0000a8f0: 5d5b 2263 6f6c 6f72 7322 5d0d 0a20 2020  ]["colors"]..   
+0000a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a910: 2020 2020 2020 2020 2067 7468 656d 6520           gtheme 
+0000a920: 3d20 7472 616e 7361 6374 696f 6e5f 6461  = transaction_da
+0000a930: 7461 5b22 7468 656d 6522 5d5b 2267 6c6f  ta["theme"]["glo
+0000a940: 6261 6c74 6865 6d65 225d 0d0a 2020 2020  baltheme"]..    
+0000a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a960: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000a970: 7468 656d 655f 6d61 6e61 6765 722e 7468  theme_manager.th
+0000a980: 656d 6520 213d 2067 7468 656d 653a 0d0a  eme != gtheme:..
 0000a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9a0: 2020 7365 6c66 2e74 6865 6d65 5f6d 616e    self.theme_man
-0000a9b0: 6167 6572 2e6c 6f61 645f 636f 6c6f 7273  ager.load_colors
-0000a9c0: 2874 6865 6d65 5f66 6e61 6d65 290d 0a0d  (theme_fname)...
-0000a9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a9e0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-0000a9f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000aa00: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000aa10: 6c66 2e73 7461 7475 7342 6172 2829 2e73  lf.statusBar().s
-0000aa20: 686f 774d 6573 7361 6765 2822 436f 756c  howMessage("Coul
-0000aa30: 6420 6e6f 7420 6c6f 6164 2063 6f6c 6f72  d not load color
-0000aa40: 2074 6865 6d65 2e20 4661 6c6c 6261 636b   theme. Fallback
-0000aa50: 2074 6f20 7374 616e 6172 6420 7468 656d   to stanard them
-0000aa60: 6522 290d 0a0d 0a20 2020 2020 2020 2020  e")....         
-0000aa70: 2020 2020 2020 2020 2020 2023 206e 6577             # new
-0000aa80: 2066 6f72 6d61 740d 0a20 2020 2020 2020   format..       
-0000aa90: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000aaa0: 662e 656e 7472 795f 6461 7461 203d 2074  f.entry_data = t
-0000aab0: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
-0000aac0: 2274 7261 6e73 6163 7469 6f6e 7322 5d0d  "transactions"].
-0000aad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000aae0: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-0000aaf0: 6e76 6173 2e63 6c65 6172 2863 6c65 6172  nvas.clear(clear
-0000ab00: 616c 6c3d 5472 7565 290d 0a20 2020 2020  all=True)..     
-0000ab10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000ab20: 2061 6464 2074 6865 2068 656c 7065 7220   add the helper 
-0000ab30: 6167 656e 7473 0d0a 0d0a 2020 2020 2020  agents....      
-0000ab40: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0000ab50: 7220 6b2c 7620 696e 2074 7261 6e73 6163  r k,v in transac
-0000ab60: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
-0000ab70: 7322 5d2e 6974 656d 7328 293a 0d0a 2020  s"].items():..  
-0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab90: 2020 2020 2020 7365 6c66 2e64 7261 7763        self.drawc
-0000aba0: 616e 7661 732e 6164 645f 6167 656e 7428  anvas.add_agent(
-0000abb0: 6b29 2023 202e 6361 7069 7461 6c69 7a65  k) # .capitalize
-0000abc0: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
-0000abd0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000abe0: 6e74 2822 4164 6420 6167 656e 7422 2c20  nt("Add agent", 
-0000abf0: 6b29 2023 2e63 6170 6974 616c 697a 6528  k) #.capitalize(
-0000ac00: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-0000ac10: 2020 2020 2020 2020 2020 2320 6164 6420            # add 
-0000ac20: 7468 6520 7472 616e 7361 6374 696f 6e73  the transactions
-0000ac30: 2028 636f 6e6e 6563 746f 7273 2061 6e64   (connectors and
-0000ac40: 2062 6f78 6573 290d 0a20 2020 2020 2020   boxes)..       
-0000ac50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000ac60: 662e 7570 6461 7465 5f74 6162 6c65 2829  f.update_table()
-0000ac70: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000ac80: 2020 2020 2020 2020 2320 6c6f 6164 2061          # load a
-0000ac90: 6765 6e74 2773 2063 6f64 6573 0d0a 0d0a  gent's codes....
-0000aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acb0: 2020 2020 2320 6669 7273 742c 2063 6f6d      # first, com
-0000acc0: 7061 7265 2069 6620 7468 6520 636f 6465  pare if the code
-0000acd0: 2069 6e20 7468 6520 6669 6c65 2074 7265   in the file tre
-0000ace0: 6520 2869 6620 616e 7929 2063 6f72 7265  e (if any) corre
-0000acf0: 7370 6f6e 6473 2074 6f20 7468 6520 636f  sponds to the co
-0000ad00: 6465 2069 6e20 7468 6520 2e73 6663 746c  de in the .sfctl
-0000ad10: 2066 696c 650d 0a0d 0a20 2020 2020 2020   file....       
-0000ad20: 2020 2020 2020 2020 2020 2020 2023 2063               # c
-0000ad30: 6865 636b 2069 6620 6669 6c65 2074 7265  heck if file tre
-0000ad40: 6520 6973 2065 7869 7374 656e 740d 0a20  e is existent.. 
-0000ad50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad60: 2020 206d 795f 6167 656e 7473 203d 206c     my_agents = l
-0000ad70: 6973 7428 7472 616e 7361 6374 696f 6e5f  ist(transaction_
-0000ad80: 6461 7461 5b22 6167 656e 7473 225d 2e6b  data["agents"].k
-0000ad90: 6579 7328 2929 0d0a 0d0a 2020 2020 2020  eys())....      
-0000ada0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000adb0: 6765 7420 6469 7265 6374 6f72 7920 6672  get directory fr
-0000adc0: 6f6d 2066 696c 656e 616d 650d 0a20 2020  om filename..   
-0000add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ade0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0000adf0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000ae00: 7269 6e74 2822 4348 4543 4b20 4449 5245  rint("CHECK DIRE
-0000ae10: 4354 4f52 5920 464f 5220 5550 4441 5445  CTORY FOR UPDATE
-0000ae20: 5322 2c20 6669 6c65 6e61 6d65 290d 0a20  S", filename).. 
-0000ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae40: 2020 2020 2020 2066 696c 6570 6174 6820         filepath 
-0000ae50: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-0000ae60: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
-0000ae70: 6828 6669 6c65 6e61 6d65 2929 0d0a 2020  h(filename))..  
-0000ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae90: 2020 2020 2020 6d61 6d62 615f 7061 7468        mamba_path
-0000aea0: 203d 2066 696c 6570 6174 6820 2b20 222f   = filepath + "/
-0000aeb0: 6d61 6d62 615f 636f 6465 220d 0a20 2020  mamba_code"..   
+0000a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9b0: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
+0000a9c0: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+0000a9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9e0: 2073 656c 662e 7468 656d 655f 6d61 6e61   self.theme_mana
+0000a9f0: 6765 722e 6c6f 6164 5f63 6f6c 6f72 7328  ger.load_colors(
+0000aa00: 7468 656d 655f 666e 616d 6529 0d0a 0d0a  theme_fname)....
+0000aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa20: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0000aa30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000aa40: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000aa50: 662e 7374 6174 7573 4261 7228 292e 7368  f.statusBar().sh
+0000aa60: 6f77 4d65 7373 6167 6528 2243 6f75 6c64  owMessage("Could
+0000aa70: 206e 6f74 206c 6f61 6420 636f 6c6f 7220   not load color 
+0000aa80: 7468 656d 652e 2046 616c 6c62 6163 6b20  theme. Fallback 
+0000aa90: 746f 2073 7461 6e61 7264 2074 6865 6d65  to stanard theme
+0000aaa0: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
+0000aab0: 2020 2020 2020 2020 2020 2320 6e65 7720            # new 
+0000aac0: 666f 726d 6174 0d0a 2020 2020 2020 2020  format..        
+0000aad0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000aae0: 2e65 6e74 7279 5f64 6174 6120 3d20 7472  .entry_data = tr
+0000aaf0: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
+0000ab00: 7472 616e 7361 6374 696f 6e73 225d 0d0a  transactions"]..
+0000ab10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab20: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
+0000ab30: 7661 732e 636c 6561 7228 636c 6561 7261  vas.clear(cleara
+0000ab40: 6c6c 3d54 7275 6529 0d0a 2020 2020 2020  ll=True)..      
+0000ab50: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000ab60: 6164 6420 7468 6520 6865 6c70 6572 2061  add the helper a
+0000ab70: 6765 6e74 730d 0a0d 0a20 2020 2020 2020  gents....       
+0000ab80: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0000ab90: 206b 2c76 2069 6e20 7472 616e 7361 6374   k,v in transact
+0000aba0: 696f 6e5f 6461 7461 5b22 6167 656e 7473  ion_data["agents
+0000abb0: 225d 2e69 7465 6d73 2829 3a0d 0a20 2020  "].items():..   
+0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abd0: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+0000abe0: 6e76 6173 2e61 6464 5f61 6765 6e74 286b  nvas.add_agent(k
+0000abf0: 2920 2320 2e63 6170 6974 616c 697a 6528  ) # .capitalize(
+0000ac00: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000ac10: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0000ac20: 7428 2241 6464 2061 6765 6e74 222c 206b  t("Add agent", k
+0000ac30: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
+0000ac40: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000ac50: 2020 2020 2020 2020 2023 2061 6464 2074           # add t
+0000ac60: 6865 2074 7261 6e73 6163 7469 6f6e 7320  he transactions 
+0000ac70: 2863 6f6e 6e65 6374 6f72 7320 616e 6420  (connectors and 
+0000ac80: 626f 7865 7329 0d0a 2020 2020 2020 2020  boxes)..        
+0000ac90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000aca0: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
+0000acb0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000acc0: 2020 2020 2020 2023 206c 6f61 6420 6167         # load ag
+0000acd0: 656e 7427 7320 636f 6465 730d 0a0d 0a20  ent's codes.... 
+0000ace0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000acf0: 2020 2023 2066 6972 7374 2c20 636f 6d70     # first, comp
+0000ad00: 6172 6520 6966 2074 6865 2063 6f64 6520  are if the code 
+0000ad10: 696e 2074 6865 2066 696c 6520 7472 6565  in the file tree
+0000ad20: 2028 6966 2061 6e79 2920 636f 7272 6573   (if any) corres
+0000ad30: 706f 6e64 7320 746f 2074 6865 2063 6f64  ponds to the cod
+0000ad40: 6520 696e 2074 6865 202e 7366 6374 6c20  e in the .sfctl 
+0000ad50: 6669 6c65 0d0a 0d0a 2020 2020 2020 2020  file....        
+0000ad60: 2020 2020 2020 2020 2020 2020 2320 6368              # ch
+0000ad70: 6563 6b20 6966 2066 696c 6520 7472 6565  eck if file tree
+0000ad80: 2069 7320 6578 6973 7465 6e74 0d0a 2020   is existent..  
+0000ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ada0: 2020 6d79 5f61 6765 6e74 7320 3d20 6c69    my_agents = li
+0000adb0: 7374 2874 7261 6e73 6163 7469 6f6e 5f64  st(transaction_d
+0000adc0: 6174 615b 2261 6765 6e74 7322 5d2e 6b65  ata["agents"].ke
+0000add0: 7973 2829 290d 0a0d 0a20 2020 2020 2020  ys())....       
+0000ade0: 2020 2020 2020 2020 2020 2020 2023 2067               # g
+0000adf0: 6574 2064 6972 6563 746f 7279 2066 726f  et directory fro
+0000ae00: 6d20 6669 6c65 6e61 6d65 0d0a 2020 2020  m filename..    
+0000ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae20: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0000ae30: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000ae40: 696e 7428 2243 4845 434b 2044 4952 4543  int("CHECK DIREC
+0000ae50: 544f 5259 2046 4f52 2055 5044 4154 4553  TORY FOR UPDATES
+0000ae60: 222c 2066 696c 656e 616d 6529 0d0a 2020  ", filename)..  
+0000ae70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae80: 2020 2020 2020 6669 6c65 7061 7468 203d        filepath =
+0000ae90: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+0000aea0: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
+0000aeb0: 2866 696c 656e 616d 6529 290d 0a20 2020  (filename))..   
 0000aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aed0: 2020 2020 2070 7269 6e74 2822 6d61 6d62       print("mamb
-0000aee0: 6120 7061 7468 222c 6d61 6d62 615f 7061  a path",mamba_pa
-0000aef0: 7468 290d 0a0d 0a20 2020 2020 2020 2020  th)....         
-0000af00: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000af10: 7367 203d 2022 4920 6861 7665 2064 6574  sg = "I have det
-0000af20: 6563 7465 6420 6120 6465 7669 6174 696f  ected a deviatio
-0000af30: 6e20 6265 7477 6565 6e20 7468 6520 2f6d  n between the /m
-0000af40: 616d 6261 5f63 6f64 652f 2064 6972 6563  amba_code/ direc
-0000af50: 746f 7279 2061 6e64 2074 6865 2063 6f64  tory and the cod
-0000af60: 6520 7374 6f72 6564 2069 6e20 7468 6973  e stored in this
-0000af70: 2066 696c 6521 220d 0a20 2020 2020 2020   file!"..       
-0000af80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af90: 206d 7367 202b 3d20 2220 4166 6665 6374   msg += " Affect
-0000afa0: 6564 2066 696c 6573 3a5c 6e5c 6e22 0d0a  ed files:\n\n"..
-0000afb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000afc0: 2020 2020 2020 2020 2020 7375 625f 6e61            sub_na
-0000afd0: 6d65 7320 3d20 6e65 7874 286f 732e 7761  mes = next(os.wa
-0000afe0: 6c6b 286d 616d 6261 5f70 6174 6829 2c20  lk(mamba_path), 
-0000aff0: 284e 6f6e 652c 204e 6f6e 652c 205b 5d29  (None, None, [])
-0000b000: 295b 325d 2020 2320 5b5d 2069 6620 6e6f  )[2]  # [] if no
-0000b010: 2066 696c 650d 0a20 2020 2020 2020 2020   file..         
-0000b020: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000b030: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
-0000b040: 6174 6120 3d20 7b7d 0d0a 2020 2020 2020  ata = {}..      
-0000b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b060: 2020 616c 745f 6469 6666 7320 3d20 7b7d    alt_diffs = {}
-0000b070: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000b080: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000b090: 6669 2069 6e20 7375 625f 6e61 6d65 733a  fi in sub_names:
-0000b0a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0c0: 2320 6368 6563 6b20 6669 6c65 6e61 6d65  # check filename
-0000b0d0: 2066 6f72 2061 6765 6e74 0d0a 2020 2020   for agent..    
-0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0f0: 2020 2020 2020 2020 616e 616d 6520 3d20          aname = 
-0000b100: 6361 6d65 6c28 6669 5b3a 2d34 5d29 2023  camel(fi[:-4]) #
-0000b110: 202e 6361 7069 7461 6c69 7a65 2829 0d0a   .capitalize()..
-0000b120: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b130: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0000b140: 696e 7428 2246 696c 6520 222c 616e 616d  int("File ",anam
-0000b150: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0000b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b170: 6966 2061 6e61 6d65 2069 6e20 6d79 5f61  if aname in my_a
-0000b180: 6765 6e74 733a 0d0a 0d0a 2020 2020 2020  gents:....      
-0000b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b1a0: 2020 2020 2020 2020 2020 2320 7265 6164            # read
-0000b1b0: 2074 6869 7320 6669 6c65 0d0a 2020 2020   this file..    
-0000b1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b1d0: 2020 2020 2020 2020 2020 2020 7769 7468              with
-0000b1e0: 206f 7065 6e28 6d61 6d62 615f 7061 7468   open(mamba_path
-0000b1f0: 2b22 2f22 202b 2066 692c 2272 2229 2061  +"/" + fi,"r") a
-0000b200: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
-0000b210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b220: 2020 2020 2020 2020 2020 2020 2063 6f64               cod
-0000b230: 6520 3d20 6669 6c65 2e72 6561 6428 290d  e = file.read().
-0000b240: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000aed0: 2020 2020 206d 616d 6261 5f70 6174 6820       mamba_path 
+0000aee0: 3d20 6669 6c65 7061 7468 202b 2022 2f6d  = filepath + "/m
+0000aef0: 616d 6261 5f63 6f64 6522 0d0a 2020 2020  amba_code"..    
+0000af00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af10: 2020 2020 7072 696e 7428 226d 616d 6261      print("mamba
+0000af20: 2070 6174 6822 2c6d 616d 6261 5f70 6174   path",mamba_pat
+0000af30: 6829 0d0a 0d0a 2020 2020 2020 2020 2020  h)....          
+0000af40: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+0000af50: 6720 3d20 2249 2068 6176 6520 6465 7465  g = "I have dete
+0000af60: 6374 6564 2061 2064 6576 6961 7469 6f6e  cted a deviation
+0000af70: 2062 6574 7765 656e 2074 6865 202f 6d61   between the /ma
+0000af80: 6d62 615f 636f 6465 2f20 6469 7265 6374  mba_code/ direct
+0000af90: 6f72 7920 616e 6420 7468 6520 636f 6465  ory and the code
+0000afa0: 2073 746f 7265 6420 696e 2074 6869 7320   stored in this 
+0000afb0: 6669 6c65 2122 0d0a 2020 2020 2020 2020  file!"..        
+0000afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000afd0: 6d73 6720 2b3d 2022 2041 6666 6563 7465  msg += " Affecte
+0000afe0: 6420 6669 6c65 733a 5c6e 5c6e 220d 0a0d  d files:\n\n"...
+0000aff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b000: 2020 2020 2020 2020 2073 7562 5f6e 616d           sub_nam
+0000b010: 6573 203d 206e 6578 7428 6f73 2e77 616c  es = next(os.wal
+0000b020: 6b28 6d61 6d62 615f 7061 7468 292c 2028  k(mamba_path), (
+0000b030: 4e6f 6e65 2c20 4e6f 6e65 2c20 5b5d 2929  None, None, []))
+0000b040: 5b32 5d20 2023 205b 5d20 6966 206e 6f20  [2]  # [] if no 
+0000b050: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
+0000b060: 2020 2020 2020 2020 2020 2020 2020 616c                al
+0000b070: 745f 7472 616e 7361 6374 696f 6e5f 6461  t_transaction_da
+0000b080: 7461 203d 207b 7d0d 0a20 2020 2020 2020  ta = {}..       
+0000b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b0a0: 2061 6c74 5f64 6966 6673 203d 207b 7d0d   alt_diffs = {}.
+0000b0b0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b0c0: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
+0000b0d0: 6920 696e 2073 7562 5f6e 616d 6573 3a0d  i in sub_names:.
+0000b0e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b0f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000b100: 2063 6865 636b 2066 696c 656e 616d 6520   check filename 
+0000b110: 666f 7220 6167 656e 740d 0a20 2020 2020  for agent..     
+0000b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b130: 2020 2020 2020 2061 6e61 6d65 203d 2063         aname = c
+0000b140: 616d 656c 2866 695b 3a2d 345d 2920 2320  amel(fi[:-4]) # 
+0000b150: 2e63 6170 6974 616c 697a 6528 290d 0a0d  .capitalize()...
+0000b160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b170: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b180: 6e74 2822 4669 6c65 2022 2c61 6e61 6d65  nt("File ",aname
+0000b190: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000b1a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000b1b0: 6620 616e 616d 6520 696e 206d 795f 6167  f aname in my_ag
+0000b1c0: 656e 7473 3a0d 0a0d 0a20 2020 2020 2020  ents:....       
+0000b1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1e0: 2020 2020 2020 2020 2023 2072 6561 6420           # read 
+0000b1f0: 7468 6973 2066 696c 650d 0a20 2020 2020  this file..     
+0000b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b210: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+0000b220: 6f70 656e 286d 616d 6261 5f70 6174 682b  open(mamba_path+
+0000b230: 222f 2220 2b20 6669 2c22 7222 2920 6173  "/" + fi,"r") as
+0000b240: 2066 696c 653a 0d0a 2020 2020 2020 2020   file:..        
 0000b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b260: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-0000b270: 6465 7620 6d61 6d62 6120 666f 6c64 6572  dev mamba folder
-0000b280: 3a20 222c 636f 6465 290d 0a20 2020 2020  : ",code)..     
+0000b260: 2020 2020 2020 2020 2020 2020 636f 6465              code
+0000b270: 203d 2066 696c 652e 7265 6164 2829 0d0a   = file.read()..
+0000b280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0000b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000b2b0: 2070 7269 6e74 2822 6465 7620 7366 6374   print("dev sfct
-0000b2c0: 6c20 6669 6c65 3a22 2c20 7472 616e 7361  l file:", transa
-0000b2d0: 6374 696f 6e5f 6461 7461 5b22 6167 656e  ction_data["agen
-0000b2e0: 7473 225d 5b61 6e61 6d65 5d29 0d0a 0d0a  ts"][aname])....
-0000b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b310: 2020 2020 6966 2063 6f64 652e 7374 7269      if code.stri
-0000b320: 7028 2920 213d 2074 7261 6e73 6163 7469  p() != transacti
-0000b330: 6f6e 5f64 6174 615b 2261 6765 6e74 7322  on_data["agents"
-0000b340: 5d5b 616e 616d 655d 2e73 7472 6970 2829  ][aname].strip()
-0000b350: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0000b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b370: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000b380: 6e74 2822 4445 5649 4154 494f 4e20 6465  nt("DEVIATION de
-0000b390: 7465 6374 6564 2069 6e20 222c 616e 616d  tected in ",anam
-0000b3a0: 6529 0d0a 0d0a 0d0a 2020 2020 2020 2020  e)......        
-0000b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3d0: 616c 745f 7472 616e 7361 6374 696f 6e5f  alt_transaction_
-0000b3e0: 6461 7461 5b61 6e61 6d65 5d20 3d20 636f  data[aname] = co
-0000b3f0: 6465 0d0a 0d0a 2020 2020 2020 2020 2020  de....          
-0000b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b410: 2020 2020 2020 2020 2020 2020 2020 6469                di
-0000b420: 6666 203d 2020 5b6c 6920 666f 7220 6c69  ff =  [li for li
-0000b430: 2069 6e20 6469 6666 6c69 622e 6e64 6966   in difflib.ndif
-0000b440: 6628 636f 6465 2e73 7472 6970 2829 2c20  f(code.strip(), 
-0000b450: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
-0000b460: 5b22 6167 656e 7473 225d 5b61 6e61 6d65  ["agents"][aname
-0000b470: 5d2e 7374 7269 7028 2929 2069 6620 6c69  ].strip()) if li
-0000b480: 5b30 5d20 213d 2027 2027 5d0d 0a20 2020  [0] != ' ']..   
-0000b490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4b0: 2020 2020 2061 6c74 5f64 6966 6673 5b61       alt_diffs[a
-0000b4c0: 6e61 6d65 5d20 3d20 7374 7228 6469 6666  name] = str(diff
-0000b4d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000b2a0: 2020 2020 2020 2320 7072 696e 7428 2264        # print("d
+0000b2b0: 6576 206d 616d 6261 2066 6f6c 6465 723a  ev mamba folder:
+0000b2c0: 2022 2c63 6f64 6529 0d0a 2020 2020 2020   ",code)..      
+0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000b2f0: 7072 696e 7428 2264 6576 2073 6663 746c  print("dev sfctl
+0000b300: 2066 696c 653a 222c 2074 7261 6e73 6163   file:", transac
+0000b310: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
+0000b320: 7322 5d5b 616e 616d 655d 290d 0a0d 0a20  s"][aname]).... 
+0000b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b350: 2020 2069 6620 636f 6465 2e73 7472 6970     if code.strip
+0000b360: 2829 2021 3d20 7472 616e 7361 6374 696f  () != transactio
+0000b370: 6e5f 6461 7461 5b22 6167 656e 7473 225d  n_data["agents"]
+0000b380: 5b61 6e61 6d65 5d2e 7374 7269 7028 293a  [aname].strip():
+0000b390: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3b0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0000b3c0: 7428 2244 4556 4941 5449 4f4e 2064 6574  t("DEVIATION det
+0000b3d0: 6563 7465 6420 696e 2022 2c61 6e61 6d65  ected in ",aname
+0000b3e0: 290d 0a0d 0a0d 0a20 2020 2020 2020 2020  )......         
+0000b3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b400: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000b410: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
+0000b420: 6174 615b 616e 616d 655d 203d 2063 6f64  ata[aname] = cod
+0000b430: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
+0000b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b450: 2020 2020 2020 2020 2020 2020 2064 6966               dif
+0000b460: 6620 3d20 205b 6c69 2066 6f72 206c 6920  f =  [li for li 
+0000b470: 696e 2064 6966 666c 6962 2e6e 6469 6666  in difflib.ndiff
+0000b480: 2863 6f64 652e 7374 7269 7028 292c 2074  (code.strip(), t
+0000b490: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
+0000b4a0: 2261 6765 6e74 7322 5d5b 616e 616d 655d  "agents"][aname]
+0000b4b0: 2e73 7472 6970 2829 2920 6966 206c 695b  .strip()) if li[
+0000b4c0: 305d 2021 3d20 2720 275d 0d0a 2020 2020  0] != ' ']..    
+0000b4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4f0: 2020 2020 2020 2020 2020 2020 2073 7472               str
-0000b500: 6469 6666 203d 2073 7472 2864 6966 6629  diff = str(diff)
-0000b510: 2e73 7472 6970 2829 0d0a 0d0a 2020 2020  .strip()....    
+0000b4f0: 2020 2020 616c 745f 6469 6666 735b 616e      alt_diffs[an
+0000b500: 616d 655d 203d 2073 7472 2864 6966 6629  ame] = str(diff)
+0000b510: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0000b520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b540: 2020 2020 6966 206c 656e 2873 7472 6469      if len(strdi
-0000b550: 6666 2920 3e20 3430 3a0d 0a20 2020 2020  ff) > 40:..     
+0000b530: 2020 2020 2020 2020 2020 2020 7374 7264              strd
+0000b540: 6966 6620 3d20 7374 7228 6469 6666 292e  iff = str(diff).
+0000b550: 7374 7269 7028 290d 0a0d 0a20 2020 2020  strip()....     
 0000b560: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b580: 2020 2020 2020 2073 7472 6469 6666 203d         strdiff =
-0000b590: 2073 7472 6469 6666 5b3a 375d 202b 2022   strdiff[:7] + "
-0000b5a0: 2e2e 2e22 0d0a 2020 2020 2020 2020 2020  ..."..          
+0000b580: 2020 2069 6620 6c65 6e28 7374 7264 6966     if len(strdif
+0000b590: 6629 203e 2034 303a 0d0a 2020 2020 2020  f) > 40:..      
+0000b5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5c0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0000b5d0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0000b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b5c0: 2020 2020 2020 7374 7264 6966 6620 3d20        strdiff = 
+0000b5d0: 7374 7264 6966 665b 3a37 5d20 2b20 222e  strdiff[:7] + ".
+0000b5e0: 2e2e 220d 0a20 2020 2020 2020 2020 2020  .."..           
 0000b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b600: 2073 7472 6469 6666 203d 2073 7472 6469   strdiff = strdi
-0000b610: 6666 0d0a 0d0a 2020 2020 2020 2020 2020  ff....          
+0000b600: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000b610: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
 0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b630: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
-0000b640: 6720 2b3d 2066 6920 2b20 223a 2022 202b  g += fi + ": " +
-0000b650: 2073 7472 6469 6666 202b 2022 5c6e 220d   strdiff + "\n".
-0000b660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b680: 2020 2020 2020 2020 2070 7269 6e74 2864           print(d
-0000b690: 6966 6629 0d0a 2020 2020 2020 2020 2020  iff)..          
+0000b630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b640: 7374 7264 6966 6620 3d20 7374 7264 6966  strdiff = strdif
+0000b650: 660d 0a0d 0a20 2020 2020 2020 2020 2020  f....           
+0000b660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b670: 2020 2020 2020 2020 2020 2020 206d 7367               msg
+0000b680: 202b 3d20 6669 202b 2022 3a20 2220 2b20   += fi + ": " + 
+0000b690: 7374 7264 6966 6620 2b20 225c 6e22 0d0a  strdiff + "\n"..
 0000b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6b0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0000b6c0: 696e 7428 225c 6e22 290d 0a0d 0a20 2020  int("\n")....   
-0000b6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6e0: 2020 2020 206d 7367 202b 3d20 225c 6e44       msg += "\nD
-0000b6f0: 6f20 796f 7520 7761 6e74 2074 6f20 6164  o you want to ad
-0000b700: 6170 7420 7468 6520 6578 7465 726e 616c  apt the external
-0000b710: 2063 6861 6e67 6573 3f22 0d0a 2020 2020   changes?"..    
-0000b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b730: 2020 2020 2320 7365 6c66 2e6e 6f74 6966      # self.notif
-0000b740: 7928 6d73 672c 7469 746c 653d 2243 6861  y(msg,title="Cha
-0000b750: 6e67 6573 2044 6574 6563 7465 6422 290d  nges Detected").
-0000b760: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000b770: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0000b780: 6e28 616c 745f 7472 616e 7361 6374 696f  n(alt_transactio
-0000b790: 6e5f 6461 7461 2920 3e20 303a 0d0a 0d0a  n_data) > 0:....
-0000b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7b0: 2020 2020 2020 2020 2020 2020 716d 203d              qm =
-0000b7c0: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
-0000b7d0: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
+0000b6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b6c0: 2020 2020 2020 2020 7072 696e 7428 6469          print(di
+0000b6d0: 6666 290d 0a20 2020 2020 2020 2020 2020  ff)..           
+0000b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b6f0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b700: 6e74 2822 5c6e 2229 0d0a 0d0a 2020 2020  nt("\n")....    
+0000b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b720: 2020 2020 6d73 6720 2b3d 2022 5c6e 446f      msg += "\nDo
+0000b730: 2079 6f75 2077 616e 7420 746f 2061 6461   you want to ada
+0000b740: 7074 2074 6865 2065 7874 6572 6e61 6c20  pt the external 
+0000b750: 6368 616e 6765 733f 220d 0a20 2020 2020  changes?"..     
+0000b760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b770: 2020 2023 2073 656c 662e 6e6f 7469 6679     # self.notify
+0000b780: 286d 7367 2c74 6974 6c65 3d22 4368 616e  (msg,title="Chan
+0000b790: 6765 7320 4465 7465 6374 6564 2229 0d0a  ges Detected")..
+0000b7a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b7b0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0000b7c0: 2861 6c74 5f74 7261 6e73 6163 7469 6f6e  (alt_transaction
+0000b7d0: 5f64 6174 6129 203e 2030 3a0d 0a0d 0a20  _data) > 0:.... 
 0000b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7f0: 716d 2e73 6574 5769 6e64 6f77 5469 746c  qm.setWindowTitl
-0000b800: 6528 2243 6175 7469 6f6e 2229 0d0a 2020  e("Caution")..  
-0000b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b820: 2020 2020 2020 2020 2020 2320 716d 2e73            # qm.s
-0000b830: 6574 5465 7874 286d 6573 7361 6765 290d  etText(message).
-0000b840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b850: 2020 2020 2020 2020 2020 2020 2073 7479               sty
-0000b860: 6c65 203d 2073 656c 662e 7468 656d 655f  le = self.theme_
-0000b870: 6d61 6e61 6765 722e 6765 745f 6e6f 7469  manager.get_noti
-0000b880: 6669 6361 7469 6f6e 5f73 7479 6c65 2829  fication_style()
-0000b890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b8a0: 2020 2020 2020 2020 2020 2020 2020 716d                qm
-0000b8b0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-0000b8c0: 7479 6c65 290d 0a0d 0a0d 0a20 2020 2020  tyle)......     
-0000b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8e0: 2020 2020 2020 2072 6574 203d 2071 6d2e         ret = qm.
-0000b8f0: 7175 6573 7469 6f6e 2873 656c 662c 2743  question(self,'C
-0000b900: 6175 7469 6f6e 272c 206d 7367 202c 2071  aution', msg , q
-0000b910: 6d2e 5965 7320 7c20 716d 2e4e 6f29 0d0a  m.Yes | qm.No)..
-0000b920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b930: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000b940: 2072 6574 203d 3d20 716d 2e59 6573 3a0d   ret == qm.Yes:.
-0000b950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b970: 2066 6f72 206b 2c76 2069 6e20 616c 745f   for k,v in alt_
-0000b980: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
-0000b990: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+0000b7f0: 2020 2020 2020 2020 2020 2071 6d20 3d20             qm = 
+0000b800: 514d 6573 7361 6765 426f 7828 7365 6c66  QMessageBox(self
+0000b810: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000b820: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0000b830: 6d2e 7365 7457 696e 646f 7754 6974 6c65  m.setWindowTitle
+0000b840: 2822 4361 7574 696f 6e22 290d 0a20 2020  ("Caution")..   
+0000b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b860: 2020 2020 2020 2020 2023 2071 6d2e 7365           # qm.se
+0000b870: 7454 6578 7428 6d65 7373 6167 6529 0d0a  tText(message)..
+0000b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b890: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+0000b8a0: 6520 3d20 7365 6c66 2e74 6865 6d65 5f6d  e = self.theme_m
+0000b8b0: 616e 6167 6572 2e67 6574 5f6e 6f74 6966  anager.get_notif
+0000b8c0: 6963 6174 696f 6e5f 7374 796c 6528 290d  ication_style().
+0000b8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b8e0: 2020 2020 2020 2020 2020 2020 2071 6d2e               qm.
+0000b8f0: 7365 7453 7479 6c65 5368 6565 7428 7374  setStyleSheet(st
+0000b900: 796c 6529 0d0a 0d0a 0d0a 2020 2020 2020  yle)......      
+0000b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b920: 2020 2020 2020 7265 7420 3d20 716d 2e71        ret = qm.q
+0000b930: 7565 7374 696f 6e28 7365 6c66 2c27 4361  uestion(self,'Ca
+0000b940: 7574 696f 6e27 2c20 6d73 6720 2c20 716d  ution', msg , qm
+0000b950: 2e59 6573 207c 2071 6d2e 4e6f 290d 0a0d  .Yes | qm.No)...
+0000b960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b970: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000b980: 7265 7420 3d3d 2071 6d2e 5965 733a 0d0a  ret == qm.Yes:..
+0000b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9b0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000b9c0: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
-0000b9d0: 2261 6765 6e74 7322 5d5b 6b5d 203d 2061  "agents"][k] = a
-0000b9e0: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
-0000b9f0: 6174 615b 6b5d 0d0a 2020 2020 2020 2020  ata[k]..        
-0000ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba10: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000ba20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba30: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-0000ba40: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000ba50: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0000ba60: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-0000ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba80: 2020 2020 2020 2070 7269 6e74 2822 534f         print("SO
-0000ba90: 4d45 5448 494e 4720 5745 4e54 2057 524f  METHING WENT WRO
-0000baa0: 4e47 2229 0d0a 2020 2020 2020 2020 2020  NG")..          
-0000bab0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0000bac0: 696e 7428 7374 7228 6529 290d 0a0d 0a20  int(str(e)).... 
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 2023 0d0a 0d0a 2020 2020 2020 2020     #....        
-0000baf0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000bb00: 2e64 7261 7763 616e 7661 732e 636f 6465  .drawcanvas.code
-0000bb10: 5f64 6174 6120 3d20 7472 616e 7361 6374  _data = transact
-0000bb20: 696f 6e5f 6461 7461 5b22 6167 656e 7473  ion_data["agents
-0000bb30: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-0000bb40: 2020 2020 2020 2020 7072 696e 7428 2243          print("C
-0000bb50: 4f44 4520 4441 5441 222c 7472 616e 7361  ODE DATA",transa
-0000bb60: 6374 696f 6e5f 6461 7461 5b22 6167 656e  ction_data["agen
-0000bb70: 7473 225d 290d 0a0d 0a20 2020 2020 2020  ts"])....       
-0000bb80: 2020 2020 2020 2020 2020 2020 2023 206d               # m
-0000bb90: 6f76 6520 7468 6520 626f 7865 7320 746f  ove the boxes to
-0000bba0: 2074 6865 2073 6176 6564 2070 6f73 6974   the saved posit
-0000bbb0: 696f 6e73 0d0a 2020 2020 2020 2020 2020  ions..          
-0000bbc0: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
-0000bbd0: 7261 7763 616e 7661 732e 7265 706f 7369  rawcanvas.reposi
-0000bbe0: 7469 6f6e 2874 7261 6e73 6163 7469 6f6e  tion(transaction
-0000bbf0: 5f64 6174 615b 2262 6f78 5f70 6f73 6974  _data["box_posit
-0000bc00: 696f 6e73 225d 290d 0a0d 0a20 2020 2020  ions"])....     
-0000bc10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000bc20: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-0000bc30: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000bc40: 662e 6472 6177 6361 6e76 6173 2e72 6570  f.drawcanvas.rep
-0000bc50: 6f73 6974 696f 6e5f 6c61 6265 6c73 2874  osition_labels(t
-0000bc60: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
-0000bc70: 226c 6162 656c 5f70 6f73 6974 696f 6e73  "label_positions
-0000bc80: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
-0000bc90: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-0000bca0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000bcb0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0000bcc0: 2243 6f75 6c64 206e 6f74 206c 6f61 6420  "Could not load 
-0000bcd0: 6c61 6265 6c20 706f 7369 7469 6f6e 732e  label positions.
-0000bce0: 2052 6573 6574 7469 6e67 2074 6f20 7a65   Resetting to ze
-0000bcf0: 726f 2e22 290d 0a0d 0a20 2020 2020 2020  ro.")....       
-0000bd00: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000bd10: 662e 7365 7474 696e 6773 5f73 7472 203d  f.settings_str =
-0000bd20: 2074 7261 6e73 6163 7469 6f6e 5f64 6174   transaction_dat
-0000bd30: 615b 2273 6574 7469 6e67 7322 5d0d 0a0d  a["settings"]...
-0000bd40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bd50: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0000bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd70: 2020 2073 656c 662e 6d61 696e 6c6f 6f70     self.mainloop
-0000bd80: 5f73 7472 203d 2074 7261 6e73 6163 7469  _str = transacti
-0000bd90: 6f6e 5f64 6174 615b 226d 6169 6e6c 6f6f  on_data["mainloo
-0000bda0: 7022 5d0d 0a20 2020 2020 2020 2020 2020  p"]..           
-0000bdb0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-0000bdc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000bdd0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0000bde0: 224e 4f20 4d41 494e 4c4f 4f50 2046 4f4e  "NO MAINLOOP FON
-0000bdf0: 442e 2053 4b49 5050 494e 4722 290d 0a0d  D. SKIPPING")...
+0000b9b0: 666f 7220 6b2c 7620 696e 2061 6c74 5f74  for k,v in alt_t
+0000b9c0: 7261 6e73 6163 7469 6f6e 5f64 6174 612e  ransaction_data.
+0000b9d0: 6974 656d 7328 293a 0d0a 2020 2020 2020  items():..      
+0000b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9f0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0000ba00: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
+0000ba10: 6167 656e 7473 225d 5b6b 5d20 3d20 616c  agents"][k] = al
+0000ba20: 745f 7472 616e 7361 6374 696f 6e5f 6461  t_transaction_da
+0000ba30: 7461 5b6b 5d0d 0a20 2020 2020 2020 2020  ta[k]..         
+0000ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba50: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba70: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
+0000ba80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ba90: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+0000baa0: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+0000bab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bac0: 2020 2020 2020 7072 696e 7428 2253 4f4d        print("SOM
+0000bad0: 4554 4849 4e47 2057 454e 5420 5752 4f4e  ETHING WENT WRON
+0000bae0: 4722 290d 0a20 2020 2020 2020 2020 2020  G")..           
+0000baf0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000bb00: 6e74 2873 7472 2865 2929 0d0a 0d0a 2020  nt(str(e))....  
+0000bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb20: 2020 230d 0a0d 0a20 2020 2020 2020 2020    #....         
+0000bb30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000bb40: 6472 6177 6361 6e76 6173 2e63 6f64 655f  drawcanvas.code_
+0000bb50: 6461 7461 203d 2074 7261 6e73 6163 7469  data = transacti
+0000bb60: 6f6e 5f64 6174 615b 2261 6765 6e74 7322  on_data["agents"
+0000bb70: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0000bb80: 2020 2020 2020 2070 7269 6e74 2822 434f         print("CO
+0000bb90: 4445 2044 4154 4122 2c74 7261 6e73 6163  DE DATA",transac
+0000bba0: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
+0000bbb0: 7322 5d29 0d0a 0d0a 2020 2020 2020 2020  s"])....        
+0000bbc0: 2020 2020 2020 2020 2020 2020 2320 6d6f              # mo
+0000bbd0: 7665 2074 6865 2062 6f78 6573 2074 6f20  ve the boxes to 
+0000bbe0: 7468 6520 7361 7665 6420 706f 7369 7469  the saved positi
+0000bbf0: 6f6e 730d 0a20 2020 2020 2020 2020 2020  ons..           
+0000bc00: 2020 2020 2020 2020 2073 656c 662e 6472           self.dr
+0000bc10: 6177 6361 6e76 6173 2e72 6570 6f73 6974  awcanvas.reposit
+0000bc20: 696f 6e28 7472 616e 7361 6374 696f 6e5f  ion(transaction_
+0000bc30: 6461 7461 5b22 626f 785f 706f 7369 7469  data["box_positi
+0000bc40: 6f6e 7322 5d29 0d0a 0d0a 2020 2020 2020  ons"])....      
+0000bc50: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0000bc60: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0000bc70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000bc80: 2e64 7261 7763 616e 7661 732e 7265 706f  .drawcanvas.repo
+0000bc90: 7369 7469 6f6e 5f6c 6162 656c 7328 7472  sition_labels(tr
+0000bca0: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
+0000bcb0: 6c61 6265 6c5f 706f 7369 7469 6f6e 7322  label_positions"
+0000bcc0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0000bcd0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0000bce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bcf0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0000bd00: 436f 756c 6420 6e6f 7420 6c6f 6164 206c  Could not load l
+0000bd10: 6162 656c 2070 6f73 6974 696f 6e73 2e20  abel positions. 
+0000bd20: 5265 7365 7474 696e 6720 746f 207a 6572  Resetting to zer
+0000bd30: 6f2e 2229 0d0a 0d0a 2020 2020 2020 2020  o.")....        
+0000bd40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000bd50: 2e73 6574 7469 6e67 735f 7374 7220 3d20  .settings_str = 
+0000bd60: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
+0000bd70: 5b22 7365 7474 696e 6773 225d 0d0a 0d0a  ["settings"]....
+0000bd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd90: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0000bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bdb0: 2020 7365 6c66 2e6d 6169 6e6c 6f6f 705f    self.mainloop_
+0000bdc0: 7374 7220 3d20 7472 616e 7361 6374 696f  str = transactio
+0000bdd0: 6e5f 6461 7461 5b22 6d61 696e 6c6f 6f70  n_data["mainloop
+0000bde0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+0000bdf0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
 0000be00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000be10: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
-0000be20: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
-0000be30: 6528 224f 7065 6e65 6420 6669 6c65 2022  e("Opened file "
-0000be40: 202b 2066 696c 656e 616d 6529 0d0a 0d0a   + filename)....
-0000be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be60: 6578 6365 7074 3a0d 0a0d 0a20 2020 2020  except:....     
-0000be70: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000be80: 206f 6c64 2066 6f72 6d61 7420 6173 2066   old format as f
-0000be90: 616c 6c62 6163 6b0d 0a20 2020 2020 2020  allback..       
-0000bea0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000beb0: 662e 656e 7472 795f 6461 7461 203d 2074  f.entry_data = t
-0000bec0: 7261 6e73 6163 7469 6f6e 5f64 6174 610d  ransaction_data.
-0000bed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bee0: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-0000bef0: 6e76 6173 2e63 6f64 655f 6461 7461 203d  nvas.code_data =
-0000bf00: 2074 7261 6e73 6163 7469 6f6e 5f64 6174   transaction_dat
-0000bf10: 615b 2261 6765 6e74 7322 5d0d 0a20 2020  a["agents"]..   
-0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf30: 2073 656c 662e 7570 6461 7465 5f74 6162   self.update_tab
-0000bf40: 6c65 2829 0d0a 2020 2020 2020 2020 2020  le()..          
-0000bf50: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0000bf60: 2277 4152 4e49 4e47 202d 2046 414c 4c42  "wARNING - FALLB
-0000bf70: 4143 4b20 544f 204f 4c44 2046 494c 4520  ACK TO OLD FILE 
-0000bf80: 464f 524d 4154 2122 290d 0a0d 0a20 2020  FORMAT!")....   
-0000bf90: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-0000bfa0: 656c 662e 6669 6c65 4564 6974 2e73 6574  elf.fileEdit.set
-0000bfb0: 5465 7874 2866 696c 656e 616d 6529 0d0a  Text(filename)..
-0000bfc0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-0000bfd0: 2045 7863 6570 7469 6f6e 2061 7320 6520   Exception as e 
-0000bfe0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0000bff0: 2023 2073 656c 662e 6e6f 7469 6679 286d   # self.notify(m
-0000c000: 6573 7361 6765 3d22 536f 6d65 7468 696e  essage="Somethin
-0000c010: 6720 7765 6e74 2077 726f 6e67 2077 6865  g went wrong whe
-0000c020: 6e20 6f70 656e 696e 6720 7468 6520 6669  n opening the fi
-0000c030: 6c65 3a5c 6e20 2573 2225 7374 7228 6529  le:\n %s"%str(e)
-0000c040: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
-0000c050: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000c060: 662e 6669 6c65 6e61 6d65 203d 2066 696c  f.filename = fil
-0000c070: 656e 616d 655f 6261 636b 7570 0d0a 2020  ename_backup..  
-0000c080: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-0000c090: 7572 656e 745f 6669 6c65 203d 2063 7572  urent_file = cur
-0000c0a0: 7265 6e74 5f66 696c 655f 6261 636b 7570  rent_file_backup
-0000c0b0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0000c0c0: 2073 7472 2873 656c 662e 6375 7272 656e   str(self.curren
-0000c0d0: 745f 6669 6c65 2920 213d 2022 223a 0d0a  t_file) != "":..
-0000c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0f0: 7365 6c66 2e73 7461 7475 7342 6172 2829  self.statusBar()
-0000c100: 2e73 686f 774d 6573 7361 6765 2822 4361  .showMessage("Ca
-0000c110: 6e63 656c 6c65 642e 2052 6573 746f 7265  ncelled. Restore
-0000c120: 6420 6669 6c65 2027 2573 2722 2025 2073  d file '%s'" % s
-0000c130: 7472 2873 656c 662e 6375 7272 656e 745f  tr(self.current_
-0000c140: 6669 6c65 2929 0d0a 0d0a 2020 2020 2020  file))....      
-0000c150: 2020 2320 7570 6461 7465 2074 7261 6e73    # update trans
-0000c160: 6163 7469 6f6e 2074 6162 6c65 0d0a 2020  action table..  
-0000c170: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
-0000c180: 655f 7461 626c 6528 290d 0a0d 0a20 2020  e_table()....   
-0000c190: 2020 2020 2023 2075 7064 6174 6520 7468       # update th
-0000c1a0: 656d 650d 0a20 2020 2020 2020 2073 656c  eme..        sel
-0000c1b0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-0000c1c0: 7265 7374 6f72 6528 290d 0a0d 0a20 2020  restore()....   
-0000c1d0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0000c1e0: 2020 2020 2020 2066 6e61 6d65 2c20 6669         fname, fi
-0000c1f0: 6c65 5f65 7874 656e 7369 6f6e 203d 206f  le_extension = o
-0000c200: 732e 7061 7468 2e73 706c 6974 6578 7428  s.path.splitext(
-0000c210: 7365 6c66 2e66 696c 656e 616d 6529 0d0a  self.filename)..
-0000c220: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000c230: 2e74 6865 6d65 5f6d 616e 6167 6572 2e6c  .theme_manager.l
-0000c240: 6f61 645f 636f 6c6f 7273 2866 6e61 6d65  oad_colors(fname
-0000c250: 202b 2022 2e73 6663 7468 656d 6522 290d   + ".sfctheme").
-0000c260: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-0000c270: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-0000c280: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-0000c290: 7269 6e74 2822 636f 756c 6420 6e6f 7420  rint("could not 
-0000c2a0: 6c6f 6164 2074 6865 6d65 3a20 222c 2073  load theme: ", s
-0000c2b0: 7472 2865 2929 0d0a 0d0a 2020 2020 2020  tr(e))....      
-0000c2c0: 2020 2320 7570 6461 7465 2062 6f78 6573    # update boxes
-0000c2d0: 0d0a 2020 2020 2020 2020 666f 7220 626f  ..        for bo
-0000c2e0: 7820 696e 2073 656c 662e 6472 6177 6361  x in self.drawca
-0000c2f0: 6e76 6173 2e62 6f78 6573 3a0d 0a20 2020  nvas.boxes:..   
-0000c300: 2020 2020 2020 2020 2062 6f78 2e65 6469           box.edi
-0000c310: 745f 6167 656e 7428 290d 0a0d 0a20 2020  t_agent()....   
-0000c320: 2064 6566 2065 6e74 7279 5f74 6f5f 7661   def entry_to_va
-0000c330: 6c73 2873 656c 662c 656e 7472 792c 2061  ls(self,entry, a
-0000c340: 6765 6e74 2c77 6869 6368 293a 0d0a 0d0a  gent,which):....
-0000c350: 2020 2020 2020 2020 6966 206e 6f74 2062          if not b
-0000c360: 6f6f 6c28 7265 6765 782e 6669 6e64 616c  ool(regex.findal
-0000c370: 6c28 2228 5b2b 2d5d 2b29 222c 2065 6e74  l("([+-]+)", ent
-0000c380: 7279 2929 3a0d 0a20 2020 2020 2020 2020  ry)):..         
-0000c390: 2020 2073 656c 662e 6e6f 7469 6679 286d     self.notify(m
-0000c3a0: 6573 7361 6765 3d22 5369 676e 2063 6f72  essage="Sign cor
-0000c3b0: 7275 7074 6564 2069 6e20 656e 7472 7920  rupted in entry 
-0000c3c0: 2573 2028 2573 206f 6620 2573 2922 2528  %s (%s of %s)"%(
-0000c3d0: 656e 7472 792c 7768 6963 682c 6167 656e  entry,which,agen
-0000c3e0: 7429 2c74 6974 6c65 3d22 4572 726f 7222  t),title="Error"
-0000c3f0: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-0000c400: 6574 7572 6e20 4e6f 6e65 2c20 4e6f 6e65  eturn None, None
-0000c410: 2c20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  , None....      
-0000c420: 2020 6966 2072 6567 6578 2e66 696e 6461    if regex.finda
-0000c430: 6c6c 2822 285b 2b2d 5d2b 2922 2c20 656e  ll("([+-]+)", en
-0000c440: 7472 7929 5b30 5d20 3d3d 2022 2d22 3a0d  try)[0] == "-":.
-0000c450: 0a20 2020 2020 2020 2020 2020 2073 6967  .            sig
-0000c460: 6e20 3d20 222d 220d 0a20 2020 2020 2020  n = "-"..       
-0000c470: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0000c480: 2020 2020 7369 676e 203d 2022 2b22 0d0a      sign = "+"..
-0000c490: 0d0a 2020 2020 2020 2020 776f 7264 7320  ..        words 
-0000c4a0: 3d20 7265 6765 782e 6669 6e64 616c 6c28  = regex.findall(
-0000c4b0: 2228 5b5c 775c 735d 2b29 222c 2065 6e74  "([\w\s]+)", ent
-0000c4c0: 7279 290d 0a0d 0a20 2020 2020 2020 2069  ry)....        i
-0000c4d0: 7465 6d20 3d20 2222 0d0a 2020 2020 2020  tem = ""..      
-0000c4e0: 2020 7369 6c65 6e74 203d 2046 616c 7365    silent = False
-0000c4f0: 0d0a 2020 2020 2020 2020 666f 7220 776f  ..        for wo
-0000c500: 7264 2069 6e20 776f 7264 733a 0d0a 2020  rd in words:..  
-0000c510: 2020 2020 2020 2020 2020 6966 2077 6f72            if wor
-0000c520: 6420 213d 2022 7322 3a0d 0a20 2020 2020  d != "s":..     
-0000c530: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
-0000c540: 2b3d 2077 6f72 642e 7374 7269 7028 2920  += word.strip() 
-0000c550: 2b20 2220 220d 0a20 2020 2020 2020 2020  + " "..         
-0000c560: 2020 2065 6c69 6620 776f 7264 203d 3d20     elif word == 
-0000c570: 2273 223a 0d0a 2020 2020 2020 2020 2020  "s":..          
-0000c580: 2020 2020 2020 7369 6c65 6e74 203d 2054        silent = T
-0000c590: 7275 650d 0a0d 0a20 2020 2020 2020 2069  rue....        i
-0000c5a0: 7465 6d20 3d20 6974 656d 2e73 7472 6970  tem = item.strip
-0000c5b0: 2829 0d0a 0d0a 2020 2020 2020 2020 7265  ()....        re
-0000c5c0: 7475 726e 2073 6967 6e2c 2069 7465 6d2c  turn sign, item,
-0000c5d0: 2073 696c 656e 740d 0a0d 0a0d 0a20 2020   silent......   
-0000c5e0: 2064 6566 2075 7064 6174 655f 7461 626c   def update_tabl
-0000c5f0: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-0000c600: 2020 2373 656c 662e 7365 6c65 6374 696f    #self.selectio
-0000c610: 6e5f 6964 7820 3d20 4e6f 6e65 0d0a 2020  n_idx = None..  
-0000c620: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000c630: 6163 7469 6f6e 5669 6577 2e73 6574 526f  actionView.setRo
-0000c640: 7743 6f75 6e74 2830 290d 0a0d 0a20 2020  wCount(0)....   
-0000c650: 2020 2020 2023 2073 656c 662e 7472 616e       # self.tran
-0000c660: 7361 6374 696f 6e56 6965 772e 6d6f 6465  sactionView.mode
-0000c670: 6c28 292e 7365 7454 6f72 697a 6f6e 7461  l().setTorizonta
-0000c680: 6c48 6561 6465 7249 7465 6d28 2030 2c20  lHeaderItem( 0, 
-0000c690: 5154 6162 6c65 5769 6467 6574 4974 656d  QTableWidgetItem
-0000c6a0: 2822 4e61 6d65 2229 290d 0a20 2020 2020  ("Name"))..     
-0000c6b0: 2020 2023 2073 656c 662e 7472 616e 7361     # self.transa
-0000c6c0: 6374 696f 6e56 6965 772e 6d6f 6465 6c28  ctionView.model(
-0000c6d0: 292e 7365 7454 6f72 697a 6f6e 7461 6c48  ).setTorizontalH
-0000c6e0: 6561 6465 7249 7465 6d28 2031 2c20 5154  eaderItem( 1, QT
-0000c6f0: 6162 6c65 5769 6467 6574 4974 656d 2822  ableWidgetItem("
-0000c700: 5368 6f72 7420 4e61 6d65 2229 290d 0a20  Short Name")).. 
-0000c710: 2020 2020 2020 2023 2073 656c 662e 7472         # self.tr
-0000c720: 616e 7361 6374 696f 6e56 6965 772e 6d6f  ansactionView.mo
-0000c730: 6465 6c28 292e 7365 7454 6f72 697a 6f6e  del().setTorizon
-0000c740: 7461 6c48 6561 6465 7249 7465 6d28 2032  talHeaderItem( 2
-0000c750: 2c20 5154 6162 6c65 5769 6467 6574 4974  , QTableWidgetIt
-0000c760: 656d 2822 556e 6964 6972 6563 7469 6f6e  em("Unidirection
-0000c770: 616c 2229 290d 0a20 2020 2020 2020 2023  al"))..        #
-0000c780: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000c790: 6e56 6965 772e 6d6f 6465 6c28 292e 7365  nView.model().se
-0000c7a0: 7454 6f72 697a 6f6e 7461 6c48 6561 6465  tTorizontalHeade
-0000c7b0: 7249 7465 6d28 2033 2c20 5154 6162 6c65  rItem( 3, QTable
-0000c7c0: 5769 6467 6574 4974 656d 2822 466c 6f77  WidgetItem("Flow
-0000c7d0: 2229 290d 0a0d 0a20 2020 2020 2020 2023  "))....        #
-0000c7e0: 2069 6e73 6572 7420 6e65 7720 726f 7773   insert new rows
-0000c7f0: 2069 6620 6e65 6564 6564 0d0a 2020 2020   if needed..    
-0000c800: 2020 2020 726f 775f 636f 756e 7420 3d20      row_count = 
-0000c810: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000c820: 5669 6577 2e72 6f77 436f 756e 7428 290d  View.rowCount().
-0000c830: 0a0d 0a20 2020 2020 2020 2069 6620 7365  ...        if se
-0000c840: 6c66 2e65 6e74 7279 5f64 6174 6120 6973  lf.entry_data is
-0000c850: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0000c860: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-0000c870: 2244 6174 6120 6973 2065 6d70 7479 206f  "Data is empty o
-0000c880: 7220 636f 7272 7570 7465 642e 2053 6f6d  r corrupted. Som
-0000c890: 6574 6869 6e67 2077 656e 7420 7772 6f6e  ething went wron
-0000c8a0: 6722 2c20 7469 746c 653d 2246 6174 616c  g", title="Fatal
-0000c8b0: 2045 7272 6f72 2229 0d0a 2020 2020 2020   Error")..      
-0000c8c0: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
-0000c8d0: 2020 2020 2020 2020 6966 2072 6f77 5f63          if row_c
-0000c8e0: 6f75 6e74 203c 206c 656e 2873 656c 662e  ount < len(self.
-0000c8f0: 656e 7472 795f 6461 7461 293a 0d0a 2020  entry_data):..  
-0000c900: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-0000c910: 696e 2072 616e 6765 286c 656e 2873 656c  in range(len(sel
-0000c920: 662e 656e 7472 795f 6461 7461 292d 726f  f.entry_data)-ro
-0000c930: 775f 636f 756e 7429 3a0d 0a20 2020 2020  w_count):..     
-0000c940: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000c950: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000c960: 696e 7365 7274 526f 7728 726f 775f 636f  insertRow(row_co
-0000c970: 756e 7429 0d0a 0d0a 2020 2020 2020 2020  unt)....        
-0000c980: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0000c990: 636c 6561 7228 290d 0a20 2020 2020 2020  clear()..       
-0000c9a0: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
-0000c9b0: 6f2e 636c 6561 7228 290d 0a20 2020 2020  o.clear()..     
-0000c9c0: 2020 2073 656c 662e 6669 6c74 6572 5f65     self.filter_e
-0000c9d0: 6e74 7269 6573 203d 205b 5d0d 0a0d 0a20  ntries = [].... 
-0000c9e0: 2020 2020 2020 2066 6f72 2069 2c64 6174         for i,dat
-0000c9f0: 6120 696e 2065 6e75 6d65 7261 7465 2873  a in enumerate(s
-0000ca00: 656c 662e 656e 7472 795f 6461 7461 293a  elf.entry_data):
-0000ca10: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0000ca20: 6578 6973 7473 3120 3d20 7365 6c66 2e64  exists1 = self.d
-0000ca30: 7261 7763 616e 7661 732e 6368 6563 6b5f  rawcanvas.check_
-0000ca40: 6578 6973 7428 6461 7461 5b22 6167 656e  exist(data["agen
-0000ca50: 7431 225d 2e63 6170 6974 616c 697a 6528  t1"].capitalize(
-0000ca60: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000ca70: 2320 6578 6973 7473 3220 3d20 7365 6c66  # exists2 = self
-0000ca80: 2e64 7261 7763 616e 7661 732e 6368 6563  .drawcanvas.chec
-0000ca90: 6b5f 6578 6973 7428 6461 7461 5b22 6167  k_exist(data["ag
-0000caa0: 656e 7432 225d 2e63 6170 6974 616c 697a  ent2"].capitaliz
-0000cab0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
-0000cac0: 2020 2020 626f 7831 203d 2073 656c 662e      box1 = self.
-0000cad0: 6472 6177 6361 6e76 6173 2e61 6464 5f61  drawcanvas.add_a
-0000cae0: 6765 6e74 2863 616d 656c 2864 6174 615b  gent(camel(data[
-0000caf0: 2261 6765 6e74 3122 5d29 2920 2320 2e63  "agent1"])) # .c
-0000cb00: 6170 6974 616c 697a 6528 2929 0d0a 2020  apitalize())..  
-0000cb10: 2020 2020 2020 2020 2020 626f 7832 203d            box2 =
-0000cb20: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-0000cb30: 2e61 6464 5f61 6765 6e74 2863 616d 656c  .add_agent(camel
-0000cb40: 2864 6174 615b 2261 6765 6e74 3222 5d29  (data["agent2"])
-0000cb50: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
-0000cb60: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000cb70: 2023 2063 6f72 7265 6374 206e 756d 6265   # correct numbe
-0000cb80: 7220 6f66 2063 6f6e 6e65 6374 696f 6e73  r of connections
-0000cb90: 2066 6f72 2065 7869 7374 696e 6720 6167   for existing ag
-0000cba0: 656e 7473 0d0a 2020 2020 2020 2020 2020  ents..          
-0000cbb0: 2020 626f 7831 2e6e 5f63 6f6e 6e65 6374    box1.n_connect
-0000cbc0: 696f 6e73 203d 2030 0d0a 2020 2020 2020  ions = 0..      
-0000cbd0: 2020 2020 2020 626f 7832 2e6e 5f63 6f6e        box2.n_con
-0000cbe0: 6e65 6374 696f 6e73 203d 2030 0d0a 0d0a  nections = 0....
-0000cbf0: 2020 2020 2020 2020 2320 7570 6461 7465          # update
-0000cc00: 2074 6865 2064 6174 610d 0a20 2020 2020   the data..     
-0000cc10: 2020 2066 6f72 2069 2c20 6461 7461 2069     for i, data i
-0000cc20: 6e20 656e 756d 6572 6174 6528 7365 6c66  n enumerate(self
-0000cc30: 2e65 6e74 7279 5f64 6174 6129 3a0d 0a20  .entry_data):.. 
-0000cc40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0000cc50: 2864 6174 6129 0d0a 0d0a 2020 2020 2020  (data)....      
-0000cc60: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000cc70: 6163 7469 6f6e 5669 6577 2e73 6574 4974  actionView.setIt
-0000cc80: 656d 2869 2c20 302c 2051 5461 626c 6557  em(i, 0, QTableW
-0000cc90: 6964 6765 7449 7465 6d28 6461 7461 5b22  idgetItem(data["
-0000cca0: 7375 626a 6563 7422 5d29 290d 0a20 2020  subject"]))..   
-0000ccb0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0000ccc0: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-0000ccd0: 7449 7465 6d28 692c 2031 2c20 5154 6162  tItem(i, 1, QTab
-0000cce0: 6c65 5769 6467 6574 4974 656d 2863 616d  leWidgetItem(cam
-0000ccf0: 656c 2864 6174 615b 2261 6765 6e74 3122  el(data["agent1"
-0000cd00: 5d29 2929 2023 202e 6361 7069 7461 6c69  ]))) # .capitali
-0000cd10: 7a65 2829 2929 0d0a 2020 2020 2020 2020  ze()))..        
-0000cd20: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0000cd30: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
-0000cd40: 2869 2c20 322c 2051 5461 626c 6557 6964  (i, 2, QTableWid
-0000cd50: 6765 7449 7465 6d28 6361 6d65 6c28 6461  getItem(camel(da
-0000cd60: 7461 5b22 6167 656e 7432 225d 2929 2920  ta["agent2"]))) 
-0000cd70: 2320 2e63 6170 6974 616c 697a 6528 2929  # .capitalize())
-0000cd80: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000cd90: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000cda0: 6965 772e 7365 7449 7465 6d28 692c 2033  iew.setItem(i, 3
-0000cdb0: 2c20 5154 6162 6c65 5769 6467 6574 4974  , QTableWidgetIt
-0000cdc0: 656d 2864 6174 615b 2273 686f 7274 6e61  em(data["shortna
-0000cdd0: 6d65 225d 2929 0d0a 2020 2020 2020 2020  me"]))..        
-0000cde0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0000cdf0: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
-0000ce00: 2869 2c20 342c 2051 5461 626c 6557 6964  (i, 4, QTableWid
-0000ce10: 6765 7449 7465 6d28 6461 7461 5b22 6b69  getItem(data["ki
-0000ce20: 6e64 225d 2929 0d0a 2020 2020 2020 2020  nd"]))..        
-0000ce30: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0000ce40: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
-0000ce50: 2869 2c20 352c 2051 5461 626c 6557 6964  (i, 5, QTableWid
-0000ce60: 6765 7449 7465 6d28 7374 7228 6461 7461  getItem(str(data
-0000ce70: 5b22 756e 692d 6469 7265 6374 696f 6e61  ["uni-directiona
-0000ce80: 6c22 5d29 2929 0d0a 2020 2020 2020 2020  l"])))..        
-0000ce90: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0000cea0: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
-0000ceb0: 2869 2c20 362c 2051 5461 626c 6557 6964  (i, 6, QTableWid
-0000cec0: 6765 7449 7465 6d28 7374 7228 6461 7461  getItem(str(data
-0000ced0: 5b22 7175 616e 7469 7479 225d 2929 290d  ["quantity"]))).
-0000cee0: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
-0000cef0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000cf00: 6965 772e 7365 6c65 6374 696f 6e4d 6f64  iew.selectionMod
-0000cf10: 656c 2829 2e73 656c 6563 7465 6452 6f77  el().selectedRow
-0000cf20: 7328 290d 0a0d 0a20 2020 2020 2020 2020  s()....         
-0000cf30: 2020 2062 6f78 3120 3d20 7365 6c66 2e64     box1 = self.d
-0000cf40: 7261 7763 616e 7661 732e 6164 645f 6167  rawcanvas.add_ag
-0000cf50: 656e 7428 6361 6d65 6c28 6461 7461 5b22  ent(camel(data["
-0000cf60: 6167 656e 7431 225d 2929 2023 2e63 6170  agent1"])) #.cap
-0000cf70: 6974 616c 697a 6528 2929 0d0a 2020 2020  italize())..    
-0000cf80: 2020 2020 2020 2020 626f 7832 203d 2073          box2 = s
-0000cf90: 656c 662e 6472 6177 6361 6e76 6173 2e61  elf.drawcanvas.a
-0000cfa0: 6464 5f61 6765 6e74 2863 616d 656c 2864  dd_agent(camel(d
-0000cfb0: 6174 615b 2261 6765 6e74 3222 5d29 2920  ata["agent2"])) 
-0000cfc0: 232e 6361 7069 7461 6c69 7a65 2829 290d  #.capitalize()).
-0000cfd0: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
-0000cfe0: 795f 6974 656d 7320 3d20 5b5d 0d0a 0d0a  y_items = []....
-0000cff0: 2020 2020 2020 2020 2020 2020 616c 6c65              alle
-0000d000: 6e74 7269 6573 203d 2022 5c6e 222e 6a6f  ntries = "\n".jo
-0000d010: 696e 285b 6461 7461 5b22 6c31 225d 2c20  in([data["l1"], 
-0000d020: 6461 7461 5b22 6131 225d 2c20 6461 7461  data["a1"], data
-0000d030: 5b22 6531 225d 2c20 6461 7461 5b22 6c32  ["e1"], data["l2
-0000d040: 225d 2c20 6461 7461 5b22 6132 225d 2c20  "], data["a2"], 
-0000d050: 6461 7461 5b22 6532 225d 5d29 0d0a 2020  data["e2"]])..  
-0000d060: 2020 2020 2020 2020 2020 666f 7220 7375            for su
-0000d070: 625f 6974 656d 2069 6e20 616c 6c65 6e74  b_item in allent
-0000d080: 7269 6573 2e73 706c 6974 2822 5c6e 2229  ries.split("\n")
-0000d090: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000d0a0: 2020 2066 6f72 2073 7562 5f65 6e74 7279     for sub_entry
-0000d0b0: 2069 6e20 7375 625f 6974 656d 2e73 706c   in sub_item.spl
-0000d0c0: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
-0000d0d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000d0e0: 6e74 7279 203d 2073 7562 5f65 6e74 7279  ntry = sub_entry
-0000d0f0: 2e72 6570 6c61 6365 2822 2d22 2c22 2229  .replace("-","")
-0000d100: 2e72 6570 6c61 6365 2822 2b22 2c22 2229  .replace("+","")
-0000d110: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
-0000d120: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000d130: 2065 6e74 7279 2021 3d20 2022 223a 0d0a   entry !=  "":..
-0000d140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d150: 2020 2020 2020 2020 6d79 5f69 7465 6d73          my_items
-0000d160: 2e61 7070 656e 6428 656e 7472 7929 0d0a  .append(entry)..
-0000d170: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000d180: 6c66 2e64 7261 7763 616e 7661 732e 6164  lf.drawcanvas.ad
-0000d190: 645f 636f 6e6e 6563 7469 6f6e 2862 6f78  d_connection(box
-0000d1a0: 312c 626f 7832 2c20 6e61 6d65 3d20 6461  1,box2, name= da
-0000d1b0: 7461 5b22 7368 6f72 746e 616d 6522 5d2c  ta["shortname"],
-0000d1c0: 7375 626a 6563 743d 6461 7461 5b22 7375  subject=data["su
-0000d1d0: 626a 6563 7422 5d2c 6974 656d 733d 6d79  bject"],items=my
-0000d1e0: 5f69 7465 6d73 290d 0a0d 0a20 2020 2020  _items)....     
-0000d1f0: 2020 2020 2020 2023 2075 7064 6174 6520         # update 
-0000d200: 7468 6520 6669 6c74 6572 2076 616c 7565  the filter value
-0000d210: 730d 0a20 2020 2020 2020 2020 2020 2066  s..            f
-0000d220: 6f72 2065 6e74 7279 2069 6e20 6d79 5f69  or entry in my_i
-0000d230: 7465 6d73 3a0d 0a20 2020 2020 2020 2020  tems:..         
-0000d240: 2020 2020 2020 2069 6620 656e 7472 7920         if entry 
-0000d250: 6e6f 7420 696e 2073 656c 662e 6669 6c74  not in self.filt
-0000d260: 6572 5f65 6e74 7269 6573 3a0d 0a20 2020  er_entries:..   
+0000be10: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0000be20: 4e4f 204d 4149 4e4c 4f4f 5020 464f 4e44  NO MAINLOOP FOND
+0000be30: 2e20 534b 4950 5049 4e47 2229 0d0a 0d0a  . SKIPPING")....
+0000be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be50: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
+0000be60: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
+0000be70: 2822 4f70 656e 6564 2066 696c 6520 2220  ("Opened file " 
+0000be80: 2b20 6669 6c65 6e61 6d65 290d 0a0d 0a20  + filename).... 
+0000be90: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000bea0: 7863 6570 743a 0d0a 0d0a 2020 2020 2020  xcept:....      
+0000beb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000bec0: 6f6c 6420 666f 726d 6174 2061 7320 6661  old format as fa
+0000bed0: 6c6c 6261 636b 0d0a 2020 2020 2020 2020  llback..        
+0000bee0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000bef0: 2e65 6e74 7279 5f64 6174 6120 3d20 7472  .entry_data = tr
+0000bf00: 616e 7361 6374 696f 6e5f 6461 7461 0d0a  ansaction_data..
+0000bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf20: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
+0000bf30: 7661 732e 636f 6465 5f64 6174 6120 3d20  vas.code_data = 
+0000bf40: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
+0000bf50: 5b22 6167 656e 7473 225d 0d0a 2020 2020  ["agents"]..    
+0000bf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf70: 7365 6c66 2e75 7064 6174 655f 7461 626c  self.update_tabl
+0000bf80: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+0000bf90: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0000bfa0: 7741 524e 494e 4720 2d20 4641 4c4c 4241  wARNING - FALLBA
+0000bfb0: 434b 2054 4f20 4f4c 4420 4649 4c45 2046  CK TO OLD FILE F
+0000bfc0: 4f52 4d41 5421 2229 0d0a 0d0a 2020 2020  ORMAT!")....    
+0000bfd0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
+0000bfe0: 6c66 2e66 696c 6545 6469 742e 7365 7454  lf.fileEdit.setT
+0000bff0: 6578 7428 6669 6c65 6e61 6d65 290d 0a0d  ext(filename)...
+0000c000: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+0000c010: 4578 6365 7074 696f 6e20 6173 2065 203a  Exception as e :
+0000c020: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000c030: 2320 7365 6c66 2e6e 6f74 6966 7928 6d65  # self.notify(me
+0000c040: 7373 6167 653d 2253 6f6d 6574 6869 6e67  ssage="Something
+0000c050: 2077 656e 7420 7772 6f6e 6720 7768 656e   went wrong when
+0000c060: 206f 7065 6e69 6e67 2074 6865 2066 696c   opening the fil
+0000c070: 653a 5c6e 2025 7322 2573 7472 2865 292c  e:\n %s"%str(e),
+0000c080: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+0000c090: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000c0a0: 2e66 696c 656e 616d 6520 3d20 6669 6c65  .filename = file
+0000c0b0: 6e61 6d65 5f62 6163 6b75 700d 0a20 2020  name_backup..   
+0000c0c0: 2020 2020 2020 2020 2073 656c 662e 6375           self.cu
+0000c0d0: 7265 6e74 5f66 696c 6520 3d20 6375 7272  rent_file = curr
+0000c0e0: 656e 745f 6669 6c65 5f62 6163 6b75 700d  ent_file_backup.
+0000c0f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000c100: 7374 7228 7365 6c66 2e63 7572 7265 6e74  str(self.current
+0000c110: 5f66 696c 6529 2021 3d20 2222 3a0d 0a20  _file) != "":.. 
+0000c120: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000c130: 656c 662e 7374 6174 7573 4261 7228 292e  elf.statusBar().
+0000c140: 7368 6f77 4d65 7373 6167 6528 2243 616e  showMessage("Can
+0000c150: 6365 6c6c 6564 2e20 5265 7374 6f72 6564  celled. Restored
+0000c160: 2066 696c 6520 2725 7327 2220 2520 7374   file '%s'" % st
+0000c170: 7228 7365 6c66 2e63 7572 7265 6e74 5f66  r(self.current_f
+0000c180: 696c 6529 290d 0a0d 0a20 2020 2020 2020  ile))....       
+0000c190: 2023 2075 7064 6174 6520 7472 616e 7361   # update transa
+0000c1a0: 6374 696f 6e20 7461 626c 650d 0a20 2020  ction table..   
+0000c1b0: 2020 2020 2073 656c 662e 7570 6461 7465       self.update
+0000c1c0: 5f74 6162 6c65 2829 0d0a 0d0a 2020 2020  _table()....    
+0000c1d0: 2020 2020 2320 7570 6461 7465 2074 6865      # update the
+0000c1e0: 6d65 0d0a 2020 2020 2020 2020 7365 6c66  me..        self
+0000c1f0: 2e74 6865 6d65 5f6d 616e 6167 6572 2e72  .theme_manager.r
+0000c200: 6573 746f 7265 2829 0d0a 0d0a 2020 2020  estore()....    
+0000c210: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0000c220: 2020 2020 2020 666e 616d 652c 2066 696c        fname, fil
+0000c230: 655f 6578 7465 6e73 696f 6e20 3d20 6f73  e_extension = os
+0000c240: 2e70 6174 682e 7370 6c69 7465 7874 2873  .path.splitext(s
+0000c250: 656c 662e 6669 6c65 6e61 6d65 290d 0a20  elf.filename).. 
+0000c260: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000c270: 7468 656d 655f 6d61 6e61 6765 722e 6c6f  theme_manager.lo
+0000c280: 6164 5f63 6f6c 6f72 7328 666e 616d 6520  ad_colors(fname 
+0000c290: 2b20 222e 7366 6374 6865 6d65 2229 0d0a  + ".sfctheme")..
+0000c2a0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+0000c2b0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+0000c2c0: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+0000c2d0: 696e 7428 2263 6f75 6c64 206e 6f74 206c  int("could not l
+0000c2e0: 6f61 6420 7468 656d 653a 2022 2c20 7374  oad theme: ", st
+0000c2f0: 7228 6529 290d 0a0d 0a20 2020 2020 2020  r(e))....       
+0000c300: 2023 2075 7064 6174 6520 626f 7865 730d   # update boxes.
+0000c310: 0a20 2020 2020 2020 2066 6f72 2062 6f78  .        for box
+0000c320: 2069 6e20 7365 6c66 2e64 7261 7763 616e   in self.drawcan
+0000c330: 7661 732e 626f 7865 733a 0d0a 2020 2020  vas.boxes:..    
+0000c340: 2020 2020 2020 2020 626f 782e 6564 6974          box.edit
+0000c350: 5f61 6765 6e74 2829 0d0a 0d0a 2020 2020  _agent()....    
+0000c360: 6465 6620 656e 7472 795f 746f 5f76 616c  def entry_to_val
+0000c370: 7328 7365 6c66 2c65 6e74 7279 2c20 6167  s(self,entry, ag
+0000c380: 656e 742c 7768 6963 6829 3a0d 0a0d 0a20  ent,which):.... 
+0000c390: 2020 2020 2020 2069 6620 6e6f 7420 626f         if not bo
+0000c3a0: 6f6c 2872 6567 6578 2e66 696e 6461 6c6c  ol(regex.findall
+0000c3b0: 2822 285b 2b2d 5d2b 2922 2c20 656e 7472  ("([+-]+)", entr
+0000c3c0: 7929 293a 0d0a 2020 2020 2020 2020 2020  y)):..          
+0000c3d0: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
+0000c3e0: 7373 6167 653d 2253 6967 6e20 636f 7272  ssage="Sign corr
+0000c3f0: 7570 7465 6420 696e 2065 6e74 7279 2025  upted in entry %
+0000c400: 7320 2825 7320 6f66 2025 7329 2225 2865  s (%s of %s)"%(e
+0000c410: 6e74 7279 2c77 6869 6368 2c61 6765 6e74  ntry,which,agent
+0000c420: 292c 7469 746c 653d 2245 7272 6f72 2229  ),title="Error")
+0000c430: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0000c440: 7475 726e 204e 6f6e 652c 204e 6f6e 652c  turn None, None,
+0000c450: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
+0000c460: 2069 6620 7265 6765 782e 6669 6e64 616c   if regex.findal
+0000c470: 6c28 2228 5b2b 2d5d 2b29 222c 2065 6e74  l("([+-]+)", ent
+0000c480: 7279 295b 305d 203d 3d20 222d 223a 0d0a  ry)[0] == "-":..
+0000c490: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+0000c4a0: 203d 2022 2d22 0d0a 2020 2020 2020 2020   = "-"..        
+0000c4b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000c4c0: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
+0000c4d0: 0a20 2020 2020 2020 2077 6f72 6473 203d  .        words =
+0000c4e0: 2072 6567 6578 2e66 696e 6461 6c6c 2822   regex.findall("
+0000c4f0: 285b 5c77 5c73 5d2b 2922 2c20 656e 7472  ([\w\s]+)", entr
+0000c500: 7929 0d0a 0d0a 2020 2020 2020 2020 6974  y)....        it
+0000c510: 656d 203d 2022 220d 0a20 2020 2020 2020  em = ""..       
+0000c520: 2073 696c 656e 7420 3d20 4661 6c73 650d   silent = False.
+0000c530: 0a20 2020 2020 2020 2066 6f72 2077 6f72  .        for wor
+0000c540: 6420 696e 2077 6f72 6473 3a0d 0a20 2020  d in words:..   
+0000c550: 2020 2020 2020 2020 2069 6620 776f 7264           if word
+0000c560: 2021 3d20 2273 223a 0d0a 2020 2020 2020   != "s":..      
+0000c570: 2020 2020 2020 2020 2020 6974 656d 202b            item +
+0000c580: 3d20 776f 7264 2e73 7472 6970 2829 202b  = word.strip() +
+0000c590: 2022 2022 0d0a 2020 2020 2020 2020 2020   " "..          
+0000c5a0: 2020 656c 6966 2077 6f72 6420 3d3d 2022    elif word == "
+0000c5b0: 7322 3a0d 0a20 2020 2020 2020 2020 2020  s":..           
+0000c5c0: 2020 2020 2073 696c 656e 7420 3d20 5472       silent = Tr
+0000c5d0: 7565 0d0a 0d0a 2020 2020 2020 2020 6974  ue....        it
+0000c5e0: 656d 203d 2069 7465 6d2e 7374 7269 7028  em = item.strip(
+0000c5f0: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
+0000c600: 7572 6e20 7369 676e 2c20 6974 656d 2c20  urn sign, item, 
+0000c610: 7369 6c65 6e74 0d0a 0d0a 0d0a 2020 2020  silent......    
+0000c620: 6465 6620 7570 6461 7465 5f74 6162 6c65  def update_table
+0000c630: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+0000c640: 2023 7365 6c66 2e73 656c 6563 7469 6f6e   #self.selection
+0000c650: 5f69 6478 203d 204e 6f6e 650d 0a20 2020  _idx = None..   
+0000c660: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
+0000c670: 6374 696f 6e56 6965 772e 7365 7452 6f77  ctionView.setRow
+0000c680: 436f 756e 7428 3029 0d0a 0d0a 2020 2020  Count(0)....    
+0000c690: 2020 2020 2320 7365 6c66 2e74 7261 6e73      # self.trans
+0000c6a0: 6163 7469 6f6e 5669 6577 2e6d 6f64 656c  actionView.model
+0000c6b0: 2829 2e73 6574 546f 7269 7a6f 6e74 616c  ().setTorizontal
+0000c6c0: 4865 6164 6572 4974 656d 2820 302c 2051  HeaderItem( 0, Q
+0000c6d0: 5461 626c 6557 6964 6765 7449 7465 6d28  TableWidgetItem(
+0000c6e0: 224e 616d 6522 2929 0d0a 2020 2020 2020  "Name"))..      
+0000c6f0: 2020 2320 7365 6c66 2e74 7261 6e73 6163    # self.transac
+0000c700: 7469 6f6e 5669 6577 2e6d 6f64 656c 2829  tionView.model()
+0000c710: 2e73 6574 546f 7269 7a6f 6e74 616c 4865  .setTorizontalHe
+0000c720: 6164 6572 4974 656d 2820 312c 2051 5461  aderItem( 1, QTa
+0000c730: 626c 6557 6964 6765 7449 7465 6d28 2253  bleWidgetItem("S
+0000c740: 686f 7274 204e 616d 6522 2929 0d0a 2020  hort Name"))..  
+0000c750: 2020 2020 2020 2320 7365 6c66 2e74 7261        # self.tra
+0000c760: 6e73 6163 7469 6f6e 5669 6577 2e6d 6f64  nsactionView.mod
+0000c770: 656c 2829 2e73 6574 546f 7269 7a6f 6e74  el().setTorizont
+0000c780: 616c 4865 6164 6572 4974 656d 2820 322c  alHeaderItem( 2,
+0000c790: 2051 5461 626c 6557 6964 6765 7449 7465   QTableWidgetIte
+0000c7a0: 6d28 2255 6e69 6469 7265 6374 696f 6e61  m("Unidirectiona
+0000c7b0: 6c22 2929 0d0a 2020 2020 2020 2020 2320  l"))..        # 
+0000c7c0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000c7d0: 5669 6577 2e6d 6f64 656c 2829 2e73 6574  View.model().set
+0000c7e0: 546f 7269 7a6f 6e74 616c 4865 6164 6572  TorizontalHeader
+0000c7f0: 4974 656d 2820 332c 2051 5461 626c 6557  Item( 3, QTableW
+0000c800: 6964 6765 7449 7465 6d28 2246 6c6f 7722  idgetItem("Flow"
+0000c810: 2929 0d0a 0d0a 2020 2020 2020 2020 2320  ))....        # 
+0000c820: 696e 7365 7274 206e 6577 2072 6f77 7320  insert new rows 
+0000c830: 6966 206e 6565 6465 640d 0a20 2020 2020  if needed..     
+0000c840: 2020 2072 6f77 5f63 6f75 6e74 203d 2073     row_count = s
+0000c850: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000c860: 6965 772e 726f 7743 6f75 6e74 2829 0d0a  iew.rowCount()..
+0000c870: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+0000c880: 662e 656e 7472 795f 6461 7461 2069 7320  f.entry_data is 
+0000c890: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0000c8a0: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
+0000c8b0: 4461 7461 2069 7320 656d 7074 7920 6f72  Data is empty or
+0000c8c0: 2063 6f72 7275 7074 6564 2e20 536f 6d65   corrupted. Some
+0000c8d0: 7468 696e 6720 7765 6e74 2077 726f 6e67  thing went wrong
+0000c8e0: 222c 2074 6974 6c65 3d22 4661 7461 6c20  ", title="Fatal 
+0000c8f0: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
+0000c900: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
+0000c910: 2020 2020 2020 2069 6620 726f 775f 636f         if row_co
+0000c920: 756e 7420 3c20 6c65 6e28 7365 6c66 2e65  unt < len(self.e
+0000c930: 6e74 7279 5f64 6174 6129 3a0d 0a20 2020  ntry_data):..   
+0000c940: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0000c950: 6e20 7261 6e67 6528 6c65 6e28 7365 6c66  n range(len(self
+0000c960: 2e65 6e74 7279 5f64 6174 6129 2d72 6f77  .entry_data)-row
+0000c970: 5f63 6f75 6e74 293a 0d0a 2020 2020 2020  _count):..      
+0000c980: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0000c990: 7261 6e73 6163 7469 6f6e 5669 6577 2e69  ransactionView.i
+0000c9a0: 6e73 6572 7452 6f77 2872 6f77 5f63 6f75  nsertRow(row_cou
+0000c9b0: 6e74 290d 0a0d 0a20 2020 2020 2020 2073  nt)....        s
+0000c9c0: 656c 662e 6472 6177 6361 6e76 6173 2e63  elf.drawcanvas.c
+0000c9d0: 6c65 6172 2829 0d0a 2020 2020 2020 2020  lear()..        
+0000c9e0: 7365 6c66 2e66 696c 7465 7243 6f6d 626f  self.filterCombo
+0000c9f0: 2e63 6c65 6172 2829 0d0a 2020 2020 2020  .clear()..      
+0000ca00: 2020 7365 6c66 2e66 696c 7465 725f 656e    self.filter_en
+0000ca10: 7472 6965 7320 3d20 5b5d 0d0a 0d0a 2020  tries = []....  
+0000ca20: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+0000ca30: 2020 2020 2020 2020 666f 7220 692c 2064          for i, d
+0000ca40: 6174 6120 696e 2065 6e75 6d65 7261 7465  ata in enumerate
+0000ca50: 2873 656c 662e 656e 7472 795f 6461 7461  (self.entry_data
+0000ca60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000ca70: 2020 2020 2320 6578 6973 7473 3120 3d20      # exists1 = 
+0000ca80: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0000ca90: 6368 6563 6b5f 6578 6973 7428 6461 7461  check_exist(data
+0000caa0: 5b22 6167 656e 7431 225d 2e63 6170 6974  ["agent1"].capit
+0000cab0: 616c 697a 6528 2929 0d0a 2020 2020 2020  alize())..      
+0000cac0: 2020 2020 2020 2020 2020 2320 6578 6973            # exis
+0000cad0: 7473 3220 3d20 7365 6c66 2e64 7261 7763  ts2 = self.drawc
+0000cae0: 616e 7661 732e 6368 6563 6b5f 6578 6973  anvas.check_exis
+0000caf0: 7428 6461 7461 5b22 6167 656e 7432 225d  t(data["agent2"]
+0000cb00: 2e63 6170 6974 616c 697a 6528 2929 0d0a  .capitalize())..
+0000cb10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cb20: 2020 2020 2020 6e65 775f 6167 656e 7431        new_agent1
+0000cb30: 203d 2063 616d 656c 2864 6174 615b 2261   = camel(data["a
+0000cb40: 6765 6e74 3122 5d29 0d0a 2020 2020 2020  gent1"])..      
+0000cb50: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0000cb60: 775f 6167 656e 7432 203d 2063 616d 656c  w_agent2 = camel
+0000cb70: 2864 6174 615b 2261 6765 6e74 3222 5d29  (data["agent2"])
+0000cb80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cb90: 2020 2020 2020 626f 7831 203d 2073 656c        box1 = sel
+0000cba0: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
+0000cbb0: 5f61 6765 6e74 286e 6577 5f61 6765 6e74  _agent(new_agent
+0000cbc0: 3129 2023 202e 6361 7069 7461 6c69 7a65  1) # .capitalize
+0000cbd0: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+0000cbe0: 2020 2020 2020 2020 2062 6f78 3220 3d20           box2 = 
+0000cbf0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0000cc00: 6164 645f 6167 656e 7428 6e65 775f 6167  add_agent(new_ag
+0000cc10: 656e 7432 2920 232e 6361 7069 7461 6c69  ent2) #.capitali
+0000cc20: 7a65 2829 290d 0a0d 0a20 2020 2020 2020  ze())....       
+0000cc30: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+0000cc40: 6f72 7265 6374 206e 756d 6265 7220 6f66  orrect number of
+0000cc50: 2063 6f6e 6e65 6374 696f 6e73 2066 6f72   connections for
+0000cc60: 2065 7869 7374 696e 6720 6167 656e 7473   existing agents
+0000cc70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cc80: 2020 2020 2020 626f 7831 2e6e 5f63 6f6e        box1.n_con
+0000cc90: 6e65 6374 696f 6e73 203d 2030 0d0a 2020  nections = 0..  
+0000cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ccb0: 2020 626f 7832 2e6e 5f63 6f6e 6e65 6374    box2.n_connect
+0000ccc0: 696f 6e73 203d 2030 0d0a 0d0a 0d0a 2020  ions = 0......  
+0000ccd0: 2020 2020 2020 2020 2020 2320 7570 6461            # upda
+0000cce0: 7465 2074 6865 2064 6174 610d 0a20 2020  te the data..   
+0000ccf0: 2020 2020 2020 2020 2066 6f72 2069 2c20           for i, 
+0000cd00: 6461 7461 2069 6e20 656e 756d 6572 6174  data in enumerat
+0000cd10: 6528 7365 6c66 2e65 6e74 7279 5f64 6174  e(self.entry_dat
+0000cd20: 6129 3a0d 0a20 2020 2020 2020 2020 2020  a):..           
+0000cd30: 2020 2020 2070 7269 6e74 2864 6174 6129       print(data)
+0000cd40: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000cd50: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000cd60: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
+0000cd70: 2869 2c20 302c 2051 5461 626c 6557 6964  (i, 0, QTableWid
+0000cd80: 6765 7449 7465 6d28 6461 7461 5b22 7375  getItem(data["su
+0000cd90: 626a 6563 7422 5d29 290d 0a20 2020 2020  bject"]))..     
+0000cda0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000cdb0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000cdc0: 7365 7449 7465 6d28 692c 2031 2c20 5154  setItem(i, 1, QT
+0000cdd0: 6162 6c65 5769 6467 6574 4974 656d 2863  ableWidgetItem(c
+0000cde0: 616d 656c 2864 6174 615b 2261 6765 6e74  amel(data["agent
+0000cdf0: 3122 5d29 2929 2023 202e 6361 7069 7461  1"]))) # .capita
+0000ce00: 6c69 7a65 2829 2929 0d0a 2020 2020 2020  lize()))..      
+0000ce10: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0000ce20: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
+0000ce30: 6574 4974 656d 2869 2c20 322c 2051 5461  etItem(i, 2, QTa
+0000ce40: 626c 6557 6964 6765 7449 7465 6d28 6361  bleWidgetItem(ca
+0000ce50: 6d65 6c28 6461 7461 5b22 6167 656e 7432  mel(data["agent2
+0000ce60: 225d 2929 2920 2320 2e63 6170 6974 616c  "]))) # .capital
+0000ce70: 697a 6528 2929 290d 0a20 2020 2020 2020  ize()))..       
+0000ce80: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000ce90: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+0000cea0: 7449 7465 6d28 692c 2033 2c20 5154 6162  tItem(i, 3, QTab
+0000ceb0: 6c65 5769 6467 6574 4974 656d 2864 6174  leWidgetItem(dat
+0000cec0: 615b 2273 686f 7274 6e61 6d65 225d 2929  a["shortname"]))
+0000ced0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cee0: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+0000cef0: 6f6e 5669 6577 2e73 6574 4974 656d 2869  onView.setItem(i
+0000cf00: 2c20 342c 2051 5461 626c 6557 6964 6765  , 4, QTableWidge
+0000cf10: 7449 7465 6d28 6461 7461 5b22 6b69 6e64  tItem(data["kind
+0000cf20: 225d 2929 0d0a 2020 2020 2020 2020 2020  "]))..          
+0000cf30: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0000cf40: 6163 7469 6f6e 5669 6577 2e73 6574 4974  actionView.setIt
+0000cf50: 656d 2869 2c20 352c 2051 5461 626c 6557  em(i, 5, QTableW
+0000cf60: 6964 6765 7449 7465 6d28 7374 7228 6461  idgetItem(str(da
+0000cf70: 7461 5b22 756e 692d 6469 7265 6374 696f  ta["uni-directio
+0000cf80: 6e61 6c22 5d29 2929 0d0a 2020 2020 2020  nal"])))..      
+0000cf90: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0000cfa0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
+0000cfb0: 6574 4974 656d 2869 2c20 362c 2051 5461  etItem(i, 6, QTa
+0000cfc0: 626c 6557 6964 6765 7449 7465 6d28 7374  bleWidgetItem(st
+0000cfd0: 7228 6461 7461 5b22 7175 616e 7469 7479  r(data["quantity
+0000cfe0: 225d 2929 290d 0a20 2020 2020 2020 2020  "])))..         
+0000cff0: 2020 2020 2020 2023 2073 656c 662e 7472         # self.tr
+0000d000: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+0000d010: 6c65 6374 696f 6e4d 6f64 656c 2829 2e73  lectionModel().s
+0000d020: 656c 6563 7465 6452 6f77 7328 290d 0a0d  electedRows()...
+0000d030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d040: 2062 6f78 3120 3d20 7365 6c66 2e64 7261   box1 = self.dra
+0000d050: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
+0000d060: 7428 6361 6d65 6c28 6461 7461 5b22 6167  t(camel(data["ag
+0000d070: 656e 7431 225d 2929 2023 2e63 6170 6974  ent1"])) #.capit
+0000d080: 616c 697a 6528 2929 0d0a 2020 2020 2020  alize())..      
+0000d090: 2020 2020 2020 2020 2020 626f 7832 203d            box2 =
+0000d0a0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+0000d0b0: 2e61 6464 5f61 6765 6e74 2863 616d 656c  .add_agent(camel
+0000d0c0: 2864 6174 615b 2261 6765 6e74 3222 5d29  (data["agent2"])
+0000d0d0: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
+0000d0e0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000d0f0: 2020 2020 206d 795f 6974 656d 7320 3d20       my_items = 
+0000d100: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
+0000d110: 2020 2020 2020 616c 6c65 6e74 7269 6573        allentries
+0000d120: 203d 2022 5c6e 222e 6a6f 696e 285b 6461   = "\n".join([da
+0000d130: 7461 5b22 6c31 225d 2c20 6461 7461 5b22  ta["l1"], data["
+0000d140: 6131 225d 2c20 6461 7461 5b22 6531 225d  a1"], data["e1"]
+0000d150: 2c20 6461 7461 5b22 6c32 225d 2c20 6461  , data["l2"], da
+0000d160: 7461 5b22 6132 225d 2c20 6461 7461 5b22  ta["a2"], data["
+0000d170: 6532 225d 5d29 0d0a 2020 2020 2020 2020  e2"]])..        
+0000d180: 2020 2020 2020 2020 666f 7220 7375 625f          for sub_
+0000d190: 6974 656d 2069 6e20 616c 6c65 6e74 7269  item in allentri
+0000d1a0: 6573 2e73 706c 6974 2822 5c6e 2229 3a0d  es.split("\n"):.
+0000d1b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d1c0: 2020 2020 2066 6f72 2073 7562 5f65 6e74       for sub_ent
+0000d1d0: 7279 2069 6e20 7375 625f 6974 656d 2e73  ry in sub_item.s
+0000d1e0: 706c 6974 2822 5c6e 2229 3a0d 0a20 2020  plit("\n"):..   
+0000d1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d200: 2020 2020 2065 6e74 7279 203d 2073 7562       entry = sub
+0000d210: 5f65 6e74 7279 2e72 6570 6c61 6365 2822  _entry.replace("
+0000d220: 2d22 2c22 2229 2e72 6570 6c61 6365 2822  -","").replace("
+0000d230: 2b22 2c22 2229 2e73 7472 6970 2829 0d0a  +","").strip()..
+0000d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d250: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
+0000d260: 2021 3d20 2022 223a 0d0a 2020 2020 2020   !=  "":..      
 0000d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d280: 2073 656c 662e 6669 6c74 6572 5f65 6e74   self.filter_ent
-0000d290: 7269 6573 2e61 7070 656e 6428 656e 7472  ries.append(entr
-0000d2a0: 7929 0d0a 0d0a 2020 2020 2020 2020 7472  y)....        tr
-0000d2b0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0000d2c0: 2320 7365 6172 6368 2066 6f72 2061 206d  # search for a m
-0000d2d0: 6174 6368 2069 6e20 7468 6520 6669 6c74  atch in the filt
-0000d2e0: 6572 0d0a 0d0a 2020 2020 2020 2020 2020  er....          
-0000d2f0: 2020 666f 756e 645f 6964 7873 203d 205b    found_idxs = [
-0000d300: 5d0d 0a20 2020 2020 2020 2020 2020 2073  ]..            s
-0000d310: 6561 7263 685f 7374 7220 3d20 7365 6c66  earch_str = self
-0000d320: 2e46 696c 7465 726c 696e 6545 6469 742e  .FilterlineEdit.
-0000d330: 7465 7874 2829 0d0a 0d0a 2020 2020 2020  text()....      
-0000d340: 2020 2020 2020 6966 2073 6561 7263 685f        if search_
-0000d350: 7374 7220 213d 2022 223a 0d0a 2020 2020  str != "":..    
-0000d360: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0000d370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d380: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-0000d390: 616e 6765 2873 656c 662e 7472 616e 7361  ange(self.transa
-0000d3a0: 6374 696f 6e56 6965 772e 726f 7743 6f75  ctionView.rowCou
-0000d3b0: 6e74 2829 293a 0d0a 0d0a 2020 2020 2020  nt()):....      
-0000d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d3d0: 2020 666f 7220 6a20 696e 2072 616e 6765    for j in range
-0000d3e0: 2873 656c 662e 7472 616e 7361 6374 696f  (self.transactio
-0000d3f0: 6e56 6965 772e 636f 6c75 6d6e 436f 756e  nView.columnCoun
-0000d400: 7428 2929 3a0d 0a0d 0a20 2020 2020 2020  t()):....       
-0000d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d420: 2020 2020 2065 6e74 7279 5f73 7472 203d       entry_str =
-0000d430: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000d440: 6e56 6965 772e 6974 656d 2869 2c6a 292e  nView.item(i,j).
-0000d450: 7465 7874 2829 0d0a 0d0a 2020 2020 2020  text()....      
-0000d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d470: 2020 2020 2020 6966 2065 6e74 7279 5f73        if entry_s
-0000d480: 7472 2e66 696e 6428 7365 6172 6368 5f73  tr.find(search_s
-0000d490: 7472 2920 3e20 2d31 3a0d 0a0d 0a20 2020  tr) > -1:....   
-0000d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d4b0: 2020 2020 2020 2020 2020 2020 2066 6f75               fou
-0000d4c0: 6e64 5f69 6478 732e 6170 7065 6e64 2869  nd_idxs.append(i
-0000d4d0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000d4e0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0000d4f0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-0000d500: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000d510: 7269 6e74 2822 4578 6365 7074 696f 6e3a  rint("Exception:
-0000d520: 222c 2073 7472 2865 2929 0d0a 0d0a 2020  ", str(e))....  
-0000d530: 2020 2020 2020 2020 2020 666f 7220 666f            for fo
-0000d540: 756e 645f 6964 7820 696e 2066 6f75 6e64  und_idx in found
-0000d550: 5f69 6478 733a 0d0a 2020 2020 2020 2020  _idxs:..        
-0000d560: 2020 2020 2020 2020 2320 6869 6768 6c69          # highli
-0000d570: 6768 7420 6f63 6375 7261 6e63 6573 0d0a  ght occurances..
-0000d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d590: 666f 7220 6a20 696e 2072 616e 6765 2873  for j in range(s
-0000d5a0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000d5b0: 6965 772e 636f 6c75 6d6e 436f 756e 7428  iew.columnCount(
-0000d5c0: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
-0000d5d0: 2020 2020 2020 2020 2074 7279 3a0d 0a0d           try:...
-0000d5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d5f0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-0000d600: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
-0000d610: 6865 6d65 203d 3d20 2262 7269 6768 7422  heme == "bright"
-0000d620: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0000d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d640: 2023 206c 6967 6874 206d 6f64 650d 0a20   # light mode.. 
+0000d280: 2020 2020 2020 6d79 5f69 7465 6d73 2e61        my_items.a
+0000d290: 7070 656e 6428 656e 7472 7929 0d0a 0d0a  ppend(entry)....
+0000d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d2b0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0000d2c0: 6164 645f 636f 6e6e 6563 7469 6f6e 2862  add_connection(b
+0000d2d0: 6f78 312c 626f 7832 2c20 6e61 6d65 3d20  ox1,box2, name= 
+0000d2e0: 6461 7461 5b22 7368 6f72 746e 616d 6522  data["shortname"
+0000d2f0: 5d2c 7375 626a 6563 743d 6461 7461 5b22  ],subject=data["
+0000d300: 7375 626a 6563 7422 5d2c 6974 656d 733d  subject"],items=
+0000d310: 6d79 5f69 7465 6d73 290d 0a0d 0a20 2020  my_items)....   
+0000d320: 2020 2020 2020 2020 2020 2020 2023 2075               # u
+0000d330: 7064 6174 6520 7468 6520 6669 6c74 6572  pdate the filter
+0000d340: 2076 616c 7565 730d 0a20 2020 2020 2020   values..       
+0000d350: 2020 2020 2020 2020 2066 6f72 2065 6e74           for ent
+0000d360: 7279 2069 6e20 6d79 5f69 7465 6d73 3a0d  ry in my_items:.
+0000d370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d380: 2020 2020 2069 6620 656e 7472 7920 6e6f       if entry no
+0000d390: 7420 696e 2073 656c 662e 6669 6c74 6572  t in self.filter
+0000d3a0: 5f65 6e74 7269 6573 3a0d 0a20 2020 2020  _entries:..     
+0000d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d3c0: 2020 2073 656c 662e 6669 6c74 6572 5f65     self.filter_e
+0000d3d0: 6e74 7269 6573 2e61 7070 656e 6428 656e  ntries.append(en
+0000d3e0: 7472 7929 0d0a 0d0a 2020 2020 2020 2020  try)....        
+0000d3f0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0000d400: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+0000d410: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+0000d420: 7374 7228 6529 2b22 5c6e 2220 2b20 7374  str(e)+"\n" + st
+0000d430: 7228 6461 7461 292c 7469 746c 653d 2245  r(data),title="E
+0000d440: 7272 6f72 2229 0d0a 0d0a 2020 2020 2020  rror")....      
+0000d450: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000d460: 2020 2020 2320 7365 6172 6368 2066 6f72      # search for
+0000d470: 2061 206d 6174 6368 2069 6e20 7468 6520   a match in the 
+0000d480: 6669 6c74 6572 0d0a 0d0a 2020 2020 2020  filter....      
+0000d490: 2020 2020 2020 666f 756e 645f 6964 7873        found_idxs
+0000d4a0: 203d 205b 5d0d 0a20 2020 2020 2020 2020   = []..         
+0000d4b0: 2020 2073 6561 7263 685f 7374 7220 3d20     search_str = 
+0000d4c0: 7365 6c66 2e46 696c 7465 726c 696e 6545  self.FilterlineE
+0000d4d0: 6469 742e 7465 7874 2829 0d0a 0d0a 2020  dit.text()....  
+0000d4e0: 2020 2020 2020 2020 2020 6966 2073 6561            if sea
+0000d4f0: 7263 685f 7374 7220 213d 2022 223a 0d0a  rch_str != "":..
+0000d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d510: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0000d520: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+0000d530: 696e 2072 616e 6765 2873 656c 662e 7472  in range(self.tr
+0000d540: 616e 7361 6374 696f 6e56 6965 772e 726f  ansactionView.ro
+0000d550: 7743 6f75 6e74 2829 293a 0d0a 0d0a 2020  wCount()):....  
+0000d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d570: 2020 2020 2020 666f 7220 6a20 696e 2072        for j in r
+0000d580: 616e 6765 2873 656c 662e 7472 616e 7361  ange(self.transa
+0000d590: 6374 696f 6e56 6965 772e 636f 6c75 6d6e  ctionView.column
+0000d5a0: 436f 756e 7428 2929 3a0d 0a0d 0a20 2020  Count()):....   
+0000d5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d5c0: 2020 2020 2020 2020 2065 6e74 7279 5f73           entry_s
+0000d5d0: 7472 203d 2073 656c 662e 7472 616e 7361  tr = self.transa
+0000d5e0: 6374 696f 6e56 6965 772e 6974 656d 2869  ctionView.item(i
+0000d5f0: 2c6a 292e 7465 7874 2829 0d0a 0d0a 2020  ,j).text()....  
+0000d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d610: 2020 2020 2020 2020 2020 6966 2065 6e74            if ent
+0000d620: 7279 5f73 7472 2e66 696e 6428 7365 6172  ry_str.find(sear
+0000d630: 6368 5f73 7472 2920 3e20 2d31 3a0d 0a0d  ch_str) > -1:...
+0000d640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d660: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000d670: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000d680: 6974 656d 2866 6f75 6e64 5f69 6478 2c20  item(found_idx, 
-0000d690: 6a29 2e73 6574 4261 636b 6772 6f75 6e64  j).setBackground
-0000d6a0: 2851 7447 7569 2e51 436f 6c6f 7228 3232  (QtGui.QColor(22
-0000d6b0: 372c 2031 3636 2c20 3136 3629 290d 0a20  7, 166, 166)).. 
-0000d6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d6d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000d6e0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000d6f0: 6974 656d 2866 6f75 6e64 5f69 6478 2c20  item(found_idx, 
-0000d700: 6a29 2e73 6574 466f 7265 6772 6f75 6e64  j).setForeground
-0000d710: 2851 7447 7569 2e51 436f 6c6f 7228 3138  (QtGui.QColor(18
-0000d720: 302c 2031 382c 2031 3829 290d 0a0d 0a20  0, 18, 18)).... 
-0000d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d740: 2020 2020 2020 2065 6c73 653a 0d0a 0d0a         else:....
-0000d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d760: 2020 2020 2020 2020 2020 2020 2320 6461              # da
-0000d770: 726b 206d 6f64 650d 0a20 2020 2020 2020  rk mode..       
-0000d780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d790: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
-0000d7a0: 6374 696f 6e56 6965 772e 6974 656d 2866  ctionView.item(f
-0000d7b0: 6f75 6e64 5f69 6478 2c20 6a29 2e73 6574  ound_idx, j).set
-0000d7c0: 4261 636b 6772 6f75 6e64 2851 7447 7569  Background(QtGui
-0000d7d0: 2e51 436f 6c6f 7228 3132 302c 2031 3230  .QColor(120, 120
-0000d7e0: 2c20 3132 3029 290d 0a20 2020 2020 2020  , 120))..       
-0000d7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d800: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
-0000d810: 6374 696f 6e56 6965 772e 6974 656d 2866  ctionView.item(f
-0000d820: 6f75 6e64 5f69 6478 2c20 6a29 2e73 6574  ound_idx, j).set
-0000d830: 466f 7265 6772 6f75 6e64 2851 7447 7569  Foreground(QtGui
-0000d840: 2e51 436f 6c6f 7228 3530 2c20 3530 2c20  .QColor(50, 50, 
-0000d850: 3530 2929 0d0a 0d0a 2020 2020 2020 2020  50))....        
-0000d860: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000d870: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
-0000d880: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-0000d890: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0000d8a0: 2020 2020 2020 2020 2020 2023 2061 766f             # avo
-0000d8b0: 6964 7320 4e6f 6e65 2070 6f69 6e74 6572  ids None pointer
-0000d8c0: 2077 6865 6e20 6120 7472 616e 7361 6374   when a transact
-0000d8d0: 696f 6e20 6973 2064 656c 6574 6564 0d0a  ion is deleted..
-0000d8e0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
-0000d8f0: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
-0000d900: 730d 0a0d 0a0d 0a20 2020 2020 2020 2066  s......        f
-0000d910: 6f72 2065 6e74 7279 2069 6e20 7365 6c66  or entry in self
-0000d920: 2e66 696c 7465 725f 656e 7472 6965 733a  .filter_entries:
-0000d930: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000d940: 6c66 2e66 696c 7465 7243 6f6d 626f 2e61  lf.filterCombo.a
-0000d950: 6464 4974 656d 2865 6e74 7279 290d 0a0d  ddItem(entry)...
-0000d960: 0a20 2020 2020 2020 2073 656c 662e 6472  .        self.dr
-0000d970: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-0000d980: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000d990: 6d61 6465 5f63 6861 6e67 6573 203d 2046  made_changes = F
-0000d9a0: 616c 7365 0d0a 0d0a 0d0a 0d0a 0d0a 2020  alse..........  
-0000d9b0: 2020 6465 6620 6d6f 7665 5f64 6f77 6e28    def move_down(
-0000d9c0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0000d9d0: 2320 6d6f 7665 2073 656c 6563 7465 6420  # move selected 
-0000d9e0: 7472 616e 7361 6374 696f 6e20 7570 2069  transaction up i
-0000d9f0: 6e20 7461 626c 650d 0a20 2020 2020 2020  n table..       
-0000da00: 2073 656c 6563 7465 645f 726f 7773 203d   selected_rows =
-0000da10: 2073 6f72 7465 6428 7365 7428 696e 6465   sorted(set(inde
-0000da20: 782e 726f 7728 2920 666f 7220 696e 6465  x.row() for inde
-0000da30: 7820 696e 0d0a 2020 2020 2020 2020 2020  x in..          
-0000da40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000da50: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000da60: 5669 6577 2e73 656c 6563 7465 6449 6e64  View.selectedInd
-0000da70: 6578 6573 2829 2929 0d0a 0d0a 2020 2020  exes()))....    
-0000da80: 2020 2020 6966 206c 656e 2873 656c 6563      if len(selec
-0000da90: 7465 645f 726f 7773 2920 3d3d 2030 3a0d  ted_rows) == 0:.
-0000daa0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-0000dab0: 6e74 2822 6e6f 2073 656c 6563 7465 6420  nt("no selected 
-0000dac0: 726f 7773 2229 0d0a 2020 2020 2020 2020  rows")..        
-0000dad0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
-0000dae0: 2020 2020 2020 7365 6c65 6374 696f 6e20        selection 
-0000daf0: 3d20 7365 6c65 6374 6564 5f72 6f77 735b  = selected_rows[
-0000db00: 305d 0d0a 0d0a 2020 2020 2020 2020 6e75  0]....        nu
-0000db10: 6d62 6572 5f6f 665f 6974 656d 7320 3d20  mber_of_items = 
-0000db20: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000db30: 5669 6577 2e72 6f77 436f 756e 7428 290d  View.rowCount().
-0000db40: 0a20 2020 2020 2020 206e 756d 6265 725f  .        number_
-0000db50: 6f66 5f63 6f6c 756d 6e73 203d 2073 656c  of_columns = sel
-0000db60: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000db70: 772e 636f 6c75 6d6e 436f 756e 7428 290d  w.columnCount().
-0000db80: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
-0000db90: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-0000dba0: 6620 7365 6c65 6374 696f 6e20 3c20 6e75  f selection < nu
-0000dbb0: 6d62 6572 5f6f 665f 6974 656d 732d 313a  mber_of_items-1:
-0000dbc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000dbd0: 2020 6375 7272 656e 7452 6f77 203d 2073    currentRow = s
-0000dbe0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000dbf0: 6965 772e 6375 7272 656e 7452 6f77 2829  iew.currentRow()
-0000dc00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000dc10: 2020 2020 666f 7220 6a20 696e 2072 616e      for j in ran
-0000dc20: 6765 286e 756d 6265 725f 6f66 5f63 6f6c  ge(number_of_col
-0000dc30: 756d 6e73 293a 0d0a 2020 2020 2020 2020  umns):..        
-0000dc40: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-0000dc50: 656e 7449 7465 6d20 3d20 7365 6c66 2e74  entItem = self.t
-0000dc60: 7261 6e73 6163 7469 6f6e 5669 6577 2e74  ransactionView.t
-0000dc70: 616b 6549 7465 6d28 6375 7272 656e 7452  akeItem(currentR
-0000dc80: 6f77 2c6a 290d 0a20 2020 2020 2020 2020  ow,j)..         
-0000dc90: 2020 2020 2020 2020 2020 2073 7769 7463             switc
-0000dca0: 6849 7465 6d20 3d20 7365 6c66 2e74 7261  hItem = self.tra
-0000dcb0: 6e73 6163 7469 6f6e 5669 6577 2e74 616b  nsactionView.tak
-0000dcc0: 6549 7465 6d28 6375 7272 656e 7452 6f77  eItem(currentRow
-0000dcd0: 2b31 2c6a 290d 0a0d 0a20 2020 2020 2020  +1,j)....       
-0000dce0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000dcf0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000dd00: 772e 7365 7449 7465 6d28 6375 7272 656e  w.setItem(curren
-0000dd10: 7452 6f77 202b 2031 2c20 6a2c 2063 7572  tRow + 1, j, cur
-0000dd20: 7265 6e74 4974 656d 290d 0a20 2020 2020  rentItem)..     
-0000dd30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000dd40: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000dd50: 6965 772e 7365 7449 7465 6d28 6375 7272  iew.setItem(curr
-0000dd60: 656e 7452 6f77 2c20 6a2c 2073 7769 7463  entRow, j, switc
-0000dd70: 6849 7465 6d29 0d0a 0d0a 2020 2020 2020  hItem)....      
-0000dd80: 2020 2020 2020 2020 2020 2020 2020 7377                sw
-0000dd90: 6974 6368 5f65 6e74 7279 203d 2073 656c  itch_entry = sel
-0000dda0: 662e 656e 7472 795f 6461 7461 5b63 7572  f.entry_data[cur
-0000ddb0: 7265 6e74 526f 772b 315d 0d0a 2020 2020  rentRow+1]..    
-0000ddc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ddd0: 6375 7272 656e 745f 656e 7472 7920 3d20  current_entry = 
-0000dde0: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
-0000ddf0: 6375 7272 656e 7452 6f77 5d0d 0a0d 0a20  currentRow].... 
-0000de00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000de10: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
-0000de20: 7461 5b63 7572 7265 6e74 526f 775d 203d  ta[currentRow] =
-0000de30: 2073 7769 7463 685f 656e 7472 790d 0a20   switch_entry.. 
-0000de40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000de50: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
-0000de60: 7461 5b63 7572 7265 6e74 526f 772b 315d  ta[currentRow+1]
-0000de70: 203d 2063 7572 7265 6e74 5f65 6e74 7279   = current_entry
-0000de80: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000de90: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0000dea0: 7469 6f6e 5669 6577 2e63 6c65 6172 5365  tionView.clearSe
-0000deb0: 6c65 6374 696f 6e28 290d 0a20 2020 2020  lection()..     
-0000dec0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000ded0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000dee0: 7365 7443 7572 7265 6e74 4365 6c6c 2863  setCurrentCell(c
-0000def0: 7572 7265 6e74 526f 772b 312c 3029 0d0a  urrentRow+1,0)..
-0000df00: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-0000df10: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-0000df20: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000df30: 6c66 2e6e 6f74 6966 7928 2265 7272 6f72  lf.notify("error
-0000df40: 3a20 222b 7374 7228 6529 2c20 7469 746c  : "+str(e), titl
-0000df50: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
-0000df60: 2020 2020 6465 6620 6d6f 7665 5f75 7028      def move_up(
-0000df70: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0000df80: 2320 6d6f 7665 2073 656c 6563 7465 6420  # move selected 
-0000df90: 7472 616e 7361 6374 696f 6e20 7570 2069  transaction up i
-0000dfa0: 6e20 7461 626c 650d 0a20 2020 2020 2020  n table..       
-0000dfb0: 2073 656c 6563 7465 645f 726f 7773 203d   selected_rows =
-0000dfc0: 2073 6f72 7465 6428 7365 7428 696e 6465   sorted(set(inde
-0000dfd0: 782e 726f 7728 2920 666f 7220 696e 6465  x.row() for inde
-0000dfe0: 7820 696e 0d0a 2020 2020 2020 2020 2020  x in..          
-0000dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e000: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000e010: 5669 6577 2e73 656c 6563 7465 6449 6e64  View.selectedInd
-0000e020: 6578 6573 2829 2929 0d0a 0d0a 2020 2020  exes()))....    
-0000e030: 2020 2020 6966 206c 656e 2873 656c 6563      if len(selec
-0000e040: 7465 645f 726f 7773 2920 3d3d 2030 3a0d  ted_rows) == 0:.
-0000e050: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-0000e060: 6e74 2822 6e6f 2073 656c 6563 7465 6420  nt("no selected 
-0000e070: 726f 7773 2229 0d0a 2020 2020 2020 2020  rows")..        
-0000e080: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
-0000e090: 2020 2020 2020 7365 6c65 6374 696f 6e20        selection 
-0000e0a0: 3d20 7365 6c65 6374 6564 5f72 6f77 735b  = selected_rows[
-0000e0b0: 305d 0d0a 0d0a 2020 2020 2020 2020 6e75  0]....        nu
-0000e0c0: 6d62 6572 5f6f 665f 6974 656d 7320 3d20  mber_of_items = 
-0000e0d0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000e0e0: 5669 6577 2e72 6f77 436f 756e 7428 290d  View.rowCount().
-0000e0f0: 0a20 2020 2020 2020 206e 756d 6265 725f  .        number_
-0000e100: 6f66 5f63 6f6c 756d 6e73 203d 2073 656c  of_columns = sel
-0000e110: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000e120: 772e 636f 6c75 6d6e 436f 756e 7428 290d  w.columnCount().
-0000e130: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
-0000e140: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-0000e150: 6620 7365 6c65 6374 696f 6e20 3e3d 2031  f selection >= 1
-0000e160: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000e170: 2020 2063 7572 7265 6e74 526f 7720 3d20     currentRow = 
-0000e180: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000e190: 5669 6577 2e63 7572 7265 6e74 526f 7728  View.currentRow(
-0000e1a0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000e1b0: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
-0000e1c0: 6e67 6528 6e75 6d62 6572 5f6f 665f 636f  nge(number_of_co
-0000e1d0: 6c75 6d6e 7329 3a0d 0a20 2020 2020 2020  lumns):..       
-0000e1e0: 2020 2020 2020 2020 2020 2020 2063 7572               cur
-0000e1f0: 7265 6e74 4974 656d 203d 2073 656c 662e  rentItem = self.
-0000e200: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000e210: 7461 6b65 4974 656d 2863 7572 7265 6e74  takeItem(current
-0000e220: 526f 772c 6a29 0d0a 2020 2020 2020 2020  Row,j)..        
-0000e230: 2020 2020 2020 2020 2020 2020 7377 6974              swit
-0000e240: 6368 4974 656d 203d 2073 656c 662e 7472  chItem = self.tr
-0000e250: 616e 7361 6374 696f 6e56 6965 772e 7461  ansactionView.ta
-0000e260: 6b65 4974 656d 2863 7572 7265 6e74 526f  keItem(currentRo
-0000e270: 772d 312c 6a29 0d0a 0d0a 2020 2020 2020  w-1,j)....      
-0000e280: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000e290: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000e2a0: 6577 2e73 6574 4974 656d 2863 7572 7265  ew.setItem(curre
-0000e2b0: 6e74 526f 7720 2d20 312c 206a 2c20 6375  ntRow - 1, j, cu
-0000e2c0: 7272 656e 7449 7465 6d29 0d0a 2020 2020  rrentItem)..    
-0000e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e2e0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000e2f0: 5669 6577 2e73 6574 4974 656d 2863 7572  View.setItem(cur
-0000e300: 7265 6e74 526f 772c 206a 2c20 7377 6974  rentRow, j, swit
-0000e310: 6368 4974 656d 290d 0a0d 0a20 2020 2020  chItem)....     
-0000e320: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000e330: 7769 7463 685f 656e 7472 7920 3d20 7365  witch_entry = se
-0000e340: 6c66 2e65 6e74 7279 5f64 6174 615b 6375  lf.entry_data[cu
-0000e350: 7272 656e 7452 6f77 2d31 5d0d 0a20 2020  rrentRow-1]..   
-0000e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e370: 2063 7572 7265 6e74 5f65 6e74 7279 203d   current_entry =
-0000e380: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000e390: 5b63 7572 7265 6e74 526f 775d 0d0a 0d0a  [currentRow]....
-0000e3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e3b0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-0000e3c0: 6174 615b 6375 7272 656e 7452 6f77 5d20  ata[currentRow] 
-0000e3d0: 3d20 7377 6974 6368 5f65 6e74 7279 0d0a  = switch_entry..
-0000e3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e3f0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-0000e400: 6174 615b 6375 7272 656e 7452 6f77 2d31  ata[currentRow-1
-0000e410: 5d20 3d20 6375 7272 656e 745f 656e 7472  ] = current_entr
-0000e420: 790d 0a0d 0a20 2020 2020 2020 2020 2020  y....           
-0000e430: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
-0000e440: 6374 696f 6e56 6965 772e 636c 6561 7253  ctionView.clearS
-0000e450: 656c 6563 7469 6f6e 2829 0d0a 2020 2020  election()..    
-0000e460: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000e470: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000e480: 2e73 6574 4375 7272 656e 7443 656c 6c28  .setCurrentCell(
-0000e490: 6375 7272 656e 7452 6f77 2d31 2c30 290d  currentRow-1,0).
-0000e4a0: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-0000e4b0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-0000e4c0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-0000e4d0: 656c 662e 6e6f 7469 6679 2822 6572 726f  elf.notify("erro
-0000e4e0: 723a 2022 2b73 7472 2865 292c 2074 6974  r: "+str(e), tit
-0000e4f0: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
-0000e500: 2020 2064 6566 2064 6174 615f 7365 6c65     def data_sele
-0000e510: 6374 2873 656c 6629 3a0d 0a0d 0a20 2020  ct(self):....   
-0000e520: 2020 2020 2023 7365 6c65 6374 6564 5f72       #selected_r
-0000e530: 6f77 7320 3d20 7365 6c66 2e74 7261 6e73  ows = self.trans
-0000e540: 6163 7469 6f6e 5669 6577 2e73 656c 6563  actionView.selec
-0000e550: 7469 6f6e 4d6f 6465 6c28 292e 7365 6c65  tionModel().sele
-0000e560: 6374 6564 526f 7773 2829 0d0a 2020 2020  ctedRows()..    
-0000e570: 2020 2020 7365 6c65 6374 6564 5f72 6f77      selected_row
-0000e580: 7320 3d20 736f 7274 6564 2873 6574 2869  s = sorted(set(i
-0000e590: 6e64 6578 2e72 6f77 2829 2066 6f72 2069  ndex.row() for i
-0000e5a0: 6e64 6578 2069 6e0d 0a20 2020 2020 2020  ndex in..       
-0000e5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e5c0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000e5d0: 696f 6e56 6965 772e 7365 6c65 6374 6564  ionView.selected
-0000e5e0: 496e 6465 7865 7328 2929 290d 0a0d 0a20  Indexes())).... 
-0000e5f0: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
-0000e600: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
-0000e610: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-0000e620: 7072 696e 7428 226e 6f20 7365 6c65 6374  print("no select
-0000e630: 6564 2072 6f77 7322 290d 0a20 2020 2020  ed rows")..     
-0000e640: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
-0000e650: 0a20 2020 2020 2020 2073 656c 6563 7469  .        selecti
-0000e660: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
-0000e670: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
-0000e680: 2073 656c 662e 726f 775f 7365 6c65 6374   self.row_select
-0000e690: 2873 656c 6563 7469 6f6e 290d 0a20 2020  (selection)..   
-0000e6a0: 2020 2020 2073 656c 662e 6d61 6465 5f63       self.made_c
-0000e6b0: 6861 6e67 6573 203d 2046 616c 7365 0d0a  hanges = False..
-0000e6c0: 0d0a 0d0a 2020 2020 6465 6620 6461 7461  ....    def data
-0000e6d0: 5f73 656c 6563 745f 7768 6572 6528 7365  _select_where(se
-0000e6e0: 6c66 2c65 7870 7229 3a0d 0a20 2020 2020  lf,expr):..     
-0000e6f0: 2020 2070 7269 6e74 2822 6461 7461 2073     print("data s
-0000e700: 656c 6563 7420 7768 6572 6522 2c65 7870  elect where",exp
-0000e710: 7229 0d0a 0d0a 2020 2020 2020 2020 666f  r)....        fo
-0000e720: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
-0000e730: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000e740: 772e 726f 7743 6f75 6e74 2829 293a 0d0a  w.rowCount()):..
+0000d660: 2066 6f75 6e64 5f69 6478 732e 6170 7065   found_idxs.appe
+0000d670: 6e64 2869 290d 0a20 2020 2020 2020 2020  nd(i)..         
+0000d680: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0000d690: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+0000d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d6b0: 2020 2070 7269 6e74 2822 4578 6365 7074     print("Except
+0000d6c0: 696f 6e3a 222c 2073 7472 2865 2929 0d0a  ion:", str(e))..
+0000d6d0: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
+0000d6e0: 7220 666f 756e 645f 6964 7820 696e 2066  r found_idx in f
+0000d6f0: 6f75 6e64 5f69 6478 733a 0d0a 2020 2020  ound_idxs:..    
+0000d700: 2020 2020 2020 2020 2020 2020 2320 6869              # hi
+0000d710: 6768 6c69 6768 7420 6f63 6375 7261 6e63  ghlight occuranc
+0000d720: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+0000d730: 2020 2020 666f 7220 6a20 696e 2072 616e      for j in ran
+0000d740: 6765 2873 656c 662e 7472 616e 7361 6374  ge(self.transact
+0000d750: 696f 6e56 6965 772e 636f 6c75 6d6e 436f  ionView.columnCo
+0000d760: 756e 7428 2929 3a0d 0a20 2020 2020 2020  unt()):..       
+0000d770: 2020 2020 2020 2020 2020 2020 2074 7279               try
+0000d780: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0000d790: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000d7a0: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+0000d7b0: 6572 2e74 6865 6d65 203d 3d20 2262 7269  er.theme == "bri
+0000d7c0: 6768 7422 3a0d 0a0d 0a20 2020 2020 2020  ght":....       
+0000d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d7e0: 2020 2020 2023 206c 6967 6874 206d 6f64       # light mod
+0000d7f0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0000d800: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000d810: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000d820: 6965 772e 6974 656d 2866 6f75 6e64 5f69  iew.item(found_i
+0000d830: 6478 2c20 6a29 2e73 6574 4261 636b 6772  dx, j).setBackgr
+0000d840: 6f75 6e64 2851 7447 7569 2e51 436f 6c6f  ound(QtGui.QColo
+0000d850: 7228 3232 372c 2031 3636 2c20 3136 3629  r(227, 166, 166)
+0000d860: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000d870: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000d880: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000d890: 6965 772e 6974 656d 2866 6f75 6e64 5f69  iew.item(found_i
+0000d8a0: 6478 2c20 6a29 2e73 6574 466f 7265 6772  dx, j).setForegr
+0000d8b0: 6f75 6e64 2851 7447 7569 2e51 436f 6c6f  ound(QtGui.QColo
+0000d8c0: 7228 3138 302c 2031 382c 2031 3829 290d  r(180, 18, 18)).
+0000d8d0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000d8e0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000d8f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000d900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d910: 2320 6461 726b 206d 6f64 650d 0a20 2020  # dark mode..   
+0000d920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d930: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000d940: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
+0000d950: 656d 2866 6f75 6e64 5f69 6478 2c20 6a29  em(found_idx, j)
+0000d960: 2e73 6574 4261 636b 6772 6f75 6e64 2851  .setBackground(Q
+0000d970: 7447 7569 2e51 436f 6c6f 7228 3132 302c  tGui.QColor(120,
+0000d980: 2031 3230 2c20 3132 3029 290d 0a20 2020   120, 120))..   
+0000d990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d9a0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000d9b0: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
+0000d9c0: 656d 2866 6f75 6e64 5f69 6478 2c20 6a29  em(found_idx, j)
+0000d9d0: 2e73 6574 466f 7265 6772 6f75 6e64 2851  .setForeground(Q
+0000d9e0: 7447 7569 2e51 436f 6c6f 7228 3530 2c20  tGui.QColor(50, 
+0000d9f0: 3530 2c20 3530 2929 0d0a 0d0a 2020 2020  50, 50))....    
+0000da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000da10: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
+0000da20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000da30: 2070 6173 730d 0a20 2020 2020 2020 2020   pass..         
+0000da40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000da50: 2061 766f 6964 7320 4e6f 6e65 2070 6f69   avoids None poi
+0000da60: 6e74 6572 2077 6865 6e20 6120 7472 616e  nter when a tran
+0000da70: 7361 6374 696f 6e20 6973 2064 656c 6574  saction is delet
+0000da80: 6564 0d0a 2020 2020 2020 2020 6578 6365  ed..        exce
+0000da90: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
+0000daa0: 2070 6173 730d 0a0d 0a0d 0a20 2020 2020   pass......     
+0000dab0: 2020 2066 6f72 2065 6e74 7279 2069 6e20     for entry in 
+0000dac0: 7365 6c66 2e66 696c 7465 725f 656e 7472  self.filter_entr
+0000dad0: 6965 733a 0d0a 2020 2020 2020 2020 2020  ies:..          
+0000dae0: 2020 7365 6c66 2e66 696c 7465 7243 6f6d    self.filterCom
+0000daf0: 626f 2e61 6464 4974 656d 2865 6e74 7279  bo.addItem(entry
+0000db00: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+0000db10: 662e 6472 6177 6361 6e76 6173 2e75 7064  f.drawcanvas.upd
+0000db20: 6174 6528 290d 0a20 2020 2020 2020 2073  ate()..        s
+0000db30: 656c 662e 6d61 6465 5f63 6861 6e67 6573  elf.made_changes
+0000db40: 203d 2046 616c 7365 0d0a 0d0a 0d0a 0d0a   = False........
+0000db50: 0d0a 2020 2020 6465 6620 6d6f 7665 5f64  ..    def move_d
+0000db60: 6f77 6e28 7365 6c66 293a 0d0a 2020 2020  own(self):..    
+0000db70: 2020 2020 2320 6d6f 7665 2073 656c 6563      # move selec
+0000db80: 7465 6420 7472 616e 7361 6374 696f 6e20  ted transaction 
+0000db90: 7570 2069 6e20 7461 626c 650d 0a20 2020  up in table..   
+0000dba0: 2020 2020 2073 656c 6563 7465 645f 726f       selected_ro
+0000dbb0: 7773 203d 2073 6f72 7465 6428 7365 7428  ws = sorted(set(
+0000dbc0: 696e 6465 782e 726f 7728 2920 666f 7220  index.row() for 
+0000dbd0: 696e 6465 7820 696e 0d0a 2020 2020 2020  index in..      
+0000dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dbf0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000dc00: 7469 6f6e 5669 6577 2e73 656c 6563 7465  tionView.selecte
+0000dc10: 6449 6e64 6578 6573 2829 2929 0d0a 0d0a  dIndexes()))....
+0000dc20: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
+0000dc30: 656c 6563 7465 645f 726f 7773 2920 3d3d  elected_rows) ==
+0000dc40: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+0000dc50: 2070 7269 6e74 2822 6e6f 2073 656c 6563   print("no selec
+0000dc60: 7465 6420 726f 7773 2229 0d0a 2020 2020  ted rows")..    
+0000dc70: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
+0000dc80: 0d0a 2020 2020 2020 2020 7365 6c65 6374  ..        select
+0000dc90: 696f 6e20 3d20 7365 6c65 6374 6564 5f72  ion = selected_r
+0000dca0: 6f77 735b 305d 0d0a 0d0a 2020 2020 2020  ows[0]....      
+0000dcb0: 2020 6e75 6d62 6572 5f6f 665f 6974 656d    number_of_item
+0000dcc0: 7320 3d20 7365 6c66 2e74 7261 6e73 6163  s = self.transac
+0000dcd0: 7469 6f6e 5669 6577 2e72 6f77 436f 756e  tionView.rowCoun
+0000dce0: 7428 290d 0a20 2020 2020 2020 206e 756d  t()..        num
+0000dcf0: 6265 725f 6f66 5f63 6f6c 756d 6e73 203d  ber_of_columns =
+0000dd00: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000dd10: 6e56 6965 772e 636f 6c75 6d6e 436f 756e  nView.columnCoun
+0000dd20: 7428 290d 0a0d 0a20 2020 2020 2020 2074  t()....        t
+0000dd30: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
+0000dd40: 2020 2069 6620 7365 6c65 6374 696f 6e20     if selection 
+0000dd50: 3c20 6e75 6d62 6572 5f6f 665f 6974 656d  < number_of_item
+0000dd60: 732d 313a 0d0a 2020 2020 2020 2020 2020  s-1:..          
+0000dd70: 2020 2020 2020 6375 7272 656e 7452 6f77        currentRow
+0000dd80: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
+0000dd90: 696f 6e56 6965 772e 6375 7272 656e 7452  ionView.currentR
+0000dda0: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
+0000ddb0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
+0000ddc0: 2072 616e 6765 286e 756d 6265 725f 6f66   range(number_of
+0000ddd0: 5f63 6f6c 756d 6e73 293a 0d0a 2020 2020  _columns):..    
+0000dde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ddf0: 6375 7272 656e 7449 7465 6d20 3d20 7365  currentItem = se
+0000de00: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000de10: 6577 2e74 616b 6549 7465 6d28 6375 7272  ew.takeItem(curr
+0000de20: 656e 7452 6f77 2c6a 290d 0a20 2020 2020  entRow,j)..     
+0000de30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000de40: 7769 7463 6849 7465 6d20 3d20 7365 6c66  witchItem = self
+0000de50: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000de60: 2e74 616b 6549 7465 6d28 6375 7272 656e  .takeItem(curren
+0000de70: 7452 6f77 2b31 2c6a 290d 0a0d 0a20 2020  tRow+1,j)....   
+0000de80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de90: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000dea0: 6e56 6965 772e 7365 7449 7465 6d28 6375  nView.setItem(cu
+0000deb0: 7272 656e 7452 6f77 202b 2031 2c20 6a2c  rrentRow + 1, j,
+0000dec0: 2063 7572 7265 6e74 4974 656d 290d 0a20   currentItem).. 
+0000ded0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dee0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000def0: 696f 6e56 6965 772e 7365 7449 7465 6d28  ionView.setItem(
+0000df00: 6375 7272 656e 7452 6f77 2c20 6a2c 2073  currentRow, j, s
+0000df10: 7769 7463 6849 7465 6d29 0d0a 0d0a 2020  witchItem)....  
+0000df20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000df30: 2020 7377 6974 6368 5f65 6e74 7279 203d    switch_entry =
+0000df40: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000df50: 5b63 7572 7265 6e74 526f 772b 315d 0d0a  [currentRow+1]..
+0000df60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000df70: 2020 2020 6375 7272 656e 745f 656e 7472      current_entr
+0000df80: 7920 3d20 7365 6c66 2e65 6e74 7279 5f64  y = self.entry_d
+0000df90: 6174 615b 6375 7272 656e 7452 6f77 5d0d  ata[currentRow].
+0000dfa0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000dfb0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000dfc0: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
+0000dfd0: 775d 203d 2073 7769 7463 685f 656e 7472  w] = switch_entr
+0000dfe0: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
+0000dff0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000e000: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
+0000e010: 772b 315d 203d 2063 7572 7265 6e74 5f65  w+1] = current_e
+0000e020: 6e74 7279 0d0a 0d0a 2020 2020 2020 2020  ntry....        
+0000e030: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0000e040: 6e73 6163 7469 6f6e 5669 6577 2e63 6c65  nsactionView.cle
+0000e050: 6172 5365 6c65 6374 696f 6e28 290d 0a20  arSelection().. 
+0000e060: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000e070: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000e080: 6965 772e 7365 7443 7572 7265 6e74 4365  iew.setCurrentCe
+0000e090: 6c6c 2863 7572 7265 6e74 526f 772b 312c  ll(currentRow+1,
+0000e0a0: 3029 0d0a 0d0a 2020 2020 2020 2020 6578  0)....        ex
+0000e0b0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+0000e0c0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+0000e0d0: 2020 7365 6c66 2e6e 6f74 6966 7928 2265    self.notify("e
+0000e0e0: 7272 6f72 3a20 222b 7374 7228 6529 2c20  rror: "+str(e), 
+0000e0f0: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+0000e100: 0d0a 0d0a 2020 2020 6465 6620 6d6f 7665  ....    def move
+0000e110: 5f75 7028 7365 6c66 293a 0d0a 2020 2020  _up(self):..    
+0000e120: 2020 2020 2320 6d6f 7665 2073 656c 6563      # move selec
+0000e130: 7465 6420 7472 616e 7361 6374 696f 6e20  ted transaction 
+0000e140: 7570 2069 6e20 7461 626c 650d 0a20 2020  up in table..   
+0000e150: 2020 2020 2073 656c 6563 7465 645f 726f       selected_ro
+0000e160: 7773 203d 2073 6f72 7465 6428 7365 7428  ws = sorted(set(
+0000e170: 696e 6465 782e 726f 7728 2920 666f 7220  index.row() for 
+0000e180: 696e 6465 7820 696e 0d0a 2020 2020 2020  index in..      
+0000e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e1a0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000e1b0: 7469 6f6e 5669 6577 2e73 656c 6563 7465  tionView.selecte
+0000e1c0: 6449 6e64 6578 6573 2829 2929 0d0a 0d0a  dIndexes()))....
+0000e1d0: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
+0000e1e0: 656c 6563 7465 645f 726f 7773 2920 3d3d  elected_rows) ==
+0000e1f0: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+0000e200: 2070 7269 6e74 2822 6e6f 2073 656c 6563   print("no selec
+0000e210: 7465 6420 726f 7773 2229 0d0a 2020 2020  ted rows")..    
+0000e220: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
+0000e230: 0d0a 2020 2020 2020 2020 7365 6c65 6374  ..        select
+0000e240: 696f 6e20 3d20 7365 6c65 6374 6564 5f72  ion = selected_r
+0000e250: 6f77 735b 305d 0d0a 0d0a 2020 2020 2020  ows[0]....      
+0000e260: 2020 6e75 6d62 6572 5f6f 665f 6974 656d    number_of_item
+0000e270: 7320 3d20 7365 6c66 2e74 7261 6e73 6163  s = self.transac
+0000e280: 7469 6f6e 5669 6577 2e72 6f77 436f 756e  tionView.rowCoun
+0000e290: 7428 290d 0a20 2020 2020 2020 206e 756d  t()..        num
+0000e2a0: 6265 725f 6f66 5f63 6f6c 756d 6e73 203d  ber_of_columns =
+0000e2b0: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000e2c0: 6e56 6965 772e 636f 6c75 6d6e 436f 756e  nView.columnCoun
+0000e2d0: 7428 290d 0a0d 0a20 2020 2020 2020 2074  t()....        t
+0000e2e0: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
+0000e2f0: 2020 2069 6620 7365 6c65 6374 696f 6e20     if selection 
+0000e300: 3e3d 2031 3a0d 0a20 2020 2020 2020 2020  >= 1:..         
+0000e310: 2020 2020 2020 2063 7572 7265 6e74 526f         currentRo
+0000e320: 7720 3d20 7365 6c66 2e74 7261 6e73 6163  w = self.transac
+0000e330: 7469 6f6e 5669 6577 2e63 7572 7265 6e74  tionView.current
+0000e340: 526f 7728 290d 0a0d 0a20 2020 2020 2020  Row()....       
+0000e350: 2020 2020 2020 2020 2066 6f72 206a 2069           for j i
+0000e360: 6e20 7261 6e67 6528 6e75 6d62 6572 5f6f  n range(number_o
+0000e370: 665f 636f 6c75 6d6e 7329 3a0d 0a20 2020  f_columns):..   
+0000e380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e390: 2063 7572 7265 6e74 4974 656d 203d 2073   currentItem = s
+0000e3a0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000e3b0: 6965 772e 7461 6b65 4974 656d 2863 7572  iew.takeItem(cur
+0000e3c0: 7265 6e74 526f 772c 6a29 0d0a 2020 2020  rentRow,j)..    
+0000e3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e3e0: 7377 6974 6368 4974 656d 203d 2073 656c  switchItem = sel
+0000e3f0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000e400: 772e 7461 6b65 4974 656d 2863 7572 7265  w.takeItem(curre
+0000e410: 6e74 526f 772d 312c 6a29 0d0a 0d0a 2020  ntRow-1,j)....  
+0000e420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e430: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+0000e440: 6f6e 5669 6577 2e73 6574 4974 656d 2863  onView.setItem(c
+0000e450: 7572 7265 6e74 526f 7720 2d20 312c 206a  urrentRow - 1, j
+0000e460: 2c20 6375 7272 656e 7449 7465 6d29 0d0a  , currentItem)..
+0000e470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e480: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000e490: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
+0000e4a0: 2863 7572 7265 6e74 526f 772c 206a 2c20  (currentRow, j, 
+0000e4b0: 7377 6974 6368 4974 656d 290d 0a0d 0a20  switchItem).... 
+0000e4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e4d0: 2020 2073 7769 7463 685f 656e 7472 7920     switch_entry 
+0000e4e0: 3d20 7365 6c66 2e65 6e74 7279 5f64 6174  = self.entry_dat
+0000e4f0: 615b 6375 7272 656e 7452 6f77 2d31 5d0d  a[currentRow-1].
+0000e500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e510: 2020 2020 2063 7572 7265 6e74 5f65 6e74       current_ent
+0000e520: 7279 203d 2073 656c 662e 656e 7472 795f  ry = self.entry_
+0000e530: 6461 7461 5b63 7572 7265 6e74 526f 775d  data[currentRow]
+0000e540: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000e550: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0000e560: 7279 5f64 6174 615b 6375 7272 656e 7452  ry_data[currentR
+0000e570: 6f77 5d20 3d20 7377 6974 6368 5f65 6e74  ow] = switch_ent
+0000e580: 7279 0d0a 2020 2020 2020 2020 2020 2020  ry..            
+0000e590: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0000e5a0: 7279 5f64 6174 615b 6375 7272 656e 7452  ry_data[currentR
+0000e5b0: 6f77 2d31 5d20 3d20 6375 7272 656e 745f  ow-1] = current_
+0000e5c0: 656e 7472 790d 0a0d 0a20 2020 2020 2020  entry....       
+0000e5d0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000e5e0: 616e 7361 6374 696f 6e56 6965 772e 636c  ansactionView.cl
+0000e5f0: 6561 7253 656c 6563 7469 6f6e 2829 0d0a  earSelection()..
+0000e600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e610: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000e620: 5669 6577 2e73 6574 4375 7272 656e 7443  View.setCurrentC
+0000e630: 656c 6c28 6375 7272 656e 7452 6f77 2d31  ell(currentRow-1
+0000e640: 2c30 290d 0a0d 0a20 2020 2020 2020 2065  ,0)....        e
+0000e650: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+0000e660: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
+0000e670: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
+0000e680: 6572 726f 723a 2022 2b73 7472 2865 292c  error: "+str(e),
+0000e690: 2074 6974 6c65 3d22 4572 726f 7222 290d   title="Error").
+0000e6a0: 0a0d 0a20 2020 2064 6566 2064 6174 615f  ...    def data_
+0000e6b0: 7365 6c65 6374 2873 656c 6629 3a0d 0a0d  select(self):...
+0000e6c0: 0a20 2020 2020 2020 2023 7365 6c65 6374  .        #select
+0000e6d0: 6564 5f72 6f77 7320 3d20 7365 6c66 2e74  ed_rows = self.t
+0000e6e0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
+0000e6f0: 656c 6563 7469 6f6e 4d6f 6465 6c28 292e  electionModel().
+0000e700: 7365 6c65 6374 6564 526f 7773 2829 0d0a  selectedRows()..
+0000e710: 2020 2020 2020 2020 7365 6c65 6374 6564          selected
+0000e720: 5f72 6f77 7320 3d20 736f 7274 6564 2873  _rows = sorted(s
+0000e730: 6574 2869 6e64 6578 2e72 6f77 2829 2066  et(index.row() f
+0000e740: 6f72 2069 6e64 6578 2069 6e0d 0a20 2020  or index in..   
 0000e750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e760: 6d79 5f65 6e74 7279 203d 2073 656c 662e  my_entry = self.
-0000e770: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000e780: 6974 656d 2869 2c20 3329 2e74 6578 7428  item(i, 3).text(
-0000e790: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000e7a0: 2020 2020 2070 7269 6e74 2822 2e2e 2e22       print("..."
-0000e7b0: 2c69 2c6d 795f 656e 7472 7929 0d0a 2020  ,i,my_entry)..  
-0000e7c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000e7d0: 206d 795f 656e 7472 7920 3d3d 2065 7870   my_entry == exp
-0000e7e0: 7220 6f72 206d 795f 656e 7472 792e 6c6f  r or my_entry.lo
-0000e7f0: 7765 7228 2920 3d3d 2065 7870 722e 6c6f  wer() == expr.lo
-0000e800: 7765 7228 293a 0d0a 0d0a 2020 2020 2020  wer():....      
-0000e810: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000e820: 6c66 2e72 6f77 5f73 656c 6563 7428 6929  lf.row_select(i)
-0000e830: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000e840: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
-0000e850: 2020 2020 6465 6620 726f 775f 7365 6c65      def row_sele
-0000e860: 6374 2873 656c 662c 7365 6c65 6374 696f  ct(self,selectio
-0000e870: 6e29 3a0d 0a0d 0a20 2020 2020 2020 2023  n):....        #
-0000e880: 2063 6f6c 6f72 2074 6865 2073 656c 6563   color the selec
-0000e890: 7465 6420 726f 770d 0a20 2020 2020 2020  ted row..       
-0000e8a0: 2023 2067 6228 3233 332c 2032 3334 2c20   # gb(233, 234, 
-0000e8b0: 3232 3729 3b0d 0a0d 0a20 2020 2020 2020  227);....       
-0000e8c0: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
-0000e8d0: 6964 7820 3d20 4e6f 6e65 0d0a 0d0a 2020  idx = None....  
-0000e8e0: 2020 2020 2020 6966 2073 656c 662e 6d61        if self.ma
-0000e8f0: 6465 5f63 6861 6e67 6573 3a0d 0a20 2020  de_changes:..   
-0000e900: 2020 2020 2020 2020 2079 6573 203d 2073           yes = s
-0000e910: 656c 662e 6173 6b5f 7175 6573 7469 6f6e  elf.ask_question
-0000e920: 2822 5761 726e 696e 6722 2c20 2259 6f75  ("Warning", "You
-0000e930: 2061 7265 2061 626f 7574 2074 6f20 6368   are about to ch
-0000e940: 616e 6765 2074 6f20 616e 6f74 6865 7220  ange to another 
-0000e950: 7472 616e 7361 6374 696f 6e20 616e 6420  transaction and 
-0000e960: 7769 7468 6472 6177 2074 6865 2063 6861  withdraw the cha
-0000e970: 6e67 6573 2079 6f75 206d 6164 652e 2043  nges you made. C
-0000e980: 6f6e 7469 6e75 653f 2229 0d0a 2020 2020  ontinue?")..    
-0000e990: 2020 2020 2020 2020 6966 206e 6f74 2079          if not y
-0000e9a0: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
-0000e9b0: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-0000e9c0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-0000e9d0: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
-0000e9e0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0000e9f0: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
-0000ea00: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0000ea10: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0000ea20: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
-0000ea30: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000ea40: 772e 636f 6c75 6d6e 436f 756e 7428 2929  w.columnCount())
-0000ea50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000ea60: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000ea70: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
-0000ea80: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
-0000ea90: 6964 782c 2069 292e 7365 7442 6163 6b67  idx, i).setBackg
-0000eaa0: 726f 756e 6428 5174 4775 692e 5143 6f6c  round(QtGui.QCol
-0000eab0: 6f72 2832 3333 2c20 3233 342c 2032 3237  or(233, 234, 227
-0000eac0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000ead0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0000eae0: 6e73 6163 7469 6f6e 5669 6577 2e73 6372  nsactionView.scr
-0000eaf0: 6f6c 6c54 6f49 7465 6d28 7365 6c66 2e74  ollToItem(self.t
-0000eb00: 7261 6e73 6163 7469 6f6e 5669 6577 2e69  ransactionView.i
-0000eb10: 7465 6d28 7365 6c65 6374 696f 6e2c 2069  tem(selection, i
-0000eb20: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000eb30: 666f 7220 6920 696e 2072 616e 6765 2873  for i in range(s
-0000eb40: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000eb50: 6965 772e 636f 6c75 6d6e 436f 756e 7428  iew.columnCount(
-0000eb60: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
-0000eb70: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
-0000eb80: 6374 696f 6e56 6965 772e 6974 656d 2873  ctionView.item(s
-0000eb90: 656c 6563 7469 6f6e 2c20 6929 2e73 6574  election, i).set
-0000eba0: 4261 636b 6772 6f75 6e64 2851 7447 7569  Background(QtGui
-0000ebb0: 2e51 436f 6c6f 7228 3539 2c20 3539 2c20  .QColor(59, 59, 
-0000ebc0: 3135 3929 290d 0a20 2020 2020 2020 2020  159))..         
-0000ebd0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000ebe0: 7361 6374 696f 6e56 6965 772e 7363 726f  sactionView.scro
-0000ebf0: 6c6c 546f 4974 656d 2873 656c 662e 7472  llToItem(self.tr
-0000ec00: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
-0000ec10: 656d 2873 656c 6563 7469 6f6e 2c20 6929  em(selection, i)
-0000ec20: 290d 0a20 2020 2020 2020 2020 2020 2022  )..            "
-0000ec30: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-0000ec40: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000ec50: 5669 6577 2e63 6c65 6172 5365 6c65 6374  View.clearSelect
-0000ec60: 696f 6e28 290d 0a20 2020 2020 2020 2020  ion()..         
-0000ec70: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000ec80: 696f 6e56 6965 772e 7365 7443 7572 7265  ionView.setCurre
-0000ec90: 6e74 4365 6c6c 2873 656c 6563 7469 6f6e  ntCell(selection
-0000eca0: 2c33 290d 0a0d 0a0d 0a0d 0a20 2020 2020  ,3)........     
-0000ecb0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0000ecc0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-0000ecd0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0000ece0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-0000ecf0: 656c 6563 7469 6f6e 5f69 6478 203d 2073  election_idx = s
-0000ed00: 656c 6563 7469 6f6e 0d0a 2020 2020 2020  election..      
-0000ed10: 2020 2020 2020 7072 696e 7428 2273 656c        print("sel
-0000ed20: 6563 7469 6f6e 222c 7365 6c65 6374 696f  ection",selectio
-0000ed30: 6e29 0d0a 0d0a 2020 2020 2020 2020 2020  n)....          
-0000ed40: 2020 6461 7461 203d 2073 656c 662e 656e    data = self.en
-0000ed50: 7472 795f 6461 7461 5b73 656c 6563 7469  try_data[selecti
-0000ed60: 6f6e 5d0d 0a0d 0a20 2020 2020 2020 2020  on]....         
-0000ed70: 2020 2070 7269 6e74 2822 6461 7461 222c     print("data",
-0000ed80: 2064 6174 6129 0d0a 0d0a 2020 2020 2020   data)....      
-0000ed90: 2020 2020 2020 7365 6c66 2e41 7373 6574        self.Asset
-0000eda0: 4c69 7374 4c65 6674 2e63 6c65 6172 2829  ListLeft.clear()
-0000edb0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000edc0: 6c66 2e4c 6961 6269 6c69 7479 4c69 7374  lf.LiabilityList
-0000edd0: 4c65 6674 2e63 6c65 6172 2829 0d0a 2020  Left.clear()..  
-0000ede0: 2020 2020 2020 2020 2020 7365 6c66 2e4c            self.L
-0000edf0: 6961 6269 6c69 7479 4c69 7374 5269 6768  iabilityListRigh
-0000ee00: 742e 636c 6561 7228 290d 0a20 2020 2020  t.clear()..     
-0000ee10: 2020 2020 2020 2073 656c 662e 4173 7365         self.Asse
-0000ee20: 744c 6973 7452 6967 6874 2e63 6c65 6172  tListRight.clear
-0000ee30: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0000ee40: 7365 6c66 2e45 7175 6974 794c 6973 744c  self.EquityListL
-0000ee50: 6566 742e 636c 6561 7228 290d 0a20 2020  eft.clear()..   
-0000ee60: 2020 2020 2020 2020 2073 656c 662e 4571           self.Eq
-0000ee70: 7569 7479 4c69 7374 5269 6768 742e 636c  uityListRight.cl
-0000ee80: 6561 7228 290d 0a0d 0a20 2020 2020 2020  ear()....       
-0000ee90: 2020 2020 2073 656c 662e 4173 7365 744c       self.AssetL
-0000eea0: 6973 744c 6566 742e 7365 7450 6c61 696e  istLeft.setPlain
-0000eeb0: 5465 7874 2864 6174 615b 2261 3122 5d29  Text(data["a1"])
-0000eec0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000eed0: 6c66 2e41 7373 6574 4c69 7374 5269 6768  lf.AssetListRigh
-0000eee0: 742e 7365 7450 6c61 696e 5465 7874 2864  t.setPlainText(d
-0000eef0: 6174 615b 2261 3222 5d29 0d0a 2020 2020  ata["a2"])..    
-0000ef00: 2020 2020 2020 2020 7365 6c66 2e4c 6961          self.Lia
-0000ef10: 6269 6c69 7479 4c69 7374 4c65 6674 2e73  bilityListLeft.s
-0000ef20: 6574 506c 6169 6e54 6578 7428 6461 7461  etPlainText(data
-0000ef30: 5b22 6c31 225d 2920 2023 202b 6461 7461  ["l1"])  # +data
-0000ef40: 5b22 6531 225d 290d 0a20 2020 2020 2020  ["e1"])..       
-0000ef50: 2020 2020 2073 656c 662e 4c69 6162 696c       self.Liabil
-0000ef60: 6974 794c 6973 7452 6967 6874 2e73 6574  ityListRight.set
-0000ef70: 506c 6169 6e54 6578 7428 6461 7461 5b22  PlainText(data["
-0000ef80: 6c32 225d 2920 2320 2b64 6174 615b 2265  l2"]) # +data["e
-0000ef90: 3222 5d29 0d0a 2020 2020 2020 2020 2020  2"])..          
-0000efa0: 2020 7365 6c66 2e45 7175 6974 794c 6973    self.EquityLis
-0000efb0: 744c 6566 742e 7365 7450 6c61 696e 5465  tLeft.setPlainTe
-0000efc0: 7874 2864 6174 615b 2265 3122 5d29 0d0a  xt(data["e1"])..
-0000efd0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000efe0: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
-0000eff0: 2e73 6574 506c 6169 6e54 6578 7428 6461  .setPlainText(da
-0000f000: 7461 5b22 6532 225d 290d 0a0d 0a20 2020  ta["e2"])....   
-0000f010: 2020 2020 2020 2020 2073 656c 662e 6167           self.ag
-0000f020: 656e 7431 4564 6974 2e73 6574 5465 7874  ent1Edit.setText
-0000f030: 2863 616d 656c 2864 6174 615b 2261 6765  (camel(data["age
-0000f040: 6e74 3122 5d29 2920 232e 6361 7069 7461  nt1"])) #.capita
-0000f050: 6c69 7a65 2829 290d 0a20 2020 2020 2020  lize())..       
-0000f060: 2020 2020 2073 656c 662e 6167 656e 7432       self.agent2
-0000f070: 4564 6974 2e73 6574 5465 7874 2863 616d  Edit.setText(cam
-0000f080: 656c 2864 6174 615b 2261 6765 6e74 3222  el(data["agent2"
-0000f090: 5d29 2920 2320 2e63 6170 6974 616c 697a  ])) # .capitaliz
-0000f0a0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
-0000f0b0: 2020 2020 7365 6c66 2e72 6567 6973 7465      self.registe
-0000f0c0: 7246 6c6f 7742 6f78 2e73 6574 4375 7272  rFlowBox.setCurr
-0000f0d0: 656e 7449 6e64 6578 2873 656c 662e 7265  entIndex(self.re
-0000f0e0: 6769 7374 6572 466c 6f77 426f 782e 6669  gisterFlowBox.fi
-0000f0f0: 6e64 5465 7874 2873 7472 2864 6174 615b  ndText(str(data[
-0000f100: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
-0000f110: 225d 2929 290d 0a0d 0a20 2020 2020 2020  "])))....       
-0000f120: 2020 2020 2063 6173 6866 6c6f 7731 203d       cashflow1 =
-0000f130: 2064 6174 615b 2263 6173 6866 6c6f 7731   data["cashflow1
-0000f140: 225d 206f 7220 224e 6f6e 6522 0d0a 2020  "] or "None"..  
-0000f150: 2020 2020 2020 2020 2020 6361 7368 666c            cashfl
-0000f160: 6f77 3220 3d20 6461 7461 5b22 6361 7368  ow2 = data["cash
-0000f170: 666c 6f77 3222 5d20 6f72 2022 4e6f 6e65  flow2"] or "None
-0000f180: 220d 0a20 2020 2020 2020 2020 2020 2073  "..            s
-0000f190: 656c 662e 636f 6d62 6f43 6173 684c 6566  elf.comboCashLef
-0000f1a0: 742e 7365 7443 7572 7265 6e74 496e 6465  t.setCurrentInde
-0000f1b0: 7828 7365 6c66 2e63 6f6d 626f 4361 7368  x(self.comboCash
-0000f1c0: 4c65 6674 2e66 696e 6454 6578 7428 7374  Left.findText(st
-0000f1d0: 7228 6361 7368 666c 6f77 3129 2929 0d0a  r(cashflow1)))..
-0000f1e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000f1f0: 2e63 6f6d 626f 4361 7368 5269 6768 742e  .comboCashRight.
-0000f200: 7365 7443 7572 7265 6e74 496e 6465 7828  setCurrentIndex(
-0000f210: 7365 6c66 2e63 6f6d 626f 4361 7368 5269  self.comboCashRi
-0000f220: 6768 742e 6669 6e64 5465 7874 2873 7472  ght.findText(str
-0000f230: 2863 6173 6866 6c6f 7732 2929 290d 0a0d  (cashflow2)))...
-0000f240: 0a20 2020 2020 2020 2020 2020 2074 7274  .            trt
-0000f250: 7970 6520 3d20 6461 7461 5b22 6b69 6e64  ype = data["kind
-0000f260: 225d 206f 7220 224b 412d 3e4b 4122 0d0a  "] or "KA->KA"..
-0000f270: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000f280: 2e65 6469 7454 7970 652e 7365 7443 7572  .editType.setCur
-0000f290: 7265 6e74 496e 6465 7828 7365 6c66 2e65  rentIndex(self.e
-0000f2a0: 6469 7454 7970 652e 6669 6e64 5465 7874  ditType.findText
-0000f2b0: 2873 7472 2874 7274 7970 6529 2929 0d0a  (str(trtype)))..
-0000f2c0: 0d0a 2020 2020 2020 2020 2020 2020 6963  ..            ic
-0000f2d0: 7331 203d 2064 6174 615b 2269 6e63 6f6d  s1 = data["incom
-0000f2e0: 6531 225d 206f 7220 224e 6f6e 6522 0d0a  e1"] or "None"..
-0000f2f0: 2020 2020 2020 2020 2020 2020 6963 7332              ics2
-0000f300: 203d 2064 6174 615b 2269 6e63 6f6d 6532   = data["income2
-0000f310: 225d 206f 7220 224e 6f6e 6522 0d0a 2020  "] or "None"..  
-0000f320: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-0000f330: 6f6d 626f 496e 636f 6d65 4c65 6674 2e73  omboIncomeLeft.s
-0000f340: 6574 4375 7272 656e 7449 6e64 6578 2873  etCurrentIndex(s
-0000f350: 656c 662e 636f 6d62 6f49 6e63 6f6d 654c  elf.comboIncomeL
-0000f360: 6566 742e 6669 6e64 5465 7874 2869 6373  eft.findText(ics
-0000f370: 3129 290d 0a20 2020 2020 2020 2020 2020  1))..           
-0000f380: 2073 656c 662e 636f 6d62 6f49 6e63 6f6d   self.comboIncom
-0000f390: 6552 6967 6874 2e73 6574 4375 7272 656e  eRight.setCurren
-0000f3a0: 7449 6e64 6578 2873 656c 662e 636f 6d62  tIndex(self.comb
-0000f3b0: 6f49 6e63 6f6d 6552 6967 6874 2e66 696e  oIncomeRight.fin
-0000f3c0: 6454 6578 7428 6963 7332 2929 0d0a 0d0a  dText(ics2))....
-0000f3d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000f3e0: 2e65 6469 7451 7561 6e74 6974 792e 7365  .editQuantity.se
-0000f3f0: 7454 6578 7428 6461 7461 5b22 7175 616e  tText(data["quan
-0000f400: 7469 7479 225d 290d 0a20 2020 2020 2020  tity"])..       
-0000f410: 2020 2020 2073 656c 662e 6564 6974 5375       self.editSu
-0000f420: 626a 6563 742e 7365 7454 6578 7428 6461  bject.setText(da
-0000f430: 7461 5b22 7375 626a 6563 7422 5d29 0d0a  ta["subject"])..
-0000f440: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000f450: 6c66 2e64 7261 7763 616e 7661 732e 6869  lf.drawcanvas.hi
-0000f460: 6768 6c69 6768 745f 636f 6e6e 6563 746f  ghlight_connecto
-0000f470: 7228 6461 7461 5b22 7368 6f72 746e 616d  r(data["shortnam
-0000f480: 6522 5d29 0d0a 0d0a 2020 2020 2020 2020  e"])....        
-0000f490: 2020 2020 6966 2022 6465 7363 7269 7074      if "descript
-0000f4a0: 696f 6e22 2069 6e20 6461 7461 3a0d 0a20  ion" in data:.. 
-0000f4b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000f4c0: 656c 662e 6564 6974 4465 7363 7269 7074  elf.editDescript
-0000f4d0: 696f 6e2e 7365 7454 6578 7428 6461 7461  ion.setText(data
-0000f4e0: 5b22 6465 7363 7269 7074 696f 6e22 5d29  ["description"])
-0000f4f0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-0000f500: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0000f510: 2020 2020 2073 656c 662e 6564 6974 4465       self.editDe
-0000f520: 7363 7269 7074 696f 6e2e 7365 7454 6578  scription.setTex
-0000f530: 7428 2222 290d 0a20 2020 2020 2020 2020  t("")..         
-0000f540: 2020 2073 656c 662e 6564 6974 5368 6f72     self.editShor
-0000f550: 746e 616d 652e 7365 7454 6578 7428 6461  tname.setText(da
-0000f560: 7461 5b22 7368 6f72 746e 616d 6522 5d29  ta["shortname"])
+0000e760: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000e770: 7361 6374 696f 6e56 6965 772e 7365 6c65  sactionView.sele
+0000e780: 6374 6564 496e 6465 7865 7328 2929 290d  ctedIndexes())).
+0000e790: 0a0d 0a20 2020 2020 2020 2069 6620 6c65  ...        if le
+0000e7a0: 6e28 7365 6c65 6374 6564 5f72 6f77 7329  n(selected_rows)
+0000e7b0: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+0000e7c0: 2020 2020 7072 696e 7428 226e 6f20 7365      print("no se
+0000e7d0: 6c65 6374 6564 2072 6f77 7322 290d 0a20  lected rows").. 
+0000e7e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000e7f0: 6e0d 0a0d 0a20 2020 2020 2020 2073 656c  n....        sel
+0000e800: 6563 7469 6f6e 203d 2073 656c 6563 7465  ection = selecte
+0000e810: 645f 726f 7773 5b30 5d0d 0a0d 0a20 2020  d_rows[0]....   
+0000e820: 2020 2020 2073 656c 662e 726f 775f 7365       self.row_se
+0000e830: 6c65 6374 2873 656c 6563 7469 6f6e 290d  lect(selection).
+0000e840: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0000e850: 6465 5f63 6861 6e67 6573 203d 2046 616c  de_changes = Fal
+0000e860: 7365 0d0a 0d0a 0d0a 2020 2020 6465 6620  se......    def 
+0000e870: 6461 7461 5f73 656c 6563 745f 7768 6572  data_select_wher
+0000e880: 6528 7365 6c66 2c65 7870 7229 3a0d 0a20  e(self,expr):.. 
+0000e890: 2020 2020 2020 2070 7269 6e74 2822 6461         print("da
+0000e8a0: 7461 2073 656c 6563 7420 7768 6572 6522  ta select where"
+0000e8b0: 2c65 7870 7229 0d0a 0d0a 2020 2020 2020  ,expr)....      
+0000e8c0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+0000e8d0: 2873 656c 662e 7472 616e 7361 6374 696f  (self.transactio
+0000e8e0: 6e56 6965 772e 726f 7743 6f75 6e74 2829  nView.rowCount()
+0000e8f0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000e900: 2020 2020 6d79 5f65 6e74 7279 203d 2073      my_entry = s
+0000e910: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000e920: 6965 772e 6974 656d 2869 2c20 3329 2e74  iew.item(i, 3).t
+0000e930: 6578 7428 290d 0a0d 0a20 2020 2020 2020  ext()....       
+0000e940: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0000e950: 2e2e 2e22 2c69 2c6d 795f 656e 7472 7929  ...",i,my_entry)
+0000e960: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e970: 2020 6966 206d 795f 656e 7472 7920 3d3d    if my_entry ==
+0000e980: 2065 7870 7220 6f72 206d 795f 656e 7472   expr or my_entr
+0000e990: 792e 6c6f 7765 7228 2920 3d3d 2065 7870  y.lower() == exp
+0000e9a0: 722e 6c6f 7765 7228 293a 0d0a 0d0a 2020  r.lower():....  
+0000e9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e9c0: 2020 7365 6c66 2e72 6f77 5f73 656c 6563    self.row_selec
+0000e9d0: 7428 6929 0d0a 2020 2020 2020 2020 2020  t(i)..          
+0000e9e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000e9f0: 0d0a 0d0a 2020 2020 6465 6620 726f 775f  ....    def row_
+0000ea00: 7365 6c65 6374 2873 656c 662c 7365 6c65  select(self,sele
+0000ea10: 6374 696f 6e29 3a0d 0a0d 0a20 2020 2020  ction):....     
+0000ea20: 2020 2023 2063 6f6c 6f72 2074 6865 2073     # color the s
+0000ea30: 656c 6563 7465 6420 726f 770d 0a20 2020  elected row..   
+0000ea40: 2020 2020 2023 2067 6228 3233 332c 2032       # gb(233, 2
+0000ea50: 3334 2c20 3232 3729 3b0d 0a0d 0a20 2020  34, 227);....   
+0000ea60: 2020 2020 2073 656c 662e 7365 6c65 6374       self.select
+0000ea70: 696f 6e5f 6964 7820 3d20 4e6f 6e65 0d0a  ion_idx = None..
+0000ea80: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+0000ea90: 662e 6d61 6465 5f63 6861 6e67 6573 3a0d  f.made_changes:.
+0000eaa0: 0a20 2020 2020 2020 2020 2020 2079 6573  .            yes
+0000eab0: 203d 2073 656c 662e 6173 6b5f 7175 6573   = self.ask_ques
+0000eac0: 7469 6f6e 2822 5761 726e 696e 6722 2c20  tion("Warning", 
+0000ead0: 2259 6f75 2061 7265 2061 626f 7574 2074  "You are about t
+0000eae0: 6f20 6368 616e 6765 2074 6f20 616e 6f74  o change to anot
+0000eaf0: 6865 7220 7472 616e 7361 6374 696f 6e20  her transaction 
+0000eb00: 616e 6420 7769 7468 6472 6177 2074 6865  and withdraw the
+0000eb10: 2063 6861 6e67 6573 2079 6f75 206d 6164   changes you mad
+0000eb20: 652e 2043 6f6e 7469 6e75 653f 2229 0d0a  e. Continue?")..
+0000eb30: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0000eb40: 6f74 2079 6573 3a0d 0a20 2020 2020 2020  ot yes:..       
+0000eb50: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
+0000eb60: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+0000eb70: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
+0000eb80: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000eb90: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
+0000eba0: 6964 7820 6973 206e 6f74 204e 6f6e 653a  idx is not None:
+0000ebb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ebc0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+0000ebd0: 2873 656c 662e 7472 616e 7361 6374 696f  (self.transactio
+0000ebe0: 6e56 6965 772e 636f 6c75 6d6e 436f 756e  nView.columnCoun
+0000ebf0: 7428 2929 3a0d 0a20 2020 2020 2020 2020  t()):..         
+0000ec00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000ec10: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000ec20: 6974 656d 2873 656c 662e 7365 6c65 6374  item(self.select
+0000ec30: 696f 6e5f 6964 782c 2069 292e 7365 7442  ion_idx, i).setB
+0000ec40: 6163 6b67 726f 756e 6428 5174 4775 692e  ackground(QtGui.
+0000ec50: 5143 6f6c 6f72 2832 3333 2c20 3233 342c  QColor(233, 234,
+0000ec60: 2032 3237 2929 0d0a 2020 2020 2020 2020   227))..        
+0000ec70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000ec80: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000ec90: 2e73 6372 6f6c 6c54 6f49 7465 6d28 7365  .scrollToItem(se
+0000eca0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000ecb0: 6577 2e69 7465 6d28 7365 6c65 6374 696f  ew.item(selectio
+0000ecc0: 6e2c 2069 2929 0d0a 2020 2020 2020 2020  n, i))..        
+0000ecd0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+0000ece0: 6765 2873 656c 662e 7472 616e 7361 6374  ge(self.transact
+0000ecf0: 696f 6e56 6965 772e 636f 6c75 6d6e 436f  ionView.columnCo
+0000ed00: 756e 7428 2929 3a0d 0a20 2020 2020 2020  unt()):..       
+0000ed10: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000ed20: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
+0000ed30: 656d 2873 656c 6563 7469 6f6e 2c20 6929  em(selection, i)
+0000ed40: 2e73 6574 4261 636b 6772 6f75 6e64 2851  .setBackground(Q
+0000ed50: 7447 7569 2e51 436f 6c6f 7228 3539 2c20  tGui.QColor(59, 
+0000ed60: 3539 2c20 3135 3929 290d 0a20 2020 2020  59, 159))..     
+0000ed70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000ed80: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000ed90: 7363 726f 6c6c 546f 4974 656d 2873 656c  scrollToItem(sel
+0000eda0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000edb0: 772e 6974 656d 2873 656c 6563 7469 6f6e  w.item(selection
+0000edc0: 2c20 6929 290d 0a20 2020 2020 2020 2020  , i))..         
+0000edd0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0000ede0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000edf0: 7469 6f6e 5669 6577 2e63 6c65 6172 5365  tionView.clearSe
+0000ee00: 6c65 6374 696f 6e28 290d 0a20 2020 2020  lection()..     
+0000ee10: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000ee20: 7361 6374 696f 6e56 6965 772e 7365 7443  sactionView.setC
+0000ee30: 7572 7265 6e74 4365 6c6c 2873 656c 6563  urrentCell(selec
+0000ee40: 7469 6f6e 2c33 290d 0a0d 0a0d 0a0d 0a20  tion,3)........ 
+0000ee50: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
+0000ee60: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+0000ee70: 0d0a 0d0a 2020 2020 2020 2020 7472 793a  ....        try:
+0000ee80: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000ee90: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+0000eea0: 203d 2073 656c 6563 7469 6f6e 0d0a 2020   = selection..  
+0000eeb0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0000eec0: 2273 656c 6563 7469 6f6e 222c 7365 6c65  "selection",sele
+0000eed0: 6374 696f 6e29 0d0a 0d0a 2020 2020 2020  ction)....      
+0000eee0: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
+0000eef0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
+0000ef00: 6563 7469 6f6e 5d0d 0a0d 0a20 2020 2020  ection]....     
+0000ef10: 2020 2020 2020 2070 7269 6e74 2822 6461         print("da
+0000ef20: 7461 222c 2064 6174 6129 0d0a 0d0a 2020  ta", data)....  
+0000ef30: 2020 2020 2020 2020 2020 7365 6c66 2e41            self.A
+0000ef40: 7373 6574 4c69 7374 4c65 6674 2e63 6c65  ssetListLeft.cle
+0000ef50: 6172 2829 0d0a 2020 2020 2020 2020 2020  ar()..          
+0000ef60: 2020 7365 6c66 2e4c 6961 6269 6c69 7479    self.Liability
+0000ef70: 4c69 7374 4c65 6674 2e63 6c65 6172 2829  ListLeft.clear()
+0000ef80: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000ef90: 6c66 2e4c 6961 6269 6c69 7479 4c69 7374  lf.LiabilityList
+0000efa0: 5269 6768 742e 636c 6561 7228 290d 0a20  Right.clear().. 
+0000efb0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000efc0: 4173 7365 744c 6973 7452 6967 6874 2e63  AssetListRight.c
+0000efd0: 6c65 6172 2829 0d0a 2020 2020 2020 2020  lear()..        
+0000efe0: 2020 2020 7365 6c66 2e45 7175 6974 794c      self.EquityL
+0000eff0: 6973 744c 6566 742e 636c 6561 7228 290d  istLeft.clear().
+0000f000: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000f010: 662e 4571 7569 7479 4c69 7374 5269 6768  f.EquityListRigh
+0000f020: 742e 636c 6561 7228 290d 0a0d 0a20 2020  t.clear()....   
+0000f030: 2020 2020 2020 2020 2073 656c 662e 4173           self.As
+0000f040: 7365 744c 6973 744c 6566 742e 7365 7450  setListLeft.setP
+0000f050: 6c61 696e 5465 7874 2864 6174 615b 2261  lainText(data["a
+0000f060: 3122 5d29 0d0a 2020 2020 2020 2020 2020  1"])..          
+0000f070: 2020 7365 6c66 2e41 7373 6574 4c69 7374    self.AssetList
+0000f080: 5269 6768 742e 7365 7450 6c61 696e 5465  Right.setPlainTe
+0000f090: 7874 2864 6174 615b 2261 3222 5d29 0d0a  xt(data["a2"])..
+0000f0a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000f0b0: 2e4c 6961 6269 6c69 7479 4c69 7374 4c65  .LiabilityListLe
+0000f0c0: 6674 2e73 6574 506c 6169 6e54 6578 7428  ft.setPlainText(
+0000f0d0: 6461 7461 5b22 6c31 225d 2920 2023 202b  data["l1"])  # +
+0000f0e0: 6461 7461 5b22 6531 225d 290d 0a20 2020  data["e1"])..   
+0000f0f0: 2020 2020 2020 2020 2073 656c 662e 4c69           self.Li
+0000f100: 6162 696c 6974 794c 6973 7452 6967 6874  abilityListRight
+0000f110: 2e73 6574 506c 6169 6e54 6578 7428 6461  .setPlainText(da
+0000f120: 7461 5b22 6c32 225d 2920 2320 2b64 6174  ta["l2"]) # +dat
+0000f130: 615b 2265 3222 5d29 0d0a 2020 2020 2020  a["e2"])..      
+0000f140: 2020 2020 2020 7365 6c66 2e45 7175 6974        self.Equit
+0000f150: 794c 6973 744c 6566 742e 7365 7450 6c61  yListLeft.setPla
+0000f160: 696e 5465 7874 2864 6174 615b 2265 3122  inText(data["e1"
+0000f170: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0000f180: 7365 6c66 2e45 7175 6974 794c 6973 7452  self.EquityListR
+0000f190: 6967 6874 2e73 6574 506c 6169 6e54 6578  ight.setPlainTex
+0000f1a0: 7428 6461 7461 5b22 6532 225d 290d 0a0d  t(data["e2"])...
+0000f1b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000f1c0: 662e 6167 656e 7431 4564 6974 2e73 6574  f.agent1Edit.set
+0000f1d0: 5465 7874 2863 616d 656c 2864 6174 615b  Text(camel(data[
+0000f1e0: 2261 6765 6e74 3122 5d29 2920 232e 6361  "agent1"])) #.ca
+0000f1f0: 7069 7461 6c69 7a65 2829 290d 0a20 2020  pitalize())..   
+0000f200: 2020 2020 2020 2020 2073 656c 662e 6167           self.ag
+0000f210: 656e 7432 4564 6974 2e73 6574 5465 7874  ent2Edit.setText
+0000f220: 2863 616d 656c 2864 6174 615b 2261 6765  (camel(data["age
+0000f230: 6e74 3222 5d29 2920 2320 2e63 6170 6974  nt2"])) # .capit
+0000f240: 616c 697a 6528 2929 0d0a 0d0a 2020 2020  alize())....    
+0000f250: 2020 2020 2020 2020 7365 6c66 2e72 6567          self.reg
+0000f260: 6973 7465 7246 6c6f 7742 6f78 2e73 6574  isterFlowBox.set
+0000f270: 4375 7272 656e 7449 6e64 6578 2873 656c  CurrentIndex(sel
+0000f280: 662e 7265 6769 7374 6572 466c 6f77 426f  f.registerFlowBo
+0000f290: 782e 6669 6e64 5465 7874 2873 7472 2864  x.findText(str(d
+0000f2a0: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
+0000f2b0: 7469 6f6e 225d 2929 290d 0a0d 0a20 2020  tion"])))....   
+0000f2c0: 2020 2020 2020 2020 2063 6173 6866 6c6f           cashflo
+0000f2d0: 7731 203d 2064 6174 615b 2263 6173 6866  w1 = data["cashf
+0000f2e0: 6c6f 7731 225d 206f 7220 224e 6f6e 6522  low1"] or "None"
+0000f2f0: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
+0000f300: 7368 666c 6f77 3220 3d20 6461 7461 5b22  shflow2 = data["
+0000f310: 6361 7368 666c 6f77 3222 5d20 6f72 2022  cashflow2"] or "
+0000f320: 4e6f 6e65 220d 0a20 2020 2020 2020 2020  None"..         
+0000f330: 2020 2073 656c 662e 636f 6d62 6f43 6173     self.comboCas
+0000f340: 684c 6566 742e 7365 7443 7572 7265 6e74  hLeft.setCurrent
+0000f350: 496e 6465 7828 7365 6c66 2e63 6f6d 626f  Index(self.combo
+0000f360: 4361 7368 4c65 6674 2e66 696e 6454 6578  CashLeft.findTex
+0000f370: 7428 7374 7228 6361 7368 666c 6f77 3129  t(str(cashflow1)
+0000f380: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000f390: 7365 6c66 2e63 6f6d 626f 4361 7368 5269  self.comboCashRi
+0000f3a0: 6768 742e 7365 7443 7572 7265 6e74 496e  ght.setCurrentIn
+0000f3b0: 6465 7828 7365 6c66 2e63 6f6d 626f 4361  dex(self.comboCa
+0000f3c0: 7368 5269 6768 742e 6669 6e64 5465 7874  shRight.findText
+0000f3d0: 2873 7472 2863 6173 6866 6c6f 7732 2929  (str(cashflow2))
+0000f3e0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000f3f0: 2074 7274 7970 6520 3d20 6461 7461 5b22   trtype = data["
+0000f400: 6b69 6e64 225d 206f 7220 224b 412d 3e4b  kind"] or "KA->K
+0000f410: 4122 0d0a 2020 2020 2020 2020 2020 2020  A"..            
+0000f420: 7365 6c66 2e65 6469 7454 7970 652e 7365  self.editType.se
+0000f430: 7443 7572 7265 6e74 496e 6465 7828 7365  tCurrentIndex(se
+0000f440: 6c66 2e65 6469 7454 7970 652e 6669 6e64  lf.editType.find
+0000f450: 5465 7874 2873 7472 2874 7274 7970 6529  Text(str(trtype)
+0000f460: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+0000f470: 2020 6963 7331 203d 2064 6174 615b 2269    ics1 = data["i
+0000f480: 6e63 6f6d 6531 225d 206f 7220 224e 6f6e  ncome1"] or "Non
+0000f490: 6522 0d0a 2020 2020 2020 2020 2020 2020  e"..            
+0000f4a0: 6963 7332 203d 2064 6174 615b 2269 6e63  ics2 = data["inc
+0000f4b0: 6f6d 6532 225d 206f 7220 224e 6f6e 6522  ome2"] or "None"
+0000f4c0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000f4d0: 6c66 2e63 6f6d 626f 496e 636f 6d65 4c65  lf.comboIncomeLe
+0000f4e0: 6674 2e73 6574 4375 7272 656e 7449 6e64  ft.setCurrentInd
+0000f4f0: 6578 2873 656c 662e 636f 6d62 6f49 6e63  ex(self.comboInc
+0000f500: 6f6d 654c 6566 742e 6669 6e64 5465 7874  omeLeft.findText
+0000f510: 2869 6373 3129 290d 0a20 2020 2020 2020  (ics1))..       
+0000f520: 2020 2020 2073 656c 662e 636f 6d62 6f49       self.comboI
+0000f530: 6e63 6f6d 6552 6967 6874 2e73 6574 4375  ncomeRight.setCu
+0000f540: 7272 656e 7449 6e64 6578 2873 656c 662e  rrentIndex(self.
+0000f550: 636f 6d62 6f49 6e63 6f6d 6552 6967 6874  comboIncomeRight
+0000f560: 2e66 696e 6454 6578 7428 6963 7332 2929  .findText(ics2))
 0000f570: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000f580: 756e 6964 6972 203d 2073 7472 2864 6174  unidir = str(dat
-0000f590: 615b 2275 6e69 2d64 6972 6563 7469 6f6e  a["uni-direction
-0000f5a0: 616c 225d 2920 6f72 2022 4e6f 6e65 220d  al"]) or "None".
-0000f5b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000f5c0: 662e 636f 6d62 6f55 6e69 6469 722e 7365  f.comboUnidir.se
-0000f5d0: 7443 7572 7265 6e74 496e 6465 7828 7365  tCurrentIndex(se
-0000f5e0: 6c66 2e63 6f6d 626f 556e 6964 6972 2e66  lf.comboUnidir.f
-0000f5f0: 696e 6454 6578 7428 756e 6964 6972 2929  indText(unidir))
-0000f600: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
-0000f610: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0000f620: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000f630: 7365 6c66 2e6e 6f74 6966 7928 7374 7228  self.notify(str(
-0000f640: 6529 2c74 6974 6c65 3d22 4572 726f 7222  e),title="Error"
-0000f650: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-0000f660: 662e 6d61 6465 5f63 6861 6e67 6573 203d  f.made_changes =
-0000f670: 2046 616c 7365 0d0a 0d0a 2020 2020 6465   False....    de
-0000f680: 6620 7570 6461 7465 5f64 6174 6128 7365  f update_data(se
-0000f690: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
-0000f6a0: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
-0000f6b0: 6964 7820 6973 204e 6f6e 653a 0d0a 2020  idx is None:..  
-0000f6c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000f6d0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-0000f6e0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000f6f0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000f700: 2261 3122 5d20 3d20 7365 6c66 2e41 7373  "a1"] = self.Ass
-0000f710: 6574 4c69 7374 4c65 6674 2e74 6f50 6c61  etListLeft.toPla
-0000f720: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
-0000f730: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-0000f740: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000f750: 5f69 6478 5d5b 2261 3222 5d20 3d20 7365  _idx]["a2"] = se
-0000f760: 6c66 2e41 7373 6574 4c69 7374 5269 6768  lf.AssetListRigh
-0000f770: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
-0000f780: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-0000f790: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-0000f7a0: 6c65 6374 696f 6e5f 6964 785d 5b22 6c31  lection_idx]["l1
-0000f7b0: 225d 203d 2073 656c 662e 4c69 6162 696c  "] = self.Liabil
-0000f7c0: 6974 794c 6973 744c 6566 742e 746f 506c  ityListLeft.toPl
-0000f7d0: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
-0000f7e0: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
-0000f7f0: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
-0000f800: 6e5f 6964 785d 5b22 6c32 225d 203d 2073  n_idx]["l2"] = s
-0000f810: 656c 662e 4c69 6162 696c 6974 794c 6973  elf.LiabilityLis
-0000f820: 7452 6967 6874 2e74 6f50 6c61 696e 5465  tRight.toPlainTe
-0000f830: 7874 2829 0d0a 2020 2020 2020 2020 7365  xt()..        se
-0000f840: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-0000f850: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0000f860: 5d5b 2265 3122 5d20 3d20 7365 6c66 2e45  ]["e1"] = self.E
-0000f870: 7175 6974 794c 6973 744c 6566 742e 746f  quityListLeft.to
-0000f880: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
-0000f890: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
-0000f8a0: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000f8b0: 696f 6e5f 6964 785d 5b22 6532 225d 203d  ion_idx]["e2"] =
-0000f8c0: 2073 656c 662e 4571 7569 7479 4c69 7374   self.EquityList
-0000f8d0: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
-0000f8e0: 7428 290d 0a0d 0a20 2020 2020 2020 2073  t()....        s
-0000f8f0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000f900: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000f910: 785d 5b22 6131 225d 2020 3d20 7365 6c66  x]["a1"]  = self
-0000f920: 2e41 7373 6574 4c69 7374 4c65 6674 2e74  .AssetListLeft.t
-0000f930: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
-0000f940: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000f950: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
-0000f960: 7469 6f6e 5f69 6478 5d5b 2261 3222 5d20  tion_idx]["a2"] 
-0000f970: 3d20 7365 6c66 2e41 7373 6574 4c69 7374  = self.AssetList
-0000f980: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
-0000f990: 7428 290d 0a20 2020 2020 2020 2073 656c  t()..        sel
-0000f9a0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
-0000f9b0: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
-0000f9c0: 5b22 6c31 225d 2020 3d20 7365 6c66 2e4c  ["l1"]  = self.L
-0000f9d0: 6961 6269 6c69 7479 4c69 7374 4c65 6674  iabilityListLeft
-0000f9e0: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
-0000f9f0: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-0000fa00: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
-0000fa10: 6563 7469 6f6e 5f69 6478 5d5b 226c 3222  ection_idx]["l2"
-0000fa20: 5d20 203d 2073 656c 662e 4c69 6162 696c  ]  = self.Liabil
-0000fa30: 6974 794c 6973 7452 6967 6874 2e74 6f50  ityListRight.toP
-0000fa40: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
-0000fa50: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-0000fa60: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
-0000fa70: 6f6e 5f69 6478 5d5b 2265 3122 5d20 203d  on_idx]["e1"]  =
-0000fa80: 2073 656c 662e 4571 7569 7479 4c69 7374   self.EquityList
-0000fa90: 4c65 6674 2e74 6f50 6c61 696e 5465 7874  Left.toPlainText
-0000faa0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-0000fab0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000fac0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000fad0: 2265 3222 5d20 203d 2073 656c 662e 4571  "e2"]  = self.Eq
-0000fae0: 7569 7479 4c69 7374 5269 6768 742e 746f  uityListRight.to
-0000faf0: 506c 6169 6e54 6578 7428 290d 0a0d 0a20  PlainText().... 
-0000fb00: 2020 2020 2020 206f 6e6c 795f 7265 6e61         only_rena
-0000fb10: 6d65 203d 2054 7275 650d 0a20 2020 2020  me = True..     
-0000fb20: 2020 2069 6620 7365 6c66 2e65 6e74 7279     if self.entry
-0000fb30: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
-0000fb40: 7469 6f6e 5f69 6478 5d5b 2261 6765 6e74  tion_idx]["agent
-0000fb50: 3122 5d20 2021 3d20 7365 6c66 2e61 6765  1"]  != self.age
-0000fb60: 6e74 3145 6469 742e 7465 7874 2829 3a0d  nt1Edit.text():.
-0000fb70: 0a20 2020 2020 2020 2020 2020 206f 6e6c  .            onl
-0000fb80: 795f 7265 6e61 6d65 203d 2046 616c 7365  y_rename = False
-0000fb90: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-0000fba0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
-0000fbb0: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
-0000fbc0: 5b22 6167 656e 7432 225d 2020 213d 7365  ["agent2"]  !=se
-0000fbd0: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
-0000fbe0: 7874 2829 3a0d 0a20 2020 2020 2020 2020  xt():..         
-0000fbf0: 2020 206f 6e6c 795f 7265 6e61 6d65 203d     only_rename =
-0000fc00: 2046 616c 7365 0d0a 0d0a 0d0a 2020 2020   False......    
-0000fc10: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
-0000fc20: 6472 6177 6361 6e76 6173 2e63 6865 636b  drawcanvas.check
-0000fc30: 5f65 7869 7374 2873 656c 662e 6167 656e  _exist(self.agen
-0000fc40: 7431 4564 6974 2e74 6578 7428 2929 3a0d  t1Edit.text()):.
-0000fc50: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000fc60: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
-0000fc70: 7465 7874 2829 2e73 7472 6970 2829 2021  text().strip() !
-0000fc80: 3d20 2222 3a0d 0a20 2020 2020 2020 2020  = "":..         
-0000fc90: 2020 2020 2020 2079 6573 203d 2073 656c         yes = sel
-0000fca0: 662e 6173 6b5f 7175 6573 7469 6f6e 2827  f.ask_question('
-0000fcb0: 272c 2254 6865 2061 6765 6e74 2025 7320  ',"The agent %s 
-0000fcc0: 646f 6573 206e 6f74 2065 7869 7374 2e5c  does not exist.\
-0000fcd0: 6e44 6f20 796f 7520 7769 7368 2074 6f20  nDo you wish to 
-0000fce0: 636f 6e74 696e 7565 2061 6e64 2061 7574  continue and aut
-0000fcf0: 6f6d 6174 6963 616c 6c79 2063 7265 6174  omatically creat
-0000fd00: 6520 6120 6e65 7720 6167 656e 743f 2225  e a new agent?"%
-0000fd10: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
-0000fd20: 7465 7874 2829 290d 0a20 2020 2020 2020  text())..       
-0000fd30: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0000fd40: 7965 733a 0d0a 2020 2020 2020 2020 2020  yes:..          
-0000fd50: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000fd60: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
-0000fd70: 6f74 2073 656c 662e 6472 6177 6361 6e76  ot self.drawcanv
-0000fd80: 6173 2e63 6865 636b 5f65 7869 7374 2873  as.check_exist(s
-0000fd90: 656c 662e 6167 656e 7432 4564 6974 2e74  elf.agent2Edit.t
-0000fda0: 6578 7428 2929 3a0d 0a20 2020 2020 2020  ext()):..       
-0000fdb0: 2020 2020 2069 6620 7365 6c66 2e61 6765       if self.age
-0000fdc0: 6e74 3245 6469 742e 7465 7874 2829 2e73  nt2Edit.text().s
-0000fdd0: 7472 6970 2829 2021 3d20 2222 3a0d 0a20  trip() != "":.. 
-0000fde0: 2020 2020 2020 2020 2020 2020 2020 2079                 y
-0000fdf0: 6573 203d 2073 656c 662e 6173 6b5f 7175  es = self.ask_qu
-0000fe00: 6573 7469 6f6e 2827 272c 2254 6865 2061  estion('',"The a
-0000fe10: 6765 6e74 2025 7320 646f 6573 206e 6f74  gent %s does not
-0000fe20: 2065 7869 7374 2e5c 6e44 6f20 796f 7520   exist.\nDo you 
-0000fe30: 7769 7368 2074 6f20 636f 6e74 696e 7565  wish to continue
-0000fe40: 2061 6e64 2061 7574 6f6d 6174 6963 616c   and automatical
-0000fe50: 6c79 2063 7265 6174 6520 6120 6e65 7720  ly create a new 
-0000fe60: 6167 656e 743f 2225 7365 6c66 2e61 6765  agent?"%self.age
-0000fe70: 6e74 3245 6469 742e 7465 7874 2829 290d  nt2Edit.text()).
-0000fe80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fe90: 2069 6620 6e6f 7420 7965 733a 0d0a 2020   if not yes:..  
-0000fea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000feb0: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
-0000fec0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-0000fed0: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
-0000fee0: 6f6e 5f69 6478 5d5b 2261 6765 6e74 3122  on_idx]["agent1"
-0000fef0: 5d20 203d 2063 616d 656c 2873 656c 662e  ]  = camel(self.
-0000ff00: 6167 656e 7431 4564 6974 2e74 6578 7428  agent1Edit.text(
-0000ff10: 2929 2023 2e63 6170 6974 616c 697a 6528  )) #.capitalize(
-0000ff20: 2920 2320 7570 7065 7220 6265 6361 7573  ) # upper becaus
-0000ff30: 6520 6167 656e 7473 2061 7265 2061 6c77  e agents are alw
-0000ff40: 6179 7320 7570 7065 7263 6173 650d 0a20  ays uppercase.. 
-0000ff50: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000ff60: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
-0000ff70: 6374 696f 6e5f 6964 785d 5b22 6167 656e  ction_idx]["agen
-0000ff80: 7432 225d 2020 3d20 6361 6d65 6c28 7365  t2"]  = camel(se
-0000ff90: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
-0000ffa0: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
-0000ffb0: 7a65 2829 0d0a 0d0a 2020 2020 2020 2020  ze()....        
-0000ffc0: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
-0000ffd0: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
-0000ffe0: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
-0000fff0: 7874 2829 2929 2023 2e63 6170 6974 616c  xt())) #.capital
-00010000: 697a 6528 2929 0d0a 2020 2020 2020 2020  ize())..        
-00010010: 7365 6c66 2e61 6765 6e74 3245 6469 742e  self.agent2Edit.
-00010020: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
-00010030: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
-00010040: 7874 2829 2929 2023 2e63 6170 6974 616c  xt())) #.capital
-00010050: 697a 6528 2929 0d0a 0d0a 2020 2020 2020  ize())....      
-00010060: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-00010070: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-00010080: 5f69 6478 5d5b 2275 6e69 2d64 6972 6563  _idx]["uni-direc
-00010090: 7469 6f6e 616c 225d 203d 205c 0d0a 2020  tional"] = \..  
-000100a0: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
-000100b0: 6c66 2e63 6f6d 626f 556e 6964 6972 2e63  lf.comboUnidir.c
-000100c0: 7572 7265 6e74 5465 7874 2829 290d 0a0d  urrentText())...
-000100d0: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-000100e0: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-000100f0: 6c65 6374 696f 6e5f 6964 785d 5b22 6c6f  lection_idx]["lo
-00010100: 6720 7472 616e 7361 6374 696f 6e22 5d20  g transaction"] 
-00010110: 3d5c 0d0a 2020 2020 2020 2020 2020 2020  =\..            
-00010120: 7374 7228 7365 6c66 2e72 6567 6973 7465  str(self.registe
-00010130: 7246 6c6f 7742 6f78 2e63 7572 7265 6e74  rFlowBox.current
-00010140: 5465 7874 2829 290d 0a0d 0a20 2020 2020  Text())....     
-00010150: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
-00010160: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
-00010170: 6e5f 6964 785d 5b22 6361 7368 666c 6f77  n_idx]["cashflow
-00010180: 3122 5d20 3d20 5c0d 0a20 2020 2020 2020  1"] = \..       
-00010190: 2020 2020 2073 7472 2873 656c 662e 636f       str(self.co
-000101a0: 6d62 6f43 6173 684c 6566 742e 6375 7272  mboCashLeft.curr
-000101b0: 656e 7454 6578 7428 2929 0d0a 2020 2020  entText())..    
-000101c0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-000101d0: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
-000101e0: 6f6e 5f69 6478 5d5b 2263 6173 6866 6c6f  on_idx]["cashflo
-000101f0: 7732 225d 203d 205c 0d0a 2020 2020 2020  w2"] = \..      
-00010200: 2020 2020 2020 7374 7228 7365 6c66 2e63        str(self.c
-00010210: 6f6d 626f 4361 7368 5269 6768 742e 6375  omboCashRight.cu
-00010220: 7272 656e 7454 6578 7428 2929 0d0a 0d0a  rrentText())....
-00010230: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-00010240: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
-00010250: 6563 7469 6f6e 5f69 6478 5d5b 226b 696e  ection_idx]["kin
-00010260: 6422 5d20 3d20 5c0d 0a20 2020 2020 2020  d"] = \..       
-00010270: 2020 2020 2073 7472 2873 656c 662e 6564       str(self.ed
-00010280: 6974 5479 7065 2e63 7572 7265 6e74 5465  itType.currentTe
-00010290: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-000102a0: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-000102b0: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
-000102c0: 6964 785d 5b22 696e 636f 6d65 3122 5d20  idx]["income1"] 
-000102d0: 3d20 5c0d 0a20 2020 2020 2020 2020 2020  = \..           
-000102e0: 2073 7472 2873 656c 662e 636f 6d62 6f49   str(self.comboI
-000102f0: 6e63 6f6d 654c 6566 742e 6375 7272 656e  ncomeLeft.curren
-00010300: 7454 6578 7428 2929 0d0a 2020 2020 2020  tText())..      
-00010310: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-00010320: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-00010330: 5f69 6478 5d5b 2269 6e63 6f6d 6532 225d  _idx]["income2"]
-00010340: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
-00010350: 2020 7374 7228 7365 6c66 2e63 6f6d 626f    str(self.combo
-00010360: 496e 636f 6d65 5269 6768 742e 6375 7272  IncomeRight.curr
-00010370: 656e 7454 6578 7428 2929 0d0a 0d0a 0d0a  entText())......
-00010380: 2020 2020 2020 2020 6966 206f 6e6c 795f          if only_
-00010390: 7265 6e61 6d65 3a0d 0a0d 0a20 2020 2020  rename:....     
-000103a0: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
-000103b0: 6361 6e76 6173 2e72 656e 616d 655f 636f  canvas.rename_co
-000103c0: 6e6e 6563 7469 6f6e 2873 656c 662e 656e  nnection(self.en
-000103d0: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-000103e0: 6c65 6374 696f 6e5f 6964 785d 5b22 7368  lection_idx]["sh
-000103f0: 6f72 746e 616d 6522 5d20 2c20 7374 7228  ortname"] , str(
-00010400: 7365 6c66 2e65 6469 7453 686f 7274 6e61  self.editShortna
-00010410: 6d65 2e74 6578 7428 2929 290d 0a0d 0a20  me.text())).... 
-00010420: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00010430: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
-00010440: 7261 7763 616e 7661 732e 7265 6d6f 7665  rawcanvas.remove
-00010450: 5f63 6f6e 6e65 6374 696f 6e28 7365 6c66  _connection(self
-00010460: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-00010470: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-00010480: 2273 686f 7274 6e61 6d65 225d 2920 232c  "shortname"]) #,
-00010490: 2073 7472 2873 656c 662e 6564 6974 5375   str(self.editSu
-000104a0: 626a 6563 742e 7465 7874 2829 2929 0d0a  bject.text()))..
-000104b0: 0d0a 2020 2020 2020 2020 2020 2020 626f  ..            bo
-000104c0: 7831 203d 2073 656c 662e 6472 6177 6361  x1 = self.drawca
-000104d0: 6e76 6173 2e61 6464 5f61 6765 6e74 2873  nvas.add_agent(s
-000104e0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-000104f0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-00010500: 785d 5b22 6167 656e 7431 225d 290d 0a20  x]["agent1"]).. 
-00010510: 2020 2020 2020 2020 2020 2062 6f78 3220             box2 
-00010520: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
-00010530: 732e 6164 645f 6167 656e 7428 7365 6c66  s.add_agent(self
-00010540: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-00010550: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-00010560: 2261 6765 6e74 3222 5d29 0d0a 0d0a 0d0a  "agent2"])......
-00010570: 2020 2020 2020 2020 2020 2020 6d79 5f69              my_i
-00010580: 7465 6d73 203d 205b 5d0d 0a20 2020 2020  tems = []..     
-00010590: 2020 2020 2020 2064 6174 6120 3d20 7365         data = se
-000105a0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-000105b0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-000105c0: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-000105d0: 2061 6c6c 656e 7472 6965 7320 3d20 225c   allentries = "\
-000105e0: 6e22 2e6a 6f69 6e28 5b64 6174 615b 226c  n".join([data["l
-000105f0: 3122 5d2c 2064 6174 615b 2261 3122 5d2c  1"], data["a1"],
-00010600: 2064 6174 615b 2265 3122 5d2c 2064 6174   data["e1"], dat
-00010610: 615b 226c 3222 5d2c 2064 6174 615b 2261  a["l2"], data["a
-00010620: 3222 5d2c 2064 6174 615b 2265 3222 5d5d  2"], data["e2"]]
-00010630: 290d 0a20 2020 2020 2020 2020 2020 2066  )..            f
-00010640: 6f72 2073 7562 5f69 7465 6d20 696e 2061  or sub_item in a
-00010650: 6c6c 656e 7472 6965 732e 7370 6c69 7428  llentries.split(
-00010660: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-00010670: 2020 2020 2020 2020 666f 7220 7375 625f          for sub_
-00010680: 656e 7472 7920 696e 2073 7562 5f69 7465  entry in sub_ite
-00010690: 6d2e 7370 6c69 7428 225c 6e22 293a 0d0a  m.split("\n"):..
-000106a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000106b0: 2020 2020 656e 7472 7920 3d20 7375 625f      entry = sub_
-000106c0: 656e 7472 792e 7265 706c 6163 6528 222d  entry.replace("-
-000106d0: 222c 2222 292e 7265 706c 6163 6528 222b  ","").replace("+
-000106e0: 222c 2222 292e 7374 7269 7028 290d 0a20  ","").strip().. 
-000106f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010700: 2020 2069 6620 656e 7472 7920 213d 2020     if entry !=  
-00010710: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
-00010720: 2020 2020 2020 2020 2020 2020 206d 795f               my_
-00010730: 6974 656d 732e 6170 7065 6e64 2865 6e74  items.append(ent
-00010740: 7279 290d 0a0d 0a0d 0a20 2020 2020 2020  ry)......       
-00010750: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-00010760: 6e76 6173 2e61 6464 5f63 6f6e 6e65 6374  nvas.add_connect
-00010770: 696f 6e28 626f 7831 2c62 6f78 322c 2073  ion(box1,box2, s
-00010780: 7472 2873 656c 662e 6564 6974 5368 6f72  tr(self.editShor
-00010790: 746e 616d 652e 7465 7874 2829 292c 7375  tname.text()),su
-000107a0: 626a 6563 743d 7365 6c66 2e65 6469 7453  bject=self.editS
-000107b0: 7562 6a65 6374 2e74 6578 7428 292c 6974  ubject.text(),it
-000107c0: 656d 733d 6d79 5f69 7465 6d73 290d 0a0d  ems=my_items)...
-000107d0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-000107e0: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
-000107f0: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
-00010800: 7175 616e 7469 7479 225d 203d 205c 0d0a  quantity"] = \..
-00010810: 2020 2020 2020 2020 2020 2020 7374 7228              str(
-00010820: 7365 6c66 2e65 6469 7451 7561 6e74 6974  self.editQuantit
-00010830: 792e 7465 7874 2829 290d 0a0d 0a0d 0a20  y.text())...... 
-00010840: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-00010850: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
-00010860: 6374 696f 6e5f 6964 785d 5b22 7375 626a  ction_idx]["subj
-00010870: 6563 7422 5d20 3d20 5c0d 0a20 2020 2020  ect"] = \..     
-00010880: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
-00010890: 6564 6974 5375 626a 6563 742e 7465 7874  editSubject.text
-000108a0: 2829 290d 0a0d 0a20 2020 2020 2020 2073  ())....        s
-000108b0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-000108c0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-000108d0: 785d 5b22 7368 6f72 746e 616d 6522 5d20  x]["shortname"] 
-000108e0: 3d20 5c0d 0a20 2020 2020 2020 2020 2020  = \..           
-000108f0: 2073 7472 2873 656c 662e 6564 6974 5368   str(self.editSh
-00010900: 6f72 746e 616d 652e 7465 7874 2829 290d  ortname.text()).
-00010910: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00010920: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
-00010930: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
-00010940: 6465 7363 7269 7074 696f 6e22 5d20 3d20  description"] = 
-00010950: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
-00010960: 7472 2873 656c 662e 6564 6974 4465 7363  tr(self.editDesc
-00010970: 7269 7074 696f 6e2e 7465 7874 2829 290d  ription.text()).
-00010980: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00010990: 7570 6461 7465 5f74 6162 6c65 2829 0d0a  update_table()..
-000109a0: 0d0a 2020 2020 2020 2020 7072 696e 7428  ..        print(
-000109b0: 2264 6174 6120 6368 616e 6765 642e 2229  "data changed.")
-000109c0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-000109d0: 2e6d 6164 655f 6368 616e 6765 7320 3d20  .made_changes = 
-000109e0: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
-000109f0: 2073 656c 662e 726f 775f 7365 6c65 6374   self.row_select
-00010a00: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
-00010a10: 6964 7829 0d0a 0d0a 2020 2020 2020 2020  idx)....        
-00010a20: 2320 7365 6c66 2e75 6470 6174 6542 7574  # self.udpateBut
-00010a30: 746f 6e2e 7365 7454 6578 7428 2255 7064  ton.setText("Upd
-00010a40: 6174 6520 5661 6c75 6573 2229 0d0a 0d0a  ate Values")....
-00010a50: 2020 2020 6465 6620 7361 7665 2873 656c      def save(sel
-00010a60: 6629 3a0d 0a0d 0a20 2020 2020 2020 2074  f):....        t
-00010a70: 7279 3a0d 0a0d 0a0d 0a20 2020 2020 2020  ry:......       
-00010a80: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
-00010a90: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
-00010aa0: 6520 2320 7374 6174 7573 4261 7228 292e  e # statusBar().
-00010ab0: 6375 7272 656e 744d 6573 7361 6765 2829  currentMessage()
-00010ac0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00010ad0: 6c66 2e6c 6162 656c 5f66 6e61 6d65 2e73  lf.label_fname.s
-00010ae0: 6574 5465 7874 2866 696c 656e 616d 6529  etText(filename)
-00010af0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00010b00: 6966 2066 696c 656e 616d 6520 6973 206e  if filename is n
-00010b10: 6f74 204e 6f6e 653a 0d0a 0d0a 2020 2020  ot None:....    
-00010b20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00010b30: 2e73 6176 6561 7328 6669 6c65 6e61 6d65  .saveas(filename
-00010b40: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00010b50: 2020 2020 2023 2054 4f44 4f20 6d61 7962       # TODO mayb
-00010b60: 6520 6261 636b 7570 283f 290d 0a20 2020  e backup(?)..   
-00010b70: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-00010b80: 656c 662e 6e6f 7469 6679 2822 4669 6c65  elf.notify("File
-00010b90: 2073 6176 6564 2075 6e64 6572 2025 7322   saved under %s"
-00010ba0: 2025 2066 696c 656e 616d 652c 7469 746c   % filename,titl
-00010bb0: 653d 224f 6b22 290d 0a20 2020 2020 2020  e="Ok")..       
-00010bc0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-00010bd0: 4649 4c45 2053 4156 4544 2122 290d 0a20  FILE SAVED!").. 
-00010be0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00010bf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010c00: 2020 7365 6c66 2e73 6176 655f 646c 6728    self.save_dlg(
-00010c10: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
-00010c20: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-00010c30: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-00010c40: 2069 6620 6669 6c65 6e61 6d65 2021 3d20   if filename != 
-00010c50: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
-00010c60: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-00010c70: 2873 7472 2865 292c 7469 746c 653d 2245  (str(e),title="E
-00010c80: 7272 6f72 2229 0d0a 0d0a 0d0a 0d0a 2020  rror")........  
-00010c90: 2020 6465 6620 7361 7665 5f64 6c67 2873    def save_dlg(s
-00010ca0: 656c 6629 3a0d 0a20 2020 2020 2020 2074  elf):..        t
-00010cb0: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
-00010cc0: 2020 2066 696c 656e 616d 6520 3d20 5146     filename = QF
-00010cd0: 696c 6544 6961 6c6f 672e 6765 7453 6176  ileDialog.getSav
-00010ce0: 6546 696c 654e 616d 6528 7365 6c66 2c20  eFileName(self, 
-00010cf0: 2753 6176 6520 6669 6c65 272c 0d0a 2020  'Save file',..  
-00010d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010d20: 2020 2020 2020 2020 2020 2020 206f 732e               os.
-00010d30: 6765 7463 7764 2829 2c20 2261 7474 756e  getcwd(), "attun
-00010d40: 6520 4669 6c65 7320 282a 2e73 6663 746c  e Files (*.sfctl
-00010d50: 2922 295b 305d 0d0a 2020 2020 2020 2020  )")[0]..        
-00010d60: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
-00010d70: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
-00010d80: 2822 5361 7665 6420 6669 6c65 2022 202b  ("Saved file " +
-00010d90: 2066 696c 656e 616d 6529 0d0a 0d0a 2020   filename)....  
-00010da0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00010db0: 745f 6669 6c65 5f62 6163 6b75 7020 3d20  t_file_backup = 
-00010dc0: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
-00010dd0: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
-00010de0: 2069 6620 6669 6c65 6e61 6d65 2069 7320   if filename is 
-00010df0: 6e6f 7420 4e6f 6e65 2061 6e64 2066 696c  not None and fil
-00010e00: 656e 616d 6520 213d 2022 223a 0d0a 2020  ename != "":..  
-00010e10: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00010e20: 6c66 2e6c 6162 656c 5f66 6e61 6d65 2e73  lf.label_fname.s
-00010e30: 6574 5465 7874 2866 696c 656e 616d 6529  etText(filename)
-00010e40: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00010e50: 2020 2020 7365 6c66 2e63 7572 7265 6e74      self.current
-00010e60: 5f66 696c 6520 3d20 6669 6c65 6e61 6d65  _file = filename
-00010e70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010e80: 2020 7365 6c66 2e73 6176 6561 7328 6669    self.saveas(fi
-00010e90: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2020  lename)....     
-00010ea0: 2020 2020 2020 2023 2054 4f44 4f20 6d61         # TODO ma
-00010eb0: 7962 6520 6261 636b 7570 283f 290d 0a0d  ybe backup(?)...
-00010ec0: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-00010ed0: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-00010ee0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00010ef0: 662e 6e6f 7469 6679 2822 436f 756c 6420  f.notify("Could 
-00010f00: 6e6f 7420 7361 7665 2070 726f 6a65 6374  not save project
-00010f10: 2e22 2c74 6974 6c65 3d22 4572 726f 7222  .",title="Error"
-00010f20: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00010f30: 656c 662e 6375 7272 656e 745f 6669 6c65  elf.current_file
-00010f40: 203d 2063 7572 7265 6e74 5f66 696c 655f   = current_file_
-00010f50: 6261 636b 7570 0d0a 0d0a 0d0a 2020 2020  backup......    
-00010f60: 6465 6620 7361 7665 6173 2873 656c 662c  def saveas(self,
-00010f70: 6669 6c65 6e61 6d65 293a 0d0a 0d0a 2020  filename):....  
-00010f80: 2020 2020 2020 6674 6865 6d65 203d 204e        ftheme = N
-00010f90: 6f6e 650d 0a20 2020 2020 2020 2074 7279  one..        try
-00010fa0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
-00010fb0: 7468 656d 6520 3d20 6669 6c65 6e61 6d65  theme = filename
-00010fc0: 5b3a 2d35 5d2b 2273 6663 7468 656d 6522  [:-5]+"sfctheme"
-00010fd0: 2023 2061 6273 6f6c 7574 6520 6669 6c65   # absolute file
-00010fe0: 2070 6174 680d 0a20 2020 2020 2020 2020   path..         
-00010ff0: 2020 2066 6f6c 6465 722c 6674 6865 6d65     folder,ftheme
-00011000: 203d 206f 732e 7061 7468 2e73 706c 6974   = os.path.split
-00011010: 2866 7468 656d 6529 2023 2063 6f6e 7665  (ftheme) # conve
-00011020: 7274 2074 6f20 7265 6c61 7469 7665 2066  rt to relative f
-00011030: 696c 6520 7061 7468 0d0a 2020 2020 2020  ile path..      
-00011040: 2020 2020 2020 7365 6c66 2e74 6865 6d65        self.theme
-00011050: 5f6d 616e 6167 6572 2e73 6176 655f 636f  _manager.save_co
-00011060: 6c6f 7273 2866 7468 656d 6529 0d0a 2020  lors(ftheme)..  
-00011070: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-00011080: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00011090: 6e6f 7469 6679 2822 436f 756c 6420 6e6f  notify("Could no
-000110a0: 7420 7361 7665 2063 6f6c 6f72 2074 6865  t save color the
-000110b0: 6d65 2e20 7072 6f63 6565 6469 6e67 2077  me. proceeding w
-000110c0: 6974 686f 7574 222c 7469 746c 653d 2245  ithout",title="E
-000110d0: 7272 6f72 2229 0d0a 0d0a 0d0a 2020 2020  rror")......    
-000110e0: 2020 2020 2320 6472 6177 6361 6e76 6173      # drawcanvas
-000110f0: 2063 6f64 655f 6461 7461 0d0a 2020 2020   code_data..    
-00011100: 2020 2020 636f 6465 5f64 6174 6120 3d20      code_data = 
-00011110: 7b7d 0d0a 2020 2020 2020 2020 666f 7220  {}..        for 
-00011120: 6b2c 7620 696e 2073 656c 662e 6472 6177  k,v in self.draw
-00011130: 6361 6e76 6173 2e63 6f64 655f 6461 7461  canvas.code_data
-00011140: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
-00011150: 2020 2020 2020 2063 6f64 655f 6461 7461         code_data
-00011160: 5b6b 5d20 3d20 7374 7228 762e 656e 636f  [k] = str(v.enco
-00011170: 6465 2822 7574 662d 3822 292e 6465 636f  de("utf-8").deco
-00011180: 6465 2827 6370 3132 3532 2729 290d 0a20  de('cp1252')).. 
-00011190: 2020 2020 2020 2020 2020 2023 2066 6978             # fix
-000111a0: 2073 6f6d 6520 706f 7465 6e74 6961 6c20   some potential 
-000111b0: 656e 636f 6469 6e67 2065 7272 6f72 730d  encoding errors.
-000111c0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
-000111d0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000111e0: 6e74 2822 4649 4c45 4e41 4d45 222c 2066  nt("FILENAME", f
-000111f0: 696c 656e 616d 6529 0d0a 0d0a 2020 2020  ilename)....    
-00011200: 2020 2020 2020 2020 2320 6c6f 6164 2065          # load e
-00011210: 6e74 7269 6573 2069 6e74 6f20 7468 6520  ntries into the 
-00011220: 6c69 7374 0d0a 2020 2020 2020 2020 2020  list..          
-00011230: 2020 7769 7468 206f 7065 6e28 6669 6c65    with open(file
-00011240: 6e61 6d65 2c20 2777 2729 2061 7320 7374  name, 'w') as st
-00011250: 7265 616d 3a0d 0a0d 0a20 2020 2020 2020  ream:....       
-00011260: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
-00011270: 7b22 7472 616e 7361 6374 696f 6e73 223a  {"transactions":
-00011280: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-00011290: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000112a0: 2020 2022 6167 656e 7473 223a 2063 6f64     "agents": cod
-000112b0: 655f 6461 7461 2c0d 0a20 2020 2020 2020  e_data,..       
-000112c0: 2020 2020 2020 2020 2022 626f 785f 706f           "box_po
-000112d0: 7369 7469 6f6e 7322 3a20 7365 6c66 2e64  sitions": self.d
-000112e0: 7261 7763 616e 7661 732e 626f 785f 706f  rawcanvas.box_po
-000112f0: 7369 7469 6f6e 7328 292c 0d0a 2020 2020  sitions(),..    
-00011300: 2020 2020 2020 2020 2020 2020 226c 6162              "lab
-00011310: 656c 5f70 6f73 6974 696f 6e73 223a 2073  el_positions": s
-00011320: 656c 662e 6472 6177 6361 6e76 6173 2e6c  elf.drawcanvas.l
-00011330: 6162 656c 5f70 6f73 6974 696f 6e73 2829  abel_positions()
-00011340: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00011350: 2020 2022 7365 7474 696e 6773 223a 2073     "settings": s
-00011360: 656c 662e 7365 7474 696e 6773 5f73 7472  elf.settings_str
-00011370: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00011380: 2020 2022 6d61 696e 6c6f 6f70 223a 2073     "mainloop": s
-00011390: 656c 662e 6d61 696e 6c6f 6f70 5f73 7472  elf.mainloop_str
-000113a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000113b0: 2020 2022 7468 656d 6522 3a20 7b22 676c     "theme": {"gl
-000113c0: 6f62 616c 7468 656d 6522 3a20 7365 6c66  obaltheme": self
-000113d0: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
-000113e0: 6865 6d65 2c20 2263 6f6c 6f72 7322 3a66  heme, "colors":f
-000113f0: 7468 656d 657d 2c0d 0a20 2020 2020 2020  theme},..       
-00011400: 2020 2020 2020 2020 2022 6e6f 7465 7322           "notes"
-00011410: 3a20 7365 6c66 2e6e 6f74 6573 4564 6974  : self.notesEdit
-00011420: 2e74 6f50 6c61 696e 5465 7874 2829 2c0d  .toPlainText(),.
-00011430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011440: 207d 0d0a 0d0a 2020 2020 2020 2020 2020   }....          
-00011450: 2020 2020 2020 7961 6d6c 2e64 756d 7028        yaml.dump(
-00011460: 6461 7461 2c73 7472 6561 6d29 0d0a 0d0a  data,stream)....
-00011470: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00011480: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
-00011490: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000114a0: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
-000114b0: 7374 7228 6529 2c20 7469 746c 653d 2245  str(e), title="E
-000114c0: 7272 6f72 2229 0d0a 0d0a 0d0a 2020 2020  rror")......    
-000114d0: 6465 6620 7472 795f 6765 6e5f 6d61 7472  def try_gen_matr
-000114e0: 6978 2873 656c 6629 3a0d 0a20 2020 2020  ix(self):..     
-000114f0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00011500: 2020 2020 2073 656c 662e 6765 6e5f 6d61       self.gen_ma
-00011510: 7472 6978 2829 0d0a 2020 2020 2020 2020  trix()..        
-00011520: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00011530: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-00011540: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-00011550: 2245 7272 6f72 222c 7374 7228 6529 290d  "Error",str(e)).
-00011560: 0a0d 0a20 2020 2064 6566 2067 656e 5f6d  ...    def gen_m
-00011570: 6174 7269 7828 7365 6c66 2c6d 6f64 653d  atrix(self,mode=
-00011580: 2273 7461 6e64 6172 6422 293a 0d0a 2020  "standard"):..  
-00011590: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-000115a0: 2020 2067 656e 6572 6174 6520 666c 6f77     generate flow
-000115b0: 206d 6174 7269 783a 0d0a 0d0a 2020 2020   matrix:....    
-000115c0: 2020 2020 3a70 6172 616d 206d 6f64 653a      :param mode:
-000115d0: 2073 7461 6e64 6172 642c 6578 6365 6c2c   standard,excel,
-000115e0: 6c61 7465 780d 0a0d 0a20 2020 2020 2020  latex....       
-000115f0: 2073 7461 6e64 6172 643a 2073 686f 7773   standard: shows
-00011600: 206d 6174 7269 7820 6772 6170 6869 6361   matrix graphica
-00011610: 6c6c 790d 0a20 2020 2020 2020 2065 7863  lly..        exc
-00011620: 656c 3a20 6578 706f 7274 7320 616e 2065  el: exports an e
-00011630: 7863 656c 2066 696c 650d 0a20 2020 2020  xcel file..     
-00011640: 2020 206c 6174 6578 3a20 6e6f 7420 7965     latex: not ye
-00011650: 7420 7375 7070 6f72 7465 6420 4e4f 5420  t supported NOT 
-00011660: 4156 4149 4c41 424c 4520 464f 5220 4e4f  AVAILABLE FOR NO
-00011670: 570d 0a20 2020 2020 2020 2068 746d 6c3a  W..        html:
-00011680: 204e 4f54 2041 5641 494c 4142 4c45 2046   NOT AVAILABLE F
-00011690: 4f52 204e 4f57 0d0a 2020 2020 2020 2020  OR NOW..        
-000116a0: 2222 220d 0a0d 0a20 2020 2020 2020 2066  """....        f
-000116b0: 6c6f 775f 6461 7461 203d 207b 7d0d 0a0d  low_data = {}...
-000116c0: 0a20 2020 2020 2020 2066 6c6f 775f 6461  .        flow_da
-000116d0: 7461 5b22 4341 225d 203d 2064 6566 6175  ta["CA"] = defau
-000116e0: 6c74 6469 6374 286c 616d 6264 613a 2064  ltdict(lambda: d
-000116f0: 6566 6175 6c74 6469 6374 286c 6973 7429  efaultdict(list)
-00011700: 2920 2023 2063 7572 7265 6e74 2061 6363  )  # current acc
-00011710: 6f75 6e74 0d0a 2020 2020 2020 2020 666c  ount..        fl
-00011720: 6f77 5f64 6174 615b 224b 4122 5d20 3d20  ow_data["KA"] = 
-00011730: 6465 6661 756c 7464 6963 7428 6c61 6d62  defaultdict(lamb
-00011740: 6461 3a20 6465 6661 756c 7464 6963 7428  da: defaultdict(
-00011750: 6c69 7374 2929 2020 2320 6361 7069 7461  list))  # capita
-00011760: 6c20 6163 636f 756e 740d 0a0d 0a20 2020  l account....   
-00011770: 2020 2020 2023 2066 6c6f 775f 6461 7461       # flow_data
-00011780: 5b4b 4120 6f72 2043 415d 5b73 7562 6a65  [KA or CA][subje
-00011790: 6374 5d5b 6167 656e 745d 0d0a 2020 2020  ct][agent]..    
-000117a0: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
-000117b0: 656e 7472 795f 6461 7461 2920 3d3d 2030  entry_data) == 0
-000117c0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-000117d0: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
-000117e0: 6765 3d22 4361 6e6e 6f74 2067 656e 6572  ge="Cannot gener
-000117f0: 6174 6520 4d61 7472 6978 2e20 4861 7665  ate Matrix. Have
-00011800: 2079 6f75 2073 6574 2075 7020 616e 7920   you set up any 
-00011810: 7472 616e 7361 6374 696f 6e73 2079 6574  transactions yet
-00011820: 3f22 2c74 6974 6c65 3d22 4572 726f 7222  ?",title="Error"
-00011830: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00011840: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
-00011850: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00011860: 2020 2066 6f72 2066 696c 6564 6174 6120     for filedata 
-00011870: 696e 2073 656c 662e 656e 7472 795f 6461  in self.entry_da
-00011880: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
-00011890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118a0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000118b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118c0: 2020 2020 2020 2020 2020 6576 616c 7561            evalua
-000118d0: 7465 2074 7261 6e73 6163 7469 6f6e 2065  te transaction e
-000118e0: 6e74 7269 6573 2077 6974 6820 7468 6520  ntries with the 
-000118f0: 666c 6f77 206c 6f67 6765 720d 0a20 2020  flow logger..   
-00011900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011910: 2020 2020 2020 2020 2020 2020 2022 2222               """
-00011920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011940: 2020 7375 626a 6563 7420 3d20 6669 6c65    subject = file
-00011950: 6461 7461 5b22 7375 626a 6563 7422 5d2e  data["subject"].
-00011960: 7265 706c 6163 6528 225f 222c 2022 2022  replace("_", " "
-00011970: 292e 7469 746c 6528 290d 0a20 2020 2020  ).title()..     
-00011980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011990: 2020 2020 2020 2020 2020 206b 696e 6420             kind 
-000119a0: 3d20 6669 6c65 6461 7461 5b22 6b69 6e64  = filedata["kind
-000119b0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-000119c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119d0: 2020 2020 6c6f 675f 666c 6f77 203d 2054      log_flow = T
-000119e0: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
-000119f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a00: 2020 2020 2069 6620 6669 6c65 6461 7461       if filedata
-00011a10: 5b22 6c6f 6720 7472 616e 7361 6374 696f  ["log transactio
-00011a20: 6e22 5d20 3d3d 2022 4661 6c73 6522 3a0d  n"] == "False":.
-00011a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a50: 2020 2020 206c 6f67 5f66 6c6f 773d 2046       log_flow= F
-00011a60: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-00011a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a80: 2020 2020 2020 2320 2020 6c6f 675f 666c        #   log_fl
-00011a90: 6f77 203d 2062 6f6f 6c28 6669 6c65 6461  ow = bool(fileda
-00011aa0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
-00011ab0: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
-00011ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ad0: 2020 2020 2020 2020 7072 696e 7428 224c          print("L
-00011ae0: 4f47 2046 4c4f 5722 2c6c 6f67 5f66 6c6f  OG FLOW",log_flo
-00011af0: 772c 2272 6177 222c 6669 6c65 6461 7461  w,"raw",filedata
-00011b00: 5b22 6c6f 6720 7472 616e 7361 6374 696f  ["log transactio
-00011b10: 6e22 5d29 0d0a 2020 2020 2020 2020 2020  n"])..          
+0000f580: 7365 6c66 2e65 6469 7451 7561 6e74 6974  self.editQuantit
+0000f590: 792e 7365 7454 6578 7428 6461 7461 5b22  y.setText(data["
+0000f5a0: 7175 616e 7469 7479 225d 290d 0a20 2020  quantity"])..   
+0000f5b0: 2020 2020 2020 2020 2073 656c 662e 6564           self.ed
+0000f5c0: 6974 5375 626a 6563 742e 7365 7454 6578  itSubject.setTex
+0000f5d0: 7428 6461 7461 5b22 7375 626a 6563 7422  t(data["subject"
+0000f5e0: 5d29 0d0a 0d0a 2020 2020 2020 2020 2020  ])....          
+0000f5f0: 2020 7365 6c66 2e64 7261 7763 616e 7661    self.drawcanva
+0000f600: 732e 6869 6768 6c69 6768 745f 636f 6e6e  s.highlight_conn
+0000f610: 6563 746f 7228 6461 7461 5b22 7368 6f72  ector(data["shor
+0000f620: 746e 616d 6522 5d29 0d0a 0d0a 2020 2020  tname"])....    
+0000f630: 2020 2020 2020 2020 6966 2022 6465 7363          if "desc
+0000f640: 7269 7074 696f 6e22 2069 6e20 6461 7461  ription" in data
+0000f650: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000f660: 2020 2073 656c 662e 6564 6974 4465 7363     self.editDesc
+0000f670: 7269 7074 696f 6e2e 7365 7454 6578 7428  ription.setText(
+0000f680: 6461 7461 5b22 6465 7363 7269 7074 696f  data["descriptio
+0000f690: 6e22 5d29 0d0a 2020 2020 2020 2020 2020  n"])..          
+0000f6a0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000f6b0: 2020 2020 2020 2020 2073 656c 662e 6564           self.ed
+0000f6c0: 6974 4465 7363 7269 7074 696f 6e2e 7365  itDescription.se
+0000f6d0: 7454 6578 7428 2222 290d 0a20 2020 2020  tText("")..     
+0000f6e0: 2020 2020 2020 2073 656c 662e 6564 6974         self.edit
+0000f6f0: 5368 6f72 746e 616d 652e 7365 7454 6578  Shortname.setTex
+0000f700: 7428 6461 7461 5b22 7368 6f72 746e 616d  t(data["shortnam
+0000f710: 6522 5d29 0d0a 0d0a 2020 2020 2020 2020  e"])....        
+0000f720: 2020 2020 756e 6964 6972 203d 2073 7472      unidir = str
+0000f730: 2864 6174 615b 2275 6e69 2d64 6972 6563  (data["uni-direc
+0000f740: 7469 6f6e 616c 225d 2920 6f72 2022 4e6f  tional"]) or "No
+0000f750: 6e65 220d 0a20 2020 2020 2020 2020 2020  ne"..           
+0000f760: 2073 656c 662e 636f 6d62 6f55 6e69 6469   self.comboUnidi
+0000f770: 722e 7365 7443 7572 7265 6e74 496e 6465  r.setCurrentInde
+0000f780: 7828 7365 6c66 2e63 6f6d 626f 556e 6964  x(self.comboUnid
+0000f790: 6972 2e66 696e 6454 6578 7428 756e 6964  ir.findText(unid
+0000f7a0: 6972 2929 0d0a 0d0a 2020 2020 2020 2020  ir))....        
+0000f7b0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0000f7c0: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+0000f7d0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+0000f7e0: 7374 7228 6529 2c74 6974 6c65 3d22 4572  str(e),title="Er
+0000f7f0: 726f 7222 290d 0a0d 0a20 2020 2020 2020  ror")....       
+0000f800: 2073 656c 662e 6d61 6465 5f63 6861 6e67   self.made_chang
+0000f810: 6573 203d 2046 616c 7365 0d0a 0d0a 2020  es = False....  
+0000f820: 2020 6465 6620 7570 6461 7465 5f64 6174    def update_dat
+0000f830: 6128 7365 6c66 293a 0d0a 2020 2020 2020  a(self):..      
+0000f840: 2020 6966 2073 656c 662e 7365 6c65 6374    if self.select
+0000f850: 696f 6e5f 6964 7820 6973 204e 6f6e 653a  ion_idx is None:
+0000f860: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0000f870: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
+0000f880: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+0000f890: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+0000f8a0: 6478 5d5b 2261 3122 5d20 3d20 7365 6c66  dx]["a1"] = self
+0000f8b0: 2e41 7373 6574 4c69 7374 4c65 6674 2e74  .AssetListLeft.t
+0000f8c0: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
+0000f8d0: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+0000f8e0: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+0000f8f0: 7469 6f6e 5f69 6478 5d5b 2261 3222 5d20  tion_idx]["a2"] 
+0000f900: 3d20 7365 6c66 2e41 7373 6574 4c69 7374  = self.AssetList
+0000f910: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
+0000f920: 7428 290d 0a20 2020 2020 2020 2073 656c  t()..        sel
+0000f930: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
+0000f940: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
+0000f950: 5b22 6c31 225d 203d 2073 656c 662e 4c69  ["l1"] = self.Li
+0000f960: 6162 696c 6974 794c 6973 744c 6566 742e  abilityListLeft.
+0000f970: 746f 506c 6169 6e54 6578 7428 290d 0a20  toPlainText().. 
+0000f980: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000f990: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+0000f9a0: 6374 696f 6e5f 6964 785d 5b22 6c32 225d  ction_idx]["l2"]
+0000f9b0: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
+0000f9c0: 794c 6973 7452 6967 6874 2e74 6f50 6c61  yListRight.toPla
+0000f9d0: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
+0000f9e0: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
+0000f9f0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+0000fa00: 5f69 6478 5d5b 2265 3122 5d20 3d20 7365  _idx]["e1"] = se
+0000fa10: 6c66 2e45 7175 6974 794c 6973 744c 6566  lf.EquityListLef
+0000fa20: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
+0000fa30: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
+0000fa40: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
+0000fa50: 6c65 6374 696f 6e5f 6964 785d 5b22 6532  lection_idx]["e2
+0000fa60: 225d 203d 2073 656c 662e 4571 7569 7479  "] = self.Equity
+0000fa70: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
+0000fa80: 6e54 6578 7428 290d 0a0d 0a20 2020 2020  nText()....     
+0000fa90: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+0000faa0: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
+0000fab0: 6e5f 6964 785d 5b22 6131 225d 2020 3d20  n_idx]["a1"]  = 
+0000fac0: 7365 6c66 2e41 7373 6574 4c69 7374 4c65  self.AssetListLe
+0000fad0: 6674 2e74 6f50 6c61 696e 5465 7874 2829  ft.toPlainText()
+0000fae0: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
+0000faf0: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
+0000fb00: 656c 6563 7469 6f6e 5f69 6478 5d5b 2261  election_idx]["a
+0000fb10: 3222 5d20 3d20 7365 6c66 2e41 7373 6574  2"] = self.Asset
+0000fb20: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
+0000fb30: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
+0000fb40: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000fb50: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
+0000fb60: 6964 785d 5b22 6c31 225d 2020 3d20 7365  idx]["l1"]  = se
+0000fb70: 6c66 2e4c 6961 6269 6c69 7479 4c69 7374  lf.LiabilityList
+0000fb80: 4c65 6674 2e74 6f50 6c61 696e 5465 7874  Left.toPlainText
+0000fb90: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+0000fba0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+0000fbb0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+0000fbc0: 226c 3222 5d20 203d 2073 656c 662e 4c69  "l2"]  = self.Li
+0000fbd0: 6162 696c 6974 794c 6973 7452 6967 6874  abilityListRight
+0000fbe0: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
+0000fbf0: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0000fc00: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
+0000fc10: 6563 7469 6f6e 5f69 6478 5d5b 2265 3122  ection_idx]["e1"
+0000fc20: 5d20 203d 2073 656c 662e 4571 7569 7479  ]  = self.Equity
+0000fc30: 4c69 7374 4c65 6674 2e74 6f50 6c61 696e  ListLeft.toPlain
+0000fc40: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
+0000fc50: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+0000fc60: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+0000fc70: 6478 5d5b 2265 3222 5d20 203d 2073 656c  dx]["e2"]  = sel
+0000fc80: 662e 4571 7569 7479 4c69 7374 5269 6768  f.EquityListRigh
+0000fc90: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
+0000fca0: 0a0d 0a20 2020 2020 2020 206f 6e6c 795f  ...        only_
+0000fcb0: 7265 6e61 6d65 203d 2054 7275 650d 0a20  rename = True.. 
+0000fcc0: 2020 2020 2020 2069 6620 7365 6c66 2e65         if self.e
+0000fcd0: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
+0000fce0: 656c 6563 7469 6f6e 5f69 6478 5d5b 2261  election_idx]["a
+0000fcf0: 6765 6e74 3122 5d20 2021 3d20 7365 6c66  gent1"]  != self
+0000fd00: 2e61 6765 6e74 3145 6469 742e 7465 7874  .agent1Edit.text
+0000fd10: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+0000fd20: 206f 6e6c 795f 7265 6e61 6d65 203d 2046   only_rename = F
+0000fd30: 616c 7365 0d0a 2020 2020 2020 2020 6966  alse..        if
+0000fd40: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000fd50: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
+0000fd60: 6964 785d 5b22 6167 656e 7432 225d 2020  idx]["agent2"]  
+0000fd70: 213d 7365 6c66 2e61 6765 6e74 3245 6469  !=self.agent2Edi
+0000fd80: 742e 7465 7874 2829 3a0d 0a20 2020 2020  t.text():..     
+0000fd90: 2020 2020 2020 206f 6e6c 795f 7265 6e61         only_rena
+0000fda0: 6d65 203d 2046 616c 7365 0d0a 0d0a 0d0a  me = False......
+0000fdb0: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
+0000fdc0: 656c 662e 6472 6177 6361 6e76 6173 2e63  elf.drawcanvas.c
+0000fdd0: 6865 636b 5f65 7869 7374 2873 656c 662e  heck_exist(self.
+0000fde0: 6167 656e 7431 4564 6974 2e74 6578 7428  agent1Edit.text(
+0000fdf0: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
+0000fe00: 2069 6620 7365 6c66 2e61 6765 6e74 3145   if self.agent1E
+0000fe10: 6469 742e 7465 7874 2829 2e73 7472 6970  dit.text().strip
+0000fe20: 2829 2021 3d20 2222 3a0d 0a20 2020 2020  () != "":..     
+0000fe30: 2020 2020 2020 2020 2020 2079 6573 203d             yes =
+0000fe40: 2073 656c 662e 6173 6b5f 7175 6573 7469   self.ask_questi
+0000fe50: 6f6e 2827 272c 2254 6865 2061 6765 6e74  on('',"The agent
+0000fe60: 2025 7320 646f 6573 206e 6f74 2065 7869   %s does not exi
+0000fe70: 7374 2e5c 6e44 6f20 796f 7520 7769 7368  st.\nDo you wish
+0000fe80: 2074 6f20 636f 6e74 696e 7565 2061 6e64   to continue and
+0000fe90: 2061 7574 6f6d 6174 6963 616c 6c79 2063   automatically c
+0000fea0: 7265 6174 6520 6120 6e65 7720 6167 656e  reate a new agen
+0000feb0: 743f 2225 7365 6c66 2e61 6765 6e74 3145  t?"%self.agent1E
+0000fec0: 6469 742e 7465 7874 2829 290d 0a20 2020  dit.text())..   
+0000fed0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000fee0: 6e6f 7420 7965 733a 0d0a 2020 2020 2020  not yes:..      
+0000fef0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000ff00: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
+0000ff10: 6966 206e 6f74 2073 656c 662e 6472 6177  if not self.draw
+0000ff20: 6361 6e76 6173 2e63 6865 636b 5f65 7869  canvas.check_exi
+0000ff30: 7374 2873 656c 662e 6167 656e 7432 4564  st(self.agent2Ed
+0000ff40: 6974 2e74 6578 7428 2929 3a0d 0a20 2020  it.text()):..   
+0000ff50: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0000ff60: 2e61 6765 6e74 3245 6469 742e 7465 7874  .agent2Edit.text
+0000ff70: 2829 2e73 7472 6970 2829 2021 3d20 2222  ().strip() != ""
+0000ff80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000ff90: 2020 2079 6573 203d 2073 656c 662e 6173     yes = self.as
+0000ffa0: 6b5f 7175 6573 7469 6f6e 2827 272c 2254  k_question('',"T
+0000ffb0: 6865 2061 6765 6e74 2025 7320 646f 6573  he agent %s does
+0000ffc0: 206e 6f74 2065 7869 7374 2e5c 6e44 6f20   not exist.\nDo 
+0000ffd0: 796f 7520 7769 7368 2074 6f20 636f 6e74  you wish to cont
+0000ffe0: 696e 7565 2061 6e64 2061 7574 6f6d 6174  inue and automat
+0000fff0: 6963 616c 6c79 2063 7265 6174 6520 6120  ically create a 
+00010000: 6e65 7720 6167 656e 743f 2225 7365 6c66  new agent?"%self
+00010010: 2e61 6765 6e74 3245 6469 742e 7465 7874  .agent2Edit.text
+00010020: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+00010030: 2020 2020 2069 6620 6e6f 7420 7965 733a       if not yes:
+00010040: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010050: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
+00010060: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+00010070: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
+00010080: 6563 7469 6f6e 5f69 6478 5d5b 2261 6765  ection_idx]["age
+00010090: 6e74 3122 5d20 203d 2063 616d 656c 2873  nt1"]  = camel(s
+000100a0: 656c 662e 6167 656e 7431 4564 6974 2e74  elf.agent1Edit.t
+000100b0: 6578 7428 2929 2023 2e63 6170 6974 616c  ext()) #.capital
+000100c0: 697a 6528 2920 2320 7570 7065 7220 6265  ize() # upper be
+000100d0: 6361 7573 6520 6167 656e 7473 2061 7265  cause agents are
+000100e0: 2061 6c77 6179 7320 7570 7065 7263 6173   always uppercas
+000100f0: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00010100: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
+00010110: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
+00010120: 6167 656e 7432 225d 2020 3d20 6361 6d65  agent2"]  = came
+00010130: 6c28 7365 6c66 2e61 6765 6e74 3245 6469  l(self.agent2Edi
+00010140: 742e 7465 7874 2829 2920 232e 6361 7069  t.text()) #.capi
+00010150: 7461 6c69 7a65 2829 0d0a 0d0a 2020 2020  talize()....    
+00010160: 2020 2020 7365 6c66 2e61 6765 6e74 3145      self.agent1E
+00010170: 6469 742e 7365 7454 6578 7428 6361 6d65  dit.setText(came
+00010180: 6c28 7365 6c66 2e61 6765 6e74 3145 6469  l(self.agent1Edi
+00010190: 742e 7465 7874 2829 2929 2023 2e63 6170  t.text())) #.cap
+000101a0: 6974 616c 697a 6528 2929 0d0a 2020 2020  italize())..    
+000101b0: 2020 2020 7365 6c66 2e61 6765 6e74 3245      self.agent2E
+000101c0: 6469 742e 7365 7454 6578 7428 6361 6d65  dit.setText(came
+000101d0: 6c28 7365 6c66 2e61 6765 6e74 3245 6469  l(self.agent2Edi
+000101e0: 742e 7465 7874 2829 2929 2023 2e63 6170  t.text())) #.cap
+000101f0: 6974 616c 697a 6528 2929 0d0a 0d0a 2020  italize())....  
+00010200: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+00010210: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+00010220: 7469 6f6e 5f69 6478 5d5b 2275 6e69 2d64  tion_idx]["uni-d
+00010230: 6972 6563 7469 6f6e 616c 225d 203d 205c  irectional"] = \
+00010240: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+00010250: 7228 7365 6c66 2e63 6f6d 626f 556e 6964  r(self.comboUnid
+00010260: 6972 2e63 7572 7265 6e74 5465 7874 2829  ir.currentText()
+00010270: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00010280: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
+00010290: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
+000102a0: 5b22 6c6f 6720 7472 616e 7361 6374 696f  ["log transactio
+000102b0: 6e22 5d20 3d5c 0d0a 2020 2020 2020 2020  n"] =\..        
+000102c0: 2020 2020 7374 7228 7365 6c66 2e72 6567      str(self.reg
+000102d0: 6973 7465 7246 6c6f 7742 6f78 2e63 7572  isterFlowBox.cur
+000102e0: 7265 6e74 5465 7874 2829 290d 0a0d 0a20  rentText()).... 
+000102f0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+00010300: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+00010310: 6374 696f 6e5f 6964 785d 5b22 6361 7368  ction_idx]["cash
+00010320: 666c 6f77 3122 5d20 3d20 5c0d 0a20 2020  flow1"] = \..   
+00010330: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+00010340: 662e 636f 6d62 6f43 6173 684c 6566 742e  f.comboCashLeft.
+00010350: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
+00010360: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+00010370: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
+00010380: 6563 7469 6f6e 5f69 6478 5d5b 2263 6173  ection_idx]["cas
+00010390: 6866 6c6f 7732 225d 203d 205c 0d0a 2020  hflow2"] = \..  
+000103a0: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
+000103b0: 6c66 2e63 6f6d 626f 4361 7368 5269 6768  lf.comboCashRigh
+000103c0: 742e 6375 7272 656e 7454 6578 7428 2929  t.currentText())
+000103d0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+000103e0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+000103f0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+00010400: 226b 696e 6422 5d20 3d20 5c0d 0a20 2020  "kind"] = \..   
+00010410: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+00010420: 662e 6564 6974 5479 7065 2e63 7572 7265  f.editType.curre
+00010430: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
+00010440: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
+00010450: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
+00010460: 696f 6e5f 6964 785d 5b22 696e 636f 6d65  ion_idx]["income
+00010470: 3122 5d20 3d20 5c0d 0a20 2020 2020 2020  1"] = \..       
+00010480: 2020 2020 2073 7472 2873 656c 662e 636f       str(self.co
+00010490: 6d62 6f49 6e63 6f6d 654c 6566 742e 6375  mboIncomeLeft.cu
+000104a0: 7272 656e 7454 6578 7428 2929 0d0a 2020  rrentText())..  
+000104b0: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+000104c0: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+000104d0: 7469 6f6e 5f69 6478 5d5b 2269 6e63 6f6d  tion_idx]["incom
+000104e0: 6532 225d 203d 205c 0d0a 2020 2020 2020  e2"] = \..      
+000104f0: 2020 2020 2020 7374 7228 7365 6c66 2e63        str(self.c
+00010500: 6f6d 626f 496e 636f 6d65 5269 6768 742e  omboIncomeRight.
+00010510: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
+00010520: 0d0a 0d0a 2020 2020 2020 2020 6966 206f  ....        if o
+00010530: 6e6c 795f 7265 6e61 6d65 3a0d 0a0d 0a20  nly_rename:.... 
+00010540: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00010550: 6472 6177 6361 6e76 6173 2e72 656e 616d  drawcanvas.renam
+00010560: 655f 636f 6e6e 6563 7469 6f6e 2873 656c  e_connection(sel
+00010570: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
+00010580: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
+00010590: 5b22 7368 6f72 746e 616d 6522 5d20 2c20  ["shortname"] , 
+000105a0: 7374 7228 7365 6c66 2e65 6469 7453 686f  str(self.editSho
+000105b0: 7274 6e61 6d65 2e74 6578 7428 2929 290d  rtname.text())).
+000105c0: 0a0d 0a20 2020 2020 2020 2065 6c73 653a  ...        else:
+000105d0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+000105e0: 6c66 2e64 7261 7763 616e 7661 732e 7265  lf.drawcanvas.re
+000105f0: 6d6f 7665 5f63 6f6e 6e65 6374 696f 6e28  move_connection(
+00010600: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+00010610: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+00010620: 6478 5d5b 2273 686f 7274 6e61 6d65 225d  dx]["shortname"]
+00010630: 2920 232c 2073 7472 2873 656c 662e 6564  ) #, str(self.ed
+00010640: 6974 5375 626a 6563 742e 7465 7874 2829  itSubject.text()
+00010650: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+00010660: 2020 626f 7831 203d 2073 656c 662e 6472    box1 = self.dr
+00010670: 6177 6361 6e76 6173 2e61 6464 5f61 6765  awcanvas.add_age
+00010680: 6e74 2873 656c 662e 656e 7472 795f 6461  nt(self.entry_da
+00010690: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
+000106a0: 6e5f 6964 785d 5b22 6167 656e 7431 225d  n_idx]["agent1"]
+000106b0: 290d 0a20 2020 2020 2020 2020 2020 2062  )..            b
+000106c0: 6f78 3220 3d20 7365 6c66 2e64 7261 7763  ox2 = self.drawc
+000106d0: 616e 7661 732e 6164 645f 6167 656e 7428  anvas.add_agent(
+000106e0: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+000106f0: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+00010700: 6478 5d5b 2261 6765 6e74 3222 5d29 0d0a  dx]["agent2"])..
+00010710: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00010720: 6d79 5f69 7465 6d73 203d 205b 5d0d 0a20  my_items = [].. 
+00010730: 2020 2020 2020 2020 2020 2064 6174 6120             data 
+00010740: 3d20 7365 6c66 2e65 6e74 7279 5f64 6174  = self.entry_dat
+00010750: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+00010760: 5f69 6478 5d0d 0a0d 0a20 2020 2020 2020  _idx]....       
+00010770: 2020 2020 2061 6c6c 656e 7472 6965 7320       allentries 
+00010780: 3d20 225c 6e22 2e6a 6f69 6e28 5b64 6174  = "\n".join([dat
+00010790: 615b 226c 3122 5d2c 2064 6174 615b 2261  a["l1"], data["a
+000107a0: 3122 5d2c 2064 6174 615b 2265 3122 5d2c  1"], data["e1"],
+000107b0: 2064 6174 615b 226c 3222 5d2c 2064 6174   data["l2"], dat
+000107c0: 615b 2261 3222 5d2c 2064 6174 615b 2265  a["a2"], data["e
+000107d0: 3222 5d5d 290d 0a20 2020 2020 2020 2020  2"]])..         
+000107e0: 2020 2066 6f72 2073 7562 5f69 7465 6d20     for sub_item 
+000107f0: 696e 2061 6c6c 656e 7472 6965 732e 7370  in allentries.sp
+00010800: 6c69 7428 225c 6e22 293a 0d0a 2020 2020  lit("\n"):..    
+00010810: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00010820: 7375 625f 656e 7472 7920 696e 2073 7562  sub_entry in sub
+00010830: 5f69 7465 6d2e 7370 6c69 7428 225c 6e22  _item.split("\n"
+00010840: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00010850: 2020 2020 2020 2020 656e 7472 7920 3d20          entry = 
+00010860: 7375 625f 656e 7472 792e 7265 706c 6163  sub_entry.replac
+00010870: 6528 222d 222c 2222 292e 7265 706c 6163  e("-","").replac
+00010880: 6528 222b 222c 2222 292e 7374 7269 7028  e("+","").strip(
+00010890: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000108a0: 2020 2020 2020 2069 6620 656e 7472 7920         if entry 
+000108b0: 213d 2020 2222 3a0d 0a20 2020 2020 2020  !=  "":..       
+000108c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000108d0: 206d 795f 6974 656d 732e 6170 7065 6e64   my_items.append
+000108e0: 2865 6e74 7279 290d 0a0d 0a0d 0a20 2020  (entry)......   
+000108f0: 2020 2020 2020 2020 2073 656c 662e 6472           self.dr
+00010900: 6177 6361 6e76 6173 2e61 6464 5f63 6f6e  awcanvas.add_con
+00010910: 6e65 6374 696f 6e28 626f 7831 2c62 6f78  nection(box1,box
+00010920: 322c 2073 7472 2873 656c 662e 6564 6974  2, str(self.edit
+00010930: 5368 6f72 746e 616d 652e 7465 7874 2829  Shortname.text()
+00010940: 292c 7375 626a 6563 743d 7365 6c66 2e65  ),subject=self.e
+00010950: 6469 7453 7562 6a65 6374 2e74 6578 7428  ditSubject.text(
+00010960: 292c 6974 656d 733d 6d79 5f69 7465 6d73  ),items=my_items
+00010970: 290d 0a0d 0a0d 0a20 2020 2020 2020 2073  )......        s
+00010980: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+00010990: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+000109a0: 785d 5b22 7175 616e 7469 7479 225d 203d  x]["quantity"] =
+000109b0: 205c 0d0a 2020 2020 2020 2020 2020 2020   \..            
+000109c0: 7374 7228 7365 6c66 2e65 6469 7451 7561  str(self.editQua
+000109d0: 6e74 6974 792e 7465 7874 2829 290d 0a0d  ntity.text())...
+000109e0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+000109f0: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
+00010a00: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
+00010a10: 7375 626a 6563 7422 5d20 3d20 5c0d 0a20  subject"] = \.. 
+00010a20: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
+00010a30: 656c 662e 6564 6974 5375 626a 6563 742e  elf.editSubject.
+00010a40: 7465 7874 2829 290d 0a0d 0a20 2020 2020  text())....     
+00010a50: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+00010a60: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
+00010a70: 6e5f 6964 785d 5b22 7368 6f72 746e 616d  n_idx]["shortnam
+00010a80: 6522 5d20 3d20 5c0d 0a20 2020 2020 2020  e"] = \..       
+00010a90: 2020 2020 2073 7472 2873 656c 662e 6564       str(self.ed
+00010aa0: 6974 5368 6f72 746e 616d 652e 7465 7874  itShortname.text
+00010ab0: 2829 290d 0a0d 0a20 2020 2020 2020 2073  ())....        s
+00010ac0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+00010ad0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+00010ae0: 785d 5b22 6465 7363 7269 7074 696f 6e22  x]["description"
+00010af0: 5d20 3d20 5c0d 0a20 2020 2020 2020 2020  ] = \..         
+00010b00: 2020 2073 7472 2873 656c 662e 6564 6974     str(self.edit
+00010b10: 4465 7363 7269 7074 696f 6e2e 7465 7874  Description.text
+00010b20: 2829 290d 0a0d 0a20 2020 2020 2020 2073  ())....        s
+00010b30: 656c 662e 7570 6461 7465 5f74 6162 6c65  elf.update_table
+00010b40: 2829 0d0a 0d0a 2020 2020 2020 2020 7072  ()....        pr
+00010b50: 696e 7428 2264 6174 6120 6368 616e 6765  int("data change
+00010b60: 642e 2229 0d0a 0d0a 2020 2020 2020 2020  d.")....        
+00010b70: 7365 6c66 2e6d 6164 655f 6368 616e 6765  self.made_change
+00010b80: 7320 3d20 4661 6c73 650d 0a0d 0a20 2020  s = False....   
+00010b90: 2020 2020 2073 656c 662e 726f 775f 7365       self.row_se
+00010ba0: 6c65 6374 2873 656c 662e 7365 6c65 6374  lect(self.select
+00010bb0: 696f 6e5f 6964 7829 0d0a 0d0a 2020 2020  ion_idx)....    
+00010bc0: 2020 2020 2320 7365 6c66 2e75 6470 6174      # self.udpat
+00010bd0: 6542 7574 746f 6e2e 7365 7454 6578 7428  eButton.setText(
+00010be0: 2255 7064 6174 6520 5661 6c75 6573 2229  "Update Values")
+00010bf0: 0d0a 0d0a 2020 2020 6465 6620 7361 7665  ....    def save
+00010c00: 2873 656c 6629 3a0d 0a0d 0a20 2020 2020  (self):....     
+00010c10: 2020 2074 7279 3a0d 0a0d 0a0d 0a20 2020     try:......   
+00010c20: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+00010c30: 6520 3d20 7365 6c66 2e63 7572 7265 6e74  e = self.current
+00010c40: 5f66 696c 6520 2320 7374 6174 7573 4261  _file # statusBa
+00010c50: 7228 292e 6375 7272 656e 744d 6573 7361  r().currentMessa
+00010c60: 6765 2829 0d0a 2020 2020 2020 2020 2020  ge()..          
+00010c70: 2020 7365 6c66 2e6c 6162 656c 5f66 6e61    self.label_fna
+00010c80: 6d65 2e73 6574 5465 7874 2866 696c 656e  me.setText(filen
+00010c90: 616d 6529 0d0a 0d0a 2020 2020 2020 2020  ame)....        
+00010ca0: 2020 2020 6966 2066 696c 656e 616d 6520      if filename 
+00010cb0: 6973 206e 6f74 204e 6f6e 653a 0d0a 0d0a  is not None:....
+00010cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010cd0: 7365 6c66 2e73 6176 6561 7328 6669 6c65  self.saveas(file
+00010ce0: 6e61 6d65 290d 0a0d 0a20 2020 2020 2020  name)....       
+00010cf0: 2020 2020 2020 2020 2023 2054 4f44 4f20           # TODO 
+00010d00: 6d61 7962 6520 6261 636b 7570 283f 290d  maybe backup(?).
+00010d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010d20: 2023 2073 656c 662e 6e6f 7469 6679 2822   # self.notify("
+00010d30: 4669 6c65 2073 6176 6564 2075 6e64 6572  File saved under
+00010d40: 2025 7322 2025 2066 696c 656e 616d 652c   %s" % filename,
+00010d50: 7469 746c 653d 224f 6b22 290d 0a20 2020  title="Ok")..   
+00010d60: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00010d70: 6e74 2822 4649 4c45 2053 4156 4544 2122  nt("FILE SAVED!"
+00010d80: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+00010d90: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00010da0: 2020 2020 2020 7365 6c66 2e73 6176 655f        self.save_
+00010db0: 646c 6728 290d 0a0d 0a20 2020 2020 2020  dlg()....       
+00010dc0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00010dd0: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+00010de0: 2020 2020 2069 6620 6669 6c65 6e61 6d65       if filename
+00010df0: 2021 3d20 2222 3a0d 0a20 2020 2020 2020   != "":..       
+00010e00: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+00010e10: 7469 6679 2873 7472 2865 292c 7469 746c  tify(str(e),titl
+00010e20: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
+00010e30: 0d0a 2020 2020 6465 6620 7361 7665 5f64  ..    def save_d
+00010e40: 6c67 2873 656c 6629 3a0d 0a20 2020 2020  lg(self):..     
+00010e50: 2020 2074 7279 3a0d 0a0d 0a20 2020 2020     try:....     
+00010e60: 2020 2020 2020 2066 696c 656e 616d 6520         filename 
+00010e70: 3d20 5146 696c 6544 6961 6c6f 672e 6765  = QFileDialog.ge
+00010e80: 7453 6176 6546 696c 654e 616d 6528 7365  tSaveFileName(se
+00010e90: 6c66 2c20 2753 6176 6520 6669 6c65 272c  lf, 'Save file',
+00010ea0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010ed0: 206f 732e 6765 7463 7764 2829 2c20 2261   os.getcwd(), "a
+00010ee0: 7474 756e 6520 4669 6c65 7320 282a 2e73  ttune Files (*.s
+00010ef0: 6663 746c 2922 295b 305d 0d0a 2020 2020  fctl)")[0]..    
+00010f00: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+00010f10: 7475 7342 6172 2829 2e73 686f 774d 6573  tusBar().showMes
+00010f20: 7361 6765 2822 5361 7665 6420 6669 6c65  sage("Saved file
+00010f30: 2022 202b 2066 696c 656e 616d 6529 0d0a   " + filename)..
+00010f40: 0d0a 2020 2020 2020 2020 2020 2020 6375  ..            cu
+00010f50: 7272 656e 745f 6669 6c65 5f62 6163 6b75  rrent_file_backu
+00010f60: 7020 3d20 7365 6c66 2e63 7572 7265 6e74  p = self.current
+00010f70: 5f66 696c 650d 0a0d 0a20 2020 2020 2020  _file....       
+00010f80: 2020 2020 2069 6620 6669 6c65 6e61 6d65       if filename
+00010f90: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+00010fa0: 2066 696c 656e 616d 6520 213d 2022 223a   filename != "":
+00010fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010fc0: 2020 7365 6c66 2e6c 6162 656c 5f66 6e61    self.label_fna
+00010fd0: 6d65 2e73 6574 5465 7874 2866 696c 656e  me.setText(filen
+00010fe0: 616d 6529 0d0a 0d0a 2020 2020 2020 2020  ame)....        
+00010ff0: 2020 2020 2020 2020 7365 6c66 2e63 7572          self.cur
+00011000: 7265 6e74 5f66 696c 6520 3d20 6669 6c65  rent_file = file
+00011010: 6e61 6d65 0d0a 2020 2020 2020 2020 2020  name..          
+00011020: 2020 2020 2020 7365 6c66 2e73 6176 6561        self.savea
+00011030: 7328 6669 6c65 6e61 6d65 290d 0a0d 0a20  s(filename).... 
+00011040: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
+00011050: 4f20 6d61 7962 6520 6261 636b 7570 283f  O maybe backup(?
+00011060: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
+00011070: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00011080: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+00011090: 2073 656c 662e 6e6f 7469 6679 2822 436f   self.notify("Co
+000110a0: 756c 6420 6e6f 7420 7361 7665 2070 726f  uld not save pro
+000110b0: 6a65 6374 2e22 2c74 6974 6c65 3d22 4572  ject.",title="Er
+000110c0: 726f 7222 290d 0a20 2020 2020 2020 2020  ror")..         
+000110d0: 2020 2073 656c 662e 6375 7272 656e 745f     self.current_
+000110e0: 6669 6c65 203d 2063 7572 7265 6e74 5f66  file = current_f
+000110f0: 696c 655f 6261 636b 7570 0d0a 0d0a 0d0a  ile_backup......
+00011100: 2020 2020 6465 6620 7361 7665 6173 2873      def saveas(s
+00011110: 656c 662c 6669 6c65 6e61 6d65 293a 0d0a  elf,filename):..
+00011120: 0d0a 2020 2020 2020 2020 6674 6865 6d65  ..        ftheme
+00011130: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00011140: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00011150: 2020 2066 7468 656d 6520 3d20 6669 6c65     ftheme = file
+00011160: 6e61 6d65 5b3a 2d35 5d2b 2273 6663 7468  name[:-5]+"sfcth
+00011170: 656d 6522 2023 2061 6273 6f6c 7574 6520  eme" # absolute 
+00011180: 6669 6c65 2070 6174 680d 0a20 2020 2020  file path..     
+00011190: 2020 2020 2020 2066 6f6c 6465 722c 6674         folder,ft
+000111a0: 6865 6d65 203d 206f 732e 7061 7468 2e73  heme = os.path.s
+000111b0: 706c 6974 2866 7468 656d 6529 2023 2063  plit(ftheme) # c
+000111c0: 6f6e 7665 7274 2074 6f20 7265 6c61 7469  onvert to relati
+000111d0: 7665 2066 696c 6520 7061 7468 0d0a 2020  ve file path..  
+000111e0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+000111f0: 6865 6d65 5f6d 616e 6167 6572 2e73 6176  heme_manager.sav
+00011200: 655f 636f 6c6f 7273 2866 7468 656d 6529  e_colors(ftheme)
+00011210: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00011220: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00011230: 656c 662e 6e6f 7469 6679 2822 436f 756c  elf.notify("Coul
+00011240: 6420 6e6f 7420 7361 7665 2063 6f6c 6f72  d not save color
+00011250: 2074 6865 6d65 2e20 7072 6f63 6565 6469   theme. proceedi
+00011260: 6e67 2077 6974 686f 7574 222c 7469 746c  ng without",titl
+00011270: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
+00011280: 2020 2020 2020 2020 2320 6472 6177 6361          # drawca
+00011290: 6e76 6173 2063 6f64 655f 6461 7461 0d0a  nvas code_data..
+000112a0: 2020 2020 2020 2020 636f 6465 5f64 6174          code_dat
+000112b0: 6120 3d20 7b7d 0d0a 2020 2020 2020 2020  a = {}..        
+000112c0: 666f 7220 6b2c 7620 696e 2073 656c 662e  for k,v in self.
+000112d0: 6472 6177 6361 6e76 6173 2e63 6f64 655f  drawcanvas.code_
+000112e0: 6461 7461 2e69 7465 6d73 2829 3a0d 0a20  data.items():.. 
+000112f0: 2020 2020 2020 2020 2020 2063 6f64 655f             code_
+00011300: 6461 7461 5b6b 5d20 3d20 7374 7228 762e  data[k] = str(v.
+00011310: 656e 636f 6465 2822 7574 662d 3822 292e  encode("utf-8").
+00011320: 6465 636f 6465 2827 6370 3132 3532 2729  decode('cp1252')
+00011330: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+00011340: 2066 6978 2073 6f6d 6520 706f 7465 6e74   fix some potent
+00011350: 6961 6c20 656e 636f 6469 6e67 2065 7272  ial encoding err
+00011360: 6f72 730d 0a0d 0a20 2020 2020 2020 2074  ors....        t
+00011370: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00011380: 2070 7269 6e74 2822 4649 4c45 4e41 4d45   print("FILENAME
+00011390: 222c 2066 696c 656e 616d 6529 0d0a 0d0a  ", filename)....
+000113a0: 2020 2020 2020 2020 2020 2020 2320 6c6f              # lo
+000113b0: 6164 2065 6e74 7269 6573 2069 6e74 6f20  ad entries into 
+000113c0: 7468 6520 6c69 7374 0d0a 2020 2020 2020  the list..      
+000113d0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+000113e0: 6669 6c65 6e61 6d65 2c20 2777 2729 2061  filename, 'w') a
+000113f0: 7320 7374 7265 616d 3a0d 0a0d 0a20 2020  s stream:....   
+00011400: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+00011410: 6120 3d20 7b22 7472 616e 7361 6374 696f  a = {"transactio
+00011420: 6e73 223a 2073 656c 662e 656e 7472 795f  ns": self.entry_
+00011430: 6461 7461 2c0d 0a20 2020 2020 2020 2020  data,..         
+00011440: 2020 2020 2020 2022 6167 656e 7473 223a         "agents":
+00011450: 2063 6f64 655f 6461 7461 2c0d 0a20 2020   code_data,..   
+00011460: 2020 2020 2020 2020 2020 2020 2022 626f               "bo
+00011470: 785f 706f 7369 7469 6f6e 7322 3a20 7365  x_positions": se
+00011480: 6c66 2e64 7261 7763 616e 7661 732e 626f  lf.drawcanvas.bo
+00011490: 785f 706f 7369 7469 6f6e 7328 292c 0d0a  x_positions(),..
+000114a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000114b0: 226c 6162 656c 5f70 6f73 6974 696f 6e73  "label_positions
+000114c0: 223a 2073 656c 662e 6472 6177 6361 6e76  ": self.drawcanv
+000114d0: 6173 2e6c 6162 656c 5f70 6f73 6974 696f  as.label_positio
+000114e0: 6e73 2829 2c0d 0a20 2020 2020 2020 2020  ns(),..         
+000114f0: 2020 2020 2020 2022 7365 7474 696e 6773         "settings
+00011500: 223a 2073 656c 662e 7365 7474 696e 6773  ": self.settings
+00011510: 5f73 7472 2c0d 0a20 2020 2020 2020 2020  _str,..         
+00011520: 2020 2020 2020 2022 6d61 696e 6c6f 6f70         "mainloop
+00011530: 223a 2073 656c 662e 6d61 696e 6c6f 6f70  ": self.mainloop
+00011540: 5f73 7472 2c0d 0a20 2020 2020 2020 2020  _str,..         
+00011550: 2020 2020 2020 2022 7468 656d 6522 3a20         "theme": 
+00011560: 7b22 676c 6f62 616c 7468 656d 6522 3a20  {"globaltheme": 
+00011570: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+00011580: 6572 2e74 6865 6d65 2c20 2263 6f6c 6f72  er.theme, "color
+00011590: 7322 3a66 7468 656d 657d 2c0d 0a20 2020  s":ftheme},..   
+000115a0: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
+000115b0: 7465 7322 3a20 7365 6c66 2e6e 6f74 6573  tes": self.notes
+000115c0: 4564 6974 2e74 6f50 6c61 696e 5465 7874  Edit.toPlainText
+000115d0: 2829 2c0d 0a20 2020 2020 2020 2020 2020  (),..           
+000115e0: 2020 2020 207d 0d0a 0d0a 2020 2020 2020       }....      
+000115f0: 2020 2020 2020 2020 2020 7961 6d6c 2e64            yaml.d
+00011600: 756d 7028 6461 7461 2c73 7472 6561 6d29  ump(data,stream)
+00011610: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
+00011620: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+00011630: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00011640: 7365 6c66 2e6e 6f74 6966 7928 6d65 7373  self.notify(mess
+00011650: 6167 653d 7374 7228 6529 2c20 7469 746c  age=str(e), titl
+00011660: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
+00011670: 2020 2020 6465 6620 7472 795f 6765 6e5f      def try_gen_
+00011680: 6d61 7472 6978 2873 656c 6629 3a0d 0a20  matrix(self):.. 
+00011690: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+000116a0: 2020 2020 2020 2020 2073 656c 662e 6765           self.ge
+000116b0: 6e5f 6d61 7472 6978 2829 0d0a 2020 2020  n_matrix()..    
+000116c0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000116d0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+000116e0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+000116f0: 6966 7928 2245 7272 6f72 222c 7374 7228  ify("Error",str(
+00011700: 6529 290d 0a0d 0a20 2020 2064 6566 2067  e))....    def g
+00011710: 656e 5f6d 6174 7269 7828 7365 6c66 2c6d  en_matrix(self,m
+00011720: 6f64 653d 2273 7461 6e64 6172 6422 293a  ode="standard"):
+00011730: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00011740: 2020 2020 2020 2067 656e 6572 6174 6520         generate 
+00011750: 666c 6f77 206d 6174 7269 783a 0d0a 0d0a  flow matrix:....
+00011760: 2020 2020 2020 2020 3a70 6172 616d 206d          :param m
+00011770: 6f64 653a 2073 7461 6e64 6172 642c 6578  ode: standard,ex
+00011780: 6365 6c2c 6c61 7465 780d 0a0d 0a20 2020  cel,latex....   
+00011790: 2020 2020 2073 7461 6e64 6172 643a 2073       standard: s
+000117a0: 686f 7773 206d 6174 7269 7820 6772 6170  hows matrix grap
+000117b0: 6869 6361 6c6c 790d 0a20 2020 2020 2020  hically..       
+000117c0: 2065 7863 656c 3a20 6578 706f 7274 7320   excel: exports 
+000117d0: 616e 2065 7863 656c 2066 696c 650d 0a20  an excel file.. 
+000117e0: 2020 2020 2020 206c 6174 6578 3a20 6e6f         latex: no
+000117f0: 7420 7965 7420 7375 7070 6f72 7465 6420  t yet supported 
+00011800: 4e4f 5420 4156 4149 4c41 424c 4520 464f  NOT AVAILABLE FO
+00011810: 5220 4e4f 570d 0a20 2020 2020 2020 2068  R NOW..        h
+00011820: 746d 6c3a 204e 4f54 2041 5641 494c 4142  tml: NOT AVAILAB
+00011830: 4c45 2046 4f52 204e 4f57 0d0a 2020 2020  LE FOR NOW..    
+00011840: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00011850: 2020 2066 6c6f 775f 6461 7461 203d 207b     flow_data = {
+00011860: 7d0d 0a0d 0a20 2020 2020 2020 2066 6c6f  }....        flo
+00011870: 775f 6461 7461 5b22 4341 225d 203d 2064  w_data["CA"] = d
+00011880: 6566 6175 6c74 6469 6374 286c 616d 6264  efaultdict(lambd
+00011890: 613a 2064 6566 6175 6c74 6469 6374 286c  a: defaultdict(l
+000118a0: 6973 7429 2920 2023 2063 7572 7265 6e74  ist))  # current
+000118b0: 2061 6363 6f75 6e74 0d0a 2020 2020 2020   account..      
+000118c0: 2020 666c 6f77 5f64 6174 615b 224b 4122    flow_data["KA"
+000118d0: 5d20 3d20 6465 6661 756c 7464 6963 7428  ] = defaultdict(
+000118e0: 6c61 6d62 6461 3a20 6465 6661 756c 7464  lambda: defaultd
+000118f0: 6963 7428 6c69 7374 2929 2020 2320 6361  ict(list))  # ca
+00011900: 7069 7461 6c20 6163 636f 756e 740d 0a0d  pital account...
+00011910: 0a20 2020 2020 2020 2023 2066 6c6f 775f  .        # flow_
+00011920: 6461 7461 5b4b 4120 6f72 2043 415d 5b73  data[KA or CA][s
+00011930: 7562 6a65 6374 5d5b 6167 656e 745d 0d0a  ubject][agent]..
+00011940: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
+00011950: 656c 662e 656e 7472 795f 6461 7461 2920  elf.entry_data) 
+00011960: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
+00011970: 2020 2073 656c 662e 6e6f 7469 6679 286d     self.notify(m
+00011980: 6573 7361 6765 3d22 4361 6e6e 6f74 2067  essage="Cannot g
+00011990: 656e 6572 6174 6520 4d61 7472 6978 2e20  enerate Matrix. 
+000119a0: 4861 7665 2079 6f75 2073 6574 2075 7020  Have you set up 
+000119b0: 616e 7920 7472 616e 7361 6374 696f 6e73  any transactions
+000119c0: 2079 6574 3f22 2c74 6974 6c65 3d22 4572   yet?",title="Er
+000119d0: 726f 7222 290d 0a20 2020 2020 2020 2020  ror")..         
+000119e0: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
+000119f0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00011a00: 2020 2020 2020 2066 6f72 2066 696c 6564         for filed
+00011a10: 6174 6120 696e 2073 656c 662e 656e 7472  ata in self.entr
+00011a20: 795f 6461 7461 3a0d 0a20 2020 2020 2020  y_data:..       
+00011a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a40: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
+00011a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a60: 2020 2020 2020 2020 2020 2020 2020 6576                ev
+00011a70: 616c 7561 7465 2074 7261 6e73 6163 7469  aluate transacti
+00011a80: 6f6e 2065 6e74 7269 6573 2077 6974 6820  on entries with 
+00011a90: 7468 6520 666c 6f77 206c 6f67 6765 720d  the flow logger.
+00011aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ac0: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
+00011ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ae0: 2020 2020 2020 7375 626a 6563 7420 3d20        subject = 
+00011af0: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
+00011b00: 7422 5d2e 7265 706c 6163 6528 225f 222c  t"].replace("_",
+00011b10: 2022 2022 292e 7469 746c 6528 290d 0a20   " ").title().. 
 00011b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b30: 2020 2020 2020 7175 616e 7469 7479 203d        quantity =
-00011b40: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
-00011b50: 6974 7922 5d0d 0a20 2020 2020 2020 2020  ity"]..         
+00011b30: 2020 2020 2020 2020 2020 2020 2020 206b                 k
+00011b40: 696e 6420 3d20 6669 6c65 6461 7461 5b22  ind = filedata["
+00011b50: 6b69 6e64 225d 0d0a 2020 2020 2020 2020  kind"]..        
 00011b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b70: 2020 2020 2020 2061 6765 6e74 3120 3d20         agent1 = 
-00011b80: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
-00011b90: 225d 2e72 6570 6c61 6365 2822 5f22 2c20  "].replace("_", 
-00011ba0: 2220 2229 2e74 6974 6c65 2829 0d0a 2020  " ").title()..  
-00011bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011bc0: 2020 2020 2020 2020 2020 2020 2020 6167                ag
-00011bd0: 656e 7432 203d 2066 696c 6564 6174 615b  ent2 = filedata[
-00011be0: 2261 6765 6e74 3222 5d2e 7265 706c 6163  "agent2"].replac
-00011bf0: 6528 225f 222c 2022 2022 292e 7469 746c  e("_", " ").titl
-00011c00: 6528 290d 0a0d 0a20 2020 2020 2020 2020  e()....         
+00011b70: 2020 2020 2020 2020 6c6f 675f 666c 6f77          log_flow
+00011b80: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+00011b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ba0: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
+00011bb0: 6461 7461 5b22 6c6f 6720 7472 616e 7361  data["log transa
+00011bc0: 6374 696f 6e22 5d20 3d3d 2022 4661 6c73  ction"] == "Fals
+00011bd0: 6522 3a0d 0a20 2020 2020 2020 2020 2020  e":..           
+00011be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011bf0: 2020 2020 2020 2020 206c 6f67 5f66 6c6f           log_flo
+00011c00: 773d 2046 616c 7365 0d0a 2020 2020 2020  w= False..      
 00011c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c20: 2020 2020 2020 2023 2075 7070 6572 2070         # upper p
-00011c30: 6172 7420 6f66 206d 6174 7269 780d 0a20  art of matrix.. 
-00011c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00011c60: 6620 6c6f 675f 666c 6f77 3a0d 0a20 2020  f log_flow:..   
-00011c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c90: 2061 6363 6f75 6e74 5f66 726f 6d20 3d20   account_from = 
-00011ca0: 6b69 6e64 2e73 706c 6974 2822 2d3e 2229  kind.split("->")
-00011cb0: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
+00011c20: 2020 2020 2020 2020 2020 2320 2020 6c6f            #   lo
+00011c30: 675f 666c 6f77 203d 2062 6f6f 6c28 6669  g_flow = bool(fi
+00011c40: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
+00011c50: 7361 6374 696f 6e22 5d29 0d0a 2020 2020  saction"])..    
+00011c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c70: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00011c80: 7428 224c 4f47 2046 4c4f 5722 2c6c 6f67  t("LOG FLOW",log
+00011c90: 5f66 6c6f 772c 2272 6177 222c 6669 6c65  _flow,"raw",file
+00011ca0: 6461 7461 5b22 6c6f 6720 7472 616e 7361  data["log transa
+00011cb0: 6374 696f 6e22 5d29 0d0a 2020 2020 2020  ction"])..      
 00011cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cd0: 2020 2020 2020 2020 2061 6363 6f75 6e74           account
-00011ce0: 5f74 6f20 3d20 6b69 6e64 2e73 706c 6974  _to = kind.split
-00011cf0: 2822 2d3e 2229 5b31 5d0d 0a0d 0a20 2020  ("->")[1]....   
+00011cd0: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+00011ce0: 7479 203d 2066 696c 6564 6174 615b 2271  ty = filedata["q
+00011cf0: 7561 6e74 6974 7922 5d0d 0a20 2020 2020  uantity"]..     
 00011d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d20: 2066 6c6f 775f 6461 7461 5b61 6363 6f75   flow_data[accou
-00011d30: 6e74 5f66 726f 6d5d 5b73 7562 6a65 6374  nt_from][subject
-00011d40: 5d5b 6167 656e 7431 5d2e 6170 7065 6e64  ][agent1].append
-00011d50: 2822 2d22 202b 2073 7472 2871 7561 6e74  ("-" + str(quant
-00011d60: 6974 7929 290d 0a20 2020 2020 2020 2020  ity))..         
-00011d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d80: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
-00011d90: 6461 7461 5b61 6363 6f75 6e74 5f74 6f5d  data[account_to]
-00011da0: 5b73 7562 6a65 6374 5d5b 6167 656e 7432  [subject][agent2
-00011db0: 5d2e 6170 7065 6e64 2873 7472 2871 7561  ].append(str(qua
-00011dc0: 6e74 6974 7929 290d 0a0d 0a20 2020 2020  ntity))....     
-00011dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011de0: 2020 2020 2020 2020 2020 2023 206c 6f77             # low
-00011df0: 6572 2070 6172 7420 6f66 206d 6174 7269  er part of matri
-00011e00: 7820 3d20 6368 616e 6765 7320 696e 2061  x = changes in a
-00011e10: 7373 6574 7320 616e 7320 6c69 6162 696c  ssets ans liabil
-00011e20: 6974 6965 730d 0a0d 0a20 2020 2020 2020  ities....       
-00011e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e40: 2020 2020 2020 2020 2061 3120 3d20 6669           a1 = fi
-00011e50: 6c65 6461 7461 5b22 6131 225d 2020 2320  ledata["a1"]  # 
-00011e60: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
-00011e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e80: 2020 2020 2020 2020 6531 203d 2066 696c          e1 = fil
-00011e90: 6564 6174 615b 2265 3122 5d20 2023 202b  edata["e1"]  # +
-00011ea0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+00011d10: 2020 2020 2020 2020 2020 2061 6765 6e74             agent
+00011d20: 3120 3d20 6669 6c65 6461 7461 5b22 6167  1 = filedata["ag
+00011d30: 656e 7431 225d 2e72 6570 6c61 6365 2822  ent1"].replace("
+00011d40: 5f22 2c20 2220 2229 2e74 6974 6c65 2829  _", " ").title()
+00011d50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d70: 2020 6167 656e 7432 203d 2066 696c 6564    agent2 = filed
+00011d80: 6174 615b 2261 6765 6e74 3222 5d2e 7265  ata["agent2"].re
+00011d90: 706c 6163 6528 225f 222c 2022 2022 292e  place("_", " ").
+00011da0: 7469 746c 6528 290d 0a0d 0a20 2020 2020  title()....     
+00011db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011dc0: 2020 2020 2020 2020 2020 2023 2075 7070             # upp
+00011dd0: 6572 2070 6172 7420 6f66 206d 6174 7269  er part of matri
+00011de0: 780d 0a20 2020 2020 2020 2020 2020 2020  x..             
+00011df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e00: 2020 2069 6620 6c6f 675f 666c 6f77 3a0d     if log_flow:.
+00011e10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e30: 2020 2020 2061 6363 6f75 6e74 5f66 726f       account_fro
+00011e40: 6d20 3d20 6b69 6e64 2e73 706c 6974 2822  m = kind.split("
+00011e50: 2d3e 2229 5b30 5d0d 0a20 2020 2020 2020  ->")[0]..       
+00011e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e70: 2020 2020 2020 2020 2020 2020 2061 6363               acc
+00011e80: 6f75 6e74 5f74 6f20 3d20 6b69 6e64 2e73  ount_to = kind.s
+00011e90: 706c 6974 2822 2d3e 2229 5b31 5d0d 0a0d  plit("->")[1]...
+00011ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00011eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ec0: 2020 2020 2020 206c 3120 3d20 6669 6c65         l1 = file
-00011ed0: 6461 7461 5b22 6c31 225d 2020 2320 2b20  data["l1"]  # + 
-00011ee0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-00011ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f00: 2020 2020 2020 6132 203d 2066 696c 6564        a2 = filed
-00011f10: 6174 615b 2261 3222 5d20 2023 202b 2022  ata["a2"]  # + "
-00011f20: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-00011f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f40: 2020 2020 2065 3220 3d20 6669 6c65 6461       e2 = fileda
-00011f50: 7461 5b22 6532 225d 2020 2320 2b20 225c  ta["e2"]  # + "\
-00011f60: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
+00011ec0: 2020 2020 2066 6c6f 775f 6461 7461 5b61       flow_data[a
+00011ed0: 6363 6f75 6e74 5f66 726f 6d5d 5b73 7562  ccount_from][sub
+00011ee0: 6a65 6374 5d5b 6167 656e 7431 5d2e 6170  ject][agent1].ap
+00011ef0: 7065 6e64 2822 2d22 202b 2073 7472 2871  pend("-" + str(q
+00011f00: 7561 6e74 6974 7929 290d 0a20 2020 2020  uantity))..     
+00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f20: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00011f30: 6c6f 775f 6461 7461 5b61 6363 6f75 6e74  low_data[account
+00011f40: 5f74 6f5d 5b73 7562 6a65 6374 5d5b 6167  _to][subject][ag
+00011f50: 656e 7432 5d2e 6170 7065 6e64 2873 7472  ent2].append(str
+00011f60: 2871 7561 6e74 6974 7929 290d 0a0d 0a20  (quantity)).... 
 00011f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f80: 2020 2020 6c32 203d 2066 696c 6564 6174      l2 = filedat
-00011f90: 615b 226c 3222 5d20 2023 202b 2022 5c6e  a["l2"]  # + "\n
-00011fa0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-00011fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fc0: 2020 2020 2023 2061 7373 6574 730d 0a20       # assets.. 
+00011f80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00011f90: 206c 6f77 6572 2070 6172 7420 6f66 206d   lower part of m
+00011fa0: 6174 7269 7820 3d20 6368 616e 6765 7320  atrix = changes 
+00011fb0: 696e 2061 7373 6574 7320 616e 7320 6c69  in assets ans li
+00011fc0: 6162 696c 6974 6965 730d 0a0d 0a20 2020  abilities....   
 00011fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fe0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011ff0: 6f72 2069 7465 6d5f 6e61 6d65 2069 6e20  or item_name in 
-00012000: 6131 2e73 706c 6974 2822 5c6e 2229 3a20  a1.split("\n"): 
-00012010: 2023 202b 2065 312e 7370 6c69 7428 225c   # + e1.split("\
-00012020: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-00012030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012040: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
-00012050: 6d5f 6e61 6d65 2021 3d20 2222 3a0d 0a20  m_name != "":.. 
-00012060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012080: 2020 2020 2020 206e 616d 6520 3d20 6974         name = it
-00012090: 656d 5f6e 616d 655b 313a 5d2e 7374 7269  em_name[1:].stri
-000120a0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-000120b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120c0: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-000120d0: 6e20 3d20 6974 656d 5f6e 616d 655b 305d  n = item_name[0]
-000120e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000120f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012100: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00012110: 6967 6e20 3d3d 2022 2b22 3a0d 0a20 2020  ign == "+":..   
-00012120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012140: 2020 2020 2020 2020 2066 6c69 7070 6564           flipped
-00012150: 5f73 6967 6e20 3d20 222d 220d 0a20 2020  _sign = "-"..   
-00012160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012180: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00012190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121b0: 2020 2020 2020 2020 666c 6970 7065 645f          flipped_
-000121c0: 7369 676e 203d 2022 2b22 0d0a 0d0a 2020  sign = "+"....  
+00011fe0: 2020 2020 2020 2020 2020 2020 2061 3120               a1 
+00011ff0: 3d20 6669 6c65 6461 7461 5b22 6131 225d  = filedata["a1"]
+00012000: 2020 2320 2b20 225c 6e22 0d0a 2020 2020    # + "\n"..    
+00012010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012020: 2020 2020 2020 2020 2020 2020 6531 203d              e1 =
+00012030: 2066 696c 6564 6174 615b 2265 3122 5d20   filedata["e1"] 
+00012040: 2023 202b 2022 5c6e 220d 0a20 2020 2020   # + "\n"..     
+00012050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012060: 2020 2020 2020 2020 2020 206c 3120 3d20             l1 = 
+00012070: 6669 6c65 6461 7461 5b22 6c31 225d 2020  filedata["l1"]  
+00012080: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
+00012090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120a0: 2020 2020 2020 2020 2020 6132 203d 2066            a2 = f
+000120b0: 696c 6564 6174 615b 2261 3222 5d20 2023  iledata["a2"]  #
+000120c0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+000120d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120e0: 2020 2020 2020 2020 2065 3220 3d20 6669           e2 = fi
+000120f0: 6c65 6461 7461 5b22 6532 225d 2020 2320  ledata["e2"]  # 
+00012100: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
+00012110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012120: 2020 2020 2020 2020 6c32 203d 2066 696c          l2 = fil
+00012130: 6564 6174 615b 226c 3222 5d20 2023 202b  edata["l2"]  # +
+00012140: 2022 5c6e 220d 0a0d 0a20 2020 2020 2020   "\n"....       
+00012150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012160: 2020 2020 2020 2020 2023 2061 7373 6574           # asset
+00012170: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00012180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012190: 2020 2066 6f72 2069 7465 6d5f 6e61 6d65     for item_name
+000121a0: 2069 6e20 6131 2e73 706c 6974 2822 5c6e   in a1.split("\n
+000121b0: 2229 3a20 2023 202b 2065 312e 7370 6c69  "):  # + e1.spli
+000121c0: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
 000121d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000121f0: 2020 2020 2020 6966 206e 6f74 2022 2873        if not "(s
-00012200: 2922 2069 6e20 6e61 6d65 3a0d 0a20 2020  )" in name:..   
+000121e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000121f0: 2069 7465 6d5f 6e61 6d65 2021 3d20 2222   item_name != ""
+00012200: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 00012210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012230: 2020 2020 2020 2020 2066 6c6f 775f 6461           flow_da
-00012240: 7461 5b22 4b41 225d 5b22 ce94 2025 7322  ta["KA"][".. %s"
-00012250: 2025 206e 616d 655d 5b61 6765 6e74 315d   % name][agent1]
-00012260: 2e61 7070 656e 6428 0d0a 2020 2020 2020  .append(..      
-00012270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012290: 2020 2020 2020 2020 2020 2228 2220 2b20            "(" + 
-000122a0: 666c 6970 7065 645f 7369 676e 202b 2071  flipped_sign + q
-000122b0: 7561 6e74 6974 7920 2b20 2229 2229 0d0a  uantity + ")")..
-000122c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012220: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00012230: 3d20 6974 656d 5f6e 616d 655b 313a 5d2e  = item_name[1:].
+00012240: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
+00012250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012270: 2073 6967 6e20 3d20 6974 656d 5f6e 616d   sign = item_nam
+00012280: 655b 305d 0d0a 0d0a 2020 2020 2020 2020  e[0]....        
+00012290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122b0: 6966 2073 6967 6e20 3d3d 2022 2b22 3a0d  if sign == "+":.
+000122c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000122d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122e0: 2020 666f 7220 6974 656d 5f6e 616d 6520    for item_name 
-000122f0: 696e 2061 322e 7370 6c69 7428 225c 6e22  in a2.split("\n"
-00012300: 293a 2020 2320 2b20 6532 2e73 706c 6974  ):  # + e2.split
-00012310: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-00012320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012330: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00012340: 6974 656d 5f6e 616d 6520 213d 2022 223a  item_name != "":
-00012350: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012370: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-00012380: 2069 7465 6d5f 6e61 6d65 5b31 3a5d 2e73   item_name[1:].s
-00012390: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
-000123a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000123b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000123c0: 7369 676e 203d 2069 7465 6d5f 6e61 6d65  sign = item_name
-000123d0: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
-000123e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000123f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00012400: 6620 7369 676e 203d 3d20 222b 223a 0d0a  f sign == "+":..
+000122e0: 2020 2020 2020 2020 2020 2020 2066 6c69               fli
+000122f0: 7070 6564 5f73 6967 6e20 3d20 222d 220d  pped_sign = "-".
+00012300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012320: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00012330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012350: 2020 2020 2020 2020 2020 2020 666c 6970              flip
+00012360: 7065 645f 7369 676e 203d 2022 2b22 0d0a  ped_sign = "+"..
+00012370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012390: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000123a0: 2022 2873 2922 2069 6e20 6e61 6d65 3a0d   "(s)" in name:.
+000123b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000123c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123d0: 2020 2020 2020 2020 2020 2020 2066 6c6f               flo
+000123e0: 775f 6461 7461 5b22 4b41 225d 5b22 ce94  w_data["KA"]["..
+000123f0: 2025 7322 2025 206e 616d 655d 5b61 6765   %s" % name][age
+00012400: 6e74 315d 2e61 7070 656e 6428 0d0a 2020  nt1].append(..  
 00012410: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00012420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012430: 2020 2020 2020 2020 2020 2020 666c 6970              flip
-00012440: 7065 645f 7369 676e 203d 2022 2d22 0d0a  ped_sign = "-"..
-00012450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012470: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00012480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124a0: 2020 2020 2020 2020 2020 2066 6c69 7070             flipp
-000124b0: 6564 5f73 6967 6e20 3d20 222b 220d 0a0d  ed_sign = "+"...
-000124c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012430: 2020 2020 2020 2020 2020 2020 2020 2228                "(
+00012440: 2220 2b20 666c 6970 7065 645f 7369 676e  " + flipped_sign
+00012450: 202b 2071 7561 6e74 6974 7920 2b20 2229   + quantity + ")
+00012460: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
+00012470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012480: 2020 2020 2020 666f 7220 6974 656d 5f6e        for item_n
+00012490: 616d 6520 696e 2061 322e 7370 6c69 7428  ame in a2.split(
+000124a0: 225c 6e22 293a 2020 2320 2b20 6532 2e73  "\n"):  # + e2.s
+000124b0: 706c 6974 2822 5c6e 2229 3a0d 0a20 2020  plit("\n"):..   
+000124c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000124d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124e0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-000124f0: 2228 7329 2220 696e 206e 616d 653a 0d0a  "(s)" in name:..
+000124e0: 2069 6620 6974 656d 5f6e 616d 6520 213d   if item_name !=
+000124f0: 2022 223a 0d0a 2020 2020 2020 2020 2020   "":..          
 00012500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012520: 2020 2020 2020 2020 2020 2020 666c 6f77              flow
-00012530: 5f64 6174 615b 224b 4122 5d5b 22ce 9420  _data["KA"][".. 
-00012540: 2573 2220 2520 6e61 6d65 5d5b 6167 656e  %s" % name][agen
-00012550: 7432 5d2e 6170 7065 6e64 280d 0a20 2020  t2].append(..   
-00012560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012580: 2020 2020 2020 2020 2020 2020 2022 2822               "("
-00012590: 202b 2066 6c69 7070 6564 5f73 6967 6e20   + flipped_sign 
-000125a0: 2b20 7175 616e 7469 7479 202b 2022 2922  + quantity + ")"
-000125b0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00012510: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+00012520: 6d65 203d 2069 7465 6d5f 6e61 6d65 5b31  me = item_name[1
+00012530: 3a5d 2e73 7472 6970 2829 0d0a 2020 2020  :].strip()..    
+00012540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012560: 2020 2020 7369 676e 203d 2069 7465 6d5f      sign = item_
+00012570: 6e61 6d65 5b30 5d0d 0a0d 0a20 2020 2020  name[0]....     
+00012580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125a0: 2020 2069 6620 7369 676e 203d 3d20 222b     if sign == "+
+000125b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
 000125c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125d0: 2020 2020 2023 206c 6961 6269 6c69 7469       # liabiliti
-000125e0: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
-000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012600: 2020 2020 666f 7220 6974 656d 5f6e 616d      for item_nam
-00012610: 6520 696e 206c 312e 7370 6c69 7428 225c  e in l1.split("\
-00012620: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+000125d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125e0: 666c 6970 7065 645f 7369 676e 203d 2022  flipped_sign = "
+000125f0: 2d22 0d0a 2020 2020 2020 2020 2020 2020  -"..            
+00012600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012610: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00012620: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 00012630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012640: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
-00012650: 6d5f 6e61 6d65 2021 3d20 2222 3a0d 0a20  m_name != "":.. 
-00012660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012640: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00012650: 6c69 7070 6564 5f73 6967 6e20 3d20 222b  lipped_sign = "+
+00012660: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
 00012670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012680: 2020 2020 2020 206e 616d 6520 3d20 6974         name = it
-00012690: 656d 5f6e 616d 655b 313a 5d2e 7374 7269  em_name[1:].stri
-000126a0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+00012680: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00012690: 6e6f 7420 2228 7329 2220 696e 206e 616d  not "(s)" in nam
+000126a0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
 000126b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126c0: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-000126d0: 6e20 3d20 6974 656d 5f6e 616d 655b 305d  n = item_name[0]
-000126e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000126f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012700: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00012710: 6f74 2022 2873 2922 2069 6e20 6e61 6d65  ot "(s)" in name
-00012720: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00012730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012740: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00012750: 6c6f 775f 6461 7461 5b22 4b41 225d 5b22  low_data["KA"]["
-00012760: ce94 2025 7322 2025 206e 616d 655d 5b61  .. %s" % name][a
-00012770: 6765 6e74 315d 2e61 7070 656e 6428 0d0a  gent1].append(..
-00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126d0: 666c 6f77 5f64 6174 615b 224b 4122 5d5b  flow_data["KA"][
+000126e0: 22ce 9420 2573 2220 2520 6e61 6d65 5d5b  ".. %s" % name][
+000126f0: 6167 656e 7432 5d2e 6170 7065 6e64 280d  agent2].append(.
+00012700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012730: 2022 2822 202b 2066 6c69 7070 6564 5f73   "(" + flipped_s
+00012740: 6967 6e20 2b20 7175 616e 7469 7479 202b  ign + quantity +
+00012750: 2022 2922 290d 0a0d 0a20 2020 2020 2020   ")")....       
+00012760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012770: 2020 2020 2020 2020 2023 206c 6961 6269           # liabi
+00012780: 6c69 7469 6573 0d0a 2020 2020 2020 2020  lities..        
 00012790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127b0: 2228 2220 2b20 7369 676e 202b 2071 7561  "(" + sign + qua
-000127c0: 6e74 6974 7920 2b20 2229 2229 0d0a 0d0a  ntity + ")")....
+000127a0: 2020 2020 2020 2020 666f 7220 6974 656d          for item
+000127b0: 5f6e 616d 6520 696e 206c 312e 7370 6c69  _name in l1.spli
+000127c0: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
 000127d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127f0: 666f 7220 6974 656d 5f6e 616d 6520 696e  for item_name in
-00012800: 206c 322e 7370 6c69 7428 225c 6e22 293a   l2.split("\n"):
-00012810: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012830: 2020 2020 2020 6966 2069 7465 6d5f 6e61        if item_na
-00012840: 6d65 2021 3d20 2222 3a0d 0a20 2020 2020  me != "":..     
+000127e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000127f0: 2069 7465 6d5f 6e61 6d65 2021 3d20 2222   item_name != ""
+00012800: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012820: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00012830: 3d20 6974 656d 5f6e 616d 655b 313a 5d2e  = item_name[1:].
+00012840: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
 00012850: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00012860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012870: 2020 206e 616d 6520 3d20 6974 656d 5f6e     name = item_n
-00012880: 616d 655b 313a 5d2e 7374 7269 7028 290d  ame[1:].strip().
-00012890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012870: 2073 6967 6e20 3d20 6974 656d 5f6e 616d   sign = item_nam
+00012880: 655b 305d 0d0a 0d0a 2020 2020 2020 2020  e[0]....        
+00012890: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000128a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128b0: 2020 2020 2020 2020 2073 6967 6e20 3d20           sign = 
-000128c0: 6974 656d 5f6e 616d 655b 305d 0d0a 0d0a  item_name[0]....
+000128b0: 6966 206e 6f74 2022 2873 2922 2069 6e20  if not "(s)" in 
+000128c0: 6e61 6d65 3a0d 0a20 2020 2020 2020 2020  name:..         
 000128d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000128e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128f0: 2020 2020 2020 2020 6966 206e 6f74 2022          if not "
-00012900: 2873 2922 2069 6e20 6e61 6d65 3a0d 0a20  (s)" in name:.. 
-00012910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012930: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
-00012940: 6461 7461 5b22 4b41 225d 5b22 ce94 2025  data["KA"][".. %
-00012950: 7322 2025 206e 616d 655d 5b61 6765 6e74  s" % name][agent
-00012960: 325d 2e61 7070 656e 6428 0d0a 2020 2020  2].append(..    
-00012970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000128f0: 2020 2066 6c6f 775f 6461 7461 5b22 4b41     flow_data["KA
+00012900: 225d 5b22 ce94 2025 7322 2025 206e 616d  "][".. %s" % nam
+00012910: 655d 5b61 6765 6e74 315d 2e61 7070 656e  e][agent1].appen
+00012920: 6428 0d0a 2020 2020 2020 2020 2020 2020  d(..            
+00012930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012950: 2020 2020 2228 2220 2b20 7369 676e 202b      "(" + sign +
+00012960: 2071 7561 6e74 6974 7920 2b20 2229 2229   quantity + ")")
+00012970: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 00012980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012990: 2020 2020 2020 2020 2020 2020 2228 2220              "(" 
-000129a0: 2b20 7369 676e 202b 2071 7561 6e74 6974  + sign + quantit
-000129b0: 7920 2b20 2229 2229 0d0a 0d0a 2020 2020  y + ")")....    
-000129c0: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-000129d0: 666c 6f77 5f64 6174 6129 0d0a 2020 2020  flow_data)..    
-000129e0: 2020 2020 2020 2020 6466 5f63 7265 6469          df_credi
-000129f0: 7420 3d20 7064 2e44 6174 6146 7261 6d65  t = pd.DataFrame
-00012a00: 2866 6c6f 775f 6461 7461 5b22 4341 225d  (flow_data["CA"]
-00012a10: 292e 540d 0a20 2020 2020 2020 2020 2020  ).T..           
-00012a20: 2064 665f 6361 7069 7461 6c20 3d20 7064   df_capital = pd
-00012a30: 2e44 6174 6146 7261 6d65 2866 6c6f 775f  .DataFrame(flow_
-00012a40: 6461 7461 5b22 4b41 225d 292e 540d 0a0d  data["KA"]).T...
-00012a50: 0a20 2020 2020 2020 2020 2020 2064 665f  .            df_
-00012a60: 6d65 7267 6520 3d20 7064 2e63 6f6e 6361  merge = pd.conca
-00012a70: 7428 5b64 665f 6372 6564 6974 2c20 6466  t([df_credit, df
-00012a80: 5f63 6170 6974 616c 5d2c 2061 7869 733d  _capital], axis=
-00012a90: 312c 206b 6579 733d 5b27 4341 272c 2027  1, keys=['CA', '
-00012aa0: 4b41 275d 292e 7377 6170 6c65 7665 6c28  KA']).swaplevel(
-00012ab0: 302c 2031 2c61 7869 733d 3129 2e73 6f72  0, 1,axis=1).sor
-00012ac0: 745f 696e 6465 7828 6178 6973 3d31 290d  t_index(axis=1).
-00012ad0: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00012ae0: 2023 2061 7070 656e 6420 6e65 7720 636f   # append new co
-00012af0: 6c75 6d6e 730d 0a20 2020 2020 2020 2020  lumns..         
-00012b00: 2020 2063 6f6c 5f64 6963 745f 6361 203d     col_dict_ca =
-00012b10: 207b 7d0d 0a20 2020 2020 2020 2020 2020   {}..           
-00012b20: 2066 6f72 2063 6f6c 2069 6e20 6466 5f63   for col in df_c
-00012b30: 7265 6469 742e 636f 6c75 6d6e 733a 0d0a  redit.columns:..
-00012b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012b50: 636f 6c5f 6469 6374 5f63 615b 636f 6c5d  col_dict_ca[col]
-00012b60: 203d 2063 6f6c 202b 2022 2028 4341 2922   = col + " (CA)"
-00012b70: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00012b80: 636f 6c5f 6469 6374 5f6b 6120 3d20 7b7d  col_dict_ka = {}
-00012b90: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-00012ba0: 7220 636f 6c20 696e 2064 665f 6361 7069  r col in df_capi
-00012bb0: 7461 6c2e 636f 6c75 6d6e 733a 0d0a 2020  tal.columns:..  
-00012bc0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00012bd0: 6c5f 6469 6374 5f6b 615b 636f 6c5d 203d  l_dict_ka[col] =
-00012be0: 2063 6f6c 202b 2022 2028 4b41 2922 0d0a   col + " (KA)"..
-00012bf0: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
-00012c00: 5f63 7265 6469 7420 3d20 6466 5f63 7265  _credit = df_cre
-00012c10: 6469 742e 7265 6e61 6d65 2863 6f6c 756d  dit.rename(colum
-00012c20: 6e73 203d 2063 6f6c 5f64 6963 745f 6361  ns = col_dict_ca
-00012c30: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
-00012c40: 665f 6361 7069 7461 6c20 3d20 6466 5f63  f_capital = df_c
-00012c50: 6170 6974 616c 2e72 656e 616d 6528 636f  apital.rename(co
-00012c60: 6c75 6d6e 733d 636f 6c5f 6469 6374 5f6b  lumns=col_dict_k
-00012c70: 6129 0d0a 0d0a 2020 2020 2020 2020 2020  a)....          
-00012c80: 2020 6466 5f6d 6572 6765 3220 3d20 7064    df_merge2 = pd
-00012c90: 2e63 6f6e 6361 7428 5b64 665f 6372 6564  .concat([df_cred
-00012ca0: 6974 2c20 6466 5f63 6170 6974 616c 5d2c  it, df_capital],
-00012cb0: 2061 7869 733d 3129 0d0a 0d0a 2020 2020   axis=1)....    
-00012cc0: 2020 2020 2020 2020 6466 5f6d 6572 6765          df_merge
-00012cd0: 3220 3d20 6466 5f6d 6572 6765 322e 7265  2 = df_merge2.re
-00012ce0: 696e 6465 7828 736f 7274 6564 2864 665f  index(sorted(df_
-00012cf0: 6d65 7267 6532 2e63 6f6c 756d 6e73 292c  merge2.columns),
-00012d00: 2061 7869 733d 3129 0d0a 2020 2020 2020   axis=1)..      
-00012d10: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
-00012d20: 3d20 6466 5f6d 6572 6765 322e 7265 696e  = df_merge2.rein
-00012d30: 6465 7828 736f 7274 6564 2864 665f 6d65  dex(sorted(df_me
-00012d40: 7267 6532 2e69 6e64 6578 292c 2061 7869  rge2.index), axi
-00012d50: 733d 3029 0d0a 0d0a 2020 2020 2020 2020  s=0)....        
-00012d60: 2020 2020 6466 203d 2064 665f 6d65 7267      df = df_merg
-00012d70: 652e 6669 6c6c 6e61 2830 2e30 292e 736f  e.fillna(0.0).so
-00012d80: 7274 5f69 6e64 6578 2829 0d0a 0d0a 0d0a  rt_index()......
-00012d90: 2020 2020 2020 2020 2020 2020 6465 6620              def 
-00012da0: 6a6f 696e 5f65 6c65 6d65 6e74 7328 6d79  join_elements(my
-00012db0: 5f69 7465 6d29 3a0d 0a20 2020 2020 2020  _item):..       
-00012dc0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00012dd0: 7374 616e 6365 286d 795f 6974 656d 2c20  stance(my_item, 
-00012de0: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
-00012df0: 2020 2020 2020 2020 2020 2020 6d79 5f6c              my_l
-00012e00: 6973 7420 3d20 5b5d 0d0a 2020 2020 2020  ist = []..      
-00012e10: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00012e20: 7220 7375 6269 7465 6d20 696e 206d 795f  r subitem in my_
-00012e30: 6974 656d 3a0d 0a20 2020 2020 2020 2020  item:..         
-00012e40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00012e50: 6620 7375 6269 7465 6d20 213d 2022 3022  f subitem != "0"
-00012e60: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00012e70: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00012e80: 795f 6c69 7374 2e61 7070 656e 6428 7375  y_list.append(su
-00012e90: 6269 7465 6d29 0d0a 0d0a 2020 2020 2020  bitem)....      
-00012ea0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00012eb0: 7475 726e 2022 2b22 2e6a 6f69 6e28 6d79  turn "+".join(my
-00012ec0: 5f6c 6973 7429 0d0a 0d0a 2020 2020 2020  _list)....      
-00012ed0: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-00012ee0: 795f 6974 656d 203d 3d20 302e 303a 0d0a  y_item == 0.0:..
-00012ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012f00: 2020 2020 7265 7475 726e 2022 3022 0d0a      return "0"..
-00012f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012f20: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00012f30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00012f40: 6e20 6d79 5f69 7465 6d0d 0a0d 0a20 2020  n my_item....   
-00012f50: 2020 2020 2020 2020 2064 6620 3d20 6466           df = df
-00012f60: 2e61 7070 6c79 6d61 7028 6a6f 696e 5f65  .applymap(join_e
-00012f70: 6c65 6d65 6e74 7329 0d0a 0d0a 0d0a 0d0a  lements)........
-00012f80: 2020 2020 2020 2020 2020 2020 2320 7375              # su
-00012f90: 6d20 6f76 6572 2074 6865 2063 6f6c 756d  m over the colum
-00012fa0: 6e73 0d0a 0d0a 2020 2020 2020 2020 2020  ns....          
-00012fb0: 2020 6465 6620 6576 616c 5f73 756d 2863    def eval_sum(c
-00012fc0: 6f6c 756d 6e29 3a0d 0a20 2020 2020 2020  olumn):..       
-00012fd0: 2020 2020 2020 2020 2063 6f6c 756d 6e20           column 
-00012fe0: 3d20 5b73 7472 2863 292e 7265 706c 6163  = [str(c).replac
-00012ff0: 6528 225e 222c 2022 2a2a 2229 2066 6f72  e("^", "**") for
-00013000: 2063 2069 6e20 636f 6c75 6d6e 5d0d 0a20   c in column].. 
-00013010: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00013020: 795f 6578 7072 203d 2022 2b22 2e6a 6f69  y_expr = "+".joi
-00013030: 6e28 636f 6c75 6d6e 290d 0a20 2020 2020  n(column)..     
-00013040: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-00013050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013060: 2020 2020 2072 6574 7572 6e20 7061 7273       return pars
-00013070: 655f 6578 7072 286d 795f 6578 7072 290d  e_expr(my_expr).
-00013080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013090: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
-000130a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000130b0: 7475 726e 206d 795f 6578 7072 0d0a 0d0a  turn my_expr....
-000130c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000130d0: 6466 5b22 546f 7461 6c22 5d20 3d20 6466  df["Total"] = df
-000130e0: 2e54 2e61 6767 2865 7661 6c5f 7375 6d29  .T.agg(eval_sum)
-000130f0: 2020 2320 6466 2e54 2e73 756d 2829 0d0a    # df.T.sum()..
-00013100: 2020 2020 2020 2020 2020 2020 6466 2e6c              df.l
-00013110: 6f63 5b22 546f 7461 6c22 5d20 3d20 6466  oc["Total"] = df
-00013120: 2e61 6767 2865 7661 6c5f 7375 6d29 0d0a  .agg(eval_sum)..
-00013130: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00013140: 7428 2254 4f54 414c 222c 6466 2e6c 6f63  t("TOTAL",df.loc
-00013150: 5b22 546f 7461 6c22 5d29 0d0a 2020 2020  ["Total"])..    
-00013160: 2020 2020 2020 2020 6466 5f6d 6572 6765          df_merge
-00013170: 325b 2254 6f74 616c 225d 203d 2064 665b  2["Total"] = df[
-00013180: 2254 6f74 616c 225d 0d0a 0d0a 2020 2020  "Total"]....    
-00013190: 2020 2020 2020 2020 2320 6765 7420 7468          # get th
-000131a0: 6520 6e65 7720 636f 6c75 6d6e 730d 0a0d  e new columns...
-000131b0: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
-000131c0: 7465 7261 7465 2074 6872 6f75 6768 2074  terate through t
-000131d0: 6865 2063 6f6c 756d 6e73 0d0a 2020 2020  he columns..    
-000131e0: 2020 2020 2020 2020 7072 696e 7428 6466          print(df
-000131f0: 2e63 6f6c 756d 6e73 290d 0a0d 0a0d 0a20  .columns)...... 
-00013200: 2020 2020 2020 2020 2020 2066 6f72 2063             for c
-00013210: 6f6c 756d 6e20 696e 2064 662e 636f 6c75  olumn in df.colu
-00013220: 6d6e 733a 0d0a 2020 2020 2020 2020 2020  mns:..          
-00013230: 2020 2020 2020 6966 2063 6f6c 756d 6e5b        if column[
-00013240: 305d 2021 3d20 2254 6f74 616c 223a 0d0a  0] != "Total":..
-00013250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013260: 2020 2020 7072 696e 7428 636f 6c75 6d6e      print(column
-00013270: 5b30 5d20 2b20 2220 2220 202b 2022 2825  [0] + " "  + "(%
-00013280: 7329 2220 2520 636f 6c75 6d6e 5b31 5d2c  s)" % column[1],
-00013290: 6466 2e6c 6f63 5b22 546f 7461 6c22 5d5b  df.loc["Total"][
-000132a0: 636f 6c75 6d6e 5d29 0d0a 2020 2020 2020  column])..      
-000132b0: 2020 2020 2020 2020 2020 2020 2020 6466                df
-000132c0: 5f6d 6572 6765 322e 6c6f 635b 2254 6f74  _merge2.loc["Tot
-000132d0: 616c 222c 636f 6c75 6d6e 5b30 5d20 2b20  al",column[0] + 
-000132e0: 2220 2220 202b 2022 2825 7329 2220 2520  " "  + "(%s)" % 
-000132f0: 636f 6c75 6d6e 5b31 5d5d 203d 2064 662e  column[1]] = df.
-00013300: 6c6f 635b 2254 6f74 616c 225d 5b63 6f6c  loc["Total"][col
-00013310: 756d 6e5d 0d0a 0d0a 0d0a 0d0a 2020 2020  umn]........    
-00013320: 2020 2020 2020 2020 6465 6620 7369 6d70          def simp
-00013330: 6c69 6679 5f65 7870 7228 6d79 5f69 7465  lify_expr(my_ite
-00013340: 6d29 3a0d 0a20 2020 2020 2020 2020 2020  m):..           
-00013350: 2020 2020 2072 6574 7572 6e20 7369 6d70       return simp
-00013360: 6c69 6679 286d 795f 6974 656d 290d 0a0d  lify(my_item)...
-00013370: 0a20 2020 2020 2020 2020 2020 2064 6620  .            df 
-00013380: 3d20 6466 2e61 7070 6c79 6d61 7028 7369  = df.applymap(si
-00013390: 6d70 6c69 6679 5f65 7870 7229 0d0a 0d0a  mplify_expr)....
-000133a0: 2020 2020 2020 2020 2020 2020 6466 5f66              df_f
-000133b0: 6f72 5f65 7863 656c 203d 2064 662e 636f  or_excel = df.co
-000133c0: 7079 2829 0d0a 0d0a 0d0a 0d0a 2020 2020  py()........    
-000133d0: 2020 2020 2020 2020 6465 6620 6162 6272          def abbr
-000133e0: 6576 6961 7465 5f7a 6572 6f73 5f6c 6174  eviate_zeros_lat
-000133f0: 6578 286d 795f 6974 656d 293a 0d0a 2020  ex(my_item):..  
-00013400: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00013410: 206d 795f 6974 656d 203d 3d20 2230 2220   my_item == "0" 
-00013420: 6f72 206d 795f 6974 656d 203d 3d20 303a  or my_item == 0:
-00013430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013440: 2020 2020 2020 7265 7475 726e 2022 202e        return " .
-00013450: 2d20 2220 2023 202e 2d20 220d 0a20 2020  - "  # .- "..   
-00013460: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00013470: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00013480: 2020 2020 2020 2020 7320 3d20 7072 696e          s = prin
-00013490: 7469 6e67 2e6c 6174 6578 286d 795f 6974  ting.latex(my_it
-000134a0: 656d 202c 6d6f 6465 3d22 696e 6c69 6e65  em ,mode="inline
-000134b0: 2229 2023 2020 6d6f 6465 3d22 696e 6c69  ") #  mode="inli
-000134c0: 6e65 2229 0d0a 2020 2020 2020 2020 2020  ne")..          
-000134d0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-000134e0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-000134f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00013500: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00013510: 2364 665f 6261 636b 7570 203d 2064 662e  #df_backup = df.
-00013520: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
-00013530: 2020 2020 6466 203d 2064 662e 6170 706c      df = df.appl
-00013540: 796d 6170 2861 6262 7265 7669 6174 655f  ymap(abbreviate_
-00013550: 7a65 726f 735f 6c61 7465 7829 0d0a 0d0a  zeros_latex)....
-00013560: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00013570: 6466 5f6d 6572 6765 3220 3d20 6466 5f6d  df_merge2 = df_m
-00013580: 6572 6765 322e 7265 706c 6163 6528 6e70  erge2.replace(np
-00013590: 2e6e 616e 2c20 2727 2c20 7265 6765 783d  .nan, '', regex=
-000135a0: 5472 7565 290d 0a20 2020 2020 2020 2020  True)..         
-000135b0: 2020 2064 665f 6d65 7267 6532 203d 2064     df_merge2 = d
-000135c0: 665f 6d65 7267 6532 2e72 6570 6c61 6365  f_merge2.replace
-000135d0: 2822 3022 2c20 2727 2c20 7265 6765 783d  ("0", '', regex=
-000135e0: 5472 7565 290d 0a20 2020 2020 2020 2020  True)..         
-000135f0: 2020 2064 665f 6d65 7267 6532 203d 2064     df_merge2 = d
-00013600: 665f 6d65 7267 6532 2e72 6570 6c61 6365  f_merge2.replace
-00013610: 2830 2c20 2727 2c20 7265 6765 783d 5472  (0, '', regex=Tr
-00013620: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
-00013630: 2064 665f 6d65 7267 6532 203d 2064 665f   df_merge2 = df_
-00013640: 6d65 7267 6532 2e72 6570 6c61 6365 2830  merge2.replace(0
-00013650: 2e30 2c20 2727 2c20 7265 6765 783d 5472  .0, '', regex=Tr
-00013660: 7565 290d 0a0d 0a20 2020 2020 2020 2020  ue)....         
-00013670: 2020 2023 2070 7269 6e74 2864 662e 746f     # print(df.to
-00013680: 5f73 7472 696e 6728 2929 0d0a 2020 2020  _string())..    
-00013690: 2020 2020 2020 2020 2320 6466 2e69 6c6f          # df.ilo
-000136a0: 635b 302c 305d 203d 2022 245c 5c61 6c70  c[0,0] = "$\\alp
-000136b0: 6861 2422 0d0a 0d0a 2020 2020 2020 2020  ha$"....        
-000136c0: 2020 2020 7064 2e6f 7074 696f 6e73 2e64      pd.options.d
-000136d0: 6973 706c 6179 2e6d 6178 5f63 6f6c 7769  isplay.max_colwi
-000136e0: 6474 6820 3d20 4e6f 6e65 0d0a 0d0a 2020  dth = None....  
-000136f0: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
-00013700: 6520 3d3d 2022 6874 6d6c 223a 2023 203c  e == "html": # <
-00013710: 204e 4f54 2059 4554 2053 5550 504f 5254   NOT YET SUPPORT
-00013720: 4544 0d0a 0d0a 2020 2020 2020 2020 2020  ED....          
-00013730: 2020 2020 2020 6466 5f68 746d 6c20 3d20        df_html = 
-00013740: 2222 220d 0a20 2020 2020 2020 203c 6874  """..        <ht
-00013750: 6d6c 3e0d 0a20 2020 2020 2020 203c 6865  ml>..        <he
-00013760: 6164 3e0d 0a20 2020 2020 2020 203c 7469  ad>..        <ti
-00013770: 746c 653e 4d61 7468 6564 656d 6f3c 2f74  tle>Mathedemo</t
-00013780: 6974 6c65 3e0d 0a20 2020 2020 2020 203c  itle>..        <
-00013790: 7363 7269 7074 2074 7970 653d 2274 6578  script type="tex
-000137a0: 742f 782d 6d61 7468 6a61 782d 636f 6e66  t/x-mathjax-conf
-000137b0: 6967 223e 0d0a 2020 2020 2020 2020 2020  ig">..          
-000137c0: 4d61 7468 4a61 782e 4875 622e 436f 6e66  MathJax.Hub.Conf
-000137d0: 6967 287b 7465 7832 6a61 783a 207b 696e  ig({tex2jax: {in
-000137e0: 6c69 6e65 4d61 7468 3a20 5b5b 2724 272c  lineMath: [['$',
-000137f0: 2724 275d 2c20 5b27 5c5c 2827 2c27 5c5c  '$'], ['\\(','\\
-00013800: 2927 5d5d 7d7d 293b 0d0a 2020 2020 2020  )']]}});..      
-00013810: 2020 3c2f 7363 7269 7074 3e0d 0a20 2020    </script>..   
-00013820: 2020 2020 203c 7363 7269 7074 2074 7970       <script typ
-00013830: 653d 2274 6578 742f 6a61 7661 7363 7269  e="text/javascri
-00013840: 7074 220d 0a20 2020 2020 2020 2020 2073  pt"..          s
-00013850: 7263 3d22 6874 7470 3a2f 2f63 646e 6a73  rc="http://cdnjs
-00013860: 2e63 6c6f 7564 666c 6172 652e 636f 6d2f  .cloudflare.com/
-00013870: 616a 6178 2f6c 6962 732f 6d61 7468 6a61  ajax/libs/mathja
-00013880: 782f 322e 372e 312f 4d61 7468 4a61 782e  x/2.7.1/MathJax.
-00013890: 6a73 3f63 6f6e 6669 673d 5465 582d 414d  js?config=TeX-AM
-000138a0: 532d 4d4d 4c5f 4854 4d4c 6f72 4d4d 4c22  S-MML_HTMLorMML"
-000138b0: 3e0d 0a20 2020 2020 2020 203c 2f73 6372  >..        </scr
-000138c0: 6970 743e 0d0a 2020 2020 2020 2020 3c6c  ipt>..        <l
-000138d0: 696e 6b20 7265 6c3d 2273 7479 6c65 7368  ink rel="stylesh
-000138e0: 6565 7422 2068 7265 663d 226d 7973 7479  eet" href="mysty
-000138f0: 6c65 2e63 7373 223e 0d0a 2020 2020 2020  le.css">..      
-00013900: 2020 3c2f 6865 6164 3e0d 0a0d 0a20 2020    </head>....   
-00013910: 2020 2020 203c 626f 6479 3e0d 0a20 2020       <body>..   
-00013920: 2020 2020 2025 730d 0a20 2020 2020 2020       %s..       
-00013930: 203c 2f62 6f64 793e 0d0a 2020 2020 2020   </body>..      
-00013940: 2020 3c2f 6874 6d6c 3e0d 0a20 2020 2020    </html>..     
-00013950: 2020 2022 2222 2520 2064 662e 746f 5f68     """%  df.to_h
-00013960: 746d 6c28 290d 0a0d 0a20 2020 2020 2020  tml()....       
-00013970: 2020 2020 2020 2020 2070 6167 6553 6f75           pageSou
-00013980: 7263 6520 3d20 2222 220d 0a20 2020 2020  rce = """..     
-00013990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000139a0: 2020 2020 2020 2020 3c68 746d 6c3e 3c68          <html><h
-000139b0: 6561 643e 0d0a 2020 2020 2020 2020 2020  ead>..          
-000139c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000139d0: 2020 203c 2f68 6561 643e 0d0a 2020 2020     </head>..    
-000139e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000139f0: 2020 2020 2020 2020 203c 626f 6479 3e0d           <body>.
-00013a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013a10: 2020 2020 2020 2020 2020 2020 2020 3c70                <p
-00013a20: 3e61 7364 663c 2f70 3e0d 0a20 2020 2020  >asdf</p>..     
-00013a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a40: 2020 2020 2020 2020 3c2f 626f 6479 3e3c          </body><
-00013a50: 2f68 746d 6c3e 0d0a 2020 2020 2020 2020  /html>..        
-00013a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a70: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
-00013a80: 2020 2020 2020 2020 2020 2020 2320 424c              # BL
-00013a90: 410d 0a0d 0a20 2020 2020 2020 2020 2020  A....           
-00013aa0: 2020 2020 2023 2077 7269 7465 2070 6167       # write pag
-00013ab0: 6520 736f 7572 6365 2074 6f20 6874 6d6c  e source to html
-00013ac0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013ad0: 2020 6966 2046 616c 7365 3a0d 0a20 2020    if False:..   
-00013ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013af0: 2023 2044 4550 5245 4349 4154 4544 0d0a   # DEPRECIATED..
-00013b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013b10: 2020 2020 7061 7468 203d 206f 732e 7061      path = os.pa
-00013b20: 7468 2e64 6972 6e61 6d65 286f 732e 7061  th.dirname(os.pa
-00013b30: 7468 2e61 6273 7061 7468 285f 5f66 696c  th.abspath(__fil
-00013b40: 655f 5f29 290d 0a20 2020 2020 2020 2020  e__))..         
-00013b50: 2020 2020 2020 2020 2020 2066 696c 6520             file 
-00013b60: 3d20 6f70 656e 286f 732e 7061 7468 2e6a  = open(os.path.j
-00013b70: 6f69 6e28 7061 7468 2c22 6669 6c65 732f  oin(path,"files/
-00013b80: 6d79 6d61 7472 6978 2e68 746d 6c22 292c  mymatrix.html"),
-00013b90: 2277 222c 656e 636f 6469 6e67 3d27 7574  "w",encoding='ut
-00013ba0: 662d 3827 290d 0a20 2020 2020 2020 2020  f-8')..         
-00013bb0: 2020 2020 2020 2020 2020 2066 696c 652e             file.
-00013bc0: 7772 6974 6528 6466 5f68 746d 6c29 0d0a  write(df_html)..
+00012990: 2020 2020 666f 7220 6974 656d 5f6e 616d      for item_nam
+000129a0: 6520 696e 206c 322e 7370 6c69 7428 225c  e in l2.split("\
+000129b0: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+000129c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000129d0: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
+000129e0: 6d5f 6e61 6d65 2021 3d20 2222 3a0d 0a20  m_name != "":.. 
+000129f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a10: 2020 2020 2020 206e 616d 6520 3d20 6974         name = it
+00012a20: 656d 5f6e 616d 655b 313a 5d2e 7374 7269  em_name[1:].stri
+00012a30: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+00012a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a50: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+00012a60: 6e20 3d20 6974 656d 5f6e 616d 655b 305d  n = item_name[0]
+00012a70: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00012a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a90: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00012aa0: 6f74 2022 2873 2922 2069 6e20 6e61 6d65  ot "(s)" in name
+00012ab0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ad0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00012ae0: 6c6f 775f 6461 7461 5b22 4b41 225d 5b22  low_data["KA"]["
+00012af0: ce94 2025 7322 2025 206e 616d 655d 5b61  .. %s" % name][a
+00012b00: 6765 6e74 325d 2e61 7070 656e 6428 0d0a  gent2].append(..
+00012b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b40: 2228 2220 2b20 7369 676e 202b 2071 7561  "(" + sign + qua
+00012b50: 6e74 6974 7920 2b20 2229 2229 0d0a 0d0a  ntity + ")")....
+00012b60: 2020 2020 2020 2020 2020 2020 2320 7072              # pr
+00012b70: 696e 7428 666c 6f77 5f64 6174 6129 0d0a  int(flow_data)..
+00012b80: 2020 2020 2020 2020 2020 2020 6466 5f63              df_c
+00012b90: 7265 6469 7420 3d20 7064 2e44 6174 6146  redit = pd.DataF
+00012ba0: 7261 6d65 2866 6c6f 775f 6461 7461 5b22  rame(flow_data["
+00012bb0: 4341 225d 292e 540d 0a20 2020 2020 2020  CA"]).T..       
+00012bc0: 2020 2020 2064 665f 6361 7069 7461 6c20       df_capital 
+00012bd0: 3d20 7064 2e44 6174 6146 7261 6d65 2866  = pd.DataFrame(f
+00012be0: 6c6f 775f 6461 7461 5b22 4b41 225d 292e  low_data["KA"]).
+00012bf0: 540d 0a0d 0a20 2020 2020 2020 2020 2020  T....           
+00012c00: 2064 665f 6d65 7267 6520 3d20 7064 2e63   df_merge = pd.c
+00012c10: 6f6e 6361 7428 5b64 665f 6372 6564 6974  oncat([df_credit
+00012c20: 2c20 6466 5f63 6170 6974 616c 5d2c 2061  , df_capital], a
+00012c30: 7869 733d 312c 206b 6579 733d 5b27 4341  xis=1, keys=['CA
+00012c40: 272c 2027 4b41 275d 292e 7377 6170 6c65  ', 'KA']).swaple
+00012c50: 7665 6c28 302c 2031 2c61 7869 733d 3129  vel(0, 1,axis=1)
+00012c60: 2e73 6f72 745f 696e 6465 7828 6178 6973  .sort_index(axis
+00012c70: 3d31 290d 0a0d 0a0d 0a20 2020 2020 2020  =1)......       
+00012c80: 2020 2020 2023 2061 7070 656e 6420 6e65       # append ne
+00012c90: 7720 636f 6c75 6d6e 730d 0a20 2020 2020  w columns..     
+00012ca0: 2020 2020 2020 2063 6f6c 5f64 6963 745f         col_dict_
+00012cb0: 6361 203d 207b 7d0d 0a20 2020 2020 2020  ca = {}..       
+00012cc0: 2020 2020 2066 6f72 2063 6f6c 2069 6e20       for col in 
+00012cd0: 6466 5f63 7265 6469 742e 636f 6c75 6d6e  df_credit.column
+00012ce0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00012cf0: 2020 2020 636f 6c5f 6469 6374 5f63 615b      col_dict_ca[
+00012d00: 636f 6c5d 203d 2063 6f6c 202b 2022 2028  col] = col + " (
+00012d10: 4341 2922 0d0a 0d0a 2020 2020 2020 2020  CA)"....        
+00012d20: 2020 2020 636f 6c5f 6469 6374 5f6b 6120      col_dict_ka 
+00012d30: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
+00012d40: 2020 666f 7220 636f 6c20 696e 2064 665f    for col in df_
+00012d50: 6361 7069 7461 6c2e 636f 6c75 6d6e 733a  capital.columns:
+00012d60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012d70: 2020 636f 6c5f 6469 6374 5f6b 615b 636f    col_dict_ka[co
+00012d80: 6c5d 203d 2063 6f6c 202b 2022 2028 4b41  l] = col + " (KA
+00012d90: 2922 0d0a 0d0a 2020 2020 2020 2020 2020  )"....          
+00012da0: 2020 6466 5f63 7265 6469 7420 3d20 6466    df_credit = df
+00012db0: 5f63 7265 6469 742e 7265 6e61 6d65 2863  _credit.rename(c
+00012dc0: 6f6c 756d 6e73 203d 2063 6f6c 5f64 6963  olumns = col_dic
+00012dd0: 745f 6361 290d 0a20 2020 2020 2020 2020  t_ca)..         
+00012de0: 2020 2064 665f 6361 7069 7461 6c20 3d20     df_capital = 
+00012df0: 6466 5f63 6170 6974 616c 2e72 656e 616d  df_capital.renam
+00012e00: 6528 636f 6c75 6d6e 733d 636f 6c5f 6469  e(columns=col_di
+00012e10: 6374 5f6b 6129 0d0a 0d0a 2020 2020 2020  ct_ka)....      
+00012e20: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
+00012e30: 3d20 7064 2e63 6f6e 6361 7428 5b64 665f  = pd.concat([df_
+00012e40: 6372 6564 6974 2c20 6466 5f63 6170 6974  credit, df_capit
+00012e50: 616c 5d2c 2061 7869 733d 3129 0d0a 0d0a  al], axis=1)....
+00012e60: 2020 2020 2020 2020 2020 2020 6466 5f6d              df_m
+00012e70: 6572 6765 3220 3d20 6466 5f6d 6572 6765  erge2 = df_merge
+00012e80: 322e 7265 696e 6465 7828 736f 7274 6564  2.reindex(sorted
+00012e90: 2864 665f 6d65 7267 6532 2e63 6f6c 756d  (df_merge2.colum
+00012ea0: 6e73 292c 2061 7869 733d 3129 0d0a 2020  ns), axis=1)..  
+00012eb0: 2020 2020 2020 2020 2020 6466 5f6d 6572            df_mer
+00012ec0: 6765 3220 3d20 6466 5f6d 6572 6765 322e  ge2 = df_merge2.
+00012ed0: 7265 696e 6465 7828 736f 7274 6564 2864  reindex(sorted(d
+00012ee0: 665f 6d65 7267 6532 2e69 6e64 6578 292c  f_merge2.index),
+00012ef0: 2061 7869 733d 3029 0d0a 0d0a 2020 2020   axis=0)....    
+00012f00: 2020 2020 2020 2020 6466 203d 2064 665f          df = df_
+00012f10: 6d65 7267 652e 6669 6c6c 6e61 2830 2e30  merge.fillna(0.0
+00012f20: 292e 736f 7274 5f69 6e64 6578 2829 0d0a  ).sort_index()..
+00012f30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00012f40: 6465 6620 6a6f 696e 5f65 6c65 6d65 6e74  def join_element
+00012f50: 7328 6d79 5f69 7465 6d29 3a0d 0a20 2020  s(my_item):..   
+00012f60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00012f70: 6973 696e 7374 616e 6365 286d 795f 6974  isinstance(my_it
+00012f80: 656d 2c20 6c69 7374 293a 0d0a 2020 2020  em, list):..    
+00012f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fa0: 6d79 5f6c 6973 7420 3d20 5b5d 0d0a 2020  my_list = []..  
+00012fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fc0: 2020 666f 7220 7375 6269 7465 6d20 696e    for subitem in
+00012fd0: 206d 795f 6974 656d 3a0d 0a20 2020 2020   my_item:..     
+00012fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ff0: 2020 2069 6620 7375 6269 7465 6d20 213d     if subitem !=
+00013000: 2022 3022 3a0d 0a20 2020 2020 2020 2020   "0":..         
+00013010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013020: 2020 206d 795f 6c69 7374 2e61 7070 656e     my_list.appen
+00013030: 6428 7375 6269 7465 6d29 0d0a 0d0a 2020  d(subitem)....  
+00013040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013050: 2020 7265 7475 726e 2022 2b22 2e6a 6f69    return "+".joi
+00013060: 6e28 6d79 5f6c 6973 7429 0d0a 0d0a 2020  n(my_list)....  
+00013070: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00013080: 6966 206d 795f 6974 656d 203d 3d20 302e  if my_item == 0.
+00013090: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+000130a0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+000130b0: 3022 0d0a 2020 2020 2020 2020 2020 2020  0"..            
+000130c0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000130d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000130e0: 6574 7572 6e20 6d79 5f69 7465 6d0d 0a0d  eturn my_item...
+000130f0: 0a20 2020 2020 2020 2020 2020 2064 6620  .            df 
+00013100: 3d20 6466 2e61 7070 6c79 6d61 7028 6a6f  = df.applymap(jo
+00013110: 696e 5f65 6c65 6d65 6e74 7329 0d0a 0d0a  in_elements)....
+00013120: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00013130: 2320 7375 6d20 6f76 6572 2074 6865 2063  # sum over the c
+00013140: 6f6c 756d 6e73 0d0a 0d0a 2020 2020 2020  olumns....      
+00013150: 2020 2020 2020 6465 6620 6576 616c 5f73        def eval_s
+00013160: 756d 2863 6f6c 756d 6e29 3a0d 0a20 2020  um(column):..   
+00013170: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+00013180: 756d 6e20 3d20 5b73 7472 2863 292e 7265  umn = [str(c).re
+00013190: 706c 6163 6528 225e 222c 2022 2a2a 2229  place("^", "**")
+000131a0: 2066 6f72 2063 2069 6e20 636f 6c75 6d6e   for c in column
+000131b0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+000131c0: 2020 206d 795f 6578 7072 203d 2022 2b22     my_expr = "+"
+000131d0: 2e6a 6f69 6e28 636f 6c75 6d6e 290d 0a20  .join(column).. 
+000131e0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000131f0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00013200: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00013210: 7061 7273 655f 6578 7072 286d 795f 6578  parse_expr(my_ex
+00013220: 7072 290d 0a20 2020 2020 2020 2020 2020  pr)..           
+00013230: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
+00013240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013250: 2020 7265 7475 726e 206d 795f 6578 7072    return my_expr
+00013260: 0d0a 0d0a 0d0a 0d0a 2020 2020 2020 2020  ........        
+00013270: 2020 2020 6466 5b22 546f 7461 6c22 5d20      df["Total"] 
+00013280: 3d20 6466 2e54 2e61 6767 2865 7661 6c5f  = df.T.agg(eval_
+00013290: 7375 6d29 2020 2320 6466 2e54 2e73 756d  sum)  # df.T.sum
+000132a0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+000132b0: 6466 2e6c 6f63 5b22 546f 7461 6c22 5d20  df.loc["Total"] 
+000132c0: 3d20 6466 2e61 6767 2865 7661 6c5f 7375  = df.agg(eval_su
+000132d0: 6d29 0d0a 2020 2020 2020 2020 2020 2020  m)..            
+000132e0: 7072 696e 7428 2254 4f54 414c 222c 6466  print("TOTAL",df
+000132f0: 2e6c 6f63 5b22 546f 7461 6c22 5d29 0d0a  .loc["Total"])..
+00013300: 2020 2020 2020 2020 2020 2020 6466 5f6d              df_m
+00013310: 6572 6765 325b 2254 6f74 616c 225d 203d  erge2["Total"] =
+00013320: 2064 665b 2254 6f74 616c 225d 0d0a 0d0a   df["Total"]....
+00013330: 2020 2020 2020 2020 2020 2020 2320 6765              # ge
+00013340: 7420 7468 6520 6e65 7720 636f 6c75 6d6e  t the new column
+00013350: 730d 0a0d 0a20 2020 2020 2020 2020 2020  s....           
+00013360: 2023 2069 7465 7261 7465 2074 6872 6f75   # iterate throu
+00013370: 6768 2074 6865 2063 6f6c 756d 6e73 0d0a  gh the columns..
+00013380: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00013390: 7428 6466 2e63 6f6c 756d 6e73 290d 0a0d  t(df.columns)...
+000133a0: 0a0d 0a20 2020 2020 2020 2020 2020 2066  ...            f
+000133b0: 6f72 2063 6f6c 756d 6e20 696e 2064 662e  or column in df.
+000133c0: 636f 6c75 6d6e 733a 0d0a 2020 2020 2020  columns:..      
+000133d0: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
+000133e0: 756d 6e5b 305d 2021 3d20 2254 6f74 616c  umn[0] != "Total
+000133f0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00013400: 2020 2020 2020 2020 7072 696e 7428 636f          print(co
+00013410: 6c75 6d6e 5b30 5d20 2b20 2220 2220 202b  lumn[0] + " "  +
+00013420: 2022 2825 7329 2220 2520 636f 6c75 6d6e   "(%s)" % column
+00013430: 5b31 5d2c 6466 2e6c 6f63 5b22 546f 7461  [1],df.loc["Tota
+00013440: 6c22 5d5b 636f 6c75 6d6e 5d29 0d0a 2020  l"][column])..  
+00013450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013460: 2020 6466 5f6d 6572 6765 322e 6c6f 635b    df_merge2.loc[
+00013470: 2254 6f74 616c 222c 636f 6c75 6d6e 5b30  "Total",column[0
+00013480: 5d20 2b20 2220 2220 202b 2022 2825 7329  ] + " "  + "(%s)
+00013490: 2220 2520 636f 6c75 6d6e 5b31 5d5d 203d  " % column[1]] =
+000134a0: 2064 662e 6c6f 635b 2254 6f74 616c 225d   df.loc["Total"]
+000134b0: 5b63 6f6c 756d 6e5d 0d0a 0d0a 0d0a 0d0a  [column]........
+000134c0: 2020 2020 2020 2020 2020 2020 6465 6620              def 
+000134d0: 7369 6d70 6c69 6679 5f65 7870 7228 6d79  simplify_expr(my
+000134e0: 5f69 7465 6d29 3a0d 0a20 2020 2020 2020  _item):..       
+000134f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00013500: 7369 6d70 6c69 6679 286d 795f 6974 656d  simplify(my_item
+00013510: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00013520: 2064 6620 3d20 6466 2e61 7070 6c79 6d61   df = df.applyma
+00013530: 7028 7369 6d70 6c69 6679 5f65 7870 7229  p(simplify_expr)
+00013540: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00013550: 6466 5f66 6f72 5f65 7863 656c 203d 2064  df_for_excel = d
+00013560: 662e 636f 7079 2829 0d0a 0d0a 0d0a 0d0a  f.copy()........
+00013570: 2020 2020 2020 2020 2020 2020 6465 6620              def 
+00013580: 6162 6272 6576 6961 7465 5f7a 6572 6f73  abbreviate_zeros
+00013590: 5f6c 6174 6578 286d 795f 6974 656d 293a  _latex(my_item):
+000135a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000135b0: 2020 6966 206d 795f 6974 656d 203d 3d20    if my_item == 
+000135c0: 2230 2220 6f72 206d 795f 6974 656d 203d  "0" or my_item =
+000135d0: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
+000135e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000135f0: 2022 202e 2d20 2220 2023 202e 2d20 220d   " .- "  # .- ".
+00013600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013610: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00013620: 2020 2020 2020 2020 2020 2020 7320 3d20              s = 
+00013630: 7072 696e 7469 6e67 2e6c 6174 6578 286d  printing.latex(m
+00013640: 795f 6974 656d 202c 6d6f 6465 3d22 696e  y_item ,mode="in
+00013650: 6c69 6e65 2229 2023 2020 6d6f 6465 3d22  line") #  mode="
+00013660: 696e 6c69 6e65 2229 0d0a 2020 2020 2020  inline")..      
+00013670: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00013680: 696e 7428 7329 0d0a 2020 2020 2020 2020  int(s)..        
+00013690: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000136a0: 726e 2073 0d0a 0d0a 2020 2020 2020 2020  rn s....        
+000136b0: 2020 2020 2364 665f 6261 636b 7570 203d      #df_backup =
+000136c0: 2064 662e 636f 7079 2829 0d0a 2020 2020   df.copy()..    
+000136d0: 2020 2020 2020 2020 6466 203d 2064 662e          df = df.
+000136e0: 6170 706c 796d 6170 2861 6262 7265 7669  applymap(abbrevi
+000136f0: 6174 655f 7a65 726f 735f 6c61 7465 7829  ate_zeros_latex)
+00013700: 0d0a 0d0a 0d0a 0d0a 2020 2020 2020 2020  ........        
+00013710: 2020 2020 6466 5f6d 6572 6765 3220 3d20      df_merge2 = 
+00013720: 6466 5f6d 6572 6765 322e 7265 706c 6163  df_merge2.replac
+00013730: 6528 6e70 2e6e 616e 2c20 2727 2c20 7265  e(np.nan, '', re
+00013740: 6765 783d 5472 7565 290d 0a20 2020 2020  gex=True)..     
+00013750: 2020 2020 2020 2064 665f 6d65 7267 6532         df_merge2
+00013760: 203d 2064 665f 6d65 7267 6532 2e72 6570   = df_merge2.rep
+00013770: 6c61 6365 2822 3022 2c20 2727 2c20 7265  lace("0", '', re
+00013780: 6765 783d 5472 7565 290d 0a20 2020 2020  gex=True)..     
+00013790: 2020 2020 2020 2064 665f 6d65 7267 6532         df_merge2
+000137a0: 203d 2064 665f 6d65 7267 6532 2e72 6570   = df_merge2.rep
+000137b0: 6c61 6365 2830 2c20 2727 2c20 7265 6765  lace(0, '', rege
+000137c0: 783d 5472 7565 290d 0a20 2020 2020 2020  x=True)..       
+000137d0: 2020 2020 2064 665f 6d65 7267 6532 203d       df_merge2 =
+000137e0: 2064 665f 6d65 7267 6532 2e72 6570 6c61   df_merge2.repla
+000137f0: 6365 2830 2e30 2c20 2727 2c20 7265 6765  ce(0.0, '', rege
+00013800: 783d 5472 7565 290d 0a0d 0a20 2020 2020  x=True)....     
+00013810: 2020 2020 2020 2023 2070 7269 6e74 2864         # print(d
+00013820: 662e 746f 5f73 7472 696e 6728 2929 0d0a  f.to_string())..
+00013830: 2020 2020 2020 2020 2020 2020 2320 6466              # df
+00013840: 2e69 6c6f 635b 302c 305d 203d 2022 245c  .iloc[0,0] = "$\
+00013850: 5c61 6c70 6861 2422 0d0a 0d0a 2020 2020  \alpha$"....    
+00013860: 2020 2020 2020 2020 7064 2e6f 7074 696f          pd.optio
+00013870: 6e73 2e64 6973 706c 6179 2e6d 6178 5f63  ns.display.max_c
+00013880: 6f6c 7769 6474 6820 3d20 4e6f 6e65 0d0a  olwidth = None..
+00013890: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000138a0: 206d 6f64 6520 3d3d 2022 6874 6d6c 223a   mode == "html":
+000138b0: 2023 203c 204e 4f54 2059 4554 2053 5550   # < NOT YET SUP
+000138c0: 504f 5254 4544 0d0a 0d0a 2020 2020 2020  PORTED....      
+000138d0: 2020 2020 2020 2020 2020 6466 5f68 746d            df_htm
+000138e0: 6c20 3d20 2222 220d 0a20 2020 2020 2020  l = """..       
+000138f0: 203c 6874 6d6c 3e0d 0a20 2020 2020 2020   <html>..       
+00013900: 203c 6865 6164 3e0d 0a20 2020 2020 2020   <head>..       
+00013910: 203c 7469 746c 653e 4d61 7468 6564 656d   <title>Mathedem
+00013920: 6f3c 2f74 6974 6c65 3e0d 0a20 2020 2020  o</title>..     
+00013930: 2020 203c 7363 7269 7074 2074 7970 653d     <script type=
+00013940: 2274 6578 742f 782d 6d61 7468 6a61 782d  "text/x-mathjax-
+00013950: 636f 6e66 6967 223e 0d0a 2020 2020 2020  config">..      
+00013960: 2020 2020 4d61 7468 4a61 782e 4875 622e      MathJax.Hub.
+00013970: 436f 6e66 6967 287b 7465 7832 6a61 783a  Config({tex2jax:
+00013980: 207b 696e 6c69 6e65 4d61 7468 3a20 5b5b   {inlineMath: [[
+00013990: 2724 272c 2724 275d 2c20 5b27 5c5c 2827  '$','$'], ['\\('
+000139a0: 2c27 5c5c 2927 5d5d 7d7d 293b 0d0a 2020  ,'\\)']]}});..  
+000139b0: 2020 2020 2020 3c2f 7363 7269 7074 3e0d        </script>.
+000139c0: 0a20 2020 2020 2020 203c 7363 7269 7074  .        <script
+000139d0: 2074 7970 653d 2274 6578 742f 6a61 7661   type="text/java
+000139e0: 7363 7269 7074 220d 0a20 2020 2020 2020  script"..       
+000139f0: 2020 2073 7263 3d22 6874 7470 3a2f 2f63     src="http://c
+00013a00: 646e 6a73 2e63 6c6f 7564 666c 6172 652e  dnjs.cloudflare.
+00013a10: 636f 6d2f 616a 6178 2f6c 6962 732f 6d61  com/ajax/libs/ma
+00013a20: 7468 6a61 782f 322e 372e 312f 4d61 7468  thjax/2.7.1/Math
+00013a30: 4a61 782e 6a73 3f63 6f6e 6669 673d 5465  Jax.js?config=Te
+00013a40: 582d 414d 532d 4d4d 4c5f 4854 4d4c 6f72  X-AMS-MML_HTMLor
+00013a50: 4d4d 4c22 3e0d 0a20 2020 2020 2020 203c  MML">..        <
+00013a60: 2f73 6372 6970 743e 0d0a 2020 2020 2020  /script>..      
+00013a70: 2020 3c6c 696e 6b20 7265 6c3d 2273 7479    <link rel="sty
+00013a80: 6c65 7368 6565 7422 2068 7265 663d 226d  lesheet" href="m
+00013a90: 7973 7479 6c65 2e63 7373 223e 0d0a 2020  ystyle.css">..  
+00013aa0: 2020 2020 2020 3c2f 6865 6164 3e0d 0a0d        </head>...
+00013ab0: 0a20 2020 2020 2020 203c 626f 6479 3e0d  .        <body>.
+00013ac0: 0a20 2020 2020 2020 2025 730d 0a20 2020  .        %s..   
+00013ad0: 2020 2020 203c 2f62 6f64 793e 0d0a 2020       </body>..  
+00013ae0: 2020 2020 2020 3c2f 6874 6d6c 3e0d 0a20        </html>.. 
+00013af0: 2020 2020 2020 2022 2222 2520 2064 662e         """%  df.
+00013b00: 746f 5f68 746d 6c28 290d 0a0d 0a20 2020  to_html()....   
+00013b10: 2020 2020 2020 2020 2020 2020 2070 6167               pag
+00013b20: 6553 6f75 7263 6520 3d20 2222 220d 0a20  eSource = """.. 
+00013b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b40: 2020 2020 2020 2020 2020 2020 3c68 746d              <htm
+00013b50: 6c3e 3c68 6561 643e 0d0a 2020 2020 2020  l><head>..      
+00013b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b70: 2020 2020 2020 203c 2f68 6561 643e 0d0a         </head>..
+00013b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b90: 2020 2020 2020 2020 2020 2020 203c 626f               <bo
+00013ba0: 6479 3e0d 0a20 2020 2020 2020 2020 2020  dy>..           
+00013bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013bc0: 2020 3c70 3e61 7364 663c 2f70 3e0d 0a20    <p>asdf</p>.. 
 00013bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013be0: 2020 2020 6669 6c65 2e63 6c6f 7365 2829      file.close()
-00013bf0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00013c00: 2320 5144 6573 6b74 6f70 5365 7276 6963  # QDesktopServic
-00013c10: 6573 2e6f 7065 6e55 726c 2851 5572 6c28  es.openUrl(QUrl(
-00013c20: 222e 2f66 696c 6573 2f6d 6174 7269 782e  "./files/matrix.
-00013c30: 6874 6d6c 2229 290d 0a0d 0a20 2020 2020  html"))....     
-00013c40: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
-00013c50: 3d20 2273 7461 6e64 6172 6422 3a0d 0a20  = "standard":.. 
-00013c60: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00013c70: 6f64 656c 203d 2050 616e 6461 734d 6f64  odel = PandasMod
-00013c80: 656c 2864 665f 6d65 7267 6532 290d 0a20  el(df_merge2).. 
-00013c90: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00013ca0: 7669 6577 203d 204d 6174 7269 7856 6965  view = MatrixVie
-00013cb0: 7765 7228 6d6f 6465 6c2c 7061 7265 6e74  wer(model,parent
-00013cc0: 3d73 656c 6629 0d0a 0d0a 2020 2020 2020  =self)....      
-00013cd0: 2020 2020 2020 2020 2020 2320 6d76 6965            # mvie
-00013ce0: 772e 7765 6256 6965 772e 7365 7448 746d  w.webView.setHtm
-00013cf0: 6c28 6466 5f68 746d 6c29 0d0a 2020 2020  l(df_html)..    
-00013d00: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00013d10: 6f74 2073 656c 662e 7465 7374 5f6d 6f64  ot self.test_mod
-00013d20: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00013d30: 2020 2020 2020 2020 6d76 6965 772e 7368          mview.sh
-00013d40: 6f77 2829 0d0a 0d0a 0d0a 2020 2020 2020  ow()......      
-00013d50: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
-00013d60: 2022 6c61 7465 7822 3a20 2320 3c20 4e4f   "latex": # < NO
-00013d70: 5420 5945 5420 5355 5050 4f52 5445 440d  T YET SUPPORTED.
-00013d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013d90: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00013da0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013db0: 636f 6e76 6572 745f 6466 5f74 6f5f 7465  convert_df_to_te
-00013dc0: 7828 6466 290d 0a20 2020 2020 2020 2020  x(df)..         
-00013dd0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-00013de0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-00013df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013e00: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
-00013e10: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
-00013e20: 6f72 2064 7572 696e 6720 5465 7820 436f  or during Tex Co
-00013e30: 6e76 6572 7369 6f6e 2229 0d0a 0d0a 2020  nversion")....  
-00013e40: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00013e50: 7072 696e 7428 2256 4945 5722 290d 0a20  print("VIEW").. 
-00013e60: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00013e70: 2070 7269 6e74 2864 665f 6874 6d6c 290d   print(df_html).
-00013e80: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00013e90: 6566 2063 6f6e 7665 7274 5f65 7863 656c  ef convert_excel
-00013ea0: 286d 795f 6974 656d 293a 0d0a 2020 2020  (my_item):..    
-00013eb0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00013ec0: 795f 6974 656d 203d 3d20 2230 2220 6f72  y_item == "0" or
-00013ed0: 206d 795f 6974 656d 203d 3d20 303a 0d0a   my_item == 0:..
-00013ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ef0: 2020 2020 7265 7475 726e 2022 202e 2d20      return " .- 
-00013f00: 2220 2023 202e 2d20 220d 0a20 2020 2020  "  # .- "..     
-00013f10: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00013f20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013f30: 2020 2020 2020 7320 3d20 7072 6574 7479        s = pretty
-00013f40: 286d 795f 6974 656d 2920 2320 7072 696e  (my_item) # prin
-00013f50: 7469 6e67 2e6c 6174 6578 286d 795f 6974  ting.latex(my_it
-00013f60: 656d 2920 2320 2c6d 6f64 653d 2269 6e6c  em) # ,mode="inl
-00013f70: 696e 6522 2920 2320 206d 6f64 653d 2269  ine") #  mode="i
-00013f80: 6e6c 696e 6522 290d 0a20 2020 2020 2020  nline")..       
-00013f90: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00013fa0: 6e74 2873 290d 0a20 2020 2020 2020 2020  nt(s)..         
-00013fb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00013fc0: 6e20 730d 0a0d 0a20 2020 2020 2020 2020  n s....         
-00013fd0: 2020 2069 6620 6d6f 6465 203d 3d20 2265     if mode == "e
-00013fe0: 7863 656c 223a 0d0a 2020 2020 2020 2020  xcel":..        
-00013ff0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00014000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014010: 2020 6566 696c 656e 616d 6520 3d20 5146    efilename = QF
-00014020: 696c 6544 6961 6c6f 672e 6765 7453 6176  ileDialog.getSav
-00014030: 6546 696c 654e 616d 6528 7365 6c66 2c20  eFileName(self, 
-00014040: 2753 6176 6520 6669 6c65 272c 206f 732e  'Save file', os.
-00014050: 6765 7463 7764 2829 2c20 2245 7863 656c  getcwd(), "Excel
-00014060: 2046 696c 6573 2028 2a2e 786c 7378 2922   Files (*.xlsx)"
-00014070: 295b 305d 0d0a 0d0a 2020 2020 2020 2020  )[0]....        
-00014080: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-00014090: 6669 6c65 6e61 6d65 2069 7320 6e6f 7420  filename is not 
-000140a0: 4e6f 6e65 2061 6e64 2065 6669 6c65 6e61  None and efilena
-000140b0: 6d65 2021 3d20 2222 3a0d 0a20 2020 2020  me != "":..     
-000140c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000140d0: 2020 2064 665f 666f 725f 6578 6365 6c20     df_for_excel 
-000140e0: 3d20 6466 5f66 6f72 5f65 7863 656c 2e61  = df_for_excel.a
-000140f0: 7070 6c79 6d61 7028 636f 6e76 6572 745f  pplymap(convert_
-00014100: 6578 6365 6c29 0d0a 2020 2020 2020 2020  excel)..        
-00014110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014120: 2320 7061 7468 203d 206f 732e 7061 7468  # path = os.path
-00014130: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
-00014140: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
-00014150: 5f29 290d 0a20 2020 2020 2020 2020 2020  _))..           
-00014160: 2020 2020 2020 2020 2020 2020 2064 665f               df_
-00014170: 666f 725f 6578 6365 6c2e 746f 5f65 7863  for_excel.to_exc
-00014180: 656c 2865 6669 6c65 6e61 6d65 2920 2320  el(efilename) # 
-00014190: 2266 696c 6573 2f46 6c6f 774d 6174 7269  "files/FlowMatri
-000141a0: 785f 666f 726d 6174 7465 642e 786c 7378  x_formatted.xlsx
-000141b0: 2229 290d 0a20 2020 2020 2020 2020 2020  "))..           
-000141c0: 2020 2020 2020 2020 2020 2020 2023 2064               # d
-000141d0: 665f 6d65 7267 6532 2e74 6f5f 6578 6365  f_merge2.to_exce
-000141e0: 6c28 6f73 2e70 6174 682e 6a6f 696e 2870  l(os.path.join(p
-000141f0: 6174 682c 6566 696c 656e 616d 6529 2920  ath,efilename)) 
-00014200: 2020 2023 2022 6669 6c65 732f 466c 6f77     # "files/Flow
-00014210: 4d61 7472 6978 2e78 6c73 7822 2929 0d0a  Matrix.xlsx"))..
-00014220: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014230: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-00014240: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
-00014250: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00014260: 6c66 2e6e 6f74 6966 7928 7374 7228 6529  lf.notify(str(e)
-00014270: 2c20 7469 746c 653d 2245 7272 6f72 2064  , title="Error d
-00014280: 7572 696e 6720 4578 6365 6c20 636f 6e76  uring Excel conv
-00014290: 6572 7369 6f6e 2229 0d0a 0d0a 2020 2020  ersion")....    
-000142a0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-000142b0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-000142c0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-000142d0: 6966 7928 7374 7228 6529 2c20 7469 746c  ify(str(e), titl
-000142e0: 653d 2245 7272 6f72 2064 7572 696e 6720  e="Error during 
-000142f0: 6d61 7472 6978 2067 656e 6572 6174 696f  matrix generatio
-00014300: 6e22 290d 0a0d 0a20 2020 2064 6566 2072  n")....    def r
-00014310: 656d 6f76 655f 6974 656d 2873 656c 6629  emove_item(self)
-00014320: 3a0d 0a0d 0a20 2020 2020 2020 2074 7279  :....        try
-00014330: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00014340: 656c 6563 7465 645f 726f 7773 203d 2073  elected_rows = s
-00014350: 6f72 7465 6428 7365 7428 696e 6465 782e  orted(set(index.
-00014360: 726f 7728 2920 666f 7220 696e 6465 7820  row() for index 
-00014370: 696e 0d0a 2020 2020 2020 2020 2020 2020  in..            
-00014380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014390: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000143a0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-000143b0: 7365 6c65 6374 6564 496e 6465 7865 7328  selectedIndexes(
-000143c0: 2929 290d 0a0d 0a20 2020 2020 2020 2020  )))....         
-000143d0: 2020 2069 6620 6c65 6e28 7365 6c65 6374     if len(select
-000143e0: 6564 5f72 6f77 7329 203d 3d20 303a 0d0a  ed_rows) == 0:..
+00013be0: 2020 2020 2020 2020 2020 2020 3c2f 626f              </bo
+00013bf0: 6479 3e3c 2f68 746d 6c3e 0d0a 2020 2020  dy></html>..    
+00013c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c10: 2020 2020 2020 2020 2022 2222 0d0a 0d0a           """....
+00013c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c30: 2320 424c 410d 0a0d 0a20 2020 2020 2020  # BLA....       
+00013c40: 2020 2020 2020 2020 2023 2077 7269 7465           # write
+00013c50: 2070 6167 6520 736f 7572 6365 2074 6f20   page source to 
+00013c60: 6874 6d6c 0d0a 2020 2020 2020 2020 2020  html..          
+00013c70: 2020 2020 2020 6966 2046 616c 7365 3a0d        if False:.
+00013c80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013c90: 2020 2020 2023 2044 4550 5245 4349 4154       # DEPRECIAT
+00013ca0: 4544 0d0a 2020 2020 2020 2020 2020 2020  ED..            
+00013cb0: 2020 2020 2020 2020 7061 7468 203d 206f          path = o
+00013cc0: 732e 7061 7468 2e64 6972 6e61 6d65 286f  s.path.dirname(o
+00013cd0: 732e 7061 7468 2e61 6273 7061 7468 285f  s.path.abspath(_
+00013ce0: 5f66 696c 655f 5f29 290d 0a20 2020 2020  _file__))..     
+00013cf0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00013d00: 696c 6520 3d20 6f70 656e 286f 732e 7061  ile = open(os.pa
+00013d10: 7468 2e6a 6f69 6e28 7061 7468 2c22 6669  th.join(path,"fi
+00013d20: 6c65 732f 6d79 6d61 7472 6978 2e68 746d  les/mymatrix.htm
+00013d30: 6c22 292c 2277 222c 656e 636f 6469 6e67  l"),"w",encoding
+00013d40: 3d27 7574 662d 3827 290d 0a20 2020 2020  ='utf-8')..     
+00013d50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00013d60: 696c 652e 7772 6974 6528 6466 5f68 746d  ile.write(df_htm
+00013d70: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
+00013d80: 2020 2020 2020 2020 6669 6c65 2e63 6c6f          file.clo
+00013d90: 7365 2829 0d0a 0d0a 2020 2020 2020 2020  se()....        
+00013da0: 2020 2020 2320 5144 6573 6b74 6f70 5365      # QDesktopSe
+00013db0: 7276 6963 6573 2e6f 7065 6e55 726c 2851  rvices.openUrl(Q
+00013dc0: 5572 6c28 222e 2f66 696c 6573 2f6d 6174  Url("./files/mat
+00013dd0: 7269 782e 6874 6d6c 2229 290d 0a0d 0a20  rix.html")).... 
+00013de0: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
+00013df0: 6465 203d 3d20 2273 7461 6e64 6172 6422  de == "standard"
+00013e00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00013e10: 2020 206d 6f64 656c 203d 2050 616e 6461     model = Panda
+00013e20: 734d 6f64 656c 2864 665f 6d65 7267 6532  sModel(df_merge2
+00013e30: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00013e40: 2020 206d 7669 6577 203d 204d 6174 7269     mview = Matri
+00013e50: 7856 6965 7765 7228 6d6f 6465 6c2c 7061  xViewer(model,pa
+00013e60: 7265 6e74 3d73 656c 6629 0d0a 0d0a 2020  rent=self)....  
+00013e70: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00013e80: 6d76 6965 772e 7765 6256 6965 772e 7365  mview.webView.se
+00013e90: 7448 746d 6c28 6466 5f68 746d 6c29 0d0a  tHtml(df_html)..
+00013ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013eb0: 6966 206e 6f74 2073 656c 662e 7465 7374  if not self.test
+00013ec0: 5f6d 6f64 653a 0d0a 2020 2020 2020 2020  _mode:..        
+00013ed0: 2020 2020 2020 2020 2020 2020 6d76 6965              mvie
+00013ee0: 772e 7368 6f77 2829 0d0a 0d0a 0d0a 2020  w.show()......  
+00013ef0: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
+00013f00: 6520 3d3d 2022 6c61 7465 7822 3a20 2320  e == "latex": # 
+00013f10: 3c20 4e4f 5420 5945 5420 5355 5050 4f52  < NOT YET SUPPOR
+00013f20: 5445 440d 0a20 2020 2020 2020 2020 2020  TED..           
+00013f30: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00013f40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00013f50: 656c 662e 636f 6e76 6572 745f 6466 5f74  elf.convert_df_t
+00013f60: 6f5f 7465 7828 6466 290d 0a20 2020 2020  o_tex(df)..     
+00013f70: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00013f80: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00013f90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00013fa0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+00013fb0: 6679 2873 7472 2865 292c 7469 746c 653d  fy(str(e),title=
+00013fc0: 2245 7272 6f72 2064 7572 696e 6720 5465  "Error during Te
+00013fd0: 7820 436f 6e76 6572 7369 6f6e 2229 0d0a  x Conversion")..
+00013fe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013ff0: 2020 2320 7072 696e 7428 2256 4945 5722    # print("VIEW"
+00014000: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00014010: 2020 2023 2070 7269 6e74 2864 665f 6874     # print(df_ht
+00014020: 6d6c 290d 0a0d 0a20 2020 2020 2020 2020  ml)....         
+00014030: 2020 2064 6566 2063 6f6e 7665 7274 5f65     def convert_e
+00014040: 7863 656c 286d 795f 6974 656d 293a 0d0a  xcel(my_item):..
+00014050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014060: 6966 206d 795f 6974 656d 203d 3d20 2230  if my_item == "0
+00014070: 2220 6f72 206d 795f 6974 656d 203d 3d20  " or my_item == 
+00014080: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+00014090: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+000140a0: 202e 2d20 2220 2023 202e 2d20 220d 0a20   .- "  # .- ".. 
+000140b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000140c0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+000140d0: 2020 2020 2020 2020 2020 7320 3d20 7072            s = pr
+000140e0: 6574 7479 286d 795f 6974 656d 2920 2320  etty(my_item) # 
+000140f0: 7072 696e 7469 6e67 2e6c 6174 6578 286d  printing.latex(m
+00014100: 795f 6974 656d 2920 2320 2c6d 6f64 653d  y_item) # ,mode=
+00014110: 2269 6e6c 696e 6522 2920 2320 206d 6f64  "inline") #  mod
+00014120: 653d 2269 6e6c 696e 6522 290d 0a20 2020  e="inline")..   
+00014130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014140: 2070 7269 6e74 2873 290d 0a20 2020 2020   print(s)..     
+00014150: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00014160: 6574 7572 6e20 730d 0a0d 0a20 2020 2020  eturn s....     
+00014170: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
+00014180: 3d20 2265 7863 656c 223a 0d0a 2020 2020  = "excel":..    
+00014190: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+000141a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000141b0: 2020 2020 2020 6566 696c 656e 616d 6520        efilename 
+000141c0: 3d20 5146 696c 6544 6961 6c6f 672e 6765  = QFileDialog.ge
+000141d0: 7453 6176 6546 696c 654e 616d 6528 7365  tSaveFileName(se
+000141e0: 6c66 2c20 2753 6176 6520 6669 6c65 272c  lf, 'Save file',
+000141f0: 206f 732e 6765 7463 7764 2829 2c20 2245   os.getcwd(), "E
+00014200: 7863 656c 2046 696c 6573 2028 2a2e 786c  xcel Files (*.xl
+00014210: 7378 2922 295b 305d 0d0a 0d0a 2020 2020  sx)")[0]....    
+00014220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014230: 6966 2065 6669 6c65 6e61 6d65 2069 7320  if efilename is 
+00014240: 6e6f 7420 4e6f 6e65 2061 6e64 2065 6669  not None and efi
+00014250: 6c65 6e61 6d65 2021 3d20 2222 3a0d 0a20  lename != "":.. 
+00014260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014270: 2020 2020 2020 2064 665f 666f 725f 6578         df_for_ex
+00014280: 6365 6c20 3d20 6466 5f66 6f72 5f65 7863  cel = df_for_exc
+00014290: 656c 2e61 7070 6c79 6d61 7028 636f 6e76  el.applymap(conv
+000142a0: 6572 745f 6578 6365 6c29 0d0a 2020 2020  ert_excel)..    
+000142b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000142c0: 2020 2020 2320 7061 7468 203d 206f 732e      # path = os.
+000142d0: 7061 7468 2e64 6972 6e61 6d65 286f 732e  path.dirname(os.
+000142e0: 7061 7468 2e61 6273 7061 7468 285f 5f66  path.abspath(__f
+000142f0: 696c 655f 5f29 290d 0a20 2020 2020 2020  ile__))..       
+00014300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014310: 2064 665f 666f 725f 6578 6365 6c2e 746f   df_for_excel.to
+00014320: 5f65 7863 656c 2865 6669 6c65 6e61 6d65  _excel(efilename
+00014330: 2920 2320 2266 696c 6573 2f46 6c6f 774d  ) # "files/FlowM
+00014340: 6174 7269 785f 666f 726d 6174 7465 642e  atrix_formatted.
+00014350: 786c 7378 2229 290d 0a20 2020 2020 2020  xlsx"))..       
+00014360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014370: 2023 2064 665f 6d65 7267 6532 2e74 6f5f   # df_merge2.to_
+00014380: 6578 6365 6c28 6f73 2e70 6174 682e 6a6f  excel(os.path.jo
+00014390: 696e 2870 6174 682c 6566 696c 656e 616d  in(path,efilenam
+000143a0: 6529 2920 2020 2023 2022 6669 6c65 732f  e))    # "files/
+000143b0: 466c 6f77 4d61 7472 6978 2e78 6c73 7822  FlowMatrix.xlsx"
+000143c0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+000143d0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+000143e0: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
 000143f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014400: 7365 6c66 2e6e 6f74 6966 7928 226e 6f20  self.notify("no 
-00014410: 7365 6c65 6374 6564 2072 6f77 7322 2c74  selected rows",t
-00014420: 6974 6c65 3d22 4572 726f 7222 290d 0a20  itle="Error").. 
-00014430: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00014440: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
-00014450: 2020 2020 2073 656c 6563 7469 6f6e 203d       selection =
-00014460: 2073 656c 6563 7465 645f 726f 7773 5b30   selected_rows[0
-00014470: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-00014480: 2079 6573 203d 2020 7365 6c66 2e61 736b   yes =  self.ask
-00014490: 5f71 7565 7374 696f 6e28 2727 2c22 4172  _question('',"Ar
-000144a0: 6520 796f 7520 7375 7265 2079 6f75 2077  e you sure you w
-000144b0: 616e 7420 746f 2072 656d 6f76 6520 7468  ant to remove th
-000144c0: 6520 656e 7472 7920 2725 7327 3f22 2573  e entry '%s'?"%s
-000144d0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-000144e0: 656c 6563 7469 6f6e 5d5b 2273 7562 6a65  election]["subje
-000144f0: 6374 225d 290d 0a20 2020 2020 2020 2020  ct"])..         
-00014500: 2020 2069 6620 7965 733a 0d0a 0d0a 2020     if yes:....  
-00014510: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00014520: 6c66 2e64 7261 7763 616e 7661 732e 7265  lf.drawcanvas.re
-00014530: 6d6f 7665 5f63 6f6e 6e65 6374 696f 6e28  move_connection(
-00014540: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
-00014550: 7365 6c65 6374 696f 6e5d 5b22 7368 6f72  selection]["shor
-00014560: 746e 616d 6522 5d29 0d0a 0d0a 2020 2020  tname"])....    
-00014570: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00014580: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-00014590: 2e72 656d 6f76 6552 6f77 2873 656c 6563  .removeRow(selec
-000145a0: 7469 6f6e 290d 0a20 2020 2020 2020 2020  tion)..         
-000145b0: 2020 2020 2020 2064 656c 2073 656c 662e         del self.
-000145c0: 656e 7472 795f 6461 7461 5b73 656c 6563  entry_data[selec
-000145d0: 7469 6f6e 5d0d 0a0d 0a20 2020 2020 2020  tion]....       
-000145e0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-000145f0: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-00014600: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-00014610: 2873 7472 2865 292c 2074 6974 6c65 3d22  (str(e), title="
-00014620: 4572 726f 7222 290d 0a0d 0a20 2020 2020  Error")....     
-00014630: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00014640: 2020 2020 2073 656c 662e 7570 6461 7465       self.update
-00014650: 5f74 6162 6c65 2829 0d0a 0d0a 2020 2020  _table()....    
-00014660: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00014670: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-00014680: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00014690: 6966 7928 7374 7228 6529 2c20 7469 746c  ify(str(e), titl
-000146a0: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
-000146b0: 2020 2020 6465 6620 636f 6e76 6572 745f      def convert_
-000146c0: 6466 5f74 6f5f 7465 7828 7365 6c66 2c64  df_to_tex(self,d
-000146d0: 6629 3a0d 0a0d 0a20 2020 2020 2020 2064  f):....        d
-000146e0: 6566 2077 7261 7073 7472 696e 6728 7329  ef wrapstring(s)
-000146f0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00014700: 2077 7261 7073 2073 7472 696e 670d 0a20   wraps string.. 
-00014710: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00014720: 6e20 7465 7874 7772 6170 2e77 7261 7028  n textwrap.wrap(
-00014730: 732c 2077 6964 7468 3d31 3029 0d0a 0d0a  s, width=10)....
-00014740: 2020 2020 2020 2020 6465 6620 6162 6272          def abbr
-00014750: 6576 6961 7465 5f7a 6572 6f73 286d 795f  eviate_zeros(my_
-00014760: 6974 656d 293a 0d0a 2020 2020 2020 2020  item):..        
-00014770: 2020 2020 6966 206d 795f 6974 656d 203d      if my_item =
-00014780: 3d20 2230 2220 6f72 206d 795f 6974 656d  = "0" or my_item
-00014790: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
-000147a0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-000147b0: 202e 2d20 2220 2023 202e 2d20 220d 0a20   .- "  # .- ".. 
-000147c0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000147d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000147e0: 2020 6d79 5f69 7465 6d20 3d20 7374 7228    my_item = str(
-000147f0: 6d79 5f69 7465 6d29 0d0a 2020 2020 2020  my_item)..      
-00014800: 2020 2020 2020 2020 2020 6d61 785f 6c65            max_le
-00014810: 6e20 3d20 3130 0d0a 2020 2020 2020 2020  n = 10..        
-00014820: 2020 2020 2020 2020 6966 206c 656e 286d          if len(m
-00014830: 795f 6974 656d 2920 3e20 6d61 785f 6c65  y_item) > max_le
-00014840: 6e3a 0d0a 2020 2020 2020 2020 2020 2020  n:..            
-00014850: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00014860: 795f 6974 656d 5b3a 6d61 785f 6c65 6e5d  y_item[:max_len]
-00014870: 202b 2022 2e2e 2e22 0d0a 2020 2020 2020   + "..."..      
-00014880: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00014890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000148a0: 2020 2020 2072 6574 7572 6e20 6d79 5f69       return my_i
-000148b0: 7465 6d0d 0a0d 0a20 2020 2020 2020 2064  tem....        d
-000148c0: 665f 6261 636b 7570 203d 2064 662e 636f  f_backup = df.co
-000148d0: 7079 2829 0d0a 0d0a 2020 2020 2020 2020  py()....        
-000148e0: 6466 5f6c 6174 6578 203d 2064 662e 746f  df_latex = df.to
-000148f0: 5f6c 6174 6578 286c 6f6e 6774 6162 6c65  _latex(longtable
-00014900: 3d46 616c 7365 2c20 6573 6361 7065 3d46  =False, escape=F
-00014910: 616c 7365 292e 7265 706c 6163 6528 22ce  alse).replace(".
-00014920: 9422 2c20 2224 5c44 656c 7461 2422 290d  .", "$\Delta$").
-00014930: 0a0d 0a20 2020 2020 2020 2064 665f 6c61  ...        df_la
-00014940: 7465 7820 3d20 6466 5f6c 6174 6578 2e72  tex = df_latex.r
-00014950: 6570 6c61 6365 2822 5c5c 6265 6769 6e7b  eplace("\\begin{
-00014960: 7461 6275 6c61 727d 222c 2022 5c5c 6265  tabular}", "\\be
-00014970: 6769 6e7b 7461 6275 6c61 7278 7d7b 5c5c  gin{tabularx}{\\
-00014980: 7465 7874 7769 6474 687d 2229 0d0a 2020  textwidth}")..  
-00014990: 2020 2020 2020 6466 5f6c 6174 6578 203d        df_latex =
-000149a0: 2064 665f 6c61 7465 782e 7265 706c 6163   df_latex.replac
-000149b0: 6528 225c 5c65 6e64 7b74 6162 756c 6172  e("\\end{tabular
-000149c0: 7d22 2c20 225c 5c65 6e64 7b74 6162 756c  }", "\\end{tabul
-000149d0: 6172 787d 2229 0d0a 2020 2020 2020 2020  arx}")..        
-000149e0: 6466 5f6c 6174 6578 203d 2022 5c5c 6265  df_latex = "\\be
-000149f0: 6769 6e7b 736d 616c 6c7d 5c6e 2220 2b20  gin{small}\n" + 
-00014a00: 6466 5f6c 6174 6578 202b 2022 5c6e 5c65  df_latex + "\n\e
-00014a10: 6e64 7b73 6d61 6c6c 7d22 0d0a 0d0a 2020  nd{small}"....  
-00014a20: 2020 2020 2020 6466 5f6c 6174 6578 203d        df_latex =
-00014a30: 2064 665f 6c61 7465 782e 7265 706c 6163   df_latex.replac
-00014a40: 6528 225c 5c6c 6566 7428 222c 2022 2822  e("\\left(", "("
-00014a50: 290d 0a20 2020 2020 2020 2064 665f 6c61  )..        df_la
-00014a60: 7465 7820 3d20 6466 5f6c 6174 6578 2e72  tex = df_latex.r
-00014a70: 6570 6c61 6365 2822 5c5c 7269 6768 7429  eplace("\\right)
-00014a80: 222c 2022 2922 290d 0a0d 0a20 2020 2020  ", ")")....     
-00014a90: 2020 2064 665f 6c61 7465 7820 3d20 6466     df_latex = df
-00014aa0: 5f6c 6174 6578 2e72 6570 6c61 6365 2822  _latex.replace("
-00014ab0: 7b6c 222c 2022 7b4c 7b33 636d 7d22 290d  {l", "{L{3cm}").
-00014ac0: 0a0d 0a20 2020 2020 2020 2064 665f 6c61  ...        df_la
-00014ad0: 7465 7820 3d20 2222 220d 0a5c 5c64 6f63  tex = """..\\doc
-00014ae0: 756d 656e 7463 6c61 7373 5b61 3370 6170  umentclass[a3pap
-00014af0: 6572 2c6c 616e 6473 6361 7065 5d7b 6172  er,landscape]{ar
-00014b00: 7469 636c 657d 0d0a 5c5c 7573 6570 6163  ticle}..\\usepac
-00014b10: 6b61 6765 7b62 6f6f 6b74 6162 737d 0d0a  kage{booktabs}..
-00014b20: 5c5c 7573 6570 6163 6b61 6765 7b61 646a  \\usepackage{adj
-00014b30: 7573 7462 6f78 7d0d 0a5c 5c75 7365 7061  ustbox}..\\usepa
-00014b40: 636b 6167 655b 7461 626c 655d 7b78 636f  ckage[table]{xco
-00014b50: 6c6f 727d 0d0a 5c5c 7573 6570 6163 6b61  lor}..\\usepacka
-00014b60: 6765 7b6c 6f6e 6774 6162 6c65 7d0d 0a5c  ge{longtable}..\
-00014b70: 5c75 7365 7061 636b 6167 657b 7461 6275  \usepackage{tabu
-00014b80: 6c61 7278 2c72 6167 6765 6432 657d 0d0a  larx,ragged2e}..
-00014b90: 5c5c 6465 6669 6e65 636f 6c6f 727b 4772  \\definecolor{Gr
-00014ba0: 6179 7d7b 6772 6179 7d7b 302e 3930 7d0d  ay}{gray}{0.90}.
-00014bb0: 0a5c 5c64 6566 696e 6563 6f6c 6f72 7b4c  .\\definecolor{L
-00014bc0: 6967 6874 4772 6179 7d7b 6772 6179 7d7b  ightGray}{gray}{
-00014bd0: 302e 3935 7d0d 0a5c 5c64 6566 696e 6563  0.95}..\\definec
-00014be0: 6f6c 6f72 7b57 6869 7465 7d7b 7267 627d  olor{White}{rgb}
-00014bf0: 7b31 2c31 2c31 7d0d 0a0d 0a5c 5c6e 6577  {1,1,1}....\\new
-00014c00: 636f 6c75 6d6e 7479 7065 7b67 7d7b 3e7b  columntype{g}{>{
-00014c10: 5c5c 636f 6c75 6d6e 636f 6c6f 727b 5768  \\columncolor{Wh
-00014c20: 6974 657d 5c5c 6172 7261 7962 6163 6b73  ite}\\arraybacks
-00014c30: 6c61 7368 7d4c 7d20 250d 0a5c 5c6e 6577  lash}L} %..\\new
-00014c40: 636f 6c75 6d6e 7479 7065 7b6c 7d7b 3e7b  columntype{l}{>{
-00014c50: 5c5c 636f 6c75 6d6e 636f 6c6f 727b 5768  \\columncolor{Wh
-00014c60: 6974 657d 5c5c 6172 7261 7962 6163 6b73  ite}\\arraybacks
-00014c70: 6c61 7368 7d70 7b33 636d 7d7d 2025 6365  lash}p{3cm}} %ce
-00014c80: 6e74 6572 6564 2022 5822 2063 6f6c 756d  ntered "X" colum
-00014c90: 6e0d 0a5c 5c6e 6577 636f 6c75 6d6e 7479  n..\\newcolumnty
-00014ca0: 7065 7b4c 7d5b 315d 7b3e 7b5c 5c72 6167  pe{L}[1]{>{\\rag
-00014cb0: 6765 6472 6967 6874 5c5c 6172 7261 7962  gedright\\arrayb
-00014cc0: 6163 6b73 6c61 7368 7d70 7b5c 5c64 696d  ackslash}p{\\dim
-00014cd0: 6578 7072 2331 2d32 5c5c 7461 6263 6f6c  expr#1-2\\tabcol
-00014ce0: 7365 702d 325c 5c61 7272 6179 7275 6c65  sep-2\\arrayrule
-00014cf0: 7769 6474 682b 2e32 3170 747d 7d0d 0a0d  width+.21pt}}...
-00014d00: 0a5c 5c75 7365 7061 636b 6167 655b 6c65  .\\usepackage[le
-00014d10: 6674 3d31 636d 2c72 6967 6874 3d31 2e35  ft=1cm,right=1.5
-00014d20: 636d 5d7b 6765 6f6d 6574 7279 7d0d 0a0d  cm]{geometry}...
-00014d30: 0a5c 5c62 6567 696e 7b64 6f63 756d 656e  .\\begin{documen
-00014d40: 747d 5c6e 2222 2220 2b20 6466 5f6c 6174  t}\n""" + df_lat
-00014d50: 6578 2020 202b 2022 5c6e 5c5c 656e 647b  ex   + "\n\\end{
-00014d60: 646f 6375 6d65 6e74 7d22 0d0a 0d0a 2020  document}"....  
-00014d70: 2020 2020 2020 7079 7065 7263 6c69 702e        pyperclip.
-00014d80: 636f 7079 2864 665f 6c61 7465 7829 0d0a  copy(df_latex)..
-00014d90: 2020 2020 2020 2020 2373 656c 662e 6e6f          #self.no
-00014da0: 7469 6679 286d 6573 7361 6765 3d22 4c61  tify(message="La
-00014db0: 5465 5820 636f 6465 2063 6f70 6965 6420  TeX code copied 
-00014dc0: 746f 2063 6c69 7062 6f61 7264 2e20 4861  to clipboard. Ha
-00014dd0: 7665 2066 756e 2122 2c20 7469 746c 653d  ve fun!", title=
-00014de0: 2248 6176 6520 6675 6e22 290d 0a20 2020  "Have fun")..   
-00014df0: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
-00014e00: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
-00014e10: 6528 224c 6154 6558 2063 6f64 6520 636f  e("LaTeX code co
-00014e20: 7069 6564 2074 6f20 636c 6970 626f 6172  pied to clipboar
-00014e30: 642e 2048 6176 6520 6675 6e21 2229 0d0a  d. Have fun!")..
-00014e40: 0d0a 0d0a 2020 2020 2020 2020 2320 2d2d  ....        # --
-00014e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-00014e60: 2020 2020 2069 6620 4661 6c73 653a 2023       if False: #
-00014e70: 2044 4550 5249 4341 5445 440d 0a20 2020   DEPRICATED..   
-00014e80: 2020 2020 2020 2020 2074 7279 3a0d 0a0d           try:...
-00014e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014ea0: 2066 726f 6d20 7064 666c 6174 6578 2069   from pdflatex i
-00014eb0: 6d70 6f72 7420 5044 464c 6154 6558 0d0a  mport PDFLaTeX..
-00014ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ed0: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
-00014ee0: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
-00014ef0: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
-00014f00: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00014f10: 2020 206d 795f 6669 6c65 203d 206f 732e     my_file = os.
-00014f20: 7061 7468 2e6a 6f69 6e28 7061 7468 2c22  path.join(path,"
-00014f30: 6d79 6d61 7472 6978 2229 0d0a 0d0a 2020  mymatrix")....  
-00014f40: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00014f50: 6c65 203d 206f 7065 6e28 6d79 5f66 696c  le = open(my_fil
-00014f60: 652c 2022 7722 290d 0a20 2020 2020 2020  e, "w")..       
-00014f70: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
-00014f80: 6974 6528 2222 220d 0a20 2020 2020 2020  ite("""..       
-00014f90: 205c 5c64 6f63 756d 656e 7463 6c61 7373   \\documentclass
-00014fa0: 5b61 3370 6170 6572 2c6c 616e 6473 6361  [a3paper,landsca
-00014fb0: 7065 5d7b 6172 7469 636c 657d 0d0a 2020  pe]{article}..  
-00014fc0: 2020 2020 2020 5c5c 7573 6570 6163 6b61        \\usepacka
-00014fd0: 6765 7b62 6f6f 6b74 6162 737d 0d0a 2020  ge{booktabs}..  
-00014fe0: 2020 2020 2020 5c5c 7573 6570 6163 6b61        \\usepacka
-00014ff0: 6765 7b61 646a 7573 7462 6f78 7d0d 0a20  ge{adjustbox}.. 
-00015000: 2020 2020 2020 205c 5c75 7365 7061 636b         \\usepack
-00015010: 6167 655b 7461 626c 655d 7b78 636f 6c6f  age[table]{xcolo
-00015020: 727d 0d0a 2020 2020 2020 2020 5c5c 7573  r}..        \\us
-00015030: 6570 6163 6b61 6765 7b6c 6f6e 6774 6162  epackage{longtab
-00015040: 6c65 7d0d 0a20 2020 2020 2020 205c 5c75  le}..        \\u
-00015050: 7365 7061 636b 6167 657b 7461 6275 6c61  sepackage{tabula
-00015060: 7278 2c72 6167 6765 6432 657d 0d0a 2020  rx,ragged2e}..  
-00015070: 2020 2020 2020 5c5c 6465 6669 6e65 636f        \\defineco
-00015080: 6c6f 727b 4772 6179 7d7b 6772 6179 7d7b  lor{Gray}{gray}{
-00015090: 302e 3930 7d0d 0a20 2020 2020 2020 205c  0.90}..        \
-000150a0: 5c64 6566 696e 6563 6f6c 6f72 7b4c 6967  \definecolor{Lig
-000150b0: 6874 4772 6179 7d7b 6772 6179 7d7b 302e  htGray}{gray}{0.
-000150c0: 3935 7d0d 0a20 2020 2020 2020 205c 5c64  95}..        \\d
-000150d0: 6566 696e 6563 6f6c 6f72 7b57 6869 7465  efinecolor{White
-000150e0: 7d7b 7267 627d 7b31 2c31 2c31 7d0d 0a0d  }{rgb}{1,1,1}...
-000150f0: 0a20 2020 2020 2020 205c 5c6e 6577 636f  .        \\newco
-00015100: 6c75 6d6e 7479 7065 7b67 7d7b 3e7b 5c5c  lumntype{g}{>{\\
-00015110: 636f 6c75 6d6e 636f 6c6f 727b 5768 6974  columncolor{Whit
-00015120: 657d 5c5c 6172 7261 7962 6163 6b73 6c61  e}\\arraybacksla
-00015130: 7368 7d4c 7d20 250d 0a20 2020 2020 2020  sh}L} %..       
-00015140: 205c 5c6e 6577 636f 6c75 6d6e 7479 7065   \\newcolumntype
-00015150: 7b6c 7d7b 3e7b 5c5c 636f 6c75 6d6e 636f  {l}{>{\\columnco
-00015160: 6c6f 727b 5768 6974 657d 5c5c 6172 7261  lor{White}\\arra
-00015170: 7962 6163 6b73 6c61 7368 7d70 7b33 636d  ybackslash}p{3cm
-00015180: 7d7d 2025 6365 6e74 6572 6564 2022 5822  }} %centered "X"
-00015190: 2063 6f6c 756d 6e0d 0a20 2020 2020 2020   column..       
-000151a0: 205c 5c6e 6577 636f 6c75 6d6e 7479 7065   \\newcolumntype
-000151b0: 7b4c 7d5b 315d 7b3e 7b5c 5c72 6167 6765  {L}[1]{>{\\ragge
-000151c0: 6472 6967 6874 5c5c 6172 7261 7962 6163  dright\\arraybac
-000151d0: 6b73 6c61 7368 7d70 7b5c 5c64 696d 6578  kslash}p{\\dimex
-000151e0: 7072 2331 2d32 5c5c 7461 6263 6f6c 7365  pr#1-2\\tabcolse
-000151f0: 702d 325c 5c61 7272 6179 7275 6c65 7769  p-2\\arrayrulewi
-00015200: 6474 682b 2e32 3170 747d 7d0d 0a0d 0a20  dth+.21pt}}.... 
-00015210: 2020 2020 2020 205c 5c75 7365 7061 636b         \\usepack
-00015220: 6167 655b 6c65 6674 3d31 636d 2c72 6967  age[left=1cm,rig
-00015230: 6874 3d31 2e35 636d 5d7b 6765 6f6d 6574  ht=1.5cm]{geomet
-00015240: 7279 7d0d 0a0d 0a20 2020 2020 2020 205c  ry}....        \
-00015250: 5c62 6567 696e 7b64 6f63 756d 656e 747d  \begin{document}
-00015260: 2222 2229 0d0a 2020 2020 2020 2020 2020  """)..          
-00015270: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-00015280: 2864 665f 6c61 7465 7829 0d0a 2020 2020  (df_latex)..    
-00015290: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000152a0: 2e77 7269 7465 2822 2222 0d0a 2020 2020  .write("""..    
-000152b0: 2020 2020 5c5c 656e 647b 646f 6375 6d65      \\end{docume
-000152c0: 6e74 7d22 2222 290d 0a20 2020 2020 2020  nt}""")..       
-000152d0: 2020 2020 2020 2020 2066 696c 652e 636c           file.cl
-000152e0: 6f73 6528 290d 0a20 2020 2020 2020 2020  ose()..         
-000152f0: 2020 2020 2020 2023 2070 6466 6c20 3d20         # pdfl = 
-00015300: 5044 464c 6154 6558 2e66 726f 6d5f 7465  PDFLaTeX.from_te
-00015310: 7866 696c 6528 276d 795f 7465 7866 696c  xfile('my_texfil
-00015320: 652e 7465 7827 290d 0a20 2020 2020 2020  e.tex')..       
-00015330: 2020 2020 2020 2020 2023 2070 6466 2c20           # pdf, 
-00015340: 6c6f 672c 2063 6f6d 706c 6574 6564 5f70  log, completed_p
-00015350: 726f 6365 7373 203d 2070 6466 6c2e 6372  rocess = pdfl.cr
-00015360: 6561 7465 5f70 6466 286b 6565 705f 7064  eate_pdf(keep_pd
-00015370: 665f 6669 6c65 3d54 7275 652c 206b 6565  f_file=True, kee
-00015380: 705f 6c6f 675f 6669 6c65 3d54 7275 6529  p_log_file=True)
-00015390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000153a0: 2020 2320 6f73 2e70 6f70 656e 2822 7064    # os.popen("pd
-000153b0: 666c 6174 6578 2025 7322 2025 2028 6f73  flatex %s" % (os
-000153c0: 2e67 6574 6377 6428 292b 222f 6d79 5f74  .getcwd()+"/my_t
-000153d0: 6578 6669 6c65 2e74 6578 2229 290d 0a20  exfile.tex")).. 
-000153e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000153f0: 6d70 6f72 7420 7375 6270 726f 6365 7373  mport subprocess
-00015400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015410: 2020 7061 7468 203d 206f 732e 7061 7468    path = os.path
-00015420: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
-00015430: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
-00015440: 5f29 290d 0a20 2020 2020 2020 2020 2020  _))..           
-00015450: 2020 2020 2073 7562 7072 6f63 6573 732e       subprocess.
-00015460: 7275 6e28 2270 6466 6c61 7465 7820 2573  run("pdflatex %s
-00015470: 2220 2520 286f 732e 7061 7468 2e6a 6f69  " % (os.path.joi
-00015480: 6e28 7061 7468 2c22 6d79 6d61 7472 6978  n(path,"mymatrix
-00015490: 2e74 6578 2229 2929 2e63 6865 636b 5f72  .tex"))).check_r
-000154a0: 6574 7572 6e63 6f64 6528 290d 0a0d 0a20  eturncode().... 
-000154b0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000154c0: 6f73 2e73 7461 7274 6669 6c65 286f 732e  os.startfile(os.
-000154d0: 6765 7463 7764 2829 202b 2022 5c5c 6d79  getcwd() + "\\my
-000154e0: 6d61 7472 6978 2e70 6466 2229 0d0a 2020  matrix.pdf")..  
-000154f0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00015500: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00015510: 2020 2020 2020 2020 2320 7368 7574 696c          # shutil
-00015520: 2e72 6d74 7265 6528 6f73 2e67 6574 6377  .rmtree(os.getcw
-00015530: 6428 292b 225c 5c66 696c 6573 2229 0d0a  d()+"\\files")..
-00015540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015550: 2020 2020 2320 6f73 2e6d 6b64 6972 286f      # os.mkdir(o
-00015560: 732e 6765 7463 7764 2829 2b22 5c5c 6669  s.getcwd()+"\\fi
-00015570: 6c65 7322 290d 0a0d 0a20 2020 2020 2020  les")....       
-00015580: 2020 2020 2020 2020 2020 2020 2070 6174               pat
-00015590: 6820 3d20 6f73 2e70 6174 682e 6469 726e  h = os.path.dirn
-000155a0: 616d 6528 6f73 2e70 6174 682e 6162 7370  ame(os.path.absp
-000155b0: 6174 6828 5f5f 6669 6c65 5f5f 2929 0d0a  ath(__file__))..
-000155c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155d0: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
-000155e0: 7061 7468 2b22 5c5c 6d79 6d61 7472 6978  path+"\\mymatrix
-000155f0: 2e74 6578 2220 2c20 7061 7468 2b20 225c  .tex" , path+ "\
-00015600: 5c66 696c 6573 5c5c 6d79 6d61 7472 6978  \files\\mymatrix
-00015610: 2e74 6578 2229 0d0a 2020 2020 2020 2020  .tex")..        
-00015620: 2020 2020 2020 2020 2020 2020 7368 7574              shut
-00015630: 696c 2e6d 6f76 6528 7061 7468 202b 2022  il.move(path + "
-00015640: 5c5c 6d79 6d61 7472 6978 2e6c 6f67 222c  \\mymatrix.log",
-00015650: 2070 6174 6820 2b20 225c 5c66 696c 6573   path + "\\files
-00015660: 5c5c 6d79 6d61 7472 6978 2e6c 6f67 2229  \\mymatrix.log")
-00015670: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015680: 2020 2020 2020 7368 7574 696c 2e6d 6f76        shutil.mov
-00015690: 6528 7061 7468 202b 2022 5c5c 6d79 6d61  e(path + "\\myma
-000156a0: 7472 6978 2e61 7578 222c 2070 6174 6820  trix.aux", path 
-000156b0: 2b20 225c 5c66 696c 6573 5c5c 5c6d 796d  + "\\files\\\mym
-000156c0: 6174 7269 782e 6175 7822 290d 0a20 2020  atrix.aux")..   
-000156d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156e0: 2073 6875 7469 6c2e 6d6f 7665 2870 6174   shutil.move(pat
-000156f0: 6820 2b20 225c 5c6d 796d 6174 7269 782e  h + "\\mymatrix.
-00015700: 7064 6622 2c20 7061 7468 202b 2022 5c5c  pdf", path + "\\
-00015710: 6669 6c65 735c 5c6d 796d 6174 7269 782e  files\\mymatrix.
-00015720: 7064 6622 290d 0a20 2020 2020 2020 2020  pdf")..         
-00015730: 2020 2020 2020 2020 2020 2023 7368 7574             #shut
-00015740: 696c 2e63 6f70 7928 6f73 2e67 6574 6377  il.copy(os.getcw
-00015750: 6428 2920 2b20 225c 5c66 696c 6573 5c5c  d() + "\\files\\
-00015760: 6d79 6d61 7472 6978 2e68 746d 6c22 2c6f  mymatrix.html",o
-00015770: 732e 6765 7463 7764 2829 202b 2022 5c5c  s.getcwd() + "\\
-00015780: 6669 6c65 735c 5c6d 796d 6174 7269 782e  files\\mymatrix.
-00015790: 6874 6d6c 2229 0d0a 2020 2020 2020 2020  html")..        
-000157a0: 2020 2020 2020 2020 2020 2020 2373 6875              #shu
-000157b0: 7469 6c2e 636f 7079 286f 732e 6765 7463  til.copy(os.getc
-000157c0: 7764 2829 202b 2022 5c5c 6669 6c65 735c  wd() + "\\files\
-000157d0: 5c6d 7973 7479 6c65 2e63 7373 222c 206f  \mystyle.css", o
-000157e0: 732e 6765 7463 7764 2829 202b 2022 5c5c  s.getcwd() + "\\
-000157f0: 6669 6c65 735c 5c6d 7973 7479 6c65 2e63  files\\mystyle.c
-00015800: 7373 2229 0d0a 2020 2020 2020 2020 2020  ss")..          
-00015810: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00015820: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00015830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015840: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
-00015850: 7373 6167 653d 7374 7228 6529 2c74 6974  ssage=str(e),tit
-00015860: 6c65 3d22 416e 2045 7272 6f72 206f 6363  le="An Error occ
-00015870: 7572 7265 642e 2e2e 2849 4420 3133 3038  urred...(ID 1308
-00015880: 2922 290d 0a0d 0a20 2020 2020 2020 2020  )")....         
-00015890: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-000158a0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-000158b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000158c0: 6e6f 7469 6679 286d 6573 7361 6765 3d73  notify(message=s
-000158d0: 7472 2865 292c 7469 746c 653d 2241 6e20  tr(e),title="An 
-000158e0: 4572 726f 7220 6f63 6375 7272 6564 2e2e  Error occurred..
-000158f0: 2e28 4944 2031 3331 3129 2229 0d0a 2020  .(ID 1311)")..  
-00015900: 2020 2020 2020 2020 2020 2320 2d2d 2d2d            # ----
-00015910: 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d 0a20 2020  ---------....   
-00015920: 2020 2020 2020 2020 2070 642e 6f70 7469           pd.opti
-00015930: 6f6e 732e 6469 7370 6c61 792e 6d61 785f  ons.display.max_
-00015940: 636f 6c77 6964 7468 203d 2032 0d0a 0d0a  colwidth = 2....
-00015950: 2020 2020 2020 2020 2020 2020 6466 5f64              df_d
-00015960: 6973 706c 6179 203d 2064 665f 6261 636b  isplay = df_back
-00015970: 7570 2e61 7070 6c79 6d61 7028 6162 6272  up.applymap(abbr
-00015980: 6576 6961 7465 5f7a 6572 6f73 292e 746f  eviate_zeros).to
-00015990: 5f73 7472 696e 6728 6c69 6e65 5f77 6964  _string(line_wid
-000159a0: 7468 3d4e 6f6e 6529 2e72 6570 6c61 6365  th=None).replace
-000159b0: 2822 5c5f 222c 2022 5f22 290d 0a0d 0a20  ("\_", "_").... 
-000159c0: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
-000159d0: 662e 7061 7265 6e74 2e70 6172 656e 7441  f.parent.parentA
-000159e0: 7070 2e67 6574 466f 726d 2822 4147 4752  pp.getForm("AGGR
-000159f0: 5f46 4c4f 5722 292e 6461 7461 5f62 6f78  _FLOW").data_box
-00015a00: 2e76 616c 7565 7320 3d20 6466 5f64 6973  .values = df_dis
-00015a10: 706c 6179 2e73 706c 6974 2822 5c6e 2229  play.split("\n")
-00015a20: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00015a30: 7365 6c66 2e70 6172 656e 742e 7061 7265  self.parent.pare
-00015a40: 6e74 4170 702e 7377 6974 6368 466f 726d  ntApp.switchForm
-00015a50: 2822 4147 4752 5f46 4c4f 5722 290d 0a0d  ("AGGR_FLOW")...
-00015a60: 0a0d 0a20 2020 2064 6566 2067 656e 5f63  ...    def gen_c
-00015a70: 6f64 6528 7365 6c66 2c73 686f 775f 6e6f  ode(self,show_no
-00015a80: 7469 6669 6361 7469 6f6e 3d46 616c 7365  tification=False
-00015a90: 293a 0d0a 0d0a 2020 2020 2020 2020 636f  ):....        co
-00015aa0: 6465 203d 2022 220d 0a20 2020 2020 2020  de = ""..       
-00015ab0: 2063 6f64 6520 2b3d 2022 6672 6f6d 2073   code += "from s
-00015ac0: 6663 746f 6f6c 7320 696d 706f 7274 2046  fctools import F
-00015ad0: 6c6f 774d 6174 7269 7820 5c6e 696d 706f  lowMatrix \nimpo
-00015ae0: 7274 206e 756d 7079 2061 7320 6e70 5c6e  rt numpy as np\n
-00015af0: 220d 0a20 2020 2020 2020 2063 6f64 6520  "..        code 
-00015b00: 2b3d 2022 6672 6f6d 2073 6663 746f 6f6c  += "from sfctool
-00015b10: 7320 696d 706f 7274 2042 616c 616e 6365  s import Balance
-00015b20: 456e 7472 792c 4163 636f 756e 7473 5c6e  Entry,Accounts\n
-00015b30: 220d 0a20 2020 2020 2020 2063 6f64 6520  "..        code 
-00015b40: 2b3d 2022 6672 6f6d 2073 6663 746f 6f6c  += "from sfctool
-00015b50: 7320 696d 706f 7274 2043 6173 6846 6c6f  s import CashFlo
-00015b60: 7745 6e74 7279 5c6e 220d 0a20 2020 2020  wEntry\n"..     
-00015b70: 2020 2063 6f64 6520 2b3d 2022 6672 6f6d     code += "from
-00015b80: 2073 6663 746f 6f6c 7320 696d 706f 7274   sfctools import
-00015b90: 2049 4353 456e 7472 795c 6e22 0d0a 2020   ICSEntry\n"..  
-00015ba0: 2020 2020 2020 636f 6465 202b 3d20 2243        code += "C
-00015bb0: 4120 3d20 4163 636f 756e 7473 2e43 415c  A = Accounts.CA\
-00015bc0: 6e4b 4120 3d20 4163 636f 756e 7473 2e4b  nKA = Accounts.K
-00015bd0: 415c 6e5c 6e22 0d0a 0d0a 2020 2020 2020  A\n\n"....      
-00015be0: 2020 7375 626a 6563 7473 5f63 6f75 6e74    subjects_count
-00015bf0: 203d 2064 6566 6175 6c74 6469 6374 286c   = defaultdict(l
-00015c00: 616d 6264 613a 2030 2e30 290d 0a0d 0a20  ambda: 0.0).... 
-00015c10: 2020 2020 2020 2066 6f72 2066 696c 6564         for filed
-00015c20: 6174 6120 696e 2073 656c 662e 656e 7472  ata in self.entr
-00015c30: 795f 6461 7461 3a0d 0a20 2020 2020 2020  y_data:..       
-00015c40: 2020 2020 2061 6765 6e74 3120 3d20 6669       agent1 = fi
-00015c50: 6c65 6461 7461 5b22 6167 656e 7431 225d  ledata["agent1"]
-00015c60: 0d0a 2020 2020 2020 2020 2020 2020 6167  ..            ag
-00015c70: 656e 7432 203d 2066 696c 6564 6174 615b  ent2 = filedata[
-00015c80: 2261 6765 6e74 3222 5d0d 0a0d 0a20 2020  "agent2"]....   
-00015c90: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
-00015ca0: 7431 203d 3d20 6167 656e 7432 3a0d 0a20  t1 == agent2:.. 
-00015cb0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00015cc0: 6765 6e74 3220 3d20 226f 7468 6572 5f22  gent2 = "other_"
-00015cd0: 202b 2061 6765 6e74 320d 0a0d 0a20 2020   + agent2....   
-00015ce0: 2020 2020 2020 2020 2061 3120 3d20 6669           a1 = fi
-00015cf0: 6c65 6461 7461 5b22 6131 225d 2020 2320  ledata["a1"]  # 
-00015d00: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
-00015d10: 2020 2020 6531 203d 2066 696c 6564 6174      e1 = filedat
-00015d20: 615b 2265 3122 5d20 2023 202b 2022 5c6e  a["e1"]  # + "\n
-00015d30: 220d 0a20 2020 2020 2020 2020 2020 206c  "..            l
-00015d40: 3120 3d20 6669 6c65 6461 7461 5b22 6c31  1 = filedata["l1
-00015d50: 225d 2020 2320 2b20 225c 6e22 0d0a 2020  "]  # + "\n"..  
-00015d60: 2020 2020 2020 2020 2020 6132 203d 2066            a2 = f
-00015d70: 696c 6564 6174 615b 2261 3222 5d20 2023  iledata["a2"]  #
-00015d80: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-00015d90: 2020 2020 2065 3220 3d20 6669 6c65 6461       e2 = fileda
-00015da0: 7461 5b22 6532 225d 2020 2320 2b20 225c  ta["e2"]  # + "\
-00015db0: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
-00015dc0: 6c32 203d 2066 696c 6564 6174 615b 226c  l2 = filedata["l
-00015dd0: 3222 5d20 2023 202b 2022 5c6e 220d 0a0d  2"]  # + "\n"...
-00015de0: 0a20 2020 2020 2020 2020 2020 2066 6c6f  .            flo
-00015df0: 775f 6368 6563 6b20 3d20 5472 7565 0d0a  w_check = True..
-00015e00: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00015e10: 7428 2246 4c4f 5720 4348 4543 4b22 2c20  t("FLOW CHECK", 
-00015e20: 6669 6c65 6461 7461 5b22 7368 6f72 746e  filedata["shortn
-00015e30: 616d 6522 5d2c 6669 6c65 6461 7461 5b22  ame"],filedata["
-00015e40: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
-00015e50: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-00015e60: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
-00015e70: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
-00015e80: 7361 6374 696f 6e22 5d2c 7374 7229 2061  saction"],str) a
-00015e90: 6e64 2066 696c 6564 6174 615b 226c 6f67  nd filedata["log
-00015ea0: 2074 7261 6e73 6163 7469 6f6e 225d 2e73   transaction"].s
-00015eb0: 7472 6970 2829 203d 3d20 2254 7275 6522  trip() == "True"
-00015ec0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00015ed0: 2020 2023 2062 6f6f 6c28 6669 6c65 6461     # bool(fileda
-00015ee0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
-00015ef0: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
-00015f00: 2020 2020 2020 2020 666c 6f77 5f63 6865          flow_che
-00015f10: 636b 203d 2054 7275 650d 0a20 2020 2020  ck = True..     
-00015f20: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00015f30: 2866 6c6f 775f 6368 6563 6b29 0d0a 2020  (flow_check)..  
-00015f40: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00015f50: 7369 6e73 7461 6e63 6528 6669 6c65 6461  sinstance(fileda
-00015f60: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
-00015f70: 696f 6e22 5d2c 7374 7229 2061 6e64 2066  ion"],str) and f
-00015f80: 696c 6564 6174 615b 226c 6f67 2074 7261  iledata["log tra
-00015f90: 6e73 6163 7469 6f6e 225d 2e73 7472 6970  nsaction"].strip
-00015fa0: 2829 203d 3d20 2246 616c 7365 223a 0d0a  () == "False":..
-00015fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015fc0: 2320 626f 6f6c 2866 696c 6564 6174 615b  # bool(filedata[
-00015fd0: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
-00015fe0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
-00015ff0: 2020 2020 2066 6c6f 775f 6368 6563 6b20       flow_check 
-00016000: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
-00016010: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
-00016020: 6c6f 775f 6368 6563 6b29 0d0a 2020 2020  low_check)..    
-00016030: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00016040: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00016050: 6c6f 775f 6368 6563 6b20 3d20 6669 6c65  low_check = file
-00016060: 6461 7461 5b22 6c6f 6720 7472 616e 7361  data["log transa
-00016070: 6374 696f 6e22 5d0d 0a20 2020 2020 2020  ction"]..       
-00016080: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
-00016090: 6c6f 775f 6368 6563 6b29 0d0a 2020 2020  low_check)..    
-000160a0: 2020 2020 2020 2020 2370 7269 6e74 2822          #print("
-000160b0: 464c 4f57 2043 4845 434b 222c 2066 696c  FLOW CHECK", fil
-000160c0: 656e 616d 652c 2066 6c6f 775f 6368 6563  ename, flow_chec
-000160d0: 6b29 0d0a 2020 2020 2020 2020 2020 2020  k)..            
-000160e0: 7072 696e 7428 2274 7970 6522 2c20 7479  print("type", ty
-000160f0: 7065 2866 6c6f 775f 6368 6563 6b29 290d  pe(flow_check)).
-00016100: 0a0d 0a20 2020 2020 2020 2020 2020 206b  ...            k
-00016110: 696e 6420 3d20 6669 6c65 6461 7461 5b22  ind = filedata["
-00016120: 6b69 6e64 225d 0d0a 0d0a 2020 2020 2020  kind"]....      
-00016130: 2020 2020 2020 2373 7562 6a65 6374 203d        #subject =
-00016140: 2020 6669 6c65 6461 7461 5b22 7375 626a    filedata["subj
-00016150: 6563 7422 5d2e 7265 706c 6163 6528 2220  ect"].replace(" 
-00016160: 222c 225f 2229 202b 2022 5f22 202b 2066  ","_") + "_" + f
-00016170: 696c 6564 6174 615b 2273 686f 7274 6e61  iledata["shortna
-00016180: 6d65 222e 7265 706c 6163 6528 2220 222c  me".replace(" ",
-00016190: 225f 2229 5d2e 6c6f 7765 7228 290d 0a20  "_")].lower().. 
-000161a0: 2020 2020 2020 2020 2020 2073 7562 6a65             subje
-000161b0: 6374 203d 2020 6669 6c65 6461 7461 5b22  ct =  filedata["
-000161c0: 7368 6f72 746e 616d 6522 2e72 6570 6c61  shortname".repla
-000161d0: 6365 2822 2022 2c22 5f22 295d 2e72 6570  ce(" ","_")].rep
-000161e0: 6c61 6365 2822 2822 2c22 5f22 292e 7265  lace("(","_").re
-000161f0: 706c 6163 6528 2229 222c 2222 292e 6c6f  place(")","").lo
-00016200: 7765 7228 290d 0a20 2020 2020 2020 2020  wer()..         
-00016210: 2020 2073 7562 6a65 6374 5f73 7472 203d     subject_str =
-00016220: 2020 6669 6c65 6461 7461 5b22 7375 626a    filedata["subj
-00016230: 6563 7422 2e72 6570 6c61 6365 2822 2022  ect".replace(" "
-00016240: 2c22 5f22 295d 2e6c 6f77 6572 2829 2e63  ,"_")].lower().c
-00016250: 6170 6974 616c 697a 6528 292e 7265 706c  apitalize().repl
-00016260: 6163 6528 225f 222c 2022 2022 290d 0a0d  ace("_", " ")...
-00016270: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-00016280: 6a65 6374 735f 636f 756e 745b 7375 626a  jects_count[subj
-00016290: 6563 745d 202b 3d20 310d 0a20 2020 2020  ect] += 1..     
-000162a0: 2020 2020 2020 2069 6620 7375 626a 6563         if subjec
-000162b0: 7473 5f63 6f75 6e74 5b73 7562 6a65 6374  ts_count[subject
-000162c0: 5d20 3e20 313a 2023 2073 7566 6669 7820  ] > 1: # suffix 
-000162d0: 666f 7220 7361 6d65 206e 616d 6573 0d0a  for same names..
-000162e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000162f0: 7375 626a 6563 7420 2b3d 2022 5f25 6922  subject += "_%i"
-00016300: 2025 2069 6e74 2873 7562 6a65 6374 735f   % int(subjects_
-00016310: 636f 756e 745b 7375 626a 6563 745d 290d  count[subject]).
-00016320: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00016330: 2071 7561 6e74 6974 7920 3d20 2271 2220   quantity = "q" 
-00016340: 2320 6669 6c65 6461 7461 5b22 7175 616e  # filedata["quan
-00016350: 7469 7479 225d 0d0a 0d0a 2020 2020 2020  tity"]....      
-00016360: 2020 2020 2020 636f 6d6d 616e 6473 203d        commands =
-00016370: 205b 5d0d 0a0d 0a20 2020 2020 2020 2020   []....         
-00016380: 2020 2069 6620 2275 6e69 2d64 6972 6563     if "uni-direc
-00016390: 7469 6f6e 616c 2220 696e 2066 696c 6564  tional" in filed
-000163a0: 6174 613a 0d0a 2020 2020 2020 2020 2020  ata:..          
-000163b0: 2020 2020 2020 756e 6964 6972 203d 2066        unidir = f
-000163c0: 696c 6564 6174 615b 2275 6e69 2d64 6972  iledata["uni-dir
-000163d0: 6563 7469 6f6e 616c 225d 0d0a 0d0a 2020  ectional"]....  
-000163e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000163f0: 6d6d 616e 6473 2e61 7070 656e 6428 2263  mmands.append("c
-00016400: 6f6e 6420 3d20 2869 7369 6e73 7461 6e63  ond = (isinstanc
-00016410: 6528 712c 666c 6f61 7429 206f 7220 6973  e(q,float) or is
-00016420: 696e 7374 616e 6365 2871 2c69 6e74 2929  instance(q,int))
-00016430: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00016440: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
-00016450: 656e 6428 2269 6620 636f 6e64 3a20 6173  end("if cond: as
-00016460: 7365 7274 206e 6f74 206e 702e 6973 6e61  sert not np.isna
-00016470: 6e28 7129 2229 0d0a 2020 2020 2020 2020  n(q)")..        
-00016480: 2020 2020 2020 2020 2320 5e20 7769 6c6c          # ^ will
-00016490: 2061 6c73 6f20 7061 7373 2066 6f72 206e   also pass for n
-000164a0: 702e 666c 6f61 7436 340d 0a20 2020 2020  p.float64..     
-000164b0: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
-000164c0: 6e64 732e 6170 7065 6e64 2822 6966 2063  nds.append("if c
-000164d0: 6f6e 643a 2061 7373 6572 7420 7120 3c20  ond: assert q < 
-000164e0: 2b6e 702e 696e 6622 290d 0a20 2020 2020  +np.inf")..     
-000164f0: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
-00016500: 6e64 732e 6170 7065 6e64 2822 6966 2063  nds.append("if c
-00016510: 6f6e 643a 2061 7373 6572 7420 7120 3e20  ond: assert q > 
-00016520: 2d6e 702e 696e 6622 290d 0a0d 0a20 2020  -np.inf")....   
-00016530: 2020 2020 2020 2020 2020 2020 2023 7072               #pr
-00016540: 696e 7428 2275 6e69 2d64 6972 6563 7469  int("uni-directi
-00016550: 6f6e 616c 222c 756e 6964 6972 290d 0a20  onal",unidir).. 
-00016560: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00016570: 6620 7374 7228 756e 6964 6972 2920 3d3d  f str(unidir) ==
-00016580: 2022 5472 7565 223a 2023 2064 6f20 6e6f   "True": # do no
-00016590: 7420 646f 2062 6f6f 6c28 756e 6964 6972  t do bool(unidir
-000165a0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000165b0: 2020 2020 2020 2023 6e61 6d61 6161 203d         #namaaa =
-000165c0: 2066 696c 6564 6174 615b 2273 686f 7274   filedata["short
-000165d0: 6e61 6d65 225d 0d0a 2020 2020 2020 2020  name"]..        
-000165e0: 2020 2020 2020 2020 2020 2020 2373 656c              #sel
-000165f0: 662e 6e6f 7469 6679 2820 286e 616d 6161  f.notify( (namaa
-00016600: 612b 2073 7472 2875 6e69 6469 7229 2b20  a+ str(unidir)+ 
-00016610: 223d 222b 2873 7472 2862 6f6f 6c28 756e  "="+(str(bool(un
-00016620: 6964 6972 2929 2929 2c74 6974 6c65 3d22  idir)))),title="
-00016630: 6368 6563 6b22 290d 0a20 2020 2020 2020  check")..       
-00016640: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00016650: 6d61 6e64 732e 6170 7065 6e64 2822 6966  mands.append("if
-00016660: 2063 6f6e 643a 2061 7373 6572 7420 7120   cond: assert q 
-00016670: 3e3d 2030 2c20 2768 6176 6520 746f 2070  >= 0, 'have to p
-00016680: 6173 7320 706f 7369 7469 7665 2071 7561  ass positive qua
-00016690: 6e74 6974 793a 2075 6e69 6469 7265 6374  ntity: unidirect
-000166a0: 696f 6e61 6c20 7472 616e 7361 6374 696f  ional transactio
-000166b0: 6e27 2229 0d0a 0d0a 2020 2020 2020 2020  n'")....        
-000166c0: 2020 2020 636f 6d6d 616e 6473 203d 2063      commands = c
-000166d0: 6f6d 6d61 6e64 7320 2b20 5b22 2573 2e62  ommands + ["%s.b
-000166e0: 616c 616e 6365 5f73 6865 6574 2e64 6973  alance_sheet.dis
-000166f0: 656e 6761 6765 2829 2220 2520 6167 656e  engage()" % agen
-00016700: 7431 5d0d 0a20 2020 2020 2020 2020 2020  t1]..           
-00016710: 2069 6620 5472 7565 3a20 2320 6167 656e   if True: # agen
-00016720: 7431 2021 3d20 6167 656e 7432 3a0d 0a20  t1 != agent2:.. 
-00016730: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00016740: 6f6d 6d61 6e64 732b 3d20 5b22 2573 2e62  ommands+= ["%s.b
-00016750: 616c 616e 6365 5f73 6865 6574 2e64 6973  alance_sheet.dis
-00016760: 656e 6761 6765 2829 2220 2520 6167 656e  engage()" % agen
-00016770: 7432 5d0d 0a0d 0a20 2020 2020 2020 2020  t2]....         
-00016780: 2020 2066 6f72 2065 6e74 7279 2069 6e20     for entry in 
-00016790: 6531 2e73 706c 6974 2822 5c6e 2229 3a0d  e1.split("\n"):.
-000167a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000167b0: 2069 6620 656e 7472 7920 213d 2022 2220   if entry != "" 
-000167c0: 616e 6420 656e 7472 7920 213d 2022 5c6e  and entry != "\n
-000167d0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-000167e0: 2020 2020 2020 2020 7369 676e 2c20 6974          sign, it
-000167f0: 656d 2c20 7369 6c65 6e74 203d 2073 656c  em, silent = sel
-00016800: 662e 656e 7472 795f 746f 5f76 616c 7328  f.entry_to_vals(
-00016810: 656e 7472 792c 2061 6765 6e74 312c 2022  entry, agent1, "
-00016820: 4571 7569 7479 2229 0d0a 2020 2020 2020  Equity")..      
-00016830: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00016840: 2073 6967 6e20 6973 206e 6f74 204e 6f6e   sign is not Non
-00016850: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00016860: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
-00016870: 616e 6473 2e61 7070 656e 6428 2225 732e  ands.append("%s.
-00016880: 6261 6c61 6e63 655f 7368 6565 742e 6368  balance_sheet.ch
-00016890: 616e 6765 5f69 7465 6d28 2725 7327 2c20  ange_item('%s', 
-000168a0: 2573 2c20 2573 2c20 7375 7070 7265 7373  %s, %s, suppress
-000168b0: 5f73 746f 636b 3d25 7329 2220 2520 280d  _stock=%s)" % (.
-000168c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000168d0: 2020 2020 2020 2020 2061 6765 6e74 312c           agent1,
-000168e0: 2069 7465 6d2c 2022 4261 6c61 6e63 6545   item, "BalanceE
-000168f0: 6e74 7279 2e45 5155 4954 5922 2c20 7369  ntry.EQUITY", si
-00016900: 676e 202b 2071 7561 6e74 6974 792c 2073  gn + quantity, s
-00016910: 696c 656e 7429 290d 0a20 2020 2020 2020  ilent))..       
-00016920: 2020 2020 2066 6f72 2065 6e74 7279 2069       for entry i
-00016930: 6e20 6131 2e73 706c 6974 2822 5c6e 2229  n a1.split("\n")
-00016940: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016950: 2020 2069 6620 656e 7472 7920 213d 2022     if entry != "
-00016960: 2220 616e 6420 656e 7472 7920 213d 2022  " and entry != "
-00016970: 5c6e 223a 0d0a 2020 2020 2020 2020 2020  \n":..          
-00016980: 2020 2020 2020 2020 2020 7369 676e 2c20            sign, 
-00016990: 6974 656d 2c20 7369 6c65 6e74 203d 2073  item, silent = s
-000169a0: 656c 662e 656e 7472 795f 746f 5f76 616c  elf.entry_to_val
-000169b0: 7328 656e 7472 792c 2061 6765 6e74 312c  s(entry, agent1,
-000169c0: 2022 4173 7365 7473 2229 0d0a 2020 2020   "Assets")..    
+00014400: 2020 7365 6c66 2e6e 6f74 6966 7928 7374    self.notify(st
+00014410: 7228 6529 2c20 7469 746c 653d 2245 7272  r(e), title="Err
+00014420: 6f72 2064 7572 696e 6720 4578 6365 6c20  or during Excel 
+00014430: 636f 6e76 6572 7369 6f6e 2229 0d0a 0d0a  conversion")....
+00014440: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00014450: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+00014460: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00014470: 2e6e 6f74 6966 7928 7374 7228 6529 2c20  .notify(str(e), 
+00014480: 7469 746c 653d 2245 7272 6f72 2064 7572  title="Error dur
+00014490: 696e 6720 6d61 7472 6978 2067 656e 6572  ing matrix gener
+000144a0: 6174 696f 6e22 290d 0a0d 0a20 2020 2064  ation")....    d
+000144b0: 6566 2072 656d 6f76 655f 6974 656d 2873  ef remove_item(s
+000144c0: 656c 6629 3a0d 0a0d 0a20 2020 2020 2020  elf):....       
+000144d0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+000144e0: 2020 2073 656c 6563 7465 645f 726f 7773     selected_rows
+000144f0: 203d 2073 6f72 7465 6428 7365 7428 696e   = sorted(set(in
+00014500: 6465 782e 726f 7728 2920 666f 7220 696e  dex.row() for in
+00014510: 6465 7820 696e 0d0a 2020 2020 2020 2020  dex in..        
+00014520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014530: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00014540: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+00014550: 6965 772e 7365 6c65 6374 6564 496e 6465  iew.selectedInde
+00014560: 7865 7328 2929 290d 0a0d 0a20 2020 2020  xes()))....     
+00014570: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+00014580: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
+00014590: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+000145a0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+000145b0: 226e 6f20 7365 6c65 6374 6564 2072 6f77  "no selected row
+000145c0: 7322 2c74 6974 6c65 3d22 4572 726f 7222  s",title="Error"
+000145d0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000145e0: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
+000145f0: 2020 2020 2020 2020 2073 656c 6563 7469           selecti
+00014600: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
+00014610: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
+00014620: 2020 2020 2079 6573 203d 2020 7365 6c66       yes =  self
+00014630: 2e61 736b 5f71 7565 7374 696f 6e28 2727  .ask_question(''
+00014640: 2c22 4172 6520 796f 7520 7375 7265 2079  ,"Are you sure y
+00014650: 6f75 2077 616e 7420 746f 2072 656d 6f76  ou want to remov
+00014660: 6520 7468 6520 656e 7472 7920 2725 7327  e the entry '%s'
+00014670: 3f22 2573 656c 662e 656e 7472 795f 6461  ?"%self.entry_da
+00014680: 7461 5b73 656c 6563 7469 6f6e 5d5b 2273  ta[selection]["s
+00014690: 7562 6a65 6374 225d 290d 0a20 2020 2020  ubject"])..     
+000146a0: 2020 2020 2020 2069 6620 7965 733a 0d0a         if yes:..
+000146b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000146c0: 2020 7365 6c66 2e64 7261 7763 616e 7661    self.drawcanva
+000146d0: 732e 7265 6d6f 7665 5f63 6f6e 6e65 6374  s.remove_connect
+000146e0: 696f 6e28 7365 6c66 2e65 6e74 7279 5f64  ion(self.entry_d
+000146f0: 6174 615b 7365 6c65 6374 696f 6e5d 5b22  ata[selection]["
+00014700: 7368 6f72 746e 616d 6522 5d29 0d0a 0d0a  shortname"])....
+00014710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014720: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+00014730: 5669 6577 2e72 656d 6f76 6552 6f77 2873  View.removeRow(s
+00014740: 656c 6563 7469 6f6e 290d 0a20 2020 2020  election)..     
+00014750: 2020 2020 2020 2020 2020 2064 656c 2073             del s
+00014760: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+00014770: 656c 6563 7469 6f6e 5d0d 0a0d 0a20 2020  election]....   
+00014780: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00014790: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+000147a0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+000147b0: 7469 6679 2873 7472 2865 292c 2074 6974  tify(str(e), tit
+000147c0: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
+000147d0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+000147e0: 2020 2020 2020 2020 2073 656c 662e 7570           self.up
+000147f0: 6461 7465 5f74 6162 6c65 2829 0d0a 0d0a  date_table()....
+00014800: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00014810: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+00014820: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00014830: 2e6e 6f74 6966 7928 7374 7228 6529 2c20  .notify(str(e), 
+00014840: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+00014850: 0d0a 0d0a 2020 2020 6465 6620 636f 6e76  ....    def conv
+00014860: 6572 745f 6466 5f74 6f5f 7465 7828 7365  ert_df_to_tex(se
+00014870: 6c66 2c64 6629 3a0d 0a0d 0a20 2020 2020  lf,df):....     
+00014880: 2020 2064 6566 2077 7261 7073 7472 696e     def wrapstrin
+00014890: 6728 7329 3a0d 0a20 2020 2020 2020 2020  g(s):..         
+000148a0: 2020 2023 2077 7261 7073 2073 7472 696e     # wraps strin
+000148b0: 670d 0a20 2020 2020 2020 2020 2020 2072  g..            r
+000148c0: 6574 7572 6e20 7465 7874 7772 6170 2e77  eturn textwrap.w
+000148d0: 7261 7028 732c 2077 6964 7468 3d31 3029  rap(s, width=10)
+000148e0: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
+000148f0: 6162 6272 6576 6961 7465 5f7a 6572 6f73  abbreviate_zeros
+00014900: 286d 795f 6974 656d 293a 0d0a 2020 2020  (my_item):..    
+00014910: 2020 2020 2020 2020 6966 206d 795f 6974          if my_it
+00014920: 656d 203d 3d20 2230 2220 6f72 206d 795f  em == "0" or my_
+00014930: 6974 656d 203d 3d20 303a 0d0a 2020 2020  item == 0:..    
+00014940: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00014950: 726e 2022 202e 2d20 2220 2023 202e 2d20  rn " .- "  # .- 
+00014960: 220d 0a20 2020 2020 2020 2020 2020 2065  "..            e
+00014970: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00014980: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
+00014990: 7374 7228 6d79 5f69 7465 6d29 0d0a 2020  str(my_item)..  
+000149a0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+000149b0: 785f 6c65 6e20 3d20 3130 0d0a 2020 2020  x_len = 10..    
+000149c0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+000149d0: 656e 286d 795f 6974 656d 2920 3e20 6d61  en(my_item) > ma
+000149e0: 785f 6c65 6e3a 0d0a 2020 2020 2020 2020  x_len:..        
+000149f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00014a00: 726e 206d 795f 6974 656d 5b3a 6d61 785f  rn my_item[:max_
+00014a10: 6c65 6e5d 202b 2022 2e2e 2e22 0d0a 2020  len] + "..."..  
+00014a20: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00014a30: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00014a40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00014a50: 6d79 5f69 7465 6d0d 0a0d 0a20 2020 2020  my_item....     
+00014a60: 2020 2064 665f 6261 636b 7570 203d 2064     df_backup = d
+00014a70: 662e 636f 7079 2829 0d0a 0d0a 2020 2020  f.copy()....    
+00014a80: 2020 2020 6466 5f6c 6174 6578 203d 2064      df_latex = d
+00014a90: 662e 746f 5f6c 6174 6578 286c 6f6e 6774  f.to_latex(longt
+00014aa0: 6162 6c65 3d46 616c 7365 2c20 6573 6361  able=False, esca
+00014ab0: 7065 3d46 616c 7365 292e 7265 706c 6163  pe=False).replac
+00014ac0: 6528 22ce 9422 2c20 2224 5c44 656c 7461  e("..", "$\Delta
+00014ad0: 2422 290d 0a0d 0a20 2020 2020 2020 2064  $")....        d
+00014ae0: 665f 6c61 7465 7820 3d20 6466 5f6c 6174  f_latex = df_lat
+00014af0: 6578 2e72 6570 6c61 6365 2822 5c5c 6265  ex.replace("\\be
+00014b00: 6769 6e7b 7461 6275 6c61 727d 222c 2022  gin{tabular}", "
+00014b10: 5c5c 6265 6769 6e7b 7461 6275 6c61 7278  \\begin{tabularx
+00014b20: 7d7b 5c5c 7465 7874 7769 6474 687d 2229  }{\\textwidth}")
+00014b30: 0d0a 2020 2020 2020 2020 6466 5f6c 6174  ..        df_lat
+00014b40: 6578 203d 2064 665f 6c61 7465 782e 7265  ex = df_latex.re
+00014b50: 706c 6163 6528 225c 5c65 6e64 7b74 6162  place("\\end{tab
+00014b60: 756c 6172 7d22 2c20 225c 5c65 6e64 7b74  ular}", "\\end{t
+00014b70: 6162 756c 6172 787d 2229 0d0a 2020 2020  abularx}")..    
+00014b80: 2020 2020 6466 5f6c 6174 6578 203d 2022      df_latex = "
+00014b90: 5c5c 6265 6769 6e7b 736d 616c 6c7d 5c6e  \\begin{small}\n
+00014ba0: 2220 2b20 6466 5f6c 6174 6578 202b 2022  " + df_latex + "
+00014bb0: 5c6e 5c65 6e64 7b73 6d61 6c6c 7d22 0d0a  \n\end{small}"..
+00014bc0: 0d0a 2020 2020 2020 2020 6466 5f6c 6174  ..        df_lat
+00014bd0: 6578 203d 2064 665f 6c61 7465 782e 7265  ex = df_latex.re
+00014be0: 706c 6163 6528 225c 5c6c 6566 7428 222c  place("\\left(",
+00014bf0: 2022 2822 290d 0a20 2020 2020 2020 2064   "(")..        d
+00014c00: 665f 6c61 7465 7820 3d20 6466 5f6c 6174  f_latex = df_lat
+00014c10: 6578 2e72 6570 6c61 6365 2822 5c5c 7269  ex.replace("\\ri
+00014c20: 6768 7429 222c 2022 2922 290d 0a0d 0a20  ght)", ")").... 
+00014c30: 2020 2020 2020 2064 665f 6c61 7465 7820         df_latex 
+00014c40: 3d20 6466 5f6c 6174 6578 2e72 6570 6c61  = df_latex.repla
+00014c50: 6365 2822 7b6c 222c 2022 7b4c 7b33 636d  ce("{l", "{L{3cm
+00014c60: 7d22 290d 0a0d 0a20 2020 2020 2020 2064  }")....        d
+00014c70: 665f 6c61 7465 7820 3d20 2222 220d 0a5c  f_latex = """..\
+00014c80: 5c64 6f63 756d 656e 7463 6c61 7373 5b61  \documentclass[a
+00014c90: 3370 6170 6572 2c6c 616e 6473 6361 7065  3paper,landscape
+00014ca0: 5d7b 6172 7469 636c 657d 0d0a 5c5c 7573  ]{article}..\\us
+00014cb0: 6570 6163 6b61 6765 7b62 6f6f 6b74 6162  epackage{booktab
+00014cc0: 737d 0d0a 5c5c 7573 6570 6163 6b61 6765  s}..\\usepackage
+00014cd0: 7b61 646a 7573 7462 6f78 7d0d 0a5c 5c75  {adjustbox}..\\u
+00014ce0: 7365 7061 636b 6167 655b 7461 626c 655d  sepackage[table]
+00014cf0: 7b78 636f 6c6f 727d 0d0a 5c5c 7573 6570  {xcolor}..\\usep
+00014d00: 6163 6b61 6765 7b6c 6f6e 6774 6162 6c65  ackage{longtable
+00014d10: 7d0d 0a5c 5c75 7365 7061 636b 6167 657b  }..\\usepackage{
+00014d20: 7461 6275 6c61 7278 2c72 6167 6765 6432  tabularx,ragged2
+00014d30: 657d 0d0a 5c5c 6465 6669 6e65 636f 6c6f  e}..\\definecolo
+00014d40: 727b 4772 6179 7d7b 6772 6179 7d7b 302e  r{Gray}{gray}{0.
+00014d50: 3930 7d0d 0a5c 5c64 6566 696e 6563 6f6c  90}..\\definecol
+00014d60: 6f72 7b4c 6967 6874 4772 6179 7d7b 6772  or{LightGray}{gr
+00014d70: 6179 7d7b 302e 3935 7d0d 0a5c 5c64 6566  ay}{0.95}..\\def
+00014d80: 696e 6563 6f6c 6f72 7b57 6869 7465 7d7b  inecolor{White}{
+00014d90: 7267 627d 7b31 2c31 2c31 7d0d 0a0d 0a5c  rgb}{1,1,1}....\
+00014da0: 5c6e 6577 636f 6c75 6d6e 7479 7065 7b67  \newcolumntype{g
+00014db0: 7d7b 3e7b 5c5c 636f 6c75 6d6e 636f 6c6f  }{>{\\columncolo
+00014dc0: 727b 5768 6974 657d 5c5c 6172 7261 7962  r{White}\\arrayb
+00014dd0: 6163 6b73 6c61 7368 7d4c 7d20 250d 0a5c  ackslash}L} %..\
+00014de0: 5c6e 6577 636f 6c75 6d6e 7479 7065 7b6c  \newcolumntype{l
+00014df0: 7d7b 3e7b 5c5c 636f 6c75 6d6e 636f 6c6f  }{>{\\columncolo
+00014e00: 727b 5768 6974 657d 5c5c 6172 7261 7962  r{White}\\arrayb
+00014e10: 6163 6b73 6c61 7368 7d70 7b33 636d 7d7d  ackslash}p{3cm}}
+00014e20: 2025 6365 6e74 6572 6564 2022 5822 2063   %centered "X" c
+00014e30: 6f6c 756d 6e0d 0a5c 5c6e 6577 636f 6c75  olumn..\\newcolu
+00014e40: 6d6e 7479 7065 7b4c 7d5b 315d 7b3e 7b5c  mntype{L}[1]{>{\
+00014e50: 5c72 6167 6765 6472 6967 6874 5c5c 6172  \raggedright\\ar
+00014e60: 7261 7962 6163 6b73 6c61 7368 7d70 7b5c  raybackslash}p{\
+00014e70: 5c64 696d 6578 7072 2331 2d32 5c5c 7461  \dimexpr#1-2\\ta
+00014e80: 6263 6f6c 7365 702d 325c 5c61 7272 6179  bcolsep-2\\array
+00014e90: 7275 6c65 7769 6474 682b 2e32 3170 747d  rulewidth+.21pt}
+00014ea0: 7d0d 0a0d 0a5c 5c75 7365 7061 636b 6167  }....\\usepackag
+00014eb0: 655b 6c65 6674 3d31 636d 2c72 6967 6874  e[left=1cm,right
+00014ec0: 3d31 2e35 636d 5d7b 6765 6f6d 6574 7279  =1.5cm]{geometry
+00014ed0: 7d0d 0a0d 0a5c 5c62 6567 696e 7b64 6f63  }....\\begin{doc
+00014ee0: 756d 656e 747d 5c6e 2222 2220 2b20 6466  ument}\n""" + df
+00014ef0: 5f6c 6174 6578 2020 202b 2022 5c6e 5c5c  _latex   + "\n\\
+00014f00: 656e 647b 646f 6375 6d65 6e74 7d22 0d0a  end{document}"..
+00014f10: 0d0a 2020 2020 2020 2020 7079 7065 7263  ..        pyperc
+00014f20: 6c69 702e 636f 7079 2864 665f 6c61 7465  lip.copy(df_late
+00014f30: 7829 0d0a 2020 2020 2020 2020 2373 656c  x)..        #sel
+00014f40: 662e 6e6f 7469 6679 286d 6573 7361 6765  f.notify(message
+00014f50: 3d22 4c61 5465 5820 636f 6465 2063 6f70  ="LaTeX code cop
+00014f60: 6965 6420 746f 2063 6c69 7062 6f61 7264  ied to clipboard
+00014f70: 2e20 4861 7665 2066 756e 2122 2c20 7469  . Have fun!", ti
+00014f80: 746c 653d 2248 6176 6520 6675 6e22 290d  tle="Have fun").
+00014f90: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
+00014fa0: 6174 7573 4261 7228 292e 7368 6f77 4d65  atusBar().showMe
+00014fb0: 7373 6167 6528 224c 6154 6558 2063 6f64  ssage("LaTeX cod
+00014fc0: 6520 636f 7069 6564 2074 6f20 636c 6970  e copied to clip
+00014fd0: 626f 6172 642e 2048 6176 6520 6675 6e21  board. Have fun!
+00014fe0: 2229 0d0a 0d0a 0d0a 2020 2020 2020 2020  ")......        
+00014ff0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  # -------------.
+00015000: 0a20 2020 2020 2020 2069 6620 4661 6c73  .        if Fals
+00015010: 653a 2023 2044 4550 5249 4341 5445 440d  e: # DEPRICATED.
+00015020: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+00015030: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+00015040: 2020 2020 2066 726f 6d20 7064 666c 6174       from pdflat
+00015050: 6578 2069 6d70 6f72 7420 5044 464c 6154  ex import PDFLaT
+00015060: 6558 0d0a 2020 2020 2020 2020 2020 2020  eX..            
+00015070: 2020 2020 7061 7468 203d 206f 732e 7061      path = os.pa
+00015080: 7468 2e64 6972 6e61 6d65 286f 732e 7061  th.dirname(os.pa
+00015090: 7468 2e61 6273 7061 7468 285f 5f66 696c  th.abspath(__fil
+000150a0: 655f 5f29 290d 0a20 2020 2020 2020 2020  e__))..         
+000150b0: 2020 2020 2020 206d 795f 6669 6c65 203d         my_file =
+000150c0: 206f 732e 7061 7468 2e6a 6f69 6e28 7061   os.path.join(pa
+000150d0: 7468 2c22 6d79 6d61 7472 6978 2229 0d0a  th,"mymatrix")..
+000150e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000150f0: 2020 6669 6c65 203d 206f 7065 6e28 6d79    file = open(my
+00015100: 5f66 696c 652c 2022 7722 290d 0a20 2020  _file, "w")..   
+00015110: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00015120: 652e 7772 6974 6528 2222 220d 0a20 2020  e.write("""..   
+00015130: 2020 2020 205c 5c64 6f63 756d 656e 7463       \\documentc
+00015140: 6c61 7373 5b61 3370 6170 6572 2c6c 616e  lass[a3paper,lan
+00015150: 6473 6361 7065 5d7b 6172 7469 636c 657d  dscape]{article}
+00015160: 0d0a 2020 2020 2020 2020 5c5c 7573 6570  ..        \\usep
+00015170: 6163 6b61 6765 7b62 6f6f 6b74 6162 737d  ackage{booktabs}
+00015180: 0d0a 2020 2020 2020 2020 5c5c 7573 6570  ..        \\usep
+00015190: 6163 6b61 6765 7b61 646a 7573 7462 6f78  ackage{adjustbox
+000151a0: 7d0d 0a20 2020 2020 2020 205c 5c75 7365  }..        \\use
+000151b0: 7061 636b 6167 655b 7461 626c 655d 7b78  package[table]{x
+000151c0: 636f 6c6f 727d 0d0a 2020 2020 2020 2020  color}..        
+000151d0: 5c5c 7573 6570 6163 6b61 6765 7b6c 6f6e  \\usepackage{lon
+000151e0: 6774 6162 6c65 7d0d 0a20 2020 2020 2020  gtable}..       
+000151f0: 205c 5c75 7365 7061 636b 6167 657b 7461   \\usepackage{ta
+00015200: 6275 6c61 7278 2c72 6167 6765 6432 657d  bularx,ragged2e}
+00015210: 0d0a 2020 2020 2020 2020 5c5c 6465 6669  ..        \\defi
+00015220: 6e65 636f 6c6f 727b 4772 6179 7d7b 6772  necolor{Gray}{gr
+00015230: 6179 7d7b 302e 3930 7d0d 0a20 2020 2020  ay}{0.90}..     
+00015240: 2020 205c 5c64 6566 696e 6563 6f6c 6f72     \\definecolor
+00015250: 7b4c 6967 6874 4772 6179 7d7b 6772 6179  {LightGray}{gray
+00015260: 7d7b 302e 3935 7d0d 0a20 2020 2020 2020  }{0.95}..       
+00015270: 205c 5c64 6566 696e 6563 6f6c 6f72 7b57   \\definecolor{W
+00015280: 6869 7465 7d7b 7267 627d 7b31 2c31 2c31  hite}{rgb}{1,1,1
+00015290: 7d0d 0a0d 0a20 2020 2020 2020 205c 5c6e  }....        \\n
+000152a0: 6577 636f 6c75 6d6e 7479 7065 7b67 7d7b  ewcolumntype{g}{
+000152b0: 3e7b 5c5c 636f 6c75 6d6e 636f 6c6f 727b  >{\\columncolor{
+000152c0: 5768 6974 657d 5c5c 6172 7261 7962 6163  White}\\arraybac
+000152d0: 6b73 6c61 7368 7d4c 7d20 250d 0a20 2020  kslash}L} %..   
+000152e0: 2020 2020 205c 5c6e 6577 636f 6c75 6d6e       \\newcolumn
+000152f0: 7479 7065 7b6c 7d7b 3e7b 5c5c 636f 6c75  type{l}{>{\\colu
+00015300: 6d6e 636f 6c6f 727b 5768 6974 657d 5c5c  mncolor{White}\\
+00015310: 6172 7261 7962 6163 6b73 6c61 7368 7d70  arraybackslash}p
+00015320: 7b33 636d 7d7d 2025 6365 6e74 6572 6564  {3cm}} %centered
+00015330: 2022 5822 2063 6f6c 756d 6e0d 0a20 2020   "X" column..   
+00015340: 2020 2020 205c 5c6e 6577 636f 6c75 6d6e       \\newcolumn
+00015350: 7479 7065 7b4c 7d5b 315d 7b3e 7b5c 5c72  type{L}[1]{>{\\r
+00015360: 6167 6765 6472 6967 6874 5c5c 6172 7261  aggedright\\arra
+00015370: 7962 6163 6b73 6c61 7368 7d70 7b5c 5c64  ybackslash}p{\\d
+00015380: 696d 6578 7072 2331 2d32 5c5c 7461 6263  imexpr#1-2\\tabc
+00015390: 6f6c 7365 702d 325c 5c61 7272 6179 7275  olsep-2\\arrayru
+000153a0: 6c65 7769 6474 682b 2e32 3170 747d 7d0d  lewidth+.21pt}}.
+000153b0: 0a0d 0a20 2020 2020 2020 205c 5c75 7365  ...        \\use
+000153c0: 7061 636b 6167 655b 6c65 6674 3d31 636d  package[left=1cm
+000153d0: 2c72 6967 6874 3d31 2e35 636d 5d7b 6765  ,right=1.5cm]{ge
+000153e0: 6f6d 6574 7279 7d0d 0a0d 0a20 2020 2020  ometry}....     
+000153f0: 2020 205c 5c62 6567 696e 7b64 6f63 756d     \\begin{docum
+00015400: 656e 747d 2222 2229 0d0a 2020 2020 2020  ent}""")..      
+00015410: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
+00015420: 7269 7465 2864 665f 6c61 7465 7829 0d0a  rite(df_latex)..
+00015430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015440: 6669 6c65 2e77 7269 7465 2822 2222 0d0a  file.write("""..
+00015450: 2020 2020 2020 2020 5c5c 656e 647b 646f          \\end{do
+00015460: 6375 6d65 6e74 7d22 2222 290d 0a20 2020  cument}""")..   
+00015470: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00015480: 652e 636c 6f73 6528 290d 0a20 2020 2020  e.close()..     
+00015490: 2020 2020 2020 2020 2020 2023 2070 6466             # pdf
+000154a0: 6c20 3d20 5044 464c 6154 6558 2e66 726f  l = PDFLaTeX.fro
+000154b0: 6d5f 7465 7866 696c 6528 276d 795f 7465  m_texfile('my_te
+000154c0: 7866 696c 652e 7465 7827 290d 0a20 2020  xfile.tex')..   
+000154d0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+000154e0: 6466 2c20 6c6f 672c 2063 6f6d 706c 6574  df, log, complet
+000154f0: 6564 5f70 726f 6365 7373 203d 2070 6466  ed_process = pdf
+00015500: 6c2e 6372 6561 7465 5f70 6466 286b 6565  l.create_pdf(kee
+00015510: 705f 7064 665f 6669 6c65 3d54 7275 652c  p_pdf_file=True,
+00015520: 206b 6565 705f 6c6f 675f 6669 6c65 3d54   keep_log_file=T
+00015530: 7275 6529 0d0a 2020 2020 2020 2020 2020  rue)..          
+00015540: 2020 2020 2020 2320 6f73 2e70 6f70 656e        # os.popen
+00015550: 2822 7064 666c 6174 6578 2025 7322 2025  ("pdflatex %s" %
+00015560: 2028 6f73 2e67 6574 6377 6428 292b 222f   (os.getcwd()+"/
+00015570: 6d79 5f74 6578 6669 6c65 2e74 6578 2229  my_texfile.tex")
+00015580: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00015590: 2020 2069 6d70 6f72 7420 7375 6270 726f     import subpro
+000155a0: 6365 7373 0d0a 2020 2020 2020 2020 2020  cess..          
+000155b0: 2020 2020 2020 7061 7468 203d 206f 732e        path = os.
+000155c0: 7061 7468 2e64 6972 6e61 6d65 286f 732e  path.dirname(os.
+000155d0: 7061 7468 2e61 6273 7061 7468 285f 5f66  path.abspath(__f
+000155e0: 696c 655f 5f29 290d 0a20 2020 2020 2020  ile__))..       
+000155f0: 2020 2020 2020 2020 2073 7562 7072 6f63           subproc
+00015600: 6573 732e 7275 6e28 2270 6466 6c61 7465  ess.run("pdflate
+00015610: 7820 2573 2220 2520 286f 732e 7061 7468  x %s" % (os.path
+00015620: 2e6a 6f69 6e28 7061 7468 2c22 6d79 6d61  .join(path,"myma
+00015630: 7472 6978 2e74 6578 2229 2929 2e63 6865  trix.tex"))).che
+00015640: 636b 5f72 6574 7572 6e63 6f64 6528 290d  ck_returncode().
+00015650: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00015660: 2020 2023 6f73 2e73 7461 7274 6669 6c65     #os.startfile
+00015670: 286f 732e 6765 7463 7764 2829 202b 2022  (os.getcwd() + "
+00015680: 5c5c 6d79 6d61 7472 6978 2e70 6466 2229  \\mymatrix.pdf")
+00015690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000156a0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+000156b0: 2020 2020 2020 2020 2020 2020 2320 7368              # sh
+000156c0: 7574 696c 2e72 6d74 7265 6528 6f73 2e67  util.rmtree(os.g
+000156d0: 6574 6377 6428 292b 225c 5c66 696c 6573  etcwd()+"\\files
+000156e0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+000156f0: 2020 2020 2020 2020 2320 6f73 2e6d 6b64          # os.mkd
+00015700: 6972 286f 732e 6765 7463 7764 2829 2b22  ir(os.getcwd()+"
+00015710: 5c5c 6669 6c65 7322 290d 0a0d 0a20 2020  \\files")....   
+00015720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015730: 2070 6174 6820 3d20 6f73 2e70 6174 682e   path = os.path.
+00015740: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
+00015750: 6162 7370 6174 6828 5f5f 6669 6c65 5f5f  abspath(__file__
+00015760: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+00015770: 2020 2020 2020 2020 7368 7574 696c 2e6d          shutil.m
+00015780: 6f76 6528 7061 7468 2b22 5c5c 6d79 6d61  ove(path+"\\myma
+00015790: 7472 6978 2e74 6578 2220 2c20 7061 7468  trix.tex" , path
+000157a0: 2b20 225c 5c66 696c 6573 5c5c 6d79 6d61  + "\\files\\myma
+000157b0: 7472 6978 2e74 6578 2229 0d0a 2020 2020  trix.tex")..    
+000157c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157d0: 7368 7574 696c 2e6d 6f76 6528 7061 7468  shutil.move(path
+000157e0: 202b 2022 5c5c 6d79 6d61 7472 6978 2e6c   + "\\mymatrix.l
+000157f0: 6f67 222c 2070 6174 6820 2b20 225c 5c66  og", path + "\\f
+00015800: 696c 6573 5c5c 6d79 6d61 7472 6978 2e6c  iles\\mymatrix.l
+00015810: 6f67 2229 0d0a 2020 2020 2020 2020 2020  og")..          
+00015820: 2020 2020 2020 2020 2020 7368 7574 696c            shutil
+00015830: 2e6d 6f76 6528 7061 7468 202b 2022 5c5c  .move(path + "\\
+00015840: 6d79 6d61 7472 6978 2e61 7578 222c 2070  mymatrix.aux", p
+00015850: 6174 6820 2b20 225c 5c66 696c 6573 5c5c  ath + "\\files\\
+00015860: 5c6d 796d 6174 7269 782e 6175 7822 290d  \mymatrix.aux").
+00015870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015880: 2020 2020 2073 6875 7469 6c2e 6d6f 7665       shutil.move
+00015890: 2870 6174 6820 2b20 225c 5c6d 796d 6174  (path + "\\mymat
+000158a0: 7269 782e 7064 6622 2c20 7061 7468 202b  rix.pdf", path +
+000158b0: 2022 5c5c 6669 6c65 735c 5c6d 796d 6174   "\\files\\mymat
+000158c0: 7269 782e 7064 6622 290d 0a20 2020 2020  rix.pdf")..     
+000158d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000158e0: 7368 7574 696c 2e63 6f70 7928 6f73 2e67  shutil.copy(os.g
+000158f0: 6574 6377 6428 2920 2b20 225c 5c66 696c  etcwd() + "\\fil
+00015900: 6573 5c5c 6d79 6d61 7472 6978 2e68 746d  es\\mymatrix.htm
+00015910: 6c22 2c6f 732e 6765 7463 7764 2829 202b  l",os.getcwd() +
+00015920: 2022 5c5c 6669 6c65 735c 5c6d 796d 6174   "\\files\\mymat
+00015930: 7269 782e 6874 6d6c 2229 0d0a 2020 2020  rix.html")..    
+00015940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015950: 2373 6875 7469 6c2e 636f 7079 286f 732e  #shutil.copy(os.
+00015960: 6765 7463 7764 2829 202b 2022 5c5c 6669  getcwd() + "\\fi
+00015970: 6c65 735c 5c6d 7973 7479 6c65 2e63 7373  les\\mystyle.css
+00015980: 222c 206f 732e 6765 7463 7764 2829 202b  ", os.getcwd() +
+00015990: 2022 5c5c 6669 6c65 735c 5c6d 7973 7479   "\\files\\mysty
+000159a0: 6c65 2e63 7373 2229 0d0a 2020 2020 2020  le.css")..      
+000159b0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000159c0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+000159d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000159e0: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+000159f0: 7928 6d65 7373 6167 653d 7374 7228 6529  y(message=str(e)
+00015a00: 2c74 6974 6c65 3d22 416e 2045 7272 6f72  ,title="An Error
+00015a10: 206f 6363 7572 7265 642e 2e2e 2849 4420   occurred...(ID 
+00015a20: 3133 3038 2922 290d 0a0d 0a20 2020 2020  1308)")....     
+00015a30: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00015a40: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+00015a50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00015a60: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
+00015a70: 6765 3d73 7472 2865 292c 7469 746c 653d  ge=str(e),title=
+00015a80: 2241 6e20 4572 726f 7220 6f63 6375 7272  "An Error occurr
+00015a90: 6564 2e2e 2e28 4944 2031 3331 3129 2229  ed...(ID 1311)")
+00015aa0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00015ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d  -------------...
+00015ac0: 0a20 2020 2020 2020 2020 2020 2070 642e  .            pd.
+00015ad0: 6f70 7469 6f6e 732e 6469 7370 6c61 792e  options.display.
+00015ae0: 6d61 785f 636f 6c77 6964 7468 203d 2032  max_colwidth = 2
+00015af0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00015b00: 6466 5f64 6973 706c 6179 203d 2064 665f  df_display = df_
+00015b10: 6261 636b 7570 2e61 7070 6c79 6d61 7028  backup.applymap(
+00015b20: 6162 6272 6576 6961 7465 5f7a 6572 6f73  abbreviate_zeros
+00015b30: 292e 746f 5f73 7472 696e 6728 6c69 6e65  ).to_string(line
+00015b40: 5f77 6964 7468 3d4e 6f6e 6529 2e72 6570  _width=None).rep
+00015b50: 6c61 6365 2822 5c5f 222c 2022 5f22 290d  lace("\_", "_").
+00015b60: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00015b70: 2073 656c 662e 7061 7265 6e74 2e70 6172   self.parent.par
+00015b80: 656e 7441 7070 2e67 6574 466f 726d 2822  entApp.getForm("
+00015b90: 4147 4752 5f46 4c4f 5722 292e 6461 7461  AGGR_FLOW").data
+00015ba0: 5f62 6f78 2e76 616c 7565 7320 3d20 6466  _box.values = df
+00015bb0: 5f64 6973 706c 6179 2e73 706c 6974 2822  _display.split("
+00015bc0: 5c6e 2229 0d0a 2020 2020 2020 2020 2020  \n")..          
+00015bd0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
+00015be0: 7061 7265 6e74 4170 702e 7377 6974 6368  parentApp.switch
+00015bf0: 466f 726d 2822 4147 4752 5f46 4c4f 5722  Form("AGGR_FLOW"
+00015c00: 290d 0a0d 0a0d 0a20 2020 2064 6566 2067  )......    def g
+00015c10: 656e 5f63 6f64 6528 7365 6c66 2c73 686f  en_code(self,sho
+00015c20: 775f 6e6f 7469 6669 6361 7469 6f6e 3d46  w_notification=F
+00015c30: 616c 7365 293a 0d0a 0d0a 2020 2020 2020  alse):....      
+00015c40: 2020 636f 6465 203d 2022 220d 0a20 2020    code = ""..   
+00015c50: 2020 2020 2063 6f64 6520 2b3d 2022 6672       code += "fr
+00015c60: 6f6d 2073 6663 746f 6f6c 7320 696d 706f  om sfctools impo
+00015c70: 7274 2046 6c6f 774d 6174 7269 7820 5c6e  rt FlowMatrix \n
+00015c80: 696d 706f 7274 206e 756d 7079 2061 7320  import numpy as 
+00015c90: 6e70 5c6e 220d 0a20 2020 2020 2020 2063  np\n"..        c
+00015ca0: 6f64 6520 2b3d 2022 6672 6f6d 2073 6663  ode += "from sfc
+00015cb0: 746f 6f6c 7320 696d 706f 7274 2042 616c  tools import Bal
+00015cc0: 616e 6365 456e 7472 792c 4163 636f 756e  anceEntry,Accoun
+00015cd0: 7473 5c6e 220d 0a20 2020 2020 2020 2063  ts\n"..        c
+00015ce0: 6f64 6520 2b3d 2022 6672 6f6d 2073 6663  ode += "from sfc
+00015cf0: 746f 6f6c 7320 696d 706f 7274 2043 6173  tools import Cas
+00015d00: 6846 6c6f 7745 6e74 7279 5c6e 220d 0a20  hFlowEntry\n".. 
+00015d10: 2020 2020 2020 2063 6f64 6520 2b3d 2022         code += "
+00015d20: 6672 6f6d 2073 6663 746f 6f6c 7320 696d  from sfctools im
+00015d30: 706f 7274 2049 4353 456e 7472 795c 6e22  port ICSEntry\n"
+00015d40: 0d0a 2020 2020 2020 2020 636f 6465 202b  ..        code +
+00015d50: 3d20 2243 4120 3d20 4163 636f 756e 7473  = "CA = Accounts
+00015d60: 2e43 415c 6e4b 4120 3d20 4163 636f 756e  .CA\nKA = Accoun
+00015d70: 7473 2e4b 415c 6e5c 6e22 0d0a 0d0a 2020  ts.KA\n\n"....  
+00015d80: 2020 2020 2020 7375 626a 6563 7473 5f63        subjects_c
+00015d90: 6f75 6e74 203d 2064 6566 6175 6c74 6469  ount = defaultdi
+00015da0: 6374 286c 616d 6264 613a 2030 2e30 290d  ct(lambda: 0.0).
+00015db0: 0a0d 0a20 2020 2020 2020 2066 6f72 2066  ...        for f
+00015dc0: 696c 6564 6174 6120 696e 2073 656c 662e  iledata in self.
+00015dd0: 656e 7472 795f 6461 7461 3a0d 0a20 2020  entry_data:..   
+00015de0: 2020 2020 2020 2020 2061 6765 6e74 3120           agent1 
+00015df0: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
+00015e00: 7431 225d 0d0a 2020 2020 2020 2020 2020  t1"]..          
+00015e10: 2020 6167 656e 7432 203d 2066 696c 6564    agent2 = filed
+00015e20: 6174 615b 2261 6765 6e74 3222 5d0d 0a0d  ata["agent2"]...
+00015e30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00015e40: 6167 656e 7431 203d 3d20 6167 656e 7432  agent1 == agent2
+00015e50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00015e60: 2020 2061 6765 6e74 3220 3d20 226f 7468     agent2 = "oth
+00015e70: 6572 5f22 202b 2061 6765 6e74 320d 0a0d  er_" + agent2...
+00015e80: 0a20 2020 2020 2020 2020 2020 2061 3120  .            a1 
+00015e90: 3d20 6669 6c65 6461 7461 5b22 6131 225d  = filedata["a1"]
+00015ea0: 2020 2320 2b20 225c 6e22 0d0a 2020 2020    # + "\n"..    
+00015eb0: 2020 2020 2020 2020 6531 203d 2066 696c          e1 = fil
+00015ec0: 6564 6174 615b 2265 3122 5d20 2023 202b  edata["e1"]  # +
+00015ed0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+00015ee0: 2020 206c 3120 3d20 6669 6c65 6461 7461     l1 = filedata
+00015ef0: 5b22 6c31 225d 2020 2320 2b20 225c 6e22  ["l1"]  # + "\n"
+00015f00: 0d0a 2020 2020 2020 2020 2020 2020 6132  ..            a2
+00015f10: 203d 2066 696c 6564 6174 615b 2261 3222   = filedata["a2"
+00015f20: 5d20 2023 202b 2022 5c6e 220d 0a20 2020  ]  # + "\n"..   
+00015f30: 2020 2020 2020 2020 2065 3220 3d20 6669           e2 = fi
+00015f40: 6c65 6461 7461 5b22 6532 225d 2020 2320  ledata["e2"]  # 
+00015f50: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
+00015f60: 2020 2020 6c32 203d 2066 696c 6564 6174      l2 = filedat
+00015f70: 615b 226c 3222 5d20 2023 202b 2022 5c6e  a["l2"]  # + "\n
+00015f80: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+00015f90: 2066 6c6f 775f 6368 6563 6b20 3d20 5472   flow_check = Tr
+00015fa0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+00015fb0: 7072 696e 7428 2246 4c4f 5720 4348 4543  print("FLOW CHEC
+00015fc0: 4b22 2c20 6669 6c65 6461 7461 5b22 7368  K", filedata["sh
+00015fd0: 6f72 746e 616d 6522 5d2c 6669 6c65 6461  ortname"],fileda
+00015fe0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
+00015ff0: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
+00016000: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00016010: 6528 6669 6c65 6461 7461 5b22 6c6f 6720  e(filedata["log 
+00016020: 7472 616e 7361 6374 696f 6e22 5d2c 7374  transaction"],st
+00016030: 7229 2061 6e64 2066 696c 6564 6174 615b  r) and filedata[
+00016040: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
+00016050: 225d 2e73 7472 6970 2829 203d 3d20 2254  "].strip() == "T
+00016060: 7275 6522 3a0d 0a20 2020 2020 2020 2020  rue":..         
+00016070: 2020 2020 2020 2023 2062 6f6f 6c28 6669         # bool(fi
+00016080: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
+00016090: 7361 6374 696f 6e22 5d29 0d0a 2020 2020  saction"])..    
+000160a0: 2020 2020 2020 2020 2020 2020 666c 6f77              flow
+000160b0: 5f63 6865 636b 203d 2054 7275 650d 0a20  _check = True.. 
+000160c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000160d0: 7269 6e74 2866 6c6f 775f 6368 6563 6b29  rint(flow_check)
+000160e0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+000160f0: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
+00016100: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
+00016110: 7361 6374 696f 6e22 5d2c 7374 7229 2061  saction"],str) a
+00016120: 6e64 2066 696c 6564 6174 615b 226c 6f67  nd filedata["log
+00016130: 2074 7261 6e73 6163 7469 6f6e 225d 2e73   transaction"].s
+00016140: 7472 6970 2829 203d 3d20 2246 616c 7365  trip() == "False
+00016150: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00016160: 2020 2020 2320 626f 6f6c 2866 696c 6564      # bool(filed
+00016170: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
+00016180: 7469 6f6e 225d 290d 0a20 2020 2020 2020  tion"])..       
+00016190: 2020 2020 2020 2020 2066 6c6f 775f 6368           flow_ch
+000161a0: 6563 6b20 3d20 4661 6c73 650d 0a20 2020  eck = False..   
+000161b0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+000161c0: 6e74 2866 6c6f 775f 6368 6563 6b29 0d0a  nt(flow_check)..
+000161d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000161e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000161f0: 2020 2066 6c6f 775f 6368 6563 6b20 3d20     flow_check = 
+00016200: 6669 6c65 6461 7461 5b22 6c6f 6720 7472  filedata["log tr
+00016210: 616e 7361 6374 696f 6e22 5d0d 0a20 2020  ansaction"]..   
+00016220: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00016230: 6e74 2866 6c6f 775f 6368 6563 6b29 0d0a  nt(flow_check)..
+00016240: 2020 2020 2020 2020 2020 2020 2370 7269              #pri
+00016250: 6e74 2822 464c 4f57 2043 4845 434b 222c  nt("FLOW CHECK",
+00016260: 2066 696c 656e 616d 652c 2066 6c6f 775f   filename, flow_
+00016270: 6368 6563 6b29 0d0a 2020 2020 2020 2020  check)..        
+00016280: 2020 2020 7072 696e 7428 2274 7970 6522      print("type"
+00016290: 2c20 7479 7065 2866 6c6f 775f 6368 6563  , type(flow_chec
+000162a0: 6b29 290d 0a0d 0a20 2020 2020 2020 2020  k))....         
+000162b0: 2020 206b 696e 6420 3d20 6669 6c65 6461     kind = fileda
+000162c0: 7461 5b22 6b69 6e64 225d 0d0a 0d0a 2020  ta["kind"]....  
+000162d0: 2020 2020 2020 2020 2020 2373 7562 6a65            #subje
+000162e0: 6374 203d 2020 6669 6c65 6461 7461 5b22  ct =  filedata["
+000162f0: 7375 626a 6563 7422 5d2e 7265 706c 6163  subject"].replac
+00016300: 6528 2220 222c 225f 2229 202b 2022 5f22  e(" ","_") + "_"
+00016310: 202b 2066 696c 6564 6174 615b 2273 686f   + filedata["sho
+00016320: 7274 6e61 6d65 222e 7265 706c 6163 6528  rtname".replace(
+00016330: 2220 222c 225f 2229 5d2e 6c6f 7765 7228  " ","_")].lower(
+00016340: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00016350: 7562 6a65 6374 203d 2020 6669 6c65 6461  ubject =  fileda
+00016360: 7461 5b22 7368 6f72 746e 616d 6522 2e72  ta["shortname".r
+00016370: 6570 6c61 6365 2822 2022 2c22 5f22 295d  eplace(" ","_")]
+00016380: 2e72 6570 6c61 6365 2822 2822 2c22 5f22  .replace("(","_"
+00016390: 292e 7265 706c 6163 6528 2229 222c 2222  ).replace(")",""
+000163a0: 292e 6c6f 7765 7228 290d 0a20 2020 2020  ).lower()..     
+000163b0: 2020 2020 2020 2073 7562 6a65 6374 5f73         subject_s
+000163c0: 7472 203d 2020 6669 6c65 6461 7461 5b22  tr =  filedata["
+000163d0: 7375 626a 6563 7422 2e72 6570 6c61 6365  subject".replace
+000163e0: 2822 2022 2c22 5f22 295d 2e6c 6f77 6572  (" ","_")].lower
+000163f0: 2829 2e63 6170 6974 616c 697a 6528 292e  ().capitalize().
+00016400: 7265 706c 6163 6528 225f 222c 2022 2022  replace("_", " "
+00016410: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00016420: 2073 7562 6a65 6374 735f 636f 756e 745b   subjects_count[
+00016430: 7375 626a 6563 745d 202b 3d20 310d 0a20  subject] += 1.. 
+00016440: 2020 2020 2020 2020 2020 2069 6620 7375             if su
+00016450: 626a 6563 7473 5f63 6f75 6e74 5b73 7562  bjects_count[sub
+00016460: 6a65 6374 5d20 3e20 313a 2023 2073 7566  ject] > 1: # suf
+00016470: 6669 7820 666f 7220 7361 6d65 206e 616d  fix for same nam
+00016480: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+00016490: 2020 2020 7375 626a 6563 7420 2b3d 2022      subject += "
+000164a0: 5f25 6922 2025 2069 6e74 2873 7562 6a65  _%i" % int(subje
+000164b0: 6374 735f 636f 756e 745b 7375 626a 6563  cts_count[subjec
+000164c0: 745d 290d 0a0d 0a0d 0a20 2020 2020 2020  t])......       
+000164d0: 2020 2020 2071 7561 6e74 6974 7920 3d20       quantity = 
+000164e0: 2271 2220 2320 6669 6c65 6461 7461 5b22  "q" # filedata["
+000164f0: 7175 616e 7469 7479 225d 0d0a 0d0a 2020  quantity"]....  
+00016500: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
+00016510: 6473 203d 205b 5d0d 0a0d 0a20 2020 2020  ds = []....     
+00016520: 2020 2020 2020 2069 6620 2275 6e69 2d64         if "uni-d
+00016530: 6972 6563 7469 6f6e 616c 2220 696e 2066  irectional" in f
+00016540: 696c 6564 6174 613a 0d0a 2020 2020 2020  iledata:..      
+00016550: 2020 2020 2020 2020 2020 756e 6964 6972            unidir
+00016560: 203d 2066 696c 6564 6174 615b 2275 6e69   = filedata["uni
+00016570: 2d64 6972 6563 7469 6f6e 616c 225d 0d0a  -directional"]..
+00016580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016590: 2020 636f 6d6d 616e 6473 2e61 7070 656e    commands.appen
+000165a0: 6428 2263 6f6e 6420 3d20 2869 7369 6e73  d("cond = (isins
+000165b0: 7461 6e63 6528 712c 666c 6f61 7429 206f  tance(q,float) o
+000165c0: 7220 6973 696e 7374 616e 6365 2871 2c69  r isinstance(q,i
+000165d0: 6e74 2929 2229 0d0a 2020 2020 2020 2020  nt))")..        
+000165e0: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
+000165f0: 2e61 7070 656e 6428 2269 6620 636f 6e64  .append("if cond
+00016600: 3a20 6173 7365 7274 206e 6f74 206e 702e  : assert not np.
+00016610: 6973 6e61 6e28 7129 2229 0d0a 2020 2020  isnan(q)")..    
+00016620: 2020 2020 2020 2020 2020 2020 2320 5e20              # ^ 
+00016630: 7769 6c6c 2061 6c73 6f20 7061 7373 2066  will also pass f
+00016640: 6f72 206e 702e 666c 6f61 7436 340d 0a20  or np.float64.. 
+00016650: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00016660: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
+00016670: 6966 2063 6f6e 643a 2061 7373 6572 7420  if cond: assert 
+00016680: 7120 3c20 2b6e 702e 696e 6622 290d 0a20  q < +np.inf").. 
+00016690: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000166a0: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
+000166b0: 6966 2063 6f6e 643a 2061 7373 6572 7420  if cond: assert 
+000166c0: 7120 3e20 2d6e 702e 696e 6622 290d 0a0d  q > -np.inf")...
+000166d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000166e0: 2023 7072 696e 7428 2275 6e69 2d64 6972   #print("uni-dir
+000166f0: 6563 7469 6f6e 616c 222c 756e 6964 6972  ectional",unidir
+00016700: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00016710: 2020 2069 6620 7374 7228 756e 6964 6972     if str(unidir
+00016720: 2920 3d3d 2022 5472 7565 223a 2023 2064  ) == "True": # d
+00016730: 6f20 6e6f 7420 646f 2062 6f6f 6c28 756e  o not do bool(un
+00016740: 6964 6972 290d 0a20 2020 2020 2020 2020  idir)..         
+00016750: 2020 2020 2020 2020 2020 2023 6e61 6d61             #nama
+00016760: 6161 203d 2066 696c 6564 6174 615b 2273  aa = filedata["s
+00016770: 686f 7274 6e61 6d65 225d 0d0a 2020 2020  hortname"]..    
+00016780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016790: 2373 656c 662e 6e6f 7469 6679 2820 286e  #self.notify( (n
+000167a0: 616d 6161 612b 2073 7472 2875 6e69 6469  amaaa+ str(unidi
+000167b0: 7229 2b20 223d 222b 2873 7472 2862 6f6f  r)+ "="+(str(boo
+000167c0: 6c28 756e 6964 6972 2929 2929 2c74 6974  l(unidir)))),tit
+000167d0: 6c65 3d22 6368 6563 6b22 290d 0a20 2020  le="check")..   
+000167e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000167f0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
+00016800: 2822 6966 2063 6f6e 643a 2061 7373 6572  ("if cond: asser
+00016810: 7420 7120 3e3d 2030 2c20 2768 6176 6520  t q >= 0, 'have 
+00016820: 746f 2070 6173 7320 706f 7369 7469 7665  to pass positive
+00016830: 2071 7561 6e74 6974 793a 2075 6e69 6469   quantity: unidi
+00016840: 7265 6374 696f 6e61 6c20 7472 616e 7361  rectional transa
+00016850: 6374 696f 6e27 2229 0d0a 0d0a 2020 2020  ction'")....    
+00016860: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
+00016870: 203d 2063 6f6d 6d61 6e64 7320 2b20 5b22   = commands + ["
+00016880: 2573 2e62 616c 616e 6365 5f73 6865 6574  %s.balance_sheet
+00016890: 2e64 6973 656e 6761 6765 2829 2220 2520  .disengage()" % 
+000168a0: 6167 656e 7431 5d0d 0a20 2020 2020 2020  agent1]..       
+000168b0: 2020 2020 2069 6620 5472 7565 3a20 2320       if True: # 
+000168c0: 6167 656e 7431 2021 3d20 6167 656e 7432  agent1 != agent2
+000168d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000168e0: 2020 2063 6f6d 6d61 6e64 732b 3d20 5b22     commands+= ["
+000168f0: 2573 2e62 616c 616e 6365 5f73 6865 6574  %s.balance_sheet
+00016900: 2e64 6973 656e 6761 6765 2829 2220 2520  .disengage()" % 
+00016910: 6167 656e 7432 5d0d 0a0d 0a20 2020 2020  agent2]....     
+00016920: 2020 2020 2020 2066 6f72 2065 6e74 7279         for entry
+00016930: 2069 6e20 6531 2e73 706c 6974 2822 5c6e   in e1.split("\n
+00016940: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00016950: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
+00016960: 2022 2220 616e 6420 656e 7472 7920 213d   "" and entry !=
+00016970: 2022 5c6e 223a 0d0a 2020 2020 2020 2020   "\n":..        
+00016980: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00016990: 2c20 6974 656d 2c20 7369 6c65 6e74 203d  , item, silent =
+000169a0: 2073 656c 662e 656e 7472 795f 746f 5f76   self.entry_to_v
+000169b0: 616c 7328 656e 7472 792c 2061 6765 6e74  als(entry, agent
+000169c0: 312c 2022 4571 7569 7479 2229 0d0a 2020  1, "Equity")..  
 000169d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169e0: 6966 2073 6967 6e20 6973 206e 6f74 204e  if sign is not N
-000169f0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00016a00: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00016a10: 6d6d 616e 6473 2e61 7070 656e 6428 2225  mmands.append("%
-00016a20: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
-00016a30: 6368 616e 6765 5f69 7465 6d28 2725 7327  change_item('%s'
-00016a40: 2c20 2573 2c20 2573 2c20 7375 7070 7265  , %s, %s, suppre
-00016a50: 7373 5f73 746f 636b 3d25 7329 2220 2520  ss_stock=%s)" % 
-00016a60: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00016a70: 2020 2020 2020 2020 2020 2061 6765 6e74             agent
-00016a80: 312c 2069 7465 6d2c 2022 4261 6c61 6e63  1, item, "Balanc
-00016a90: 6545 6e74 7279 2e41 5353 4554 5322 2c20  eEntry.ASSETS", 
-00016aa0: 7369 676e 202b 2071 7561 6e74 6974 792c  sign + quantity,
-00016ab0: 2073 696c 656e 7429 290d 0a20 2020 2020   silent))..     
-00016ac0: 2020 2020 2020 2066 6f72 2065 6e74 7279         for entry
-00016ad0: 2069 6e20 6c31 2e73 706c 6974 2822 5c6e   in l1.split("\n
-00016ae0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00016af0: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
-00016b00: 2022 2220 616e 6420 656e 7472 7920 213d   "" and entry !=
-00016b10: 2022 5c6e 223a 0d0a 2020 2020 2020 2020   "\n":..        
-00016b20: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-00016b30: 2c20 6974 656d 2c20 7369 6c65 6e74 203d  , item, silent =
-00016b40: 2073 656c 662e 656e 7472 795f 746f 5f76   self.entry_to_v
-00016b50: 616c 7328 656e 7472 792c 2061 6765 6e74  als(entry, agent
-00016b60: 312c 2022 4c69 6162 696c 6974 6965 7322  1, "Liabilities"
-00016b70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00016b80: 2020 2020 2020 2069 6620 7369 676e 2069         if sign i
-00016b90: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000169e0: 2020 6966 2073 6967 6e20 6973 206e 6f74    if sign is not
+000169f0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00016a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a10: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
+00016a20: 2225 732e 6261 6c61 6e63 655f 7368 6565  "%s.balance_shee
+00016a30: 742e 6368 616e 6765 5f69 7465 6d28 2725  t.change_item('%
+00016a40: 7327 2c20 2573 2c20 2573 2c20 7375 7070  s', %s, %s, supp
+00016a50: 7265 7373 5f73 746f 636b 3d25 7329 2220  ress_stock=%s)" 
+00016a60: 2520 280d 0a20 2020 2020 2020 2020 2020  % (..           
+00016a70: 2020 2020 2020 2020 2020 2020 2061 6765               age
+00016a80: 6e74 312c 2069 7465 6d2c 2022 4261 6c61  nt1, item, "Bala
+00016a90: 6e63 6545 6e74 7279 2e45 5155 4954 5922  nceEntry.EQUITY"
+00016aa0: 2c20 7369 676e 202b 2071 7561 6e74 6974  , sign + quantit
+00016ab0: 792c 2073 696c 656e 7429 290d 0a20 2020  y, silent))..   
+00016ac0: 2020 2020 2020 2020 2066 6f72 2065 6e74           for ent
+00016ad0: 7279 2069 6e20 6131 2e73 706c 6974 2822  ry in a1.split("
+00016ae0: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
+00016af0: 2020 2020 2020 2069 6620 656e 7472 7920         if entry 
+00016b00: 213d 2022 2220 616e 6420 656e 7472 7920  != "" and entry 
+00016b10: 213d 2022 5c6e 223a 0d0a 2020 2020 2020  != "\n":..      
+00016b20: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00016b30: 676e 2c20 6974 656d 2c20 7369 6c65 6e74  gn, item, silent
+00016b40: 203d 2073 656c 662e 656e 7472 795f 746f   = self.entry_to
+00016b50: 5f76 616c 7328 656e 7472 792c 2061 6765  _vals(entry, age
+00016b60: 6e74 312c 2022 4173 7365 7473 2229 0d0a  nt1, "Assets")..
+00016b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016b80: 2020 2020 6966 2073 6967 6e20 6973 206e      if sign is n
+00016b90: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
 00016ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016bb0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
-00016bc0: 7065 6e64 2822 2573 2e62 616c 616e 6365  pend("%s.balance
-00016bd0: 5f73 6865 6574 2e63 6861 6e67 655f 6974  _sheet.change_it
-00016be0: 656d 2827 2573 272c 2025 732c 2025 732c  em('%s', %s, %s,
-00016bf0: 2073 7570 7072 6573 735f 7374 6f63 6b3d   suppress_stock=
-00016c00: 2573 2922 2025 2028 0d0a 2020 2020 2020  %s)" % (..      
-00016c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c20: 2020 6167 656e 7431 2c20 6974 656d 2c20    agent1, item, 
-00016c30: 2242 616c 616e 6365 456e 7472 792e 4c49  "BalanceEntry.LI
-00016c40: 4142 494c 4954 4945 5322 2c20 7369 676e  ABILITIES", sign
-00016c50: 202b 2071 7561 6e74 6974 792c 2073 696c   + quantity, sil
-00016c60: 656e 7429 290d 0a20 2020 2020 2020 2020  ent))..         
-00016c70: 2020 2066 6f72 2065 6e74 7279 2069 6e20     for entry in 
-00016c80: 6532 2e73 706c 6974 2822 5c6e 2229 3a0d  e2.split("\n"):.
-00016c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016ca0: 2069 6620 656e 7472 7920 213d 2022 2220   if entry != "" 
-00016cb0: 616e 6420 656e 7472 7920 213d 2022 5c6e  and entry != "\n
-00016cc0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-00016cd0: 2020 2020 2020 2020 7369 676e 2c20 6974          sign, it
-00016ce0: 656d 2c20 7369 6c65 6e74 203d 2073 656c  em, silent = sel
-00016cf0: 662e 656e 7472 795f 746f 5f76 616c 7328  f.entry_to_vals(
-00016d00: 656e 7472 792c 2061 6765 6e74 322c 2022  entry, agent2, "
-00016d10: 4571 7569 7479 2229 0d0a 2020 2020 2020  Equity")..      
-00016d20: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00016d30: 2073 6967 6e20 6973 206e 6f74 204e 6f6e   sign is not Non
-00016d40: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00016d50: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
-00016d60: 616e 6473 2e61 7070 656e 6428 2225 732e  ands.append("%s.
-00016d70: 6261 6c61 6e63 655f 7368 6565 742e 6368  balance_sheet.ch
-00016d80: 616e 6765 5f69 7465 6d28 2725 7327 2c20  ange_item('%s', 
-00016d90: 2573 2c20 2573 2c20 7375 7070 7265 7373  %s, %s, suppress
-00016da0: 5f73 746f 636b 3d25 7329 2220 2520 280d  _stock=%s)" % (.
-00016db0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016dc0: 2020 2020 2020 2020 2061 6765 6e74 322c           agent2,
-00016dd0: 2069 7465 6d2c 2022 4261 6c61 6e63 6545   item, "BalanceE
-00016de0: 6e74 7279 2e45 5155 4954 5922 2c20 7369  ntry.EQUITY", si
-00016df0: 676e 202b 2071 7561 6e74 6974 792c 2073  gn + quantity, s
-00016e00: 696c 656e 7429 290d 0a20 2020 2020 2020  ilent))..       
-00016e10: 2020 2020 2066 6f72 2065 6e74 7279 2069       for entry i
-00016e20: 6e20 6132 2e73 706c 6974 2822 5c6e 2229  n a2.split("\n")
-00016e30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016e40: 2020 2069 6620 656e 7472 7920 213d 2022     if entry != "
-00016e50: 2220 616e 6420 656e 7472 7920 213d 2022  " and entry != "
-00016e60: 5c6e 223a 0d0a 2020 2020 2020 2020 2020  \n":..          
-00016e70: 2020 2020 2020 2020 2020 7369 676e 2c20            sign, 
-00016e80: 6974 656d 2c20 7369 6c65 6e74 203d 2073  item, silent = s
-00016e90: 656c 662e 656e 7472 795f 746f 5f76 616c  elf.entry_to_val
-00016ea0: 7328 656e 7472 792c 2061 6765 6e74 322c  s(entry, agent2,
-00016eb0: 2022 4173 7365 7473 2229 0d0a 2020 2020   "Assets")..    
+00016bb0: 2020 636f 6d6d 616e 6473 2e61 7070 656e    commands.appen
+00016bc0: 6428 2225 732e 6261 6c61 6e63 655f 7368  d("%s.balance_sh
+00016bd0: 6565 742e 6368 616e 6765 5f69 7465 6d28  eet.change_item(
+00016be0: 2725 7327 2c20 2573 2c20 2573 2c20 7375  '%s', %s, %s, su
+00016bf0: 7070 7265 7373 5f73 746f 636b 3d25 7329  ppress_stock=%s)
+00016c00: 2220 2520 280d 0a20 2020 2020 2020 2020  " % (..         
+00016c10: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00016c20: 6765 6e74 312c 2069 7465 6d2c 2022 4261  gent1, item, "Ba
+00016c30: 6c61 6e63 6545 6e74 7279 2e41 5353 4554  lanceEntry.ASSET
+00016c40: 5322 2c20 7369 676e 202b 2071 7561 6e74  S", sign + quant
+00016c50: 6974 792c 2073 696c 656e 7429 290d 0a20  ity, silent)).. 
+00016c60: 2020 2020 2020 2020 2020 2066 6f72 2065             for e
+00016c70: 6e74 7279 2069 6e20 6c31 2e73 706c 6974  ntry in l1.split
+00016c80: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+00016c90: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
+00016ca0: 7920 213d 2022 2220 616e 6420 656e 7472  y != "" and entr
+00016cb0: 7920 213d 2022 5c6e 223a 0d0a 2020 2020  y != "\n":..    
+00016cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016cd0: 7369 676e 2c20 6974 656d 2c20 7369 6c65  sign, item, sile
+00016ce0: 6e74 203d 2073 656c 662e 656e 7472 795f  nt = self.entry_
+00016cf0: 746f 5f76 616c 7328 656e 7472 792c 2061  to_vals(entry, a
+00016d00: 6765 6e74 312c 2022 4c69 6162 696c 6974  gent1, "Liabilit
+00016d10: 6965 7322 290d 0a20 2020 2020 2020 2020  ies")..         
+00016d20: 2020 2020 2020 2020 2020 2069 6620 7369             if si
+00016d30: 676e 2069 7320 6e6f 7420 4e6f 6e65 3a0d  gn is not None:.
+00016d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016d50: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
+00016d60: 732e 6170 7065 6e64 2822 2573 2e62 616c  s.append("%s.bal
+00016d70: 616e 6365 5f73 6865 6574 2e63 6861 6e67  ance_sheet.chang
+00016d80: 655f 6974 656d 2827 2573 272c 2025 732c  e_item('%s', %s,
+00016d90: 2025 732c 2073 7570 7072 6573 735f 7374   %s, suppress_st
+00016da0: 6f63 6b3d 2573 2922 2025 2028 0d0a 2020  ock=%s)" % (..  
+00016db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016dc0: 2020 2020 2020 6167 656e 7431 2c20 6974        agent1, it
+00016dd0: 656d 2c20 2242 616c 616e 6365 456e 7472  em, "BalanceEntr
+00016de0: 792e 4c49 4142 494c 4954 4945 5322 2c20  y.LIABILITIES", 
+00016df0: 7369 676e 202b 2071 7561 6e74 6974 792c  sign + quantity,
+00016e00: 2073 696c 656e 7429 290d 0a20 2020 2020   silent))..     
+00016e10: 2020 2020 2020 2066 6f72 2065 6e74 7279         for entry
+00016e20: 2069 6e20 6532 2e73 706c 6974 2822 5c6e   in e2.split("\n
+00016e30: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00016e40: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
+00016e50: 2022 2220 616e 6420 656e 7472 7920 213d   "" and entry !=
+00016e60: 2022 5c6e 223a 0d0a 2020 2020 2020 2020   "\n":..        
+00016e70: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00016e80: 2c20 6974 656d 2c20 7369 6c65 6e74 203d  , item, silent =
+00016e90: 2073 656c 662e 656e 7472 795f 746f 5f76   self.entry_to_v
+00016ea0: 616c 7328 656e 7472 792c 2061 6765 6e74  als(entry, agent
+00016eb0: 322c 2022 4571 7569 7479 2229 0d0a 2020  2, "Equity")..  
 00016ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ed0: 6966 2073 6967 6e20 6973 206e 6f74 204e  if sign is not N
-00016ee0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00016ef0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00016f00: 6d6d 616e 6473 2e61 7070 656e 6428 2225  mmands.append("%
-00016f10: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
-00016f20: 6368 616e 6765 5f69 7465 6d28 2725 7327  change_item('%s'
-00016f30: 2c20 2573 2c20 2573 2c20 7375 7070 7265  , %s, %s, suppre
-00016f40: 7373 5f73 746f 636b 3d25 7329 2220 2520  ss_stock=%s)" % 
-00016f50: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00016f60: 2020 2020 2020 2020 2020 2061 6765 6e74             agent
-00016f70: 322c 2069 7465 6d2c 2022 4261 6c61 6e63  2, item, "Balanc
-00016f80: 6545 6e74 7279 2e41 5353 4554 5322 2c20  eEntry.ASSETS", 
-00016f90: 7369 676e 202b 2071 7561 6e74 6974 792c  sign + quantity,
-00016fa0: 2073 696c 656e 7429 290d 0a20 2020 2020   silent))..     
-00016fb0: 2020 2020 2020 2066 6f72 2065 6e74 7279         for entry
-00016fc0: 2069 6e20 6c32 2e73 706c 6974 2822 5c6e   in l2.split("\n
-00016fd0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00016fe0: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
-00016ff0: 2022 2220 616e 6420 656e 7472 7920 213d   "" and entry !=
-00017000: 2022 5c6e 223a 0d0a 2020 2020 2020 2020   "\n":..        
-00017010: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-00017020: 2c20 6974 656d 2c20 7369 6c65 6e74 203d  , item, silent =
-00017030: 2073 656c 662e 656e 7472 795f 746f 5f76   self.entry_to_v
-00017040: 616c 7328 656e 7472 792c 2061 6765 6e74  als(entry, agent
-00017050: 322c 2022 4c69 6162 696c 6974 6965 7322  2, "Liabilities"
-00017060: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00017070: 2020 2020 2020 2069 6620 7369 676e 2069         if sign i
-00017080: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00016ed0: 2020 6966 2073 6967 6e20 6973 206e 6f74    if sign is not
+00016ee0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00016ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016f00: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
+00016f10: 2225 732e 6261 6c61 6e63 655f 7368 6565  "%s.balance_shee
+00016f20: 742e 6368 616e 6765 5f69 7465 6d28 2725  t.change_item('%
+00016f30: 7327 2c20 2573 2c20 2573 2c20 7375 7070  s', %s, %s, supp
+00016f40: 7265 7373 5f73 746f 636b 3d25 7329 2220  ress_stock=%s)" 
+00016f50: 2520 280d 0a20 2020 2020 2020 2020 2020  % (..           
+00016f60: 2020 2020 2020 2020 2020 2020 2061 6765               age
+00016f70: 6e74 322c 2069 7465 6d2c 2022 4261 6c61  nt2, item, "Bala
+00016f80: 6e63 6545 6e74 7279 2e45 5155 4954 5922  nceEntry.EQUITY"
+00016f90: 2c20 7369 676e 202b 2071 7561 6e74 6974  , sign + quantit
+00016fa0: 792c 2073 696c 656e 7429 290d 0a20 2020  y, silent))..   
+00016fb0: 2020 2020 2020 2020 2066 6f72 2065 6e74           for ent
+00016fc0: 7279 2069 6e20 6132 2e73 706c 6974 2822  ry in a2.split("
+00016fd0: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
+00016fe0: 2020 2020 2020 2069 6620 656e 7472 7920         if entry 
+00016ff0: 213d 2022 2220 616e 6420 656e 7472 7920  != "" and entry 
+00017000: 213d 2022 5c6e 223a 0d0a 2020 2020 2020  != "\n":..      
+00017010: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00017020: 676e 2c20 6974 656d 2c20 7369 6c65 6e74  gn, item, silent
+00017030: 203d 2073 656c 662e 656e 7472 795f 746f   = self.entry_to
+00017040: 5f76 616c 7328 656e 7472 792c 2061 6765  _vals(entry, age
+00017050: 6e74 322c 2022 4173 7365 7473 2229 0d0a  nt2, "Assets")..
+00017060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017070: 2020 2020 6966 2073 6967 6e20 6973 206e      if sign is n
+00017080: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
 00017090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000170a0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
-000170b0: 7065 6e64 2822 2573 2e62 616c 616e 6365  pend("%s.balance
-000170c0: 5f73 6865 6574 2e63 6861 6e67 655f 6974  _sheet.change_it
-000170d0: 656d 2827 2573 272c 2025 732c 2025 732c  em('%s', %s, %s,
-000170e0: 2073 7570 7072 6573 735f 7374 6f63 6b3d   suppress_stock=
-000170f0: 2573 2922 2025 2028 0d0a 2020 2020 2020  %s)" % (..      
-00017100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017110: 2020 6167 656e 7432 2c20 6974 656d 2c20    agent2, item, 
-00017120: 2242 616c 616e 6365 456e 7472 792e 4c49  "BalanceEntry.LI
-00017130: 4142 494c 4954 4945 5322 2c20 7369 676e  ABILITIES", sign
-00017140: 202b 2071 7561 6e74 6974 792c 2073 696c   + quantity, sil
-00017150: 656e 7429 290d 0a0d 0a20 2020 2020 2020  ent))....       
-00017160: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
-00017170: 7065 6e64 2822 2573 2e62 616c 616e 6365  pend("%s.balance
-00017180: 5f73 6865 6574 2e65 6e67 6167 6528 2922  _sheet.engage()"
-00017190: 2025 2061 6765 6e74 3129 0d0a 2020 2020   % agent1)..    
-000171a0: 2020 2020 2020 2020 6966 2054 7275 653a          if True:
-000171b0: 2023 2061 6765 6e74 3121 3d61 6765 6e74   # agent1!=agent
-000171c0: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
-000171d0: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
-000171e0: 656e 6428 2225 732e 6261 6c61 6e63 655f  end("%s.balance_
-000171f0: 7368 6565 742e 656e 6761 6765 2829 2220  sheet.engage()" 
-00017200: 2520 6167 656e 7432 290d 0a0d 0a20 2020  % agent2)....   
-00017210: 2020 2020 2020 2020 2061 6464 5f66 6c6f           add_flo
-00017220: 7720 3d20 666c 6f77 5f63 6865 636b 0d0a  w = flow_check..
-00017230: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00017240: 6464 5f66 6c6f 773a 0d0a 2020 2020 2020  dd_flow:..      
-00017250: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00017260: 7375 626a 6563 745f 7374 722c 2266 6c6f  subject_str,"flo
-00017270: 7720 6368 6563 6b22 2c66 6c6f 775f 6368  w check",flow_ch
-00017280: 6563 6b29 0d0a 0d0a 2020 2020 2020 2020  eck)....        
-00017290: 2020 2020 2020 2020 6b69 6e64 5f65 6e75          kind_enu
-000172a0: 6d20 3d20 2228 2573 2c25 7329 2220 2520  m = "(%s,%s)" % 
-000172b0: 286b 696e 642e 7370 6c69 7428 222d 3e22  (kind.split("->"
-000172c0: 295b 305d 2e73 7472 6970 2829 2c6b 696e  )[0].strip(),kin
-000172d0: 642e 7370 6c69 7428 222d 3e22 295b 315d  d.split("->")[1]
-000172e0: 2e73 7472 6970 2829 290d 0a0d 0a20 2020  .strip())....   
-000172f0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00017300: 6d61 6e64 732e 6170 7065 6e64 2822 466c  mands.append("Fl
-00017310: 6f77 4d61 7472 6978 2829 2e6c 6f67 5f66  owMatrix().log_f
-00017320: 6c6f 7728 2573 2c20 2573 2c20 2573 2c20  low(%s, %s, %s, 
-00017330: 2573 2c20 7375 626a 6563 743d 2725 7327  %s, subject='%s'
-00017340: 2922 2025 2028 6b69 6e64 5f65 6e75 6d2c  )" % (kind_enum,
-00017350: 2071 7561 6e74 6974 792c 2061 6765 6e74   quantity, agent
-00017360: 312c 2061 6765 6e74 322c 2073 7562 6a65  1, agent2, subje
-00017370: 6374 5f73 7472 2929 0d0a 0d0a 2020 2020  ct_str))....    
-00017380: 2020 2020 2020 2020 2320 6170 7065 6e64          # append
-00017390: 2069 6e73 6572 745f 6c69 6e6b 2063 6f6d   insert_link com
-000173a0: 6d61 6e64 2074 6f20 636f 6465 0d0a 0d0a  mand to code....
-000173b0: 0d0a 2020 2020 2020 2020 2020 2020 6d79  ..            my
-000173c0: 5f69 6e63 6f6d 655f 6469 6374 203d 207b  _income_dict = {
-000173d0: 2023 2023 7472 616e 736c 6174 6573 2073   # #translates s
-000173e0: 7472 696e 6720 696e 746f 2049 4353 456e  tring into ICSEn
-000173f0: 7472 7920 2866 6f72 2062 6574 7465 7220  try (for better 
-00017400: 6566 6669 6369 656e 6379 290d 0a20 2020  efficiency)..   
-00017410: 2020 2020 2020 2020 2020 2020 2022 5265               "Re
-00017420: 7665 6e75 6522 3a20 2249 4353 456e 7472  venue": "ICSEntr
-00017430: 792e 5245 5645 4e55 4553 222c 0d0a 2020  y.REVENUES",..  
-00017440: 2020 2020 2020 2020 2020 2020 2020 224e                "N
-00017450: 6f6e 2d4f 702e 2049 6e63 6f6d 6522 3a20  on-Op. Income": 
-00017460: 2249 4353 456e 7472 792e 4e4f 4922 2c0d  "ICSEntry.NOI",.
-00017470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017480: 2022 4578 7065 6e73 6522 3a20 2249 4353   "Expense": "ICS
-00017490: 456e 7472 792e 4558 5045 4e53 4553 222c  Entry.EXPENSES",
-000174a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000174b0: 2020 2254 6178 223a 2022 4943 5345 6e74    "Tax": "ICSEnt
-000174c0: 7279 2e54 4158 4553 222c 0d0a 2020 2020  ry.TAXES",..    
-000174d0: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
-000174e0: 6572 6573 7422 3a20 2249 4353 456e 7472  erest": "ICSEntr
-000174f0: 792e 494e 5445 5245 5354 222c 0d0a 2020  y.INTEREST",..  
-00017500: 2020 2020 2020 2020 2020 2020 2020 2247                "G
-00017510: 6169 6e22 3a20 2249 4353 456e 7472 792e  ain": "ICSEntry.
-00017520: 4741 494e 5322 2c0d 0a20 2020 2020 2020  GAINS",..       
-00017530: 2020 2020 2020 2020 2022 4e6f 6e74 6178           "Nontax
-00017540: 2e50 726f 6669 7422 3a20 2249 4353 456e  .Profit": "ICSEn
-00017550: 7472 792e 4e4f 4e54 4158 5f50 524f 4649  try.NONTAX_PROFI
-00017560: 5453 222c 0d0a 2020 2020 2020 2020 2020  TS",..          
-00017570: 2020 2020 2020 224e 6f6e 7461 782e 2050        "Nontax. P
-00017580: 726f 6669 7422 3a20 2249 4353 456e 7472  rofit": "ICSEntr
-00017590: 792e 4e4f 4e54 4158 5f50 524f 4649 5453  y.NONTAX_PROFITS
-000175a0: 222c 2023 2071 7569 636b 2061 6e64 2064  ", # quick and d
-000175b0: 6972 7479 2062 7567 6669 780d 0a20 2020  irty bugfix..   
-000175c0: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
-000175d0: 6e74 6178 2e20 4c6f 7373 223a 2020 2249  ntax. Loss":  "I
-000175e0: 4353 456e 7472 792e 4e4f 4e54 4158 5f4c  CSEntry.NONTAX_L
-000175f0: 4f53 5345 5322 2c0d 0a20 2020 2020 2020  OSSES",..       
-00017600: 2020 2020 2020 2020 2022 4c6f 7373 223a           "Loss":
-00017610: 2020 2249 4353 456e 7472 792e 4c4f 5353    "ICSEntry.LOSS
-00017620: 4553 220d 0a20 2020 2020 2020 2020 2020  ES"..           
-00017630: 207d 0d0a 0d0a 2020 2020 2020 2020 2020   }....          
-00017640: 2020 2320 696e 636f 6d65 2073 7461 7465    # income state
-00017650: 6d65 6e74 3f0d 0a20 2020 2020 2020 2020  ment?..         
-00017660: 2020 2069 6620 2269 6e63 6f6d 6531 2220     if "income1" 
-00017670: 696e 2066 696c 6564 6174 613a 0d0a 2020  in filedata:..  
-00017680: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00017690: 2073 7472 2866 696c 6564 6174 615b 2269   str(filedata["i
-000176a0: 6e63 6f6d 6531 225d 2920 213d 2027 4e6f  ncome1"]) != 'No
-000176b0: 6e65 273a 0d0a 2020 2020 2020 2020 2020  ne':..          
-000176c0: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
-000176d0: 6473 2e61 7070 656e 6428 2225 732e 696e  ds.append("%s.in
-000176e0: 636f 6d65 5f73 7461 7465 6d65 6e74 2e6e  come_statement.n
-000176f0: 6577 5f65 6e74 7279 2825 732c 2725 7327  ew_entry(%s,'%s'
-00017700: 2c25 7329 2220 2520 2861 6765 6e74 312c  ,%s)" % (agent1,
-00017710: 6d79 5f69 6e63 6f6d 655f 6469 6374 5b66  my_income_dict[f
-00017720: 696c 6564 6174 615b 2269 6e63 6f6d 6531  iledata["income1
-00017730: 225d 5d2c 7375 626a 6563 742c 7175 616e  "]],subject,quan
-00017740: 7469 7479 2929 0d0a 0d0a 2020 2020 2020  tity))....      
-00017750: 2020 2020 2020 6966 2022 696e 636f 6d65        if "income
-00017760: 3222 2069 6e20 6669 6c65 6461 7461 3a0d  2" in filedata:.
-00017770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017780: 2069 6620 7374 7228 6669 6c65 6461 7461   if str(filedata
-00017790: 5b22 696e 636f 6d65 3222 5d29 2021 3d20  ["income2"]) != 
-000177a0: 274e 6f6e 6527 3a0d 0a20 2020 2020 2020  'None':..       
-000177b0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-000177c0: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
-000177d0: 2e69 6e63 6f6d 655f 7374 6174 656d 656e  .income_statemen
-000177e0: 742e 6e65 775f 656e 7472 7928 2573 2c27  t.new_entry(%s,'
-000177f0: 2573 272c 2573 2922 2025 2028 6167 656e  %s',%s)" % (agen
-00017800: 7432 2c20 6d79 5f69 6e63 6f6d 655f 6469  t2, my_income_di
-00017810: 6374 5b66 696c 6564 6174 615b 2269 6e63  ct[filedata["inc
-00017820: 6f6d 6532 225d 5d2c 2073 7562 6a65 6374  ome2"]], subject
-00017830: 2c20 7175 616e 7469 7479 2929 0d0a 0d0a  , quantity))....
-00017840: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
-00017850: 7368 2066 6c6f 7720 7374 6174 656d 656e  sh flow statemen
-00017860: 740d 0a20 2020 2020 2020 2020 2020 2069  t..            i
-00017870: 6620 2263 6173 6866 6c6f 7731 2220 696e  f "cashflow1" in
-00017880: 2066 696c 6564 6174 613a 0d0a 2020 2020   filedata:..    
-00017890: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-000178a0: 7472 2866 696c 6564 6174 615b 2263 6173  tr(filedata["cas
-000178b0: 6866 6c6f 7731 225d 2920 213d 2027 4e6f  hflow1"]) != 'No
-000178c0: 6e65 273a 0d0a 2020 2020 2020 2020 2020  ne':..          
-000178d0: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
-000178e0: 6473 2e61 7070 656e 6428 2225 732e 6361  ds.append("%s.ca
-000178f0: 7368 5f66 6c6f 775f 7374 6174 656d 656e  sh_flow_statemen
-00017900: 742e 6e65 775f 656e 7472 7928 2573 2c27  t.new_entry(%s,'
-00017910: 2573 272c 2d25 7329 2220 2520 2861 6765  %s',-%s)" % (age
-00017920: 6e74 312c 2243 6173 6846 6c6f 7745 6e74  nt1,"CashFlowEnt
-00017930: 7279 2e22 202b 2066 696c 6564 6174 615b  ry." + filedata[
-00017940: 2263 6173 6866 6c6f 7731 225d 2e75 7070  "cashflow1"].upp
-00017950: 6572 2829 2c73 7562 6a65 6374 2c71 7561  er(),subject,qua
-00017960: 6e74 6974 7929 290d 0a0d 0a20 2020 2020  ntity))....     
-00017970: 2020 2020 2020 2069 6620 2263 6173 6866         if "cashf
-00017980: 6c6f 7732 2220 696e 2066 696c 6564 6174  low2" in filedat
-00017990: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-000179a0: 2020 2020 6966 2073 7472 2866 696c 6564      if str(filed
-000179b0: 6174 615b 2263 6173 6866 6c6f 7732 225d  ata["cashflow2"]
-000179c0: 2920 213d 2027 4e6f 6e65 273a 0d0a 2020  ) != 'None':..  
-000179d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000179e0: 2020 636f 6d6d 616e 6473 2e61 7070 656e    commands.appen
-000179f0: 6428 2225 732e 6361 7368 5f66 6c6f 775f  d("%s.cash_flow_
-00017a00: 7374 6174 656d 656e 742e 6e65 775f 656e  statement.new_en
-00017a10: 7472 7928 2573 2c27 2573 272c 2573 2922  try(%s,'%s',%s)"
-00017a20: 2025 2028 6167 656e 7432 2c22 4361 7368   % (agent2,"Cash
-00017a30: 466c 6f77 456e 7472 792e 2220 2b20 6669  FlowEntry." + fi
-00017a40: 6c65 6461 7461 5b22 6361 7368 666c 6f77  ledata["cashflow
-00017a50: 3222 5d2e 7570 7065 7228 292c 7375 626a  2"].upper(),subj
-00017a60: 6563 742c 7175 616e 7469 7479 2929 0d0a  ect,quantity))..
-00017a70: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00017a80: 2054 7275 653a 2023 2061 6765 6e74 3120   True: # agent1 
-00017a90: 213d 2061 6765 6e74 323a 0d0a 2020 2020  != agent2:..    
-00017aa0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00017ab0: 6f64 203d 2022 6465 6620 2573 2825 732c  od = "def %s(%s,
-00017ac0: 2025 732c 2025 7329 3a5c 6e22 2025 2028   %s, %s):\n" % (
-00017ad0: 7375 626a 6563 742c 6167 656e 7431 2c61  subject,agent1,a
-00017ae0: 6765 6e74 322c 7175 616e 7469 7479 290d  gent2,quantity).
-00017af0: 0a20 2020 2020 2020 2020 2020 2023 656c  .            #el
-00017b00: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00017b10: 2023 2020 2020 6d65 7468 6f64 203d 2022   #    method = "
-00017b20: 6465 6620 2573 2825 732c 2025 7329 3a5c  def %s(%s, %s):\
-00017b30: 6e22 2025 2028 7375 626a 6563 742c 2061  n" % (subject, a
-00017b40: 6765 6e74 312c 2071 7561 6e74 6974 7929  gent1, quantity)
-00017b50: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00017b60: 6966 2022 6465 7363 7269 7074 696f 6e22  if "description"
-00017b70: 2069 6e20 6669 6c65 6461 7461 3a20 2320   in filedata: # 
-00017b80: 6164 6420 7468 6520 6465 7363 7269 7074  add the descript
-00017b90: 696f 6e20 696e 2074 6865 2064 6f63 7374  ion in the docst
-00017ba0: 7269 6e67 206f 6620 7468 6520 6675 6e63  ring of the func
-00017bb0: 7469 6f6e 2064 6566 696e 6974 696f 6e0d  tion definition.
-00017bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017bd0: 206d 6574 686f 6420 2b3d 2022 2020 2020   method += "    
-00017be0: 2322 202b 2066 696c 6564 6174 615b 2264  #" + filedata["d
-00017bf0: 6573 6372 6970 7469 6f6e 225d 202b 2022  escription"] + "
-00017c00: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
-00017c10: 2020 2066 6f72 2063 6f6d 6d61 6e64 2069     for command i
-00017c20: 6e20 636f 6d6d 616e 6473 3a0d 0a20 2020  n commands:..   
-00017c30: 2020 2020 2020 2020 2020 2020 206d 6574               met
-00017c40: 686f 6420 2b3d 2022 2020 2020 2220 2b20  hod += "    " + 
-00017c50: 636f 6d6d 616e 6420 2b20 225c 6e22 0d0a  command + "\n"..
-00017c60: 0d0a 2020 2020 2020 2020 2020 2020 6d65  ..            me
-00017c70: 7468 6f64 202b 3d20 225c 6e5c 6e22 0d0a  thod += "\n\n"..
-00017c80: 2020 2020 2020 2020 2020 2020 636f 6465              code
-00017c90: 202b 3d20 6d65 7468 6f64 0d0a 0d0a 2020   += method....  
-00017ca0: 2020 2020 2020 666f 6c64 6572 203d 206f        folder = o
-00017cb0: 732e 7061 7468 2e64 6972 6e61 6d65 2873  s.path.dirname(s
-00017cc0: 656c 662e 6375 7272 656e 745f 6669 6c65  elf.current_file
-00017cd0: 2920 2320 7374 6174 7573 4261 7228 292e  ) # statusBar().
-00017ce0: 6375 7272 656e 744d 6573 7361 6765 2829  currentMessage()
-00017cf0: 290d 0a20 2020 2020 2020 2066 6e61 6d65  )..        fname
-00017d00: 203d 2020 666f 6c64 6572 202b 2022 2f70   =  folder + "/p
-00017d10: 7974 686f 6e5f 636f 6465 2f74 7261 6e73  ython_code/trans
-00017d20: 6163 7469 6f6e 732e 7079 220d 0a0d 0a20  actions.py".... 
-00017d30: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-00017d40: 2866 6e61 6d65 2c22 7722 2c65 6e63 6f64  (fname,"w",encod
-00017d50: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
-00017d60: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
-00017d70: 2020 2066 696c 652e 7772 6974 6528 636f     file.write(co
-00017d80: 6465 290d 0a0d 0a20 2020 2020 2020 2069  de)....        i
-00017d90: 6620 7368 6f77 5f6e 6f74 6966 6963 6174  f show_notificat
-00017da0: 696f 6e3a 0d0a 2020 2020 2020 2020 2020  ion:..          
-00017db0: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
-00017dc0: 7373 6167 653d 2243 6f64 6520 6578 706f  ssage="Code expo
-00017dd0: 7274 6564 2074 6f20 2573 2220 2520 2866  rted to %s" % (f
-00017de0: 6e61 6d65 292c 7469 746c 653d 2253 7563  name),title="Suc
-00017df0: 6365 7373 2229 0d0a 0d0a 0d0a 2020 2020  cess")......    
-00017e00: 6465 6620 6765 6e5f 6963 735f 7369 6e67  def gen_ics_sing
-00017e10: 6c65 2873 656c 6629 3a0d 0a20 2020 2020  le(self):..     
-00017e20: 2020 2069 6620 7365 6c66 2e64 7261 7763     if self.drawc
-00017e30: 616e 7661 732e 6869 6768 6c69 6768 7465  anvas.highlighte
-00017e40: 6420 6973 204e 6f6e 653a 0d0a 2020 2020  d is None:..    
-00017e50: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00017e60: 6966 7928 7469 746c 653d 224e 6f20 6167  ify(title="No ag
-00017e70: 656e 7420 7365 6c65 6374 6564 222c 206d  ent selected", m
-00017e80: 6573 7361 6765 3d22 4e6f 2061 6765 6e74  essage="No agent
-00017e90: 2073 656c 6563 7465 642e 2050 6c65 6173   selected. Pleas
-00017ea0: 6520 7365 6c65 6374 206f 6e65 2066 6972  e select one fir
-00017eb0: 7374 2e22 290d 0a20 2020 2020 2020 2020  st.")..         
-00017ec0: 2020 2072 6574 7572 6e0d 0a20 2020 2020     return..     
-00017ed0: 2020 2069 6620 7365 6c66 2e64 7261 7763     if self.drawc
-00017ee0: 616e 7661 732e 6869 6768 6c69 6768 7465  anvas.highlighte
-00017ef0: 642e 6973 6865 6c70 6572 3a0d 0a20 2020  d.ishelper:..   
-00017f00: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-00017f10: 7469 6679 2874 6974 6c65 3d22 4e6f 2061  tify(title="No a
-00017f20: 6765 6e74 2073 656c 6563 7465 6422 2c20  gent selected", 
-00017f30: 6d65 7373 6167 653d 224e 6f20 7661 6c69  message="No vali
-00017f40: 6420 626f 7820 7365 6c65 6374 6564 2e20  d box selected. 
-00017f50: 506c 6561 7365 2073 656c 6563 7420 616e  Please select an
-00017f60: 2061 6765 6e74 2e22 290d 0a20 2020 2020   agent.")..     
-00017f70: 2020 2020 2020 2072 6574 7572 6e0d 0a20         return.. 
-00017f80: 2020 2020 2020 206d 795f 6167 656e 7420         my_agent 
-00017f90: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
-00017fa0: 732e 6869 6768 6c69 6768 7465 642e 6e61  s.highlighted.na
-00017fb0: 6d65 0d0a 0d0a 2020 2020 2020 2020 636f  me....        co
-00017fc0: 6d62 696e 6564 5f69 6e63 6f6d 6520 3d20  mbined_income = 
-00017fd0: 207b 2253 7562 6a65 6374 223a 5b5d 2c22   {"Subject":[],"
-00017fe0: 5368 6f72 7420 4e61 6d65 223a 205b 5d2c  Short Name": [],
-00017ff0: 2251 7561 6e74 6974 7922 3a5b 5d2c 2022  "Quantity":[], "
-00018000: 5479 7065 223a 5b5d 2c20 2252 616e 6b69  Type":[], "Ranki
-00018010: 6e67 223a 5b5d 7d20 2320 7261 6e6b 696e  ng":[]} # rankin
-00018020: 6720 7769 6c6c 2062 6520 7265 6d6f 7665  g will be remove
-00018030: 6420 6c61 7465 720d 0a20 2020 2020 2020  d later..       
-00018040: 2022 2222 0d0a 2020 2020 2020 2020 2247   """..        "G
-00018050: 6169 6e73 223a 205b 5d2c 2022 4c6f 7373  ains": [], "Loss
-00018060: 6573 223a 205b 5d2c 2022 5265 7665 6e75  es": [], "Revenu
-00018070: 6573 223a 205b 5d2c 2022 5461 7865 7322  es": [], "Taxes"
-00018080: 3a20 5b5d 2c20 2245 7870 656e 7365 7322  : [], "Expenses"
-00018090: 3a20 5b5d 2c0d 0a20 2020 2020 2020 2020  : [],..         
-000180a0: 224e 6f6e 7461 7861 626c 6520 4c6f 7373  "Nontaxable Loss
-000180b0: 6573 223a 205b 5d2c 2022 4e6f 6e74 6178  es": [], "Nontax
-000180c0: 6162 6c65 2050 726f 6669 7473 223a 205b  able Profits": [
-000180d0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-000180e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000180f0: 2020 2022 4e6f 6e2d 4f70 6572 6174 696f     "Non-Operatio
-00018100: 6e61 6c20 496e 636f 6d65 223a 205b 5d2c  nal Income": [],
-00018110: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018140: 2022 496e 7465 7265 7374 2050 6179 6d65   "Interest Payme
-00018150: 6e74 7322 3a20 5b5d 0d0a 2020 2020 2020  nts": []..      
-00018160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018180: 2020 2020 2020 2020 207d 0d0a 2020 2020           }..    
-00018190: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000181a0: 206b 203d 2030 0d0a 2020 2020 2020 2020   k = 0..        
-000181b0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-000181c0: 2020 666f 7220 6669 6c65 6461 7461 2069    for filedata i
-000181d0: 6e20 7365 6c66 2e65 6e74 7279 5f64 6174  n self.entry_dat
-000181e0: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-000181f0: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
-00018200: 6564 6174 615b 2261 6765 6e74 3122 5d2e  edata["agent1"].
-00018210: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
-00018220: 2020 2020 2020 2020 2061 6765 6e74 3220           agent2 
-00018230: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
-00018240: 7432 225d 2e73 7472 6970 2829 0d0a 0d0a  t2"].strip()....
-00018250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018260: 7072 696e 7428 2261 6765 6e74 3122 2c61  print("agent1",a
-00018270: 6765 6e74 312c 2261 6765 6e74 3222 2c61  gent1,"agent2",a
-00018280: 6765 6e74 3229 0d0a 2020 2020 2020 2020  gent2)..        
-00018290: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
-000182a0: 3120 3d3d 206d 795f 6167 656e 743a 0d0a  1 == my_agent:..
-000182b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000182c0: 2020 2020 7265 665f 6167 656e 7420 3d20      ref_agent = 
-000182d0: 2261 6765 6e74 3122 0d0a 2020 2020 2020  "agent1"..      
-000182e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000182f0: 665f 696e 636f 6d65 203d 2022 696e 636f  f_income = "inco
-00018300: 6d65 3122 0d0a 0d0a 2020 2020 2020 2020  me1"....        
-00018310: 2020 2020 2020 2020 656c 6966 2061 6765          elif age
-00018320: 6e74 3220 3d3d 206d 795f 6167 656e 743a  nt2 == my_agent:
-00018330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018340: 2020 2020 2020 7265 665f 6167 656e 7420        ref_agent 
-00018350: 3d20 2261 6765 6e74 3222 0d0a 2020 2020  = "agent2"..    
-00018360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018370: 7265 665f 696e 636f 6d65 203d 2022 696e  ref_income = "in
-00018380: 636f 6d65 3222 0d0a 2020 2020 2020 2020  come2"..        
-00018390: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000183a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183b0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
-000183c0: 2020 2020 2020 2020 2020 2023 6173 7365             #asse
-000183d0: 7473 3120 3d20 6669 6c65 6461 7461 5b22  ts1 = filedata["
-000183e0: 6131 225d 202b 2022 5c6e 220d 0a20 2020  a1"] + "\n"..   
-000183f0: 2020 2020 2020 2020 2020 2020 2023 6c69               #li
-00018400: 6162 7331 203d 2066 696c 6564 6174 615b  abs1 = filedata[
-00018410: 226c 3122 5d20 2b20 225c 6e22 202b 2066  "l1"] + "\n" + f
-00018420: 696c 6564 6174 615b 2265 3122 5d20 2b20  iledata["e1"] + 
-00018430: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-00018440: 2020 2020 2020 2020 2361 7373 6574 7332          #assets2
-00018450: 203d 2066 696c 6564 6174 615b 2261 3222   = filedata["a2"
-00018460: 5d20 2b20 225c 6e22 0d0a 2020 2020 2020  ] + "\n"..      
-00018470: 2020 2020 2020 2020 2020 236c 6961 6273            #liabs
-00018480: 3220 3d20 6669 6c65 6461 7461 5b22 6c32  2 = filedata["l2
-00018490: 225d 202b 2022 5c6e 2220 2b20 6669 6c65  "] + "\n" + file
-000184a0: 6461 7461 5b22 6532 225d 202b 2022 5c6e  data["e2"] + "\n
-000184b0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-000184c0: 2020 2020 2069 6620 2861 6765 6e74 3120       if (agent1 
-000184d0: 3d3d 206d 795f 6167 656e 7420 6f72 2061  == my_agent or a
-000184e0: 6765 6e74 3220 3d3d 206d 795f 6167 656e  gent2 == my_agen
-000184f0: 7429 2061 6e64 2073 7472 2866 696c 6564  t) and str(filed
-00018500: 6174 615b 7265 665f 696e 636f 6d65 5d29  ata[ref_income])
-00018510: 2021 3d20 274e 6f6e 6527 3a0d 0a20 2020   != 'None':..   
-00018520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018530: 206d 7964 6963 7420 3d20 7b22 4761 696e   mydict = {"Gain
-00018540: 223a 2022 4761 696e 7322 2c0d 0a20 2020  ": "Gains",..   
-00018550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018560: 2020 2020 2020 2020 2020 2022 4c6f 7373             "Loss
-00018570: 223a 2022 4c6f 7373 6573 222c 0d0a 2020  ": "Losses",..  
-00018580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018590: 2020 2020 2020 2020 2020 2020 2245 7870              "Exp
-000185a0: 656e 7365 223a 2022 4578 7065 6e73 6573  ense": "Expenses
-000185b0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-000185c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000185d0: 2020 2252 6576 656e 7565 223a 2022 5265    "Revenue": "Re
-000185e0: 7665 6e75 6573 222c 0d0a 2020 2020 2020  venues",..      
-000185f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018600: 2020 2020 2020 2020 2254 6178 223a 2022          "Tax": "
-00018610: 5461 7865 7322 2c0d 0a20 2020 2020 2020  Taxes",..       
-00018620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018630: 2020 2020 2020 2022 4e6f 6e74 6178 2e20         "Nontax. 
-00018640: 5072 6f66 6974 223a 2022 4e6f 6e74 6178  Profit": "Nontax
-00018650: 6162 6c65 2050 726f 6669 7473 222c 0d0a  able Profits",..
-00018660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018670: 2020 2020 2020 2020 2020 2020 2020 224e                "N
-00018680: 6f6e 7461 782e 204c 6f73 7322 3a20 224e  ontax. Loss": "N
-00018690: 6f6e 7461 7861 626c 6520 4c6f 7373 6573  ontaxable Losses
-000186a0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-000186b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000186c0: 2020 224e 6f6e 2d4f 702e 2049 6e63 6f6d    "Non-Op. Incom
-000186d0: 6522 3a20 224e 6f6e 2d4f 7065 7261 7469  e": "Non-Operati
-000186e0: 6f6e 616c 2049 6e63 6f6d 6522 2c0d 0a20  onal Income",.. 
-000186f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018700: 2020 2020 2020 2020 2020 2020 2022 496e               "In
-00018710: 7465 7265 7374 223a 2022 496e 7465 7265  terest": "Intere
-00018720: 7374 2050 6179 6d65 6e74 7322 7d0d 0a0d  st Payments"}...
-00018730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018740: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-00018750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018760: 2020 2069 6620 6167 656e 7431 203d 3d20     if agent1 == 
-00018770: 6d79 5f61 6765 6e74 3a0d 0a20 2020 2020  my_agent:..     
-00018780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018790: 2020 2020 2020 2073 6967 6e20 3d20 222d         sign = "-
-000187a0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-000187b0: 2020 2020 2020 2020 2020 2069 6620 6167             if ag
-000187c0: 656e 7432 203d 3d20 6d79 5f61 6765 6e74  ent2 == my_agent
-000187d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000187e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000187f0: 6967 6e20 3d20 222b 220d 0a0d 0a20 2020  ign = "+"....   
-00018800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018810: 2020 2020 2071 203d 2073 796d 7079 2e6c       q = sympy.l
-00018820: 6174 6578 2873 796d 7079 2e73 696d 706c  atex(sympy.simpl
-00018830: 6966 7928 7369 676e 202b 2066 696c 6564  ify(sign + filed
-00018840: 6174 615b 2271 7561 6e74 6974 7922 5d29  ata["quantity"])
-00018850: 2c20 6d6f 6465 3d22 706c 6169 6e22 290d  , mode="plain").
-00018860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018870: 2020 2020 2020 2020 2073 7562 6a65 6374           subject
-00018880: 203d 2066 696c 6564 6174 615b 2273 7562   = filedata["sub
-00018890: 6a65 6374 225d 2e72 6570 6c61 6365 2822  ject"].replace("
-000188a0: 5f22 2c20 2220 2229 2e63 6170 6974 616c  _", " ").capital
-000188b0: 697a 6528 290d 0a20 2020 2020 2020 2020  ize()..         
-000188c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000188d0: 7269 6e74 2822 2020 2020 2020 666f 756e  rint("      foun
-000188e0: 6422 2c71 2c73 7562 6a65 6374 290d 0a20  d",q,subject).. 
+000170a0: 2020 636f 6d6d 616e 6473 2e61 7070 656e    commands.appen
+000170b0: 6428 2225 732e 6261 6c61 6e63 655f 7368  d("%s.balance_sh
+000170c0: 6565 742e 6368 616e 6765 5f69 7465 6d28  eet.change_item(
+000170d0: 2725 7327 2c20 2573 2c20 2573 2c20 7375  '%s', %s, %s, su
+000170e0: 7070 7265 7373 5f73 746f 636b 3d25 7329  ppress_stock=%s)
+000170f0: 2220 2520 280d 0a20 2020 2020 2020 2020  " % (..         
+00017100: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00017110: 6765 6e74 322c 2069 7465 6d2c 2022 4261  gent2, item, "Ba
+00017120: 6c61 6e63 6545 6e74 7279 2e41 5353 4554  lanceEntry.ASSET
+00017130: 5322 2c20 7369 676e 202b 2071 7561 6e74  S", sign + quant
+00017140: 6974 792c 2073 696c 656e 7429 290d 0a20  ity, silent)).. 
+00017150: 2020 2020 2020 2020 2020 2066 6f72 2065             for e
+00017160: 6e74 7279 2069 6e20 6c32 2e73 706c 6974  ntry in l2.split
+00017170: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+00017180: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
+00017190: 7920 213d 2022 2220 616e 6420 656e 7472  y != "" and entr
+000171a0: 7920 213d 2022 5c6e 223a 0d0a 2020 2020  y != "\n":..    
+000171b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000171c0: 7369 676e 2c20 6974 656d 2c20 7369 6c65  sign, item, sile
+000171d0: 6e74 203d 2073 656c 662e 656e 7472 795f  nt = self.entry_
+000171e0: 746f 5f76 616c 7328 656e 7472 792c 2061  to_vals(entry, a
+000171f0: 6765 6e74 322c 2022 4c69 6162 696c 6974  gent2, "Liabilit
+00017200: 6965 7322 290d 0a20 2020 2020 2020 2020  ies")..         
+00017210: 2020 2020 2020 2020 2020 2069 6620 7369             if si
+00017220: 676e 2069 7320 6e6f 7420 4e6f 6e65 3a0d  gn is not None:.
+00017230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017240: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
+00017250: 732e 6170 7065 6e64 2822 2573 2e62 616c  s.append("%s.bal
+00017260: 616e 6365 5f73 6865 6574 2e63 6861 6e67  ance_sheet.chang
+00017270: 655f 6974 656d 2827 2573 272c 2025 732c  e_item('%s', %s,
+00017280: 2025 732c 2073 7570 7072 6573 735f 7374   %s, suppress_st
+00017290: 6f63 6b3d 2573 2922 2025 2028 0d0a 2020  ock=%s)" % (..  
+000172a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000172b0: 2020 2020 2020 6167 656e 7432 2c20 6974        agent2, it
+000172c0: 656d 2c20 2242 616c 616e 6365 456e 7472  em, "BalanceEntr
+000172d0: 792e 4c49 4142 494c 4954 4945 5322 2c20  y.LIABILITIES", 
+000172e0: 7369 676e 202b 2071 7561 6e74 6974 792c  sign + quantity,
+000172f0: 2073 696c 656e 7429 290d 0a0d 0a20 2020   silent))....   
+00017300: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
+00017310: 732e 6170 7065 6e64 2822 2573 2e62 616c  s.append("%s.bal
+00017320: 616e 6365 5f73 6865 6574 2e65 6e67 6167  ance_sheet.engag
+00017330: 6528 2922 2025 2061 6765 6e74 3129 0d0a  e()" % agent1)..
+00017340: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+00017350: 7275 653a 2023 2061 6765 6e74 3121 3d61  rue: # agent1!=a
+00017360: 6765 6e74 323a 0d0a 2020 2020 2020 2020  gent2:..        
+00017370: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
+00017380: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
+00017390: 6e63 655f 7368 6565 742e 656e 6761 6765  nce_sheet.engage
+000173a0: 2829 2220 2520 6167 656e 7432 290d 0a0d  ()" % agent2)...
+000173b0: 0a20 2020 2020 2020 2020 2020 2061 6464  .            add
+000173c0: 5f66 6c6f 7720 3d20 666c 6f77 5f63 6865  _flow = flow_che
+000173d0: 636b 0d0a 2020 2020 2020 2020 2020 2020  ck..            
+000173e0: 6966 2061 6464 5f66 6c6f 773a 0d0a 2020  if add_flow:..  
+000173f0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00017400: 696e 7428 7375 626a 6563 745f 7374 722c  int(subject_str,
+00017410: 2266 6c6f 7720 6368 6563 6b22 2c66 6c6f  "flow check",flo
+00017420: 775f 6368 6563 6b29 0d0a 0d0a 2020 2020  w_check)....    
+00017430: 2020 2020 2020 2020 2020 2020 6b69 6e64              kind
+00017440: 5f65 6e75 6d20 3d20 2228 2573 2c25 7329  _enum = "(%s,%s)
+00017450: 2220 2520 286b 696e 642e 7370 6c69 7428  " % (kind.split(
+00017460: 222d 3e22 295b 305d 2e73 7472 6970 2829  "->")[0].strip()
+00017470: 2c6b 696e 642e 7370 6c69 7428 222d 3e22  ,kind.split("->"
+00017480: 295b 315d 2e73 7472 6970 2829 290d 0a0d  )[1].strip())...
+00017490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000174a0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
+000174b0: 2822 466c 6f77 4d61 7472 6978 2829 2e6c  ("FlowMatrix().l
+000174c0: 6f67 5f66 6c6f 7728 2573 2c20 2573 2c20  og_flow(%s, %s, 
+000174d0: 2573 2c20 2573 2c20 7375 626a 6563 743d  %s, %s, subject=
+000174e0: 2725 7327 2922 2025 2028 6b69 6e64 5f65  '%s')" % (kind_e
+000174f0: 6e75 6d2c 2071 7561 6e74 6974 792c 2061  num, quantity, a
+00017500: 6765 6e74 312c 2061 6765 6e74 322c 2073  gent1, agent2, s
+00017510: 7562 6a65 6374 5f73 7472 2929 0d0a 0d0a  ubject_str))....
+00017520: 2020 2020 2020 2020 2020 2020 2320 6170              # ap
+00017530: 7065 6e64 2069 6e73 6572 745f 6c69 6e6b  pend insert_link
+00017540: 2063 6f6d 6d61 6e64 2074 6f20 636f 6465   command to code
+00017550: 0d0a 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
+00017560: 2020 6d79 5f69 6e63 6f6d 655f 6469 6374    my_income_dict
+00017570: 203d 207b 2023 2023 7472 616e 736c 6174   = { # #translat
+00017580: 6573 2073 7472 696e 6720 696e 746f 2049  es string into I
+00017590: 4353 456e 7472 7920 2866 6f72 2062 6574  CSEntry (for bet
+000175a0: 7465 7220 6566 6669 6369 656e 6379 290d  ter efficiency).
+000175b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000175c0: 2022 5265 7665 6e75 6522 3a20 2249 4353   "Revenue": "ICS
+000175d0: 456e 7472 792e 5245 5645 4e55 4553 222c  Entry.REVENUES",
+000175e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000175f0: 2020 224e 6f6e 2d4f 702e 2049 6e63 6f6d    "Non-Op. Incom
+00017600: 6522 3a20 2249 4353 456e 7472 792e 4e4f  e": "ICSEntry.NO
+00017610: 4922 2c0d 0a20 2020 2020 2020 2020 2020  I",..           
+00017620: 2020 2020 2022 4578 7065 6e73 6522 3a20       "Expense": 
+00017630: 2249 4353 456e 7472 792e 4558 5045 4e53  "ICSEntry.EXPENS
+00017640: 4553 222c 0d0a 2020 2020 2020 2020 2020  ES",..          
+00017650: 2020 2020 2020 2254 6178 223a 2022 4943        "Tax": "IC
+00017660: 5345 6e74 7279 2e54 4158 4553 222c 0d0a  SEntry.TAXES",..
+00017670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017680: 2249 6e74 6572 6573 7422 3a20 2249 4353  "Interest": "ICS
+00017690: 456e 7472 792e 494e 5445 5245 5354 222c  Entry.INTEREST",
+000176a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000176b0: 2020 2247 6169 6e22 3a20 2249 4353 456e    "Gain": "ICSEn
+000176c0: 7472 792e 4741 494e 5322 2c0d 0a20 2020  try.GAINS",..   
+000176d0: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
+000176e0: 6e74 6178 2e50 726f 6669 7422 3a20 2249  ntax.Profit": "I
+000176f0: 4353 456e 7472 792e 4e4f 4e54 4158 5f50  CSEntry.NONTAX_P
+00017700: 524f 4649 5453 222c 0d0a 2020 2020 2020  ROFITS",..      
+00017710: 2020 2020 2020 2020 2020 224e 6f6e 7461            "Nonta
+00017720: 782e 2050 726f 6669 7422 3a20 2249 4353  x. Profit": "ICS
+00017730: 456e 7472 792e 4e4f 4e54 4158 5f50 524f  Entry.NONTAX_PRO
+00017740: 4649 5453 222c 2023 2071 7569 636b 2061  FITS", # quick a
+00017750: 6e64 2064 6972 7479 2062 7567 6669 780d  nd dirty bugfix.
+00017760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017770: 2022 4e6f 6e74 6178 2e20 4c6f 7373 223a   "Nontax. Loss":
+00017780: 2020 2249 4353 456e 7472 792e 4e4f 4e54    "ICSEntry.NONT
+00017790: 4158 5f4c 4f53 5345 5322 2c0d 0a20 2020  AX_LOSSES",..   
+000177a0: 2020 2020 2020 2020 2020 2020 2022 4c6f               "Lo
+000177b0: 7373 223a 2020 2249 4353 456e 7472 792e  ss":  "ICSEntry.
+000177c0: 4c4f 5353 4553 220d 0a20 2020 2020 2020  LOSSES"..       
+000177d0: 2020 2020 207d 0d0a 0d0a 2020 2020 2020       }....      
+000177e0: 2020 2020 2020 2320 696e 636f 6d65 2073        # income s
+000177f0: 7461 7465 6d65 6e74 3f0d 0a20 2020 2020  tatement?..     
+00017800: 2020 2020 2020 2069 6620 2269 6e63 6f6d         if "incom
+00017810: 6531 2220 696e 2066 696c 6564 6174 613a  e1" in filedata:
+00017820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017830: 2020 6966 2073 7472 2866 696c 6564 6174    if str(filedat
+00017840: 615b 2269 6e63 6f6d 6531 225d 2920 213d  a["income1"]) !=
+00017850: 2027 4e6f 6e65 273a 0d0a 2020 2020 2020   'None':..      
+00017860: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00017870: 6d6d 616e 6473 2e61 7070 656e 6428 2225  mmands.append("%
+00017880: 732e 696e 636f 6d65 5f73 7461 7465 6d65  s.income_stateme
+00017890: 6e74 2e6e 6577 5f65 6e74 7279 2825 732c  nt.new_entry(%s,
+000178a0: 2725 7327 2c25 7329 2220 2520 2861 6765  '%s',%s)" % (age
+000178b0: 6e74 312c 6d79 5f69 6e63 6f6d 655f 6469  nt1,my_income_di
+000178c0: 6374 5b66 696c 6564 6174 615b 2269 6e63  ct[filedata["inc
+000178d0: 6f6d 6531 225d 5d2c 7375 626a 6563 742c  ome1"]],subject,
+000178e0: 7175 616e 7469 7479 2929 0d0a 0d0a 2020  quantity))....  
+000178f0: 2020 2020 2020 2020 2020 6966 2022 696e            if "in
+00017900: 636f 6d65 3222 2069 6e20 6669 6c65 6461  come2" in fileda
+00017910: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
+00017920: 2020 2020 2069 6620 7374 7228 6669 6c65       if str(file
+00017930: 6461 7461 5b22 696e 636f 6d65 3222 5d29  data["income2"])
+00017940: 2021 3d20 274e 6f6e 6527 3a0d 0a20 2020   != 'None':..   
+00017950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017960: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
+00017970: 2822 2573 2e69 6e63 6f6d 655f 7374 6174  ("%s.income_stat
+00017980: 656d 656e 742e 6e65 775f 656e 7472 7928  ement.new_entry(
+00017990: 2573 2c27 2573 272c 2573 2922 2025 2028  %s,'%s',%s)" % (
+000179a0: 6167 656e 7432 2c20 6d79 5f69 6e63 6f6d  agent2, my_incom
+000179b0: 655f 6469 6374 5b66 696c 6564 6174 615b  e_dict[filedata[
+000179c0: 2269 6e63 6f6d 6532 225d 5d2c 2073 7562  "income2"]], sub
+000179d0: 6a65 6374 2c20 7175 616e 7469 7479 2929  ject, quantity))
+000179e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000179f0: 2320 6361 7368 2066 6c6f 7720 7374 6174  # cash flow stat
+00017a00: 656d 656e 740d 0a20 2020 2020 2020 2020  ement..         
+00017a10: 2020 2069 6620 2263 6173 6866 6c6f 7731     if "cashflow1
+00017a20: 2220 696e 2066 696c 6564 6174 613a 0d0a  " in filedata:..
+00017a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017a40: 6966 2073 7472 2866 696c 6564 6174 615b  if str(filedata[
+00017a50: 2263 6173 6866 6c6f 7731 225d 2920 213d  "cashflow1"]) !=
+00017a60: 2027 4e6f 6e65 273a 0d0a 2020 2020 2020   'None':..      
+00017a70: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00017a80: 6d6d 616e 6473 2e61 7070 656e 6428 2225  mmands.append("%
+00017a90: 732e 6361 7368 5f66 6c6f 775f 7374 6174  s.cash_flow_stat
+00017aa0: 656d 656e 742e 6e65 775f 656e 7472 7928  ement.new_entry(
+00017ab0: 2573 2c27 2573 272c 2d25 7329 2220 2520  %s,'%s',-%s)" % 
+00017ac0: 2861 6765 6e74 312c 2243 6173 6846 6c6f  (agent1,"CashFlo
+00017ad0: 7745 6e74 7279 2e22 202b 2066 696c 6564  wEntry." + filed
+00017ae0: 6174 615b 2263 6173 6866 6c6f 7731 225d  ata["cashflow1"]
+00017af0: 2e75 7070 6572 2829 2c73 7562 6a65 6374  .upper(),subject
+00017b00: 2c71 7561 6e74 6974 7929 290d 0a0d 0a20  ,quantity)).... 
+00017b10: 2020 2020 2020 2020 2020 2069 6620 2263             if "c
+00017b20: 6173 6866 6c6f 7732 2220 696e 2066 696c  ashflow2" in fil
+00017b30: 6564 6174 613a 0d0a 2020 2020 2020 2020  edata:..        
+00017b40: 2020 2020 2020 2020 6966 2073 7472 2866          if str(f
+00017b50: 696c 6564 6174 615b 2263 6173 6866 6c6f  iledata["cashflo
+00017b60: 7732 225d 2920 213d 2027 4e6f 6e65 273a  w2"]) != 'None':
+00017b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017b80: 2020 2020 2020 636f 6d6d 616e 6473 2e61        commands.a
+00017b90: 7070 656e 6428 2225 732e 6361 7368 5f66  ppend("%s.cash_f
+00017ba0: 6c6f 775f 7374 6174 656d 656e 742e 6e65  low_statement.ne
+00017bb0: 775f 656e 7472 7928 2573 2c27 2573 272c  w_entry(%s,'%s',
+00017bc0: 2573 2922 2025 2028 6167 656e 7432 2c22  %s)" % (agent2,"
+00017bd0: 4361 7368 466c 6f77 456e 7472 792e 2220  CashFlowEntry." 
+00017be0: 2b20 6669 6c65 6461 7461 5b22 6361 7368  + filedata["cash
+00017bf0: 666c 6f77 3222 5d2e 7570 7065 7228 292c  flow2"].upper(),
+00017c00: 7375 626a 6563 742c 7175 616e 7469 7479  subject,quantity
+00017c10: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+00017c20: 2020 6966 2054 7275 653a 2023 2061 6765    if True: # age
+00017c30: 6e74 3120 213d 2061 6765 6e74 323a 0d0a  nt1 != agent2:..
+00017c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c50: 6d65 7468 6f64 203d 2022 6465 6620 2573  method = "def %s
+00017c60: 2825 732c 2025 732c 2025 7329 3a5c 6e22  (%s, %s, %s):\n"
+00017c70: 2025 2028 7375 626a 6563 742c 6167 656e   % (subject,agen
+00017c80: 7431 2c61 6765 6e74 322c 7175 616e 7469  t1,agent2,quanti
+00017c90: 7479 290d 0a20 2020 2020 2020 2020 2020  ty)..           
+00017ca0: 2023 656c 7365 3a0d 0a20 2020 2020 2020   #else:..       
+00017cb0: 2020 2020 2023 2020 2020 6d65 7468 6f64       #    method
+00017cc0: 203d 2022 6465 6620 2573 2825 732c 2025   = "def %s(%s, %
+00017cd0: 7329 3a5c 6e22 2025 2028 7375 626a 6563  s):\n" % (subjec
+00017ce0: 742c 2061 6765 6e74 312c 2071 7561 6e74  t, agent1, quant
+00017cf0: 6974 7929 0d0a 0d0a 2020 2020 2020 2020  ity)....        
+00017d00: 2020 2020 6966 2022 6465 7363 7269 7074      if "descript
+00017d10: 696f 6e22 2069 6e20 6669 6c65 6461 7461  ion" in filedata
+00017d20: 3a20 2320 6164 6420 7468 6520 6465 7363  : # add the desc
+00017d30: 7269 7074 696f 6e20 696e 2074 6865 2064  ription in the d
+00017d40: 6f63 7374 7269 6e67 206f 6620 7468 6520  ocstring of the 
+00017d50: 6675 6e63 7469 6f6e 2064 6566 696e 6974  function definit
+00017d60: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
+00017d70: 2020 2020 206d 6574 686f 6420 2b3d 2022       method += "
+00017d80: 2020 2020 2322 202b 2066 696c 6564 6174      #" + filedat
+00017d90: 615b 2264 6573 6372 6970 7469 6f6e 225d  a["description"]
+00017da0: 202b 2022 5c6e 220d 0a0d 0a20 2020 2020   + "\n"....     
+00017db0: 2020 2020 2020 2066 6f72 2063 6f6d 6d61         for comma
+00017dc0: 6e64 2069 6e20 636f 6d6d 616e 6473 3a0d  nd in commands:.
+00017dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017de0: 206d 6574 686f 6420 2b3d 2022 2020 2020   method += "    
+00017df0: 2220 2b20 636f 6d6d 616e 6420 2b20 225c  " + command + "\
+00017e00: 6e22 0d0a 0d0a 2020 2020 2020 2020 2020  n"....          
+00017e10: 2020 6d65 7468 6f64 202b 3d20 225c 6e5c    method += "\n\
+00017e20: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
+00017e30: 636f 6465 202b 3d20 6d65 7468 6f64 0d0a  code += method..
+00017e40: 0d0a 2020 2020 2020 2020 666f 6c64 6572  ..        folder
+00017e50: 203d 206f 732e 7061 7468 2e64 6972 6e61   = os.path.dirna
+00017e60: 6d65 2873 656c 662e 6375 7272 656e 745f  me(self.current_
+00017e70: 6669 6c65 2920 2320 7374 6174 7573 4261  file) # statusBa
+00017e80: 7228 292e 6375 7272 656e 744d 6573 7361  r().currentMessa
+00017e90: 6765 2829 290d 0a20 2020 2020 2020 2066  ge())..        f
+00017ea0: 6e61 6d65 203d 2020 666f 6c64 6572 202b  name =  folder +
+00017eb0: 2022 2f70 7974 686f 6e5f 636f 6465 2f74   "/python_code/t
+00017ec0: 7261 6e73 6163 7469 6f6e 732e 7079 220d  ransactions.py".
+00017ed0: 0a0d 0a20 2020 2020 2020 2077 6974 6820  ...        with 
+00017ee0: 6f70 656e 2866 6e61 6d65 2c22 7722 2c65  open(fname,"w",e
+00017ef0: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
+00017f00: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
+00017f10: 2020 2020 2020 2066 696c 652e 7772 6974         file.writ
+00017f20: 6528 636f 6465 290d 0a0d 0a20 2020 2020  e(code)....     
+00017f30: 2020 2069 6620 7368 6f77 5f6e 6f74 6966     if show_notif
+00017f40: 6963 6174 696f 6e3a 0d0a 2020 2020 2020  ication:..      
+00017f50: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+00017f60: 7928 6d65 7373 6167 653d 2243 6f64 6520  y(message="Code 
+00017f70: 6578 706f 7274 6564 2074 6f20 2573 2220  exported to %s" 
+00017f80: 2520 2866 6e61 6d65 292c 7469 746c 653d  % (fname),title=
+00017f90: 2253 7563 6365 7373 2229 0d0a 0d0a 0d0a  "Success")......
+00017fa0: 2020 2020 6465 6620 6765 6e5f 6963 735f      def gen_ics_
+00017fb0: 7369 6e67 6c65 2873 656c 6629 3a0d 0a20  single(self):.. 
+00017fc0: 2020 2020 2020 2069 6620 7365 6c66 2e64         if self.d
+00017fd0: 7261 7763 616e 7661 732e 6869 6768 6c69  rawcanvas.highli
+00017fe0: 6768 7465 6420 6973 204e 6f6e 653a 0d0a  ghted is None:..
+00017ff0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00018000: 2e6e 6f74 6966 7928 7469 746c 653d 224e  .notify(title="N
+00018010: 6f20 6167 656e 7420 7365 6c65 6374 6564  o agent selected
+00018020: 222c 206d 6573 7361 6765 3d22 4e6f 2061  ", message="No a
+00018030: 6765 6e74 2073 656c 6563 7465 642e 2050  gent selected. P
+00018040: 6c65 6173 6520 7365 6c65 6374 206f 6e65  lease select one
+00018050: 2066 6972 7374 2e22 290d 0a20 2020 2020   first.")..     
+00018060: 2020 2020 2020 2072 6574 7572 6e0d 0a20         return.. 
+00018070: 2020 2020 2020 2069 6620 7365 6c66 2e64         if self.d
+00018080: 7261 7763 616e 7661 732e 6869 6768 6c69  rawcanvas.highli
+00018090: 6768 7465 642e 6973 6865 6c70 6572 3a0d  ghted.ishelper:.
+000180a0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000180b0: 662e 6e6f 7469 6679 2874 6974 6c65 3d22  f.notify(title="
+000180c0: 4e6f 2061 6765 6e74 2073 656c 6563 7465  No agent selecte
+000180d0: 6422 2c20 6d65 7373 6167 653d 224e 6f20  d", message="No 
+000180e0: 7661 6c69 6420 626f 7820 7365 6c65 6374  valid box select
+000180f0: 6564 2e20 506c 6561 7365 2073 656c 6563  ed. Please selec
+00018100: 7420 616e 2061 6765 6e74 2e22 290d 0a20  t an agent.").. 
+00018110: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00018120: 6e0d 0a20 2020 2020 2020 206d 795f 6167  n..        my_ag
+00018130: 656e 7420 3d20 7365 6c66 2e64 7261 7763  ent = self.drawc
+00018140: 616e 7661 732e 6869 6768 6c69 6768 7465  anvas.highlighte
+00018150: 642e 6e61 6d65 0d0a 0d0a 2020 2020 2020  d.name....      
+00018160: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
+00018170: 6520 3d20 207b 2253 7562 6a65 6374 223a  e =  {"Subject":
+00018180: 5b5d 2c22 5368 6f72 7420 4e61 6d65 223a  [],"Short Name":
+00018190: 205b 5d2c 2251 7561 6e74 6974 7922 3a5b   [],"Quantity":[
+000181a0: 5d2c 2022 5479 7065 223a 5b5d 2c20 2252  ], "Type":[], "R
+000181b0: 616e 6b69 6e67 223a 5b5d 7d20 2320 7261  anking":[]} # ra
+000181c0: 6e6b 696e 6720 7769 6c6c 2062 6520 7265  nking will be re
+000181d0: 6d6f 7665 6420 6c61 7465 720d 0a20 2020  moved later..   
+000181e0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+000181f0: 2020 2247 6169 6e73 223a 205b 5d2c 2022    "Gains": [], "
+00018200: 4c6f 7373 6573 223a 205b 5d2c 2022 5265  Losses": [], "Re
+00018210: 7665 6e75 6573 223a 205b 5d2c 2022 5461  venues": [], "Ta
+00018220: 7865 7322 3a20 5b5d 2c20 2245 7870 656e  xes": [], "Expen
+00018230: 7365 7322 3a20 5b5d 2c0d 0a20 2020 2020  ses": [],..     
+00018240: 2020 2020 224e 6f6e 7461 7861 626c 6520      "Nontaxable 
+00018250: 4c6f 7373 6573 223a 205b 5d2c 2022 4e6f  Losses": [], "No
+00018260: 6e74 6178 6162 6c65 2050 726f 6669 7473  ntaxable Profits
+00018270: 223a 205b 5d2c 0d0a 2020 2020 2020 2020  ": [],..        
+00018280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018290: 2020 2020 2020 2022 4e6f 6e2d 4f70 6572         "Non-Oper
+000182a0: 6174 696f 6e61 6c20 496e 636f 6d65 223a  ational Income":
+000182b0: 205b 5d2c 0d0a 2020 2020 2020 2020 2020   [],..          
+000182c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000182d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000182e0: 2020 2020 2022 496e 7465 7265 7374 2050       "Interest P
+000182f0: 6179 6d65 6e74 7322 3a20 5b5d 0d0a 2020  ayments": []..  
+00018300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018320: 2020 2020 2020 2020 2020 2020 207d 0d0a               }..
+00018330: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00018340: 2020 2020 206b 203d 2030 0d0a 2020 2020       k = 0..    
+00018350: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00018360: 2020 2020 2020 666f 7220 6669 6c65 6461        for fileda
+00018370: 7461 2069 6e20 7365 6c66 2e65 6e74 7279  ta in self.entry
+00018380: 5f64 6174 613a 0d0a 2020 2020 2020 2020  _data:..        
+00018390: 2020 2020 2020 2020 6167 656e 7431 203d          agent1 =
+000183a0: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
+000183b0: 3122 5d2e 7374 7269 7028 290d 0a20 2020  1"].strip()..   
+000183c0: 2020 2020 2020 2020 2020 2020 2061 6765               age
+000183d0: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
+000183e0: 6167 656e 7432 225d 2e73 7472 6970 2829  agent2"].strip()
+000183f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00018400: 2020 2020 7072 696e 7428 2261 6765 6e74      print("agent
+00018410: 3122 2c61 6765 6e74 312c 2261 6765 6e74  1",agent1,"agent
+00018420: 3222 2c61 6765 6e74 3229 0d0a 2020 2020  2",agent2)..    
+00018430: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00018440: 6765 6e74 3120 3d3d 206d 795f 6167 656e  gent1 == my_agen
+00018450: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00018460: 2020 2020 2020 2020 7265 665f 6167 656e          ref_agen
+00018470: 7420 3d20 2261 6765 6e74 3122 0d0a 2020  t = "agent1"..  
+00018480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018490: 2020 7265 665f 696e 636f 6d65 203d 2022    ref_income = "
+000184a0: 696e 636f 6d65 3122 0d0a 0d0a 2020 2020  income1"....    
+000184b0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000184c0: 2061 6765 6e74 3220 3d3d 206d 795f 6167   agent2 == my_ag
+000184d0: 656e 743a 0d0a 2020 2020 2020 2020 2020  ent:..          
+000184e0: 2020 2020 2020 2020 2020 7265 665f 6167            ref_ag
+000184f0: 656e 7420 3d20 2261 6765 6e74 3222 0d0a  ent = "agent2"..
+00018500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018510: 2020 2020 7265 665f 696e 636f 6d65 203d      ref_income =
+00018520: 2022 696e 636f 6d65 3222 0d0a 2020 2020   "income2"..    
+00018530: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00018540: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00018550: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
+00018560: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00018570: 6173 7365 7473 3120 3d20 6669 6c65 6461  assets1 = fileda
+00018580: 7461 5b22 6131 225d 202b 2022 5c6e 220d  ta["a1"] + "\n".
+00018590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000185a0: 2023 6c69 6162 7331 203d 2066 696c 6564   #liabs1 = filed
+000185b0: 6174 615b 226c 3122 5d20 2b20 225c 6e22  ata["l1"] + "\n"
+000185c0: 202b 2066 696c 6564 6174 615b 2265 3122   + filedata["e1"
+000185d0: 5d20 2b20 225c 6e22 0d0a 0d0a 2020 2020  ] + "\n"....    
+000185e0: 2020 2020 2020 2020 2020 2020 2361 7373              #ass
+000185f0: 6574 7332 203d 2066 696c 6564 6174 615b  ets2 = filedata[
+00018600: 2261 3222 5d20 2b20 225c 6e22 0d0a 2020  "a2"] + "\n"..  
+00018610: 2020 2020 2020 2020 2020 2020 2020 236c                #l
+00018620: 6961 6273 3220 3d20 6669 6c65 6461 7461  iabs2 = filedata
+00018630: 5b22 6c32 225d 202b 2022 5c6e 2220 2b20  ["l2"] + "\n" + 
+00018640: 6669 6c65 6461 7461 5b22 6532 225d 202b  filedata["e2"] +
+00018650: 2022 5c6e 220d 0a0d 0a20 2020 2020 2020   "\n"....       
+00018660: 2020 2020 2020 2020 2069 6620 2861 6765           if (age
+00018670: 6e74 3120 3d3d 206d 795f 6167 656e 7420  nt1 == my_agent 
+00018680: 6f72 2061 6765 6e74 3220 3d3d 206d 795f  or agent2 == my_
+00018690: 6167 656e 7429 2061 6e64 2073 7472 2866  agent) and str(f
+000186a0: 696c 6564 6174 615b 7265 665f 696e 636f  iledata[ref_inco
+000186b0: 6d65 5d29 2021 3d20 274e 6f6e 6527 3a0d  me]) != 'None':.
+000186c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000186d0: 2020 2020 206d 7964 6963 7420 3d20 7b22       mydict = {"
+000186e0: 4761 696e 223a 2022 4761 696e 7322 2c0d  Gain": "Gains",.
+000186f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018700: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00018710: 4c6f 7373 223a 2022 4c6f 7373 6573 222c  Loss": "Losses",
+00018720: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018740: 2245 7870 656e 7365 223a 2022 4578 7065  "Expense": "Expe
+00018750: 6e73 6573 222c 0d0a 2020 2020 2020 2020  nses",..        
+00018760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018770: 2020 2020 2020 2252 6576 656e 7565 223a        "Revenue":
+00018780: 2022 5265 7665 6e75 6573 222c 0d0a 2020   "Revenues",..  
+00018790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187a0: 2020 2020 2020 2020 2020 2020 2254 6178              "Tax
+000187b0: 223a 2022 5461 7865 7322 2c0d 0a20 2020  ": "Taxes",..   
+000187c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187d0: 2020 2020 2020 2020 2020 2022 4e6f 6e74             "Nont
+000187e0: 6178 2e20 5072 6f66 6974 223a 2022 4e6f  ax. Profit": "No
+000187f0: 6e74 6178 6162 6c65 2050 726f 6669 7473  ntaxable Profits
+00018800: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00018810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018820: 2020 224e 6f6e 7461 782e 204c 6f73 7322    "Nontax. Loss"
+00018830: 3a20 224e 6f6e 7461 7861 626c 6520 4c6f  : "Nontaxable Lo
+00018840: 7373 6573 222c 0d0a 2020 2020 2020 2020  sses",..        
+00018850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018860: 2020 2020 2020 224e 6f6e 2d4f 702e 2049        "Non-Op. I
+00018870: 6e63 6f6d 6522 3a20 224e 6f6e 2d4f 7065  ncome": "Non-Ope
+00018880: 7261 7469 6f6e 616c 2049 6e63 6f6d 6522  rational Income"
+00018890: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000188a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000188b0: 2022 496e 7465 7265 7374 223a 2022 496e   "Interest": "In
+000188c0: 7465 7265 7374 2050 6179 6d65 6e74 7322  terest Payments"
+000188d0: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
+000188e0: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
 000188f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018900: 2020 2020 2020 2074 7065 203d 206d 7964         tpe = myd
-00018910: 6963 745b 6669 6c65 6461 7461 5b72 6566  ict[filedata[ref
-00018920: 5f69 6e63 6f6d 655d 5d0d 0a20 2020 2020  _income]]..     
-00018930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018940: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
-00018950: 6d65 5b22 5479 7065 225d 2e61 7070 656e  me["Type"].appen
-00018960: 6428 7470 6529 0d0a 2020 2020 2020 2020  d(tpe)..        
-00018970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018980: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
-00018990: 2253 7562 6a65 6374 225d 2e61 7070 656e  "Subject"].appen
-000189a0: 6428 7375 626a 6563 7429 0d0a 2020 2020  d(subject)..    
-000189b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000189c0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-000189d0: 6f6d 655b 2251 7561 6e74 6974 7922 5d2e  ome["Quantity"].
-000189e0: 6170 7065 6e64 2873 7472 2871 2929 0d0a  append(str(q))..
-000189f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a00: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00018a10: 5f69 6e63 6f6d 655b 2253 686f 7274 204e  _income["Short N
-00018a20: 616d 6522 5d2e 6170 7065 6e64 2866 696c  ame"].append(fil
-00018a30: 6564 6174 615b 2273 686f 7274 6e61 6d65  edata["shortname
-00018a40: 225d 2e73 7472 6970 2829 290d 0a0d 0a20  "].strip()).... 
-00018a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a60: 2020 2020 2020 2069 6620 7470 6520 696e         if tpe in
-00018a70: 205b 2247 6169 6e73 222c 224c 6f73 7365   ["Gains","Losse
-00018a80: 7322 2c22 4578 7065 6e73 6573 222c 2252  s","Expenses","R
-00018a90: 6576 656e 7565 7322 5d3a 0d0a 2020 2020  evenues"]:..    
-00018aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ab0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00018ac0: 5f69 6e63 6f6d 655b 2252 616e 6b69 6e67  _income["Ranking
-00018ad0: 225d 2e61 7070 656e 6428 3029 0d0a 2020  "].append(0)..  
-00018ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018af0: 2020 2020 2020 656c 6966 2074 7065 2069        elif tpe i
-00018b00: 6e20 5b22 4e6f 6e2d 4f70 6572 6174 696f  n ["Non-Operatio
-00018b10: 6e61 6c20 496e 636f 6d65 222c 2249 6e74  nal Income","Int
-00018b20: 6572 6573 7420 5061 796d 656e 7473 225d  erest Payments"]
-00018b30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00018b40: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00018b50: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
-00018b60: 5261 6e6b 696e 6722 5d2e 6170 7065 6e64  Ranking"].append
-00018b70: 2831 290d 0a20 2020 2020 2020 2020 2020  (1)..           
-00018b80: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00018b90: 6620 7470 6520 696e 205b 2254 6178 6573  f tpe in ["Taxes
-00018ba0: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
-00018bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018bc0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
-00018bd0: 5b22 5261 6e6b 696e 6722 5d2e 6170 7065  ["Ranking"].appe
-00018be0: 6e64 2832 290d 0a20 2020 2020 2020 2020  nd(2)..         
-00018bf0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00018c00: 6c69 6620 7470 6520 696e 205b 224e 6f6e  lif tpe in ["Non
-00018c10: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
-00018c20: 2c20 224e 6f6e 7461 7861 626c 6520 4c6f  , "Nontaxable Lo
-00018c30: 7373 6573 225d 3a0d 0a20 2020 2020 2020  sses"]:..       
+00018900: 2020 2020 2020 2069 6620 6167 656e 7431         if agent1
+00018910: 203d 3d20 6d79 5f61 6765 6e74 3a0d 0a20   == my_agent:.. 
+00018920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018930: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
+00018940: 3d20 222d 220d 0a20 2020 2020 2020 2020  = "-"..         
+00018950: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00018960: 6620 6167 656e 7432 203d 3d20 6d79 5f61  f agent2 == my_a
+00018970: 6765 6e74 3a0d 0a20 2020 2020 2020 2020  gent:..         
+00018980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018990: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
+000189a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000189b0: 2020 2020 2020 2020 2071 203d 2073 796d           q = sym
+000189c0: 7079 2e6c 6174 6578 2873 796d 7079 2e73  py.latex(sympy.s
+000189d0: 696d 706c 6966 7928 7369 676e 202b 2066  implify(sign + f
+000189e0: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
+000189f0: 7922 5d29 2c20 6d6f 6465 3d22 706c 6169  y"]), mode="plai
+00018a00: 6e22 290d 0a20 2020 2020 2020 2020 2020  n")..           
+00018a10: 2020 2020 2020 2020 2020 2020 2073 7562               sub
+00018a20: 6a65 6374 203d 2066 696c 6564 6174 615b  ject = filedata[
+00018a30: 2273 7562 6a65 6374 225d 2e72 6570 6c61  "subject"].repla
+00018a40: 6365 2822 5f22 2c20 2220 2229 2e63 6170  ce("_", " ").cap
+00018a50: 6974 616c 697a 6528 290d 0a20 2020 2020  italize()..     
+00018a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a70: 2020 2070 7269 6e74 2822 2020 2020 2020     print("      
+00018a80: 666f 756e 6422 2c71 2c73 7562 6a65 6374  found",q,subject
+00018a90: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00018aa0: 2020 2020 2020 2020 2020 2074 7065 203d             tpe =
+00018ab0: 206d 7964 6963 745b 6669 6c65 6461 7461   mydict[filedata
+00018ac0: 5b72 6566 5f69 6e63 6f6d 655d 5d0d 0a20  [ref_income]].. 
+00018ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ae0: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+00018af0: 696e 636f 6d65 5b22 5479 7065 225d 2e61  income["Type"].a
+00018b00: 7070 656e 6428 7470 6529 0d0a 2020 2020  ppend(tpe)..    
+00018b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b20: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
+00018b30: 6f6d 655b 2253 7562 6a65 6374 225d 2e61  ome["Subject"].a
+00018b40: 7070 656e 6428 7375 626a 6563 7429 0d0a  ppend(subject)..
+00018b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b60: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00018b70: 5f69 6e63 6f6d 655b 2251 7561 6e74 6974  _income["Quantit
+00018b80: 7922 5d2e 6170 7065 6e64 2873 7472 2871  y"].append(str(q
+00018b90: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+00018ba0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+00018bb0: 696e 6564 5f69 6e63 6f6d 655b 2253 686f  ined_income["Sho
+00018bc0: 7274 204e 616d 6522 5d2e 6170 7065 6e64  rt Name"].append
+00018bd0: 2866 696c 6564 6174 615b 2273 686f 7274  (filedata["short
+00018be0: 6e61 6d65 225d 2e73 7472 6970 2829 290d  name"].strip()).
+00018bf0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00018c00: 2020 2020 2020 2020 2020 2069 6620 7470             if tp
+00018c10: 6520 696e 205b 2247 6169 6e73 222c 224c  e in ["Gains","L
+00018c20: 6f73 7365 7322 2c22 4578 7065 6e73 6573  osses","Expenses
+00018c30: 222c 2252 6576 656e 7565 7322 5d3a 0d0a  ","Revenues"]:..
 00018c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c50: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
-00018c60: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
-00018c70: 6170 7065 6e64 2833 290d 0a20 2020 2020  append(3)..     
-00018c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c90: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00018ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018cb0: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
-00018cc0: 6e63 6f6d 655b 2252 616e 6b69 6e67 225d  ncome["Ranking"]
-00018cd0: 2e61 7070 656e 6428 3429 0d0a 0d0a 0d0a  .append(4)......
+00018c50: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+00018c60: 696e 6564 5f69 6e63 6f6d 655b 2252 616e  ined_income["Ran
+00018c70: 6b69 6e67 225d 2e61 7070 656e 6428 3029  king"].append(0)
+00018c80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018c90: 2020 2020 2020 2020 2020 656c 6966 2074            elif t
+00018ca0: 7065 2069 6e20 5b22 4e6f 6e2d 4f70 6572  pe in ["Non-Oper
+00018cb0: 6174 696f 6e61 6c20 496e 636f 6d65 222c  ational Income",
+00018cc0: 2249 6e74 6572 6573 7420 5061 796d 656e  "Interest Paymen
+00018cd0: 7473 225d 3a0d 0a20 2020 2020 2020 2020  ts"]:..         
 00018ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018cf0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00018d00: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-00018d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d20: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-00018d30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018d40: 2020 2020 2020 2020 2020 2020 2020 2243                "C
-00018d50: 616e 6e6f 7420 6861 6e64 6c65 2074 6865  annot handle the
-00018d60: 2073 796d 626f 6c69 6320 6578 7072 6573   symbolic expres
-00018d70: 7369 6f6e 2025 7322 2025 2073 6967 6e20  sion %s" % sign 
-00018d80: 2b20 6669 6c65 6461 7461 5b22 7175 616e  + filedata["quan
-00018d90: 7469 7479 225d 2c74 6974 6c65 3d22 4572  tity"],title="Er
-00018da0: 726f 7222 290d 0a0d 0a20 2020 2020 2020  ror")....       
-00018db0: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
-00018dc0: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-00018dd0: 7928 7469 746c 653d 2245 7272 6f72 222c  y(title="Error",
-00018de0: 206d 6573 7361 6765 3d22 416e 2065 7272   message="An err
-00018df0: 6f72 206f 6363 7572 7265 642e 2229 0d0a  or occurred.")..
-00018e00: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00018e10: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00018e20: 6c74 203d 2070 642e 4461 7461 4672 616d  lt = pd.DataFram
-00018e30: 6528 636f 6d62 696e 6564 5f69 6e63 6f6d  e(combined_incom
-00018e40: 6529 2e73 6574 5f69 6e64 6578 2822 5375  e).set_index("Su
-00018e50: 626a 6563 7422 290d 0a0d 0a0d 0a20 2020  bject")......   
-00018e60: 2020 2020 2020 2020 2023 2073 6f72 7420           # sort 
-00018e70: 6166 7465 7220 7261 6e6b 696e 670d 0a20  after ranking.. 
-00018e80: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00018e90: 7420 3d20 7265 7375 6c74 2e73 6f72 745f  t = result.sort_
-00018ea0: 7661 6c75 6573 2827 5261 6e6b 696e 6727  values('Ranking'
-00018eb0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00018ec0: 2023 2072 656d 6f76 6520 7261 6e6b 696e   # remove rankin
-00018ed0: 670d 0a20 2020 2020 2020 2020 2020 2072  g..            r
-00018ee0: 6573 756c 7420 3d20 7265 7375 6c74 2e64  esult = result.d
-00018ef0: 726f 7028 636f 6c75 6d6e 733d 2022 5261  rop(columns= "Ra
-00018f00: 6e6b 696e 6722 290d 0a0d 0a20 2020 2020  nking")....     
-00018f10: 2020 2020 2020 206d 6f64 656c 203d 2050         model = P
-00018f20: 616e 6461 734d 6f64 656c 2872 6573 756c  andasModel(resul
-00018f30: 7429 0d0a 0d0a 2020 2020 2020 2020 2020  t)....          
-00018f40: 2020 6966 206d 795f 6167 656e 7420 6e6f    if my_agent no
-00018f50: 7420 696e 2049 6e63 6f6d 6556 6965 7765  t in IncomeViewe
-00018f60: 722e 696e 7374 616e 6365 733a 0d0a 2020  r.instances:..  
-00018f70: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-00018f80: 7669 6577 203d 2049 6e63 6f6d 6556 6965  view = IncomeVie
-00018f90: 7765 7228 7365 6c66 2c6e 616d 653d 6d79  wer(self,name=my
-00018fa0: 5f61 6765 6e74 290d 0a20 2020 2020 2020  _agent)..       
-00018fb0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00018fc0: 2020 2020 2020 2020 2020 2020 6d79 7669              myvi
-00018fd0: 6577 203d 2049 6e63 6f6d 6556 6965 7765  ew = IncomeViewe
-00018fe0: 722e 696e 7374 616e 6365 735b 6d79 5f61  r.instances[my_a
-00018ff0: 6765 6e74 5d0d 0a20 2020 2020 2020 2020  gent]..         
-00019000: 2020 2023 206d 7669 6577 2e73 6574 4765     # mview.setGe
-00019010: 6f6d 6574 7279 2831 3030 2c35 3030 290d  ometry(100,500).
-00019020: 0a20 2020 2020 2020 2020 2020 206d 7976  .            myv
-00019030: 6965 772e 7365 745f 6d6f 6465 6c28 6d6f  iew.set_model(mo
-00019040: 6465 6c29 0d0a 2020 2020 2020 2020 2020  del)..          
-00019050: 2020 2320 6d76 6965 772e 7765 6256 6965    # mview.webVie
-00019060: 772e 7365 7448 746d 6c28 6466 5f68 746d  w.setHtml(df_htm
-00019070: 6c29 0d0a 0d0a 2020 2020 2020 2020 2020  l)....          
-00019080: 2020 6966 206e 6f74 2073 656c 662e 7465    if not self.te
-00019090: 7374 5f6d 6f64 653a 0d0a 2020 2020 2020  st_mode:..      
-000190a0: 2020 2020 2020 2020 2020 6d79 7669 6577            myview
-000190b0: 2e73 686f 7728 290d 0a0d 0a20 2020 2020  .show()....     
-000190c0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-000190d0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-000190e0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-000190f0: 6679 2874 6974 6c65 3d22 4572 726f 7222  fy(title="Error"
-00019100: 2c20 6d65 7373 6167 653d 2241 6e20 6572  , message="An er
-00019110: 726f 7220 6f63 6375 7272 6564 2e22 202b  ror occurred." +
-00019120: 2073 7472 2865 2929 0d0a 0d0a 0d0a 2020   str(e))......  
-00019130: 2020 6465 6620 6765 6e5f 6361 7368 666c    def gen_cashfl
-00019140: 6f77 5f73 696e 676c 6528 7365 6c66 293a  ow_single(self):
-00019150: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-00019160: 662e 6472 6177 6361 6e76 6173 2e68 6967  f.drawcanvas.hig
-00019170: 686c 6967 6874 6564 2069 7320 4e6f 6e65  hlighted is None
-00019180: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00019190: 656c 662e 6e6f 7469 6679 2874 6974 6c65  elf.notify(title
-000191a0: 3d22 4e6f 2061 6765 6e74 2073 656c 6563  ="No agent selec
-000191b0: 7465 6422 2c20 6d65 7373 6167 653d 224e  ted", message="N
-000191c0: 6f20 6167 656e 7420 7365 6c65 6374 6564  o agent selected
-000191d0: 2e20 506c 6561 7365 2073 656c 6563 7420  . Please select 
-000191e0: 6f6e 6520 6669 7273 742e 2229 0d0a 2020  one first.")..  
-000191f0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00019200: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-00019210: 662e 6472 6177 6361 6e76 6173 2e68 6967  f.drawcanvas.hig
-00019220: 686c 6967 6874 6564 2e69 7368 656c 7065  hlighted.ishelpe
-00019230: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00019240: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
-00019250: 653d 224e 6f20 6167 656e 7420 7365 6c65  e="No agent sele
-00019260: 6374 6564 222c 206d 6573 7361 6765 3d22  cted", message="
-00019270: 4e6f 2076 616c 6964 2062 6f78 2073 656c  No valid box sel
-00019280: 6563 7465 642e 2050 6c65 6173 6520 7365  ected. Please se
-00019290: 6c65 6374 2061 6e20 6167 656e 742e 2229  lect an agent.")
-000192a0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000192b0: 7475 726e 0d0a 2020 2020 2020 2020 6d79  turn..        my
-000192c0: 5f61 6765 6e74 203d 2073 656c 662e 6472  _agent = self.dr
-000192d0: 6177 6361 6e76 6173 2e68 6967 686c 6967  awcanvas.highlig
-000192e0: 6874 6564 2e6e 616d 650d 0a0d 0a20 2020  hted.name....   
-000192f0: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
-00019300: 636f 6d65 203d 2020 7b22 5375 626a 6563  come =  {"Subjec
-00019310: 7422 3a5b 5d2c 2253 686f 7274 204e 616d  t":[],"Short Nam
-00019320: 6522 3a20 5b5d 2c22 5175 616e 7469 7479  e": [],"Quantity
-00019330: 223a 5b5d 2c20 2254 7970 6522 3a5b 5d2c  ":[], "Type":[],
-00019340: 2022 5261 6e6b 696e 6722 3a5b 5d7d 2023   "Ranking":[]} #
-00019350: 2072 616e 6b69 6e67 2077 696c 6c20 6265   ranking will be
-00019360: 2072 656d 6f76 6564 206c 6174 6572 0d0a   removed later..
-00019370: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00019380: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00019390: 2020 6b20 3d20 300d 0a20 2020 2020 2020    k = 0..       
-000193a0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-000193b0: 2020 2066 6f72 2066 696c 6564 6174 6120     for filedata 
-000193c0: 696e 2073 656c 662e 656e 7472 795f 6461  in self.entry_da
-000193d0: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
-000193e0: 2020 2020 2061 6765 6e74 3120 3d20 6669       agent1 = fi
-000193f0: 6c65 6461 7461 5b22 6167 656e 7431 225d  ledata["agent1"]
-00019400: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
-00019410: 2020 2020 2020 2020 2020 6167 656e 7432            agent2
-00019420: 203d 2066 696c 6564 6174 615b 2261 6765   = filedata["age
-00019430: 6e74 3222 5d2e 7374 7269 7028 290d 0a0d  nt2"].strip()...
-00019440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019450: 2070 7269 6e74 2822 6167 656e 7431 222c   print("agent1",
-00019460: 6167 656e 7431 2c22 6167 656e 7432 222c  agent1,"agent2",
-00019470: 6167 656e 7432 290d 0a20 2020 2020 2020  agent2)..       
-00019480: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
-00019490: 7431 203d 3d20 6d79 5f61 6765 6e74 3a0d  t1 == my_agent:.
-000194a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000194b0: 2020 2020 2072 6566 5f61 6765 6e74 203d       ref_agent =
-000194c0: 2022 6167 656e 7431 220d 0a20 2020 2020   "agent1"..     
-000194d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000194e0: 6566 5f69 6e63 6f6d 6520 3d20 2263 6173  ef_income = "cas
-000194f0: 6866 6c6f 7731 220d 0a0d 0a20 2020 2020  hflow1"....     
-00019500: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00019510: 6167 656e 7432 203d 3d20 6d79 5f61 6765  agent2 == my_age
-00019520: 6e74 3a0d 0a20 2020 2020 2020 2020 2020  nt:..           
-00019530: 2020 2020 2020 2020 2072 6566 5f61 6765           ref_age
-00019540: 6e74 203d 2022 6167 656e 7432 220d 0a20  nt = "agent2".. 
-00019550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019560: 2020 2072 6566 5f69 6e63 6f6d 6520 3d20     ref_income = 
-00019570: 2263 6173 6866 6c6f 7732 220d 0a20 2020  "cashflow2"..   
-00019580: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00019590: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000195a0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-000195b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000195c0: 2361 7373 6574 7331 203d 2066 696c 6564  #assets1 = filed
-000195d0: 6174 615b 2261 3122 5d20 2b20 225c 6e22  ata["a1"] + "\n"
-000195e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000195f0: 2020 236c 6961 6273 3120 3d20 6669 6c65    #liabs1 = file
-00019600: 6461 7461 5b22 6c31 225d 202b 2022 5c6e  data["l1"] + "\n
-00019610: 2220 2b20 6669 6c65 6461 7461 5b22 6531  " + filedata["e1
-00019620: 225d 202b 2022 5c6e 220d 0a0d 0a20 2020  "] + "\n"....   
-00019630: 2020 2020 2020 2020 2020 2020 2023 6173               #as
-00019640: 7365 7473 3220 3d20 6669 6c65 6461 7461  sets2 = filedata
-00019650: 5b22 6132 225d 202b 2022 5c6e 220d 0a20  ["a2"] + "\n".. 
-00019660: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00019670: 6c69 6162 7332 203d 2066 696c 6564 6174  liabs2 = filedat
-00019680: 615b 226c 3222 5d20 2b20 225c 6e22 202b  a["l2"] + "\n" +
-00019690: 2066 696c 6564 6174 615b 2265 3222 5d20   filedata["e2"] 
-000196a0: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
-000196b0: 2020 2020 2020 2020 2020 6966 2028 6167            if (ag
-000196c0: 656e 7431 203d 3d20 6d79 5f61 6765 6e74  ent1 == my_agent
-000196d0: 206f 7220 6167 656e 7432 203d 3d20 6d79   or agent2 == my
-000196e0: 5f61 6765 6e74 2920 616e 6420 7374 7228  _agent) and str(
-000196f0: 6669 6c65 6461 7461 5b72 6566 5f69 6e63  filedata[ref_inc
-00019700: 6f6d 655d 2920 213d 2027 4e6f 6e65 273a  ome]) != 'None':
-00019710: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019720: 2020 2020 2020 6d79 6469 6374 203d 207b        mydict = {
-00019730: 2247 6169 6e22 3a20 2247 6169 6e73 222c  "Gain": "Gains",
-00019740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019760: 224c 6f73 7322 3a20 224c 6f73 7365 7322  "Loss": "Losses"
-00019770: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00019780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019790: 2022 4578 7065 6e73 6522 3a20 2245 7870   "Expense": "Exp
-000197a0: 656e 7365 7322 2c0d 0a20 2020 2020 2020  enses",..       
-000197b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000197c0: 2020 2020 2020 2022 5265 7665 6e75 6522         "Revenue"
-000197d0: 3a20 2252 6576 656e 7565 7322 2c0d 0a20  : "Revenues",.. 
-000197e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000197f0: 2020 2020 2020 2020 2020 2020 2022 5461               "Ta
-00019800: 7822 3a20 2254 6178 6573 222c 0d0a 2020  x": "Taxes",..  
-00019810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019820: 2020 2020 2020 2020 2020 2020 224e 6f6e              "Non
-00019830: 7461 782e 2050 726f 6669 7422 3a20 224e  tax. Profit": "N
-00019840: 6f6e 7461 7861 626c 6520 5072 6f66 6974  ontaxable Profit
-00019850: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
-00019860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019870: 2020 2022 4e6f 6e74 6178 2e20 4c6f 7373     "Nontax. Loss
-00019880: 223a 2022 4e6f 6e74 6178 6162 6c65 204c  ": "Nontaxable L
-00019890: 6f73 7365 7322 2c0d 0a20 2020 2020 2020  osses",..       
-000198a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000198b0: 2020 2020 2020 2022 4e6f 6e2d 4f70 2e20         "Non-Op. 
-000198c0: 496e 636f 6d65 223a 2022 4e6f 6e2d 4f70  Income": "Non-Op
-000198d0: 6572 6174 696f 6e61 6c20 496e 636f 6d65  erational Income
-000198e0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00018cf0: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
+00018d00: 6d65 5b22 5261 6e6b 696e 6722 5d2e 6170  me["Ranking"].ap
+00018d10: 7065 6e64 2831 290d 0a20 2020 2020 2020  pend(1)..       
+00018d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d30: 2065 6c69 6620 7470 6520 696e 205b 2254   elif tpe in ["T
+00018d40: 6178 6573 225d 3a0d 0a20 2020 2020 2020  axes"]:..       
+00018d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d60: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00018d70: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
+00018d80: 6170 7065 6e64 2832 290d 0a20 2020 2020  append(2)..     
+00018d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018da0: 2020 2065 6c69 6620 7470 6520 696e 205b     elif tpe in [
+00018db0: 224e 6f6e 7461 7861 626c 6520 5072 6f66  "Nontaxable Prof
+00018dc0: 6974 7322 2c20 224e 6f6e 7461 7861 626c  its", "Nontaxabl
+00018dd0: 6520 4c6f 7373 6573 225d 3a0d 0a20 2020  e Losses"]:..   
+00018de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018df0: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+00018e00: 645f 696e 636f 6d65 5b22 5261 6e6b 696e  d_income["Rankin
+00018e10: 6722 5d2e 6170 7065 6e64 2833 290d 0a20  g"].append(3).. 
+00018e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018e30: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00018e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018e50: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
+00018e60: 6564 5f69 6e63 6f6d 655b 2252 616e 6b69  ed_income["Ranki
+00018e70: 6e67 225d 2e61 7070 656e 6428 3429 0d0a  ng"].append(4)..
+00018e80: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00018e90: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00018ea0: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+00018eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ec0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00018ed0: 6966 7928 0d0a 2020 2020 2020 2020 2020  ify(..          
+00018ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ef0: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
+00018f00: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
+00018f10: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
+00018f20: 6967 6e20 2b20 6669 6c65 6461 7461 5b22  ign + filedata["
+00018f30: 7175 616e 7469 7479 225d 2c74 6974 6c65  quantity"],title
+00018f40: 3d22 4572 726f 7222 290d 0a0d 0a20 2020  ="Error")....   
+00018f50: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
+00018f60: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+00018f70: 6f74 6966 7928 7469 746c 653d 2245 7272  otify(title="Err
+00018f80: 6f72 222c 206d 6573 7361 6765 3d22 416e  or", message="An
+00018f90: 2065 7272 6f72 206f 6363 7572 7265 642e   error occurred.
+00018fa0: 2229 0d0a 0d0a 2020 2020 2020 2020 7472  ")....        tr
+00018fb0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00018fc0: 7265 7375 6c74 203d 2070 642e 4461 7461  result = pd.Data
+00018fd0: 4672 616d 6528 636f 6d62 696e 6564 5f69  Frame(combined_i
+00018fe0: 6e63 6f6d 6529 2e73 6574 5f69 6e64 6578  ncome).set_index
+00018ff0: 2822 5375 626a 6563 7422 290d 0a0d 0a0d  ("Subject").....
+00019000: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
+00019010: 6f72 7420 6166 7465 7220 7261 6e6b 696e  ort after rankin
+00019020: 670d 0a20 2020 2020 2020 2020 2020 2072  g..            r
+00019030: 6573 756c 7420 3d20 7265 7375 6c74 2e73  esult = result.s
+00019040: 6f72 745f 7661 6c75 6573 2827 5261 6e6b  ort_values('Rank
+00019050: 696e 6727 290d 0a0d 0a20 2020 2020 2020  ing')....       
+00019060: 2020 2020 2023 2072 656d 6f76 6520 7261       # remove ra
+00019070: 6e6b 696e 670d 0a20 2020 2020 2020 2020  nking..         
+00019080: 2020 2072 6573 756c 7420 3d20 7265 7375     result = resu
+00019090: 6c74 2e64 726f 7028 636f 6c75 6d6e 733d  lt.drop(columns=
+000190a0: 2022 5261 6e6b 696e 6722 290d 0a0d 0a20   "Ranking").... 
+000190b0: 2020 2020 2020 2020 2020 206d 6f64 656c             model
+000190c0: 203d 2050 616e 6461 734d 6f64 656c 2872   = PandasModel(r
+000190d0: 6573 756c 7429 0d0a 0d0a 2020 2020 2020  esult)....      
+000190e0: 2020 2020 2020 6966 206d 795f 6167 656e        if my_agen
+000190f0: 7420 6e6f 7420 696e 2049 6e63 6f6d 6556  t not in IncomeV
+00019100: 6965 7765 722e 696e 7374 616e 6365 733a  iewer.instances:
+00019110: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019120: 2020 6d79 7669 6577 203d 2049 6e63 6f6d    myview = Incom
+00019130: 6556 6965 7765 7228 7365 6c66 2c6e 616d  eViewer(self,nam
+00019140: 653d 6d79 5f61 6765 6e74 290d 0a20 2020  e=my_agent)..   
+00019150: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00019160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019170: 6d79 7669 6577 203d 2049 6e63 6f6d 6556  myview = IncomeV
+00019180: 6965 7765 722e 696e 7374 616e 6365 735b  iewer.instances[
+00019190: 6d79 5f61 6765 6e74 5d0d 0a20 2020 2020  my_agent]..     
+000191a0: 2020 2020 2020 2023 206d 7669 6577 2e73         # mview.s
+000191b0: 6574 4765 6f6d 6574 7279 2831 3030 2c35  etGeometry(100,5
+000191c0: 3030 290d 0a20 2020 2020 2020 2020 2020  00)..           
+000191d0: 206d 7976 6965 772e 7365 745f 6d6f 6465   myview.set_mode
+000191e0: 6c28 6d6f 6465 6c29 0d0a 2020 2020 2020  l(model)..      
+000191f0: 2020 2020 2020 2320 6d76 6965 772e 7765        # mview.we
+00019200: 6256 6965 772e 7365 7448 746d 6c28 6466  bView.setHtml(df
+00019210: 5f68 746d 6c29 0d0a 0d0a 2020 2020 2020  _html)....      
+00019220: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00019230: 662e 7465 7374 5f6d 6f64 653a 0d0a 2020  f.test_mode:..  
+00019240: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+00019250: 7669 6577 2e73 686f 7728 290d 0a0d 0a20  view.show().... 
+00019260: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00019270: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+00019280: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00019290: 6e6f 7469 6679 2874 6974 6c65 3d22 4572  notify(title="Er
+000192a0: 726f 7222 2c20 6d65 7373 6167 653d 2241  ror", message="A
+000192b0: 6e20 6572 726f 7220 6f63 6375 7272 6564  n error occurred
+000192c0: 2e22 202b 2073 7472 2865 2929 0d0a 0d0a  ." + str(e))....
+000192d0: 0d0a 2020 2020 6465 6620 6765 6e5f 6361  ..    def gen_ca
+000192e0: 7368 666c 6f77 5f73 696e 676c 6528 7365  shflow_single(se
+000192f0: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
+00019300: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00019310: 2e68 6967 686c 6967 6874 6564 2069 7320  .highlighted is 
+00019320: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00019330: 2020 2073 656c 662e 6e6f 7469 6679 2874     self.notify(t
+00019340: 6974 6c65 3d22 4e6f 2061 6765 6e74 2073  itle="No agent s
+00019350: 656c 6563 7465 6422 2c20 6d65 7373 6167  elected", messag
+00019360: 653d 224e 6f20 6167 656e 7420 7365 6c65  e="No agent sele
+00019370: 6374 6564 2e20 506c 6561 7365 2073 656c  cted. Please sel
+00019380: 6563 7420 6f6e 6520 6669 7273 742e 2229  ect one first.")
+00019390: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000193a0: 7475 726e 0d0a 2020 2020 2020 2020 6966  turn..        if
+000193b0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+000193c0: 2e68 6967 686c 6967 6874 6564 2e69 7368  .highlighted.ish
+000193d0: 656c 7065 723a 0d0a 2020 2020 2020 2020  elper:..        
+000193e0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+000193f0: 7469 746c 653d 224e 6f20 6167 656e 7420  title="No agent 
+00019400: 7365 6c65 6374 6564 222c 206d 6573 7361  selected", messa
+00019410: 6765 3d22 4e6f 2076 616c 6964 2062 6f78  ge="No valid box
+00019420: 2073 656c 6563 7465 642e 2050 6c65 6173   selected. Pleas
+00019430: 6520 7365 6c65 6374 2061 6e20 6167 656e  e select an agen
+00019440: 742e 2229 0d0a 2020 2020 2020 2020 2020  t.")..          
+00019450: 2020 7265 7475 726e 0d0a 2020 2020 2020    return..      
+00019460: 2020 6d79 5f61 6765 6e74 203d 2073 656c    my_agent = sel
+00019470: 662e 6472 6177 6361 6e76 6173 2e68 6967  f.drawcanvas.hig
+00019480: 686c 6967 6874 6564 2e6e 616d 650d 0a0d  hlighted.name...
+00019490: 0a20 2020 2020 2020 2063 6f6d 6269 6e65  .        combine
+000194a0: 645f 696e 636f 6d65 203d 2020 7b22 5375  d_income =  {"Su
+000194b0: 626a 6563 7422 3a5b 5d2c 2253 686f 7274  bject":[],"Short
+000194c0: 204e 616d 6522 3a20 5b5d 2c22 5175 616e   Name": [],"Quan
+000194d0: 7469 7479 223a 5b5d 2c20 2254 7970 6522  tity":[], "Type"
+000194e0: 3a5b 5d2c 2022 5261 6e6b 696e 6722 3a5b  :[], "Ranking":[
+000194f0: 5d7d 2023 2072 616e 6b69 6e67 2077 696c  ]} # ranking wil
+00019500: 6c20 6265 2072 656d 6f76 6564 206c 6174  l be removed lat
+00019510: 6572 0d0a 2020 2020 2020 2020 2222 220d  er..        """.
+00019520: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00019530: 2020 2020 2020 6b20 3d20 300d 0a20 2020        k = 0..   
+00019540: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00019550: 2020 2020 2020 2066 6f72 2066 696c 6564         for filed
+00019560: 6174 6120 696e 2073 656c 662e 656e 7472  ata in self.entr
+00019570: 795f 6461 7461 3a0d 0a20 2020 2020 2020  y_data:..       
+00019580: 2020 2020 2020 2020 2061 6765 6e74 3120           agent1 
+00019590: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
+000195a0: 7431 225d 2e73 7472 6970 2829 0d0a 2020  t1"].strip()..  
+000195b0: 2020 2020 2020 2020 2020 2020 2020 6167                ag
+000195c0: 656e 7432 203d 2066 696c 6564 6174 615b  ent2 = filedata[
+000195d0: 2261 6765 6e74 3222 5d2e 7374 7269 7028  "agent2"].strip(
+000195e0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+000195f0: 2020 2020 2070 7269 6e74 2822 6167 656e       print("agen
+00019600: 7431 222c 6167 656e 7431 2c22 6167 656e  t1",agent1,"agen
+00019610: 7432 222c 6167 656e 7432 290d 0a20 2020  t2",agent2)..   
+00019620: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00019630: 6167 656e 7431 203d 3d20 6d79 5f61 6765  agent1 == my_age
+00019640: 6e74 3a0d 0a20 2020 2020 2020 2020 2020  nt:..           
+00019650: 2020 2020 2020 2020 2072 6566 5f61 6765           ref_age
+00019660: 6e74 203d 2022 6167 656e 7431 220d 0a20  nt = "agent1".. 
+00019670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019680: 2020 2072 6566 5f69 6e63 6f6d 6520 3d20     ref_income = 
+00019690: 2263 6173 6866 6c6f 7731 220d 0a0d 0a20  "cashflow1".... 
+000196a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000196b0: 6c69 6620 6167 656e 7432 203d 3d20 6d79  lif agent2 == my
+000196c0: 5f61 6765 6e74 3a0d 0a20 2020 2020 2020  _agent:..       
+000196d0: 2020 2020 2020 2020 2020 2020 2072 6566               ref
+000196e0: 5f61 6765 6e74 203d 2022 6167 656e 7432  _agent = "agent2
+000196f0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00019700: 2020 2020 2020 2072 6566 5f69 6e63 6f6d         ref_incom
+00019710: 6520 3d20 2263 6173 6866 6c6f 7732 220d  e = "cashflow2".
+00019720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019730: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00019740: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00019750: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00019760: 2020 2020 2361 7373 6574 7331 203d 2066      #assets1 = f
+00019770: 696c 6564 6174 615b 2261 3122 5d20 2b20  iledata["a1"] + 
+00019780: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+00019790: 2020 2020 2020 236c 6961 6273 3120 3d20        #liabs1 = 
+000197a0: 6669 6c65 6461 7461 5b22 6c31 225d 202b  filedata["l1"] +
+000197b0: 2022 5c6e 2220 2b20 6669 6c65 6461 7461   "\n" + filedata
+000197c0: 5b22 6531 225d 202b 2022 5c6e 220d 0a0d  ["e1"] + "\n"...
+000197d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000197e0: 2023 6173 7365 7473 3220 3d20 6669 6c65   #assets2 = file
+000197f0: 6461 7461 5b22 6132 225d 202b 2022 5c6e  data["a2"] + "\n
+00019800: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00019810: 2020 2023 6c69 6162 7332 203d 2066 696c     #liabs2 = fil
+00019820: 6564 6174 615b 226c 3222 5d20 2b20 225c  edata["l2"] + "\
+00019830: 6e22 202b 2066 696c 6564 6174 615b 2265  n" + filedata["e
+00019840: 3222 5d20 2b20 225c 6e22 0d0a 0d0a 2020  2"] + "\n"....  
+00019850: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00019860: 2028 6167 656e 7431 203d 3d20 6d79 5f61   (agent1 == my_a
+00019870: 6765 6e74 206f 7220 6167 656e 7432 203d  gent or agent2 =
+00019880: 3d20 6d79 5f61 6765 6e74 2920 616e 6420  = my_agent) and 
+00019890: 7374 7228 6669 6c65 6461 7461 5b72 6566  str(filedata[ref
+000198a0: 5f69 6e63 6f6d 655d 2920 213d 2027 4e6f  _income]) != 'No
+000198b0: 6e65 273a 0d0a 2020 2020 2020 2020 2020  ne':..          
+000198c0: 2020 2020 2020 2020 2020 6d79 6469 6374            mydict
+000198d0: 203d 207b 2247 6169 6e22 3a20 2247 6169   = {"Gain": "Gai
+000198e0: 6e73 222c 0d0a 2020 2020 2020 2020 2020  ns",..          
 000198f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019900: 2020 2249 6e74 6572 6573 7422 3a20 2249    "Interest": "I
-00019910: 6e74 6572 6573 7420 5061 796d 656e 7473  nterest Payments
-00019920: 227d 0d0a 0d0a 2020 2020 2020 2020 2020  "}....          
-00019930: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-00019940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019950: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
-00019960: 3120 3d3d 206d 795f 6167 656e 743a 0d0a  1 == my_agent:..
-00019970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019980: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-00019990: 203d 2022 2d22 0d0a 2020 2020 2020 2020   = "-"..        
-000199a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199b0: 6966 2061 6765 6e74 3220 3d3d 206d 795f  if agent2 == my_
-000199c0: 6167 656e 743a 0d0a 2020 2020 2020 2020  agent:..        
-000199d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199e0: 2020 2020 7369 676e 203d 2022 2b22 0d0a      sign = "+"..
-000199f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019a00: 2020 2020 2020 2020 2020 7120 3d20 7379            q = sy
-00019a10: 6d70 792e 6c61 7465 7828 7379 6d70 792e  mpy.latex(sympy.
-00019a20: 7369 6d70 6c69 6679 2873 6967 6e20 2b20  simplify(sign + 
-00019a30: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
-00019a40: 7479 225d 292c 206d 6f64 653d 2270 6c61  ty"]), mode="pla
-00019a50: 696e 2229 0d0a 2020 2020 2020 2020 2020  in")..          
-00019a60: 2020 2020 2020 2020 2020 2020 2020 7375                su
-00019a70: 626a 6563 7420 3d20 6669 6c65 6461 7461  bject = filedata
-00019a80: 5b22 7375 626a 6563 7422 5d2e 7265 706c  ["subject"].repl
-00019a90: 6163 6528 225f 222c 2022 2022 292e 6361  ace("_", " ").ca
-00019aa0: 7069 7461 6c69 7a65 2829 0d0a 2020 2020  pitalize()..    
-00019ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ac0: 2020 2020 7072 696e 7428 2220 2020 2020      print("     
-00019ad0: 2066 6f75 6e64 222c 712c 7375 626a 6563   found",q,subjec
-00019ae0: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-00019af0: 2020 2020 2020 2020 2020 2020 7470 6520              tpe 
-00019b00: 3d20 6669 6c65 6461 7461 5b72 6566 5f69  = filedata[ref_i
-00019b10: 6e63 6f6d 655d 0d0a 2020 2020 2020 2020  ncome]..        
+00019900: 2020 2020 224c 6f73 7322 3a20 224c 6f73      "Loss": "Los
+00019910: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
+00019920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019930: 2020 2020 2022 4578 7065 6e73 6522 3a20       "Expense": 
+00019940: 2245 7870 656e 7365 7322 2c0d 0a20 2020  "Expenses",..   
+00019950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019960: 2020 2020 2020 2020 2020 2022 5265 7665             "Reve
+00019970: 6e75 6522 3a20 2252 6576 656e 7565 7322  nue": "Revenues"
+00019980: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00019990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000199a0: 2022 5461 7822 3a20 2254 6178 6573 222c   "Tax": "Taxes",
+000199b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000199c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000199d0: 224e 6f6e 7461 782e 2050 726f 6669 7422  "Nontax. Profit"
+000199e0: 3a20 224e 6f6e 7461 7861 626c 6520 5072  : "Nontaxable Pr
+000199f0: 6f66 6974 7322 2c0d 0a20 2020 2020 2020  ofits",..       
+00019a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019a10: 2020 2020 2020 2022 4e6f 6e74 6178 2e20         "Nontax. 
+00019a20: 4c6f 7373 223a 2022 4e6f 6e74 6178 6162  Loss": "Nontaxab
+00019a30: 6c65 204c 6f73 7365 7322 2c0d 0a20 2020  le Losses",..   
+00019a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019a50: 2020 2020 2020 2020 2020 2022 4e6f 6e2d             "Non-
+00019a60: 4f70 2e20 496e 636f 6d65 223a 2022 4e6f  Op. Income": "No
+00019a70: 6e2d 4f70 6572 6174 696f 6e61 6c20 496e  n-Operational In
+00019a80: 636f 6d65 222c 0d0a 2020 2020 2020 2020  come",..        
+00019a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019aa0: 2020 2020 2020 2249 6e74 6572 6573 7422        "Interest"
+00019ab0: 3a20 2249 6e74 6572 6573 7420 5061 796d  : "Interest Paym
+00019ac0: 656e 7473 227d 0d0a 0d0a 2020 2020 2020  ents"}....      
+00019ad0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00019ae0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00019af0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00019b00: 6765 6e74 3120 3d3d 206d 795f 6167 656e  gent1 == my_agen
+00019b10: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
 00019b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b30: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
-00019b40: 2254 7970 6522 5d2e 6170 7065 6e64 2874  "Type"].append(t
-00019b50: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
-00019b60: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00019b70: 6269 6e65 645f 696e 636f 6d65 5b22 5375  bined_income["Su
-00019b80: 626a 6563 7422 5d2e 6170 7065 6e64 2873  bject"].append(s
-00019b90: 7562 6a65 6374 290d 0a20 2020 2020 2020  ubject)..       
-00019ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019bb0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
-00019bc0: 5b22 5175 616e 7469 7479 225d 2e61 7070  ["Quantity"].app
-00019bd0: 656e 6428 7374 7228 7129 290d 0a20 2020  end(str(q))..   
-00019be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019bf0: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
-00019c00: 636f 6d65 5b22 5368 6f72 7420 4e61 6d65  come["Short Name
-00019c10: 225d 2e61 7070 656e 6428 6669 6c65 6461  "].append(fileda
-00019c20: 7461 5b22 7368 6f72 746e 616d 6522 5d2e  ta["shortname"].
-00019c30: 7374 7269 7028 2929 0d0a 2020 2020 2020  strip())..      
-00019c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c50: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
-00019c60: 655b 2252 616e 6b69 6e67 225d 2e61 7070  e["Ranking"].app
-00019c70: 656e 6428 3029 0d0a 2020 2020 2020 2020  end(0)..        
-00019c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c90: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
-00019ca0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00019cb0: 7470 6520 696e 205b 2247 6169 6e73 222c  tpe in ["Gains",
-00019cc0: 224c 6f73 7365 7322 2c22 4578 7065 6e73  "Losses","Expens
-00019cd0: 6573 222c 2252 6576 656e 7565 7322 5d3a  es","Revenues"]:
-00019ce0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019cf0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00019d00: 6d62 696e 6564 5f69 6e63 6f6d 655b 2252  mbined_income["R
-00019d10: 616e 6b69 6e67 225d 2e61 7070 656e 6428  anking"].append(
-00019d20: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-00019d30: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00019d40: 2074 7065 2069 6e20 5b22 4e6f 6e2d 4f70   tpe in ["Non-Op
-00019d50: 6572 6174 696f 6e61 6c20 496e 636f 6d65  erational Income
-00019d60: 222c 2249 6e74 6572 6573 7420 5061 796d  ","Interest Paym
-00019d70: 656e 7473 225d 3a0d 0a20 2020 2020 2020  ents"]:..       
-00019d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019d90: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
-00019da0: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
-00019db0: 6170 7065 6e64 2831 290d 0a20 2020 2020  append(1)..     
-00019dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019dd0: 2020 2065 6c69 6620 7470 6520 696e 205b     elif tpe in [
-00019de0: 2254 6178 6573 225d 3a0d 0a20 2020 2020  "Taxes"]:..     
-00019df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e00: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-00019e10: 696e 636f 6d65 5b22 5261 6e6b 696e 6722  income["Ranking"
-00019e20: 5d2e 6170 7065 6e64 2832 290d 0a20 2020  ].append(2)..   
-00019e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e40: 2020 2020 2065 6c69 6620 7470 6520 696e       elif tpe in
-00019e50: 205b 224e 6f6e 7461 7861 626c 6520 5072   ["Nontaxable Pr
-00019e60: 6f66 6974 7322 2c20 224e 6f6e 7461 7861  ofits", "Nontaxa
-00019e70: 626c 6520 4c6f 7373 6573 225d 3a0d 0a20  ble Losses"]:.. 
-00019e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e90: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-00019ea0: 6e65 645f 696e 636f 6d65 5b22 5261 6e6b  ned_income["Rank
-00019eb0: 696e 6722 5d2e 6170 7065 6e64 2833 290d  ing"].append(3).
-00019ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019ed0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00019ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ef0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-00019f00: 696e 6564 5f69 6e63 6f6d 655b 2252 616e  ined_income["Ran
-00019f10: 6b69 6e67 225d 2e61 7070 656e 6428 3429  king"].append(4)
-00019f20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019f30: 2020 2020 2020 2020 2020 2222 220d 0a0d            """...
-00019f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019f50: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00019f60: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00019f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f80: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-00019f90: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00019fa0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019fb0: 4361 6e6e 6f74 2068 616e 646c 6520 7468  Cannot handle th
-00019fc0: 6520 7379 6d62 6f6c 6963 2065 7870 7265  e symbolic expre
-00019fd0: 7373 696f 6e20 2573 2220 2520 7369 676e  ssion %s" % sign
-00019fe0: 202b 2066 696c 6564 6174 615b 2271 7561   + filedata["qua
-00019ff0: 6e74 6974 7922 5d20 2b20 7374 7228 6529  ntity"] + str(e)
-0001a000: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
-0001a010: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-0001a020: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-0001a030: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
-0001a040: 653d 2245 7272 6f72 222c 206d 6573 7361  e="Error", messa
-0001a050: 6765 3d22 416e 2065 7272 6f72 206f 6363  ge="An error occ
-0001a060: 7572 7265 642e 2229 0d0a 0d0a 2020 2020  urred.")....    
-0001a070: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0001a080: 2020 2020 2020 7265 7375 6c74 203d 2070        result = p
-0001a090: 642e 4461 7461 4672 616d 6528 636f 6d62  d.DataFrame(comb
-0001a0a0: 696e 6564 5f69 6e63 6f6d 6529 2e73 6574  ined_income).set
-0001a0b0: 5f69 6e64 6578 2822 5375 626a 6563 7422  _index("Subject"
-0001a0c0: 290d 0a0d 0a0d 0a20 2020 2020 2020 2020  )......         
-0001a0d0: 2020 2023 2073 6f72 7420 6166 7465 7220     # sort after 
-0001a0e0: 7261 6e6b 696e 670d 0a20 2020 2020 2020  ranking..       
-0001a0f0: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
-0001a100: 7375 6c74 2e73 6f72 745f 7661 6c75 6573  sult.sort_values
-0001a110: 2827 5261 6e6b 696e 6727 290d 0a0d 0a20  ('Ranking').... 
-0001a120: 2020 2020 2020 2020 2020 2023 2072 656d             # rem
-0001a130: 6f76 6520 7261 6e6b 696e 670d 0a20 2020  ove ranking..   
-0001a140: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-0001a150: 3d20 7265 7375 6c74 2e64 726f 7028 636f  = result.drop(co
-0001a160: 6c75 6d6e 733d 2022 5261 6e6b 696e 6722  lumns= "Ranking"
-0001a170: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0001a180: 206d 6f64 656c 203d 2050 616e 6461 734d   model = PandasM
-0001a190: 6f64 656c 2872 6573 756c 7429 0d0a 0d0a  odel(result)....
-0001a1a0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-0001a1b0: 795f 6167 656e 7420 6e6f 7420 696e 2043  y_agent not in C
-0001a1c0: 6173 6846 6c6f 7756 6965 7765 722e 696e  ashFlowViewer.in
-0001a1d0: 7374 616e 6365 733a 0d0a 2020 2020 2020  stances:..      
-0001a1e0: 2020 2020 2020 2020 2020 6d79 7669 6577            myview
-0001a1f0: 203d 2043 6173 6846 6c6f 7756 6965 7765   = CashFlowViewe
-0001a200: 7228 7365 6c66 2c6e 616d 653d 6d79 5f61  r(self,name=my_a
-0001a210: 6765 6e74 290d 0a20 2020 2020 2020 2020  gent)..         
-0001a220: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0001a230: 2020 2020 2020 2020 2020 6d79 7669 6577            myview
-0001a240: 203d 2043 6173 6846 6c6f 7756 6965 7765   = CashFlowViewe
-0001a250: 722e 696e 7374 616e 6365 735b 6d79 5f61  r.instances[my_a
-0001a260: 6765 6e74 5d0d 0a20 2020 2020 2020 2020  gent]..         
-0001a270: 2020 2023 206d 7669 6577 2e73 6574 4765     # mview.setGe
-0001a280: 6f6d 6574 7279 2831 3030 2c35 3030 290d  ometry(100,500).
-0001a290: 0a20 2020 2020 2020 2020 2020 206d 7976  .            myv
-0001a2a0: 6965 772e 7365 745f 6d6f 6465 6c28 6d6f  iew.set_model(mo
-0001a2b0: 6465 6c29 0d0a 2020 2020 2020 2020 2020  del)..          
-0001a2c0: 2020 2320 6d76 6965 772e 7765 6256 6965    # mview.webVie
-0001a2d0: 772e 7365 7448 746d 6c28 6466 5f68 746d  w.setHtml(df_htm
-0001a2e0: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
-0001a2f0: 6966 206e 6f74 2073 656c 662e 7465 7374  if not self.test
-0001a300: 5f6d 6f64 653a 0d0a 2020 2020 2020 2020  _mode:..        
-0001a310: 2020 2020 2020 2020 6d79 7669 6577 2e73          myview.s
-0001a320: 686f 7728 290d 0a0d 0a20 2020 2020 2020  how()....       
-0001a330: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0001a340: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-0001a350: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-0001a360: 2874 6974 6c65 3d22 4572 726f 7222 2c20  (title="Error", 
-0001a370: 6d65 7373 6167 653d 2241 6e20 6572 726f  message="An erro
-0001a380: 7220 6f63 6375 7272 6564 2e22 202b 2073  r occurred." + s
-0001a390: 7472 2865 2929 0d0a 0d0a 0d0a 2020 2020  tr(e))......    
-0001a3a0: 6465 6620 6765 6e5f 7465 785f 6963 7328  def gen_tex_ics(
-0001a3b0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0001a3c0: 636f 6d62 696e 6564 5f73 6865 6574 7320  combined_sheets 
-0001a3d0: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
-0001a3e0: 2222 220d 0a20 2020 2020 2020 207b 0d0a  """..        {..
-0001a3f0: 2020 2020 2020 2020 6167 656e 745f 6e61          agent_na
-0001a400: 6d65 3a20 7b0d 0a20 2020 2020 2020 2020  me: {..         
-0001a410: 2020 2020 2020 2020 2020 2022 4173 7365             "Asse
-0001a420: 7473 223a 207b 0d0a 2020 2020 2020 2020  ts": {..        
-0001a430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a440: 2020 2020 2020 2020 6173 7365 745f 6e61          asset_na
-0001a450: 6d65 203a 205b 656e 7472 6965 735d 2c0d  me : [entries],.
-0001a460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a480: 202e 2e2e 7d2c 0d0a 0d0a 2020 2020 2020   ...},....      
-0001a490: 2020 2020 2020 2020 2020 2020 2020 224c                "L
-0001a4a0: 6961 6269 6c69 7469 6573 2061 6e64 2045  iabilities and E
-0001a4b0: 7175 6974 7922 3a20 7b0d 0a20 2020 2020  quity": {..     
-0001a4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a4d0: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-0001a4e0: 3a20 5b65 6e74 7269 6573 5d2c 0d0a 2020  : [entries],..  
-0001a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a500: 2020 2020 2020 2020 2020 2020 2020 2e2e                ..
-0001a510: 2e7d 2c0d 0a0d 0a20 2020 2020 2020 2020  .},....         
-0001a520: 2020 2020 2020 2020 2020 207d 0d0a 2020             }..  
-0001a530: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-0001a540: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-0001a550: 636f 6d62 696e 6564 5f69 6e63 6f6d 6520  combined_income 
-0001a560: 3d20 6465 6661 756c 7464 6963 7428 6c61  = defaultdict(la
-0001a570: 6d62 6461 3a20 7b22 4761 696e 7322 3a20  mbda: {"Gains": 
-0001a580: 5b5d 2c20 224c 6f73 7365 7322 3a20 5b5d  [], "Losses": []
-0001a590: 2c20 2252 6576 656e 7565 7322 3a20 5b5d  , "Revenues": []
-0001a5a0: 2c20 2254 6178 6573 223a 205b 5d2c 2022  , "Taxes": [], "
-0001a5b0: 4578 7065 6e73 6573 223a 205b 5d2c 0d0a  Expenses": [],..
-0001a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019b30: 7369 676e 203d 2022 2d22 0d0a 2020 2020  sign = "-"..    
+00019b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019b50: 2020 2020 6966 2061 6765 6e74 3220 3d3d      if agent2 ==
+00019b60: 206d 795f 6167 656e 743a 0d0a 2020 2020   my_agent:..    
+00019b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019b80: 2020 2020 2020 2020 7369 676e 203d 2022          sign = "
+00019b90: 2b22 0d0a 0d0a 2020 2020 2020 2020 2020  +"....          
+00019ba0: 2020 2020 2020 2020 2020 2020 2020 7120                q 
+00019bb0: 3d20 7379 6d70 792e 6c61 7465 7828 7379  = sympy.latex(sy
+00019bc0: 6d70 792e 7369 6d70 6c69 6679 2873 6967  mpy.simplify(sig
+00019bd0: 6e20 2b20 6669 6c65 6461 7461 5b22 7175  n + filedata["qu
+00019be0: 616e 7469 7479 225d 292c 206d 6f64 653d  antity"]), mode=
+00019bf0: 2270 6c61 696e 2229 0d0a 2020 2020 2020  "plain")..      
+00019c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c10: 2020 7375 626a 6563 7420 3d20 6669 6c65    subject = file
+00019c20: 6461 7461 5b22 7375 626a 6563 7422 5d2e  data["subject"].
+00019c30: 7265 706c 6163 6528 225f 222c 2022 2022  replace("_", " "
+00019c40: 292e 6361 7069 7461 6c69 7a65 2829 0d0a  ).capitalize()..
+00019c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c60: 2020 2020 2020 2020 7072 696e 7428 2220          print(" 
+00019c70: 2020 2020 2066 6f75 6e64 222c 712c 7375       found",q,su
+00019c80: 626a 6563 7429 0d0a 2020 2020 2020 2020  bject)..        
+00019c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ca0: 7470 6520 3d20 6669 6c65 6461 7461 5b72  tpe = filedata[r
+00019cb0: 6566 5f69 6e63 6f6d 655d 0d0a 2020 2020  ef_income]..    
+00019cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019cd0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
+00019ce0: 6f6d 655b 2254 7970 6522 5d2e 6170 7065  ome["Type"].appe
+00019cf0: 6e64 2874 7065 290d 0a20 2020 2020 2020  nd(tpe)..       
+00019d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d10: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
+00019d20: 5b22 5375 626a 6563 7422 5d2e 6170 7065  ["Subject"].appe
+00019d30: 6e64 2873 7562 6a65 6374 290d 0a20 2020  nd(subject)..   
+00019d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d50: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00019d60: 636f 6d65 5b22 5175 616e 7469 7479 225d  come["Quantity"]
+00019d70: 2e61 7070 656e 6428 7374 7228 7129 290d  .append(str(q)).
+00019d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019d90: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+00019da0: 645f 696e 636f 6d65 5b22 5368 6f72 7420  d_income["Short 
+00019db0: 4e61 6d65 225d 2e61 7070 656e 6428 6669  Name"].append(fi
+00019dc0: 6c65 6461 7461 5b22 7368 6f72 746e 616d  ledata["shortnam
+00019dd0: 6522 5d2e 7374 7269 7028 2929 0d0a 2020  e"].strip())..  
+00019de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019df0: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
+00019e00: 6e63 6f6d 655b 2252 616e 6b69 6e67 225d  ncome["Ranking"]
+00019e10: 2e61 7070 656e 6428 3029 0d0a 2020 2020  .append(0)..    
+00019e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e30: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00019e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e50: 2069 6620 7470 6520 696e 205b 2247 6169   if tpe in ["Gai
+00019e60: 6e73 222c 224c 6f73 7365 7322 2c22 4578  ns","Losses","Ex
+00019e70: 7065 6e73 6573 222c 2252 6576 656e 7565  penses","Revenue
+00019e80: 7322 5d3a 0d0a 2020 2020 2020 2020 2020  s"]:..          
+00019e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ea0: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
+00019eb0: 655b 2252 616e 6b69 6e67 225d 2e61 7070  e["Ranking"].app
+00019ec0: 656e 6428 3029 0d0a 2020 2020 2020 2020  end(0)..        
+00019ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ee0: 656c 6966 2074 7065 2069 6e20 5b22 4e6f  elif tpe in ["No
+00019ef0: 6e2d 4f70 6572 6174 696f 6e61 6c20 496e  n-Operational In
+00019f00: 636f 6d65 222c 2249 6e74 6572 6573 7420  come","Interest 
+00019f10: 5061 796d 656e 7473 225d 3a0d 0a20 2020  Payments"]:..   
+00019f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019f30: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+00019f40: 645f 696e 636f 6d65 5b22 5261 6e6b 696e  d_income["Rankin
+00019f50: 6722 5d2e 6170 7065 6e64 2831 290d 0a20  g"].append(1).. 
+00019f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019f70: 2020 2020 2020 2065 6c69 6620 7470 6520         elif tpe 
+00019f80: 696e 205b 2254 6178 6573 225d 3a0d 0a20  in ["Taxes"]:.. 
+00019f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019fa0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+00019fb0: 6e65 645f 696e 636f 6d65 5b22 5261 6e6b  ned_income["Rank
+00019fc0: 696e 6722 5d2e 6170 7065 6e64 2832 290d  ing"].append(2).
+00019fd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019fe0: 2020 2020 2020 2020 2065 6c69 6620 7470           elif tp
+00019ff0: 6520 696e 205b 224e 6f6e 7461 7861 626c  e in ["Nontaxabl
+0001a000: 6520 5072 6f66 6974 7322 2c20 224e 6f6e  e Profits", "Non
+0001a010: 7461 7861 626c 6520 4c6f 7373 6573 225d  taxable Losses"]
+0001a020: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001a030: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001a040: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
+0001a050: 5261 6e6b 696e 6722 5d2e 6170 7065 6e64  Ranking"].append
+0001a060: 2833 290d 0a20 2020 2020 2020 2020 2020  (3)..           
+0001a070: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0001a080: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a0a0: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
+0001a0b0: 2252 616e 6b69 6e67 225d 2e61 7070 656e  "Ranking"].appen
+0001a0c0: 6428 3429 0d0a 2020 2020 2020 2020 2020  d(4)..          
+0001a0d0: 2020 2020 2020 2020 2020 2020 2020 2222                ""
+0001a0e0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001a0f0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+0001a100: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+0001a110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a120: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001a130: 7469 6679 280d 0a20 2020 2020 2020 2020  tify(..         
+0001a140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a150: 2020 2022 4361 6e6e 6f74 2068 616e 646c     "Cannot handl
+0001a160: 6520 7468 6520 7379 6d62 6f6c 6963 2065  e the symbolic e
+0001a170: 7870 7265 7373 696f 6e20 2573 2220 2520  xpression %s" % 
+0001a180: 7369 676e 202b 2066 696c 6564 6174 615b  sign + filedata[
+0001a190: 2271 7561 6e74 6974 7922 5d20 2b20 7374  "quantity"] + st
+0001a1a0: 7228 6529 2c74 6974 6c65 3d22 4572 726f  r(e),title="Erro
+0001a1b0: 7222 290d 0a0d 0a20 2020 2020 2020 2065  r")....        e
+0001a1c0: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
+0001a1d0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+0001a1e0: 7469 746c 653d 2245 7272 6f72 222c 206d  title="Error", m
+0001a1f0: 6573 7361 6765 3d22 416e 2065 7272 6f72  essage="An error
+0001a200: 206f 6363 7572 7265 642e 2229 0d0a 0d0a   occurred.")....
+0001a210: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001a220: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0001a230: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
+0001a240: 636f 6d62 696e 6564 5f69 6e63 6f6d 6529  combined_income)
+0001a250: 2e73 6574 5f69 6e64 6578 2822 5375 626a  .set_index("Subj
+0001a260: 6563 7422 290d 0a0d 0a0d 0a20 2020 2020  ect")......     
+0001a270: 2020 2020 2020 2023 2073 6f72 7420 6166         # sort af
+0001a280: 7465 7220 7261 6e6b 696e 670d 0a20 2020  ter ranking..   
+0001a290: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+0001a2a0: 3d20 7265 7375 6c74 2e73 6f72 745f 7661  = result.sort_va
+0001a2b0: 6c75 6573 2827 5261 6e6b 696e 6727 290d  lues('Ranking').
+0001a2c0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+0001a2d0: 2072 656d 6f76 6520 7261 6e6b 696e 670d   remove ranking.
+0001a2e0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0001a2f0: 756c 7420 3d20 7265 7375 6c74 2e64 726f  ult = result.dro
+0001a300: 7028 636f 6c75 6d6e 733d 2022 5261 6e6b  p(columns= "Rank
+0001a310: 696e 6722 290d 0a0d 0a20 2020 2020 2020  ing")....       
+0001a320: 2020 2020 206d 6f64 656c 203d 2050 616e       model = Pan
+0001a330: 6461 734d 6f64 656c 2872 6573 756c 7429  dasModel(result)
+0001a340: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001a350: 6966 206d 795f 6167 656e 7420 6e6f 7420  if my_agent not 
+0001a360: 696e 2043 6173 6846 6c6f 7756 6965 7765  in CashFlowViewe
+0001a370: 722e 696e 7374 616e 6365 733a 0d0a 2020  r.instances:..  
+0001a380: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001a390: 7669 6577 203d 2043 6173 6846 6c6f 7756  view = CashFlowV
+0001a3a0: 6965 7765 7228 7365 6c66 2c6e 616d 653d  iewer(self,name=
+0001a3b0: 6d79 5f61 6765 6e74 290d 0a20 2020 2020  my_agent)..     
+0001a3c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0001a3d0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001a3e0: 7669 6577 203d 2043 6173 6846 6c6f 7756  view = CashFlowV
+0001a3f0: 6965 7765 722e 696e 7374 616e 6365 735b  iewer.instances[
+0001a400: 6d79 5f61 6765 6e74 5d0d 0a20 2020 2020  my_agent]..     
+0001a410: 2020 2020 2020 2023 206d 7669 6577 2e73         # mview.s
+0001a420: 6574 4765 6f6d 6574 7279 2831 3030 2c35  etGeometry(100,5
+0001a430: 3030 290d 0a20 2020 2020 2020 2020 2020  00)..           
+0001a440: 206d 7976 6965 772e 7365 745f 6d6f 6465   myview.set_mode
+0001a450: 6c28 6d6f 6465 6c29 0d0a 2020 2020 2020  l(model)..      
+0001a460: 2020 2020 2020 2320 6d76 6965 772e 7765        # mview.we
+0001a470: 6256 6965 772e 7365 7448 746d 6c28 6466  bView.setHtml(df
+0001a480: 5f68 746d 6c29 0d0a 2020 2020 2020 2020  _html)..        
+0001a490: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
+0001a4a0: 7465 7374 5f6d 6f64 653a 0d0a 2020 2020  test_mode:..    
+0001a4b0: 2020 2020 2020 2020 2020 2020 6d79 7669              myvi
+0001a4c0: 6577 2e73 686f 7728 290d 0a0d 0a20 2020  ew.show()....   
+0001a4d0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+0001a4e0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+0001a4f0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001a500: 7469 6679 2874 6974 6c65 3d22 4572 726f  tify(title="Erro
+0001a510: 7222 2c20 6d65 7373 6167 653d 2241 6e20  r", message="An 
+0001a520: 6572 726f 7220 6f63 6375 7272 6564 2e22  error occurred."
+0001a530: 202b 2073 7472 2865 2929 0d0a 0d0a 0d0a   + str(e))......
+0001a540: 2020 2020 6465 6620 6765 6e5f 7465 785f      def gen_tex_
+0001a550: 6963 7328 7365 6c66 293a 0d0a 2020 2020  ics(self):..    
+0001a560: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
+0001a570: 6574 7320 3d20 7b7d 0d0a 0d0a 2020 2020  ets = {}....    
+0001a580: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0001a590: 207b 0d0a 2020 2020 2020 2020 6167 656e   {..        agen
+0001a5a0: 745f 6e61 6d65 3a20 7b0d 0a20 2020 2020  t_name: {..     
+0001a5b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001a5c0: 4173 7365 7473 223a 207b 0d0a 2020 2020  Assets": {..    
 0001a5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001a5f0: 4e6f 6e74 6178 6162 6c65 204c 6f73 7365  Nontaxable Losse
-0001a600: 7322 3a20 5b5d 2c20 224e 6f6e 7461 7861  s": [], "Nontaxa
-0001a610: 626c 6520 5072 6f66 6974 7322 3a20 5b5d  ble Profits": []
-0001a620: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a5e0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+0001a5f0: 745f 6e61 6d65 203a 205b 656e 7472 6965  t_name : [entrie
+0001a600: 735d 2c0d 0a20 2020 2020 2020 2020 2020  s],..           
+0001a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a620: 2020 2020 202e 2e2e 7d2c 0d0a 0d0a 2020       ...},....  
 0001a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a650: 2020 224e 6f6e 2d4f 7065 7261 7469 6f6e    "Non-Operation
-0001a660: 616c 2049 6e63 6f6d 6522 3a20 5b5d 2c0d  al Income": [],.
-0001a670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a6a0: 2249 6e74 6572 6573 7420 5061 796d 656e  "Interest Paymen
-0001a6b0: 7473 223a 205b 5d0d 0a20 2020 2020 2020  ts": []..       
-0001a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a6e0: 2020 2020 2020 2020 7d29 0d0a 0d0a 2020          })....  
-0001a6f0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0001a700: 2020 207b 0d0a 2020 2020 2020 2020 6167     {..        ag
-0001a710: 656e 745f 6e61 6d65 3a20 7b0d 0a20 2020  ent_name: {..   
-0001a720: 2020 2020 2020 2020 2020 2020 2022 4761               "Ga
-0001a730: 696e 7322 3a20 205b 656e 7472 6965 735d  ins":  [entries]
-0001a740: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001a750: 2020 2022 4c6f 7373 6573 223a 5b65 6e74     "Losses":[ent
-0001a760: 7269 6573 5d2c 0d0a 2020 2020 2020 2020  ries],..        
-0001a770: 2020 2020 2020 2020 2245 7870 656e 6469          "Expendi
-0001a780: 7475 7265 7322 3a5b 656e 7472 6965 735d  tures":[entries]
-0001a790: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001a7a0: 2020 2022 5265 7665 6e75 6573 223a 205b     "Revenues": [
-0001a7b0: 656e 7472 6965 735d 2c0d 0a20 2020 2020  entries],..     
-0001a7c0: 2020 2020 2020 2020 2020 2022 5461 7865             "Taxe
-0001a7d0: 7322 3a5b 656e 7472 6965 735d 0d0a 2020  s":[entries]..  
-0001a7e0: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-0001a7f0: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
-0001a800: 6b20 3d20 300d 0a20 2020 2020 2020 2074  k = 0..        t
-0001a810: 6578 7374 7220 3d20 2222 0d0a 0d0a 2020  exstr = ""....  
-0001a820: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-0001a830: 2020 2020 2020 2020 666f 7220 6669 6c65          for file
-0001a840: 6461 7461 2069 6e20 7365 6c66 2e65 6e74  data in self.ent
-0001a850: 7279 5f64 6174 613a 0d0a 2020 2020 2020  ry_data:..      
+0001a640: 2020 224c 6961 6269 6c69 7469 6573 2061    "Liabilities a
+0001a650: 6e64 2045 7175 6974 7922 3a20 7b0d 0a20  nd Equity": {.. 
+0001a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a670: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001a680: 616d 6520 3a20 5b65 6e74 7269 6573 5d2c  ame : [entries],
+0001a690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a6b0: 2020 2e2e 2e7d 2c0d 0a0d 0a20 2020 2020    ...},....     
+0001a6c0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+0001a6d0: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
+0001a6e0: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+0001a6f0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
+0001a700: 6f6d 6520 3d20 6465 6661 756c 7464 6963  ome = defaultdic
+0001a710: 7428 6c61 6d62 6461 3a20 7b22 4761 696e  t(lambda: {"Gain
+0001a720: 7322 3a20 5b5d 2c20 224c 6f73 7365 7322  s": [], "Losses"
+0001a730: 3a20 5b5d 2c20 2252 6576 656e 7565 7322  : [], "Revenues"
+0001a740: 3a20 5b5d 2c20 2254 6178 6573 223a 205b  : [], "Taxes": [
+0001a750: 5d2c 2022 4578 7065 6e73 6573 223a 205b  ], "Expenses": [
+0001a760: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+0001a770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a790: 2020 2022 4e6f 6e74 6178 6162 6c65 204c     "Nontaxable L
+0001a7a0: 6f73 7365 7322 3a20 5b5d 2c20 224e 6f6e  osses": [], "Non
+0001a7b0: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
+0001a7c0: 3a20 5b5d 2c0d 0a20 2020 2020 2020 2020  : [],..         
+0001a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a7f0: 2020 2020 2020 224e 6f6e 2d4f 7065 7261        "Non-Opera
+0001a800: 7469 6f6e 616c 2049 6e63 6f6d 6522 3a20  tional Income": 
+0001a810: 5b5d 2c0d 0a20 2020 2020 2020 2020 2020  [],..           
+0001a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a840: 2020 2020 2249 6e74 6572 6573 7420 5061      "Interest Pa
+0001a850: 796d 656e 7473 223a 205b 5d0d 0a20 2020  yments": []..   
 0001a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a870: 2020 2020 2020 2320 2020 7365 6c66 2e70        #   self.p
-0001a880: 6172 656e 742e 6167 656e 7431 2e76 616c  arent.agent1.val
-0001a890: 7565 203d 2066 696c 6564 6174 615b 2261  ue = filedata["a
-0001a8a0: 6765 6e74 3122 5d0d 0a20 2020 2020 2020  gent1"]..       
-0001a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a8c0: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
-0001a8d0: 6e74 2e61 6765 6e74 322e 7661 6c75 6520  nt.agent2.value 
-0001a8e0: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
-0001a8f0: 7432 225d 0d0a 0d0a 2020 2020 2020 2020  t2"]....        
-0001a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a910: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
-0001a920: 742e 666c 6f77 5f63 6865 636b 2e76 616c  t.flow_check.val
-0001a930: 7565 203d 2073 7472 2862 6f6f 6c28 6669  ue = str(bool(fi
-0001a940: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
-0001a950: 7361 6374 696f 6e22 5d29 290d 0a20 2020  saction"]))..   
-0001a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a970: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-0001a980: 7061 7265 6e74 2e6b 696e 642e 7661 6c75  parent.kind.valu
-0001a990: 6520 3d20 6669 6c65 6461 7461 5b22 6b69  e = filedata["ki
-0001a9a0: 6e64 225d 0d0a 2020 2020 2020 2020 2020  nd"]..          
-0001a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9c0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
-0001a9d0: 7375 626a 6563 742e 7661 6c75 6520 3d20  subject.value = 
-0001a9e0: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
-0001a9f0: 7422 5d0d 0a20 2020 2020 2020 2020 2020  t"]..           
+0001a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a880: 2020 2020 2020 2020 2020 2020 7d29 0d0a              })..
+0001a890: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0001a8a0: 2020 2020 2020 207b 0d0a 2020 2020 2020         {..      
+0001a8b0: 2020 6167 656e 745f 6e61 6d65 3a20 7b0d    agent_name: {.
+0001a8c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a8d0: 2022 4761 696e 7322 3a20 205b 656e 7472   "Gains":  [entr
+0001a8e0: 6965 735d 2c0d 0a20 2020 2020 2020 2020  ies],..         
+0001a8f0: 2020 2020 2020 2022 4c6f 7373 6573 223a         "Losses":
+0001a900: 5b65 6e74 7269 6573 5d2c 0d0a 2020 2020  [entries],..    
+0001a910: 2020 2020 2020 2020 2020 2020 2245 7870              "Exp
+0001a920: 656e 6469 7475 7265 7322 3a5b 656e 7472  enditures":[entr
+0001a930: 6965 735d 2c0d 0a20 2020 2020 2020 2020  ies],..         
+0001a940: 2020 2020 2020 2022 5265 7665 6e75 6573         "Revenues
+0001a950: 223a 205b 656e 7472 6965 735d 2c0d 0a20  ": [entries],.. 
+0001a960: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001a970: 5461 7865 7322 3a5b 656e 7472 6965 735d  Taxes":[entries]
+0001a980: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
+0001a990: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+0001a9a0: 2020 2020 6b20 3d20 300d 0a20 2020 2020      k = 0..     
+0001a9b0: 2020 2074 6578 7374 7220 3d20 2222 0d0a     texstr = ""..
+0001a9c0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+0001a9d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001a9e0: 6669 6c65 6461 7461 2069 6e20 7365 6c66  filedata in self
+0001a9f0: 2e65 6e74 7279 5f64 6174 613a 0d0a 2020  .entry_data:..  
 0001aa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa10: 2023 2073 656c 662e 7061 7265 6e74 2e71   # self.parent.q
-0001aa20: 7561 6e74 6974 792e 7661 6c75 6520 3d20  uantity.value = 
-0001aa30: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
-0001aa40: 7479 225d 0d0a 0d0a 2020 2020 2020 2020  ty"]....        
+0001aa10: 2020 2020 2020 2020 2020 2320 2020 7365            #   se
+0001aa20: 6c66 2e70 6172 656e 742e 6167 656e 7431  lf.parent.agent1
+0001aa30: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
+0001aa40: 615b 2261 6765 6e74 3122 5d0d 0a20 2020  a["agent1"]..   
 0001aa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa60: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
-0001aa70: 6564 6174 615b 2261 6765 6e74 3122 5d0d  edata["agent1"].
-0001aa80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001aa90: 2020 2020 2020 2020 2020 2020 2061 6765               age
-0001aaa0: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
-0001aab0: 6167 656e 7432 225d 0d0a 0d0a 2020 2020  agent2"]....    
-0001aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aad0: 2020 2020 2020 2020 6173 7365 7473 3120          assets1 
-0001aae0: 3d20 6669 6c65 6461 7461 5b22 6131 225d  = filedata["a1"]
-0001aaf0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-0001ab00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab10: 2020 2020 206c 6961 6273 3120 3d20 6669       liabs1 = fi
-0001ab20: 6c65 6461 7461 5b22 6c31 225d 202b 2022  ledata["l1"] + "
-0001ab30: 5c6e 2220 2b20 6669 6c65 6461 7461 5b22  \n" + filedata["
-0001ab40: 6531 225d 202b 2022 5c6e 220d 0a0d 0a20  e1"] + "\n".... 
+0001aa60: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+0001aa70: 7061 7265 6e74 2e61 6765 6e74 322e 7661  parent.agent2.va
+0001aa80: 6c75 6520 3d20 6669 6c65 6461 7461 5b22  lue = filedata["
+0001aa90: 6167 656e 7432 225d 0d0a 0d0a 2020 2020  agent2"]....    
+0001aaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aab0: 2020 2020 2020 2020 2320 7365 6c66 2e70          # self.p
+0001aac0: 6172 656e 742e 666c 6f77 5f63 6865 636b  arent.flow_check
+0001aad0: 2e76 616c 7565 203d 2073 7472 2862 6f6f  .value = str(boo
+0001aae0: 6c28 6669 6c65 6461 7461 5b22 6c6f 6720  l(filedata["log 
+0001aaf0: 7472 616e 7361 6374 696f 6e22 5d29 290d  transaction"])).
+0001ab00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ab10: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+0001ab20: 656c 662e 7061 7265 6e74 2e6b 696e 642e  elf.parent.kind.
+0001ab30: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
+0001ab40: 5b22 6b69 6e64 225d 0d0a 2020 2020 2020  ["kind"]..      
 0001ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab60: 2020 2020 2020 2020 2020 2061 7373 6574             asset
-0001ab70: 7332 203d 2066 696c 6564 6174 615b 2261  s2 = filedata["a
-0001ab80: 3222 5d20 2b20 225c 6e22 0d0a 2020 2020  2"] + "\n"..    
-0001ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aba0: 2020 2020 2020 2020 6c69 6162 7332 203d          liabs2 =
-0001abb0: 2066 696c 6564 6174 615b 226c 3222 5d20   filedata["l2"] 
-0001abc0: 2b20 225c 6e22 202b 2066 696c 6564 6174  + "\n" + filedat
-0001abd0: 615b 2265 3222 5d20 2b20 225c 6e22 0d0a  a["e2"] + "\n"..
-0001abe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001abf0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-0001ac00: 5f74 6162 6c65 203d 2070 642e 4461 7461  _table = pd.Data
-0001ac10: 4672 616d 652e 6672 6f6d 5f64 6963 7428  Frame.from_dict(
-0001ac20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ab60: 2020 2020 2020 2320 7365 6c66 2e70 6172        # self.par
+0001ab70: 656e 742e 7375 626a 6563 742e 7661 6c75  ent.subject.valu
+0001ab80: 6520 3d20 6669 6c65 6461 7461 5b22 7375  e = filedata["su
+0001ab90: 626a 6563 7422 5d0d 0a20 2020 2020 2020  bject"]..       
+0001aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001abb0: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
+0001abc0: 6e74 2e71 7561 6e74 6974 792e 7661 6c75  nt.quantity.valu
+0001abd0: 6520 3d20 6669 6c65 6461 7461 5b22 7175  e = filedata["qu
+0001abe0: 616e 7469 7479 225d 0d0a 0d0a 2020 2020  antity"]....    
+0001abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac00: 2020 2020 2020 2020 6167 656e 7431 203d          agent1 =
+0001ac10: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
+0001ac20: 3122 5d0d 0a20 2020 2020 2020 2020 2020  1"]..           
 0001ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac40: 2020 7b22 4173 7365 7473 223a 2061 7373    {"Assets": ass
-0001ac50: 6574 7331 2e73 706c 6974 2822 5c6e 2229  ets1.split("\n")
-0001ac60: 2c20 224c 6961 6269 6c69 7469 6573 2061  , "Liabilities a
-0001ac70: 6e64 2045 7175 6974 7922 3a20 6c69 6162  nd Equity": liab
-0001ac80: 7331 2e73 706c 6974 2822 5c6e 2229 7d2c  s1.split("\n")},
-0001ac90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ac40: 2061 6765 6e74 3220 3d20 6669 6c65 6461   agent2 = fileda
+0001ac50: 7461 5b22 6167 656e 7432 225d 0d0a 0d0a  ta["agent2"]....
+0001ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac70: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+0001ac80: 7473 3120 3d20 6669 6c65 6461 7461 5b22  ts1 = filedata["
+0001ac90: 6131 225d 202b 2022 5c6e 220d 0a20 2020  a1"] + "\n"..   
 0001aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001acb0: 2020 6f72 6965 6e74 3d27 696e 6465 7827    orient='index'
-0001acc0: 292e 540d 0a20 2020 2020 2020 2020 2020  ).T..           
-0001acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ace0: 206d 795f 7461 626c 6532 203d 2070 642e   my_table2 = pd.
-0001acf0: 4461 7461 4672 616d 652e 6672 6f6d 5f64  DataFrame.from_d
-0001ad00: 6963 7428 0d0a 2020 2020 2020 2020 2020  ict(..          
-0001ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad20: 2020 2020 2020 7b22 4173 7365 7473 223a        {"Assets":
-0001ad30: 2061 7373 6574 7332 2e73 706c 6974 2822   assets2.split("
-0001ad40: 5c6e 2229 2c20 224c 6961 6269 6c69 7469  \n"), "Liabiliti
-0001ad50: 6573 2061 6e64 2045 7175 6974 7922 3a20  es and Equity": 
-0001ad60: 6c69 6162 7332 2e73 706c 6974 2822 5c6e  liabs2.split("\n
-0001ad70: 2229 7d2c 0d0a 2020 2020 2020 2020 2020  ")},..          
-0001ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad90: 2020 2020 2020 6f72 6965 6e74 3d27 696e        orient='in
-0001ada0: 6465 7827 292e 540d 0a0d 0a20 2020 2020  dex').T....     
-0001adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001adc0: 2020 2020 2020 2074 6578 5f74 6162 6c65         tex_table
-0001add0: 3120 3d20 6d79 5f74 6162 6c65 2e74 6f5f  1 = my_table.to_
-0001ade0: 6c61 7465 7828 696e 6465 785f 6e61 6d65  latex(index_name
-0001adf0: 733d 4661 6c73 652c 2069 6e64 6578 3d46  s=False, index=F
-0001ae00: 616c 7365 290d 0a20 2020 2020 2020 2020  alse)..         
-0001ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae20: 2020 2074 6578 5f74 6162 6c65 3220 3d20     tex_table2 = 
-0001ae30: 6d79 5f74 6162 6c65 322e 746f 5f6c 6174  my_table2.to_lat
-0001ae40: 6578 2869 6e64 6578 5f6e 616d 6573 3d46  ex(index_names=F
-0001ae50: 616c 7365 2c20 696e 6465 783d 4661 6c73  alse, index=Fals
-0001ae60: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+0001acb0: 2020 2020 2020 2020 206c 6961 6273 3120           liabs1 
+0001acc0: 3d20 6669 6c65 6461 7461 5b22 6c31 225d  = filedata["l1"]
+0001acd0: 202b 2022 5c6e 2220 2b20 6669 6c65 6461   + "\n" + fileda
+0001ace0: 7461 5b22 6531 225d 202b 2022 5c6e 220d  ta["e1"] + "\n".
+0001acf0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001ad00: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001ad10: 7373 6574 7332 203d 2066 696c 6564 6174  ssets2 = filedat
+0001ad20: 615b 2261 3222 5d20 2b20 225c 6e22 0d0a  a["a2"] + "\n"..
+0001ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad40: 2020 2020 2020 2020 2020 2020 6c69 6162              liab
+0001ad50: 7332 203d 2066 696c 6564 6174 615b 226c  s2 = filedata["l
+0001ad60: 3222 5d20 2b20 225c 6e22 202b 2066 696c  2"] + "\n" + fil
+0001ad70: 6564 6174 615b 2265 3222 5d20 2b20 225c  edata["e2"] + "\
+0001ad80: 6e22 0d0a 0d0a 2020 2020 2020 2020 2020  n"....          
+0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ada0: 2020 6d79 5f74 6162 6c65 203d 2070 642e    my_table = pd.
+0001adb0: 4461 7461 4672 616d 652e 6672 6f6d 5f64  DataFrame.from_d
+0001adc0: 6963 7428 0d0a 2020 2020 2020 2020 2020  ict(..          
+0001add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ade0: 2020 2020 2020 7b22 4173 7365 7473 223a        {"Assets":
+0001adf0: 2061 7373 6574 7331 2e73 706c 6974 2822   assets1.split("
+0001ae00: 5c6e 2229 2c20 224c 6961 6269 6c69 7469  \n"), "Liabiliti
+0001ae10: 6573 2061 6e64 2045 7175 6974 7922 3a20  es and Equity": 
+0001ae20: 6c69 6162 7331 2e73 706c 6974 2822 5c6e  liabs1.split("\n
+0001ae30: 2229 7d2c 0d0a 2020 2020 2020 2020 2020  ")},..          
+0001ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae50: 2020 2020 2020 6f72 6965 6e74 3d27 696e        orient='in
+0001ae60: 6465 7827 292e 540d 0a20 2020 2020 2020  dex').T..       
 0001ae70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae80: 2020 2320 6d65 7267 655f 7461 626c 6520    # merge_table 
-0001ae90: 3d20 7064 2e63 6f6e 6361 7428 7465 785f  = pd.concat(tex_
-0001aea0: 7461 626c 6531 2c74 6578 5f74 6162 6c65  table1,tex_table
-0001aeb0: 3229 0d0a 0d0a 2020 2020 2020 2020 2020  2)....          
-0001aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aed0: 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d    # ============
-0001aee0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001aef0: 206d 6f64 6966 7920 636f 6d62 696e 6564   modify combined
-0001af00: 2073 6865 6574 0d0a 0d0a 2020 2020 2020   sheet....      
-0001af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af20: 2020 2020 2020 230d 0a20 2020 2020 2020        #..       
-0001af30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af40: 2020 2020 2023 2041 4745 4e54 2031 0d0a       # AGENT 1..
+0001ae80: 2020 2020 206d 795f 7461 626c 6532 203d       my_table2 =
+0001ae90: 2070 642e 4461 7461 4672 616d 652e 6672   pd.DataFrame.fr
+0001aea0: 6f6d 5f64 6963 7428 0d0a 2020 2020 2020  om_dict(..      
+0001aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aec0: 2020 2020 2020 2020 2020 7b22 4173 7365            {"Asse
+0001aed0: 7473 223a 2061 7373 6574 7332 2e73 706c  ts": assets2.spl
+0001aee0: 6974 2822 5c6e 2229 2c20 224c 6961 6269  it("\n"), "Liabi
+0001aef0: 6c69 7469 6573 2061 6e64 2045 7175 6974  lities and Equit
+0001af00: 7922 3a20 6c69 6162 7332 2e73 706c 6974  y": liabs2.split
+0001af10: 2822 5c6e 2229 7d2c 0d0a 2020 2020 2020  ("\n")},..      
+0001af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af30: 2020 2020 2020 2020 2020 6f72 6965 6e74            orient
+0001af40: 3d27 696e 6465 7827 292e 540d 0a0d 0a20  ='index').T.... 
 0001af50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af60: 2020 2020 2020 2020 2020 2020 230d 0a0d              #...
-0001af70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001af80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001af90: 6167 656e 7431 206e 6f74 2069 6e20 636f  agent1 not in co
-0001afa0: 6d62 696e 6564 5f73 6865 6574 733a 0d0a  mbined_sheets:..
+0001af60: 2020 2020 2020 2020 2020 2074 6578 5f74             tex_t
+0001af70: 6162 6c65 3120 3d20 6d79 5f74 6162 6c65  able1 = my_table
+0001af80: 2e74 6f5f 6c61 7465 7828 696e 6465 785f  .to_latex(index_
+0001af90: 6e61 6d65 733d 4661 6c73 652c 2069 6e64  names=False, ind
+0001afa0: 6578 3d46 616c 7365 290d 0a20 2020 2020  ex=False)..     
 0001afb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afd0: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
-0001afe0: 6167 656e 7431 5d20 3d20 7b7d 0d0a 0d0a  agent1] = {}....
-0001aff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b000: 2020 2020 2020 2020 2020 2020 6966 2022              if "
-0001b010: 4173 7365 7473 2220 6e6f 7420 696e 2063  Assets" not in c
-0001b020: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
-0001b030: 6765 6e74 315d 3a0d 0a20 2020 2020 2020  gent1]:..       
-0001b040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b050: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
-0001b060: 645f 7368 6565 7473 5b61 6765 6e74 315d  d_sheets[agent1]
-0001b070: 5b22 4173 7365 7473 225d 203d 207b 7d0d  ["Assets"] = {}.
-0001b080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b090: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001b0a0: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
-0001b0b0: 2045 7175 6974 7922 206e 6f74 2069 6e20   Equity" not in 
-0001b0c0: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
-0001b0d0: 6167 656e 7431 5d3a 0d0a 2020 2020 2020  agent1]:..      
-0001b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b0f0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
-0001b100: 6564 5f73 6865 6574 735b 6167 656e 7431  ed_sheets[agent1
-0001b110: 5d5b 224c 6961 6269 6c69 7469 6573 2061  ]["Liabilities a
-0001b120: 6e64 2045 7175 6974 7922 5d20 3d20 7b7d  nd Equity"] = {}
-0001b130: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001b140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b150: 666f 7220 6368 616e 6765 2069 6e20 6173  for change in as
-0001b160: 7365 7473 312e 7370 6c69 7428 225c 6e22  sets1.split("\n"
-0001b170: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b190: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0001afc0: 2020 2020 2020 2074 6578 5f74 6162 6c65         tex_table
+0001afd0: 3220 3d20 6d79 5f74 6162 6c65 322e 746f  2 = my_table2.to
+0001afe0: 5f6c 6174 6578 2869 6e64 6578 5f6e 616d  _latex(index_nam
+0001aff0: 6573 3d46 616c 7365 2c20 696e 6465 783d  es=False, index=
+0001b000: 4661 6c73 6529 0d0a 0d0a 2020 2020 2020  False)....      
+0001b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b020: 2020 2020 2020 2320 6d65 7267 655f 7461        # merge_ta
+0001b030: 626c 6520 3d20 7064 2e63 6f6e 6361 7428  ble = pd.concat(
+0001b040: 7465 785f 7461 626c 6531 2c74 6578 5f74  tex_table1,tex_t
+0001b050: 6162 6c65 3229 0d0a 0d0a 2020 2020 2020  able2)....      
+0001b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b070: 2020 2020 2020 2320 3d3d 3d3d 3d3d 3d3d        # ========
+0001b080: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001b090: 3d3d 3d3d 206d 6f64 6966 7920 636f 6d62  ==== modify comb
+0001b0a0: 696e 6564 2073 6865 6574 0d0a 0d0a 2020  ined sheet....  
+0001b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b0c0: 2020 2020 2020 2020 2020 230d 0a20 2020            #..   
+0001b0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b0e0: 2020 2020 2020 2020 2023 2041 4745 4e54           # AGENT
+0001b0f0: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+0001b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b110: 230d 0a0d 0a20 2020 2020 2020 2020 2020  #....           
+0001b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b130: 2069 6620 6167 656e 7431 206e 6f74 2069   if agent1 not i
+0001b140: 6e20 636f 6d62 696e 6564 5f73 6865 6574  n combined_sheet
+0001b150: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b170: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
+0001b180: 6574 735b 6167 656e 7431 5d20 3d20 7b7d  ets[agent1] = {}
+0001b190: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0001b1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1b0: 2020 2020 2020 2020 2020 2020 2020 7369                si
-0001b1c0: 676e 203d 2063 6861 6e67 655b 305d 2020  gn = change[0]  
-0001b1d0: 2320 6669 7273 7420 6c65 7474 6572 2069  # first letter i
-0001b1e0: 7320 7369 676e 202b 206f 7220 2d0d 0a0d  s sign + or -...
-0001b1f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b210: 2020 2020 206e 616d 6520 3d20 6368 616e       name = chan
-0001b220: 6765 5b31 3a5d 2e73 7472 6970 2829 0d0a  ge[1:].strip()..
+0001b1b0: 6966 2022 4173 7365 7473 2220 6e6f 7420  if "Assets" not 
+0001b1c0: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
+0001b1d0: 7473 5b61 6765 6e74 315d 3a0d 0a20 2020  ts[agent1]:..   
+0001b1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b1f0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+0001b200: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
+0001b210: 6e74 315d 5b22 4173 7365 7473 225d 203d  nt1]["Assets"] =
+0001b220: 207b 7d0d 0a20 2020 2020 2020 2020 2020   {}..           
 0001b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b250: 2020 2020 7120 3d20 7379 6d70 792e 6c61      q = sympy.la
-0001b260: 7465 7828 7379 6d70 792e 7369 6d70 6c69  tex(sympy.simpli
-0001b270: 6679 2873 6967 6e20 2b20 6669 6c65 6461  fy(sign + fileda
-0001b280: 7461 5b22 7175 616e 7469 7479 225d 292c  ta["quantity"]),
-0001b290: 206d 6f64 653d 2269 6e6c 696e 6522 290d   mode="inline").
-0001b2a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2c0: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
-0001b2d0: 2020 2028 2220 2b20 6669 6c65 6461 7461     (" + filedata
-0001b2e0: 5b22 7375 626a 6563 7422 5d2e 7265 706c  ["subject"].repl
-0001b2f0: 6163 6528 225f 222c 2022 2022 2920 2b20  ace("_", " ") + 
-0001b300: 2229 220d 0a0d 0a20 2020 2020 2020 2020  ")"....         
-0001b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b320: 2020 2020 2020 2020 2020 2023 7072 696e             #prin
-0001b330: 7428 226e 616d 6522 2c20 6e61 6d65 290d  t("name", name).
-0001b340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b240: 2069 6620 224c 6961 6269 6c69 7469 6573   if "Liabilities
+0001b250: 2061 6e64 2045 7175 6974 7922 206e 6f74   and Equity" not
+0001b260: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
+0001b270: 6574 735b 6167 656e 7431 5d3a 0d0a 2020  ets[agent1]:..  
+0001b280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b290: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001b2a0: 6d62 696e 6564 5f73 6865 6574 735b 6167  mbined_sheets[ag
+0001b2b0: 656e 7431 5d5b 224c 6961 6269 6c69 7469  ent1]["Liabiliti
+0001b2c0: 6573 2061 6e64 2045 7175 6974 7922 5d20  es and Equity"] 
+0001b2d0: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
+0001b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2f0: 2020 2020 666f 7220 6368 616e 6765 2069      for change i
+0001b300: 6e20 6173 7365 7473 312e 7370 6c69 7428  n assets1.split(
+0001b310: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+0001b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b330: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b360: 2020 2020 2023 7072 696e 7428 2263 6f6d       #print("com
-0001b370: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
-0001b380: 6e74 315d 222c 2063 6f6d 6269 6e65 645f  nt1]", combined_
-0001b390: 7368 6565 7473 5b61 6765 6e74 315d 290d  sheets[agent1]).
-0001b3a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b3c0: 2020 2020 2069 6620 6e61 6d65 206e 6f74       if name not
-0001b3d0: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
-0001b3e0: 6574 735b 6167 656e 7431 5d5b 2241 7373  ets[agent1]["Ass
-0001b3f0: 6574 7322 5d3a 0d0a 2020 2020 2020 2020  ets"]:..        
-0001b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b420: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
-0001b430: 6167 656e 7431 5d5b 2241 7373 6574 7322  agent1]["Assets"
-0001b440: 5d5b 6e61 6d65 5d20 3d20 2222 0d0a 0d0a  ][name] = ""....
+0001b360: 2020 7369 676e 203d 2063 6861 6e67 655b    sign = change[
+0001b370: 305d 2020 2320 6669 7273 7420 6c65 7474  0]  # first lett
+0001b380: 6572 2069 7320 7369 676e 202b 206f 7220  er is sign + or 
+0001b390: 2d0d 0a0d 0a20 2020 2020 2020 2020 2020  -....           
+0001b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3b0: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
+0001b3c0: 6368 616e 6765 5b31 3a5d 2e73 7472 6970  change[1:].strip
+0001b3d0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0001b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3f0: 2020 2020 2020 2020 7120 3d20 7379 6d70          q = symp
+0001b400: 792e 6c61 7465 7828 7379 6d70 792e 7369  y.latex(sympy.si
+0001b410: 6d70 6c69 6679 2873 6967 6e20 2b20 6669  mplify(sign + fi
+0001b420: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
+0001b430: 225d 292c 206d 6f64 653d 2269 6e6c 696e  "]), mode="inlin
+0001b440: 6522 290d 0a20 2020 2020 2020 2020 2020  e")..           
 0001b450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b470: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
-0001b480: 6574 735b 6167 656e 7431 5d5b 2241 7373  ets[agent1]["Ass
-0001b490: 6574 7322 5d5b 6e61 6d65 5d20 2b3d 2071  ets"][name] += q
-0001b4a0: 202b 2073 7562 6a65 6374 202b 2022 5c6e   + subject + "\n
-0001b4b0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-0001b4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b4d0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0001b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b460: 2020 2020 2020 2020 2073 7562 6a65 6374           subject
+0001b470: 203d 2022 2020 2028 2220 2b20 6669 6c65   = "   (" + file
+0001b480: 6461 7461 5b22 7375 626a 6563 7422 5d2e  data["subject"].
+0001b490: 7265 706c 6163 6528 225f 222c 2022 2022  replace("_", " "
+0001b4a0: 2920 2b20 2229 220d 0a0d 0a20 2020 2020  ) + ")"....     
+0001b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b4c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001b4d0: 7072 696e 7428 226e 616d 6522 2c20 6e61  print("name", na
+0001b4e0: 6d65 290d 0a20 2020 2020 2020 2020 2020  me)..           
 0001b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b500: 7061 7373 0d0a 2020 2020 2020 2020 2020  pass..          
-0001b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b520: 2020 666f 7220 6368 616e 6765 2069 6e20    for change in 
-0001b530: 6c69 6162 7331 2e73 706c 6974 2822 5c6e  liabs1.split("\n
-0001b540: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+0001b500: 2020 2020 2020 2020 2023 7072 696e 7428           #print(
+0001b510: 2263 6f6d 6269 6e65 645f 7368 6565 7473  "combined_sheets
+0001b520: 5b61 6765 6e74 315d 222c 2063 6f6d 6269  [agent1]", combi
+0001b530: 6e65 645f 7368 6565 7473 5b61 6765 6e74  ned_sheets[agent
+0001b540: 315d 290d 0a20 2020 2020 2020 2020 2020  1])..           
 0001b550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b560: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0001b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b580: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001b590: 6967 6e20 3d20 6368 616e 6765 5b30 5d20  ign = change[0] 
-0001b5a0: 2023 2066 6972 7374 206c 6574 7465 7220   # first letter 
-0001b5b0: 6973 2073 6967 6e20 2b20 6f72 202d 0d0a  is sign + or -..
-0001b5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b5e0: 2020 2020 2020 6e61 6d65 203d 2063 6861        name = cha
-0001b5f0: 6e67 655b 313a 5d2e 7374 7269 7028 290d  nge[1:].strip().
-0001b600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b620: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0001b630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b650: 2020 2071 203d 2073 796d 7079 2e6c 6174     q = sympy.lat
-0001b660: 6578 2873 796d 7079 2e73 696d 706c 6966  ex(sympy.simplif
-0001b670: 7928 7369 676e 202b 2066 696c 6564 6174  y(sign + filedat
-0001b680: 615b 2271 7561 6e74 6974 7922 5d29 2c20  a["quantity"]), 
-0001b690: 6d6f 6465 3d22 696e 6c69 6e65 2229 0d0a  mode="inline")..
-0001b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b560: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
+0001b570: 206e 6f74 2069 6e20 636f 6d62 696e 6564   not in combined
+0001b580: 5f73 6865 6574 735b 6167 656e 7431 5d5b  _sheets[agent1][
+0001b590: 2241 7373 6574 7322 5d3a 0d0a 2020 2020  "Assets"]:..    
+0001b5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b5c0: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
+0001b5d0: 6574 735b 6167 656e 7431 5d5b 2241 7373  ets[agent1]["Ass
+0001b5e0: 6574 7322 5d5b 6e61 6d65 5d20 3d20 2222  ets"][name] = ""
+0001b5f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001b600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b610: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+0001b620: 5f73 6865 6574 735b 6167 656e 7431 5d5b  _sheets[agent1][
+0001b630: 2241 7373 6574 7322 5d5b 6e61 6d65 5d20  "Assets"][name] 
+0001b640: 2b3d 2071 202b 2073 7562 6a65 6374 202b  += q + subject +
+0001b650: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+0001b660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b670: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
+0001b680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b6a0: 2020 2020 7061 7373 0d0a 2020 2020 2020      pass..      
 0001b6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6c0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-0001b6d0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-0001b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b6c0: 2020 2020 2020 666f 7220 6368 616e 6765        for change
+0001b6d0: 2069 6e20 6c69 6162 7331 2e73 706c 6974   in liabs1.split
+0001b6e0: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
 0001b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b700: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-0001b710: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b700: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+0001b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b730: 2020 2020 2020 2020 2020 2020 2020 2243                "C
-0001b740: 616e 6e6f 7420 6861 6e64 6c65 2074 6865  annot handle the
-0001b750: 2073 796d 626f 6c69 6320 6578 7072 6573   symbolic expres
-0001b760: 7369 6f6e 2025 7322 2025 2073 6967 6e20  sion %s" % sign 
-0001b770: 2b20 6669 6c65 6461 7461 5b0d 0a20 2020  + filedata[..   
-0001b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b7a0: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
-0001b7b0: 616e 7469 7479 225d 2c74 6974 6c65 3d22  antity"],title="
-0001b7c0: 4572 726f 7222 290d 0a0d 0a20 2020 2020  Error")....     
+0001b730: 2020 2073 6967 6e20 3d20 6368 616e 6765     sign = change
+0001b740: 5b30 5d20 2023 2066 6972 7374 206c 6574  [0]  # first let
+0001b750: 7465 7220 6973 2073 6967 6e20 2b20 6f72  ter is sign + or
+0001b760: 202d 0d0a 0d0a 2020 2020 2020 2020 2020   -....          
+0001b770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b780: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+0001b790: 2063 6861 6e67 655b 313a 5d2e 7374 7269   change[1:].stri
+0001b7a0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+0001b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b7c0: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
 0001b7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b7e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001b7f0: 7562 6a65 6374 203d 2022 2020 2028 2220  ubject = "   (" 
-0001b800: 2b20 6669 6c65 6461 7461 5b22 7375 626a  + filedata["subj
-0001b810: 6563 7422 5d2e 7265 706c 6163 6528 225f  ect"].replace("_
-0001b820: 222c 2022 2022 2920 2b20 2229 220d 0a0d  ", " ") + ")"...
-0001b830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b850: 2020 2020 2069 6620 6e61 6d65 206e 6f74       if name not
-0001b860: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
-0001b870: 6574 735b 6167 656e 7431 5d5b 224c 6961  ets[agent1]["Lia
-0001b880: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
-0001b890: 6974 7922 5d3a 0d0a 2020 2020 2020 2020  ity"]:..        
-0001b8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8c0: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
-0001b8d0: 6167 656e 7431 5d5b 224c 6961 6269 6c69  agent1]["Liabili
-0001b8e0: 7469 6573 2061 6e64 2045 7175 6974 7922  ties and Equity"
-0001b8f0: 5d5b 6e61 6d65 5d20 3d20 2222 0d0a 0d0a  ][name] = ""....
-0001b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b920: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
-0001b930: 6574 735b 6167 656e 7431 5d5b 224c 6961  ets[agent1]["Lia
-0001b940: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
-0001b950: 6974 7922 5d5b 6e61 6d65 5d20 2b3d 2071  ity"][name] += q
-0001b960: 202b 2073 7562 6a65 6374 202b 2022 5c6e   + subject + "\n
-0001b970: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+0001b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b7f0: 2020 2020 2020 2071 203d 2073 796d 7079         q = sympy
+0001b800: 2e6c 6174 6578 2873 796d 7079 2e73 696d  .latex(sympy.sim
+0001b810: 706c 6966 7928 7369 676e 202b 2066 696c  plify(sign + fil
+0001b820: 6564 6174 615b 2271 7561 6e74 6974 7922  edata["quantity"
+0001b830: 5d29 2c20 6d6f 6465 3d22 696e 6c69 6e65  ]), mode="inline
+0001b840: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+0001b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b860: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+0001b870: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+0001b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8a0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+0001b8b0: 6966 7928 0d0a 2020 2020 2020 2020 2020  ify(..          
+0001b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8e0: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
+0001b8f0: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
+0001b900: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
+0001b910: 6967 6e20 2b20 6669 6c65 6461 7461 5b0d  ign + filedata[.
+0001b920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b950: 2022 7175 616e 7469 7479 225d 2c74 6974   "quantity"],tit
+0001b960: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
+0001b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b990: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0001b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9c0: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
-0001b9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9e0: 2020 2020 6966 2073 7472 2866 696c 6564      if str(filed
-0001b9f0: 6174 615b 2269 6e63 6f6d 6531 225d 2920  ata["income1"]) 
-0001ba00: 213d 2027 4e6f 6e65 273a 0d0a 2020 2020  != 'None':..    
-0001ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba20: 2020 2020 2020 2020 2020 2020 6d79 6469              mydi
-0001ba30: 6374 203d 207b 2247 6169 6e22 3a20 2247  ct = {"Gain": "G
-0001ba40: 6169 6e73 222c 0d0a 2020 2020 2020 2020  ains",..        
+0001b990: 2020 2073 7562 6a65 6374 203d 2022 2020     subject = "  
+0001b9a0: 2028 2220 2b20 6669 6c65 6461 7461 5b22   (" + filedata["
+0001b9b0: 7375 626a 6563 7422 5d2e 7265 706c 6163  subject"].replac
+0001b9c0: 6528 225f 222c 2022 2022 2920 2b20 2229  e("_", " ") + ")
+0001b9d0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9f0: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
+0001ba00: 206e 6f74 2069 6e20 636f 6d62 696e 6564   not in combined
+0001ba10: 5f73 6865 6574 735b 6167 656e 7431 5d5b  _sheets[agent1][
+0001ba20: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
+0001ba30: 2045 7175 6974 7922 5d3a 0d0a 2020 2020   Equity"]:..    
+0001ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba70: 2020 224c 6f73 7322 3a20 224c 6f73 7365    "Loss": "Losse
-0001ba80: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
-0001ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001baa0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001bab0: 4578 7065 6e73 6522 3a20 2245 7870 656e  Expense": "Expen
-0001bac0: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
-0001bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001baf0: 2022 5265 7665 6e75 6522 3a20 2252 6576   "Revenue": "Rev
-0001bb00: 656e 7565 7322 2c0d 0a20 2020 2020 2020  enues",..       
-0001bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba60: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
+0001ba70: 6574 735b 6167 656e 7431 5d5b 224c 6961  ets[agent1]["Lia
+0001ba80: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
+0001ba90: 6974 7922 5d5b 6e61 6d65 5d20 3d20 2222  ity"][name] = ""
+0001baa0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001bab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bac0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+0001bad0: 5f73 6865 6574 735b 6167 656e 7431 5d5b  _sheets[agent1][
+0001bae0: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
+0001baf0: 2045 7175 6974 7922 5d5b 6e61 6d65 5d20   Equity"][name] 
+0001bb00: 2b3d 2071 202b 2073 7562 6a65 6374 202b  += q + subject +
+0001bb10: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
 0001bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb30: 2020 2022 5461 7822 3a20 2254 6178 6573     "Tax": "Taxes
-0001bb40: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0001bb30: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
+0001bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001bb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb60: 2020 2020 2020 2020 2020 2020 2020 224e                "N
-0001bb70: 6f6e 7461 782e 2050 726f 6669 7422 3a20  ontax. Profit": 
-0001bb80: 224e 6f6e 7461 7861 626c 6520 5072 6f66  "Nontaxable Prof
-0001bb90: 6974 7322 2c0d 0a20 2020 2020 2020 2020  its",..         
-0001bba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb60: 2020 2020 7061 7373 0d0a 0d0a 2020 2020      pass....    
+0001bb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb80: 2020 2020 2020 2020 6966 2073 7472 2866          if str(f
+0001bb90: 696c 6564 6174 615b 2269 6e63 6f6d 6531  iledata["income1
+0001bba0: 225d 2920 213d 2027 4e6f 6e65 273a 0d0a  "]) != 'None':..
 0001bbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bbc0: 2022 4e6f 6e74 6178 2e20 4c6f 7373 223a   "Nontax. Loss":
-0001bbd0: 2022 4e6f 6e74 6178 6162 6c65 204c 6f73   "Nontaxable Los
-0001bbe0: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
+0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bbd0: 6d79 6469 6374 203d 207b 2247 6169 6e22  mydict = {"Gain"
+0001bbe0: 3a20 2247 6169 6e73 222c 0d0a 2020 2020  : "Gains",..    
 0001bbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001bc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc10: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
-0001bc20: 223a 2022 4e6f 6e2d 4f70 6572 6174 696f  ": "Non-Operatio
-0001bc30: 6e61 6c20 496e 636f 6d65 222c 0d0a 2020  nal Income",..  
+0001bc10: 2020 2020 2020 224c 6f73 7322 3a20 224c        "Loss": "L
+0001bc20: 6f73 7365 7322 2c0d 0a20 2020 2020 2020  osses",..       
+0001bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001bc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc60: 2020 2020 2020 2020 2249 6e74 6572 6573          "Interes
-0001bc70: 7422 3a20 2249 6e74 6572 6573 7420 5061  t": "Interest Pa
-0001bc80: 796d 656e 7473 227d 0d0a 0d0a 2020 2020  yments"}....    
-0001bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bca0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0001bcb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bc50: 2020 2022 4578 7065 6e73 6522 3a20 2245     "Expense": "E
+0001bc60: 7870 656e 7365 7322 2c0d 0a20 2020 2020  xpenses",..     
+0001bc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc90: 2020 2020 2022 5265 7665 6e75 6522 3a20       "Revenue": 
+0001bca0: 2252 6576 656e 7565 7322 2c0d 0a20 2020  "Revenues",..   
+0001bcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001bcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bcd0: 2020 2020 2020 7120 3d20 7379 6d70 792e        q = sympy.
-0001bce0: 6c61 7465 7828 7379 6d70 792e 7369 6d70  latex(sympy.simp
-0001bcf0: 6c69 6679 2873 6967 6e20 2b20 6669 6c65  lify(sign + file
-0001bd00: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
-0001bd10: 292c 206d 6f64 653d 2269 6e6c 696e 6522  ), mode="inline"
-0001bd20: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bd40: 2020 2020 2020 2073 7562 6a65 6374 203d         subject =
-0001bd50: 2022 2020 2028 2220 2b20 6669 6c65 6461   "   (" + fileda
-0001bd60: 7461 5b22 7375 626a 6563 7422 5d2e 7265  ta["subject"].re
-0001bd70: 706c 6163 6528 225f 222c 2022 2022 2920  place("_", " ") 
-0001bd80: 2b20 2229 220d 0a20 2020 2020 2020 2020  + ")"..         
+0001bcd0: 2020 2020 2020 2022 5461 7822 3a20 2254         "Tax": "T
+0001bce0: 6178 6573 222c 0d0a 2020 2020 2020 2020  axes",..        
+0001bcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd10: 2020 224e 6f6e 7461 782e 2050 726f 6669    "Nontax. Profi
+0001bd20: 7422 3a20 224e 6f6e 7461 7861 626c 6520  t": "Nontaxable 
+0001bd30: 5072 6f66 6974 7322 2c0d 0a20 2020 2020  Profits",..     
+0001bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd60: 2020 2020 2022 4e6f 6e74 6178 2e20 4c6f       "Nontax. Lo
+0001bd70: 7373 223a 2022 4e6f 6e74 6178 6162 6c65  ss": "Nontaxable
+0001bd80: 204c 6f73 7365 7322 2c0d 0a20 2020 2020   Losses",..     
 0001bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bda0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-0001bdb0: 6e65 645f 696e 636f 6d65 5b61 6765 6e74  ned_income[agent
-0001bdc0: 315d 5b6d 7964 6963 745b 6669 6c65 6461  1][mydict[fileda
-0001bdd0: 7461 5b22 696e 636f 6d65 3122 5d5d 5d2e  ta["income1"]]].
-0001bde0: 6170 7065 6e64 2828 7374 7228 7129 2c20  append((str(q), 
-0001bdf0: 7375 626a 6563 7429 290d 0a0d 0a20 2020  subject))....   
-0001be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be10: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-0001be20: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-0001be30: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+0001bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bdb0: 2020 2020 2022 4e6f 6e2d 4f70 2e20 496e       "Non-Op. In
+0001bdc0: 636f 6d65 223a 2022 4e6f 6e2d 4f70 6572  come": "Non-Oper
+0001bdd0: 6174 696f 6e61 6c20 496e 636f 6d65 222c  ational Income",
+0001bde0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001be00: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
+0001be10: 6572 6573 7422 3a20 2249 6e74 6572 6573  erest": "Interes
+0001be20: 7420 5061 796d 656e 7473 227d 0d0a 0d0a  t Payments"}....
+0001be30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be50: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0001be60: 7469 6679 280d 0a20 2020 2020 2020 2020  tify(..         
-0001be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001be90: 4361 6e6e 6f74 2068 616e 646c 6520 7468  Cannot handle th
-0001bea0: 6520 7379 6d62 6f6c 6963 2065 7870 7265  e symbolic expre
-0001beb0: 7373 696f 6e20 2573 2220 2520 7369 676e  ssion %s" % sign
-0001bec0: 202b 2066 696c 6564 6174 615b 2271 7561   + filedata["qua
-0001bed0: 6e74 6974 7922 5d2c 7469 746c 653d 2245  ntity"],title="E
-0001bee0: 7272 6f72 2229 0d0a 0d0a 0d0a 2020 2020  rror")......    
-0001bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf00: 2020 2020 2020 2020 230d 0a20 2020 2020          #..     
-0001bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf20: 2020 2020 2020 2023 2041 4745 4e54 2032         # AGENT 2
-0001bf30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001bf40: 2020 2020 2020 2020 2020 2020 2020 230d                #.
-0001bf50: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001bf60: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001bf70: 6620 6167 656e 7432 206e 6f74 2069 6e20  f agent2 not in 
-0001bf80: 636f 6d62 696e 6564 5f73 6865 6574 733a  combined_sheets:
-0001bf90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bfb0: 2020 636f 6d62 696e 6564 5f73 6865 6574    combined_sheet
-0001bfc0: 735b 6167 656e 7432 5d20 3d20 7b7d 0d0a  s[agent2] = {}..
-0001bfd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001bfe0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001bff0: 2022 4173 7365 7473 2220 6e6f 7420 696e   "Assets" not in
-0001c000: 2063 6f6d 6269 6e65 645f 7368 6565 7473   combined_sheets
-0001c010: 5b61 6765 6e74 325d 3a0d 0a20 2020 2020  [agent2]:..     
+0001be50: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0001be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001be70: 2020 2020 2020 2020 2020 7120 3d20 7379            q = sy
+0001be80: 6d70 792e 6c61 7465 7828 7379 6d70 792e  mpy.latex(sympy.
+0001be90: 7369 6d70 6c69 6679 2873 6967 6e20 2b20  simplify(sign + 
+0001bea0: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
+0001beb0: 7479 225d 292c 206d 6f64 653d 2269 6e6c  ty"]), mode="inl
+0001bec0: 696e 6522 290d 0a20 2020 2020 2020 2020  ine")..         
+0001bed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bee0: 2020 2020 2020 2020 2020 2073 7562 6a65             subje
+0001bef0: 6374 203d 2022 2020 2028 2220 2b20 6669  ct = "   (" + fi
+0001bf00: 6c65 6461 7461 5b22 7375 626a 6563 7422  ledata["subject"
+0001bf10: 5d2e 7265 706c 6163 6528 225f 222c 2022  ].replace("_", "
+0001bf20: 2022 2920 2b20 2229 220d 0a20 2020 2020   ") + ")"..     
+0001bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bf40: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001bf50: 6f6d 6269 6e65 645f 696e 636f 6d65 5b61  ombined_income[a
+0001bf60: 6765 6e74 315d 5b6d 7964 6963 745b 6669  gent1][mydict[fi
+0001bf70: 6c65 6461 7461 5b22 696e 636f 6d65 3122  ledata["income1"
+0001bf80: 5d5d 5d2e 6170 7065 6e64 2828 7374 7228  ]]].append((str(
+0001bf90: 7129 2c20 7375 626a 6563 7429 290d 0a0d  q), subject))...
+0001bfa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfc0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+0001bfd0: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+0001bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bff0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001c000: 662e 6e6f 7469 6679 280d 0a20 2020 2020  f.notify(..     
+0001c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c030: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-0001c040: 6e65 645f 7368 6565 7473 5b61 6765 6e74  ned_sheets[agent
-0001c050: 325d 5b22 4173 7365 7473 225d 203d 207b  2]["Assets"] = {
-0001c060: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
-0001c070: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001c080: 6620 224c 6961 6269 6c69 7469 6573 2061  f "Liabilities a
-0001c090: 6e64 2045 7175 6974 7922 206e 6f74 2069  nd Equity" not i
-0001c0a0: 6e20 636f 6d62 696e 6564 5f73 6865 6574  n combined_sheet
-0001c0b0: 735b 6167 656e 7432 5d3a 0d0a 2020 2020  s[agent2]:..    
-0001c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c0d0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-0001c0e0: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
-0001c0f0: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
-0001c100: 2061 6e64 2045 7175 6974 7922 5d20 3d20   and Equity"] = 
-0001c110: 7b7d 0d0a 0d0a 2020 2020 2020 2020 2020  {}....          
-0001c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c130: 2020 666f 7220 6368 616e 6765 2069 6e20    for change in 
-0001c140: 6173 7365 7473 322e 7370 6c69 7428 225c  assets2.split("\
-0001c150: 6e22 293a 0d0a 0d0a 2020 2020 2020 2020  n"):....        
-0001c160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c170: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001c030: 2020 2022 4361 6e6e 6f74 2068 616e 646c     "Cannot handl
+0001c040: 6520 7468 6520 7379 6d62 6f6c 6963 2065  e the symbolic e
+0001c050: 7870 7265 7373 696f 6e20 2573 2220 2520  xpression %s" % 
+0001c060: 7369 676e 202b 2066 696c 6564 6174 615b  sign + filedata[
+0001c070: 2271 7561 6e74 6974 7922 5d2c 7469 746c  "quantity"],titl
+0001c080: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
+0001c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c0a0: 2020 2020 2020 2020 2020 2020 230d 0a20              #.. 
+0001c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c0c0: 2020 2020 2020 2020 2020 2023 2041 4745             # AGE
+0001c0d0: 4e54 2032 0d0a 2020 2020 2020 2020 2020  NT 2..          
+0001c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c0f0: 2020 230d 0a0d 0a20 2020 2020 2020 2020    #....         
+0001c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c110: 2020 2069 6620 6167 656e 7432 206e 6f74     if agent2 not
+0001c120: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
+0001c130: 6574 733a 0d0a 2020 2020 2020 2020 2020  ets:..          
+0001c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c150: 2020 2020 2020 636f 6d62 696e 6564 5f73        combined_s
+0001c160: 6865 6574 735b 6167 656e 7432 5d20 3d20  heets[agent2] = 
+0001c170: 7b7d 0d0a 0d0a 2020 2020 2020 2020 2020  {}....          
 0001c180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1a0: 2020 7369 676e 203d 2063 6861 6e67 655b    sign = change[
-0001c1b0: 305d 2020 2320 6669 7273 7420 6c65 7474  0]  # first lett
-0001c1c0: 6572 2069 7320 7369 676e 202b 206f 7220  er is sign + or 
-0001c1d0: 2d0d 0a0d 0a20 2020 2020 2020 2020 2020  -....           
-0001c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1f0: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
-0001c200: 6368 616e 6765 5b31 3a5d 2e73 7472 6970  change[1:].strip
-0001c210: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0001c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c230: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0001c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c260: 2020 2020 2020 7120 3d20 7379 6d70 792e        q = sympy.
-0001c270: 6c61 7465 7828 7379 6d70 792e 7369 6d70  latex(sympy.simp
-0001c280: 6c69 6679 2873 6967 6e20 2b20 6669 6c65  lify(sign + file
-0001c290: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
-0001c2a0: 292c 206d 6f64 653d 2269 6e6c 696e 6522  ), mode="inline"
-0001c2b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001c190: 2020 6966 2022 4173 7365 7473 2220 6e6f    if "Assets" no
+0001c1a0: 7420 696e 2063 6f6d 6269 6e65 645f 7368  t in combined_sh
+0001c1b0: 6565 7473 5b61 6765 6e74 325d 3a0d 0a20  eets[agent2]:.. 
+0001c1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c1d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001c1e0: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
+0001c1f0: 6765 6e74 325d 5b22 4173 7365 7473 225d  gent2]["Assets"]
+0001c200: 203d 207b 7d0d 0a20 2020 2020 2020 2020   = {}..         
+0001c210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c220: 2020 2069 6620 224c 6961 6269 6c69 7469     if "Liabiliti
+0001c230: 6573 2061 6e64 2045 7175 6974 7922 206e  es and Equity" n
+0001c240: 6f74 2069 6e20 636f 6d62 696e 6564 5f73  ot in combined_s
+0001c250: 6865 6574 735b 6167 656e 7432 5d3a 0d0a  heets[agent2]:..
+0001c260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c280: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
+0001c290: 6167 656e 7432 5d5b 224c 6961 6269 6c69  agent2]["Liabili
+0001c2a0: 7469 6573 2061 6e64 2045 7175 6974 7922  ties and Equity"
+0001c2b0: 5d20 3d20 7b7d 0d0a 0d0a 2020 2020 2020  ] = {}....      
 0001c2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c2d0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0001c2e0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-0001c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c2d0: 2020 2020 2020 666f 7220 6368 616e 6765        for change
+0001c2e0: 2069 6e20 6173 7365 7473 322e 7370 6c69   in assets2.spli
+0001c2f0: 7428 225c 6e22 293a 0d0a 0d0a 2020 2020  t("\n"):....    
 0001c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c310: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-0001c320: 6679 280d 0a20 2020 2020 2020 2020 2020  fy(..           
+0001c310: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+0001c320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001c330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c350: 2022 4361 6e6e 6f74 2068 616e 646c 6520   "Cannot handle 
-0001c360: 7468 6520 7379 6d62 6f6c 6963 2065 7870  the symbolic exp
-0001c370: 7265 7373 696f 6e20 2573 2220 2520 7369  ression %s" % si
-0001c380: 676e 202b 2066 696c 6564 6174 615b 0d0a  gn + filedata[..
-0001c390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3c0: 2271 7561 6e74 6974 7922 5d2c 7469 746c  "quantity"],titl
-0001c3d0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
-0001c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c340: 2020 2020 2020 7369 676e 203d 2063 6861        sign = cha
+0001c350: 6e67 655b 305d 2020 2320 6669 7273 7420  nge[0]  # first 
+0001c360: 6c65 7474 6572 2069 7320 7369 676e 202b  letter is sign +
+0001c370: 206f 7220 2d0d 0a0d 0a20 2020 2020 2020   or -....       
+0001c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c390: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+0001c3a0: 6520 3d20 6368 616e 6765 5b31 3a5d 2e73  e = change[1:].s
+0001c3b0: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+0001c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c3d0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+0001c3e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001c3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c400: 2020 7375 626a 6563 7420 3d20 2220 2020    subject = "   
-0001c410: 2822 202b 2066 696c 6564 6174 615b 2273  (" + filedata["s
-0001c420: 7562 6a65 6374 225d 2e72 6570 6c61 6365  ubject"].replace
-0001c430: 2822 5f22 2c20 2220 2229 202b 2022 2922  ("_", " ") + ")"
-0001c440: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c460: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-0001c470: 6e6f 7420 696e 2063 6f6d 6269 6e65 645f  not in combined_
-0001c480: 7368 6565 7473 5b61 6765 6e74 325d 5b22  sheets[agent2]["
-0001c490: 4173 7365 7473 225d 3a0d 0a20 2020 2020  Assets"]:..     
+0001c400: 2020 2020 2020 2020 2020 7120 3d20 7379            q = sy
+0001c410: 6d70 792e 6c61 7465 7828 7379 6d70 792e  mpy.latex(sympy.
+0001c420: 7369 6d70 6c69 6679 2873 6967 6e20 2b20  simplify(sign + 
+0001c430: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
+0001c440: 7479 225d 292c 206d 6f64 653d 2269 6e6c  ty"]), mode="inl
+0001c450: 696e 6522 290d 0a20 2020 2020 2020 2020  ine")..         
+0001c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c470: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001c480: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+0001c490: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 0001c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4c0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-0001c4d0: 7473 5b61 6765 6e74 325d 5b22 4173 7365  ts[agent2]["Asse
-0001c4e0: 7473 225d 5b6e 616d 655d 203d 2022 220d  ts"][name] = "".
-0001c4f0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001c500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c510: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-0001c520: 7368 6565 7473 5b61 6765 6e74 325d 5b22  sheets[agent2]["
-0001c530: 4173 7365 7473 225d 5b6e 616d 655d 202b  Assets"][name] +
-0001c540: 3d20 7120 2b20 7375 626a 6563 7420 2b20  = q + subject + 
-0001c550: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-0001c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c570: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-0001c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c4b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001c4c0: 6e6f 7469 6679 280d 0a20 2020 2020 2020  notify(..       
+0001c4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c4f0: 2020 2020 2022 4361 6e6e 6f74 2068 616e       "Cannot han
+0001c500: 646c 6520 7468 6520 7379 6d62 6f6c 6963  dle the symbolic
+0001c510: 2065 7870 7265 7373 696f 6e20 2573 2220   expression %s" 
+0001c520: 2520 7369 676e 202b 2066 696c 6564 6174  % sign + filedat
+0001c530: 615b 0d0a 2020 2020 2020 2020 2020 2020  a[..            
+0001c540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c560: 2020 2020 2271 7561 6e74 6974 7922 5d2c      "quantity"],
+0001c570: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+0001c580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c5a0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
-0001c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c5c0: 2020 2020 2020 2066 6f72 2063 6861 6e67         for chang
-0001c5d0: 6520 696e 206c 6961 6273 322e 7370 6c69  e in liabs2.spli
-0001c5e0: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
+0001c5a0: 2020 2020 2020 7375 626a 6563 7420 3d20        subject = 
+0001c5b0: 2220 2020 2822 202b 2066 696c 6564 6174  "   (" + filedat
+0001c5c0: 615b 2273 7562 6a65 6374 225d 2e72 6570  a["subject"].rep
+0001c5d0: 6c61 6365 2822 5f22 2c20 2220 2229 202b  lace("_", " ") +
+0001c5e0: 2022 2922 0d0a 0d0a 2020 2020 2020 2020   ")"....        
 0001c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c600: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0001c610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c630: 2020 2020 7369 676e 203d 2063 6861 6e67      sign = chang
-0001c640: 655b 305d 2020 2320 6669 7273 7420 6c65  e[0]  # first le
-0001c650: 7474 6572 2069 7320 7369 676e 202b 206f  tter is sign + o
-0001c660: 7220 2d0d 0a0d 0a20 2020 2020 2020 2020  r -....         
-0001c670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c680: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-0001c690: 3d20 6368 616e 6765 5b31 3a5d 2e73 7472  = change[1:].str
-0001c6a0: 6970 2829 0d0a 2020 2020 2020 2020 2020  ip()..          
-0001c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6c0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0001c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6f0: 2020 2020 2020 2020 7120 3d20 7379 6d70          q = symp
-0001c700: 792e 6c61 7465 7828 7379 6d70 792e 7369  y.latex(sympy.si
-0001c710: 6d70 6c69 6679 2873 6967 6e20 2b20 6669  mplify(sign + fi
-0001c720: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
-0001c730: 225d 292c 206d 6f64 653d 2269 6e6c 696e  "]), mode="inlin
-0001c740: 6522 290d 0a20 2020 2020 2020 2020 2020  e")..           
+0001c600: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001c610: 616d 6520 6e6f 7420 696e 2063 6f6d 6269  ame not in combi
+0001c620: 6e65 645f 7368 6565 7473 5b61 6765 6e74  ned_sheets[agent
+0001c630: 325d 5b22 4173 7365 7473 225d 3a0d 0a20  2]["Assets"]:.. 
+0001c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c660: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+0001c670: 7368 6565 7473 5b61 6765 6e74 325d 5b22  sheets[agent2]["
+0001c680: 4173 7365 7473 225d 5b6e 616d 655d 203d  Assets"][name] =
+0001c690: 2022 220d 0a0d 0a20 2020 2020 2020 2020   ""....         
+0001c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c6b0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+0001c6c0: 6e65 645f 7368 6565 7473 5b61 6765 6e74  ned_sheets[agent
+0001c6d0: 325d 5b22 4173 7365 7473 225d 5b6e 616d  2]["Assets"][nam
+0001c6e0: 655d 202b 3d20 7120 2b20 7375 626a 6563  e] += q + subjec
+0001c6f0: 7420 2b20 225c 6e22 0d0a 2020 2020 2020  t + "\n"..      
+0001c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c710: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001c720: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c740: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
 0001c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c760: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-0001c770: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-0001c780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c760: 2020 2020 2020 2020 2020 2066 6f72 2063             for c
+0001c770: 6861 6e67 6520 696e 206c 6961 6273 322e  hange in liabs2.
+0001c780: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
 0001c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7a0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0001c7b0: 7469 6679 280d 0a20 2020 2020 2020 2020  tify(..         
+0001c7a0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0001c7b0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
 0001c7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7e0: 2020 2022 4361 6e6e 6f74 2068 616e 646c     "Cannot handl
-0001c7f0: 6520 7468 6520 7379 6d62 6f6c 6963 2065  e the symbolic e
-0001c800: 7870 7265 7373 696f 6e20 2573 2220 2520  xpression %s" % 
-0001c810: 7369 676e 202b 2066 696c 6564 6174 615b  sign + filedata[
-0001c820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c850: 2020 2271 7561 6e74 6974 7922 5d2c 7469    "quantity"],ti
-0001c860: 746c 653d 2245 7272 6f72 2229 0d0a 0d0a  tle="Error")....
-0001c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7d0: 2020 2020 2020 2020 7369 676e 203d 2063          sign = c
+0001c7e0: 6861 6e67 655b 305d 2020 2320 6669 7273  hange[0]  # firs
+0001c7f0: 7420 6c65 7474 6572 2069 7320 7369 676e  t letter is sign
+0001c800: 202b 206f 7220 2d0d 0a0d 0a20 2020 2020   + or -....     
+0001c810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c820: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001c830: 616d 6520 3d20 6368 616e 6765 5b31 3a5d  ame = change[1:]
+0001c840: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
+0001c850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c860: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0001c870: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
 0001c880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c890: 2020 2020 7375 626a 6563 7420 3d20 2220      subject = " 
-0001c8a0: 2020 2822 202b 2066 696c 6564 6174 615b    (" + filedata[
-0001c8b0: 2273 7562 6a65 6374 225d 2e72 6570 6c61  "subject"].repla
-0001c8c0: 6365 2822 5f22 2c20 2220 2229 202b 2022  ce("_", " ") + "
-0001c8d0: 2922 0d0a 0d0a 2020 2020 2020 2020 2020  )"....          
-0001c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c8f0: 2020 2020 2020 2020 2020 6966 206e 616d            if nam
-0001c900: 6520 6e6f 7420 696e 2063 6f6d 6269 6e65  e not in combine
-0001c910: 645f 7368 6565 7473 5b61 6765 6e74 325d  d_sheets[agent2]
-0001c920: 5b22 4c69 6162 696c 6974 6965 7320 616e  ["Liabilities an
-0001c930: 6420 4571 7569 7479 225d 3a0d 0a20 2020  d Equity"]:..   
-0001c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c960: 2020 2020 2063 6f6d 6269 6e65 645f 7368       combined_sh
-0001c970: 6565 7473 5b61 6765 6e74 325d 5b22 4c69  eets[agent2]["Li
-0001c980: 6162 696c 6974 6965 7320 616e 6420 4571  abilities and Eq
-0001c990: 7569 7479 225d 5b6e 616d 655d 203d 2022  uity"][name] = "
-0001c9a0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c9c0: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
-0001c9d0: 645f 7368 6565 7473 5b61 6765 6e74 325d  d_sheets[agent2]
-0001c9e0: 5b22 4c69 6162 696c 6974 6965 7320 616e  ["Liabilities an
-0001c9f0: 6420 4571 7569 7479 225d 5b6e 616d 655d  d Equity"][name]
-0001ca00: 202b 3d20 7120 2b20 7375 626a 6563 7420   += q + subject 
-0001ca10: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
+0001c890: 2020 2020 2020 2020 2020 2020 7120 3d20              q = 
+0001c8a0: 7379 6d70 792e 6c61 7465 7828 7379 6d70  sympy.latex(symp
+0001c8b0: 792e 7369 6d70 6c69 6679 2873 6967 6e20  y.simplify(sign 
+0001c8c0: 2b20 6669 6c65 6461 7461 5b22 7175 616e  + filedata["quan
+0001c8d0: 7469 7479 225d 292c 206d 6f64 653d 2269  tity"]), mode="i
+0001c8e0: 6e6c 696e 6522 290d 0a20 2020 2020 2020  nline")..       
+0001c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c900: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+0001c910: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0001c920: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+0001c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c940: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001c950: 662e 6e6f 7469 6679 280d 0a20 2020 2020  f.notify(..     
+0001c960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c980: 2020 2020 2020 2022 4361 6e6e 6f74 2068         "Cannot h
+0001c990: 616e 646c 6520 7468 6520 7379 6d62 6f6c  andle the symbol
+0001c9a0: 6963 2065 7870 7265 7373 696f 6e20 2573  ic expression %s
+0001c9b0: 2220 2520 7369 676e 202b 2066 696c 6564  " % sign + filed
+0001c9c0: 6174 615b 0d0a 2020 2020 2020 2020 2020  ata[..          
+0001c9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9f0: 2020 2020 2020 2271 7561 6e74 6974 7922        "quantity"
+0001ca00: 5d2c 7469 746c 653d 2245 7272 6f72 2229  ],title="Error")
+0001ca10: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0001ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca30: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
-0001ca40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca60: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
-0001ca70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca80: 2020 2020 2020 2020 2069 6620 7374 7228           if str(
-0001ca90: 6669 6c65 6461 7461 5b22 696e 636f 6d65  filedata["income
-0001caa0: 3222 5d29 2021 3d20 274e 6f6e 6527 3a0d  2"]) != 'None':.
-0001cab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001cac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cad0: 206d 7964 6963 7420 3d20 7b22 4761 696e   mydict = {"Gain
-0001cae0: 223a 2022 4761 696e 7322 2c0d 0a20 2020  ": "Gains",..   
+0001ca30: 2020 2020 2020 2020 7375 626a 6563 7420          subject 
+0001ca40: 3d20 2220 2020 2822 202b 2066 696c 6564  = "   (" + filed
+0001ca50: 6174 615b 2273 7562 6a65 6374 225d 2e72  ata["subject"].r
+0001ca60: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
+0001ca70: 202b 2022 2922 0d0a 0d0a 2020 2020 2020   + ")"....      
+0001ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca90: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001caa0: 206e 616d 6520 6e6f 7420 696e 2063 6f6d   name not in com
+0001cab0: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
+0001cac0: 6e74 325d 5b22 4c69 6162 696c 6974 6965  nt2]["Liabilitie
+0001cad0: 7320 616e 6420 4571 7569 7479 225d 3a0d  s and Equity"]:.
+0001cae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0001caf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb10: 2020 2020 2020 2022 4c6f 7373 223a 2022         "Loss": "
-0001cb20: 4c6f 7373 6573 222c 0d0a 2020 2020 2020  Losses",..      
-0001cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb50: 2020 2020 2245 7870 656e 7365 223a 2022      "Expense": "
-0001cb60: 4578 7065 6e73 6573 222c 0d0a 2020 2020  Expenses",..    
-0001cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb90: 2020 2020 2020 2252 6576 656e 7565 223a        "Revenue":
-0001cba0: 2022 5265 7665 6e75 6573 222c 0d0a 2020   "Revenues",..  
-0001cbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb00: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+0001cb10: 645f 7368 6565 7473 5b61 6765 6e74 325d  d_sheets[agent2]
+0001cb20: 5b22 4c69 6162 696c 6974 6965 7320 616e  ["Liabilities an
+0001cb30: 6420 4571 7569 7479 225d 5b6e 616d 655d  d Equity"][name]
+0001cb40: 203d 2022 220d 0a0d 0a20 2020 2020 2020   = ""....       
+0001cb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb60: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+0001cb70: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
+0001cb80: 6e74 325d 5b22 4c69 6162 696c 6974 6965  nt2]["Liabilitie
+0001cb90: 7320 616e 6420 4571 7569 7479 225d 5b6e  s and Equity"][n
+0001cba0: 616d 655d 202b 3d20 7120 2b20 7375 626a  ame] += q + subj
+0001cbb0: 6563 7420 2b20 225c 6e22 0d0a 2020 2020  ect + "\n"..    
 0001cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cbd0: 2020 2020 2020 2020 2254 6178 223a 2022          "Tax": "
-0001cbe0: 5461 7865 7322 2c0d 0a20 2020 2020 2020  Taxes",..       
+0001cbd0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0001cbe0: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
 0001cbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cc10: 2020 2022 4e6f 6e74 6178 2e20 5072 6f66     "Nontax. Prof
-0001cc20: 6974 223a 2022 4e6f 6e74 6178 6162 6c65  it": "Nontaxable
-0001cc30: 2050 726f 6669 7473 222c 0d0a 2020 2020   Profits",..    
-0001cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cc60: 2020 2020 2020 224e 6f6e 7461 782e 204c        "Nontax. L
-0001cc70: 6f73 7322 3a20 224e 6f6e 7461 7861 626c  oss": "Nontaxabl
-0001cc80: 6520 4c6f 7373 6573 222c 0d0a 2020 2020  e Losses",..    
-0001cc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cc00: 2020 2020 2020 2020 2070 6173 730d 0a0d           pass...
+0001cc10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001cc20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001cc30: 7374 7228 6669 6c65 6461 7461 5b22 696e  str(filedata["in
+0001cc40: 636f 6d65 3222 5d29 2021 3d20 274e 6f6e  come2"]) != 'Non
+0001cc50: 6527 3a0d 0a20 2020 2020 2020 2020 2020  e':..           
+0001cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cc70: 2020 2020 206d 7964 6963 7420 3d20 7b22       mydict = {"
+0001cc80: 4761 696e 223a 2022 4761 696e 7322 2c0d  Gain": "Gains",.
+0001cc90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0001cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ccb0: 2020 2020 2020 224e 6f6e 2d4f 702e 2049        "Non-Op. I
-0001ccc0: 6e63 6f6d 6522 3a20 224e 6f6e 2d4f 7065  ncome": "Non-Ope
-0001ccd0: 7261 7469 6f6e 616c 2049 6e63 6f6d 6522  rational Income"
-0001cce0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd00: 2020 2020 2020 2020 2020 2020 2022 496e               "In
-0001cd10: 7465 7265 7374 223a 2022 496e 7465 7265  terest": "Intere
-0001cd20: 7374 2050 6179 6d65 6e74 7322 7d0d 0a20  st Payments"}.. 
-0001cd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd40: 2020 2020 2020 2020 2020 2020 2020 2071                 q
-0001cd50: 203d 2073 796d 7079 2e6c 6174 6578 2873   = sympy.latex(s
-0001cd60: 796d 7079 2e73 696d 706c 6966 7928 7369  ympy.simplify(si
-0001cd70: 676e 202b 2066 696c 6564 6174 615b 2271  gn + filedata["q
-0001cd80: 7561 6e74 6974 7922 5d29 2c20 6d6f 6465  uantity"]), mode
-0001cd90: 3d22 696e 6c69 6e65 2229 0d0a 2020 2020  ="inline")..    
+0001ccb0: 2020 2020 2020 2020 2020 2022 4c6f 7373             "Loss
+0001ccc0: 223a 2022 4c6f 7373 6573 222c 0d0a 2020  ": "Losses",..  
+0001ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ccf0: 2020 2020 2020 2020 2245 7870 656e 7365          "Expense
+0001cd00: 223a 2022 4578 7065 6e73 6573 222c 0d0a  ": "Expenses",..
+0001cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd30: 2020 2020 2020 2020 2020 2252 6576 656e            "Reven
+0001cd40: 7565 223a 2022 5265 7665 6e75 6573 222c  ue": "Revenues",
+0001cd50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd70: 2020 2020 2020 2020 2020 2020 2254 6178              "Tax
+0001cd80: 223a 2022 5461 7865 7322 2c0d 0a20 2020  ": "Taxes",..   
+0001cd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001cda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cdb0: 2020 2020 2020 2020 2020 2020 7375 626a              subj
-0001cdc0: 6563 7420 3d20 2220 2020 2822 202b 2066  ect = "   (" + f
-0001cdd0: 696c 6564 6174 615b 2273 7562 6a65 6374  iledata["subject
-0001cde0: 225d 2e72 6570 6c61 6365 2822 5f22 2c20  "].replace("_", 
-0001cdf0: 2220 2229 202b 2022 2922 0d0a 2020 2020  " ") + ")"..    
-0001ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce10: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-0001ce20: 696e 6564 5f69 6e63 6f6d 655b 6167 656e  ined_income[agen
-0001ce30: 7432 5d5b 6d79 6469 6374 5b66 696c 6564  t2][mydict[filed
-0001ce40: 6174 615b 2269 6e63 6f6d 6532 225d 5d5d  ata["income2"]]]
-0001ce50: 2e61 7070 656e 6428 2873 7472 2871 292c  .append((str(q),
-0001ce60: 2073 7562 6a65 6374 2929 0d0a 0d0a 2020   subject))....  
-0001ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce80: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001ce90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001cea0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0d0a 0d0a  ============....
-0001ceb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cec0: 2020 2020 2020 2020 2020 2020 7472 616e              tran
-0001ced0: 7366 6572 5f73 7472 203d 2022 220d 0a0d  sfer_str = ""...
-0001cee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001cef0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001cf00: 636f 6e76 6572 745f 626f 6f6c 2866 696c  convert_bool(fil
-0001cf10: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
-0001cf20: 6163 7469 6f6e 225d 293a 0d0a 2020 2020  action"]):..    
-0001cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf40: 2020 2020 2020 2020 2020 2020 7472 616e              tran
-0001cf50: 7366 6572 5f73 7472 203d 2022 5c6e 466c  sfer_str = "\nFl
-0001cf60: 6f77 3a7e 2220 2b20 6669 6c65 6461 7461  ow:~" + filedata
-0001cf70: 5b22 6b69 6e64 225d 2e73 7472 6970 2829  ["kind"].strip()
-0001cf80: 2e72 6570 6c61 6365 2822 2d3e 222c 0d0a  .replace("->",..
-0001cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cdb0: 2020 2020 2020 2022 4e6f 6e74 6178 2e20         "Nontax. 
+0001cdc0: 5072 6f66 6974 223a 2022 4e6f 6e74 6178  Profit": "Nontax
+0001cdd0: 6162 6c65 2050 726f 6669 7473 222c 0d0a  able Profits",..
+0001cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce00: 2020 2020 2020 2020 2020 224e 6f6e 7461            "Nonta
+0001ce10: 782e 204c 6f73 7322 3a20 224e 6f6e 7461  x. Loss": "Nonta
+0001ce20: 7861 626c 6520 4c6f 7373 6573 222c 0d0a  xable Losses",..
+0001ce30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce50: 2020 2020 2020 2020 2020 224e 6f6e 2d4f            "Non-O
+0001ce60: 702e 2049 6e63 6f6d 6522 3a20 224e 6f6e  p. Income": "Non
+0001ce70: 2d4f 7065 7261 7469 6f6e 616c 2049 6e63  -Operational Inc
+0001ce80: 6f6d 6522 2c0d 0a20 2020 2020 2020 2020  ome",..         
+0001ce90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ceb0: 2022 496e 7465 7265 7374 223a 2022 496e   "Interest": "In
+0001cec0: 7465 7265 7374 2050 6179 6d65 6e74 7322  terest Payments"
+0001ced0: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
+0001cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cef0: 2020 2071 203d 2073 796d 7079 2e6c 6174     q = sympy.lat
+0001cf00: 6578 2873 796d 7079 2e73 696d 706c 6966  ex(sympy.simplif
+0001cf10: 7928 7369 676e 202b 2066 696c 6564 6174  y(sign + filedat
+0001cf20: 615b 2271 7561 6e74 6974 7922 5d29 2c20  a["quantity"]), 
+0001cf30: 6d6f 6465 3d22 696e 6c69 6e65 2229 0d0a  mode="inline")..
+0001cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf60: 7375 626a 6563 7420 3d20 2220 2020 2822  subject = "   ("
+0001cf70: 202b 2066 696c 6564 6174 615b 2273 7562   + filedata["sub
+0001cf80: 6a65 6374 225d 2e72 6570 6c61 6365 2822  ject"].replace("
+0001cf90: 5f22 2c20 2220 2229 202b 2022 2922 0d0a  _", " ") + ")"..
 0001cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001cfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfe0: 2020 2020 2020 2020 2020 2020 2022 245c               "$\
-0001cff0: 5c72 6967 6874 6172 726f 7724 2229 202b  \rightarrow$") +
-0001d000: 2022 267e 5c5c 5c5c 2220 2b20 225c 6e22   "&~\\\\" + "\n"
+0001cfc0: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
+0001cfd0: 6167 656e 7432 5d5b 6d79 6469 6374 5b66  agent2][mydict[f
+0001cfe0: 696c 6564 6174 615b 2269 6e63 6f6d 6532  iledata["income2
+0001cff0: 225d 5d5d 2e61 7070 656e 6428 2873 7472  "]]].append((str
+0001d000: 2871 292c 2073 7562 6a65 6374 2929 0d0a  (q), subject))..
 0001d010: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001d020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d030: 2020 7472 616e 7366 6572 5f73 7472 202b    transfer_str +
-0001d040: 3d20 2253 7562 6a65 6374 3a7e 2220 2b20  = "Subject:~" + 
-0001d050: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
-0001d060: 7422 5d2e 7374 7269 7028 292e 7469 746c  t"].strip().titl
-0001d070: 6528 2920 2b20 2226 7e5c 5c5c 5c22 202b  e() + "&~\\\\" +
-0001d080: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+0001d030: 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d    # ============
+0001d040: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001d050: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d070: 7472 616e 7366 6572 5f73 7472 203d 2022  transfer_str = "
+0001d080: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
 0001d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0a0: 2020 2020 2020 2023 2074 7261 6e73 6665         # transfe
-0001d0b0: 725f 7374 7220 2b3d 2022 5175 616e 7469  r_str += "Quanti
-0001d0c0: 7479 3a7e 2220 2b20 6669 6c65 6461 7461  ty:~" + filedata
-0001d0d0: 5b22 7175 616e 7469 7479 225d 2e73 7472  ["quantity"].str
-0001d0e0: 6970 2829 202b 2022 267e 5c5c 5c5c 222b  ip() + "&~\\\\"+
-0001d0f0: 2022 5c6e 220d 0a0d 0a20 2020 2020 2020   "\n"....       
-0001d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d110: 2020 2020 2074 6162 6c65 5f73 7472 203d       table_str =
-0001d120: 2022 2222 5c5c 6265 6769 6e7b 7461 6275   """\\begin{tabu
-0001d130: 6c61 727d 7b6c 6c7d 0d0a 0d0a 2020 2020  lar}{ll}....    
-0001d140: 2020 2020 2020 2020 2020 2020 2573 2026              %s &
-0001d150: 2025 7320 5c5c 5c5c 0d0a 2020 2020 2020   %s \\\\..      
-0001d160: 2020 2020 2020 2020 2020 7e20 2620 7e20            ~ & ~ 
-0001d170: 5c5c 5c5c 0d0a 2020 2020 2020 2020 2020  \\\\..          
-0001d180: 2020 2020 2020 2222 2220 2520 2866 696c        """ % (fil
-0001d190: 6564 6174 615b 2261 6765 6e74 3122 5d2c  edata["agent1"],
-0001d1a0: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
-0001d1b0: 3222 5d29 0d0a 2020 2020 2020 2020 2020  2"])..          
+0001d0a0: 2069 6620 636f 6e76 6572 745f 626f 6f6c   if convert_bool
+0001d0b0: 2866 696c 6564 6174 615b 226c 6f67 2074  (filedata["log t
+0001d0c0: 7261 6e73 6163 7469 6f6e 225d 293a 0d0a  ransaction"]):..
+0001d0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0f0: 7472 616e 7366 6572 5f73 7472 203d 2022  transfer_str = "
+0001d100: 5c6e 466c 6f77 3a7e 2220 2b20 6669 6c65  \nFlow:~" + file
+0001d110: 6461 7461 5b22 6b69 6e64 225d 2e73 7472  data["kind"].str
+0001d120: 6970 2829 2e72 6570 6c61 6365 2822 2d3e  ip().replace("->
+0001d130: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0001d140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d190: 2022 245c 5c72 6967 6874 6172 726f 7724   "$\\rightarrow$
+0001d1a0: 2229 202b 2022 267e 5c5c 5c5c 2220 2b20  ") + "&~\\\\" + 
+0001d1b0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
 0001d1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d1d0: 2020 7461 626c 655f 7374 7220 2b3d 2074    table_str += t
-0001d1e0: 6578 5f74 6162 6c65 3120 2b20 2226 2220  ex_table1 + "&" 
-0001d1f0: 2b20 7465 785f 7461 626c 6532 202b 2022  + tex_table2 + "
-0001d200: 5c5c 5c5c 5c5c 5c5c 2220 2b20 7472 616e  \\\\\\\\" + tran
-0001d210: 7366 6572 5f73 7472 0d0a 0d0a 2020 2020  sfer_str....    
-0001d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d230: 2020 2020 2020 2020 7461 626c 655f 7374          table_st
-0001d240: 7220 2b3d 2022 5c6e 5c6e 5c5c 656e 647b  r += "\n\n\\end{
-0001d250: 7461 6275 6c61 727d 220d 0a20 2020 2020  tabular}"..     
-0001d260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d270: 2020 2020 2020 2074 6578 7374 7220 2b3d         texstr +=
-0001d280: 2022 2222 5c5c 6265 6769 6e7b 7461 626c   """\\begin{tabl
-0001d290: 657d 5b48 5d5c 6e22 2222 0d0a 2020 2020  e}[H]\n"""..    
+0001d1d0: 2020 2020 2020 7472 616e 7366 6572 5f73        transfer_s
+0001d1e0: 7472 202b 3d20 2253 7562 6a65 6374 3a7e  tr += "Subject:~
+0001d1f0: 2220 2b20 6669 6c65 6461 7461 5b22 7375  " + filedata["su
+0001d200: 626a 6563 7422 5d2e 7374 7269 7028 292e  bject"].strip().
+0001d210: 7469 746c 6528 2920 2b20 2226 7e5c 5c5c  title() + "&~\\\
+0001d220: 5c22 202b 2022 5c6e 220d 0a20 2020 2020  \" + "\n"..     
+0001d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d240: 2020 2020 2020 2020 2020 2023 2074 7261             # tra
+0001d250: 6e73 6665 725f 7374 7220 2b3d 2022 5175  nsfer_str += "Qu
+0001d260: 616e 7469 7479 3a7e 2220 2b20 6669 6c65  antity:~" + file
+0001d270: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
+0001d280: 2e73 7472 6970 2829 202b 2022 267e 5c5c  .strip() + "&~\\
+0001d290: 5c5c 222b 2022 5c6e 220d 0a0d 0a20 2020  \\"+ "\n"....   
 0001d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d2b0: 2020 2020 2020 2020 7465 7873 7472 202b          texstr +
-0001d2c0: 3d20 7461 626c 655f 7374 720d 0a20 2020  = table_str..   
-0001d2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d2e0: 2020 2020 2020 2020 2074 6578 7374 7220           texstr 
-0001d2f0: 2b3d 2022 2222 5c63 6170 7469 6f6e 7b25  += """\caption{%
-0001d300: 737d 5c6e 5c65 6e64 7b74 6162 6c65 7d22  s}\n\end{table}"
-0001d310: 2222 2025 2028 6669 6c65 6461 7461 5b22  "" % (filedata["
-0001d320: 7375 626a 6563 7422 5d20 2b20 2228 2573  subject"] + "(%s
-0001d330: 2922 2566 696c 6564 6174 615b 2273 686f  )"%filedata["sho
-0001d340: 7274 6e61 6d65 225d 290d 0a0d 0a20 2020  rtname"])....   
-0001d350: 2020 2020 2020 2020 2074 6578 7374 7220           texstr 
-0001d360: 3d20 7465 7873 7472 2e72 6570 6c61 6365  = texstr.replace
-0001d370: 2822 5f22 2c20 2220 2229 0d0a 2020 2020  ("_", " ")..    
-0001d380: 2020 2020 2020 2020 7465 7873 7472 203d          texstr =
-0001d390: 2074 6578 7374 722e 7265 706c 6163 6528   texstr.replace(
-0001d3a0: 224e 6f6e 6522 2c20 2222 290d 0a0d 0a20  "None", "").... 
-0001d3b0: 2020 2020 2020 2020 2020 2023 203d 3d3d             # ===
-0001d3c0: 3d3d 3d3d 3d3d 3d3d 3d20 6164 6420 636f  ========= add co
-0001d3d0: 6d62 696e 6564 2073 6865 6574 7320 3d3d  mbined sheets ==
-0001d3e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001d3f0: 3d3d 3d3d 0d0a 2020 2020 2020 2020 2020  ====..          
-0001d400: 2020 7072 696e 7428 636f 6d62 696e 6564    print(combined
-0001d410: 5f73 6865 6574 7329 0d0a 0d0a 2020 2020  _sheets)....    
-0001d420: 2020 2020 2020 2020 2320 7064 2e44 6174          # pd.Dat
-0001d430: 6146 7261 6d65 2863 6f6d 6269 6e65 645f  aFrame(combined_
-0001d440: 7368 6565 7473 292e 746f 5f65 7863 656c  sheets).to_excel
-0001d450: 2822 7465 7374 2e78 6c73 7822 2920 3c2d  ("test.xlsx") <-
-0001d460: 2066 6f72 206d 616e 7561 6c20 7465 7374   for manual test
-0001d470: 696e 670d 0a0d 0a20 2020 2020 2020 2020  ing....         
-0001d480: 2020 2023 2063 6f6e 7665 7274 2074 6865     # convert the
-0001d490: 2063 6f6d 6269 6e65 6420 7368 6565 7473   combined sheets
-0001d4a0: 2074 6f20 7465 780d 0a20 2020 2020 2020   to tex..       
-0001d4b0: 2020 2020 2074 6578 7374 725f 636f 6d62       texstr_comb
-0001d4c0: 696e 6564 203d 2022 220d 0a20 2020 2020  ined = ""..     
-0001d4d0: 2020 2020 2020 2066 6f72 2061 6765 6e74         for agent
-0001d4e0: 2c20 6461 7461 2069 6e20 636f 6d62 696e  , data in combin
-0001d4f0: 6564 5f73 6865 6574 732e 6974 656d 7328  ed_sheets.items(
-0001d500: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001d510: 2020 2020 6167 656e 745f 7469 746c 6564      agent_titled
-0001d520: 203d 2061 6765 6e74 2e72 6570 6c61 6365   = agent.replace
-0001d530: 2822 5f22 2c20 2220 2229 2e74 6974 6c65  ("_", " ").title
-0001d540: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
-0001d550: 2020 2020 2020 6173 7365 7473 203d 2064        assets = d
-0001d560: 6174 615b 2241 7373 6574 7322 5d0d 0a20  ata["Assets"].. 
-0001d570: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0001d580: 6961 6273 203d 2064 6174 615b 224c 6961  iabs = data["Lia
-0001d590: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
-0001d5a0: 6974 7922 5d0d 0a0d 0a20 2020 2020 2020  ity"]....       
-0001d5b0: 2020 2020 2020 2020 206d 7973 203d 2022           mys = "
-0001d5c0: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-0001d5d0: 5c5c 6265 6769 6e7b 7461 626c 657d 5b48  \\begin{table}[H
-0001d5e0: 5d0d 0a20 2020 2020 2020 2020 2020 205c  ]..            \
-0001d5f0: 5c63 656e 7465 7269 6e67 0d0a 2020 2020  \centering..    
-0001d600: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0001d610: 2020 2020 2020 2020 2020 2020 206d 7973               mys
-0001d620: 202b 3d20 2222 220d 0a20 2020 2020 2020   += """..       
-0001d630: 2020 2020 205c 5c62 6567 696e 7b74 6162       \\begin{tab
-0001d640: 756c 6172 7d7b 7c6c 7c6c 7c7d 0d0a 2020  ular}{|l|l|}..  
-0001d650: 2020 2020 2020 2020 2020 5c68 6c69 6e65            \hline
-0001d660: 0d0a 2020 2020 2020 2020 2020 2020 7e26  ..            ~&
-0001d670: 7e5c 5c5c 5c0d 0a20 2020 2020 2020 2020  ~\\\\..         
-0001d680: 2020 205c 5c74 6578 7462 667b 4173 7365     \\textbf{Asse
-0001d690: 7473 7d20 2620 5c5c 7465 7874 6266 7b4c  ts} & \\textbf{L
-0001d6a0: 6961 6269 6c69 7469 6573 2061 6e64 2045  iabilities and E
-0001d6b0: 7175 6974 797d 5c5c 5c5c 0d0a 2020 2020  quity}\\\\..    
-0001d6c0: 2020 2020 2020 2020 7e26 7e5c 5c5c 5c0d          ~&~\\\\.
-0001d6d0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001d6e0: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
-0001d6f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d700: 2020 6d79 7320 2b3d 2022 2222 0d0a 2020    mys += """..  
-0001d710: 2020 2020 2020 2020 2020 5c5c 6265 6769            \\begi
-0001d720: 6e7b 7461 6275 6c61 727d 7b6c 6c7d 0d0a  n{tabular}{ll}..
-0001d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d740: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-0001d750: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001d760: 6f72 2069 7465 6d2c 2065 6e74 7279 2069  or item, entry i
-0001d770: 6e20 6173 7365 7473 2e69 7465 6d73 2829  n assets.items()
-0001d780: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0001d790: 2020 2020 2020 2020 206d 7973 202b 3d20           mys += 
-0001d7a0: 6974 656d 202b 2022 267e 205c 5c5c 5c5c  item + "&~ \\\\\
-0001d7b0: 686c 696e 657e 267e 5c5c 5c5c 5c6e 220d  hline~&~\\\\\n".
-0001d7c0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001d7d0: 2020 2020 2020 2066 6f72 2073 7562 5f65         for sub_e
-0001d7e0: 6e74 7279 2069 6e20 656e 7472 792e 7370  ntry in entry.sp
-0001d7f0: 6c69 7428 225c 6e22 293a 0d0a 2020 2020  lit("\n"):..    
-0001d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d810: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0001d820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d830: 2020 2020 2020 6c74 5f73 7562 656e 7472        lt_subentr
-0001d840: 7920 3d20 7375 625f 656e 7472 790d 0a20  y = sub_entry.. 
-0001d850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d860: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
-0001d870: 3d20 227e 2622 202b 206c 745f 7375 6265  = "~&" + lt_sube
-0001d880: 6e74 7279 202b 2022 5c5c 5c5c 2220 2b20  ntry + "\\\\" + 
-0001d890: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-0001d8a0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-0001d8b0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-0001d8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d8d0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
-0001d8e0: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
-0001d8f0: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
-0001d900: 2020 205c 656e 647b 7461 6275 6c61 727d     \end{tabular}
-0001d910: 2026 205c 5c62 6567 696e 7b74 6162 756c   & \\begin{tabul
-0001d920: 6172 7d7b 6c6c 7d22 2222 202b 2022 5c6e  ar}{ll}""" + "\n
-0001d930: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001d940: 2020 2020 2066 6f72 2069 7465 6d2c 2065       for item, e
-0001d950: 6e74 7279 2069 6e20 6c69 6162 732e 6974  ntry in liabs.it
-0001d960: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
-0001d970: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0001d980: 7465 6d20 213d 2022 4571 7569 7479 223a  tem != "Equity":
-0001d990: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d9a0: 2020 2020 2020 2020 2020 6d79 7320 2b3d            mys +=
-0001d9b0: 2069 7465 6d20 2b20 2226 7e20 5c5c 5c5c   item + "&~ \\\\
-0001d9c0: 5c68 6c69 6e65 7e26 7e5c 5c5c 5c5c 6e22  \hline~&~\\\\\n"
-0001d9d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001d9e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001d9f0: 7375 625f 656e 7472 7920 696e 2065 6e74  sub_entry in ent
-0001da00: 7279 2e73 706c 6974 2822 5c6e 2229 3a0d  ry.split("\n"):.
-0001da10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001da20: 2020 2020 2020 2020 2020 2020 2074 7279               try
-0001da30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001d2b0: 2020 2020 2020 2020 2074 6162 6c65 5f73           table_s
+0001d2c0: 7472 203d 2022 2222 5c5c 6265 6769 6e7b  tr = """\\begin{
+0001d2d0: 7461 6275 6c61 727d 7b6c 6c7d 0d0a 0d0a  tabular}{ll}....
+0001d2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2f0: 2573 2026 2025 7320 5c5c 5c5c 0d0a 2020  %s & %s \\\\..  
+0001d300: 2020 2020 2020 2020 2020 2020 2020 7e20                ~ 
+0001d310: 2620 7e20 5c5c 5c5c 0d0a 2020 2020 2020  & ~ \\\\..      
+0001d320: 2020 2020 2020 2020 2020 2222 2220 2520            """ % 
+0001d330: 2866 696c 6564 6174 615b 2261 6765 6e74  (filedata["agent
+0001d340: 3122 5d2c 2066 696c 6564 6174 615b 2261  1"], filedata["a
+0001d350: 6765 6e74 3222 5d29 0d0a 2020 2020 2020  gent2"])..      
+0001d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d370: 2020 2020 2020 7461 626c 655f 7374 7220        table_str 
+0001d380: 2b3d 2074 6578 5f74 6162 6c65 3120 2b20  += tex_table1 + 
+0001d390: 2226 2220 2b20 7465 785f 7461 626c 6532  "&" + tex_table2
+0001d3a0: 202b 2022 5c5c 5c5c 5c5c 5c5c 2220 2b20   + "\\\\\\\\" + 
+0001d3b0: 7472 616e 7366 6572 5f73 7472 0d0a 0d0a  transfer_str....
+0001d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d3d0: 2020 2020 2020 2020 2020 2020 7461 626c              tabl
+0001d3e0: 655f 7374 7220 2b3d 2022 5c6e 5c6e 5c5c  e_str += "\n\n\\
+0001d3f0: 656e 647b 7461 6275 6c61 727d 220d 0a20  end{tabular}".. 
+0001d400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d410: 2020 2020 2020 2020 2020 2074 6578 7374             texst
+0001d420: 7220 2b3d 2022 2222 5c5c 6265 6769 6e7b  r += """\\begin{
+0001d430: 7461 626c 657d 5b48 5d5c 6e22 2222 0d0a  table}[H]\n"""..
+0001d440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d450: 2020 2020 2020 2020 2020 2020 7465 7873              texs
+0001d460: 7472 202b 3d20 7461 626c 655f 7374 720d  tr += table_str.
+0001d470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d480: 2020 2020 2020 2020 2020 2020 2074 6578               tex
+0001d490: 7374 7220 2b3d 2022 2222 5c63 6170 7469  str += """\capti
+0001d4a0: 6f6e 7b25 737d 5c6e 5c65 6e64 7b74 6162  on{%s}\n\end{tab
+0001d4b0: 6c65 7d22 2222 2025 2028 6669 6c65 6461  le}""" % (fileda
+0001d4c0: 7461 5b22 7375 626a 6563 7422 5d20 2b20  ta["subject"] + 
+0001d4d0: 2228 2573 2922 2566 696c 6564 6174 615b  "(%s)"%filedata[
+0001d4e0: 2273 686f 7274 6e61 6d65 225d 290d 0a0d  "shortname"])...
+0001d4f0: 0a20 2020 2020 2020 2020 2020 2074 6578  .            tex
+0001d500: 7374 7220 3d20 7465 7873 7472 2e72 6570  str = texstr.rep
+0001d510: 6c61 6365 2822 5f22 2c20 2220 2229 0d0a  lace("_", " ")..
+0001d520: 2020 2020 2020 2020 2020 2020 7465 7873              texs
+0001d530: 7472 203d 2074 6578 7374 722e 7265 706c  tr = texstr.repl
+0001d540: 6163 6528 224e 6f6e 6522 2c20 2222 290d  ace("None", "").
+0001d550: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+0001d560: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 6164   ============ ad
+0001d570: 6420 636f 6d62 696e 6564 2073 6865 6574  d combined sheet
+0001d580: 7320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  s ==============
+0001d590: 3d3d 3d3d 3d3d 3d3d 0d0a 2020 2020 2020  ========..      
+0001d5a0: 2020 2020 2020 7072 696e 7428 636f 6d62        print(comb
+0001d5b0: 696e 6564 5f73 6865 6574 7329 0d0a 0d0a  ined_sheets)....
+0001d5c0: 2020 2020 2020 2020 2020 2020 2320 7064              # pd
+0001d5d0: 2e44 6174 6146 7261 6d65 2863 6f6d 6269  .DataFrame(combi
+0001d5e0: 6e65 645f 7368 6565 7473 292e 746f 5f65  ned_sheets).to_e
+0001d5f0: 7863 656c 2822 7465 7374 2e78 6c73 7822  xcel("test.xlsx"
+0001d600: 2920 3c2d 2066 6f72 206d 616e 7561 6c20  ) <- for manual 
+0001d610: 7465 7374 696e 670d 0a0d 0a20 2020 2020  testing....     
+0001d620: 2020 2020 2020 2023 2063 6f6e 7665 7274         # convert
+0001d630: 2074 6865 2063 6f6d 6269 6e65 6420 7368   the combined sh
+0001d640: 6565 7473 2074 6f20 7465 780d 0a20 2020  eets to tex..   
+0001d650: 2020 2020 2020 2020 2074 6578 7374 725f           texstr_
+0001d660: 636f 6d62 696e 6564 203d 2022 220d 0a20  combined = "".. 
+0001d670: 2020 2020 2020 2020 2020 2066 6f72 2061             for a
+0001d680: 6765 6e74 2c20 6461 7461 2069 6e20 636f  gent, data in co
+0001d690: 6d62 696e 6564 5f73 6865 6574 732e 6974  mbined_sheets.it
+0001d6a0: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
+0001d6b0: 2020 2020 2020 2020 6167 656e 745f 7469          agent_ti
+0001d6c0: 746c 6564 203d 2061 6765 6e74 2e72 6570  tled = agent.rep
+0001d6d0: 6c61 6365 2822 5f22 2c20 2220 2229 2e74  lace("_", " ").t
+0001d6e0: 6974 6c65 2829 0d0a 0d0a 2020 2020 2020  itle()....      
+0001d6f0: 2020 2020 2020 2020 2020 6173 7365 7473            assets
+0001d700: 203d 2064 6174 615b 2241 7373 6574 7322   = data["Assets"
+0001d710: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0001d720: 2020 206c 6961 6273 203d 2064 6174 615b     liabs = data[
+0001d730: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
+0001d740: 2045 7175 6974 7922 5d0d 0a0d 0a20 2020   Equity"]....   
+0001d750: 2020 2020 2020 2020 2020 2020 206d 7973               mys
+0001d760: 203d 2022 2222 0d0a 2020 2020 2020 2020   = """..        
+0001d770: 2020 2020 5c5c 6265 6769 6e7b 7461 626c      \\begin{tabl
+0001d780: 657d 5b48 5d0d 0a20 2020 2020 2020 2020  e}[H]..         
+0001d790: 2020 205c 5c63 656e 7465 7269 6e67 0d0a     \\centering..
+0001d7a0: 2020 2020 2020 2020 2020 2020 2222 220d              """.
+0001d7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d7c0: 206d 7973 202b 3d20 2222 220d 0a20 2020   mys += """..   
+0001d7d0: 2020 2020 2020 2020 205c 5c62 6567 696e           \\begin
+0001d7e0: 7b74 6162 756c 6172 7d7b 7c6c 7c6c 7c7d  {tabular}{|l|l|}
+0001d7f0: 0d0a 2020 2020 2020 2020 2020 2020 5c68  ..            \h
+0001d800: 6c69 6e65 0d0a 2020 2020 2020 2020 2020  line..          
+0001d810: 2020 7e26 7e5c 5c5c 5c0d 0a20 2020 2020    ~&~\\\\..     
+0001d820: 2020 2020 2020 205c 5c74 6578 7462 667b         \\textbf{
+0001d830: 4173 7365 7473 7d20 2620 5c5c 7465 7874  Assets} & \\text
+0001d840: 6266 7b4c 6961 6269 6c69 7469 6573 2061  bf{Liabilities a
+0001d850: 6e64 2045 7175 6974 797d 5c5c 5c5c 0d0a  nd Equity}\\\\..
+0001d860: 2020 2020 2020 2020 2020 2020 7e26 7e5c              ~&~\
+0001d870: 5c5c 5c0d 0a0d 0a20 2020 2020 2020 2020  \\\....         
+0001d880: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001d890: 2222 0d0a 0d0a 2020 2020 2020 2020 2020  ""....          
+0001d8a0: 2020 2020 2020 6d79 7320 2b3d 2022 2222        mys += """
+0001d8b0: 0d0a 2020 2020 2020 2020 2020 2020 5c5c  ..            \\
+0001d8c0: 6265 6769 6e7b 7461 6275 6c61 727d 7b6c  begin{tabular}{l
+0001d8d0: 6c7d 0d0a 2020 2020 2020 2020 2020 2020  l}..            
+0001d8e0: 2020 2020 2020 2020 2020 2020 2222 220d              """.
+0001d8f0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001d900: 2020 2066 6f72 2069 7465 6d2c 2065 6e74     for item, ent
+0001d910: 7279 2069 6e20 6173 7365 7473 2e69 7465  ry in assets.ite
+0001d920: 6d73 2829 3a0d 0a0d 0a20 2020 2020 2020  ms():....       
+0001d930: 2020 2020 2020 2020 2020 2020 206d 7973               mys
+0001d940: 202b 3d20 6974 656d 202b 2022 267e 205c   += item + "&~ \
+0001d950: 5c5c 5c5c 686c 696e 657e 267e 5c5c 5c5c  \\\\hline~&~\\\\
+0001d960: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
+0001d970: 2020 2020 2020 2020 2020 2066 6f72 2073             for s
+0001d980: 7562 5f65 6e74 7279 2069 6e20 656e 7472  ub_entry in entr
+0001d990: 792e 7370 6c69 7428 225c 6e22 293a 0d0a  y.split("\n"):..
+0001d9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9b0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001d9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9d0: 2020 2020 2020 2020 2020 6c74 5f73 7562            lt_sub
+0001d9e0: 656e 7472 7920 3d20 7375 625f 656e 7472  entry = sub_entr
+0001d9f0: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
+0001da00: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001da10: 7973 202b 3d20 227e 2622 202b 206c 745f  ys += "~&" + lt_
+0001da20: 7375 6265 6e74 7279 202b 2022 5c5c 5c5c  subentry + "\\\\
+0001da30: 2220 2b20 225c 6e22 0d0a 2020 2020 2020  " + "\n"..      
 0001da40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da50: 2020 206c 745f 7375 6265 6e74 7279 203d     lt_subentry =
-0001da60: 2073 7562 5f65 6e74 7279 0d0a 2020 2020   sub_entry..    
-0001da70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da80: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
-0001da90: 2b3d 2022 7e26 2220 2b20 6c74 5f73 7562  += "~&" + lt_sub
-0001daa0: 656e 7472 7920 2b20 225c 5c5c 5c22 202b  entry + "\\\\" +
-0001dab0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
-0001dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dad0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0001dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001daf0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-0001db00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001db10: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0001db20: 2020 2020 2020 2020 2020 2020 2020 6974                it
-0001db30: 656d 203d 2022 4571 7569 7479 220d 0a20  em = "Equity".. 
-0001db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db50: 2020 2065 6e74 7279 203d 206c 6961 6273     entry = liabs
-0001db60: 5b22 4571 7569 7479 225d 0d0a 2020 2020  ["Equity"]..    
-0001db70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db80: 6d79 7320 2b3d 2069 7465 6d20 2b20 2226  mys += item + "&
-0001db90: 7e20 5c5c 5c5c 5c68 6c69 6e65 7e26 7e5c  ~ \\\\\hline~&~\
-0001dba0: 5c5c 5c5c 6e22 0d0a 0d0a 2020 2020 2020  \\\\n"....      
-0001dbb0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001dbc0: 7220 7375 625f 656e 7472 7920 696e 2065  r sub_entry in e
-0001dbd0: 6e74 7279 2e73 706c 6974 2822 5c6e 2229  ntry.split("\n")
-0001dbe0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001dbf0: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-0001dc00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dc10: 2020 2020 2020 2020 2020 2020 206c 745f               lt_
-0001dc20: 7375 6265 6e74 7279 203d 2073 7562 5f65  subentry = sub_e
-0001dc30: 6e74 7279 0d0a 2020 2020 2020 2020 2020  ntry..          
-0001dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc50: 2020 6d79 7320 2b3d 2022 7e26 2220 2b20    mys += "~&" + 
-0001dc60: 6c74 5f73 7562 656e 7472 7920 2b20 225c  lt_subentry + "\
-0001dc70: 5c5c 5c22 202b 2022 5c6e 220d 0a20 2020  \\\" + "\n"..   
+0001da50: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
+0001da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da70: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
+0001da80: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001da90: 7973 202b 3d20 2222 220d 0a20 2020 2020  ys += """..     
+0001daa0: 2020 2020 2020 205c 656e 647b 7461 6275         \end{tabu
+0001dab0: 6c61 727d 2026 205c 5c62 6567 696e 7b74  lar} & \\begin{t
+0001dac0: 6162 756c 6172 7d7b 6c6c 7d22 2222 202b  abular}{ll}""" +
+0001dad0: 2022 5c6e 220d 0a0d 0a20 2020 2020 2020   "\n"....       
+0001dae0: 2020 2020 2020 2020 2066 6f72 2069 7465           for ite
+0001daf0: 6d2c 2065 6e74 7279 2069 6e20 6c69 6162  m, entry in liab
+0001db00: 732e 6974 656d 7328 293a 0d0a 2020 2020  s.items():..    
+0001db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db20: 6966 2069 7465 6d20 213d 2022 4571 7569  if item != "Equi
+0001db30: 7479 223a 0d0a 2020 2020 2020 2020 2020  ty":..          
+0001db40: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001db50: 7320 2b3d 2069 7465 6d20 2b20 2226 7e20  s += item + "&~ 
+0001db60: 5c5c 5c5c 5c68 6c69 6e65 7e26 7e5c 5c5c  \\\\\hline~&~\\\
+0001db70: 5c5c 6e22 0d0a 0d0a 2020 2020 2020 2020  \\n"....        
+0001db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db90: 666f 7220 7375 625f 656e 7472 7920 696e  for sub_entry in
+0001dba0: 2065 6e74 7279 2e73 706c 6974 2822 5c6e   entry.split("\n
+0001dbb0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+0001dbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dbd0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0001dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dbf0: 2020 2020 2020 206c 745f 7375 6265 6e74         lt_subent
+0001dc00: 7279 203d 2073 7562 5f65 6e74 7279 0d0a  ry = sub_entry..
+0001dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc30: 6d79 7320 2b3d 2022 7e26 2220 2b20 6c74  mys += "~&" + lt
+0001dc40: 5f73 7562 656e 7472 7920 2b20 225c 5c5c  _subentry + "\\\
+0001dc50: 5c22 202b 2022 5c6e 220d 0a20 2020 2020  \" + "\n"..     
+0001dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc70: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
 0001dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc90: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
-0001dca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcb0: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
+0001dc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dca0: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
+0001dcb0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
 0001dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcd0: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
-0001dce0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-0001dcf0: 730d 0a0d 0a20 2020 2020 2020 2020 2020  s....           
-0001dd00: 2020 2020 206d 7973 202b 3d20 2222 220d       mys += """.
-0001dd10: 0a20 2020 2020 2020 2020 2020 205c 5c65  .            \\e
-0001dd20: 6e64 7b74 6162 756c 6172 7d0d 0a20 2020  nd{tabular}..   
-0001dd30: 2020 2020 2020 2020 205c 5c5c 5c7e 267e           \\\\~&~
-0001dd40: 0d0a 2020 2020 2020 2020 2020 2020 5c5c  ..            \\
-0001dd50: 5c5c 5c68 6c69 6e65 2222 220d 0a20 2020  \\\hline"""..   
-0001dd60: 2020 2020 2020 2020 2020 2020 206d 7973               mys
-0001dd70: 202b 3d20 2222 220d 0a20 2020 2020 2020   += """..       
-0001dd80: 2020 2020 205c 5c65 6e64 7b74 6162 756c       \\end{tabul
-0001dd90: 6172 7d22 2222 0d0a 2020 2020 2020 2020  ar}"""..        
-0001dda0: 2020 2020 2020 2020 6d79 7320 2b3d 2022          mys += "
-0001ddb0: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-0001ddc0: 5c5c 6361 7074 696f 6e7b 4261 6c61 6e63  \\caption{Balanc
-0001ddd0: 6520 5368 6565 7420 6f66 2025 737d 2222  e Sheet of %s}""
-0001dde0: 2220 2520 6167 656e 745f 7469 746c 6564  " % agent_titled
-0001ddf0: 202b 2022 2222 0d0a 2020 2020 2020 2020   + """..        
-0001de00: 2020 2020 5c5c 656e 647b 7461 626c 657d      \\end{table}
-0001de10: 0d0a 2020 2020 2020 2020 2020 2020 2222  ..            ""
-0001de20: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-0001de30: 2020 2074 6578 7374 725f 636f 6d62 696e     texstr_combin
-0001de40: 6564 202b 3d20 6d79 730d 0a0d 0a20 2020  ed += mys....   
-0001de50: 2020 2020 2020 2020 2020 2020 2023 203d               # =
-0001de60: 3d3d 3d3d 3d3d 3d3d 3d3d 2061 6464 2069  ========== add i
-0001de70: 6e63 6f6d 650d 0a0d 0a20 2020 2020 2020  ncome....       
-0001de80: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
-0001de90: 7420 696e 2063 6f6d 6269 6e65 645f 696e  t in combined_in
-0001dea0: 636f 6d65 3a0d 0a20 2020 2020 2020 2020  come:..         
-0001deb0: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
-0001dec0: 655f 6461 7461 203d 2063 6f6d 6269 6e65  e_data = combine
-0001ded0: 645f 696e 636f 6d65 5b61 6765 6e74 5d0d  d_income[agent].
-0001dee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001def0: 2020 2020 2069 6e63 6f6d 655f 7374 7220       income_str 
-0001df00: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
-0001df10: 2020 205c 5c62 6567 696e 7b74 6162 6c65     \\begin{table
-0001df20: 7d5b 485d 5c6e 5c63 656e 7465 7269 6e67  }[H]\n\centering
-0001df30: 5c6e 0d0a 2020 2020 2020 2020 2020 2020  \n..            
-0001df40: 5c5c 6265 6769 6e7b 7461 6275 6c61 727d  \\begin{tabular}
-0001df50: 7b7c 6c6c 7c7d 5c6e 5c68 6c69 6e65 2222  {|ll|}\n\hline""
-0001df60: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001df70: 2020 2020 2020 2020 2066 6f72 206b 2069           for k i
-0001df80: 6e20 2252 6576 656e 7565 7322 2c20 2247  n "Revenues", "G
-0001df90: 6169 6e73 222c 2022 4578 7065 6e73 6573  ains", "Expenses
-0001dfa0: 222c 2022 4c6f 7373 6573 222c 205c 0d0a  ", "Losses", \..
-0001dfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfc0: 2020 2020 2020 2020 2020 2020 2022 496e               "In
-0001dfd0: 7465 7265 7374 2050 6179 6d65 6e74 7322  terest Payments"
-0001dfe0: 2c20 224e 6f6e 2d4f 7065 7261 7469 6f6e  , "Non-Operation
-0001dff0: 616c 2049 6e63 6f6d 6522 2c20 2254 6178  al Income", "Tax
-0001e000: 6573 222c 2022 4e6f 6e74 6178 6162 6c65  es", "Nontaxable
-0001e010: 2050 726f 6669 7473 222c 2022 4e6f 6e74   Profits", "Nont
-0001e020: 6178 6162 6c65 204c 6f73 7365 7322 3a0d  axable Losses":.
-0001e030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e040: 2020 2020 2020 2020 2076 203d 2069 6e63           v = inc
-0001e050: 6f6d 655f 6461 7461 5b6b 5d0d 0a0d 0a20  ome_data[k].... 
-0001e060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e070: 2020 2020 2020 2069 6e63 6f6d 655f 7374         income_st
-0001e080: 7220 2b3d 2022 7e26 7e5c 5c5c 5c22 0d0a  r += "~&~\\\\"..
-0001e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e0a0: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
-0001e0b0: 7472 202b 3d20 225c 7422 202b 206b 202b  tr += "\t" + k +
-0001e0c0: 2022 267e 5c5c 5c5c 5c6e 220d 0a0d 0a20   "&~\\\\\n".... 
-0001e0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e0e0: 2020 2020 2020 2066 6f72 2073 7562 5f76         for sub_v
-0001e0f0: 616c 7565 2069 6e20 763a 0d0a 2020 2020  alue in v:..    
-0001e100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e110: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
-0001e120: 7472 202b 3d20 225c 7422 202b 2022 7e26  tr += "\t" + "~&
-0001e130: 2220 2b20 7375 625f 7661 6c75 655b 305d  " + sub_value[0]
-0001e140: 202b 2073 7562 5f76 616c 7565 5b31 5d20   + sub_value[1] 
-0001e150: 2b20 225c 5c5c 5c5c 6e22 0d0a 2020 2020  + "\\\\\n"..    
+0001dcd0: 2020 6974 656d 203d 2022 4571 7569 7479    item = "Equity
+0001dce0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+0001dcf0: 2020 2020 2020 2065 6e74 7279 203d 206c         entry = l
+0001dd00: 6961 6273 5b22 4571 7569 7479 225d 0d0a  iabs["Equity"]..
+0001dd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dd20: 2020 2020 6d79 7320 2b3d 2069 7465 6d20      mys += item 
+0001dd30: 2b20 2226 7e20 5c5c 5c5c 5c68 6c69 6e65  + "&~ \\\\\hline
+0001dd40: 7e26 7e5c 5c5c 5c5c 6e22 0d0a 0d0a 2020  ~&~\\\\\n"....  
+0001dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dd60: 2020 666f 7220 7375 625f 656e 7472 7920    for sub_entry 
+0001dd70: 696e 2065 6e74 7279 2e73 706c 6974 2822  in entry.split("
+0001dd80: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
+0001dd90: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001dda0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0001ddb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ddc0: 206c 745f 7375 6265 6e74 7279 203d 2073   lt_subentry = s
+0001ddd0: 7562 5f65 6e74 7279 0d0a 2020 2020 2020  ub_entry..      
+0001dde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ddf0: 2020 2020 2020 6d79 7320 2b3d 2022 7e26        mys += "~&
+0001de00: 2220 2b20 6c74 5f73 7562 656e 7472 7920  " + lt_subentry 
+0001de10: 2b20 225c 5c5c 5c22 202b 2022 5c6e 220d  + "\\\\" + "\n".
+0001de20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001de30: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0001de40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001de50: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+0001de60: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
+0001de70: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
+0001de80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de90: 2070 6173 730d 0a0d 0a20 2020 2020 2020   pass....       
+0001dea0: 2020 2020 2020 2020 206d 7973 202b 3d20           mys += 
+0001deb0: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
+0001dec0: 205c 5c65 6e64 7b74 6162 756c 6172 7d0d   \\end{tabular}.
+0001ded0: 0a20 2020 2020 2020 2020 2020 205c 5c5c  .            \\\
+0001dee0: 5c7e 267e 0d0a 2020 2020 2020 2020 2020  \~&~..          
+0001def0: 2020 5c5c 5c5c 5c68 6c69 6e65 2222 220d    \\\\\hline""".
+0001df00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001df10: 206d 7973 202b 3d20 2222 220d 0a20 2020   mys += """..   
+0001df20: 2020 2020 2020 2020 205c 5c65 6e64 7b74           \\end{t
+0001df30: 6162 756c 6172 7d22 2222 0d0a 2020 2020  abular}"""..    
+0001df40: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
+0001df50: 2b3d 2022 2222 0d0a 2020 2020 2020 2020  += """..        
+0001df60: 2020 2020 5c5c 6361 7074 696f 6e7b 4261      \\caption{Ba
+0001df70: 6c61 6e63 6520 5368 6565 7420 6f66 2025  lance Sheet of %
+0001df80: 737d 2222 2220 2520 6167 656e 745f 7469  s}""" % agent_ti
+0001df90: 746c 6564 202b 2022 2222 0d0a 2020 2020  tled + """..    
+0001dfa0: 2020 2020 2020 2020 5c5c 656e 647b 7461          \\end{ta
+0001dfb0: 626c 657d 0d0a 2020 2020 2020 2020 2020  ble}..          
+0001dfc0: 2020 2222 220d 0a20 2020 2020 2020 2020    """..         
+0001dfd0: 2020 2020 2020 2074 6578 7374 725f 636f         texstr_co
+0001dfe0: 6d62 696e 6564 202b 3d20 6d79 730d 0a0d  mbined += mys...
+0001dff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e000: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 2061   # =========== a
+0001e010: 6464 2069 6e63 6f6d 650d 0a0d 0a20 2020  dd income....   
+0001e020: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001e030: 6167 656e 7420 696e 2063 6f6d 6269 6e65  agent in combine
+0001e040: 645f 696e 636f 6d65 3a0d 0a20 2020 2020  d_income:..     
+0001e050: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001e060: 6e63 6f6d 655f 6461 7461 203d 2063 6f6d  ncome_data = com
+0001e070: 6269 6e65 645f 696e 636f 6d65 5b61 6765  bined_income[age
+0001e080: 6e74 5d0d 0a20 2020 2020 2020 2020 2020  nt]..           
+0001e090: 2020 2020 2020 2020 2069 6e63 6f6d 655f           income_
+0001e0a0: 7374 7220 3d20 2222 220d 0a20 2020 2020  str = """..     
+0001e0b0: 2020 2020 2020 205c 5c62 6567 696e 7b74         \\begin{t
+0001e0c0: 6162 6c65 7d5b 485d 5c6e 5c63 656e 7465  able}[H]\n\cente
+0001e0d0: 7269 6e67 5c6e 0d0a 2020 2020 2020 2020  ring\n..        
+0001e0e0: 2020 2020 5c5c 6265 6769 6e7b 7461 6275      \\begin{tabu
+0001e0f0: 6c61 727d 7b7c 6c6c 7c7d 5c6e 5c68 6c69  lar}{|ll|}\n\hli
+0001e100: 6e65 2222 220d 0a0d 0a20 2020 2020 2020  ne"""....       
+0001e110: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0001e120: 206b 2069 6e20 2252 6576 656e 7565 7322   k in "Revenues"
+0001e130: 2c20 2247 6169 6e73 222c 2022 4578 7065  , "Gains", "Expe
+0001e140: 6e73 6573 222c 2022 4c6f 7373 6573 222c  nses", "Losses",
+0001e150: 205c 0d0a 2020 2020 2020 2020 2020 2020   \..            
 0001e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e170: 2020 2020 6966 206c 656e 2876 2920 3d3d      if len(v) ==
-0001e180: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-0001e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1a0: 2069 6e63 6f6d 655f 7374 7220 2b3d 2022   income_str += "
-0001e1b0: 5c74 2220 2b20 227e 2622 202b 2022 2e2d  \t" + "~&" + ".-
-0001e1c0: 2220 2b20 225c 5c5c 5c5c 6e22 0d0a 0d0a  " + "\\\\\n"....
-0001e1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1e0: 2020 2020 2020 2020 6966 206b 2021 3d20          if k != 
-0001e1f0: 224e 6f6e 7461 7861 626c 6520 4c6f 7373  "Nontaxable Loss
-0001e200: 6573 223a 0d0a 2020 2020 2020 2020 2020  es":..          
-0001e210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e220: 2020 696e 636f 6d65 5f73 7472 202b 3d20    income_str += 
-0001e230: 227e 267e 5c5c 5c5c 5c68 6c69 6e65 5c6e  "~&~\\\\\hline\n
-0001e240: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001e250: 2020 2020 2020 2020 2069 6e63 6f6d 655f           income_
-0001e260: 7374 7220 2b3d 2022 2222 5c6e 0d0a 2020  str += """\n..  
-0001e270: 2020 2020 2020 2020 2020 7e26 7e5c 5c5c            ~&~\\\
-0001e280: 5c5c 686c 696e 655c 6e5c 5c65 6e64 7b74  \\hline\n\\end{t
-0001e290: 6162 756c 6172 7d22 2222 0d0a 2020 2020  abular}"""..    
+0001e170: 2022 496e 7465 7265 7374 2050 6179 6d65   "Interest Payme
+0001e180: 6e74 7322 2c20 224e 6f6e 2d4f 7065 7261  nts", "Non-Opera
+0001e190: 7469 6f6e 616c 2049 6e63 6f6d 6522 2c20  tional Income", 
+0001e1a0: 2254 6178 6573 222c 2022 4e6f 6e74 6178  "Taxes", "Nontax
+0001e1b0: 6162 6c65 2050 726f 6669 7473 222c 2022  able Profits", "
+0001e1c0: 4e6f 6e74 6178 6162 6c65 204c 6f73 7365  Nontaxable Losse
+0001e1d0: 7322 3a0d 0a20 2020 2020 2020 2020 2020  s":..           
+0001e1e0: 2020 2020 2020 2020 2020 2020 2076 203d               v =
+0001e1f0: 2069 6e63 6f6d 655f 6461 7461 5b6b 5d0d   income_data[k].
+0001e200: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001e210: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
+0001e220: 655f 7374 7220 2b3d 2022 7e26 7e5c 5c5c  e_str += "~&~\\\
+0001e230: 5c22 0d0a 2020 2020 2020 2020 2020 2020  \"..            
+0001e240: 2020 2020 2020 2020 2020 2020 696e 636f              inco
+0001e250: 6d65 5f73 7472 202b 3d20 225c 7422 202b  me_str += "\t" +
+0001e260: 206b 202b 2022 267e 5c5c 5c5c 5c6e 220d   k + "&~\\\\\n".
+0001e270: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001e280: 2020 2020 2020 2020 2020 2066 6f72 2073             for s
+0001e290: 7562 5f76 616c 7565 2069 6e20 763a 0d0a  ub_value in v:..
 0001e2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e2b0: 696e 636f 6d65 5f73 7472 202b 3d20 2222  income_str += ""
-0001e2c0: 225c 6e0d 0a20 2020 2020 2020 2020 2020  "\n..           
-0001e2d0: 205c 5c63 6170 7469 6f6e 7b49 6e63 6f6d   \\caption{Incom
-0001e2e0: 6520 5374 6174 656d 656e 7420 6f66 2025  e Statement of %
-0001e2f0: 737d 2222 2220 2520 6167 656e 745f 7469  s}""" % agent_ti
-0001e300: 746c 6564 202b 2022 2222 0d0a 2020 2020  tled + """..    
-0001e310: 2020 2020 2020 2020 5c5c 656e 647b 7461          \\end{ta
-0001e320: 626c 657d 2222 220d 0a0d 0a20 2020 2020  ble}"""....     
-0001e330: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001e340: 6578 7374 725f 636f 6d62 696e 6564 202b  exstr_combined +
-0001e350: 3d20 696e 636f 6d65 5f73 7472 0d0a 0d0a  = income_str....
-0001e360: 2020 2020 2020 2020 2020 2020 2320 3d3d              # ==
-0001e370: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001e380: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001e390: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001e3a0: 3d3d 3d3d 3d0d 0a20 2020 2020 2020 2020  =====..         
-0001e3b0: 2020 2070 7970 6572 636c 6970 2e63 6f70     pyperclip.cop
-0001e3c0: 7928 7465 7873 7472 5f63 6f6d 6269 6e65  y(texstr_combine
-0001e3d0: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
-0001e3e0: 7365 6c66 2e6e 6f74 6966 7928 6d65 7373  self.notify(mess
-0001e3f0: 6167 653d 224c 6154 6558 2063 6f64 6520  age="LaTeX code 
-0001e400: 636f 7069 6564 2074 6f20 636c 6970 626f  copied to clipbo
-0001e410: 6172 642e 2048 6176 6520 6675 6e21 222c  ard. Have fun!",
-0001e420: 2074 6974 6c65 3d22 4861 7665 2066 756e   title="Have fun
-0001e430: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-0001e440: 2020 6966 2046 616c 7365 3a20 2320 6465    if False: # de
-0001e450: 7072 6563 6961 7465 640d 0a0d 0a20 2020  preciated....   
-0001e460: 2020 2020 2020 2020 2020 2020 2070 6174               pat
-0001e470: 6820 3d20 6f73 2e70 6174 682e 6469 726e  h = os.path.dirn
-0001e480: 616d 6528 6f73 2e70 6174 682e 6162 7370  ame(os.path.absp
-0001e490: 6174 6828 5f5f 6669 6c65 5f5f 2929 0d0a  ath(__file__))..
-0001e4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e4b0: 7769 7468 206f 7065 6e28 6f73 2e70 6174  with open(os.pat
-0001e4c0: 682e 6a6f 696e 2870 6174 6820 2c20 2266  h.join(path , "f
-0001e4d0: 696c 6573 2f69 6e63 6f6d 655f 7374 6174  iles/income_stat
-0001e4e0: 6d65 6e74 732e 7465 7822 292c 2022 7722  ments.tex"), "w"
-0001e4f0: 2920 6173 2066 696c 653a 0d0a 2020 2020  ) as file:..    
-0001e500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e510: 6669 6c65 2e77 7269 7465 2822 2222 0d0a  file.write("""..
-0001e520: 2020 2020 5c64 6f63 756d 656e 7463 6c61      \documentcla
-0001e530: 7373 7b61 7274 6963 6c65 7d0d 0a20 2020  ss{article}..   
-0001e540: 205c 5c75 7365 7061 636b 6167 657b 7461   \\usepackage{ta
-0001e550: 6275 6c61 7278 7d0d 0a20 2020 205c 5c75  bularx}..    \\u
-0001e560: 7365 7061 636b 6167 657b 616d 736d 6174  sepackage{amsmat
-0001e570: 687d 0d0a 2020 2020 5c5c 7573 6570 6163  h}..    \\usepac
-0001e580: 6b61 6765 7b66 6c6f 6174 7d0d 0a0d 0a20  kage{float}.... 
-0001e590: 2020 205c 5c62 6567 696e 7b64 6f63 756d     \\begin{docum
-0001e5a0: 656e 747d 0d0a 0d0a 2020 2020 2222 2229  ent}....    """)
-0001e5b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001e5c0: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-0001e5d0: 2874 6578 7374 725f 636f 6d62 696e 6564  (texstr_combined
-0001e5e0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001e5f0: 2020 2020 2020 2066 696c 652e 7772 6974         file.writ
-0001e600: 6528 2222 220d 0a20 2020 205c 5c65 6e64  e("""..    \\end
-0001e610: 7b64 6f63 756d 656e 747d 0d0a 2020 2020  {document}..    
-0001e620: 2222 2229 0d0a 0d0a 2020 2020 2020 2020  """)....        
-0001e630: 2020 2020 2020 2020 696d 706f 7274 2073          import s
-0001e640: 7562 7072 6f63 6573 730d 0a20 2020 2020  ubprocess..     
-0001e650: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-0001e660: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001e670: 2020 2020 2020 2070 6174 6820 3d20 6f73         path = os
-0001e680: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
-0001e690: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
-0001e6a0: 6669 6c65 5f5f 2929 0d0a 2020 2020 2020  file__))..      
-0001e6b0: 2020 2020 2020 2020 2020 2020 2020 7375                su
-0001e6c0: 6270 726f 6365 7373 2e72 756e 2822 7064  bprocess.run("pd
-0001e6d0: 666c 6174 6578 2025 7322 2025 2028 6f73  flatex %s" % (os
-0001e6e0: 2e70 6174 682e 6a6f 696e 2870 6174 682c  .path.join(path,
-0001e6f0: 2022 6669 6c65 732f 696e 636f 6d65 5f73   "files/income_s
-0001e700: 7461 746d 656e 7473 2e74 6578 2229 2929  tatments.tex")))
-0001e710: 2e63 6865 636b 5f72 6574 7572 6e63 6f64  .check_returncod
-0001e720: 6528 290d 0a0d 0a20 2020 2020 2020 2020  e()....         
-0001e730: 2020 2020 2020 2020 2020 2073 6875 7469             shuti
-0001e740: 6c2e 6d6f 7665 2870 6174 6820 2b20 2269  l.move(path + "i
-0001e750: 6e63 6f6d 655f 7374 6174 6d65 6e74 732e  ncome_statments.
-0001e760: 7465 7822 2c20 7061 7468 202b 2022 6669  tex", path + "fi
-0001e770: 6c65 735c 5c69 6e63 6f6d 655f 7374 6174  les\\income_stat
-0001e780: 6d65 6e74 732e 7465 7822 290d 0a20 2020  ments.tex")..   
-0001e790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e7a0: 2073 6875 7469 6c2e 6d6f 7665 2870 6174   shutil.move(pat
-0001e7b0: 6820 2b20 2269 6e63 6f6d 655f 7374 6174  h + "income_stat
-0001e7c0: 6d65 6e74 732e 6c6f 6722 2c20 7061 7468  ments.log", path
-0001e7d0: 202b 2022 6669 6c65 735c 5c69 6e63 6f6d   + "files\\incom
-0001e7e0: 655f 7374 6174 6d65 6e74 732e 6c6f 6722  e_statments.log"
-0001e7f0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001e800: 2020 2020 2020 2073 6875 7469 6c2e 6d6f         shutil.mo
-0001e810: 7665 2870 6174 6820 2b20 2269 6e63 6f6d  ve(path + "incom
-0001e820: 655f 7374 6174 6d65 6e74 732e 6175 7822  e_statments.aux"
-0001e830: 2c20 7061 7468 202b 2022 6669 6c65 735c  , path + "files\
-0001e840: 5c5c 6d69 6e63 6f6d 655f 7374 6174 6d65  \\mincome_statme
-0001e850: 6e74 732e 6175 7822 290d 0a20 2020 2020  nts.aux")..     
-0001e860: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001e870: 6875 7469 6c2e 6d6f 7665 2870 6174 6820  hutil.move(path 
-0001e880: 2b20 2269 6e63 6f6d 655f 7374 6174 6d65  + "income_statme
-0001e890: 6e74 732e 7064 6622 2c20 7061 7468 202b  nts.pdf", path +
-0001e8a0: 2022 6669 6c65 735c 5c69 6e63 6f6d 655f   "files\\income_
-0001e8b0: 7374 6174 6d65 6e74 732e 7064 6622 290d  statments.pdf").
-0001e8c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e8d0: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-0001e8e0: 286d 6573 7361 6765 3d22 5465 5820 4669  (message="TeX Fi
-0001e8f0: 6c65 2063 7265 6174 6564 2069 6e20 2573  le created in %s
-0001e900: 2220 2520 7061 7468 202b 2022 5c5c 6669  " % path + "\\fi
-0001e910: 6c65 7322 202c 7469 746c 653d 2253 7563  les" ,title="Suc
-0001e920: 6365 7373 2229 0d0a 0d0a 2020 2020 2020  cess")....      
-0001e930: 2020 2020 2020 2020 2020 6578 6365 7074            except
-0001e940: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-0001e950: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001e960: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-0001e970: 7928 6d65 7373 6167 653d 7374 7228 652e  y(message=str(e.
-0001e980: 5f5f 636f 6e74 6578 745f 5f29 202b 2022  __context__) + "
-0001e990: 5c6e 2220 2b20 7374 7228 6529 2c20 7469  \n" + str(e), ti
-0001e9a0: 746c 653d 652e 5f5f 636c 6173 735f 5f2e  tle=e.__class__.
-0001e9b0: 5f5f 6e61 6d65 5f5f 290d 0a0d 0a0d 0a20  __name__)...... 
-0001e9c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0001e9d0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-0001e9e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001e9f0: 6e6f 7469 6679 286d 6573 7361 6765 3d73  notify(message=s
-0001ea00: 7472 2865 2e5f 5f63 6f6e 7465 7874 5f5f  tr(e.__context__
-0001ea10: 2920 2b20 225c 6e22 202b 2073 7472 2865  ) + "\n" + str(e
-0001ea20: 292c 2074 6974 6c65 3d65 2e5f 5f63 6c61  ), title=e.__cla
-0001ea30: 7373 5f5f 2e5f 5f6e 616d 655f 5f29 0d0a  ss__.__name__)..
-0001ea40: 0d0a 2020 2020 6465 6620 6164 645f 6865  ..    def add_he
-0001ea50: 6c70 6572 2873 656c 6629 3a0d 0a20 2020  lper(self):..   
-0001ea60: 2020 2020 206e 6577 5f6e 616d 6520 3d20       new_name = 
-0001ea70: 7365 6c66 2e48 656c 7065 724e 616d 6545  self.HelperNameE
-0001ea80: 6469 742e 7465 7874 2829 0d0a 2020 2020  dit.text()..    
-0001ea90: 2020 2020 2320 544f 444f 2061 6464 2073      # TODO add s
-0001eaa0: 6563 7572 6974 7920 6d65 6368 616e 6973  ecurity mechanis
-0001eab0: 6d20 746f 2061 766f 6964 206f 7665 7277  m to avoid overw
-0001eac0: 7269 7469 6e67 2061 6e20 6167 656e 740d  riting an agent.
-0001ead0: 0a20 2020 2020 2020 2069 6620 6e65 775f  .        if new_
-0001eae0: 6e61 6d65 203d 3d20 2222 3a0d 0a20 2020  name == "":..   
-0001eaf0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0001eb00: 7469 6679 2822 506c 6561 7365 2065 6e74  tify("Please ent
-0001eb10: 6572 2061 2076 616c 6964 206e 616d 6522  er a valid name"
-0001eb20: 2c20 7469 746c 653d 2249 424d 2045 7272  , title="IBM Err
-0001eb30: 6f72 2229 0d0a 2020 2020 2020 2020 656c  or")..        el
-0001eb40: 6966 206e 6f74 206e 6577 5f6e 616d 655b  if not new_name[
-0001eb50: 305d 2e69 7375 7070 6572 2829 3a0d 0a20  0].isupper():.. 
-0001eb60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001eb70: 6e6f 7469 6679 2822 506c 6561 7365 2065  notify("Please e
-0001eb80: 6e74 6572 2061 2076 616c 6964 206e 616d  nter a valid nam
-0001eb90: 6520 7769 7468 5c6e 7570 7065 7263 6173  e with\nuppercas
-0001eba0: 6520 6669 7273 7420 6c65 7474 6572 206f  e first letter o
-0001ebb0: 7220 6361 6d65 6c63 6173 652c 2065 2e67  r camelcase, e.g
-0001ebc0: 2e20 274d 7941 6765 6e74 2722 2c20 7469  . 'MyAgent'", ti
-0001ebd0: 746c 653d 2249 424d 2045 7272 6f72 2229  tle="IBM Error")
-0001ebe0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-0001ebf0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0001ec00: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
-0001ec10: 5f61 6765 6e74 286e 6577 5f6e 616d 6529  _agent(new_name)
-0001ec20: 0d0a 0d0a 2020 2020 6465 6620 7265 6d6f  ....    def remo
-0001ec30: 7665 5f68 656c 7065 7228 7365 6c66 293a  ve_helper(self):
-0001ec40: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-0001ec50: 7261 7763 616e 7661 732e 7265 6d6f 7665  rawcanvas.remove
-0001ec60: 5f61 6765 6e74 2829 0d0a 0d0a 2020 2020  _agent()....    
-0001ec70: 6465 6620 6164 645f 6e65 7728 7365 6c66  def add_new(self
-0001ec80: 293a 0d0a 0d0a 2020 2020 2020 2020 2320  ):....        # 
-0001ec90: 544f 444f 2061 7373 6572 7420 7468 6174  TODO assert that
-0001eca0: 2071 7561 6e74 6974 7920 6973 206e 6f74   quantity is not
-0001ecb0: 2079 6574 2069 6e20 616e 7920 6f74 6865   yet in any othe
-0001ecc0: 7220 7472 616e 7361 6374 696f 6e0d 0a20  r transaction.. 
-0001ecd0: 2020 2020 2020 2073 656c 662e 6d61 6465         self.made
-0001ece0: 5f63 6861 6e67 6573 203d 2046 616c 7365  _changes = False
-0001ecf0: 0d0a 0d0a 0d0a 2020 2020 2020 2020 6e65  ......        ne
-0001ed00: 775f 656e 7472 7920 3d20 7b7d 0d0a 0d0a  w_entry = {}....
-0001ed10: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
-0001ed20: 795b 2261 3122 5d20 3d20 7365 6c66 2e41  y["a1"] = self.A
-0001ed30: 7373 6574 4c69 7374 4c65 6674 2e74 6f50  ssetListLeft.toP
-0001ed40: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
-0001ed50: 2020 2020 6e65 775f 656e 7472 795b 2261      new_entry["a
-0001ed60: 3222 5d20 3d20 7365 6c66 2e41 7373 6574  2"] = self.Asset
-0001ed70: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
-0001ed80: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
-0001ed90: 206e 6577 5f65 6e74 7279 5b22 6c31 225d   new_entry["l1"]
-0001eda0: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
-0001edb0: 794c 6973 744c 6566 742e 746f 506c 6169  yListLeft.toPlai
-0001edc0: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
-0001edd0: 206e 6577 5f65 6e74 7279 5b22 6c32 225d   new_entry["l2"]
-0001ede0: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
-0001edf0: 794c 6973 7452 6967 6874 2e74 6f50 6c61  yListRight.toPla
-0001ee00: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
-0001ee10: 2020 6e65 775f 656e 7472 795b 2265 3122    new_entry["e1"
-0001ee20: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
-0001ee30: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
-0001ee40: 6578 7428 290d 0a20 2020 2020 2020 206e  ext()..        n
-0001ee50: 6577 5f65 6e74 7279 5b22 6532 225d 203d  ew_entry["e2"] =
-0001ee60: 2073 656c 662e 4571 7569 7479 4c69 7374   self.EquityList
-0001ee70: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
-0001ee80: 7428 290d 0a0d 0a20 2020 2020 2020 2023  t()....        #
-0001ee90: 206e 6577 5f65 6e74 7279 5b22 6131 225d   new_entry["a1"]
-0001eea0: 203d 2073 656c 662e 4173 7365 744c 6973   = self.AssetLis
-0001eeb0: 744c 6566 742e 746f 506c 6169 6e54 6578  tLeft.toPlainTex
-0001eec0: 7428 290d 0a20 2020 2020 2020 2023 206e  t()..        # n
-0001eed0: 6577 5f65 6e74 7279 5b22 6c31 225d 203d  ew_entry["l1"] =
-0001eee0: 2073 656c 662e 4c69 6162 696c 6974 794c   self.LiabilityL
-0001eef0: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
-0001ef00: 6578 7428 290d 0a20 2020 2020 2020 2023  ext()..        #
-0001ef10: 206e 6577 5f65 6e74 7279 5b22 6132 225d   new_entry["a2"]
-0001ef20: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
-0001ef30: 794c 6973 7452 6967 6874 2e74 6f50 6c61  yListRight.toPla
-0001ef40: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
-0001ef50: 2020 2320 6e65 775f 656e 7472 795b 226c    # new_entry["l
-0001ef60: 3222 5d20 3d20 7365 6c66 2e41 7373 6574  2"] = self.Asset
-0001ef70: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
-0001ef80: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
-0001ef90: 2023 206e 6577 5f65 6e74 7279 5b22 6531   # new_entry["e1
-0001efa0: 225d 203d 2073 656c 662e 4571 7569 7479  "] = self.Equity
-0001efb0: 4c69 7374 4c65 6674 2e74 6f50 6c61 696e  ListLeft.toPlain
-0001efc0: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
-0001efd0: 2320 6e65 775f 656e 7472 795b 2265 3222  # new_entry["e2"
-0001efe0: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
-0001eff0: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
-0001f000: 5465 7874 2829 0d0a 0d0a 2020 2020 2020  Text()....      
-0001f010: 2020 6e65 775f 656e 7472 795b 2261 6765    new_entry["age
-0001f020: 6e74 3122 5d20 3d20 6361 6d65 6c28 7365  nt1"] = camel(se
-0001f030: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
-0001f040: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
-0001f050: 7a65 2829 0d0a 2020 2020 2020 2020 6e65  ze()..        ne
-0001f060: 775f 656e 7472 795b 2261 6765 6e74 3222  w_entry["agent2"
-0001f070: 5d20 3d20 6361 6d65 6c28 7365 6c66 2e61  ] = camel(self.a
-0001f080: 6765 6e74 3245 6469 742e 7465 7874 2829  gent2Edit.text()
-0001f090: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
-0001f0a0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-0001f0b0: 2e61 6765 6e74 3145 6469 742e 7365 7454  .agent1Edit.setT
-0001f0c0: 6578 7428 6361 6d65 6c28 7365 6c66 2e61  ext(camel(self.a
-0001f0d0: 6765 6e74 3145 6469 742e 7465 7874 2829  gent1Edit.text()
-0001f0e0: 2929 2023 202e 6361 7069 7461 6c69 7a65  )) # .capitalize
-0001f0f0: 2829 290d 0a20 2020 2020 2020 2073 656c  ())..        sel
-0001f100: 662e 6167 656e 7432 4564 6974 2e73 6574  f.agent2Edit.set
-0001f110: 5465 7874 2863 616d 656c 2873 656c 662e  Text(camel(self.
-0001f120: 6167 656e 7432 4564 6974 2e74 6578 7428  agent2Edit.text(
-0001f130: 2929 2920 232e 6361 7069 7461 6c69 7a65  ))) #.capitalize
-0001f140: 2829 290d 0a0d 0a20 2020 2020 2020 2069  ())....        i
-0001f150: 6620 6e6f 7420 7365 6c66 2e64 7261 7763  f not self.drawc
-0001f160: 616e 7661 732e 6368 6563 6b5f 6578 6973  anvas.check_exis
-0001f170: 7428 6e65 775f 656e 7472 795b 2261 6765  t(new_entry["age
-0001f180: 6e74 3122 5d29 3a0d 0a20 2020 2020 2020  nt1"]):..       
-0001f190: 2020 2020 2069 6620 6e65 775f 656e 7472       if new_entr
-0001f1a0: 795b 2261 6765 6e74 3122 5d20 213d 2022  y["agent1"] != "
-0001f1b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0001f1c0: 2020 2020 7965 7320 3d20 2073 656c 662e      yes =  self.
-0001f1d0: 6173 6b5f 7175 6573 7469 6f6e 2827 272c  ask_question('',
-0001f1e0: 2254 6865 2061 6765 6e74 2025 7320 646f  "The agent %s do
-0001f1f0: 6573 206e 6f74 2065 7869 7374 2e5c 6e44  es not exist.\nD
-0001f200: 6f20 796f 7520 7769 7368 2074 6f20 636f  o you wish to co
-0001f210: 6e74 696e 7565 2061 6e64 2061 7574 6f6d  ntinue and autom
-0001f220: 6174 6963 616c 6c79 2063 7265 6174 6520  atically create 
-0001f230: 6120 6e65 7720 6167 656e 743f 2225 6e65  a new agent?"%ne
-0001f240: 775f 656e 7472 795b 2261 6765 6e74 3122  w_entry["agent1"
-0001f250: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-0001f260: 2020 2020 6966 206e 6f74 2079 6573 3a0d      if not yes:.
-0001f270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f280: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-0001f290: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-0001f2a0: 6c66 2e64 7261 7763 616e 7661 732e 6368  lf.drawcanvas.ch
-0001f2b0: 6563 6b5f 6578 6973 7428 6e65 775f 656e  eck_exist(new_en
-0001f2c0: 7472 795b 2261 6765 6e74 3222 5d29 3a0d  try["agent2"]):.
-0001f2d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001f2e0: 6e65 775f 656e 7472 795b 2261 6765 6e74  new_entry["agent
-0001f2f0: 3222 5d20 213d 2022 223a 0d0a 2020 2020  2"] != "":..    
-0001f300: 2020 2020 2020 2020 2020 2020 7965 7320              yes 
-0001f310: 3d20 2073 656c 662e 6173 6b5f 7175 6573  =  self.ask_ques
-0001f320: 7469 6f6e 2827 272c 2022 5468 6520 6167  tion('', "The ag
-0001f330: 656e 7420 2573 2064 6f65 7320 6e6f 7420  ent %s does not 
-0001f340: 6578 6973 742e 5c6e 446f 2079 6f75 2077  exist.\nDo you w
-0001f350: 6973 6820 746f 2063 6f6e 7469 6e75 6520  ish to continue 
-0001f360: 616e 6420 6175 746f 6d61 7469 6361 6c6c  and automaticall
-0001f370: 7920 6372 6561 7465 2061 206e 6577 2061  y create a new a
-0001f380: 6765 6e74 3f22 256e 6577 5f65 6e74 7279  gent?"%new_entry
-0001f390: 5b22 6167 656e 7432 225d 290d 0a20 2020  ["agent2"])..   
-0001f3a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001f3b0: 6e6f 7420 7965 733a 0d0a 2020 2020 2020  not yes:..      
-0001f3c0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001f3d0: 7475 726e 0d0a 0d0a 0d0a 2020 2020 2020  turn......      
-0001f3e0: 2020 626f 7831 203d 2073 656c 662e 6472    box1 = self.dr
-0001f3f0: 6177 6361 6e76 6173 2e61 6464 5f61 6765  awcanvas.add_age
-0001f400: 6e74 286e 6577 5f65 6e74 7279 5b22 6167  nt(new_entry["ag
-0001f410: 656e 7431 225d 290d 0a20 2020 2020 2020  ent1"])..       
-0001f420: 2062 6f78 3220 3d20 7365 6c66 2e64 7261   box2 = self.dra
-0001f430: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
-0001f440: 7428 6e65 775f 656e 7472 795b 2261 6765  t(new_entry["age
-0001f450: 6e74 3222 5d29 0d0a 0d0a 2020 2020 2020  nt2"])....      
-0001f460: 2020 6d79 5f69 7465 6d73 203d 205b 5d0d    my_items = [].
-0001f470: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-0001f480: 6e65 775f 656e 7472 790d 0a20 2020 2020  new_entry..     
-0001f490: 2020 2061 6c6c 656e 7472 6965 7320 3d20     allentries = 
-0001f4a0: 225c 6e22 2e6a 6f69 6e28 5b64 6174 615b  "\n".join([data[
-0001f4b0: 226c 3122 5d2c 2064 6174 615b 2261 3122  "l1"], data["a1"
-0001f4c0: 5d2c 2064 6174 615b 2265 3122 5d2c 2064  ], data["e1"], d
-0001f4d0: 6174 615b 226c 3222 5d2c 2064 6174 615b  ata["l2"], data[
-0001f4e0: 2261 3222 5d2c 2064 6174 615b 2265 3222  "a2"], data["e2"
-0001f4f0: 5d5d 290d 0a20 2020 2020 2020 2066 6f72  ]])..        for
-0001f500: 2073 7562 5f69 7465 6d20 696e 2061 6c6c   sub_item in all
-0001f510: 656e 7472 6965 732e 7370 6c69 7428 225c  entries.split("\
-0001f520: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-0001f530: 2020 666f 7220 7375 625f 656e 7472 7920    for sub_entry 
-0001f540: 696e 2073 7562 5f69 7465 6d2e 7370 6c69  in sub_item.spli
-0001f550: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
-0001f560: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
-0001f570: 3d20 7375 625f 656e 7472 792e 7265 706c  = sub_entry.repl
-0001f580: 6163 6528 222d 222c 2222 292e 7265 706c  ace("-","").repl
-0001f590: 6163 6528 222b 222c 2222 292e 7374 7269  ace("+","").stri
-0001f5a0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-0001f5b0: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
-0001f5c0: 2020 2222 3a0d 0a20 2020 2020 2020 2020    "":..         
-0001f5d0: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
-0001f5e0: 656d 732e 6170 7065 6e64 2865 6e74 7279  ems.append(entry
-0001f5f0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-0001f600: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
-0001f610: 5f63 6f6e 6e65 6374 696f 6e28 626f 7831  _connection(box1
-0001f620: 2c20 626f 7832 2c20 6e61 6d65 3d20 7374  , box2, name= st
-0001f630: 7228 7365 6c66 2e65 6469 7453 686f 7274  r(self.editShort
-0001f640: 6e61 6d65 2e74 6578 7428 2929 2c73 7562  name.text()),sub
-0001f650: 6a65 6374 3d73 656c 662e 6564 6974 5375  ject=self.editSu
-0001f660: 626a 6563 742e 7465 7874 2829 2c69 7465  bject.text(),ite
-0001f670: 6d73 3d6d 795f 6974 656d 7329 0d0a 0d0a  ms=my_items)....
-0001f680: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
-0001f690: 795b 2275 6e69 2d64 6972 6563 7469 6f6e  y["uni-direction
-0001f6a0: 616c 225d 203d 205c 0d0a 2020 2020 2020  al"] = \..      
-0001f6b0: 2020 2020 2020 7374 7228 7365 6c66 2e63        str(self.c
-0001f6c0: 6f6d 626f 556e 6964 6972 2e63 7572 7265  omboUnidir.curre
-0001f6d0: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
-0001f6e0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001f6f0: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
-0001f700: 5d20 3d20 5c0d 0a20 2020 2020 2020 2020  ] = \..         
-0001f710: 2020 2073 656c 662e 7265 6769 7374 6572     self.register
-0001f720: 466c 6f77 426f 782e 6375 7272 656e 7454  FlowBox.currentT
-0001f730: 6578 7428 290d 0a0d 0a20 2020 2020 2020  ext()....       
-0001f740: 206e 6577 5f65 6e74 7279 5b22 6361 7368   new_entry["cash
-0001f750: 666c 6f77 3122 5d20 3d20 5c0d 0a20 2020  flow1"] = \..   
-0001f760: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
-0001f770: 662e 636f 6d62 6f43 6173 684c 6566 742e  f.comboCashLeft.
-0001f780: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
-0001f790: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
-0001f7a0: 795b 2263 6173 6866 6c6f 7732 225d 203d  y["cashflow2"] =
-0001f7b0: 205c 0d0a 2020 2020 2020 2020 2020 2020   \..            
-0001f7c0: 7374 7228 7365 6c66 2e63 6f6d 626f 4361  str(self.comboCa
-0001f7d0: 7368 5269 6768 742e 6375 7272 656e 7454  shRight.currentT
-0001f7e0: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
-0001f7f0: 2020 6e65 775f 656e 7472 795b 226b 696e    new_entry["kin
-0001f800: 6422 5d20 3d20 5c0d 0a20 2020 2020 2020  d"] = \..       
-0001f810: 2020 2020 2073 7472 2873 656c 662e 6564       str(self.ed
-0001f820: 6974 5479 7065 2e63 7572 7265 6e74 5465  itType.currentTe
-0001f830: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0001f840: 206e 6577 5f65 6e74 7279 5b22 696e 636f   new_entry["inco
-0001f850: 6d65 3122 5d20 3d20 5c0d 0a20 2020 2020  me1"] = \..     
-0001f860: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
-0001f870: 636f 6d62 6f49 6e63 6f6d 654c 6566 742e  comboIncomeLeft.
-0001f880: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
-0001f890: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
-0001f8a0: 795b 2269 6e63 6f6d 6532 225d 203d 205c  y["income2"] = \
-0001f8b0: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-0001f8c0: 7228 7365 6c66 2e63 6f6d 626f 496e 636f  r(self.comboInco
-0001f8d0: 6d65 5269 6768 742e 6375 7272 656e 7454  meRight.currentT
-0001f8e0: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
-0001f8f0: 2020 6e65 775f 656e 7472 795b 2271 7561    new_entry["qua
-0001f900: 6e74 6974 7922 5d20 3d20 5c0d 0a20 2020  ntity"] = \..   
-0001f910: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
-0001f920: 662e 6564 6974 5175 616e 7469 7479 2e74  f.editQuantity.t
-0001f930: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
-0001f940: 2020 6e65 775f 656e 7472 795b 2273 7562    new_entry["sub
-0001f950: 6a65 6374 225d 203d 205c 0d0a 2020 2020  ject"] = \..    
-0001f960: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0001f970: 2e65 6469 7453 7562 6a65 6374 2e74 6578  .editSubject.tex
-0001f980: 7428 2929 0d0a 0d0a 2020 2020 2020 2020  t())....        
-0001f990: 6e65 775f 656e 7472 795b 2273 686f 7274  new_entry["short
-0001f9a0: 6e61 6d65 225d 203d 205c 0d0a 2020 2020  name"] = \..    
-0001f9b0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0001f9c0: 2e65 6469 7453 686f 7274 6e61 6d65 2e74  .editShortname.t
-0001f9d0: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
-0001f9e0: 2020 6e65 775f 656e 7472 795b 2264 6573    new_entry["des
-0001f9f0: 6372 6970 7469 6f6e 225d 203d 205c 0d0a  cription"] = \..
-0001fa00: 2020 2020 2020 2020 2020 2020 7374 7228              str(
-0001fa10: 7365 6c66 2e65 6469 7444 6573 6372 6970  self.editDescrip
-0001fa20: 7469 6f6e 2e74 6578 7428 2929 0d0a 0d0a  tion.text())....
-0001fa30: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-0001fa40: 7279 5f64 6174 612e 6170 7065 6e64 286e  ry_data.append(n
-0001fa50: 6577 5f65 6e74 7279 290d 0a20 2020 2020  ew_entry)..     
-0001fa60: 2020 2073 656c 662e 7570 6461 7465 5f74     self.update_t
-0001fa70: 6162 6c65 2829 0d0a 0d0a 0d0a 0d0a 2020  able()........  
-0001fa80: 2020 2020 2020 6461 726b 4d6f 6465 203d        darkMode =
-0001fa90: 2054 7275 650d 0a20 2020 2020 2020 2074   True..        t
-0001faa0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-0001fab0: 2069 6620 7365 6c66 2e74 6865 6d65 5f6d   if self.theme_m
-0001fac0: 616e 6167 6572 2e74 6865 6d65 203d 3d20  anager.theme == 
-0001fad0: 2262 7269 6768 7422 3a0d 0a20 2020 2020  "bright":..     
-0001fae0: 2020 2020 2020 2020 2020 2064 6172 6b4d             darkM
-0001faf0: 6f64 6520 3d20 4661 6c73 650d 0a20 2020  ode = False..   
-0001fb00: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
-0001fb10: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
-0001fb20: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-0001fb30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001fb40: 2e73 656c 6563 7469 6f6e 5f69 6478 203d  .selection_idx =
-0001fb50: 206c 656e 2873 656c 662e 656e 7472 795f   len(self.entry_
-0001fb60: 6461 7461 292d 310d 0a20 2020 2020 2020  data)-1..       
-0001fb70: 2020 2020 2073 656c 662e 726f 775f 7365       self.row_se
-0001fb80: 6c65 6374 2873 656c 662e 7365 6c65 6374  lect(self.select
-0001fb90: 696f 6e5f 6964 7829 0d0a 2020 2020 2020  ion_idx)..      
-0001fba0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-0001fbb0: 6f6e 2061 7320 6520 3a0d 0a20 2020 2020  on as e :..     
-0001fbc0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-0001fbd0: 6679 2822 4552 524f 523a 2220 2b20 7472  fy("ERROR:" + tr
-0001fbe0: 2865 292c 7469 746c 653d 2245 7272 6f72  (e),title="Error
-0001fbf0: 2229 0d0a 0d0a 2020 2020 2020 2020 2222  ")....        ""
-0001fc00: 220d 0a20 2020 2020 2020 2069 6620 7365  "..        if se
-0001fc10: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0001fc20: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-0001fc30: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0001fc40: 2069 6e20 7261 6e67 6528 7365 6c66 2e74   in range(self.t
-0001fc50: 7261 6e73 6163 7469 6f6e 5669 6577 2e63  ransactionView.c
-0001fc60: 6f6c 756d 6e43 6f75 6e74 2829 293a 0d0a  olumnCount()):..
-0001fc70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fc80: 2020 6966 2064 6172 6b4d 6f64 653a 0d0a    if darkMode:..
-0001fc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fca0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0001fcb0: 7469 6f6e 5669 6577 2e69 7465 6d28 7365  tionView.item(se
-0001fcc0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0001fcd0: 2c20 6929 2e73 6574 4261 636b 6772 6f75  , i).setBackgrou
-0001fce0: 6e64 2851 7447 7569 2e51 436f 6c6f 7228  nd(QtGui.QColor(
-0001fcf0: 3231 2c20 3231 2c20 3231 2929 0d0a 2020  21, 21, 21))..  
-0001fd00: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0001fd10: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0001fd20: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0001fd30: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
-0001fd40: 656d 2873 656c 662e 7365 6c65 6374 696f  em(self.selectio
-0001fd50: 6e5f 6964 782c 2069 292e 7365 7442 6163  n_idx, i).setBac
-0001fd60: 6b67 726f 756e 6428 5174 4775 692e 5143  kground(QtGui.QC
-0001fd70: 6f6c 6f72 2832 3333 2c20 3233 342c 2032  olor(233, 234, 2
-0001fd80: 3237 2929 0d0a 0d0a 2020 2020 2020 2020  27))....        
-0001fd90: 2020 2020 7365 6c66 2e73 656c 6563 7469      self.selecti
-0001fda0: 6f6e 5f69 6478 203d 2073 656c 662e 7472  on_idx = self.tr
-0001fdb0: 616e 7361 6374 696f 6e56 6965 772e 726f  ansactionView.ro
-0001fdc0: 7743 6f75 6e74 2829 2d31 0d0a 2020 2020  wCount()-1..    
-0001fdd0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-0001fde0: 2072 616e 6765 2873 656c 662e 7472 616e   range(self.tran
-0001fdf0: 7361 6374 696f 6e56 6965 772e 636f 6c75  sactionView.colu
-0001fe00: 6d6e 436f 756e 7428 2929 3a0d 0a20 2020  mnCount()):..   
-0001fe10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001fe20: 6461 726b 4d6f 6465 3a0d 0a20 2020 2020  darkMode:..     
-0001fe30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001fe40: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0001fe50: 6965 772e 6974 656d 2873 656c 662e 7365  iew.item(self.se
-0001fe60: 6c65 6374 696f 6e5f 6964 782c 2069 292e  lection_idx, i).
-0001fe70: 7365 7442 6163 6b67 726f 756e 6428 5174  setBackground(Qt
-0001fe80: 4775 692e 5143 6f6c 6f72 2831 382c 2031  Gui.QColor(18, 1
-0001fe90: 382c 2031 3829 290d 0a20 2020 2020 2020  8, 18))..       
-0001fea0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0001feb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fec0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0001fed0: 7469 6f6e 5669 6577 2e69 7465 6d28 7365  tionView.item(se
-0001fee0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0001fef0: 2c20 6929 2e73 6574 4261 636b 6772 6f75  , i).setBackgrou
-0001ff00: 6e64 2851 7447 7569 2e51 436f 6c6f 7228  nd(QtGui.QColor(
-0001ff10: 3135 392c 2031 3539 2c20 3135 3929 290d  159, 159, 159)).
-0001ff20: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-0001ff30: 0d0a 0d0a 0d0a 2020 2020 6465 6620 676f  ......    def go
-0001ff40: 746f 5f6e 6578 7428 7365 6c66 293a 0d0a  to_next(self):..
-0001ff50: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-0001ff60: 0d0a 2020 2020 6465 6620 7564 7061 7465  ..    def udpate
-0001ff70: 5f64 6973 706c 6179 2873 656c 6629 3a0d  _display(self):.
-0001ff80: 0a20 2020 2020 2020 2074 7279 3a0d 0a0d  .        try:...
-0001ff90: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-0001ffa0: 656e 616d 6520 3d20 7365 6c66 2e66 696c  ename = self.fil
-0001ffb0: 656e 616d 650d 0a0d 0a20 2020 2020 2020  ename....       
-0001ffc0: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-0001ffd0: 696c 656e 616d 652c 2027 7227 2920 6173  ilename, 'r') as
-0001ffe0: 2073 7472 6561 6d3a 0d0a 2020 2020 2020   stream:..      
-0001fff0: 2020 2020 2020 2020 2020 6669 6c65 6461            fileda
-00020000: 7461 203d 2079 616d 6c2e 7361 6665 5f6c  ta = yaml.safe_l
-00020010: 6f61 6428 7374 7265 616d 290d 0a20 2020  oad(stream)..   
-00020020: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00020030: 6e74 2866 696c 6564 6174 6129 0d0a 0d0a  nt(filedata)....
-00020040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020050: 7365 6c66 2e61 6765 6e74 314c 6162 656c  self.agent1Label
-00020060: 2e74 6578 7420 3d20 6669 6c65 6461 7461  .text = filedata
-00020070: 5b22 6167 656e 7431 225d 0d0a 2020 2020  ["agent1"]..    
-00020080: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00020090: 2e61 6765 6e74 324c 6162 656c 2e74 6578  .agent2Label.tex
-000200a0: 7420 3d20 6669 6c65 6461 7461 5b22 6167  t = filedata["ag
-000200b0: 656e 7432 225d 0d0a 0d0a 2020 2020 2020  ent2"]....      
-000200c0: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
-000200d0: 2e61 312e 7661 6c75 6520 3d20 6669 6c65  .a1.value = file
-000200e0: 6461 7461 5b22 6131 225d 2020 2320 2b20  data["a1"]  # + 
-000200f0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-00020100: 2020 2020 2020 2320 7365 6c66 2e65 312e        # self.e1.
-00020110: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
-00020120: 5b22 6531 225d 2020 2320 2b20 225c 6e22  ["e1"]  # + "\n"
-00020130: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020140: 2020 2320 7365 6c66 2e6c 312e 7661 6c75    # self.l1.valu
-00020150: 6520 3d20 6669 6c65 6461 7461 5b22 6c31  e = filedata["l1
-00020160: 225d 2020 2320 2b20 225c 6e22 0d0a 2020  "]  # + "\n"..  
-00020170: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00020180: 7365 6c66 2e61 322e 7661 6c75 6520 3d20  self.a2.value = 
-00020190: 6669 6c65 6461 7461 5b22 6132 225d 2020  filedata["a2"]  
-000201a0: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
-000201b0: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
-000201c0: 2e65 322e 7661 6c75 6520 3d20 6669 6c65  .e2.value = file
-000201d0: 6461 7461 5b22 6532 225d 2020 2320 2b20  data["e2"]  # + 
-000201e0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-000201f0: 2020 2020 2020 2320 7365 6c66 2e6c 322e        # self.l2.
-00020200: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
-00020210: 5b22 6c32 225d 2020 2320 2b20 225c 6e22  ["l2"]  # + "\n"
-00020220: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00020230: 2020 2020 2320 6966 2022 7368 6f72 746e      # if "shortn
-00020240: 616d 6522 2069 6e20 6669 6c65 6461 7461  ame" in filedata
-00020250: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00020260: 2020 2023 2020 2020 7365 6c66 2e70 6172     #    self.par
-00020270: 656e 742e 7368 6f72 746e 616d 652e 7661  ent.shortname.va
-00020280: 6c75 6520 3d20 6669 6c65 6461 7461 5b22  lue = filedata["
-00020290: 7368 6f72 746e 616d 6522 5d0d 0a0d 0a20  shortname"].... 
-000202a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000202b0: 2069 6620 2275 6e69 2d64 6972 6563 7469   if "uni-directi
-000202c0: 6f6e 616c 2220 696e 2066 696c 6564 6174  onal" in filedat
-000202d0: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-000202e0: 2020 2020 2320 2020 2073 656c 662e 7061      #    self.pa
-000202f0: 7265 6e74 2e64 6972 6563 7469 6f6e 5f63  rent.direction_c
-00020300: 6865 636b 2e76 616c 7565 203d 2062 6f6f  heck.value = boo
-00020310: 6c28 7374 7228 6669 6c65 6461 7461 5b22  l(str(filedata["
-00020320: 756e 692d 6469 7265 6374 696f 6e61 6c22  uni-directional"
-00020330: 5d29 290d 0a20 2020 2020 2020 2020 2020  ]))..           
-00020340: 2020 2020 2023 2065 6c73 653a 0d0a 2020       # else:..  
+0001e2b0: 2020 2020 2020 2020 2020 2020 696e 636f              inco
+0001e2c0: 6d65 5f73 7472 202b 3d20 225c 7422 202b  me_str += "\t" +
+0001e2d0: 2022 7e26 2220 2b20 7375 625f 7661 6c75   "~&" + sub_valu
+0001e2e0: 655b 305d 202b 2073 7562 5f76 616c 7565  e[0] + sub_value
+0001e2f0: 5b31 5d20 2b20 225c 5c5c 5c5c 6e22 0d0a  [1] + "\\\\\n"..
+0001e300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e310: 2020 2020 2020 2020 6966 206c 656e 2876          if len(v
+0001e320: 2920 3d3d 2030 3a0d 0a20 2020 2020 2020  ) == 0:..       
+0001e330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e340: 2020 2020 2069 6e63 6f6d 655f 7374 7220       income_str 
+0001e350: 2b3d 2022 5c74 2220 2b20 227e 2622 202b  += "\t" + "~&" +
+0001e360: 2022 2e2d 2220 2b20 225c 5c5c 5c5c 6e22   ".-" + "\\\\\n"
+0001e370: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001e380: 2020 2020 2020 2020 2020 2020 6966 206b              if k
+0001e390: 2021 3d20 224e 6f6e 7461 7861 626c 6520   != "Nontaxable 
+0001e3a0: 4c6f 7373 6573 223a 0d0a 2020 2020 2020  Losses":..      
+0001e3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e3c0: 2020 2020 2020 696e 636f 6d65 5f73 7472        income_str
+0001e3d0: 202b 3d20 227e 267e 5c5c 5c5c 5c68 6c69   += "~&~\\\\\hli
+0001e3e0: 6e65 5c6e 220d 0a0d 0a20 2020 2020 2020  ne\n"....       
+0001e3f0: 2020 2020 2020 2020 2020 2020 2069 6e63               inc
+0001e400: 6f6d 655f 7374 7220 2b3d 2022 2222 5c6e  ome_str += """\n
+0001e410: 0d0a 2020 2020 2020 2020 2020 2020 7e26  ..            ~&
+0001e420: 7e5c 5c5c 5c5c 686c 696e 655c 6e5c 5c65  ~\\\\\hline\n\\e
+0001e430: 6e64 7b74 6162 756c 6172 7d22 2222 0d0a  nd{tabular}"""..
+0001e440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e450: 2020 2020 696e 636f 6d65 5f73 7472 202b      income_str +
+0001e460: 3d20 2222 225c 6e0d 0a20 2020 2020 2020  = """\n..       
+0001e470: 2020 2020 205c 5c63 6170 7469 6f6e 7b49       \\caption{I
+0001e480: 6e63 6f6d 6520 5374 6174 656d 656e 7420  ncome Statement 
+0001e490: 6f66 2025 737d 2222 2220 2520 6167 656e  of %s}""" % agen
+0001e4a0: 745f 7469 746c 6564 202b 2022 2222 0d0a  t_titled + """..
+0001e4b0: 2020 2020 2020 2020 2020 2020 5c5c 656e              \\en
+0001e4c0: 647b 7461 626c 657d 2222 220d 0a0d 0a20  d{table}""".... 
+0001e4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e4e0: 2020 2074 6578 7374 725f 636f 6d62 696e     texstr_combin
+0001e4f0: 6564 202b 3d20 696e 636f 6d65 5f73 7472  ed += income_str
+0001e500: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001e510: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  # ==============
+0001e520: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001e530: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001e540: 3d3d 3d3d 3d3d 3d3d 3d0d 0a20 2020 2020  =========..     
+0001e550: 2020 2020 2020 2070 7970 6572 636c 6970         pyperclip
+0001e560: 2e63 6f70 7928 7465 7873 7472 5f63 6f6d  .copy(texstr_com
+0001e570: 6269 6e65 6429 0d0a 2020 2020 2020 2020  bined)..        
+0001e580: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+0001e590: 6d65 7373 6167 653d 224c 6154 6558 2063  message="LaTeX c
+0001e5a0: 6f64 6520 636f 7069 6564 2074 6f20 636c  ode copied to cl
+0001e5b0: 6970 626f 6172 642e 2048 6176 6520 6675  ipboard. Have fu
+0001e5c0: 6e21 222c 2074 6974 6c65 3d22 4861 7665  n!", title="Have
+0001e5d0: 2066 756e 2229 0d0a 0d0a 2020 2020 2020   fun")....      
+0001e5e0: 2020 2020 2020 6966 2046 616c 7365 3a20        if False: 
+0001e5f0: 2320 6465 7072 6563 6961 7465 640d 0a0d  # depreciated...
+0001e600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e610: 2070 6174 6820 3d20 6f73 2e70 6174 682e   path = os.path.
+0001e620: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
+0001e630: 6162 7370 6174 6828 5f5f 6669 6c65 5f5f  abspath(__file__
+0001e640: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0001e650: 2020 2020 7769 7468 206f 7065 6e28 6f73      with open(os
+0001e660: 2e70 6174 682e 6a6f 696e 2870 6174 6820  .path.join(path 
+0001e670: 2c20 2266 696c 6573 2f69 6e63 6f6d 655f  , "files/income_
+0001e680: 7374 6174 6d65 6e74 732e 7465 7822 292c  statments.tex"),
+0001e690: 2022 7722 2920 6173 2066 696c 653a 0d0a   "w") as file:..
+0001e6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e6b0: 2020 2020 6669 6c65 2e77 7269 7465 2822      file.write("
+0001e6c0: 2222 0d0a 2020 2020 5c64 6f63 756d 656e  ""..    \documen
+0001e6d0: 7463 6c61 7373 7b61 7274 6963 6c65 7d0d  tclass{article}.
+0001e6e0: 0a20 2020 205c 5c75 7365 7061 636b 6167  .    \\usepackag
+0001e6f0: 657b 7461 6275 6c61 7278 7d0d 0a20 2020  e{tabularx}..   
+0001e700: 205c 5c75 7365 7061 636b 6167 657b 616d   \\usepackage{am
+0001e710: 736d 6174 687d 0d0a 2020 2020 5c5c 7573  smath}..    \\us
+0001e720: 6570 6163 6b61 6765 7b66 6c6f 6174 7d0d  epackage{float}.
+0001e730: 0a0d 0a20 2020 205c 5c62 6567 696e 7b64  ...    \\begin{d
+0001e740: 6f63 756d 656e 747d 0d0a 0d0a 2020 2020  ocument}....    
+0001e750: 2222 2229 0d0a 2020 2020 2020 2020 2020  """)..          
+0001e760: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
+0001e770: 7269 7465 2874 6578 7374 725f 636f 6d62  rite(texstr_comb
+0001e780: 696e 6564 290d 0a20 2020 2020 2020 2020  ined)..         
+0001e790: 2020 2020 2020 2020 2020 2066 696c 652e             file.
+0001e7a0: 7772 6974 6528 2222 220d 0a20 2020 205c  write("""..    \
+0001e7b0: 5c65 6e64 7b64 6f63 756d 656e 747d 0d0a  \end{document}..
+0001e7c0: 2020 2020 2222 2229 0d0a 0d0a 2020 2020      """)....    
+0001e7d0: 2020 2020 2020 2020 2020 2020 696d 706f              impo
+0001e7e0: 7274 2073 7562 7072 6f63 6573 730d 0a20  rt subprocess.. 
+0001e7f0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001e800: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
+0001e810: 2020 2020 2020 2020 2020 2070 6174 6820             path 
+0001e820: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+0001e830: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
+0001e840: 6828 5f5f 6669 6c65 5f5f 2929 0d0a 2020  h(__file__))..  
+0001e850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e860: 2020 7375 6270 726f 6365 7373 2e72 756e    subprocess.run
+0001e870: 2822 7064 666c 6174 6578 2025 7322 2025  ("pdflatex %s" %
+0001e880: 2028 6f73 2e70 6174 682e 6a6f 696e 2870   (os.path.join(p
+0001e890: 6174 682c 2022 6669 6c65 732f 696e 636f  ath, "files/inco
+0001e8a0: 6d65 5f73 7461 746d 656e 7473 2e74 6578  me_statments.tex
+0001e8b0: 2229 2929 2e63 6865 636b 5f72 6574 7572  "))).check_retur
+0001e8c0: 6e63 6f64 6528 290d 0a0d 0a20 2020 2020  ncode()....     
+0001e8d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e8e0: 6875 7469 6c2e 6d6f 7665 2870 6174 6820  hutil.move(path 
+0001e8f0: 2b20 2269 6e63 6f6d 655f 7374 6174 6d65  + "income_statme
+0001e900: 6e74 732e 7465 7822 2c20 7061 7468 202b  nts.tex", path +
+0001e910: 2022 6669 6c65 735c 5c69 6e63 6f6d 655f   "files\\income_
+0001e920: 7374 6174 6d65 6e74 732e 7465 7822 290d  statments.tex").
+0001e930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e940: 2020 2020 2073 6875 7469 6c2e 6d6f 7665       shutil.move
+0001e950: 2870 6174 6820 2b20 2269 6e63 6f6d 655f  (path + "income_
+0001e960: 7374 6174 6d65 6e74 732e 6c6f 6722 2c20  statments.log", 
+0001e970: 7061 7468 202b 2022 6669 6c65 735c 5c69  path + "files\\i
+0001e980: 6e63 6f6d 655f 7374 6174 6d65 6e74 732e  ncome_statments.
+0001e990: 6c6f 6722 290d 0a20 2020 2020 2020 2020  log")..         
+0001e9a0: 2020 2020 2020 2020 2020 2073 6875 7469             shuti
+0001e9b0: 6c2e 6d6f 7665 2870 6174 6820 2b20 2269  l.move(path + "i
+0001e9c0: 6e63 6f6d 655f 7374 6174 6d65 6e74 732e  ncome_statments.
+0001e9d0: 6175 7822 2c20 7061 7468 202b 2022 6669  aux", path + "fi
+0001e9e0: 6c65 735c 5c5c 6d69 6e63 6f6d 655f 7374  les\\\mincome_st
+0001e9f0: 6174 6d65 6e74 732e 6175 7822 290d 0a20  atments.aux").. 
+0001ea00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea10: 2020 2073 6875 7469 6c2e 6d6f 7665 2870     shutil.move(p
+0001ea20: 6174 6820 2b20 2269 6e63 6f6d 655f 7374  ath + "income_st
+0001ea30: 6174 6d65 6e74 732e 7064 6622 2c20 7061  atments.pdf", pa
+0001ea40: 7468 202b 2022 6669 6c65 735c 5c69 6e63  th + "files\\inc
+0001ea50: 6f6d 655f 7374 6174 6d65 6e74 732e 7064  ome_statments.pd
+0001ea60: 6622 290d 0a20 2020 2020 2020 2020 2020  f")..           
+0001ea70: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001ea80: 7469 6679 286d 6573 7361 6765 3d22 5465  tify(message="Te
+0001ea90: 5820 4669 6c65 2063 7265 6174 6564 2069  X File created i
+0001eaa0: 6e20 2573 2220 2520 7061 7468 202b 2022  n %s" % path + "
+0001eab0: 5c5c 6669 6c65 7322 202c 7469 746c 653d  \\files" ,title=
+0001eac0: 2253 7563 6365 7373 2229 0d0a 0d0a 2020  "Success")....  
+0001ead0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+0001eae0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+0001eaf0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+0001eb00: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+0001eb10: 6f74 6966 7928 6d65 7373 6167 653d 7374  otify(message=st
+0001eb20: 7228 652e 5f5f 636f 6e74 6578 745f 5f29  r(e.__context__)
+0001eb30: 202b 2022 5c6e 2220 2b20 7374 7228 6529   + "\n" + str(e)
+0001eb40: 2c20 7469 746c 653d 652e 5f5f 636c 6173  , title=e.__clas
+0001eb50: 735f 5f2e 5f5f 6e61 6d65 5f5f 290d 0a0d  s__.__name__)...
+0001eb60: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+0001eb70: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+0001eb80: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0001eb90: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
+0001eba0: 6765 3d73 7472 2865 2e5f 5f63 6f6e 7465  ge=str(e.__conte
+0001ebb0: 7874 5f5f 2920 2b20 225c 6e22 202b 2073  xt__) + "\n" + s
+0001ebc0: 7472 2865 292c 2074 6974 6c65 3d65 2e5f  tr(e), title=e._
+0001ebd0: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+0001ebe0: 5f29 0d0a 0d0a 2020 2020 6465 6620 6164  _)....    def ad
+0001ebf0: 645f 6865 6c70 6572 2873 656c 6629 3a0d  d_helper(self):.
+0001ec00: 0a20 2020 2020 2020 206e 6577 5f6e 616d  .        new_nam
+0001ec10: 6520 3d20 7365 6c66 2e48 656c 7065 724e  e = self.HelperN
+0001ec20: 616d 6545 6469 742e 7465 7874 2829 0d0a  ameEdit.text()..
+0001ec30: 2020 2020 2020 2020 2320 544f 444f 2061          # TODO a
+0001ec40: 6464 2073 6563 7572 6974 7920 6d65 6368  dd security mech
+0001ec50: 616e 6973 6d20 746f 2061 766f 6964 206f  anism to avoid o
+0001ec60: 7665 7277 7269 7469 6e67 2061 6e20 6167  verwriting an ag
+0001ec70: 656e 740d 0a20 2020 2020 2020 2069 6620  ent..        if 
+0001ec80: 6e65 775f 6e61 6d65 203d 3d20 2222 3a0d  new_name == "":.
+0001ec90: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001eca0: 662e 6e6f 7469 6679 2822 506c 6561 7365  f.notify("Please
+0001ecb0: 2065 6e74 6572 2061 2076 616c 6964 206e   enter a valid n
+0001ecc0: 616d 6522 2c20 7469 746c 653d 2249 424d  ame", title="IBM
+0001ecd0: 2045 7272 6f72 2229 0d0a 2020 2020 2020   Error")..      
+0001ece0: 2020 656c 6966 206e 6f74 206e 6577 5f6e    elif not new_n
+0001ecf0: 616d 655b 305d 2e69 7375 7070 6572 2829  ame[0].isupper()
+0001ed00: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0001ed10: 656c 662e 6e6f 7469 6679 2822 506c 6561  elf.notify("Plea
+0001ed20: 7365 2065 6e74 6572 2061 2076 616c 6964  se enter a valid
+0001ed30: 206e 616d 6520 7769 7468 5c6e 7570 7065   name with\nuppe
+0001ed40: 7263 6173 6520 6669 7273 7420 6c65 7474  rcase first lett
+0001ed50: 6572 206f 7220 6361 6d65 6c63 6173 652c  er or camelcase,
+0001ed60: 2065 2e67 2e20 274d 7941 6765 6e74 2722   e.g. 'MyAgent'"
+0001ed70: 2c20 7469 746c 653d 2249 424d 2045 7272  , title="IBM Err
+0001ed80: 6f72 2229 0d0a 2020 2020 2020 2020 656c  or")..        el
+0001ed90: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0001eda0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+0001edb0: 2e61 6464 5f61 6765 6e74 286e 6577 5f6e  .add_agent(new_n
+0001edc0: 616d 6529 0d0a 0d0a 2020 2020 6465 6620  ame)....    def 
+0001edd0: 7265 6d6f 7665 5f68 656c 7065 7228 7365  remove_helper(se
+0001ede0: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
+0001edf0: 6c66 2e64 7261 7763 616e 7661 732e 7265  lf.drawcanvas.re
+0001ee00: 6d6f 7665 5f61 6765 6e74 2829 0d0a 0d0a  move_agent()....
+0001ee10: 2020 2020 6465 6620 6164 645f 6e65 7728      def add_new(
+0001ee20: 7365 6c66 293a 0d0a 0d0a 2020 2020 2020  self):....      
+0001ee30: 2020 2320 544f 444f 2061 7373 6572 7420    # TODO assert 
+0001ee40: 7468 6174 2071 7561 6e74 6974 7920 6973  that quantity is
+0001ee50: 206e 6f74 2079 6574 2069 6e20 616e 7920   not yet in any 
+0001ee60: 6f74 6865 7220 7472 616e 7361 6374 696f  other transactio
+0001ee70: 6e0d 0a20 2020 2020 2020 2073 656c 662e  n..        self.
+0001ee80: 6d61 6465 5f63 6861 6e67 6573 203d 2046  made_changes = F
+0001ee90: 616c 7365 0d0a 0d0a 0d0a 2020 2020 2020  alse......      
+0001eea0: 2020 6e65 775f 656e 7472 7920 3d20 7b7d    new_entry = {}
+0001eeb0: 0d0a 0d0a 2020 2020 2020 2020 6e65 775f  ....        new_
+0001eec0: 656e 7472 795b 2261 3122 5d20 3d20 7365  entry["a1"] = se
+0001eed0: 6c66 2e41 7373 6574 4c69 7374 4c65 6674  lf.AssetListLeft
+0001eee0: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
+0001eef0: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
+0001ef00: 795b 2261 3222 5d20 3d20 7365 6c66 2e41  y["a2"] = self.A
+0001ef10: 7373 6574 4c69 7374 5269 6768 742e 746f  ssetListRight.to
+0001ef20: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0001ef30: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001ef40: 6c31 225d 203d 2073 656c 662e 4c69 6162  l1"] = self.Liab
+0001ef50: 696c 6974 794c 6973 744c 6566 742e 746f  ilityListLeft.to
+0001ef60: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0001ef70: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001ef80: 6c32 225d 203d 2073 656c 662e 4c69 6162  l2"] = self.Liab
+0001ef90: 696c 6974 794c 6973 7452 6967 6874 2e74  ilityListRight.t
+0001efa0: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
+0001efb0: 2020 2020 2020 6e65 775f 656e 7472 795b        new_entry[
+0001efc0: 2265 3122 5d20 3d20 7365 6c66 2e45 7175  "e1"] = self.Equ
+0001efd0: 6974 794c 6973 744c 6566 742e 746f 506c  ityListLeft.toPl
+0001efe0: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
+0001eff0: 2020 206e 6577 5f65 6e74 7279 5b22 6532     new_entry["e2
+0001f000: 225d 203d 2073 656c 662e 4571 7569 7479  "] = self.Equity
+0001f010: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
+0001f020: 6e54 6578 7428 290d 0a0d 0a20 2020 2020  nText()....     
+0001f030: 2020 2023 206e 6577 5f65 6e74 7279 5b22     # new_entry["
+0001f040: 6131 225d 203d 2073 656c 662e 4173 7365  a1"] = self.Asse
+0001f050: 744c 6973 744c 6566 742e 746f 506c 6169  tListLeft.toPlai
+0001f060: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
+0001f070: 2023 206e 6577 5f65 6e74 7279 5b22 6c31   # new_entry["l1
+0001f080: 225d 203d 2073 656c 662e 4c69 6162 696c  "] = self.Liabil
+0001f090: 6974 794c 6973 744c 6566 742e 746f 506c  ityListLeft.toPl
+0001f0a0: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
+0001f0b0: 2020 2023 206e 6577 5f65 6e74 7279 5b22     # new_entry["
+0001f0c0: 6132 225d 203d 2073 656c 662e 4c69 6162  a2"] = self.Liab
+0001f0d0: 696c 6974 794c 6973 7452 6967 6874 2e74  ilityListRight.t
+0001f0e0: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
+0001f0f0: 2020 2020 2020 2320 6e65 775f 656e 7472        # new_entr
+0001f100: 795b 226c 3222 5d20 3d20 7365 6c66 2e41  y["l2"] = self.A
+0001f110: 7373 6574 4c69 7374 5269 6768 742e 746f  ssetListRight.to
+0001f120: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0001f130: 2020 2020 2023 206e 6577 5f65 6e74 7279       # new_entry
+0001f140: 5b22 6531 225d 203d 2073 656c 662e 4571  ["e1"] = self.Eq
+0001f150: 7569 7479 4c69 7374 4c65 6674 2e74 6f50  uityListLeft.toP
+0001f160: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
+0001f170: 2020 2020 2320 6e65 775f 656e 7472 795b      # new_entry[
+0001f180: 2265 3222 5d20 3d20 7365 6c66 2e45 7175  "e2"] = self.Equ
+0001f190: 6974 794c 6973 7452 6967 6874 2e74 6f50  ityListRight.toP
+0001f1a0: 6c61 696e 5465 7874 2829 0d0a 0d0a 2020  lainText()....  
+0001f1b0: 2020 2020 2020 6e65 775f 656e 7472 795b        new_entry[
+0001f1c0: 2261 6765 6e74 3122 5d20 3d20 6361 6d65  "agent1"] = came
+0001f1d0: 6c28 7365 6c66 2e61 6765 6e74 3145 6469  l(self.agent1Edi
+0001f1e0: 742e 7465 7874 2829 2920 232e 6361 7069  t.text()) #.capi
+0001f1f0: 7461 6c69 7a65 2829 0d0a 2020 2020 2020  talize()..      
+0001f200: 2020 6e65 775f 656e 7472 795b 2261 6765    new_entry["age
+0001f210: 6e74 3222 5d20 3d20 6361 6d65 6c28 7365  nt2"] = camel(se
+0001f220: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
+0001f230: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
+0001f240: 7a65 2829 0d0a 0d0a 2020 2020 2020 2020  ze()....        
+0001f250: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
+0001f260: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
+0001f270: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
+0001f280: 7874 2829 2929 2023 202e 6361 7069 7461  xt())) # .capita
+0001f290: 6c69 7a65 2829 290d 0a20 2020 2020 2020  lize())..       
+0001f2a0: 2073 656c 662e 6167 656e 7432 4564 6974   self.agent2Edit
+0001f2b0: 2e73 6574 5465 7874 2863 616d 656c 2873  .setText(camel(s
+0001f2c0: 656c 662e 6167 656e 7432 4564 6974 2e74  elf.agent2Edit.t
+0001f2d0: 6578 7428 2929 2920 232e 6361 7069 7461  ext())) #.capita
+0001f2e0: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
+0001f2f0: 2020 2069 6620 6e6f 7420 7365 6c66 2e64     if not self.d
+0001f300: 7261 7763 616e 7661 732e 6368 6563 6b5f  rawcanvas.check_
+0001f310: 6578 6973 7428 6e65 775f 656e 7472 795b  exist(new_entry[
+0001f320: 2261 6765 6e74 3122 5d29 3a0d 0a20 2020  "agent1"]):..   
+0001f330: 2020 2020 2020 2020 2069 6620 6e65 775f           if new_
+0001f340: 656e 7472 795b 2261 6765 6e74 3122 5d20  entry["agent1"] 
+0001f350: 213d 2022 223a 0d0a 2020 2020 2020 2020  != "":..        
+0001f360: 2020 2020 2020 2020 7965 7320 3d20 2073          yes =  s
+0001f370: 656c 662e 6173 6b5f 7175 6573 7469 6f6e  elf.ask_question
+0001f380: 2827 272c 2254 6865 2061 6765 6e74 2025  ('',"The agent %
+0001f390: 7320 646f 6573 206e 6f74 2065 7869 7374  s does not exist
+0001f3a0: 2e5c 6e44 6f20 796f 7520 7769 7368 2074  .\nDo you wish t
+0001f3b0: 6f20 636f 6e74 696e 7565 2061 6e64 2061  o continue and a
+0001f3c0: 7574 6f6d 6174 6963 616c 6c79 2063 7265  utomatically cre
+0001f3d0: 6174 6520 6120 6e65 7720 6167 656e 743f  ate a new agent?
+0001f3e0: 2225 6e65 775f 656e 7472 795b 2261 6765  "%new_entry["age
+0001f3f0: 6e74 3122 5d29 0d0a 2020 2020 2020 2020  nt1"])..        
+0001f400: 2020 2020 2020 2020 6966 206e 6f74 2079          if not y
+0001f410: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+0001f420: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
+0001f430: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+0001f440: 7420 7365 6c66 2e64 7261 7763 616e 7661  t self.drawcanva
+0001f450: 732e 6368 6563 6b5f 6578 6973 7428 6e65  s.check_exist(ne
+0001f460: 775f 656e 7472 795b 2261 6765 6e74 3222  w_entry["agent2"
+0001f470: 5d29 3a0d 0a20 2020 2020 2020 2020 2020  ]):..           
+0001f480: 2069 6620 6e65 775f 656e 7472 795b 2261   if new_entry["a
+0001f490: 6765 6e74 3222 5d20 213d 2022 223a 0d0a  gent2"] != "":..
+0001f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f4b0: 7965 7320 3d20 2073 656c 662e 6173 6b5f  yes =  self.ask_
+0001f4c0: 7175 6573 7469 6f6e 2827 272c 2022 5468  question('', "Th
+0001f4d0: 6520 6167 656e 7420 2573 2064 6f65 7320  e agent %s does 
+0001f4e0: 6e6f 7420 6578 6973 742e 5c6e 446f 2079  not exist.\nDo y
+0001f4f0: 6f75 2077 6973 6820 746f 2063 6f6e 7469  ou wish to conti
+0001f500: 6e75 6520 616e 6420 6175 746f 6d61 7469  nue and automati
+0001f510: 6361 6c6c 7920 6372 6561 7465 2061 206e  cally create a n
+0001f520: 6577 2061 6765 6e74 3f22 256e 6577 5f65  ew agent?"%new_e
+0001f530: 6e74 7279 5b22 6167 656e 7432 225d 290d  ntry["agent2"]).
+0001f540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f550: 2069 6620 6e6f 7420 7965 733a 0d0a 2020   if not yes:..  
+0001f560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f570: 2020 7265 7475 726e 0d0a 0d0a 0d0a 2020    return......  
+0001f580: 2020 2020 2020 626f 7831 203d 2073 656c        box1 = sel
+0001f590: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
+0001f5a0: 5f61 6765 6e74 286e 6577 5f65 6e74 7279  _agent(new_entry
+0001f5b0: 5b22 6167 656e 7431 225d 290d 0a20 2020  ["agent1"])..   
+0001f5c0: 2020 2020 2062 6f78 3220 3d20 7365 6c66       box2 = self
+0001f5d0: 2e64 7261 7763 616e 7661 732e 6164 645f  .drawcanvas.add_
+0001f5e0: 6167 656e 7428 6e65 775f 656e 7472 795b  agent(new_entry[
+0001f5f0: 2261 6765 6e74 3222 5d29 0d0a 0d0a 2020  "agent2"])....  
+0001f600: 2020 2020 2020 6d79 5f69 7465 6d73 203d        my_items =
+0001f610: 205b 5d0d 0a20 2020 2020 2020 2064 6174   []..        dat
+0001f620: 6120 3d20 6e65 775f 656e 7472 790d 0a20  a = new_entry.. 
+0001f630: 2020 2020 2020 2061 6c6c 656e 7472 6965         allentrie
+0001f640: 7320 3d20 225c 6e22 2e6a 6f69 6e28 5b64  s = "\n".join([d
+0001f650: 6174 615b 226c 3122 5d2c 2064 6174 615b  ata["l1"], data[
+0001f660: 2261 3122 5d2c 2064 6174 615b 2265 3122  "a1"], data["e1"
+0001f670: 5d2c 2064 6174 615b 226c 3222 5d2c 2064  ], data["l2"], d
+0001f680: 6174 615b 2261 3222 5d2c 2064 6174 615b  ata["a2"], data[
+0001f690: 2265 3222 5d5d 290d 0a20 2020 2020 2020  "e2"]])..       
+0001f6a0: 2066 6f72 2073 7562 5f69 7465 6d20 696e   for sub_item in
+0001f6b0: 2061 6c6c 656e 7472 6965 732e 7370 6c69   allentries.spli
+0001f6c0: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
+0001f6d0: 2020 2020 2020 666f 7220 7375 625f 656e        for sub_en
+0001f6e0: 7472 7920 696e 2073 7562 5f69 7465 6d2e  try in sub_item.
+0001f6f0: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
+0001f700: 2020 2020 2020 2020 2020 2020 2020 656e                en
+0001f710: 7472 7920 3d20 7375 625f 656e 7472 792e  try = sub_entry.
+0001f720: 7265 706c 6163 6528 222d 222c 2222 292e  replace("-","").
+0001f730: 7265 706c 6163 6528 222b 222c 2222 292e  replace("+","").
+0001f740: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
+0001f750: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
+0001f760: 7920 213d 2020 2222 3a0d 0a20 2020 2020  y !=  "":..     
+0001f770: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001f780: 795f 6974 656d 732e 6170 7065 6e64 2865  y_items.append(e
+0001f790: 6e74 7279 290d 0a0d 0a20 2020 2020 2020  ntry)....       
+0001f7a0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+0001f7b0: 2e61 6464 5f63 6f6e 6e65 6374 696f 6e28  .add_connection(
+0001f7c0: 626f 7831 2c20 626f 7832 2c20 6e61 6d65  box1, box2, name
+0001f7d0: 3d20 7374 7228 7365 6c66 2e65 6469 7453  = str(self.editS
+0001f7e0: 686f 7274 6e61 6d65 2e74 6578 7428 2929  hortname.text())
+0001f7f0: 2c73 7562 6a65 6374 3d73 656c 662e 6564  ,subject=self.ed
+0001f800: 6974 5375 626a 6563 742e 7465 7874 2829  itSubject.text()
+0001f810: 2c69 7465 6d73 3d6d 795f 6974 656d 7329  ,items=my_items)
+0001f820: 0d0a 0d0a 2020 2020 2020 2020 6e65 775f  ....        new_
+0001f830: 656e 7472 795b 2275 6e69 2d64 6972 6563  entry["uni-direc
+0001f840: 7469 6f6e 616c 225d 203d 205c 0d0a 2020  tional"] = \..  
+0001f850: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
+0001f860: 6c66 2e63 6f6d 626f 556e 6964 6972 2e63  lf.comboUnidir.c
+0001f870: 7572 7265 6e74 5465 7874 2829 290d 0a0d  urrentText())...
+0001f880: 0a20 2020 2020 2020 206e 6577 5f65 6e74  .        new_ent
+0001f890: 7279 5b22 6c6f 6720 7472 616e 7361 6374  ry["log transact
+0001f8a0: 696f 6e22 5d20 3d20 5c0d 0a20 2020 2020  ion"] = \..     
+0001f8b0: 2020 2020 2020 2073 656c 662e 7265 6769         self.regi
+0001f8c0: 7374 6572 466c 6f77 426f 782e 6375 7272  sterFlowBox.curr
+0001f8d0: 656e 7454 6578 7428 290d 0a0d 0a20 2020  entText()....   
+0001f8e0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001f8f0: 6361 7368 666c 6f77 3122 5d20 3d20 5c0d  cashflow1"] = \.
+0001f900: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
+0001f910: 2873 656c 662e 636f 6d62 6f43 6173 684c  (self.comboCashL
+0001f920: 6566 742e 6375 7272 656e 7454 6578 7428  eft.currentText(
+0001f930: 2929 0d0a 2020 2020 2020 2020 6e65 775f  ))..        new_
+0001f940: 656e 7472 795b 2263 6173 6866 6c6f 7732  entry["cashflow2
+0001f950: 225d 203d 205c 0d0a 2020 2020 2020 2020  "] = \..        
+0001f960: 2020 2020 7374 7228 7365 6c66 2e63 6f6d      str(self.com
+0001f970: 626f 4361 7368 5269 6768 742e 6375 7272  boCashRight.curr
+0001f980: 656e 7454 6578 7428 2929 0d0a 0d0a 2020  entText())....  
+0001f990: 2020 2020 2020 6e65 775f 656e 7472 795b        new_entry[
+0001f9a0: 226b 696e 6422 5d20 3d20 5c0d 0a20 2020  "kind"] = \..   
+0001f9b0: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+0001f9c0: 662e 6564 6974 5479 7065 2e63 7572 7265  f.editType.curre
+0001f9d0: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
+0001f9e0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001f9f0: 696e 636f 6d65 3122 5d20 3d20 5c0d 0a20  income1"] = \.. 
+0001fa00: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
+0001fa10: 656c 662e 636f 6d62 6f49 6e63 6f6d 654c  elf.comboIncomeL
+0001fa20: 6566 742e 6375 7272 656e 7454 6578 7428  eft.currentText(
+0001fa30: 2929 0d0a 2020 2020 2020 2020 6e65 775f  ))..        new_
+0001fa40: 656e 7472 795b 2269 6e63 6f6d 6532 225d  entry["income2"]
+0001fa50: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
+0001fa60: 2020 7374 7228 7365 6c66 2e63 6f6d 626f    str(self.combo
+0001fa70: 496e 636f 6d65 5269 6768 742e 6375 7272  IncomeRight.curr
+0001fa80: 656e 7454 6578 7428 2929 0d0a 0d0a 2020  entText())....  
+0001fa90: 2020 2020 2020 6e65 775f 656e 7472 795b        new_entry[
+0001faa0: 2271 7561 6e74 6974 7922 5d20 3d20 5c0d  "quantity"] = \.
+0001fab0: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
+0001fac0: 2873 656c 662e 6564 6974 5175 616e 7469  (self.editQuanti
+0001fad0: 7479 2e74 6578 7428 2929 0d0a 0d0a 2020  ty.text())....  
+0001fae0: 2020 2020 2020 6e65 775f 656e 7472 795b        new_entry[
+0001faf0: 2273 7562 6a65 6374 225d 203d 205c 0d0a  "subject"] = \..
+0001fb00: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0001fb10: 7365 6c66 2e65 6469 7453 7562 6a65 6374  self.editSubject
+0001fb20: 2e74 6578 7428 2929 0d0a 0d0a 2020 2020  .text())....    
+0001fb30: 2020 2020 6e65 775f 656e 7472 795b 2273      new_entry["s
+0001fb40: 686f 7274 6e61 6d65 225d 203d 205c 0d0a  hortname"] = \..
+0001fb50: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0001fb60: 7365 6c66 2e65 6469 7453 686f 7274 6e61  self.editShortna
+0001fb70: 6d65 2e74 6578 7428 2929 0d0a 0d0a 2020  me.text())....  
+0001fb80: 2020 2020 2020 6e65 775f 656e 7472 795b        new_entry[
+0001fb90: 2264 6573 6372 6970 7469 6f6e 225d 203d  "description"] =
+0001fba0: 205c 0d0a 2020 2020 2020 2020 2020 2020   \..            
+0001fbb0: 7374 7228 7365 6c66 2e65 6469 7444 6573  str(self.editDes
+0001fbc0: 6372 6970 7469 6f6e 2e74 6578 7428 2929  cription.text())
+0001fbd0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+0001fbe0: 2e65 6e74 7279 5f64 6174 612e 6170 7065  .entry_data.appe
+0001fbf0: 6e64 286e 6577 5f65 6e74 7279 290d 0a20  nd(new_entry).. 
+0001fc00: 2020 2020 2020 2073 656c 662e 7570 6461         self.upda
+0001fc10: 7465 5f74 6162 6c65 2829 0d0a 0d0a 0d0a  te_table()......
+0001fc20: 0d0a 2020 2020 2020 2020 6461 726b 4d6f  ..        darkMo
+0001fc30: 6465 203d 2054 7275 650d 0a20 2020 2020  de = True..     
+0001fc40: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+0001fc50: 2020 2020 2069 6620 7365 6c66 2e74 6865       if self.the
+0001fc60: 6d65 5f6d 616e 6167 6572 2e74 6865 6d65  me_manager.theme
+0001fc70: 203d 3d20 2262 7269 6768 7422 3a0d 0a20   == "bright":.. 
+0001fc80: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0001fc90: 6172 6b4d 6f64 6520 3d20 4661 6c73 650d  arkMode = False.
+0001fca0: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+0001fcb0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+0001fcc0: 7373 0d0a 0d0a 2020 2020 2020 2020 7472  ss....        tr
+0001fcd0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0001fce0: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+0001fcf0: 6478 203d 206c 656e 2873 656c 662e 656e  dx = len(self.en
+0001fd00: 7472 795f 6461 7461 292d 310d 0a20 2020  try_data)-1..   
+0001fd10: 2020 2020 2020 2020 2073 656c 662e 726f           self.ro
+0001fd20: 775f 7365 6c65 6374 2873 656c 662e 7365  w_select(self.se
+0001fd30: 6c65 6374 696f 6e5f 6964 7829 0d0a 2020  lection_idx)..  
+0001fd40: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+0001fd50: 6570 7469 6f6e 2061 7320 6520 3a0d 0a20  eption as e :.. 
+0001fd60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001fd70: 6e6f 7469 6679 2822 4552 524f 523a 2220  notify("ERROR:" 
+0001fd80: 2b20 7472 2865 292c 7469 746c 653d 2245  + tr(e),title="E
+0001fd90: 7272 6f72 2229 0d0a 0d0a 2020 2020 2020  rror")....      
+0001fda0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
+0001fdb0: 6620 7365 6c66 2e73 656c 6563 7469 6f6e  f self.selection
+0001fdc0: 5f69 6478 2069 7320 6e6f 7420 4e6f 6e65  _idx is not None
+0001fdd0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+0001fde0: 6f72 2069 2069 6e20 7261 6e67 6528 7365  or i in range(se
+0001fdf0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0001fe00: 6577 2e63 6f6c 756d 6e43 6f75 6e74 2829  ew.columnCount()
+0001fe10: 293a 0d0a 0d0a 2020 2020 2020 2020 2020  ):....          
+0001fe20: 2020 2020 2020 6966 2064 6172 6b4d 6f64        if darkMod
+0001fe30: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001fe40: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0001fe50: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
+0001fe60: 6d28 7365 6c66 2e73 656c 6563 7469 6f6e  m(self.selection
+0001fe70: 5f69 6478 2c20 6929 2e73 6574 4261 636b  _idx, i).setBack
+0001fe80: 6772 6f75 6e64 2851 7447 7569 2e51 436f  ground(QtGui.QCo
+0001fe90: 6c6f 7228 3231 2c20 3231 2c20 3231 2929  lor(21, 21, 21))
+0001fea0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001feb0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0001fec0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001fed0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0001fee0: 772e 6974 656d 2873 656c 662e 7365 6c65  w.item(self.sele
+0001fef0: 6374 696f 6e5f 6964 782c 2069 292e 7365  ction_idx, i).se
+0001ff00: 7442 6163 6b67 726f 756e 6428 5174 4775  tBackground(QtGu
+0001ff10: 692e 5143 6f6c 6f72 2832 3333 2c20 3233  i.QColor(233, 23
+0001ff20: 342c 2032 3237 2929 0d0a 0d0a 2020 2020  4, 227))....    
+0001ff30: 2020 2020 2020 2020 7365 6c66 2e73 656c          self.sel
+0001ff40: 6563 7469 6f6e 5f69 6478 203d 2073 656c  ection_idx = sel
+0001ff50: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0001ff60: 772e 726f 7743 6f75 6e74 2829 2d31 0d0a  w.rowCount()-1..
+0001ff70: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001ff80: 6920 696e 2072 616e 6765 2873 656c 662e  i in range(self.
+0001ff90: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0001ffa0: 636f 6c75 6d6e 436f 756e 7428 2929 3a0d  columnCount()):.
+0001ffb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ffc0: 2069 6620 6461 726b 4d6f 6465 3a0d 0a20   if darkMode:.. 
+0001ffd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ffe0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0001fff0: 696f 6e56 6965 772e 6974 656d 2873 656c  ionView.item(sel
+00020000: 662e 7365 6c65 6374 696f 6e5f 6964 782c  f.selection_idx,
+00020010: 2069 292e 7365 7442 6163 6b67 726f 756e   i).setBackgroun
+00020020: 6428 5174 4775 692e 5143 6f6c 6f72 2831  d(QtGui.QColor(1
+00020030: 382c 2031 382c 2031 3829 290d 0a20 2020  8, 18, 18))..   
+00020040: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00020050: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00020060: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+00020070: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
+00020080: 6d28 7365 6c66 2e73 656c 6563 7469 6f6e  m(self.selection
+00020090: 5f69 6478 2c20 6929 2e73 6574 4261 636b  _idx, i).setBack
+000200a0: 6772 6f75 6e64 2851 7447 7569 2e51 436f  ground(QtGui.QCo
+000200b0: 6c6f 7228 3135 392c 2031 3539 2c20 3135  lor(159, 159, 15
+000200c0: 3929 290d 0a20 2020 2020 2020 2022 2222  9))..        """
+000200d0: 0d0a 0d0a 0d0a 0d0a 0d0a 2020 2020 6465  ..........    de
+000200e0: 6620 676f 746f 5f6e 6578 7428 7365 6c66  f goto_next(self
+000200f0: 293a 0d0a 2020 2020 2020 2020 7061 7373  ):..        pass
+00020100: 0d0a 0d0a 0d0a 2020 2020 6465 6620 7564  ......    def ud
+00020110: 7061 7465 5f64 6973 706c 6179 2873 656c  pate_display(sel
+00020120: 6629 3a0d 0a20 2020 2020 2020 2074 7279  f):..        try
+00020130: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+00020140: 2066 696c 656e 616d 6520 3d20 7365 6c66   filename = self
+00020150: 2e66 696c 656e 616d 650d 0a0d 0a20 2020  .filename....   
+00020160: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+00020170: 656e 2866 696c 656e 616d 652c 2027 7227  en(filename, 'r'
+00020180: 2920 6173 2073 7472 6561 6d3a 0d0a 2020  ) as stream:..  
+00020190: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+000201a0: 6c65 6461 7461 203d 2079 616d 6c2e 7361  ledata = yaml.sa
+000201b0: 6665 5f6c 6f61 6428 7374 7265 616d 290d  fe_load(stream).
+000201c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000201d0: 2070 7269 6e74 2866 696c 6564 6174 6129   print(filedata)
+000201e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000201f0: 2020 2020 7365 6c66 2e61 6765 6e74 314c      self.agent1L
+00020200: 6162 656c 2e74 6578 7420 3d20 6669 6c65  abel.text = file
+00020210: 6461 7461 5b22 6167 656e 7431 225d 0d0a  data["agent1"]..
+00020220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020230: 7365 6c66 2e61 6765 6e74 324c 6162 656c  self.agent2Label
+00020240: 2e74 6578 7420 3d20 6669 6c65 6461 7461  .text = filedata
+00020250: 5b22 6167 656e 7432 225d 0d0a 0d0a 2020  ["agent2"]....  
+00020260: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00020270: 7365 6c66 2e61 312e 7661 6c75 6520 3d20  self.a1.value = 
+00020280: 6669 6c65 6461 7461 5b22 6131 225d 2020  filedata["a1"]  
+00020290: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
+000202a0: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+000202b0: 2e65 312e 7661 6c75 6520 3d20 6669 6c65  .e1.value = file
+000202c0: 6461 7461 5b22 6531 225d 2020 2320 2b20  data["e1"]  # + 
+000202d0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+000202e0: 2020 2020 2020 2320 7365 6c66 2e6c 312e        # self.l1.
+000202f0: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
+00020300: 5b22 6c31 225d 2020 2320 2b20 225c 6e22  ["l1"]  # + "\n"
+00020310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020320: 2020 2320 7365 6c66 2e61 322e 7661 6c75    # self.a2.valu
+00020330: 6520 3d20 6669 6c65 6461 7461 5b22 6132  e = filedata["a2
+00020340: 225d 2020 2320 2b20 225c 6e22 0d0a 2020  "]  # + "\n"..  
 00020350: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00020360: 2020 2073 656c 662e 7061 7265 6e74 2e64     self.parent.d
-00020370: 6972 6563 7469 6f6e 5f63 6865 636b 2e76  irection_check.v
-00020380: 616c 7565 203d 2046 616c 7365 0d0a 0d0a  alue = False....
-00020390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000203a0: 2320 6966 2022 6465 7363 7269 7074 696f  # if "descriptio
-000203b0: 6e22 2069 6e20 6669 6c65 6461 7461 3a0d  n" in filedata:.
-000203c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000203d0: 2023 2020 2020 7365 6c66 2e70 6172 656e   #    self.paren
-000203e0: 742e 6465 7363 7269 7074 696f 6e2e 7661  t.description.va
-000203f0: 6c75 6520 3d20 6669 6c65 6461 7461 5b22  lue = filedata["
-00020400: 6465 7363 7269 7074 696f 6e22 5d0d 0a0d  description"]...
-00020410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020420: 2023 2073 656c 662e 7061 7265 6e74 2e66   # self.parent.f
-00020430: 6c6f 775f 6368 6563 6b2e 7661 6c75 6520  low_check.value 
-00020440: 3d20 6669 6c65 6461 7461 5b22 6c6f 6720  = filedata["log 
-00020450: 7472 616e 7361 6374 696f 6e22 5d0d 0a20  transaction"].. 
-00020460: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00020470: 2073 656c 662e 7061 7265 6e74 2e6b 696e   self.parent.kin
-00020480: 642e 7661 6c75 6520 3d20 6669 6c65 6461  d.value = fileda
-00020490: 7461 5b22 6b69 6e64 225d 0d0a 2020 2020  ta["kind"]..    
-000204a0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
-000204b0: 6c66 2e70 6172 656e 742e 7375 626a 6563  lf.parent.subjec
-000204c0: 742e 7661 6c75 6520 3d20 6669 6c65 6461  t.value = fileda
-000204d0: 7461 5b22 7375 626a 6563 7422 5d0d 0a20  ta["subject"].. 
-000204e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000204f0: 2073 656c 662e 7061 7265 6e74 2e71 7561   self.parent.qua
-00020500: 6e74 6974 792e 7661 6c75 6520 3d20 6669  ntity.value = fi
-00020510: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
-00020520: 225d 0d0a 0d0a 2020 2020 2020 2020 2020  "]....          
-00020530: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00020540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020550: 2320 5b22 4e6f 6e65 222c 2252 6576 656e  # ["None","Reven
-00020560: 7565 222c 2245 7870 656e 7365 222c 2247  ue","Expense","G
-00020570: 6169 6e22 2c22 4c6f 7373 222c 2254 6178  ain","Loss","Tax
-00020580: 225d 0d0a 0d0a 2020 2020 2020 2020 2020  "]....          
-00020590: 2020 2020 2020 2020 2020 6d79 5f64 6963            my_dic
-000205a0: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
-000205b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000205c0: 4e6f 6e65 223a 2030 2c0d 0a20 2020 2020  None": 0,..     
-000205d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000205e0: 2020 2022 5265 7665 6e75 6522 3a20 312c     "Revenue": 1,
-000205f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020600: 2020 2020 2020 2020 2020 2245 7870 656e            "Expen
-00020610: 7365 223a 2032 2c0d 0a20 2020 2020 2020  se": 2,..       
-00020620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020630: 2022 4761 696e 223a 2033 2c0d 0a20 2020   "Gain": 3,..   
+00020360: 7365 6c66 2e65 322e 7661 6c75 6520 3d20  self.e2.value = 
+00020370: 6669 6c65 6461 7461 5b22 6532 225d 2020  filedata["e2"]  
+00020380: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
+00020390: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+000203a0: 2e6c 322e 7661 6c75 6520 3d20 6669 6c65  .l2.value = file
+000203b0: 6461 7461 5b22 6c32 225d 2020 2320 2b20  data["l2"]  # + 
+000203c0: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
+000203d0: 2020 2020 2020 2020 2320 6966 2022 7368          # if "sh
+000203e0: 6f72 746e 616d 6522 2069 6e20 6669 6c65  ortname" in file
+000203f0: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
+00020400: 2020 2020 2020 2023 2020 2020 7365 6c66         #    self
+00020410: 2e70 6172 656e 742e 7368 6f72 746e 616d  .parent.shortnam
+00020420: 652e 7661 6c75 6520 3d20 6669 6c65 6461  e.value = fileda
+00020430: 7461 5b22 7368 6f72 746e 616d 6522 5d0d  ta["shortname"].
+00020440: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00020450: 2020 2023 2069 6620 2275 6e69 2d64 6972     # if "uni-dir
+00020460: 6563 7469 6f6e 616c 2220 696e 2066 696c  ectional" in fil
+00020470: 6564 6174 613a 0d0a 2020 2020 2020 2020  edata:..        
+00020480: 2020 2020 2020 2020 2320 2020 2073 656c          #    sel
+00020490: 662e 7061 7265 6e74 2e64 6972 6563 7469  f.parent.directi
+000204a0: 6f6e 5f63 6865 636b 2e76 616c 7565 203d  on_check.value =
+000204b0: 2062 6f6f 6c28 7374 7228 6669 6c65 6461   bool(str(fileda
+000204c0: 7461 5b22 756e 692d 6469 7265 6374 696f  ta["uni-directio
+000204d0: 6e61 6c22 5d29 290d 0a20 2020 2020 2020  nal"]))..       
+000204e0: 2020 2020 2020 2020 2023 2065 6c73 653a           # else:
+000204f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020500: 2020 2320 2020 2073 656c 662e 7061 7265    #    self.pare
+00020510: 6e74 2e64 6972 6563 7469 6f6e 5f63 6865  nt.direction_che
+00020520: 636b 2e76 616c 7565 203d 2046 616c 7365  ck.value = False
+00020530: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00020540: 2020 2020 2320 6966 2022 6465 7363 7269      # if "descri
+00020550: 7074 696f 6e22 2069 6e20 6669 6c65 6461  ption" in fileda
+00020560: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
+00020570: 2020 2020 2023 2020 2020 7365 6c66 2e70       #    self.p
+00020580: 6172 656e 742e 6465 7363 7269 7074 696f  arent.descriptio
+00020590: 6e2e 7661 6c75 6520 3d20 6669 6c65 6461  n.value = fileda
+000205a0: 7461 5b22 6465 7363 7269 7074 696f 6e22  ta["description"
+000205b0: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+000205c0: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
+000205d0: 6e74 2e66 6c6f 775f 6368 6563 6b2e 7661  nt.flow_check.va
+000205e0: 6c75 6520 3d20 6669 6c65 6461 7461 5b22  lue = filedata["
+000205f0: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
+00020600: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+00020610: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
+00020620: 2e6b 696e 642e 7661 6c75 6520 3d20 6669  .kind.value = fi
+00020630: 6c65 6461 7461 5b22 6b69 6e64 225d 0d0a  ledata["kind"]..
 00020640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020650: 2020 2020 2022 4c6f 7373 223a 2034 2c0d       "Loss": 4,.
-00020660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020670: 2020 2020 2020 2020 2022 496e 7465 7265           "Intere
-00020680: 7374 223a 2035 2c0d 0a20 2020 2020 2020  st": 5,..       
-00020690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000206a0: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
-000206b0: 223a 2036 2c0d 0a20 2020 2020 2020 2020  ": 6,..         
-000206c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000206d0: 5461 7822 3a20 372c 0d0a 2020 2020 2020  Tax": 7,..      
+00020650: 2320 7365 6c66 2e70 6172 656e 742e 7375  # self.parent.su
+00020660: 626a 6563 742e 7661 6c75 6520 3d20 6669  bject.value = fi
+00020670: 6c65 6461 7461 5b22 7375 626a 6563 7422  ledata["subject"
+00020680: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+00020690: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
+000206a0: 2e71 7561 6e74 6974 792e 7661 6c75 6520  .quantity.value 
+000206b0: 3d20 6669 6c65 6461 7461 5b22 7175 616e  = filedata["quan
+000206c0: 7469 7479 225d 0d0a 0d0a 2020 2020 2020  tity"]....      
+000206d0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
 000206e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000206f0: 2020 224e 6f6e 7461 782e 2050 726f 6669    "Nontax. Profi
-00020700: 7422 3a20 382c 0d0a 2020 2020 2020 2020  t": 8,..        
-00020710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020720: 224e 6f6e 7461 782e 204c 6f73 7322 3a20  "Nontax. Loss": 
-00020730: 390d 0a20 2020 2020 2020 2020 2020 2020  9..             
-00020740: 2020 2020 2020 207d 0d0a 0d0a 2020 2020         }....    
+000206f0: 2020 2020 2320 5b22 4e6f 6e65 222c 2252      # ["None","R
+00020700: 6576 656e 7565 222c 2245 7870 656e 7365  evenue","Expense
+00020710: 222c 2247 6169 6e22 2c22 4c6f 7373 222c  ","Gain","Loss",
+00020720: 2254 6178 225d 0d0a 0d0a 2020 2020 2020  "Tax"]....      
+00020730: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+00020740: 5f64 6963 7420 3d20 7b0d 0a20 2020 2020  _dict = {..     
 00020750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020760: 2320 7365 6c66 2e70 6172 656e 742e 696e  # self.parent.in
-00020770: 636f 6d65 312e 7661 6c75 6520 3d20 5b6d  come1.value = [m
-00020780: 795f 6469 6374 5b66 696c 6564 6174 615b  y_dict[filedata[
-00020790: 2269 6e63 6f6d 6531 225d 5d5d 0d0a 2020  "income1"]]]..  
-000207a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000207b0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
-000207c0: 696e 636f 6d65 322e 7661 6c75 6520 3d20  income2.value = 
-000207d0: 5b6d 795f 6469 6374 5b66 696c 6564 6174  [my_dict[filedat
-000207e0: 615b 2269 6e63 6f6d 6532 225d 5d5d 0d0a  a["income2"]]]..
-000207f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020800: 2020 2020 2020 2320 7365 6c66 2e70 6172        # self.par
-00020810: 656e 742e 6361 7368 666c 6f77 312e 7661  ent.cashflow1.va
-00020820: 6c75 6520 3d20 5b66 696c 6564 6174 615b  lue = [filedata[
-00020830: 2263 6173 6866 6c6f 7731 225d 5d0d 0a20  "cashflow1"]].. 
-00020840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020850: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
-00020860: 2e63 6173 6866 6c6f 7732 2e76 616c 7565  .cashflow2.value
-00020870: 203d 205b 6669 6c65 6461 7461 5b22 6361   = [filedata["ca
-00020880: 7368 666c 6f77 3222 5d5d 0d0a 0d0a 2020  shflow2"]]....  
-00020890: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000208a0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-000208b0: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-000208c0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000208d0: 2020 2023 7365 6c66 2e70 6172 656e 742e     #self.parent.
-000208e0: 6469 7370 6c61 7928 290d 0a0d 0a20 2020  display()....   
-000208f0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00020900: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00020910: 2020 2020 2020 2020 2070 7269 6e74 2873           print(s
-00020920: 7472 2865 2929 2023 2073 656c 662e 6e6f  tr(e)) # self.no
-00020930: 7469 6679 2873 7472 2865 292c 2245 7863  tify(str(e),"Exc
-00020940: 6570 7469 6f6e 2229 203c 2074 6869 7320  eption") < this 
-00020950: 7368 6f75 6c64 206e 6f74 2074 6872 6f77  should not throw
-00020960: 2061 6e20 6578 6365 7074 696f 6e0d 0a0d   an exception...
-00020970: 0a0d 0a0d 0a64 6566 2072 756e 5f61 7070  .....def run_app
-00020980: 2829 3a0d 0a20 2020 2023 2072 756e 7320  ():..    # runs 
-00020990: 7468 6520 6d61 696e 2061 7070 6c69 6361  the main applica
-000209a0: 7469 6f6e 2077 696e 646f 770d 0a0d 0a20  tion window.... 
-000209b0: 2020 2061 7070 203d 2051 7457 6964 6765     app = QtWidge
-000209c0: 7473 2e51 4170 706c 6963 6174 696f 6e28  ts.QApplication(
-000209d0: 7379 732e 6172 6776 290d 0a0d 0a20 2020  sys.argv)....   
-000209e0: 2023 2070 6978 6d61 7020 3d20 5150 6978   # pixmap = QPix
-000209f0: 6d61 7028 222e 2f73 706c 6173 682e 706e  map("./splash.pn
-00020a00: 6722 290d 0a20 2020 2023 2073 706c 6173  g")..    # splas
-00020a10: 6820 3d20 5153 706c 6173 6853 6372 6565  h = QSplashScree
-00020a20: 6e28 7069 786d 6170 290d 0a20 2020 2023  n(pixmap)..    #
-00020a30: 2073 706c 6173 682e 7368 6f77 2829 0d0a   splash.show()..
-00020a40: 0d0a 2020 2020 2320 6170 702e 7365 7453  ..    # app.setS
-00020a50: 7479 6c65 2827 4675 7369 6f6e 2729 0d0a  tyle('Fusion')..
-00020a60: 0d0a 2020 2020 7769 6e64 6f77 203d 2054  ..    window = T
-00020a70: 7261 6e73 6163 7469 6f6e 4465 7369 676e  ransactionDesign
-00020a80: 6572 2829 0d0a 2020 2020 2320 7370 6c61  er()..    # spla
-00020a90: 7368 2e66 696e 6973 6828 7769 6e64 6f77  sh.finish(window
-00020aa0: 290d 0a0d 0a20 2020 2023 2073 6574 7570  )....    # setup
-00020ab0: 2073 7479 6c65 7368 6565 740d 0a20 2020   stylesheet..   
-00020ac0: 2023 2061 7070 6c79 5f73 7479 6c65 7368   # apply_stylesh
-00020ad0: 6565 7428 6170 702c 2074 6865 6d65 3d27  eet(app, theme='
-00020ae0: 6461 726b 5f74 6561 6c2e 786d 6c27 2c20  dark_teal.xml', 
-00020af0: 696e 7665 7274 5f73 6563 6f6e 6461 7279  invert_secondary
-00020b00: 3d54 7275 6529 0d0a 2020 2020 2320 6170  =True)..    # ap
-00020b10: 706c 795f 7374 796c 6573 6865 6574 2877  ply_stylesheet(w
-00020b20: 696e 646f 772c 2074 6865 6d65 3d27 6461  indow, theme='da
-00020b30: 726b 5f74 6561 6c2e 786d 6c27 2c20 696e  rk_teal.xml', in
-00020b40: 7665 7274 5f73 6563 6f6e 6461 7279 3d54  vert_secondary=T
-00020b50: 7275 6529 0d0a 0d0a 2020 2020 7769 6e64  rue)....    wind
-00020b60: 6f77 2e73 686f 7728 290d 0a20 2020 2077  ow.show()..    w
-00020b70: 696e 646f 772e 7377 6974 6368 5f74 6865  indow.switch_the
-00020b80: 6d65 2829 0d0a 2020 2020 7769 6e64 6f77  me()..    window
-00020b90: 2e73 7769 7463 685f 7468 656d 6528 290d  .switch_theme().
-00020ba0: 0a0d 0a20 2020 2061 7070 2e65 7865 635f  ...    app.exec_
-00020bb0: 2829 0d0a 0d0a 0d0a 0d0a 0d0a 0d0a 6966  ()............if
-00020bc0: 205f 5f6e 616d 655f 5f20 3d3d 2022 5f5f   __name__ == "__
-00020bd0: 6d61 696e 5f5f 223a 0d0a 0d0a 2020 2020  main__":....    
-00020be0: 7275 6e5f 6170 7028 290d 0a              run_app()..
+00020760: 2020 2022 4e6f 6e65 223a 2030 2c0d 0a20     "None": 0,.. 
+00020770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020780: 2020 2020 2020 2022 5265 7665 6e75 6522         "Revenue"
+00020790: 3a20 312c 0d0a 2020 2020 2020 2020 2020  : 1,..          
+000207a0: 2020 2020 2020 2020 2020 2020 2020 2245                "E
+000207b0: 7870 656e 7365 223a 2032 2c0d 0a20 2020  xpense": 2,..   
+000207c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000207d0: 2020 2020 2022 4761 696e 223a 2033 2c0d       "Gain": 3,.
+000207e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000207f0: 2020 2020 2020 2020 2022 4c6f 7373 223a           "Loss":
+00020800: 2034 2c0d 0a20 2020 2020 2020 2020 2020   4,..           
+00020810: 2020 2020 2020 2020 2020 2020 2022 496e               "In
+00020820: 7465 7265 7374 223a 2035 2c0d 0a20 2020  terest": 5,..   
+00020830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020840: 2020 2020 2022 4e6f 6e2d 4f70 2e20 496e       "Non-Op. In
+00020850: 636f 6d65 223a 2036 2c0d 0a20 2020 2020  come": 6,..     
+00020860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020870: 2020 2022 5461 7822 3a20 372c 0d0a 2020     "Tax": 7,..  
+00020880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020890: 2020 2020 2020 224e 6f6e 7461 782e 2050        "Nontax. P
+000208a0: 726f 6669 7422 3a20 382c 0d0a 2020 2020  rofit": 8,..    
+000208b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000208c0: 2020 2020 224e 6f6e 7461 782e 204c 6f73      "Nontax. Los
+000208d0: 7322 3a20 390d 0a20 2020 2020 2020 2020  s": 9..         
+000208e0: 2020 2020 2020 2020 2020 207d 0d0a 0d0a             }....
+000208f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020900: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
+00020910: 742e 696e 636f 6d65 312e 7661 6c75 6520  t.income1.value 
+00020920: 3d20 5b6d 795f 6469 6374 5b66 696c 6564  = [my_dict[filed
+00020930: 6174 615b 2269 6e63 6f6d 6531 225d 5d5d  ata["income1"]]]
+00020940: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020950: 2020 2020 2020 2320 7365 6c66 2e70 6172        # self.par
+00020960: 656e 742e 696e 636f 6d65 322e 7661 6c75  ent.income2.valu
+00020970: 6520 3d20 5b6d 795f 6469 6374 5b66 696c  e = [my_dict[fil
+00020980: 6564 6174 615b 2269 6e63 6f6d 6532 225d  edata["income2"]
+00020990: 5d5d 0d0a 0d0a 2020 2020 2020 2020 2020  ]]....          
+000209a0: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+000209b0: 2e70 6172 656e 742e 6361 7368 666c 6f77  .parent.cashflow
+000209c0: 312e 7661 6c75 6520 3d20 5b66 696c 6564  1.value = [filed
+000209d0: 6174 615b 2263 6173 6866 6c6f 7731 225d  ata["cashflow1"]
+000209e0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+000209f0: 2020 2020 2020 2023 2073 656c 662e 7061         # self.pa
+00020a00: 7265 6e74 2e63 6173 6866 6c6f 7732 2e76  rent.cashflow2.v
+00020a10: 616c 7565 203d 205b 6669 6c65 6461 7461  alue = [filedata
+00020a20: 5b22 6361 7368 666c 6f77 3222 5d5d 0d0a  ["cashflow2"]]..
+00020a30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020a40: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
+00020a50: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00020a60: 6173 730d 0a0d 0a20 2020 2020 2020 2020  ass....         
+00020a70: 2020 2020 2020 2023 7365 6c66 2e70 6172         #self.par
+00020a80: 656e 742e 6469 7370 6c61 7928 290d 0a0d  ent.display()...
+00020a90: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00020aa0: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00020ab0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00020ac0: 6e74 2873 7472 2865 2929 2023 2073 656c  nt(str(e)) # sel
+00020ad0: 662e 6e6f 7469 6679 2873 7472 2865 292c  f.notify(str(e),
+00020ae0: 2245 7863 6570 7469 6f6e 2229 203c 2074  "Exception") < t
+00020af0: 6869 7320 7368 6f75 6c64 206e 6f74 2074  his should not t
+00020b00: 6872 6f77 2061 6e20 6578 6365 7074 696f  hrow an exceptio
+00020b10: 6e0d 0a0d 0a0d 0a0d 0a64 6566 2072 756e  n........def run
+00020b20: 5f61 7070 2829 3a0d 0a20 2020 2023 2072  _app():..    # r
+00020b30: 756e 7320 7468 6520 6d61 696e 2061 7070  uns the main app
+00020b40: 6c69 6361 7469 6f6e 2077 696e 646f 770d  lication window.
+00020b50: 0a0d 0a20 2020 2061 7070 203d 2051 7457  ...    app = QtW
+00020b60: 6964 6765 7473 2e51 4170 706c 6963 6174  idgets.QApplicat
+00020b70: 696f 6e28 7379 732e 6172 6776 290d 0a0d  ion(sys.argv)...
+00020b80: 0a20 2020 2023 2070 6978 6d61 7020 3d20  .    # pixmap = 
+00020b90: 5150 6978 6d61 7028 222e 2f73 706c 6173  QPixmap("./splas
+00020ba0: 682e 706e 6722 290d 0a20 2020 2023 2073  h.png")..    # s
+00020bb0: 706c 6173 6820 3d20 5153 706c 6173 6853  plash = QSplashS
+00020bc0: 6372 6565 6e28 7069 786d 6170 290d 0a20  creen(pixmap).. 
+00020bd0: 2020 2023 2073 706c 6173 682e 7368 6f77     # splash.show
+00020be0: 2829 0d0a 0d0a 2020 2020 2320 6170 702e  ()....    # app.
+00020bf0: 7365 7453 7479 6c65 2827 4675 7369 6f6e  setStyle('Fusion
+00020c00: 2729 0d0a 0d0a 2020 2020 7769 6e64 6f77  ')....    window
+00020c10: 203d 2054 7261 6e73 6163 7469 6f6e 4465   = TransactionDe
+00020c20: 7369 676e 6572 2829 0d0a 2020 2020 2320  signer()..    # 
+00020c30: 7370 6c61 7368 2e66 696e 6973 6828 7769  splash.finish(wi
+00020c40: 6e64 6f77 290d 0a0d 0a20 2020 2023 2073  ndow)....    # s
+00020c50: 6574 7570 2073 7479 6c65 7368 6565 740d  etup stylesheet.
+00020c60: 0a20 2020 2023 2061 7070 6c79 5f73 7479  .    # apply_sty
+00020c70: 6c65 7368 6565 7428 6170 702c 2074 6865  lesheet(app, the
+00020c80: 6d65 3d27 6461 726b 5f74 6561 6c2e 786d  me='dark_teal.xm
+00020c90: 6c27 2c20 696e 7665 7274 5f73 6563 6f6e  l', invert_secon
+00020ca0: 6461 7279 3d54 7275 6529 0d0a 2020 2020  dary=True)..    
+00020cb0: 2320 6170 706c 795f 7374 796c 6573 6865  # apply_styleshe
+00020cc0: 6574 2877 696e 646f 772c 2074 6865 6d65  et(window, theme
+00020cd0: 3d27 6461 726b 5f74 6561 6c2e 786d 6c27  ='dark_teal.xml'
+00020ce0: 2c20 696e 7665 7274 5f73 6563 6f6e 6461  , invert_seconda
+00020cf0: 7279 3d54 7275 6529 0d0a 0d0a 2020 2020  ry=True)....    
+00020d00: 7769 6e64 6f77 2e73 686f 7728 290d 0a20  window.show().. 
+00020d10: 2020 2077 696e 646f 772e 7377 6974 6368     window.switch
+00020d20: 5f74 6865 6d65 2829 0d0a 2020 2020 7769  _theme()..    wi
+00020d30: 6e64 6f77 2e73 7769 7463 685f 7468 656d  ndow.switch_them
+00020d40: 6528 290d 0a0d 0a20 2020 2061 7070 2e65  e()....    app.e
+00020d50: 7865 635f 2829 0d0a 0d0a 0d0a 0d0a 0d0a  xec_()..........
+00020d60: 0d0a 6966 205f 5f6e 616d 655f 5f20 3d3d  ..if __name__ ==
+00020d70: 2022 5f5f 6d61 696e 5f5f 223a 0d0a 0d0a   "__main__":....
+00020d80: 2020 2020 7275 6e5f 6170 7028 290d 0a        run_app()..
```

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/resources.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/resources.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/search_dialog.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/search_dialog.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/settings_edit.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/settings_edit.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/simulation_edit.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/simulation_edit.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/styles/bright/main.txt` & `sfctools-1.0.5.5/sfctools/gui/attune/src/styles/bright/main.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/styles/dark/background.txt` & `sfctools-1.0.5.5/sfctools/gui/attune/src/styles/dark/background.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/styles/dark/main.txt` & `sfctools-1.0.5.5/sfctools/gui/attune/src/styles/dark/main.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/theme_manager.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/theme_manager.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/transaction_designer_mainwindow.ui` & `sfctools-1.0.5.5/sfctools/gui/attune/src/transaction_designer_mainwindow.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/attune/src/yaml_editor.py` & `sfctools-1.0.5.5/sfctools/gui/attune/src/yaml_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/CLA.pdf` & `sfctools-1.0.5.5/sfctools/gui/CLA.pdf`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/CONTRIBUTING.md` & `sfctools-1.0.5.5/sfctools/gui/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/LICENSE` & `sfctools-1.0.5.5/sfctools/gui/LICENSE`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/gui/README.md` & `sfctools-1.0.5.5/sfctools/gui/README.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/misc/mpl_plotting.py` & `sfctools-1.0.5.5/sfctools/misc/mpl_plotting.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/misc/reporting_sheet.py` & `sfctools-1.0.5.5/sfctools/misc/reporting_sheet.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/sfctools/misc/timeseries.py` & `sfctools-1.0.5.5/sfctools/misc/timeseries.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.4/setup.py` & `sfctools-1.0.5.5/setup.py`

 * *Files 4% similar despite different names*

```diff
@@ -21,19 +21,15 @@
 
 package_data = \
 {'': ['*'],
  'sfctools.examples': ['exampleabm/data/processed/*',
                        'exampleabm/data/raw/*',
                        'exampleabm/figures/*',
                        'monte_carlo/result/*'],
- 'sfctools.gui': ['.pytest_cache/*',
-                  '.pytest_cache/v/cache/*',
-                  'attune/projects/*',
-                  'attune/src/styles/bright/*',
-                  'attune/src/styles/dark/*']}
+ 'sfctools.gui': ['attune/src/styles/bright/*', 'attune/src/styles/dark/*']}
 
 install_requires = \
 ['PyQt5>=5.9',
  'attrs',
  'graphviz',
  'matplotlib>=2.0.0',
  'networkx>=2.2',
@@ -47,15 +43,15 @@
  'scipy>1.9.1',
  'seaborn',
  'setuptools>=50.0.0',
  'sympy>=1.10.0']
 
 setup_kwargs = {
     'name': 'sfctools',
-    'version': '1.0.5.4',
+    'version': '1.0.5.5',
     'description': 'Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields.',
     'long_description': '# sfctools - A toolbox for stock-flow consistent, agent-based models\n\nSfctools is a lightweight and easy-to-use Python framework for agent-based macroeconomic, stock-flow consistent (ABM-SFC) modeling. It concentrates on agents in economics and helps you to construct agents, helps you to manage and document your model parameters, assures stock-flow consistency, and facilitates basic economic data structures (such as the balance sheet).\n\n\n## Installation\n\nWe recommend to install sfctools in a fresh Python 3.8 environment. For example, with conda, do\n\n    conda create --name sfcenv python=3.8\n    conda activate sfcenv\n    conda install pip\n\nThen, in a terminal of your choice, type:\n\n    pip install sfctools\n\nsee https://pypi.org/project/sfctools/\n\n## Usage with Graphical User Interface \'Attune\'\n\nType\n\n    python -m sfctools attune\n\nto start the GUI.\n\n## Usage inside Python\n\n```console\nfrom sfctools import Agent,World\nclass MyAgent(Agent):\n    def __init__(self, a):\n        super().__init__(self)\n        self.some_attribute = a\nmy_agent = MyAgent()\nprint(my_agent)\nprint(World().get_agents_of_type("MyAgent"))\n```\n\n## Running examples\n\n\n\n\n| Author Thomas Baldauf, German Aerospace Center (DLR), Curiestr. 4 70563 Stuttgart | thomas.baldauf@dlr.de |\n',
     'author': 'Thomas Baldauf',
     'author_email': 'thomas.baldauf@dlr.de',
     'maintainer': 'Thomas Baldauf, Benjamin Fuchs',
     'maintainer_email': 'thomas.baldauf@dlr.de, benjamin.fuchs@dlr.de',
     'url': 'https://gitlab.com/dlr-ve/esy/sfctools/framework',
```

### Comparing `sfctools-1.0.5.4/PKG-INFO` & `sfctools-1.0.5.5/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sfctools
-Version: 1.0.5.4
+Version: 1.0.5.5
 Summary: Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields.
 Home-page: https://gitlab.com/dlr-ve/esy/sfctools/framework
 License: MIT
 Keywords: stock-flow-consistent,agent-based,agent,macroeconomics,computational economics
 Author: Thomas Baldauf
 Author-email: thomas.baldauf@dlr.de
 Maintainer: Thomas Baldauf, Benjamin Fuchs
```

