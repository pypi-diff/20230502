# Comparing `tmp/sfctools-1.0.5.2.tar.gz` & `tmp/sfctools-1.0.5.3.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "sfctools-1.0.5.2.tar", max compression
+gzip compressed data, was "sfctools-1.0.5.3.tar", max compression
```

## Comparing `sfctools-1.0.5.2.tar` & `sfctools-1.0.5.3.tar`

### file list

```diff
@@ -1,121 +1,261 @@
--rw-r--r--   0        0        0     1157 2022-07-11 05:48:16.488771 sfctools-1.0.5.2/LICENSE
--rw-r--r--   0        0        0     1618 2023-04-27 12:35:27.493935 sfctools-1.0.5.2/pyproject.toml
--rw-r--r--   0        0        0     1308 2023-03-20 13:09:06.583059 sfctools-1.0.5.2/README.md
--rw-r--r--   0        0        0     1938 2022-09-30 18:37:37.788985 sfctools-1.0.5.2/sfctools/__init__.py
--rw-r--r--   0        0        0     2655 2023-03-20 13:09:02.730363 sfctools-1.0.5.2/sfctools/__main__.py
--rw-r--r--   0        0        0        0 2022-07-11 05:48:24.669104 sfctools-1.0.5.2/sfctools/automation/__init__.py
--rw-r--r--   0        0        0    10574 2023-03-20 13:09:06.605805 sfctools-1.0.5.2/sfctools/automation/calibration.py
--rw-r--r--   0        0        0    14589 2023-03-20 13:09:06.606808 sfctools-1.0.5.2/sfctools/automation/cgesolver.py
--rw-r--r--   0        0        0       75 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/automation/README.md
--rw-r--r--   0        0        0     5077 2022-09-30 16:39:54.806932 sfctools-1.0.5.2/sfctools/automation/runner.py
--rw-r--r--   0        0        0        0 2022-07-11 05:48:24.973114 sfctools-1.0.5.2/sfctools/bottomup/__init__.py
--rw-r--r--   0        0        0     8900 2023-03-20 13:09:02.731669 sfctools-1.0.5.2/sfctools/bottomup/matching.py
--rw-r--r--   0        0        0    17465 2023-03-20 13:09:06.607816 sfctools-1.0.5.2/sfctools/bottomup/productiontree.py
--rw-r--r--   0        0        0     6904 2022-07-11 05:48:25.096539 sfctools-1.0.5.2/sfctools/bottomup/stock_manager.py
--rw-r--r--   0        0        0     2737 2022-07-11 05:48:25.136548 sfctools-1.0.5.2/sfctools/bottomup/treestruct.py
--rw-r--r--   0        0        0        0 2022-09-30 17:46:40.211773 sfctools-1.0.5.2/sfctools/core/__init__.py
--rw-r--r--   0        0        0     7572 2022-09-30 18:03:18.887479 sfctools-1.0.5.2/sfctools/core/agent.py
--rw-r--r--   0        0        0     2249 2022-10-06 06:50:49.792046 sfctools-1.0.5.2/sfctools/core/clock.py
--rw-r--r--   0        0        0      495 2023-03-20 13:09:06.608843 sfctools-1.0.5.2/sfctools/core/custom_warnings.py
--rw-r--r--   0        0        0    15032 2023-03-20 13:09:06.609847 sfctools-1.0.5.2/sfctools/core/flow_matrix.py
--rw-r--r--   0        0        0    11632 2023-03-20 13:09:06.609847 sfctools-1.0.5.2/sfctools/core/settings.py
--rw-r--r--   0        0        0      661 2022-10-06 06:49:21.703590 sfctools-1.0.5.2/sfctools/core/singleton.py
--rw-r--r--   0        0        0     7304 2023-03-20 13:09:02.733973 sfctools-1.0.5.2/sfctools/core/world.py
--rw-r--r--   0        0        0        0 2022-07-11 05:48:26.022730 sfctools-1.0.5.2/sfctools/datastructs/__init__.py
--rw-r--r--   0        0        0    32494 2023-03-20 13:09:06.610850 sfctools-1.0.5.2/sfctools/datastructs/balance.py
--rw-r--r--   0        0        0    17441 2023-03-20 13:09:02.735065 sfctools-1.0.5.2/sfctools/datastructs/bank_order_book.py
--rw-r--r--   0        0        0     6175 2023-03-20 13:09:06.611852 sfctools-1.0.5.2/sfctools/datastructs/cash_flow_statement.py
--rw-r--r--   0        0        0     4900 2022-07-11 05:48:26.175050 sfctools-1.0.5.2/sfctools/datastructs/collection.py
--rw-r--r--   0        0        0    14241 2022-12-30 14:49:34.085439 sfctools-1.0.5.2/sfctools/datastructs/income_statement.py
--rw-r--r--   0        0        0     6043 2022-07-11 05:48:26.251065 sfctools-1.0.5.2/sfctools/datastructs/inventory.py
--rw-r--r--   0        0        0     4272 2022-07-11 05:48:26.289074 sfctools-1.0.5.2/sfctools/datastructs/market_registry.py
--rw-r--r--   0        0        0     5313 2022-07-11 05:48:26.401099 sfctools-1.0.5.2/sfctools/datastructs/signalslot.py
--rw-r--r--   0        0        0     2961 2022-10-05 17:45:14.259714 sfctools-1.0.5.2/sfctools/datastructs/worker_registry.py
--rw-r--r--   0        0        0      550 2023-03-20 13:09:06.612897 sfctools-1.0.5.2/sfctools/examples/__init__.py
--rw-r--r--   0        0        0     2491 2023-03-20 13:09:06.614389 sfctools-1.0.5.2/sfctools/examples/balance.py
--rw-r--r--   0        0        0     1701 2023-03-20 13:09:06.615392 sfctools-1.0.5.2/sfctools/examples/basic_example/basic_example.py
--rw-r--r--   0        0        0      202 2023-03-20 13:09:06.615392 sfctools-1.0.5.2/sfctools/examples/basic_example/my_settings.yml
--rw-r--r--   0        0        0     1087 2023-03-20 13:09:06.616409 sfctools-1.0.5.2/sfctools/examples/clock.py
--rw-r--r--   0        0        0     1378 2023-03-20 13:09:06.616409 sfctools-1.0.5.2/sfctools/examples/example_wrapper.py
--rw-r--r--   0        0        0        0 2023-03-20 13:09:06.616409 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/__init__.py
--rw-r--r--   0        0        0     1845 2023-03-20 13:09:06.617415 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/government.py
--rw-r--r--   0        0        0     2370 2023-03-20 13:09:06.617415 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/household.py
--rw-r--r--   0        0        0     2198 2023-03-20 13:09:06.618422 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/production.py
--rw-r--r--   0        0        0     4365 2023-03-20 13:09:06.618422 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/transactions.py
--rw-r--r--   0        0        0      910 2023-03-20 13:09:06.618422 sfctools-1.0.5.2/sfctools/examples/exampleabm/data/preprocess.py
--rw-r--r--   0        0        0    13152 2023-03-20 13:09:06.619427 sfctools-1.0.5.2/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt
--rw-r--r--   0        0        0      818 2023-03-20 13:09:06.619427 sfctools-1.0.5.2/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv
--rw-r--r--   0        0        0    31241 2023-03-20 13:09:06.621437 sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/matrix.png
--rw-r--r--   0        0        0    42423 2023-03-20 13:09:06.622441 sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/outputs.png
--rw-r--r--   0        0        0    43865 2023-03-20 13:09:06.623445 sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/sankey.png
--rw-r--r--   0        0        0     1264 2023-03-20 13:09:06.623445 sfctools-1.0.5.2/sfctools/examples/exampleabm/info.md
--rw-r--r--   0        0        0     3730 2023-03-20 13:09:06.624450 sfctools-1.0.5.2/sfctools/examples/exampleabm/model.py
--rw-r--r--   0        0        0     1148 2023-03-20 13:09:06.624450 sfctools-1.0.5.2/sfctools/examples/exampleabm/settings.yml
--rw-r--r--   0        0        0     2805 2023-03-20 13:09:06.625458 sfctools-1.0.5.2/sfctools/examples/flowmatrix.py
--rw-r--r--   0        0        0      813 2023-03-20 13:09:06.625458 sfctools-1.0.5.2/sfctools/examples/hello_agent.py
--rw-r--r--   0        0        0     1168 2023-03-20 13:09:06.626464 sfctools-1.0.5.2/sfctools/examples/inventory.py
--rw-r--r--   0        0        0     1783 2023-03-20 13:09:06.626464 sfctools-1.0.5.2/sfctools/examples/market_example/market.py
--rw-r--r--   0        0        0     2735 2023-03-20 13:09:06.627470 sfctools-1.0.5.2/sfctools/examples/market_example/market2.py
--rw-r--r--   0        0        0      999 2023-03-20 13:09:06.628492 sfctools-1.0.5.2/sfctools/examples/monte_carlo/monte_carlo.py
--rw-r--r--   0        0        0       28 2023-03-20 13:09:06.628492 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/errors.txt
--rw-r--r--   0        0        0      418 2023-03-20 13:09:06.629556 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.0
--rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.1
--rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.2
--rw-r--r--   0        0        0      413 2023-03-20 13:09:06.630562 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.3
--rw-r--r--   0        0        0      417 2023-03-20 13:09:06.630562 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.4
--rw-r--r--   0        0        0      410 2023-03-20 13:09:06.631568 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.5
--rw-r--r--   0        0        0      417 2023-03-20 13:09:06.631568 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.6
--rw-r--r--   0        0        0      412 2023-03-20 13:09:06.632574 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.7
--rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.8
--rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.9
--rw-r--r--   0        0        0      527 2023-03-20 13:09:06.633581 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.txt
--rw-r--r--   0        0        0      258 2023-03-20 13:09:06.633581 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/progress.txt
--rw-r--r--   0        0        0      184 2023-03-20 13:09:06.634587 sfctools-1.0.5.2/sfctools/examples/monte_carlo/testsettings.yml
--rw-r--r--   0        0        0     3411 2023-03-20 13:09:06.635591 sfctools-1.0.5.2/sfctools/examples/order_book.py
--rw-r--r--   0        0        0      124 2023-03-20 13:09:06.635591 sfctools-1.0.5.2/sfctools/examples/paper_example.py
--rw-r--r--   0        0        0     1471 2023-03-20 13:09:06.636593 sfctools-1.0.5.2/sfctools/examples/signal_slot.py
--rw-r--r--   0        0        0       27 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/.gitignore
--rw-r--r--   0        0        0      854 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/.gitlab-ci.yml
--rw-r--r--   0        0        0       64 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/__init__.py
--rw-r--r--   0        0        0       41 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/attune/.gitignore
--rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/attune/__init__.py
--rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/attune/src/__init__.py
--rw-r--r--   0        0        0    34561 2023-03-20 13:09:06.637593 sfctools-1.0.5.2/sfctools/gui/attune/src/agent_editor.py
--rw-r--r--   0        0        0     6935 2023-03-20 13:09:06.637593 sfctools-1.0.5.2/sfctools/gui/attune/src/code_editor.ui
--rw-r--r--   0        0        0    66050 2023-04-27 12:29:35.676805 sfctools-1.0.5.2/sfctools/gui/attune/src/draw_widget.py
--rw-r--r--   0        0        0     1645 2023-03-20 13:09:02.740428 sfctools-1.0.5.2/sfctools/gui/attune/src/income_viewer.ui
--rw-r--r--   0        0        0    13149 2023-03-20 13:09:06.639594 sfctools-1.0.5.2/sfctools/gui/attune/src/mainloop_editor.py
--rw-r--r--   0        0        0     8176 2023-03-20 13:09:02.741615 sfctools-1.0.5.2/sfctools/gui/attune/src/mamba_interpreter2.py
--rw-r--r--   0        0        0     1334 2023-03-20 13:09:06.640594 sfctools-1.0.5.2/sfctools/gui/attune/src/matrix_viewer.ui
--rw-r--r--   0        0        0    19411 2023-03-20 13:09:06.641594 sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.py
--rw-r--r--   0        0        0    11200 2022-08-09 15:11:37.968071 sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.ui
--rw-r--r--   0        0        0     1066 2023-04-27 08:43:06.249807 sfctools-1.0.5.2/sfctools/gui/attune/src/pandasmodel.py
--rw-r--r--   0        0        0   132046 2023-04-27 12:16:00.124302 sfctools-1.0.5.2/sfctools/gui/attune/src/qtattune.py
--rw-r--r--   0        0        0    24104 2022-08-09 15:11:37.968071 sfctools-1.0.5.2/sfctools/gui/attune/src/resources.py
--rw-r--r--   0        0        0      107 2022-08-09 15:11:37.968071 sfctools-1.0.5.2/sfctools/gui/attune/src/resources.qrc
--rw-r--r--   0        0        0     5927 2023-03-20 13:09:06.643594 sfctools-1.0.5.2/sfctools/gui/attune/src/settings_edit.ui
--rw-r--r--   0        0        0     3012 2023-03-20 13:09:06.644595 sfctools-1.0.5.2/sfctools/gui/attune/src/simulation_edit.ui
--rw-r--r--   0        0        0      216 2023-03-20 13:09:02.744421 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/background.txt
--rw-r--r--   0        0        0     4020 2023-03-20 13:09:06.645595 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/main.txt
--rw-r--r--   0        0        0       62 2023-03-20 13:09:02.745871 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/tables.txt
--rw-r--r--   0        0        0      727 2023-03-20 13:09:02.746872 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/background.txt
--rw-r--r--   0        0        0     4228 2023-03-20 13:09:06.646595 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/main.txt
--rw-r--r--   0        0        0       37 2023-03-20 13:09:02.748074 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/tables.txt
--rw-r--r--   0        0        0     6808 2023-04-27 08:43:06.257210 sfctools-1.0.5.2/sfctools/gui/attune/src/theme_manager.py
--rw-r--r--   0        0        0    84670 2023-04-27 12:23:02.039372 sfctools-1.0.5.2/sfctools/gui/attune/src/transaction_designer_mainwindow.ui
--rw-r--r--   0        0        0     7565 2023-03-20 13:09:02.750296 sfctools-1.0.5.2/sfctools/gui/attune/src/yaml_editor.py
--rw-r--r--   0        0        0      357 2023-03-20 13:09:06.647595 sfctools-1.0.5.2/sfctools/gui/attune_main.py
--rw-r--r--   0        0        0      389 2023-03-20 13:09:06.648596 sfctools-1.0.5.2/sfctools/gui/attune_starter.py
--rw-r--r--   0        0        0    27804 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/CLA.pdf
--rw-r--r--   0        0        0     1434 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/CONTRIBUTING.md
--rw-r--r--   0        0        0     1157 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/LICENSE
--rw-r--r--   0        0        0      819 2023-03-20 13:09:02.736482 sfctools-1.0.5.2/sfctools/gui/README.md
--rw-r--r--   0        0        0       47 2023-03-20 12:39:06.880624 sfctools-1.0.5.2/sfctools/gui/runner.py
--rw-r--r--   0        0        0      275 2023-04-27 11:35:47.715548 sfctools-1.0.5.2/sfctools/gui/sfctheme
--rw-r--r--   0        0        0        0 2022-07-11 05:48:26.867204 sfctools-1.0.5.2/sfctools/misc/__init__.py
--rw-r--r--   0        0        0    18645 2023-03-20 13:09:06.649596 sfctools-1.0.5.2/sfctools/misc/mpl_plotting.py
--rw-r--r--   0        0        0     7795 2023-03-20 13:09:06.650596 sfctools-1.0.5.2/sfctools/misc/reporting_sheet.py
--rw-r--r--   0        0        0     7074 2022-07-11 05:48:26.971227 sfctools-1.0.5.2/sfctools/misc/timeseries.py
--rw-r--r--   0        0        0        0 2023-03-20 13:09:02.751297 sfctools-1.0.5.2/sfctools/test.txt
--rw-r--r--   0        0        0     3174 1970-01-01 00:00:00.000000 sfctools-1.0.5.2/setup.py
--rw-r--r--   0        0        0     2859 1970-01-01 00:00:00.000000 sfctools-1.0.5.2/PKG-INFO
+-rw-r--r--   0        0        0     1157 2022-07-11 05:48:16.488771 sfctools-1.0.5.3/LICENSE
+-rw-r--r--   0        0        0     1618 2023-05-02 05:34:52.510371 sfctools-1.0.5.3/pyproject.toml
+-rw-r--r--   0        0        0     1308 2023-03-20 13:09:06.583059 sfctools-1.0.5.3/README.md
+-rw-r--r--   0        0        0     1938 2022-09-30 18:37:37.788985 sfctools-1.0.5.3/sfctools/__init__.py
+-rw-r--r--   0        0        0     2655 2023-03-20 13:09:02.730363 sfctools-1.0.5.3/sfctools/__main__.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:24.669104 sfctools-1.0.5.3/sfctools/automation/__init__.py
+-rw-r--r--   0        0        0      181 2023-03-16 10:38:20.023327 sfctools-1.0.5.3/sfctools/automation/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      174 2022-07-11 05:48:24.852145 sfctools-1.0.5.3/sfctools/automation/__pycache__/__init__.cpython-37.pyc
+-rw-r--r--   0        0        0      161 2022-07-14 14:53:28.114796 sfctools-1.0.5.3/sfctools/automation/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0     8951 2022-07-11 05:48:24.892154 sfctools-1.0.5.3/sfctools/automation/__pycache__/calibration.cpython-37.pyc
+-rw-r--r--   0        0        0     8898 2022-07-14 14:53:28.119798 sfctools-1.0.5.3/sfctools/automation/__pycache__/calibration.cpython-39.pyc
+-rw-r--r--   0        0        0     4367 2023-03-16 10:38:20.031582 sfctools-1.0.5.3/sfctools/automation/__pycache__/runner.cpython-310.pyc
+-rw-r--r--   0        0        0     4193 2022-07-11 05:48:24.932106 sfctools-1.0.5.3/sfctools/automation/__pycache__/runner.cpython-37.pyc
+-rw-r--r--   0        0        0     4333 2022-09-30 16:40:10.831925 sfctools-1.0.5.3/sfctools/automation/__pycache__/runner.cpython-39.pyc
+-rw-r--r--   0        0        0    10574 2023-03-20 13:09:06.605805 sfctools-1.0.5.3/sfctools/automation/calibration.py
+-rw-r--r--   0        0        0    14589 2023-03-20 13:09:06.606808 sfctools-1.0.5.3/sfctools/automation/cgesolver.py
+-rw-r--r--   0        0        0       75 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/automation/README.md
+-rw-r--r--   0        0        0     5077 2022-09-30 16:39:54.806932 sfctools-1.0.5.3/sfctools/automation/runner.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:24.973114 sfctools-1.0.5.3/sfctools/bottomup/__init__.py
+-rw-r--r--   0        0        0      179 2023-03-16 10:38:19.102455 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      172 2022-07-11 05:48:25.178556 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/__init__.cpython-37.pyc
+-rw-r--r--   0        0        0      159 2022-07-14 14:53:26.693846 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0     8523 2023-03-16 10:38:19.499116 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/matching.cpython-310.pyc
+-rw-r--r--   0        0        0     6980 2022-07-11 05:48:25.218566 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/matching.cpython-37.pyc
+-rw-r--r--   0        0        0     8669 2023-01-19 10:02:01.106949 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/matching.cpython-39.pyc
+-rw-r--r--   0        0        0    11963 2022-07-11 05:48:25.261577 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/productiontree.cpython-37.pyc
+-rw-r--r--   0        0        0    11869 2023-03-16 08:20:45.496012 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/productiontree.cpython-39.pyc
+-rw-r--r--   0        0        0     5897 2023-03-16 10:38:19.114458 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/stock_manager.cpython-310.pyc
+-rw-r--r--   0        0        0     5944 2022-07-11 05:48:25.303584 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/stock_manager.cpython-37.pyc
+-rw-r--r--   0        0        0     5923 2022-07-14 14:53:26.695845 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/stock_manager.cpython-39.pyc
+-rw-r--r--   0        0        0     2864 2022-07-11 05:48:25.347595 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/treestruct.cpython-37.pyc
+-rw-r--r--   0        0        0     2865 2022-07-14 14:53:28.124799 sfctools-1.0.5.3/sfctools/bottomup/__pycache__/treestruct.cpython-39.pyc
+-rw-r--r--   0        0        0     8900 2023-03-20 13:09:02.731669 sfctools-1.0.5.3/sfctools/bottomup/matching.py
+-rw-r--r--   0        0        0    17465 2023-03-20 13:09:06.607816 sfctools-1.0.5.3/sfctools/bottomup/productiontree.py
+-rw-r--r--   0        0        0     6904 2022-07-11 05:48:25.096539 sfctools-1.0.5.3/sfctools/bottomup/stock_manager.py
+-rw-r--r--   0        0        0     2737 2022-07-11 05:48:25.136548 sfctools-1.0.5.3/sfctools/bottomup/treestruct.py
+-rw-r--r--   0        0        0        0 2022-09-30 17:46:40.211773 sfctools-1.0.5.3/sfctools/core/__init__.py
+-rw-r--r--   0        0        0      175 2023-03-16 10:38:18.224225 sfctools-1.0.5.3/sfctools/core/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      168 2022-07-11 05:48:25.714915 sfctools-1.0.5.3/sfctools/core/__pycache__/__init__.cpython-37.pyc
+-rw-r--r--   0        0        0      173 2022-09-30 18:17:01.307791 sfctools-1.0.5.3/sfctools/core/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0     7081 2023-03-16 10:38:18.232227 sfctools-1.0.5.3/sfctools/core/__pycache__/agent.cpython-310.pyc
+-rw-r--r--   0        0        0     7065 2022-07-11 05:48:25.754924 sfctools-1.0.5.3/sfctools/core/__pycache__/agent.cpython-37.pyc
+-rw-r--r--   0        0        0     7116 2022-09-30 18:17:01.309791 sfctools-1.0.5.3/sfctools/core/__pycache__/agent.cpython-39.pyc
+-rw-r--r--   0        0        0     2519 2023-03-16 10:38:18.462762 sfctools-1.0.5.3/sfctools/core/__pycache__/clock.cpython-310.pyc
+-rw-r--r--   0        0        0     2228 2022-07-11 05:48:25.792933 sfctools-1.0.5.3/sfctools/core/__pycache__/clock.cpython-37.pyc
+-rw-r--r--   0        0        0     2523 2022-10-06 07:42:06.067716 sfctools-1.0.5.3/sfctools/core/__pycache__/clock.cpython-39.pyc
+-rw-r--r--   0        0        0      700 2023-03-16 10:38:18.488869 sfctools-1.0.5.3/sfctools/core/__pycache__/custom_warnings.cpython-310.pyc
+-rw-r--r--   0        0        0      689 2022-07-11 05:48:25.831942 sfctools-1.0.5.3/sfctools/core/__pycache__/custom_warnings.cpython-37.pyc
+-rw-r--r--   0        0        0      697 2023-03-20 10:43:57.805837 sfctools-1.0.5.3/sfctools/core/__pycache__/custom_warnings.cpython-39.pyc
+-rw-r--r--   0        0        0    12097 2023-03-16 10:38:19.125461 sfctools-1.0.5.3/sfctools/core/__pycache__/flow_matrix.cpython-310.pyc
+-rw-r--r--   0        0        0    10804 2022-07-11 05:48:25.870600 sfctools-1.0.5.3/sfctools/core/__pycache__/flow_matrix.cpython-37.pyc
+-rw-r--r--   0        0        0    12108 2023-03-15 14:52:01.430183 sfctools-1.0.5.3/sfctools/core/__pycache__/flow_matrix.cpython-39.pyc
+-rw-r--r--   0        0        0     9045 2023-03-16 10:38:19.069972 sfctools-1.0.5.3/sfctools/core/__pycache__/settings.cpython-310.pyc
+-rw-r--r--   0        0        0     8563 2022-07-11 05:48:25.909608 sfctools-1.0.5.3/sfctools/core/__pycache__/settings.cpython-37.pyc
+-rw-r--r--   0        0        0     8975 2023-03-20 11:25:40.651219 sfctools-1.0.5.3/sfctools/core/__pycache__/settings.cpython-39.pyc
+-rw-r--r--   0        0        0     1115 2023-03-16 10:38:18.468828 sfctools-1.0.5.3/sfctools/core/__pycache__/singleton.cpython-310.pyc
+-rw-r--r--   0        0        0     1100 2022-07-11 05:48:25.947509 sfctools-1.0.5.3/sfctools/core/__pycache__/singleton.cpython-37.pyc
+-rw-r--r--   0        0        0     1111 2022-10-06 07:42:06.067716 sfctools-1.0.5.3/sfctools/core/__pycache__/singleton.cpython-39.pyc
+-rw-r--r--   0        0        0     5689 2023-03-16 10:38:18.240234 sfctools-1.0.5.3/sfctools/core/__pycache__/world.cpython-310.pyc
+-rw-r--r--   0        0        0     5101 2022-07-11 05:48:25.984517 sfctools-1.0.5.3/sfctools/core/__pycache__/world.cpython-37.pyc
+-rw-r--r--   0        0        0     5678 2023-01-19 10:02:00.514230 sfctools-1.0.5.3/sfctools/core/__pycache__/world.cpython-39.pyc
+-rw-r--r--   0        0        0     7572 2022-09-30 18:03:18.887479 sfctools-1.0.5.3/sfctools/core/agent.py
+-rw-r--r--   0        0        0     2249 2022-10-06 06:50:49.792046 sfctools-1.0.5.3/sfctools/core/clock.py
+-rw-r--r--   0        0        0      495 2023-03-20 13:09:06.608843 sfctools-1.0.5.3/sfctools/core/custom_warnings.py
+-rw-r--r--   0        0        0    15032 2023-03-20 13:09:06.609847 sfctools-1.0.5.3/sfctools/core/flow_matrix.py
+-rw-r--r--   0        0        0    11632 2023-03-20 13:09:06.609847 sfctools-1.0.5.3/sfctools/core/settings.py
+-rw-r--r--   0        0        0      661 2022-10-06 06:49:21.703590 sfctools-1.0.5.3/sfctools/core/singleton.py
+-rw-r--r--   0        0        0     7304 2023-03-20 13:09:02.733973 sfctools-1.0.5.3/sfctools/core/world.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:26.022730 sfctools-1.0.5.3/sfctools/datastructs/__init__.py
+-rw-r--r--   0        0        0      182 2023-03-16 10:38:18.241287 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      175 2022-07-11 05:48:26.477116 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/__init__.cpython-37.pyc
+-rw-r--r--   0        0        0      162 2022-07-14 14:53:25.760835 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0    21890 2023-03-16 10:38:19.059018 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/balance.cpython-310.pyc
+-rw-r--r--   0        0        0    16862 2022-07-11 05:48:26.516125 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/balance.cpython-37.pyc
+-rw-r--r--   0        0        0    21984 2023-03-16 07:14:59.247947 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/balance.cpython-39.pyc
+-rw-r--r--   0        0        0    13764 2023-03-16 10:38:19.488458 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/bank_order_book.cpython-310.pyc
+-rw-r--r--   0        0        0    13090 2022-07-11 05:48:26.560135 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/bank_order_book.cpython-37.pyc
+-rw-r--r--   0        0        0    13939 2023-01-19 10:02:01.103949 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/bank_order_book.cpython-39.pyc
+-rw-r--r--   0        0        0     6602 2023-03-16 10:38:19.464002 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-310.pyc
+-rw-r--r--   0        0        0     5819 2022-07-11 05:48:26.603144 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-37.pyc
+-rw-r--r--   0        0        0     6634 2023-02-07 11:42:52.752256 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-39.pyc
+-rw-r--r--   0        0        0     4736 2023-03-16 10:38:18.251830 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/collection.cpython-310.pyc
+-rw-r--r--   0        0        0     4707 2022-07-11 05:48:26.644154 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/collection.cpython-37.pyc
+-rw-r--r--   0        0        0     4720 2022-07-14 14:53:25.761835 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/collection.cpython-39.pyc
+-rw-r--r--   0        0        0    13268 2023-03-16 10:38:19.455788 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/income_statement.cpython-310.pyc
+-rw-r--r--   0        0        0    13260 2022-07-11 05:48:26.686163 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/income_statement.cpython-37.pyc
+-rw-r--r--   0        0        0    13330 2023-01-19 10:02:01.098948 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/income_statement.cpython-39.pyc
+-rw-r--r--   0        0        0     5641 2023-03-16 10:38:20.001156 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/inventory.cpython-310.pyc
+-rw-r--r--   0        0        0     5657 2022-07-11 05:48:26.723171 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/inventory.cpython-37.pyc
+-rw-r--r--   0        0        0     5611 2022-07-14 14:53:28.110796 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/inventory.cpython-39.pyc
+-rw-r--r--   0        0        0     5165 2023-03-16 10:38:20.013167 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/market_registry.cpython-310.pyc
+-rw-r--r--   0        0        0     5145 2022-07-11 05:48:26.760179 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/market_registry.cpython-37.pyc
+-rw-r--r--   0        0        0     5169 2022-07-14 14:53:28.111795 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/market_registry.cpython-39.pyc
+-rw-r--r--   0        0        0     5830 2023-03-16 10:38:19.476803 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/signalslot.cpython-310.pyc
+-rw-r--r--   0        0        0     6108 2022-07-11 05:48:26.796187 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/signalslot.cpython-37.pyc
+-rw-r--r--   0        0        0     6004 2022-07-14 14:53:28.104795 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/signalslot.cpython-39.pyc
+-rw-r--r--   0        0        0     3673 2023-03-16 10:38:20.021317 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/worker_registry.cpython-310.pyc
+-rw-r--r--   0        0        0     3063 2022-07-11 05:48:26.831196 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/worker_registry.cpython-37.pyc
+-rw-r--r--   0        0        0     3669 2022-10-06 07:42:06.567829 sfctools-1.0.5.3/sfctools/datastructs/__pycache__/worker_registry.cpython-39.pyc
+-rw-r--r--   0        0        0    32494 2023-03-20 13:09:06.610850 sfctools-1.0.5.3/sfctools/datastructs/balance.py
+-rw-r--r--   0        0        0    17441 2023-03-20 13:09:02.735065 sfctools-1.0.5.3/sfctools/datastructs/bank_order_book.py
+-rw-r--r--   0        0        0     6175 2023-03-20 13:09:06.611852 sfctools-1.0.5.3/sfctools/datastructs/cash_flow_statement.py
+-rw-r--r--   0        0        0     4900 2022-07-11 05:48:26.175050 sfctools-1.0.5.3/sfctools/datastructs/collection.py
+-rw-r--r--   0        0        0    14241 2022-12-30 14:49:34.085439 sfctools-1.0.5.3/sfctools/datastructs/income_statement.py
+-rw-r--r--   0        0        0     6043 2022-07-11 05:48:26.251065 sfctools-1.0.5.3/sfctools/datastructs/inventory.py
+-rw-r--r--   0        0        0     4272 2022-07-11 05:48:26.289074 sfctools-1.0.5.3/sfctools/datastructs/market_registry.py
+-rw-r--r--   0        0        0     5313 2022-07-11 05:48:26.401099 sfctools-1.0.5.3/sfctools/datastructs/signalslot.py
+-rw-r--r--   0        0        0     2961 2022-10-05 17:45:14.259714 sfctools-1.0.5.3/sfctools/datastructs/worker_registry.py
+-rw-r--r--   0        0        0      550 2023-03-20 13:09:06.612897 sfctools-1.0.5.3/sfctools/examples/__init__.py
+-rw-r--r--   0        0        0      833 2023-03-20 09:18:37.178882 sfctools-1.0.5.3/sfctools/examples/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0     3007 2023-03-20 09:33:42.712207 sfctools-1.0.5.3/sfctools/examples/__pycache__/balance.cpython-39.pyc
+-rw-r--r--   0        0        0     1454 2023-03-20 08:52:08.670778 sfctools-1.0.5.3/sfctools/examples/__pycache__/clock.cpython-39.pyc
+-rw-r--r--   0        0        0     1593 2023-03-20 08:43:41.586115 sfctools-1.0.5.3/sfctools/examples/__pycache__/example_wrapper.cpython-39.pyc
+-rw-r--r--   0        0        0     3895 2023-03-20 09:32:19.561606 sfctools-1.0.5.3/sfctools/examples/__pycache__/flowmatrix.cpython-39.pyc
+-rw-r--r--   0        0        0     1447 2023-03-20 08:54:47.185338 sfctools-1.0.5.3/sfctools/examples/__pycache__/hello_agent.cpython-39.pyc
+-rw-r--r--   0        0        0     1600 2023-03-20 08:54:47.195574 sfctools-1.0.5.3/sfctools/examples/__pycache__/inventory.cpython-39.pyc
+-rw-r--r--   0        0        0     3730 2023-03-20 08:56:31.554149 sfctools-1.0.5.3/sfctools/examples/__pycache__/order_book.cpython-39.pyc
+-rw-r--r--   0        0        0     1937 2023-03-20 08:54:47.193426 sfctools-1.0.5.3/sfctools/examples/__pycache__/signal_slot.cpython-39.pyc
+-rw-r--r--   0        0        0     2491 2023-03-20 13:09:06.614389 sfctools-1.0.5.3/sfctools/examples/balance.py
+-rw-r--r--   0        0        0     2091 2023-03-20 09:14:35.444195 sfctools-1.0.5.3/sfctools/examples/basic_example/__pycache__/basic_example.cpython-39.pyc
+-rw-r--r--   0        0        0     1701 2023-03-20 13:09:06.615392 sfctools-1.0.5.3/sfctools/examples/basic_example/basic_example.py
+-rw-r--r--   0        0        0      202 2023-03-20 13:09:06.615392 sfctools-1.0.5.3/sfctools/examples/basic_example/my_settings.yml
+-rw-r--r--   0        0        0     1087 2023-03-20 13:09:06.616409 sfctools-1.0.5.3/sfctools/examples/clock.py
+-rw-r--r--   0        0        0     1378 2023-03-20 13:09:06.616409 sfctools-1.0.5.3/sfctools/examples/example_wrapper.py
+-rw-r--r--   0        0        0     2872 2023-03-20 09:33:42.718208 sfctools-1.0.5.3/sfctools/examples/exampleabm/__pycache__/model.cpython-39.pyc
+-rw-r--r--   0        0        0        0 2023-03-20 13:09:06.616409 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/__init__.py
+-rw-r--r--   0        0        0      204 2022-10-06 09:05:11.681416 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0     2159 2022-10-06 09:05:12.296862 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/__pycache__/government.cpython-39.pyc
+-rw-r--r--   0        0        0     2219 2022-10-06 09:05:11.682417 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/__pycache__/household.cpython-39.pyc
+-rw-r--r--   0        0        0     2369 2022-10-06 09:05:12.294862 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/__pycache__/production.cpython-39.pyc
+-rw-r--r--   0        0        0     2824 2022-10-06 09:05:12.293860 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/__pycache__/transactions.cpython-39.pyc
+-rw-r--r--   0        0        0     1845 2023-03-20 13:09:06.617415 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/government.py
+-rw-r--r--   0        0        0     2370 2023-03-20 13:09:06.617415 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/household.py
+-rw-r--r--   0        0        0     2198 2023-03-20 13:09:06.618422 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/production.py
+-rw-r--r--   0        0        0     4365 2023-03-20 13:09:06.618422 sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/transactions.py
+-rw-r--r--   0        0        0      910 2023-03-20 13:09:06.618422 sfctools-1.0.5.3/sfctools/examples/exampleabm/data/preprocess.py
+-rw-r--r--   0        0        0    13152 2023-03-20 13:09:06.619427 sfctools-1.0.5.3/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt
+-rw-r--r--   0        0        0      818 2023-03-20 13:09:06.619427 sfctools-1.0.5.3/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv
+-rw-r--r--   0        0        0    31241 2023-03-20 13:09:06.621437 sfctools-1.0.5.3/sfctools/examples/exampleabm/figures/matrix.png
+-rw-r--r--   0        0        0    42423 2023-03-20 13:09:06.622441 sfctools-1.0.5.3/sfctools/examples/exampleabm/figures/outputs.png
+-rw-r--r--   0        0        0    43865 2023-03-20 13:09:06.623445 sfctools-1.0.5.3/sfctools/examples/exampleabm/figures/sankey.png
+-rw-r--r--   0        0        0     1264 2023-03-20 13:09:06.623445 sfctools-1.0.5.3/sfctools/examples/exampleabm/info.md
+-rw-r--r--   0        0        0     3730 2023-03-20 13:09:06.624450 sfctools-1.0.5.3/sfctools/examples/exampleabm/model.py
+-rw-r--r--   0        0        0     1148 2023-03-20 13:09:06.624450 sfctools-1.0.5.3/sfctools/examples/exampleabm/settings.yml
+-rw-r--r--   0        0        0     2805 2023-03-20 13:09:06.625458 sfctools-1.0.5.3/sfctools/examples/flowmatrix.py
+-rw-r--r--   0        0        0      813 2023-03-20 13:09:06.625458 sfctools-1.0.5.3/sfctools/examples/hello_agent.py
+-rw-r--r--   0        0        0     1168 2023-03-20 13:09:06.626464 sfctools-1.0.5.3/sfctools/examples/inventory.py
+-rw-r--r--   0        0        0     2740 2023-03-20 09:33:42.726210 sfctools-1.0.5.3/sfctools/examples/market_example/__pycache__/market.cpython-39.pyc
+-rw-r--r--   0        0        0     3748 2023-03-20 09:33:42.728212 sfctools-1.0.5.3/sfctools/examples/market_example/__pycache__/market2.cpython-39.pyc
+-rw-r--r--   0        0        0     1783 2023-03-20 13:09:06.626464 sfctools-1.0.5.3/sfctools/examples/market_example/market.py
+-rw-r--r--   0        0        0     2735 2023-03-20 13:09:06.627470 sfctools-1.0.5.3/sfctools/examples/market_example/market2.py
+-rw-r--r--   0        0        0     1330 2023-03-20 09:33:42.730224 sfctools-1.0.5.3/sfctools/examples/monte_carlo/__pycache__/monte_carlo.cpython-39.pyc
+-rw-r--r--   0        0        0      999 2023-03-20 13:09:06.628492 sfctools-1.0.5.3/sfctools/examples/monte_carlo/monte_carlo.py
+-rw-r--r--   0        0        0       28 2023-03-20 13:09:06.628492 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/errors.txt
+-rw-r--r--   0        0        0      418 2023-03-20 13:09:06.629556 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.0
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.1
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.2
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.630562 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.3
+-rw-r--r--   0        0        0      417 2023-03-20 13:09:06.630562 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.4
+-rw-r--r--   0        0        0      410 2023-03-20 13:09:06.631568 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.5
+-rw-r--r--   0        0        0      417 2023-03-20 13:09:06.631568 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.6
+-rw-r--r--   0        0        0      412 2023-03-20 13:09:06.632574 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.7
+-rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.8
+-rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.9
+-rw-r--r--   0        0        0      527 2023-03-20 13:09:06.633581 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.txt
+-rw-r--r--   0        0        0      258 2023-03-20 13:09:06.633581 sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/progress.txt
+-rw-r--r--   0        0        0      184 2023-03-20 13:09:06.634587 sfctools-1.0.5.3/sfctools/examples/monte_carlo/testsettings.yml
+-rw-r--r--   0        0        0     3411 2023-03-20 13:09:06.635591 sfctools-1.0.5.3/sfctools/examples/order_book.py
+-rw-r--r--   0        0        0      124 2023-03-20 13:09:06.635591 sfctools-1.0.5.3/sfctools/examples/paper_example.py
+-rw-r--r--   0        0        0     1471 2023-03-20 13:09:06.636593 sfctools-1.0.5.3/sfctools/examples/signal_slot.py
+-rw-r--r--   0        0        0       27 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/.gitignore
+-rw-r--r--   0        0        0      854 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/.gitlab-ci.yml
+-rw-r--r--   0        0        0       39 2023-01-24 08:33:15.193475 sfctools-1.0.5.3/sfctools/gui/.pytest_cache/.gitignore
+-rw-r--r--   0        0        0      191 2023-01-24 08:33:15.193475 sfctools-1.0.5.3/sfctools/gui/.pytest_cache/CACHEDIR.TAG
+-rw-r--r--   0        0        0      310 2023-01-24 08:33:15.192472 sfctools-1.0.5.3/sfctools/gui/.pytest_cache/README.md
+-rw-r--r--   0        0        0        2 2023-01-24 08:33:15.193475 sfctools-1.0.5.3/sfctools/gui/.pytest_cache/v/cache/nodeids
+-rw-r--r--   0        0        0        2 2023-01-24 08:33:15.194472 sfctools-1.0.5.3/sfctools/gui/.pytest_cache/v/cache/stepwise
+-rw-r--r--   0        0        0       64 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/__init__.py
+-rw-r--r--   0        0        0      243 2023-03-16 10:38:20.055180 sfctools-1.0.5.3/sfctools/gui/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      241 2022-09-30 07:48:48.099780 sfctools-1.0.5.3/sfctools/gui/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0     1960 2023-03-16 10:38:20.062235 sfctools-1.0.5.3/sfctools/gui/__pycache__/attune_main.cpython-310.pyc
+-rw-r--r--   0        0        0      855 2023-03-20 10:44:38.447093 sfctools-1.0.5.3/sfctools/gui/__pycache__/attune_main.cpython-39.pyc
+-rw-r--r--   0        0        0     2005 2022-07-29 14:53:58.284631 sfctools-1.0.5.3/sfctools/gui/__pycache__/attune_starter.cpython-39.pyc
+-rw-r--r--   0        0        0       41 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/attune/.gitignore
+-rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/attune/__init__.py
+-rw-r--r--   0        0        0      181 2023-03-16 10:38:20.177666 sfctools-1.0.5.3/sfctools/gui/attune/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      179 2022-08-10 04:14:09.129434 sfctools-1.0.5.3/sfctools/gui/attune/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:42.091729 sfctools-1.0.5.3/sfctools/gui/attune/projects/.gitkeep
+-rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/attune/src/__init__.py
+-rw-r--r--   0        0        0      185 2023-03-16 10:38:20.178668 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      183 2022-08-10 04:14:09.132435 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0    20459 2023-03-16 10:38:21.506165 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/agent_editor.cpython-310.pyc
+-rw-r--r--   0        0        0    20423 2023-04-27 08:43:40.018893 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/agent_editor.cpython-39.pyc
+-rw-r--r--   0        0        0    27791 2023-03-16 10:38:21.482759 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/draw_widget.cpython-310.pyc
+-rw-r--r--   0        0        0    30587 2023-04-27 13:02:30.424086 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/draw_widget.cpython-39.pyc
+-rw-r--r--   0        0        0    10246 2023-03-16 10:38:20.975792 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/mainloop_editor.cpython-310.pyc
+-rw-r--r--   0        0        0    10577 2023-04-27 16:04:27.693988 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/mainloop_editor.cpython-39.pyc
+-rw-r--r--   0        0        0     4761 2023-03-16 10:38:20.964542 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/mamba_interpreter2.cpython-310.pyc
+-rw-r--r--   0        0        0     4821 2023-04-27 08:43:39.534405 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/mamba_interpreter2.cpython-39.pyc
+-rw-r--r--   0        0        0    12619 2023-03-16 10:38:20.989896 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/output_display.cpython-310.pyc
+-rw-r--r--   0        0        0    12551 2023-04-27 08:43:39.557140 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/output_display.cpython-39.pyc
+-rw-r--r--   0        0        0     1695 2023-03-16 10:38:20.953703 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/pandasmodel.cpython-310.pyc
+-rw-r--r--   0        0        0     1706 2023-04-27 08:43:39.525108 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/pandasmodel.cpython-39.pyc
+-rw-r--r--   0        0        0    65699 2023-03-16 10:38:20.204674 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/qtattune.cpython-310.pyc
+-rw-r--r--   0        0        0    68085 2023-04-27 16:11:05.352492 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/qtattune.cpython-39.pyc
+-rw-r--r--   0        0        0     6502 2023-03-16 10:38:21.469679 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/resources.cpython-310.pyc
+-rw-r--r--   0        0        0     6520 2022-08-10 04:14:13.291061 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/resources.cpython-39.pyc
+-rw-r--r--   0        0        0     5017 2023-03-16 10:38:21.524693 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/theme_manager.cpython-310.pyc
+-rw-r--r--   0        0        0     5152 2023-04-27 16:20:56.032033 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/theme_manager.cpython-39.pyc
+-rw-r--r--   0        0        0     6646 2023-03-16 10:38:21.516295 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/yaml_editor.cpython-310.pyc
+-rw-r--r--   0        0        0     6596 2023-04-27 08:43:40.028504 sfctools-1.0.5.3/sfctools/gui/attune/src/__pycache__/yaml_editor.cpython-39.pyc
+-rw-r--r--   0        0        0    34561 2023-03-20 13:09:06.637593 sfctools-1.0.5.3/sfctools/gui/attune/src/agent_editor.py
+-rw-r--r--   0        0        0     6944 2023-04-27 13:29:45.411196 sfctools-1.0.5.3/sfctools/gui/attune/src/code_editor.ui
+-rw-r--r--   0        0        0    66127 2023-04-27 13:02:27.854230 sfctools-1.0.5.3/sfctools/gui/attune/src/draw_widget.py
+-rw-r--r--   0        0        0     1645 2023-03-20 13:09:02.740428 sfctools-1.0.5.3/sfctools/gui/attune/src/income_viewer.ui
+-rw-r--r--   0        0        0    13479 2023-04-27 16:04:24.928785 sfctools-1.0.5.3/sfctools/gui/attune/src/mainloop_editor.py
+-rw-r--r--   0        0        0     8176 2023-03-20 13:09:02.741615 sfctools-1.0.5.3/sfctools/gui/attune/src/mamba_interpreter2.py
+-rw-r--r--   0        0        0     1334 2023-03-20 13:09:06.640594 sfctools-1.0.5.3/sfctools/gui/attune/src/matrix_viewer.ui
+-rw-r--r--   0        0        0    19411 2023-03-20 13:09:06.641594 sfctools-1.0.5.3/sfctools/gui/attune/src/output_display.py
+-rw-r--r--   0        0        0    11200 2022-08-09 15:11:37.968071 sfctools-1.0.5.3/sfctools/gui/attune/src/output_display.ui
+-rw-r--r--   0        0        0     1066 2023-04-27 08:43:06.249807 sfctools-1.0.5.3/sfctools/gui/attune/src/pandasmodel.py
+-rw-r--r--   0        0        0   133675 2023-04-27 16:11:03.797397 sfctools-1.0.5.3/sfctools/gui/attune/src/qtattune.py
+-rw-r--r--   0        0        0    24104 2022-08-09 15:11:37.968071 sfctools-1.0.5.3/sfctools/gui/attune/src/resources.py
+-rw-r--r--   0        0        0      107 2022-08-09 15:11:37.968071 sfctools-1.0.5.3/sfctools/gui/attune/src/resources.qrc
+-rw-r--r--   0        0        0     1259 2023-04-27 13:07:33.967008 sfctools-1.0.5.3/sfctools/gui/attune/src/search_dialog.ui
+-rw-r--r--   0        0        0     5927 2023-03-20 13:09:06.643594 sfctools-1.0.5.3/sfctools/gui/attune/src/settings_edit.ui
+-rw-r--r--   0        0        0     3012 2023-03-20 13:09:06.644595 sfctools-1.0.5.3/sfctools/gui/attune/src/simulation_edit.ui
+-rw-r--r--   0        0        0      216 2023-03-20 13:09:02.744421 sfctools-1.0.5.3/sfctools/gui/attune/src/styles/bright/background.txt
+-rw-r--r--   0        0        0     4020 2023-03-20 13:09:06.645595 sfctools-1.0.5.3/sfctools/gui/attune/src/styles/bright/main.txt
+-rw-r--r--   0        0        0       62 2023-03-20 13:09:02.745871 sfctools-1.0.5.3/sfctools/gui/attune/src/styles/bright/tables.txt
+-rw-r--r--   0        0        0      727 2023-03-20 13:09:02.746872 sfctools-1.0.5.3/sfctools/gui/attune/src/styles/dark/background.txt
+-rw-r--r--   0        0        0     4228 2023-03-20 13:09:06.646595 sfctools-1.0.5.3/sfctools/gui/attune/src/styles/dark/main.txt
+-rw-r--r--   0        0        0       37 2023-03-20 13:09:02.748074 sfctools-1.0.5.3/sfctools/gui/attune/src/styles/dark/tables.txt
+-rw-r--r--   0        0        0     6964 2023-04-27 16:25:31.372347 sfctools-1.0.5.3/sfctools/gui/attune/src/theme_manager.py
+-rw-r--r--   0        0        0    84670 2023-04-27 16:22:28.292813 sfctools-1.0.5.3/sfctools/gui/attune/src/transaction_designer_mainwindow.ui
+-rw-r--r--   0        0        0     7565 2023-03-20 13:09:02.750296 sfctools-1.0.5.3/sfctools/gui/attune/src/yaml_editor.py
+-rw-r--r--   0        0        0      357 2023-03-20 13:09:06.647595 sfctools-1.0.5.3/sfctools/gui/attune_main.py
+-rw-r--r--   0        0        0      389 2023-03-20 13:09:06.648596 sfctools-1.0.5.3/sfctools/gui/attune_starter.py
+-rw-r--r--   0        0        0    27804 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/CLA.pdf
+-rw-r--r--   0        0        0     1434 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/CONTRIBUTING.md
+-rw-r--r--   0        0        0     1157 2022-08-09 15:11:37.952444 sfctools-1.0.5.3/sfctools/gui/LICENSE
+-rw-r--r--   0        0        0      819 2023-03-20 13:09:02.736482 sfctools-1.0.5.3/sfctools/gui/README.md
+-rw-r--r--   0        0        0       47 2023-03-20 12:39:06.880624 sfctools-1.0.5.3/sfctools/gui/runner.py
+-rw-r--r--   0        0        0      275 2023-04-27 11:35:47.715548 sfctools-1.0.5.3/sfctools/gui/sfctheme
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:26.867204 sfctools-1.0.5.3/sfctools/misc/__init__.py
+-rw-r--r--   0        0        0      175 2023-03-16 10:38:20.032660 sfctools-1.0.5.3/sfctools/misc/__pycache__/__init__.cpython-310.pyc
+-rw-r--r--   0        0        0      168 2022-07-11 05:48:27.008235 sfctools-1.0.5.3/sfctools/misc/__pycache__/__init__.cpython-37.pyc
+-rw-r--r--   0        0        0      155 2022-07-14 14:53:28.094792 sfctools-1.0.5.3/sfctools/misc/__pycache__/__init__.cpython-39.pyc
+-rw-r--r--   0        0        0    12027 2022-07-11 05:48:27.042672 sfctools-1.0.5.3/sfctools/misc/__pycache__/mpl_plotting.cpython-37.pyc
+-rw-r--r--   0        0        0    13303 2023-03-16 07:14:59.951082 sfctools-1.0.5.3/sfctools/misc/__pycache__/mpl_plotting.cpython-39.pyc
+-rw-r--r--   0        0        0     7596 2023-03-16 10:38:20.042421 sfctools-1.0.5.3/sfctools/misc/__pycache__/reporting_sheet.cpython-310.pyc
+-rw-r--r--   0        0        0     6074 2022-07-11 05:48:27.075993 sfctools-1.0.5.3/sfctools/misc/__pycache__/reporting_sheet.cpython-37.pyc
+-rw-r--r--   0        0        0     7626 2023-03-16 07:21:02.159986 sfctools-1.0.5.3/sfctools/misc/__pycache__/reporting_sheet.cpython-39.pyc
+-rw-r--r--   0        0        0     6427 2023-03-16 10:38:21.002901 sfctools-1.0.5.3/sfctools/misc/__pycache__/timeseries.cpython-310.pyc
+-rw-r--r--   0        0        0     6532 2022-07-11 05:48:27.110000 sfctools-1.0.5.3/sfctools/misc/__pycache__/timeseries.cpython-37.pyc
+-rw-r--r--   0        0        0     6401 2022-07-14 14:53:28.126799 sfctools-1.0.5.3/sfctools/misc/__pycache__/timeseries.cpython-39.pyc
+-rw-r--r--   0        0        0    18645 2023-03-20 13:09:06.649596 sfctools-1.0.5.3/sfctools/misc/mpl_plotting.py
+-rw-r--r--   0        0        0     7795 2023-03-20 13:09:06.650596 sfctools-1.0.5.3/sfctools/misc/reporting_sheet.py
+-rw-r--r--   0        0        0     7074 2022-07-11 05:48:26.971227 sfctools-1.0.5.3/sfctools/misc/timeseries.py
+-rw-r--r--   0        0        0     3313 1970-01-01 00:00:00.000000 sfctools-1.0.5.3/setup.py
+-rw-r--r--   0        0        0     2859 1970-01-01 00:00:00.000000 sfctools-1.0.5.3/PKG-INFO
```

### Comparing `sfctools-1.0.5.2/LICENSE` & `sfctools-1.0.5.3/LICENSE`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/pyproject.toml` & `sfctools-1.0.5.3/pyproject.toml`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "sfctools"
-version = "1.0.5.2"
+version = "1.0.5.3"
 description = "Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields."
 
 authors = ["Thomas Baldauf <thomas.baldauf@dlr.de>"]
 license = "MIT"
 maintainers = ["Thomas Baldauf, Benjamin Fuchs <thomas.baldauf@dlr.de, benjamin.fuchs@dlr.de>"]
 homepage = 'https://gitlab.com/dlr-ve/esy/sfctools/framework'
 documentation = 'https://sfctools-framework.readthedocs.io/en/latest/'
```

### Comparing `sfctools-1.0.5.2/README.md` & `sfctools-1.0.5.3/README.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/__init__.py` & `sfctools-1.0.5.3/sfctools/__init__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/__main__.py` & `sfctools-1.0.5.3/sfctools/__main__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/automation/calibration.py` & `sfctools-1.0.5.3/sfctools/automation/calibration.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/automation/cgesolver.py` & `sfctools-1.0.5.3/sfctools/automation/cgesolver.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/automation/runner.py` & `sfctools-1.0.5.3/sfctools/automation/runner.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/bottomup/matching.py` & `sfctools-1.0.5.3/sfctools/bottomup/matching.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/bottomup/productiontree.py` & `sfctools-1.0.5.3/sfctools/bottomup/productiontree.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/bottomup/stock_manager.py` & `sfctools-1.0.5.3/sfctools/bottomup/stock_manager.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/bottomup/treestruct.py` & `sfctools-1.0.5.3/sfctools/bottomup/treestruct.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/core/agent.py` & `sfctools-1.0.5.3/sfctools/core/agent.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/core/clock.py` & `sfctools-1.0.5.3/sfctools/core/clock.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/core/flow_matrix.py` & `sfctools-1.0.5.3/sfctools/core/flow_matrix.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/core/settings.py` & `sfctools-1.0.5.3/sfctools/core/settings.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/core/singleton.py` & `sfctools-1.0.5.3/sfctools/core/singleton.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/core/world.py` & `sfctools-1.0.5.3/sfctools/core/world.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/balance.py` & `sfctools-1.0.5.3/sfctools/datastructs/balance.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/bank_order_book.py` & `sfctools-1.0.5.3/sfctools/datastructs/bank_order_book.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/cash_flow_statement.py` & `sfctools-1.0.5.3/sfctools/datastructs/cash_flow_statement.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/collection.py` & `sfctools-1.0.5.3/sfctools/datastructs/collection.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/income_statement.py` & `sfctools-1.0.5.3/sfctools/datastructs/income_statement.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/inventory.py` & `sfctools-1.0.5.3/sfctools/datastructs/inventory.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/market_registry.py` & `sfctools-1.0.5.3/sfctools/datastructs/market_registry.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/signalslot.py` & `sfctools-1.0.5.3/sfctools/datastructs/signalslot.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/datastructs/worker_registry.py` & `sfctools-1.0.5.3/sfctools/datastructs/worker_registry.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/__init__.py` & `sfctools-1.0.5.3/sfctools/examples/__init__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/balance.py` & `sfctools-1.0.5.3/sfctools/examples/balance.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/basic_example/basic_example.py` & `sfctools-1.0.5.3/sfctools/examples/basic_example/basic_example.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/clock.py` & `sfctools-1.0.5.3/sfctools/examples/clock.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/example_wrapper.py` & `sfctools-1.0.5.3/sfctools/examples/example_wrapper.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/government.py` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/government.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/household.py` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/household.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/production.py` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/production.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/transactions.py` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/agents/transactions.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/data/preprocess.py` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/data/preprocess.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/matrix.png` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/figures/matrix.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/outputs.png` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/figures/outputs.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/sankey.png` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/figures/sankey.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/info.md` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/info.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/model.py` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/model.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/exampleabm/settings.yml` & `sfctools-1.0.5.3/sfctools/examples/exampleabm/settings.yml`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/flowmatrix.py` & `sfctools-1.0.5.3/sfctools/examples/flowmatrix.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/hello_agent.py` & `sfctools-1.0.5.3/sfctools/examples/hello_agent.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/inventory.py` & `sfctools-1.0.5.3/sfctools/examples/inventory.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/market_example/market.py` & `sfctools-1.0.5.3/sfctools/examples/market_example/market.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/market_example/market2.py` & `sfctools-1.0.5.3/sfctools/examples/market_example/market2.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/monte_carlo/monte_carlo.py` & `sfctools-1.0.5.3/sfctools/examples/monte_carlo/monte_carlo.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.txt` & `sfctools-1.0.5.3/sfctools/examples/monte_carlo/result/output.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/order_book.py` & `sfctools-1.0.5.3/sfctools/examples/order_book.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/examples/signal_slot.py` & `sfctools-1.0.5.3/sfctools/examples/signal_slot.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/.gitlab-ci.yml` & `sfctools-1.0.5.3/sfctools/gui/.gitlab-ci.yml`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/agent_editor.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/agent_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/code_editor.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/code_editor.ui`

 * *Files 0% similar despite different names*

#### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/code_editor.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/code_editor.ui`

```diff
@@ -151,16 +151,16 @@
             <size>
               <width>400</width>
               <height>40</height>
             </size>
           </property>
           <property name="font">
             <font>
-              <family>MS Shell Dlg 2</family>
-              <pointsize>12</pointsize>
+              <family>Cascadia Code SemiLight</family>
+              <pointsize>11</pointsize>
             </font>
           </property>
           <property name="styleSheet">
             <string notr="true">border-radius:10px;</string>
           </property>
           <property name="locale">
             <locale language="English" country="UnitedStates"/>
```

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/draw_widget.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/draw_widget.py`

 * *Files 0% similar despite different names*

```diff
@@ -114,15 +114,20 @@
 
     def draw(self, qp, brush=None, active=True):
 
         dw = MyDrawWidget.instance
         zf = dw.zoom_factor
 
         if self.ishelper:
-            handle_w = 5
+
+            if active:
+                handle_w = 5
+            else:
+                handle_w = 2
+
             qp.drawEllipse(QtCore.QPointF(zf*(dw.gox + self.x+4),zf*(dw.goy + self.y+4)), handle_w, handle_w)
 
 
 
 
     def edit_agent(self):
         if not self.ishelper:
@@ -460,15 +465,15 @@
 
             box.label.offx = 0
             box.label.offy = 0
 
             pos_data[box.label.name] = {"x": int(box.label.x), "y": int(box.label.y)}
 
         return pos_data
-    
+
 
     def reposition(self,pos_data):
         # reposition all the boxes
         print("reposition <-> ", pos_data)
         for box in self.boxes:
             if box.name in pos_data:
 
@@ -1520,25 +1525,25 @@
 
                         """
                         if box.is_support:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),6, 6)
                         else:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),6, 6)
                         """
-                        box.draw(qp,active=False)
+                        box.draw(qp,active=True)
 
                     else:
 
                         """
                         if box.is_support:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),2, 2)
                         else:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),2, 2)
                         """
-                        box.draw(qp,active=True)
+                        box.draw(qp,active=False)
 
                 """
                 if self.darkMode:
                     pen = QtGui.QPen(QtGui.QColor(120, 120, 120 , 200),0) # ,2, Qt.SolidLine
                 else:
                     pen = QtGui.QPen(QtGui.QColor(0, 0, 0 , 200),0) # ,2, Qt.SolidLine)
                 """
```

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/income_viewer.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/income_viewer.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/mainloop_editor.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/mainloop_editor.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,17 +2,19 @@
 from PyQt5.QtCore import QUrl
 from PyQt5.QtWidgets import QFileDialog,QMessageBox,QTableWidgetItem,QAbstractItemView,QListWidgetItem
 import sys
 import os
 import yaml
 import shutil
 import time
+import datetime
 
 # from pandasmodel import PandasModel
 from PyQt5.QtGui import QDesktopServices
+from PyQt5.QtCore import QObject, pyqtSlot
 import pickle as pkl
 import re
 import matplotlib.pyplot as plt
 from PyQt5.QtCore import Qt
 from PyQt5 import QtCore
 from PyQt5.QtGui import QFont, QFontDatabase, QColor, QSyntaxHighlighter, QTextCharFormat
 from PyQt5.QtCore import QObject, QThread, pyqtSignal
@@ -24,43 +26,51 @@
 class MainWatchDog(QObject):
     """
     This is a file watchdog. It frequently checks if external changes
     have been made to a file viewed in the code editor.
     """
     difference_detected = pyqtSignal()  # difference detected between current code and code stored in file
 
-    def __init__(self,file_name,parent):
+    def __init__(self,parent, file_ctrl):
 
         super().__init__()
         #self.file_name = os.path.join(file_name , agent_name + ".txt" ) # < source file sub_names
-        self.file_name = os.path.join(file_name , "mainloop.py" ) # < source file sub_names
+
         self.parent_w = parent
         text = parent.textEdit.toPlainText()
-        self.finished = False
+        # self.finished = False
+        self.file_ctrl = file_ctrl  # <-  set mutable type finished list
 
     def run(self):
         """Long-running task."""
-        while not self.finished:
+
+        while True:
+
             time.sleep(1.0) # check every second
 
-            # print("check file", self.agent_name,self.file_name)
+            if self.file_ctrl[0] is None:
+                continue
+
+            file_name = os.path.join(os.path.dirname(self.file_ctrl[0]) ,"python_code", "mainloop.py" ) # < source file sub_names
+
+            print("[Watchdog] check file", file_name)
             current_gui_text = self.parent_w.textEdit.toPlainText()
             current_file_text = None
 
             try:
-                with open(self.file_name,"r") as file:
+                with open(file_name,"r") as file:
                     current_file_text = file.read()
 
                 outdated = False
-                file_time = os.path.getmtime(self.file_name)
+                file_time = os.path.getmtime(file_name)
                 my_time = self.parent_w.mtime
 
                 if MainLoopEditor.instance is None:
                     self.finished = True
-
+                
                 if file_time > my_time:
                     outdated = True
 
                 if current_gui_text != current_file_text and outdated:
                     self.difference_detected.emit()
 
             except Exception as e:
@@ -119,52 +129,54 @@
 
         self.shortcut2 = QShortcut(QKeySequence("Ctrl+Tab"),self)
         self.shortcut2.activated.connect(self.indent)
 
         self.shortcut2 = QShortcut(QKeySequence("Shift+Tab"),self)
         self.shortcut2.activated.connect(self.unindent)
 
-        text = text.replace("    ","\t")
-        self.textEdit.setPlainText(text)
-
+        self.set_text(text)
         self.searchEdit.textChanged.connect(self.update_search)
 
         self.parent_widget = parent
         theme_manager = self.parent_widget.theme_manager
         self.setStyleSheet(theme_manager.get_background_style())
         self.setStyleSheet(theme_manager.get_stylesheet("main"))
 
         project_file = self.parent_widget.current_file
         print("Project File", project_file)
-        self.thread = QThread()
 
-        # file watchdog
-        if project_file is not None:
+        self.__class__.instance = self
+        self.thread = QThread()
 
-            self.mtime = os.path.getmtime(project_file) # last changes of project file
+        filepath = None # os.path.dirname(os.path.abspath(self.parent_widget.current_file))
+        # python_path = os.path.join(filepath , "python_code")
+        self.mtime = time.time() # os.path.getmtime(filepath) # last changes of project file
+
+        self.file_ctrl = [filepath]
+        self.worker = MainWatchDog(self, self.file_ctrl)
+        self.worker.moveToThread(self.thread)
+        self.worker.difference_detected.connect(self.process_differences)
+        self.thread.started.connect(self.worker.run)
 
-            filepath = os.path.dirname(os.path.abspath(self.parent_widget.current_file))
-            python_path = os.path.join(filepath , "python_code")
+        self.thread.start()
 
+    def start_watchdog(self,fname):
+        # start a new watchdog on the file
 
-            self.worker = MainWatchDog(python_path,self)
-            self.worker.moveToThread(self.thread)
-            self.worker.difference_detected.connect(self.process_differences)
-            self.thread.started.connect(self.worker.run)
+        self.file_ctrl[0] = fname
 
-            print("set up new worker in thread")
 
-        self.thread.start()
-        self.__class__.instance = self
-
-        self.show()
+    def set_text(self,text):
+        text = text.replace("    ","\t")
+        self.textEdit.setPlainText(text)
 
     def closeEvent(self, event):
         self.__class__.instance = None
-        event.accept() # let the window close
+        self.hide()
+        # event.accept() # let the window close
 
     def process_differences(self):
         # process differences between the sfctl file and the external file changes
         self.warn_differences()
         self.set_text_from_external()
 
     def warn_differences(self):
```

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/mamba_interpreter2.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/mamba_interpreter2.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/matrix_viewer.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/matrix_viewer.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/output_display.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/output_display.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/pandasmodel.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/pandasmodel.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/qtattune.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/qtattune.py`

 * *Files 1% similar despite different names*

```diff
@@ -114,8140 +114,8242 @@
 00000710: 2020 7265 7475 726e 2046 616c 7365 0d0a    return False..
 00000720: 2020 2020 2020 2020 2020 2020 656c 6966              elif
 00000730: 2073 203d 3d20 2254 7275 6522 3a0d 0a20   s == "True":.. 
 00000740: 2020 2020 2020 2020 2020 2020 2020 2072                 r
 00000750: 6574 7572 6e20 5472 7565 0d0a 0d0a 2020  eturn True....  
 00000760: 2020 2020 2020 2020 2020 7265 7475 726e            return
 00000770: 204e 6f6e 650d 0a0d 0a0d 0a63 6c61 7373   None......class
-00000780: 204d 6174 7269 7856 6965 7765 7228 5174   MatrixViewer(Qt
+00000780: 2053 6561 7263 6844 6961 6c6f 6728 5174   SearchDialog(Qt
 00000790: 5769 6467 6574 732e 5144 6961 6c6f 6729  Widgets.QDialog)
 000007a0: 3a0d 0a20 2020 2069 6e73 7461 6e63 6520  :..    instance 
 000007b0: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 6465  = None....    de
 000007c0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-000007d0: 6d6f 6465 6c2c 7061 7265 6e74 3d4e 6f6e  model,parent=Non
-000007e0: 6529 3a0d 0a20 2020 2020 2020 2073 7570  e):..        sup
-000007f0: 6572 284d 6174 7269 7856 6965 7765 722c  er(MatrixViewer,
-00000800: 2073 656c 6629 2e5f 5f69 6e69 745f 5f28   self).__init__(
-00000810: 7061 7265 6e74 2920 2023 2043 616c 6c20  parent)  # Call 
-00000820: 7468 6520 696e 6865 7269 7465 6420 636c  the inherited cl
-00000830: 6173 7365 7320 5f5f 696e 6974 5f5f 206d  asses __init__ m
-00000840: 6574 686f 640d 0a0d 0a20 2020 2020 2020  ethod....       
-00000850: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
-00000860: 696e 7374 616e 6365 203d 2073 656c 660d  instance = self.
-00000870: 0a0d 0a20 2020 2020 2020 2070 6174 6820  ...        path 
-00000880: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00000890: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
-000008a0: 6828 5f5f 6669 6c65 5f5f 2929 0d0a 2020  h(__file__))..  
-000008b0: 2020 2020 2020 7569 632e 6c6f 6164 5569        uic.loadUi
-000008c0: 286f 732e 7061 7468 2e6a 6f69 6e28 7061  (os.path.join(pa
-000008d0: 7468 2c27 6d61 7472 6978 5f76 6965 7765  th,'matrix_viewe
-000008e0: 722e 7569 2729 2c20 7365 6c66 290d 0a0d  r.ui'), self)...
-000008f0: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
-00000900: 745f 6d6f 6465 6c28 6d6f 6465 6c29 0d0a  t_model(model)..
-00000910: 2020 2020 2020 2020 2320 7365 6c66 2e73          # self.s
-00000920: 6574 5374 796c 6553 6865 6574 2870 6172  etStyleSheet(par
-00000930: 656e 742e 7468 656d 655f 6d61 6e61 6765  ent.theme_manage
-00000940: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
-00000950: 2822 6d61 696e 2229 290d 0a20 2020 2020  ("main"))..     
-00000960: 2020 2023 2073 656c 662e 7365 7453 7479     # self.setSty
-00000970: 6c65 5368 6565 7428 7061 7265 6e74 2e74  leSheet(parent.t
-00000980: 6865 6d65 5f6d 616e 6167 6572 2e67 6574  heme_manager.get
-00000990: 5f62 6163 6b67 726f 756e 645f 7374 796c  _background_styl
-000009a0: 6528 2929 0d0a 0d0a 0d0a 2020 2020 6465  e())......    de
-000009b0: 6620 7365 745f 6d6f 6465 6c28 7365 6c66  f set_model(self
-000009c0: 2c6d 6f64 656c 293a 0d0a 2020 2020 2020  ,model):..      
-000009d0: 2020 7072 696e 7428 2253 4554 204d 4f44    print("SET MOD
-000009e0: 454c 222c 206d 6f64 656c 290d 0a20 2020  EL", model)..   
-000009f0: 2020 2020 2073 656c 662e 7061 6e64 6173       self.pandas
-00000a00: 5f6d 6f64 656c 203d 206d 6f64 656c 0d0a  _model = model..
-00000a10: 2020 2020 2020 2020 7365 6c66 2e74 6162          self.tab
-00000a20: 6c65 5669 6577 2e73 6574 4d6f 6465 6c28  leView.setModel(
-00000a30: 6d6f 6465 6c29 0d0a 0d0a 2020 2020 6465  model)....    de
-00000a40: 6620 6765 745f 6461 7461 2873 656c 6629  f get_data(self)
-00000a50: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00000a60: 6e20 7365 6c66 2e70 616e 6461 735f 6d6f  n self.pandas_mo
-00000a70: 6465 6c2e 6765 745f 7261 7764 6174 6128  del.get_rawdata(
-00000a80: 290d 0a0d 0a0d 0a63 6c61 7373 2043 6173  )......class Cas
-00000a90: 6846 6c6f 7756 6965 7765 7228 5174 5769  hFlowViewer(QtWi
-00000aa0: 6467 6574 732e 5144 6961 6c6f 6729 3a0d  dgets.QDialog):.
-00000ab0: 0a20 2020 2069 6e73 7461 6e63 6573 203d  .    instances =
-00000ac0: 207b 7d0d 0a0d 0a20 2020 2064 6566 2063   {}....    def c
-00000ad0: 6c6f 7365 4576 656e 7428 7365 6c66 2c20  loseEvent(self, 
-00000ae0: 6576 656e 7429 3a0d 0a20 2020 2020 2020  event):..       
-00000af0: 2064 656c 2073 656c 662e 5f5f 636c 6173   del self.__clas
-00000b00: 735f 5f2e 696e 7374 616e 6365 735b 7365  s__.instances[se
-00000b10: 6c66 2e6e 616d 655d 0d0a 2020 2020 2020  lf.name]..      
-00000b20: 2020 6576 656e 742e 6163 6365 7074 2829    event.accept()
-00000b30: 2023 206c 6574 2074 6865 2077 696e 646f   # let the windo
-00000b40: 7720 636c 6f73 650d 0a0d 0a20 2020 2064  w close....    d
-00000b50: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00000b60: 2c70 6172 656e 743d 4e6f 6e65 2c6e 616d  ,parent=None,nam
-00000b70: 653d 2255 6e6b 6e6f 776e 2229 3a0d 0a0d  e="Unknown"):...
-00000b80: 0a20 2020 2020 2020 2073 656c 662e 6e61  .        self.na
-00000b90: 6d65 203d 206e 616d 650d 0a0d 0a20 2020  me = name....   
-00000ba0: 2020 2020 2073 7570 6572 2843 6173 6846       super(CashF
-00000bb0: 6c6f 7756 6965 7765 722c 2073 656c 6629  lowViewer, self)
-00000bc0: 2e5f 5f69 6e69 745f 5f28 7061 7265 6e74  .__init__(parent
-00000bd0: 2920 2023 2043 616c 6c20 7468 6520 696e  )  # Call the in
-00000be0: 6865 7269 7465 6420 636c 6173 7365 7320  herited classes 
-00000bf0: 5f5f 696e 6974 5f5f 206d 6574 686f 640d  __init__ method.
-00000c00: 0a20 2020 2020 2020 2070 6174 6820 3d20  .        path = 
-00000c10: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
-00000c20: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-00000c30: 5f5f 6669 6c65 5f5f 2929 0d0a 2020 2020  __file__))..    
-00000c40: 2020 2020 7569 632e 6c6f 6164 5569 286f      uic.loadUi(o
-00000c50: 732e 7061 7468 2e6a 6f69 6e28 7061 7468  s.path.join(path
-00000c60: 2c27 696e 636f 6d65 5f76 6965 7765 722e  ,'income_viewer.
-00000c70: 7569 2729 2c20 7365 6c66 290d 0a20 2020  ui'), self)..   
-00000c80: 2020 2020 2073 656c 662e 7365 7457 696e       self.setWin
-00000c90: 646f 7754 6974 6c65 2822 4361 7368 2046  dowTitle("Cash F
-00000ca0: 6c6f 7720 5374 6174 656d 656e 7420 6f66  low Statement of
-00000cb0: 2025 7322 2025 206e 616d 6529 0d0a 0d0a   %s" % name)....
-00000cc0: 2020 2020 2020 2020 7365 6c66 2e5f 5f63          self.__c
-00000cd0: 6c61 7373 5f5f 2e69 6e73 7461 6e63 6573  lass__.instances
-00000ce0: 5b6e 616d 655d 203d 2073 656c 660d 0a0d  [name] = self...
-00000cf0: 0a0d 0a20 2020 2064 6566 2073 6574 5f6d  ...    def set_m
-00000d00: 6f64 656c 2873 656c 662c 6d6f 6465 6c29  odel(self,model)
-00000d10: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
-00000d20: 2822 5345 5420 4d4f 4445 4c22 2c20 6d6f  ("SET MODEL", mo
-00000d30: 6465 6c29 0d0a 2020 2020 2020 2020 7365  del)..        se
-00000d40: 6c66 2e70 616e 6461 735f 6d6f 6465 6c20  lf.pandas_model 
-00000d50: 3d20 6d6f 6465 6c0d 0a20 2020 2020 2020  = model..       
-00000d60: 2073 656c 662e 7461 626c 6556 6965 772e   self.tableView.
-00000d70: 7365 744d 6f64 656c 286d 6f64 656c 290d  setModel(model).
-00000d80: 0a0d 0a20 2020 2064 6566 2067 6574 5f64  ...    def get_d
-00000d90: 6174 6128 7365 6c66 293a 0d0a 2020 2020  ata(self):..    
-00000da0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00000db0: 7061 6e64 6173 5f6d 6f64 656c 2e67 6574  pandas_model.get
-00000dc0: 5f72 6177 6461 7461 2829 0d0a 0d0a 0d0a  _rawdata()......
-00000dd0: 636c 6173 7320 496e 636f 6d65 5669 6577  class IncomeView
-00000de0: 6572 2851 7457 6964 6765 7473 2e51 4469  er(QtWidgets.QDi
-00000df0: 616c 6f67 293a 0d0a 2020 2020 696e 7374  alog):..    inst
-00000e00: 616e 6365 7320 3d20 7b7d 0d0a 0d0a 2020  ances = {}....  
-00000e10: 2020 6465 6620 636c 6f73 6545 7665 6e74    def closeEvent
-00000e20: 2873 656c 662c 2065 7665 6e74 293a 0d0a  (self, event):..
-00000e30: 2020 2020 2020 2020 6465 6c20 7365 6c66          del self
-00000e40: 2e5f 5f63 6c61 7373 5f5f 2e69 6e73 7461  .__class__.insta
-00000e50: 6e63 6573 5b73 656c 662e 6e61 6d65 5d0d  nces[self.name].
-00000e60: 0a20 2020 2020 2020 2065 7665 6e74 2e61  .        event.a
-00000e70: 6363 6570 7428 2920 2320 6c65 7420 7468  ccept() # let th
-00000e80: 6520 7769 6e64 6f77 2063 6c6f 7365 0d0a  e window close..
-00000e90: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-00000ea0: 5f5f 2873 656c 662c 7061 7265 6e74 3d4e  __(self,parent=N
-00000eb0: 6f6e 652c 6e61 6d65 3d22 556e 6b6e 6f77  one,name="Unknow
-00000ec0: 6e22 293a 0d0a 0d0a 2020 2020 2020 2020  n"):....        
-00000ed0: 7375 7065 7228 496e 636f 6d65 5669 6577  super(IncomeView
-00000ee0: 6572 2c20 7365 6c66 292e 5f5f 696e 6974  er, self).__init
-00000ef0: 5f5f 2870 6172 656e 7429 2020 2320 4361  __(parent)  # Ca
-00000f00: 6c6c 2074 6865 2069 6e68 6572 6974 6564  ll the inherited
-00000f10: 2063 6c61 7373 6573 205f 5f69 6e69 745f   classes __init_
-00000f20: 5f20 6d65 7468 6f64 0d0a 2020 2020 2020  _ method..      
-00000f30: 2020 7061 7468 203d 206f 732e 7061 7468    path = os.path
-00000f40: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
-00000f50: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
-00000f60: 5f29 290d 0a20 2020 2020 2020 2075 6963  _))..        uic
-00000f70: 2e6c 6f61 6455 6928 6f73 2e70 6174 682e  .loadUi(os.path.
-00000f80: 6a6f 696e 2870 6174 682c 2769 6e63 6f6d  join(path,'incom
-00000f90: 655f 7669 6577 6572 2e75 6927 292c 2073  e_viewer.ui'), s
-00000fa0: 656c 6629 0d0a 2020 2020 2020 2020 7365  elf)..        se
-00000fb0: 6c66 2e73 6574 5769 6e64 6f77 5469 746c  lf.setWindowTitl
-00000fc0: 6528 2249 6e63 6f6d 6520 5368 6565 7420  e("Income Sheet 
-00000fd0: 6f66 2025 7322 2025 206e 616d 6529 0d0a  of %s" % name)..
-00000fe0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
-00000ff0: 616d 6520 3d20 6e61 6d65 0d0a 2020 2020  ame = name..    
-00001000: 2020 2020 7365 6c66 2e5f 5f63 6c61 7373      self.__class
-00001010: 5f5f 2e69 6e73 7461 6e63 6573 5b6e 616d  __.instances[nam
-00001020: 655d 203d 2073 656c 660d 0a0d 0a20 2020  e] = self....   
-00001030: 2064 6566 2073 6574 5f6d 6f64 656c 2873   def set_model(s
-00001040: 656c 662c 6d6f 6465 6c29 3a0d 0a20 2020  elf,model):..   
-00001050: 2020 2020 2070 7269 6e74 2822 5345 5420       print("SET 
-00001060: 4d4f 4445 4c22 2c20 6d6f 6465 6c29 0d0a  MODEL", model)..
-00001070: 2020 2020 2020 2020 7365 6c66 2e70 616e          self.pan
-00001080: 6461 735f 6d6f 6465 6c20 3d20 6d6f 6465  das_model = mode
-00001090: 6c0d 0a20 2020 2020 2020 2073 656c 662e  l..        self.
-000010a0: 7461 626c 6556 6965 772e 7365 744d 6f64  tableView.setMod
-000010b0: 656c 286d 6f64 656c 290d 0a0d 0a20 2020  el(model)....   
-000010c0: 2064 6566 2067 6574 5f64 6174 6128 7365   def get_data(se
-000010d0: 6c66 293a 0d0a 2020 2020 2020 2020 7265  lf):..        re
-000010e0: 7475 726e 2073 656c 662e 7061 6e64 6173  turn self.pandas
-000010f0: 5f6d 6f64 656c 2e67 6574 5f72 6177 6461  _model.get_rawda
-00001100: 7461 2829 0d0a 0d0a 0d0a 0d0a 2320 5374  ta()........# St
-00001110: 6570 2031 3a20 4372 6561 7465 2061 2077  ep 1: Create a w
-00001120: 6f72 6b65 720d 0a63 6c61 7373 2053 7461  orker..class Sta
-00001130: 7475 734c 4544 2851 4f62 6a65 6374 293a  tusLED(QObject):
-00001140: 0d0a 2020 2020 6669 6e69 7368 6564 203d  ..    finished =
-00001150: 2070 7971 7453 6967 6e61 6c28 290d 0a20   pyqtSignal().. 
-00001160: 2020 2070 726f 6772 6573 7320 3d20 7079     progress = py
-00001170: 7174 5369 676e 616c 2869 6e74 290d 0a0d  qtSignal(int)...
-00001180: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00001190: 5f28 7365 6c66 2c72 6229 3a0d 0a20 2020  _(self,rb):..   
-000011a0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000011b0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
-000011c0: 2073 656c 662e 7262 203d 2072 620d 0a0d   self.rb = rb...
-000011d0: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
-000011e0: 7262 203d 2072 620d 0a20 2020 2020 2020  rb = rb..       
-000011f0: 2073 656c 662e 6920 3d20 300d 0a20 2020   self.i = 0..   
-00001200: 2020 2020 2073 656c 662e 6a20 3d20 300d       self.j = 0.
-00001210: 0a20 2020 2020 2020 2073 656c 662e 6f6e  .        self.on
-00001220: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
-00001230: 2020 2320 7072 696e 7428 2257 4f52 4b45    # print("WORKE
-00001240: 5220 4352 4541 5445 4422 290d 0a0d 0a20  R CREATED").... 
-00001250: 2020 2064 6566 2072 756e 2873 656c 6629     def run(self)
-00001260: 3a0d 0a20 2020 2020 2020 2022 2222 4c6f  :..        """Lo
-00001270: 6e67 2d72 756e 6e69 6e67 2074 6173 6b2e  ng-running task.
-00001280: 2222 220d 0a20 2020 2020 2020 2077 6869  """..        whi
-00001290: 6c65 2854 7275 6529 3a0d 0a20 2020 2020  le(True):..     
-000012a0: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
-000012b0: 7028 2e31 290d 0a0d 0a20 2020 2020 2020  p(.1)....       
-000012c0: 2020 2020 2069 6620 7365 6c66 2e6f 6e3a       if self.on:
-000012d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000012e0: 2020 7365 6c66 2e69 202b 3d20 310d 0a0d    self.i += 1...
-000012f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001300: 2073 7461 7465 203d 2073 656c 662e 7262   state = self.rb
-00001310: 2e69 7343 6865 636b 6564 2829 0d0a 2020  .isChecked()..  
-00001320: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00001330: 7365 6c66 2e72 622e 7365 7443 6865 636b  self.rb.setCheck
-00001340: 6564 286e 6f74 2073 7461 7465 290d 0a0d  ed(not state)...
-00001350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001360: 2069 6620 7365 6c66 2e69 203d 3d20 353a   if self.i == 5:
-00001370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001380: 2020 2020 2020 7365 6c66 2e69 203d 2030        self.i = 0
-00001390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000013a0: 2020 2020 2020 7365 6c66 2e73 7769 7463        self.switc
-000013b0: 685f 7374 6174 6528 290d 0a20 2020 2020  h_state()..     
-000013c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-000013d0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-000013e0: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
-000013f0: 2020 2020 2320 7365 6c66 2e72 622e 7365      # self.rb.se
-00001400: 7443 6865 636b 6564 2846 616c 7365 290d  tChecked(False).
-00001410: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00001420: 7072 696e 7428 2273 7461 7465 222c 7365  print("state",se
-00001430: 6c66 2e69 290d 0a0d 0a20 2020 2064 6566  lf.i)....    def
-00001440: 2073 7769 7463 685f 7374 6174 6528 7365   switch_state(se
-00001450: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
-00001460: 6c66 2e6f 6e20 3d20 6e6f 7420 7365 6c66  lf.on = not self
-00001470: 2e6f 6e0d 0a20 2020 2020 2020 2023 2070  .on..        # p
-00001480: 7269 6e74 2822 7377 6974 6368 222c 2073  rint("switch", s
-00001490: 656c 662e 6f6e 290d 0a0d 0a20 2020 2020  elf.on)....     
-000014a0: 2020 2023 6966 206e 6f74 2073 656c 662e     #if not self.
-000014b0: 6f6e 3a0d 0a20 2020 2020 2020 2023 2020  on:..        #  
-000014c0: 2020 7365 6c66 2e72 622e 7365 7443 6865    self.rb.setChe
-000014d0: 636b 6564 2846 616c 7365 290d 0a0d 0a63  cked(False)....c
-000014e0: 6c61 7373 2054 7261 6e73 6163 7469 6f6e  lass Transaction
-000014f0: 4465 7369 676e 6572 2851 7457 6964 6765  Designer(QtWidge
-00001500: 7473 2e51 4d61 696e 5769 6e64 6f77 293a  ts.QMainWindow):
-00001510: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-00001520: 5f5f 2873 656c 6629 3a0d 0a20 2020 2020  __(self):..     
-00001530: 2020 2073 7570 6572 2854 7261 6e73 6163     super(Transac
-00001540: 7469 6f6e 4465 7369 676e 6572 2c20 7365  tionDesigner, se
-00001550: 6c66 292e 5f5f 696e 6974 5f5f 2829 2023  lf).__init__() #
-00001560: 2043 616c 6c20 7468 6520 696e 6865 7269   Call the inheri
-00001570: 7465 6420 636c 6173 7365 7320 5f5f 696e  ted classes __in
-00001580: 6974 5f5f 206d 6574 686f 640d 0a20 2020  it__ method..   
-00001590: 2020 2020 2070 7269 6e74 2822 6c6f 6164       print("load
-000015a0: 2e2e 2e22 290d 0a20 2020 2020 2020 2070  ...")..        p
-000015b0: 6174 6820 3d20 6f73 2e70 6174 682e 6469  ath = os.path.di
-000015c0: 726e 616d 6528 6f73 2e70 6174 682e 6162  rname(os.path.ab
-000015d0: 7370 6174 6828 5f5f 6669 6c65 5f5f 2929  spath(__file__))
-000015e0: 0d0a 2020 2020 2020 2020 6c6f 6164 7061  ..        loadpa
-000015f0: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
-00001600: 6e28 7061 7468 2c22 7472 616e 7361 6374  n(path,"transact
-00001610: 696f 6e5f 6465 7369 676e 6572 5f6d 6169  ion_designer_mai
-00001620: 6e77 696e 646f 772e 7569 2229 0d0a 2020  nwindow.ui")..  
-00001630: 2020 2020 2020 636f 6e74 656e 7420 3d20        content = 
-00001640: 5b5d 0d0a 2020 2020 2020 2020 7375 6363  []..        succ
-00001650: 6573 7320 3d20 4661 6c73 650d 0a0d 0a20  ess = False.... 
-00001660: 2020 2020 2020 2073 656c 662e 7465 7374         self.test
-00001670: 5f6d 6f64 6520 3d20 4661 6c73 6520 2320  _mode = False # 
-00001680: 7573 6564 2066 6f72 2074 6573 7469 6e67  used for testing
-00001690: 0d0a 0d0a 2020 2020 2020 2020 2320 7265  ....        # re
-000016a0: 6d6f 7665 2066 6f6e 742d 7369 7a65 2074  move font-size t
-000016b0: 6f20 6669 7820 6275 6720 696e 2071 7420  o fix bug in qt 
-000016c0: 6465 7369 676e 6572 0d0a 2020 2020 2020  designer..      
-000016d0: 2020 7769 7468 206f 7065 6e28 6c6f 6164    with open(load
-000016e0: 7061 7468 2c22 7222 2920 6173 2066 696c  path,"r") as fil
-000016f0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00001700: 666f 7220 6c69 6e65 2069 6e20 6669 6c65  for line in file
-00001710: 2e72 6561 646c 696e 6573 2829 3a0d 0a20  .readlines():.. 
-00001720: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00001730: 6620 223c 706f 696e 7473 697a 653e 2d31  f "<pointsize>-1
-00001740: 3c2f 706f 696e 7473 697a 653e 2220 6e6f  </pointsize>" no
-00001750: 7420 696e 206c 696e 653a 0d0a 2020 2020  t in line:..    
-00001760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001770: 636f 6e74 656e 742e 6170 7065 6e64 286c  content.append(l
-00001780: 696e 6529 0d0a 0d0a 2020 2020 2020 2020  ine)....        
-00001790: 2020 2020 7375 6363 6573 7320 3d20 5472      success = Tr
-000017a0: 7565 0d0a 0d0a 2020 2020 2020 2020 6966  ue....        if
-000017b0: 2073 7563 6365 7373 3a0d 0a20 2020 2020   success:..     
-000017c0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-000017d0: 286c 6f61 6470 6174 682c 2277 2229 2061  (loadpath,"w") a
-000017e0: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
-000017f0: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
-00001800: 6974 6528 2222 2e6a 6f69 6e28 636f 6e74  ite("".join(cont
-00001810: 656e 7429 290d 0a0d 0a0d 0a0d 0a20 2020  ent))........   
-00001820: 2020 2020 2023 2075 6963 2e6c 6f61 6455       # uic.loadU
-00001830: 6928 2774 7261 6e73 6163 7469 6f6e 5f64  i('transaction_d
-00001840: 6573 6967 6e65 722e 7569 272c 2073 656c  esigner.ui', sel
-00001850: 6629 2023 204c 6f61 6420 7468 6520 2e75  f) # Load the .u
-00001860: 6920 6669 6c65 0d0a 2020 2020 2020 2020  i file..        
-00001870: 7569 632e 6c6f 6164 5569 286c 6f61 6470  uic.loadUi(loadp
-00001880: 6174 682c 2073 656c 6629 2023 204c 6f61  ath, self) # Loa
-00001890: 6420 7468 6520 2e75 6920 6669 6c65 0d0a  d the .ui file..
-000018a0: 2020 2020 2020 2020 7072 696e 7428 2264          print("d
-000018b0: 6f6e 652e 2229 0d0a 0d0a 2020 2020 2020  one.")....      
-000018c0: 2020 7365 6c66 2e73 6574 5769 6e64 6f77    self.setWindow
-000018d0: 466c 6167 7328 7365 6c66 2e77 696e 646f  Flags(self.windo
-000018e0: 7746 6c61 6773 2829 207c 2051 742e 5769  wFlags() | Qt.Wi
-000018f0: 6e64 6f77 4d69 6e69 6d69 7a65 4275 7474  ndowMinimizeButt
-00001900: 6f6e 4869 6e74 290d 0a20 2020 2020 2020  onHint)..       
-00001910: 2023 2073 656c 662e 7365 7446 6978 6564   # self.setFixed
-00001920: 5369 7a65 2873 656c 662e 7369 7a65 2829  Size(self.size()
-00001930: 293b 0d0a 2020 2020 2020 2020 7365 6c66  );..        self
-00001940: 2e66 6c69 7070 6564 203d 2046 616c 7365  .flipped = False
-00001950: 0d0a 0d0a 2020 2020 2020 2020 6d79 5f77  ....        my_w
-00001960: 6964 6765 7420 3d20 4d79 4472 6177 5769  idget = MyDrawWi
-00001970: 6467 6574 2873 656c 662e 6672 616d 652c  dget(self.frame,
-00001980: 7365 6c66 290d 0a20 2020 2020 2020 2023  self)..        #
-00001990: 206d 795f 7769 6467 6574 2e6d 6f76 6528   my_widget.move(
-000019a0: 2d35 2c2d 3535 2920 2328 3830 2c31 3630  -5,-55) #(80,160
-000019b0: 290d 0a0d 0a20 2020 2020 2020 2023 2073  )....        # s
-000019c0: 656c 662e 6c61 6265 6c5f 3137 2e73 6574  elf.label_17.set
-000019d0: 5669 7369 626c 6528 4661 6c73 6529 2023  Visible(False) #
-000019e0: 206c 6f67 6f0d 0a0d 0a20 2020 2020 2020   logo....       
-000019f0: 2073 656c 662e 636f 6465 5f64 6174 6120   self.code_data 
-00001a00: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
-00001a10: 2320 6c6f 6767 6572 2066 6f72 2063 6861  # logger for cha
-00001a20: 6e67 6573 2069 6e20 7472 616e 7361 6374  nges in transact
-00001a30: 696f 6e73 0d0a 2020 2020 2020 2020 7365  ions..        se
-00001a40: 6c66 2e6d 6164 655f 6368 616e 6765 7320  lf.made_changes 
-00001a50: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
-00001a60: 2020 2073 656c 662e 6172 7261 6e67 6542     self.arrangeB
-00001a70: 7574 746f 6e5f 372e 7072 6573 7365 642e  utton_7.pressed.
-00001a80: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
-00001a90: 7365 6c66 2e6e 6f74 6966 795f 746f 6f6c  self.notify_tool
-00001aa0: 7469 7028 7365 6c66 2e61 7272 616e 6765  tip(self.arrange
-00001ab0: 4275 7474 6f6e 5f37 2929 0d0a 2020 2020  Button_7))..    
-00001ac0: 2020 2020 7365 6c66 2e61 7272 616e 6765      self.arrange
-00001ad0: 4275 7474 6f6e 5f38 2e70 7265 7373 6564  Button_8.pressed
-00001ae0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00001af0: 2073 656c 662e 6e6f 7469 6679 5f74 6f6f   self.notify_too
-00001b00: 6c74 6970 2873 656c 662e 6172 7261 6e67  ltip(self.arrang
-00001b10: 6542 7574 746f 6e5f 3829 290d 0a20 2020  eButton_8))..   
-00001b20: 2020 2020 2073 656c 662e 6172 7261 6e67       self.arrang
-00001b30: 6542 7574 746f 6e5f 392e 7072 6573 7365  eButton_9.presse
-00001b40: 642e 636f 6e6e 6563 7428 6c61 6d62 6461  d.connect(lambda
-00001b50: 3a20 7365 6c66 2e6e 6f74 6966 795f 746f  : self.notify_to
-00001b60: 6f6c 7469 7028 7365 6c66 2e61 7272 616e  oltip(self.arran
-00001b70: 6765 4275 7474 6f6e 5f39 2929 0d0a 2020  geButton_9))..  
-00001b80: 2020 2020 2020 7365 6c66 2e61 7272 616e        self.arran
-00001b90: 6765 4275 7474 6f6e 5f33 2e70 7265 7373  geButton_3.press
-00001ba0: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
-00001bb0: 613a 2073 656c 662e 6e6f 7469 6679 5f74  a: self.notify_t
-00001bc0: 6f6f 6c74 6970 2873 656c 662e 6172 7261  ooltip(self.arra
-00001bd0: 6e67 6542 7574 746f 6e5f 3329 290d 0a20  ngeButton_3)).. 
-00001be0: 2020 2020 2020 2073 656c 662e 6172 7261         self.arra
-00001bf0: 6e67 6542 7574 746f 6e5f 342e 7072 6573  ngeButton_4.pres
-00001c00: 7365 642e 636f 6e6e 6563 7428 6c61 6d62  sed.connect(lamb
-00001c10: 6461 3a20 7365 6c66 2e6e 6f74 6966 795f  da: self.notify_
-00001c20: 746f 6f6c 7469 7028 7365 6c66 2e61 7272  tooltip(self.arr
-00001c30: 616e 6765 4275 7474 6f6e 5f34 2929 0d0a  angeButton_4))..
-00001c40: 2020 2020 2020 2020 7365 6c66 2e61 7272          self.arr
-00001c50: 616e 6765 4275 7474 6f6e 5f35 2e70 7265  angeButton_5.pre
-00001c60: 7373 6564 2e63 6f6e 6e65 6374 286c 616d  ssed.connect(lam
-00001c70: 6264 613a 2073 656c 662e 6e6f 7469 6679  bda: self.notify
-00001c80: 5f74 6f6f 6c74 6970 2873 656c 662e 6172  _tooltip(self.ar
-00001c90: 7261 6e67 6542 7574 746f 6e5f 3529 290d  rangeButton_5)).
-00001ca0: 0a20 2020 2020 2020 2073 656c 662e 6172  .        self.ar
-00001cb0: 7261 6e67 6542 7574 746f 6e5f 362e 7072  rangeButton_6.pr
-00001cc0: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-00001cd0: 6d62 6461 3a20 7365 6c66 2e6e 6f74 6966  mbda: self.notif
-00001ce0: 795f 746f 6f6c 7469 7028 7365 6c66 2e61  y_tooltip(self.a
-00001cf0: 7272 616e 6765 4275 7474 6f6e 5f36 2929  rrangeButton_6))
-00001d00: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
-00001d10: 2e61 7272 616e 6765 4275 7474 6f6e 5f32  .arrangeButton_2
-00001d20: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
-00001d30: 286c 616d 6264 613a 2073 656c 662e 6e6f  (lambda: self.no
-00001d40: 7469 6679 5f74 6f6f 6c74 6970 2873 656c  tify_tooltip(sel
-00001d50: 662e 6172 7261 6e67 6542 7574 746f 6e5f  f.arrangeButton_
-00001d60: 3229 290d 0a0d 0a20 2020 2020 2020 2073  2))....        s
-00001d70: 656c 662e 6163 7469 6f6e 4765 6e65 7261  elf.actionGenera
-00001d80: 7465 5f42 616c 616e 6365 5368 6565 745f  te_BalanceSheet_
-00001d90: 4d61 7472 6978 2e74 7269 6767 6572 6564  Matrix.triggered
-00001da0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00001db0: 2073 656c 662e 6765 6e5f 6261 6c61 6e63   self.gen_balanc
-00001dc0: 655f 6d61 7472 6978 2864 6574 6169 6c65  e_matrix(detaile
-00001dd0: 643d 4661 6c73 6529 290d 0a20 2020 2020  d=False))..     
-00001de0: 2020 2073 656c 662e 6163 7469 6f6e 4765     self.actionGe
-00001df0: 6e65 7261 7465 5f42 616c 616e 6365 5f4d  nerate_Balance_M
-00001e00: 6174 7269 785f 4465 7461 696c 6564 2e74  atrix_Detailed.t
-00001e10: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
-00001e20: 286c 616d 6264 613a 2073 656c 662e 6765  (lambda: self.ge
-00001e30: 6e5f 6261 6c61 6e63 655f 6d61 7472 6978  n_balance_matrix
-00001e40: 2864 6574 6169 6c65 643d 5472 7565 2929  (detailed=True))
-00001e50: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00001e60: 2e61 6765 6e74 3145 6469 742e 7465 7874  .agent1Edit.text
-00001e70: 4564 6974 6564 2e63 6f6e 6e65 6374 2873  Edited.connect(s
-00001e80: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
-00001e90: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00001ea0: 6167 656e 7432 4564 6974 2e74 6578 7445  agent2Edit.textE
-00001eb0: 6469 7465 642e 636f 6e6e 6563 7428 7365  dited.connect(se
-00001ec0: 6c66 2e63 6861 6e67 655f 616c 6572 7429  lf.change_alert)
-00001ed0: 0d0a 2020 2020 2020 2020 7365 6c66 2e41  ..        self.A
-00001ee0: 7373 6574 4c69 7374 4c65 6674 2e74 6578  ssetListLeft.tex
-00001ef0: 7443 6861 6e67 6564 2e63 6f6e 6e65 6374  tChanged.connect
-00001f00: 2873 656c 662e 6368 616e 6765 5f61 6c65  (self.change_ale
-00001f10: 7274 290d 0a20 2020 2020 2020 2073 656c  rt)..        sel
-00001f20: 662e 4c69 6162 696c 6974 794c 6973 744c  f.LiabilityListL
-00001f30: 6566 742e 7465 7874 4368 616e 6765 642e  eft.textChanged.
-00001f40: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
-00001f50: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
-00001f60: 2020 2020 7365 6c66 2e45 7175 6974 794c      self.EquityL
-00001f70: 6973 744c 6566 742e 7465 7874 4368 616e  istLeft.textChan
-00001f80: 6765 642e 636f 6e6e 6563 7428 7365 6c66  ged.connect(self
-00001f90: 2e63 6861 6e67 655f 616c 6572 7429 0d0a  .change_alert)..
-00001fa0: 2020 2020 2020 2020 7365 6c66 2e41 7373          self.Ass
-00001fb0: 6574 4c69 7374 5269 6768 742e 7465 7874  etListRight.text
-00001fc0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
-00001fd0: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
-00001fe0: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-00001ff0: 2e4c 6961 6269 6c69 7479 4c69 7374 5269  .LiabilityListRi
-00002000: 6768 742e 7465 7874 4368 616e 6765 642e  ght.textChanged.
-00002010: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
-00002020: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
-00002030: 2020 2020 7365 6c66 2e45 7175 6974 794c      self.EquityL
-00002040: 6973 7452 6967 6874 2e74 6578 7443 6861  istRight.textCha
-00002050: 6e67 6564 2e63 6f6e 6e65 6374 2873 656c  nged.connect(sel
-00002060: 662e 6368 616e 6765 5f61 6c65 7274 290d  f.change_alert).
-00002070: 0a20 2020 2020 2020 2073 656c 662e 6564  .        self.ed
-00002080: 6974 5375 626a 6563 742e 7465 7874 4564  itSubject.textEd
-00002090: 6974 6564 2e63 6f6e 6e65 6374 2873 656c  ited.connect(sel
-000020a0: 662e 6368 616e 6765 5f61 6c65 7274 290d  f.change_alert).
-000020b0: 0a20 2020 2020 2020 2073 656c 662e 6564  .        self.ed
-000020c0: 6974 5368 6f72 746e 616d 652e 7465 7874  itShortname.text
-000020d0: 4564 6974 6564 2e63 6f6e 6e65 6374 2873  Edited.connect(s
-000020e0: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
-000020f0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00002100: 6564 6974 5175 616e 7469 7479 2e74 6578  editQuantity.tex
-00002110: 7445 6469 7465 642e 636f 6e6e 6563 7428  tEdited.connect(
-00002120: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
-00002130: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-00002140: 2e65 6469 7444 6573 6372 6970 7469 6f6e  .editDescription
-00002150: 2e74 6578 7445 6469 7465 642e 636f 6e6e  .textEdited.conn
-00002160: 6563 7428 7365 6c66 2e63 6861 6e67 655f  ect(self.change_
-00002170: 616c 6572 7429 0d0a 0d0a 2020 2020 2020  alert)....      
-00002180: 2020 7365 6c66 2e63 6f6d 626f 496e 636f    self.comboInco
-00002190: 6d65 4c65 6674 2e63 7572 7265 6e74 496e  meLeft.currentIn
-000021a0: 6465 7843 6861 6e67 6564 2e63 6f6e 6e65  dexChanged.conne
-000021b0: 6374 2873 656c 662e 6368 616e 6765 5f61  ct(self.change_a
-000021c0: 6c65 7274 290d 0a20 2020 2020 2020 2073  lert)..        s
-000021d0: 656c 662e 636f 6d62 6f43 6173 684c 6566  elf.comboCashLef
-000021e0: 742e 6375 7272 656e 7449 6e64 6578 4368  t.currentIndexCh
-000021f0: 616e 6765 642e 636f 6e6e 6563 7428 7365  anged.connect(se
-00002200: 6c66 2e63 6861 6e67 655f 616c 6572 7429  lf.change_alert)
-00002210: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-00002220: 6f6d 626f 496e 636f 6d65 5269 6768 742e  omboIncomeRight.
-00002230: 6375 7272 656e 7449 6e64 6578 4368 616e  currentIndexChan
-00002240: 6765 642e 636f 6e6e 6563 7428 7365 6c66  ged.connect(self
-00002250: 2e63 6861 6e67 655f 616c 6572 7429 0d0a  .change_alert)..
-00002260: 2020 2020 2020 2020 7365 6c66 2e63 6f6d          self.com
-00002270: 626f 4361 7368 5269 6768 742e 6375 7272  boCashRight.curr
-00002280: 656e 7449 6e64 6578 4368 616e 6765 642e  entIndexChanged.
-00002290: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
-000022a0: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
-000022b0: 2020 2020 7365 6c66 2e72 6567 6973 7465      self.registe
-000022c0: 7246 6c6f 7742 6f78 2e63 7572 7265 6e74  rFlowBox.current
-000022d0: 496e 6465 7843 6861 6e67 6564 2e63 6f6e  IndexChanged.con
-000022e0: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
-000022f0: 5f61 6c65 7274 290d 0a20 2020 2020 2020  _alert)..       
-00002300: 2073 656c 662e 7265 6769 7374 6572 466c   self.registerFl
-00002310: 6f77 426f 782e 6375 7272 656e 7449 6e64  owBox.currentInd
-00002320: 6578 4368 616e 6765 642e 636f 6e6e 6563  exChanged.connec
-00002330: 7428 6c61 6d62 6461 3a20 7072 696e 7428  t(lambda: print(
-00002340: 2252 4547 4953 5445 5220 464c 4f57 222c  "REGISTER FLOW",
-00002350: 2073 656c 662e 7265 6769 7374 6572 466c   self.registerFl
-00002360: 6f77 426f 782e 6375 7272 656e 7454 6578  owBox.currentTex
-00002370: 7428 2929 290d 0a20 2020 2020 2020 2073  t()))..        s
-00002380: 656c 662e 636f 6d62 6f49 6e63 6f6d 654c  elf.comboIncomeL
-00002390: 6566 742e 6375 7272 656e 7449 6e64 6578  eft.currentIndex
-000023a0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
-000023b0: 6c61 6d62 6461 3a20 7072 696e 7428 2252  lambda: print("R
-000023c0: 4547 4953 5445 5220 464c 4f57 222c 2073  EGISTER FLOW", s
-000023d0: 656c 662e 7265 6769 7374 6572 466c 6f77  elf.registerFlow
-000023e0: 426f 782e 6375 7272 656e 7454 6578 7428  Box.currentText(
-000023f0: 2929 290d 0a0d 0a20 2020 2020 2020 2073  )))....        s
-00002400: 656c 662e 6564 6974 5479 7065 2e63 7572  elf.editType.cur
-00002410: 7265 6e74 496e 6465 7843 6861 6e67 6564  rentIndexChanged
-00002420: 2e63 6f6e 6e65 6374 2873 656c 662e 6368  .connect(self.ch
-00002430: 616e 6765 5f61 6c65 7274 290d 0a20 2020  ange_alert)..   
-00002440: 2020 2020 2073 656c 662e 636f 6d62 6f55       self.comboU
-00002450: 6e69 6469 722e 6375 7272 656e 7449 6e64  nidir.currentInd
-00002460: 6578 4368 616e 6765 642e 636f 6e6e 6563  exChanged.connec
-00002470: 7428 7365 6c66 2e63 6861 6e67 655f 616c  t(self.change_al
-00002480: 6572 7429 0d0a 0d0a 0d0a 2020 2020 2020  ert)......      
-00002490: 2020 7365 6c66 2e73 7069 6e42 6f78 466f    self.spinBoxFo
-000024a0: 6e74 5369 7a65 2e76 616c 7565 4368 616e  ntSize.valueChan
-000024b0: 6765 642e 636f 6e6e 6563 7428 6c61 6d62  ged.connect(lamb
-000024c0: 6461 3a20 7365 6c66 2e64 7261 7763 616e  da: self.drawcan
-000024d0: 7661 732e 7570 6461 7465 2829 290d 0a20  vas.update()).. 
-000024e0: 2020 2020 2020 2073 656c 662e 7370 696e         self.spin
-000024f0: 426f 7846 6f6e 7453 697a 655f 322e 7661  BoxFontSize_2.va
-00002500: 6c75 6543 6861 6e67 6564 2e63 6f6e 6e65  lueChanged.conne
-00002510: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
-00002520: 6472 6177 6361 6e76 6173 2e75 7064 6174  drawcanvas.updat
-00002530: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
-00002540: 7365 6c66 2e46 696c 7465 726c 696e 6545  self.FilterlineE
-00002550: 6469 742e 7465 7874 4368 616e 6765 642e  dit.textChanged.
-00002560: 636f 6e6e 6563 7428 7365 6c66 2e75 7064  connect(self.upd
-00002570: 6174 655f 7461 626c 6529 0d0a 0d0a 2020  ate_table)....  
-00002580: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
-00002590: 426f 782e 7374 6174 6543 6861 6e67 6564  Box.stateChanged
-000025a0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000025b0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-000025c0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-000025d0: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-000025e0: 785f 322e 7374 6174 6543 6861 6e67 6564  x_2.stateChanged
-000025f0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00002600: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00002610: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-00002620: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-00002630: 785f 332e 7374 6174 6543 6861 6e67 6564  x_3.stateChanged
-00002640: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00002650: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00002660: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-00002670: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-00002680: 785f 342e 7374 6174 6543 6861 6e67 6564  x_4.stateChanged
-00002690: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000026a0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-000026b0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-000026c0: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-000026d0: 785f 352e 7374 6174 6543 6861 6e67 6564  x_5.stateChanged
-000026e0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000026f0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00002700: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-00002710: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-00002720: 785f 362e 7374 6174 6543 6861 6e67 6564  x_6.stateChanged
-00002730: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00002740: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00002750: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-00002760: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-00002770: 785f 372e 7374 6174 6543 6861 6e67 6564  x_7.stateChanged
-00002780: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00002790: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-000027a0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-000027b0: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-000027c0: 785f 382e 7374 6174 6543 6861 6e67 6564  x_8.stateChanged
-000027d0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-000027e0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-000027f0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
-00002800: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
-00002810: 785f 392e 7374 6174 6543 6861 6e67 6564  x_9.stateChanged
-00002820: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00002830: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00002840: 2e75 7064 6174 6528 2929 0d0a 0d0a 2020  .update())....  
-00002850: 2020 2020 2020 2320 7374 6174 7573 204c        # status L
-00002860: 4544 0d0a 2020 2020 2020 2020 7365 6c66  ED..        self
-00002870: 2e74 6872 6561 6420 3d20 5154 6872 6561  .thread = QThrea
-00002880: 6428 290d 0a0d 0a20 2020 2020 2020 2073  d()....        s
-00002890: 656c 662e 776f 726b 6572 203d 2053 7461  elf.worker = Sta
-000028a0: 7475 734c 4544 2873 656c 662e 7261 6469  tusLED(self.radi
-000028b0: 6f42 7574 746f 6e29 0d0a 2020 2020 2020  oButton)..      
-000028c0: 2020 7365 6c66 2e77 6f72 6b65 722e 6d6f    self.worker.mo
-000028d0: 7665 546f 5468 7265 6164 2873 656c 662e  veToThread(self.
-000028e0: 7468 7265 6164 290d 0a20 2020 2020 2020  thread)..       
-000028f0: 2073 656c 662e 776f 726b 6572 2e66 696e   self.worker.fin
-00002900: 6973 6865 642e 636f 6e6e 6563 7428 7365  ished.connect(se
-00002910: 6c66 2e77 6f72 6b65 722e 6465 6c65 7465  lf.worker.delete
-00002920: 4c61 7465 7229 0d0a 2020 2020 2020 2020  Later)..        
-00002930: 7365 6c66 2e74 6872 6561 642e 6669 6e69  self.thread.fini
-00002940: 7368 6564 2e63 6f6e 6e65 6374 2873 656c  shed.connect(sel
-00002950: 662e 7468 7265 6164 2e64 656c 6574 654c  f.thread.deleteL
-00002960: 6174 6572 290d 0a20 2020 2020 2020 2073  ater)..        s
-00002970: 656c 662e 7468 7265 6164 2e73 7461 7274  elf.thread.start
-00002980: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00002990: 776f 726b 6572 2e72 756e 290d 0a20 2020  worker.run)..   
-000029a0: 2020 2020 2073 656c 662e 7468 7265 6164       self.thread
-000029b0: 2e73 7461 7274 2829 0d0a 0d0a 2020 2020  .start()....    
-000029c0: 2020 2020 7365 6c66 2e74 6865 6d65 5f6d      self.theme_m
-000029d0: 616e 6167 6572 203d 2054 6865 6d65 4d61  anager = ThemeMa
-000029e0: 6e61 6765 7228 7365 6c66 290d 0a20 2020  nager(self)..   
-000029f0: 2020 2020 2073 656c 662e 7365 7453 7479       self.setSty
-00002a00: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
-00002a10: 6d65 5f6d 616e 6167 6572 2e67 6574 5f73  me_manager.get_s
-00002a20: 7479 6c65 7368 6565 7428 226d 6169 6e22  tylesheet("main"
-00002a30: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
-00002a40: 6c66 2e63 7572 7265 6e74 5f66 696c 6520  lf.current_file 
-00002a50: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
-00002a60: 2020 2320 2d2d 0d0a 2020 2020 2020 2020    # --..        
-00002a70: 7365 6c66 2e64 7261 7763 616e 7661 7320  self.drawcanvas 
-00002a80: 3d20 6d79 5f77 6964 6765 740d 0a20 2020  = my_widget..   
-00002a90: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-00002aa0: 6e76 6173 2e6d 6f64 6520 3d20 2264 7261  nvas.mode = "dra
-00002ab0: 6722 0d0a 0d0a 2020 2020 2020 2020 7365  g"....        se
-00002ac0: 6c66 2e62 6163 6b75 705f 7374 7220 3d20  lf.backup_str = 
-00002ad0: 2222 0d0a 2020 2020 2020 2020 2320 7365  ""..        # se
-00002ae0: 6c66 2e73 6574 4d6f 7573 6554 7261 636b  lf.setMouseTrack
-00002af0: 696e 6728 5472 7565 290d 0a20 2020 2020  ing(True)..     
-00002b00: 2020 2023 2073 656c 662e 6e65 7874 4275     # self.nextBu
-00002b10: 7474 6f6e 2e70 7265 7373 6564 2e63 6f6e  tton.pressed.con
-00002b20: 6e65 6374 2873 656c 662e 676f 746f 5f6e  nect(self.goto_n
-00002b30: 6578 7429 0d0a 2020 2020 2020 2020 7365  ext)..        se
-00002b40: 6c66 2e62 726f 7773 6542 7574 746f 6e2e  lf.browseButton.
-00002b50: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
-00002b60: 7428 7365 6c66 2e62 726f 7773 6529 0d0a  t(self.browse)..
-00002b70: 2020 2020 2020 2020 2320 7365 6c66 2e73          # self.s
-00002b80: 6176 6542 7574 746f 6e2e 7472 6967 6765  aveButton.trigge
-00002b90: 7265 642e 636f 6e6e 6563 7428 7365 6c66  red.connect(self
-00002ba0: 2e73 6176 6529 0d0a 2020 2020 2020 2020  .save)..        
-00002bb0: 7365 6c66 2e73 6176 6541 7342 7574 746f  self.saveAsButto
-00002bc0: 6e2e 7472 6967 6765 7265 642e 636f 6e6e  n.triggered.conn
-00002bd0: 6563 7428 7365 6c66 2e73 6176 655f 646c  ect(self.save_dl
-00002be0: 6729 0d0a 2020 2020 2020 2020 7365 6c66  g)..        self
-00002bf0: 2e73 6176 6542 7569 6c64 4275 7474 6f6e  .saveBuildButton
-00002c00: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
-00002c10: 6374 2873 656c 662e 7361 7665 5f61 6e64  ct(self.save_and
-00002c20: 5f62 7569 6c64 290d 0a20 2020 2020 2020  _build)..       
-00002c30: 2023 2073 656c 662e 466c 6970 4865 6967   # self.FlipHeig
-00002c40: 6874 4275 7474 6f6e 2e70 7265 7373 6564  htButton.pressed
-00002c50: 2e63 6f6e 6e65 6374 2873 656c 662e 666c  .connect(self.fl
-00002c60: 6970 5f68 6569 6768 7429 0d0a 2020 2020  ip_height)..    
-00002c70: 2020 2020 7365 6c66 2e61 6374 696f 6e46      self.actionF
-00002c80: 6c69 705f 5669 6577 2e74 7269 6767 6572  lip_View.trigger
-00002c90: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00002ca0: 666c 6970 5f68 6569 6768 7429 0d0a 2020  flip_height)..  
-00002cb0: 2020 2020 2020 7365 6c66 2e61 6374 696f        self.actio
-00002cc0: 6e52 6573 746f 7265 5f4f 7269 6769 6e61  nRestore_Origina
-00002cd0: 6c5f 5369 7a65 2e74 7269 6767 6572 6564  l_Size.triggered
-00002ce0: 2e63 6f6e 6e65 6374 2873 656c 662e 7265  .connect(self.re
-00002cf0: 7374 6f72 655f 6f72 6967 696e 616c 5f73  store_original_s
-00002d00: 697a 6529 0d0a 0d0a 2020 2020 2020 2020  ize)....        
-00002d10: 7365 6c66 2e61 6374 696f 6e53 686f 775f  self.actionShow_
-00002d20: 4f75 7470 7574 5f4c 6f67 2e74 7269 6767  Output_Log.trigg
-00002d30: 6572 6564 2e63 6f6e 6e65 6374 2873 656c  ered.connect(sel
-00002d40: 662e 7368 6f77 5f6f 7574 7075 745f 6469  f.show_output_di
-00002d50: 7370 6c61 7929 0d0a 0d0a 2020 2020 2020  splay)....      
-00002d60: 2020 2320 7365 6c66 2e73 686f 7767 7261    # self.showgra
-00002d70: 7068 4275 7474 6f6e 2e74 7269 6767 6572  phButton.trigger
-00002d80: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00002d90: 7368 6f77 5f67 7261 7068 290d 0a20 2020  show_graph)..   
-00002da0: 2020 2020 2073 656c 662e 6765 6e4d 6174       self.genMat
-00002db0: 4275 7474 6f6e 2e74 7269 6767 6572 6564  Button.triggered
-00002dc0: 2e63 6f6e 6e65 6374 2873 656c 662e 7472  .connect(self.tr
-00002dd0: 795f 6765 6e5f 6d61 7472 6978 290d 0a20  y_gen_matrix).. 
-00002de0: 2020 2020 2020 2023 2073 656c 662e 6765         # self.ge
-00002df0: 6e43 6f64 6542 7574 746f 6e2e 7472 6967  nCodeButton.trig
-00002e00: 6765 7265 642e 636f 6e6e 6563 7428 7365  gered.connect(se
-00002e10: 6c66 2e67 656e 5f63 6f64 6529 0d0a 2020  lf.gen_code)..  
-00002e20: 2020 2020 2020 2320 7365 6c66 2e67 656e        # self.gen
-00002e30: 5465 7842 7574 746f 6e2e 7072 6573 7365  TexButton.presse
-00002e40: 642e 636f 6e6e 6563 7428 7365 6c66 2e67  d.connect(self.g
-00002e50: 656e 5f74 6578 5f64 6573 6372 6970 7469  en_tex_descripti
-00002e60: 6f6e 290d 0a20 2020 2020 2020 2073 656c  on)..        sel
-00002e70: 662e 6765 6e49 4353 4275 7474 6f6e 2e74  f.genICSButton.t
-00002e80: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
-00002e90: 2873 656c 662e 6765 6e5f 7465 785f 6963  (self.gen_tex_ic
-00002ea0: 7329 0d0a 0d0a 2020 2020 2020 2020 7365  s)....        se
-00002eb0: 6c66 2e67 7261 7068 7368 6f77 696e 636f  lf.graphshowinco
-00002ec0: 6d65 2e70 7265 7373 6564 2e63 6f6e 6e65  me.pressed.conne
-00002ed0: 6374 2873 656c 662e 6765 6e5f 6963 735f  ct(self.gen_ics_
-00002ee0: 7369 6e67 6c65 290d 0a20 2020 2020 2020  single)..       
-00002ef0: 2073 656c 662e 6765 6e43 4653 4275 7474   self.genCFSButt
-00002f00: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
-00002f10: 6374 2873 656c 662e 6765 6e5f 6361 7368  ct(self.gen_cash
-00002f20: 666c 6f77 5f73 696e 676c 6529 0d0a 0d0a  flow_single)....
-00002f30: 2020 2020 2020 2020 7365 6c66 2e65 6469          self.edi
-00002f40: 744d 6169 6e4c 6f6f 7042 7574 746f 6e2e  tMainLoopButton.
-00002f50: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
-00002f60: 7428 7365 6c66 2e65 6469 745f 6d61 696e  t(self.edit_main
-00002f70: 6c6f 6f70 290d 0a0d 0a20 2020 2020 2020  loop)....       
-00002f80: 2073 656c 662e 6275 696c 6450 726f 6a65   self.buildProje
-00002f90: 6374 4275 7474 6f6e 2e74 7269 6767 6572  ctButton.trigger
-00002fa0: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
-00002fb0: 613a 2073 656c 662e 6275 696c 645f 7072  a: self.build_pr
-00002fc0: 6f6a 6563 7428 6f76 6572 7772 6974 653d  oject(overwrite=
-00002fd0: 5472 7565 2929 0d0a 2020 2020 2020 2020  True))..        
-00002fe0: 7365 6c66 2e72 756e 4275 7474 6f6e 2e74  self.runButton.t
-00002ff0: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
-00003000: 2873 656c 662e 7275 6e5f 7072 6f6a 6563  (self.run_projec
-00003010: 7429 0d0a 0d0a 2020 2020 2020 2020 7365  t)....        se
-00003020: 6c66 2e73 686f 7274 6375 7420 3d20 5153  lf.shortcut = QS
-00003030: 686f 7274 6375 7428 514b 6579 5365 7175  hortcut(QKeySequ
-00003040: 656e 6365 2822 4374 726c 2b53 2229 2c73  ence("Ctrl+S"),s
-00003050: 656c 6629 0d0a 2020 2020 2020 2020 7365  elf)..        se
-00003060: 6c66 2e73 686f 7274 6375 742e 6163 7469  lf.shortcut.acti
-00003070: 7661 7465 642e 636f 6e6e 6563 7428 7365  vated.connect(se
-00003080: 6c66 2e73 6176 655f 616e 645f 6275 696c  lf.save_and_buil
-00003090: 6429 0d0a 2020 2020 2020 2020 7365 6c66  d)..        self
-000030a0: 2e61 6374 696f 6e41 626f 7574 2e74 7269  .actionAbout.tri
-000030b0: 6767 6572 6564 2e63 6f6e 6e65 6374 286c  ggered.connect(l
-000030c0: 616d 6264 613a 2073 656c 662e 6e6f 7469  ambda: self.noti
-000030d0: 6679 2822 7366 6374 6f6c 732d 6174 7475  fy("sfctols-attu
-000030e0: 6e65 2076 6572 2e20 302e 3220 636f 6d70  ne ver. 0.2 comp
-000030f0: 6174 6962 6c65 2077 6974 6820 7366 6374  atible with sfct
-00003100: 6f6f 6c73 203e 3d20 312e 302e 312e 2054  ools >= 1.0.1. T
-00003110: 6861 6e6b 7320 666f 7220 7573 696e 6721  hanks for using!
-00003120: 2050 6c65 6173 6520 7265 706f 7274 2062   Please report b
-00003130: 7567 7320 746f 2074 686f 6d61 732e 6261  ugs to thomas.ba
-00003140: 6c64 6175 6640 646c 722e 6465 222c 7469  ldauf@dlr.de",ti
-00003150: 746c 653d 2241 626f 7574 2074 6869 7320  tle="About this 
-00003160: 736f 6674 7761 7265 2229 290d 0a20 2020  software"))..   
-00003170: 2020 2020 2073 656c 662e 6163 7469 6f6e       self.action
-00003180: 466c 6f77 4d61 7472 6978 5f74 6f5f 4578  FlowMatrix_to_Ex
-00003190: 6365 6c5f 6669 6c65 2e74 7269 6767 6572  cel_file.trigger
-000031a0: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
-000031b0: 613a 2073 656c 662e 6765 6e5f 6d61 7472  a: self.gen_matr
-000031c0: 6978 286d 6f64 653d 2265 7863 656c 2229  ix(mode="excel")
-000031d0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-000031e0: 662e 6163 7469 6f6e 5377 6974 6368 5f44  f.actionSwitch_D
-000031f0: 6172 6b5f 4272 6967 6874 5f4d 6f64 652e  ark_Bright_Mode.
-00003200: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
-00003210: 7428 7365 6c66 2e73 7769 7463 685f 7468  t(self.switch_th
-00003220: 656d 6529 0d0a 0d0a 2020 2020 2020 2020  eme)....        
-00003230: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-00003240: 5669 6577 2e73 6574 4564 6974 5472 6967  View.setEditTrig
-00003250: 6765 7273 2851 4162 7374 7261 6374 4974  gers(QAbstractIt
-00003260: 656d 5669 6577 2e4e 6f45 6469 7454 7269  emView.NoEditTri
-00003270: 6767 6572 7329 0d0a 2020 2020 2020 2020  ggers)..        
-00003280: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-00003290: 5669 6577 2e64 6f75 626c 6543 6c69 636b  View.doubleClick
-000032a0: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-000032b0: 6461 7461 5f73 656c 6563 7429 0d0a 2020  data_select)..  
-000032c0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-000032d0: 6163 7469 6f6e 5669 6577 2e73 6574 436f  actionView.setCo
-000032e0: 6c75 6d6e 5769 6474 6828 302c 2031 3230  lumnWidth(0, 120
-000032f0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-00003300: 662e 6172 7261 6e67 6542 7574 746f 6e2e  f.arrangeButton.
-00003310: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
-00003320: 7365 6c66 2e61 7272 616e 6765 5f70 7265  self.arrange_pre
-00003330: 7474 7929 0d0a 2020 2020 2020 2020 7365  tty)..        se
-00003340: 6c66 2e72 656d 6f76 6542 7574 746f 6e2e  lf.removeButton.
-00003350: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
-00003360: 7365 6c66 2e72 656d 6f76 655f 6974 656d  self.remove_item
-00003370: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-00003380: 662e 6263 312e 7072 6573 7365 642e 636f  f.bc1.pressed.co
-00003390: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-000033a0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-000033b0: 3129 290d 0a20 2020 2020 2020 2073 656c  1))..        sel
-000033c0: 662e 6263 322e 7072 6573 7365 642e 636f  f.bc2.pressed.co
-000033d0: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-000033e0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-000033f0: 3229 290d 0a20 2020 2020 2020 2073 656c  2))..        sel
-00003400: 662e 6263 332e 7072 6573 7365 642e 636f  f.bc3.pressed.co
-00003410: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-00003420: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-00003430: 3329 290d 0a20 2020 2020 2020 2073 656c  3))..        sel
-00003440: 662e 6263 342e 7072 6573 7365 642e 636f  f.bc4.pressed.co
-00003450: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-00003460: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-00003470: 3429 290d 0a20 2020 2020 2020 2073 656c  4))..        sel
-00003480: 662e 6263 352e 7072 6573 7365 642e 636f  f.bc5.pressed.co
-00003490: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-000034a0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-000034b0: 3529 290d 0a20 2020 2020 2020 2073 656c  5))..        sel
-000034c0: 662e 6263 362e 7072 6573 7365 642e 636f  f.bc6.pressed.co
-000034d0: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-000034e0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-000034f0: 3629 290d 0a20 2020 2020 2020 2073 656c  6))..        sel
-00003500: 662e 6263 372e 7072 6573 7365 642e 636f  f.bc7.pressed.co
-00003510: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-00003520: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-00003530: 3729 290d 0a20 2020 2020 2020 2073 656c  7))..        sel
-00003540: 662e 6263 382e 7072 6573 7365 642e 636f  f.bc8.pressed.co
-00003550: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-00003560: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
-00003570: 3829 290d 0a0d 0a20 2020 2020 2020 2073  8))....        s
-00003580: 656c 662e 6274 6e5f 6373 6176 652e 7072  elf.btn_csave.pr
-00003590: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-000035a0: 6d62 6461 3a20 7365 6c66 2e74 6865 6d65  mbda: self.theme
-000035b0: 5f6d 616e 6167 6572 2e73 6176 655f 636f  _manager.save_co
-000035c0: 6c6f 7273 2829 290d 0a20 2020 2020 2020  lors())..       
-000035d0: 2073 656c 662e 6274 6e5f 636c 6f61 642e   self.btn_cload.
-000035e0: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
-000035f0: 6c61 6d62 6461 3a20 7365 6c66 2e74 6865  lambda: self.the
-00003600: 6d65 5f6d 616e 6167 6572 2e6c 6f61 645f  me_manager.load_
-00003610: 636f 6c6f 7273 2829 290d 0a20 2020 2020  colors())..     
-00003620: 2020 2073 656c 662e 6274 6e5f 6372 6573     self.btn_cres
-00003630: 746f 7265 2e70 7265 7373 6564 2e63 6f6e  tore.pressed.con
-00003640: 6e65 6374 286c 616d 6264 613a 2073 656c  nect(lambda: sel
-00003650: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-00003660: 7265 7374 6f72 6528 2929 0d0a 0d0a 2020  restore())....  
-00003670: 2020 2020 2020 7365 6c66 2e6d 6169 6e6c        self.mainl
-00003680: 6f6f 705f 7374 7220 3d20 2222 0d0a 0d0a  oop_str = ""....
-00003690: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
-000036a0: 7469 6e67 735f 7374 7220 3d20 2222 220d  tings_str = """.
-000036b0: 0a6d 6574 6169 6e66 6f3a 0d0a 0961 7574  .metainfo:...aut
-000036c0: 686f 723a 2079 6f75 7220 6e61 6d65 2068  hor: your name h
-000036d0: 6572 650d 0a09 6461 7465 3a20 3230 3232  ere...date: 2022
-000036e0: 0d0a 0969 6e66 6f3a 2065 7861 6d70 6c65  ...info: example
-000036f0: 2073 6574 7469 6e67 730d 0a0d 0a68 7970   settings....hyp
-00003700: 6572 7061 7261 6d73 3a0d 0a20 2020 2020  erparams:..     
-00003710: 2020 2d20 6e61 6d65 3a20 6578 616d 706c    - name: exampl
-00003720: 650d 0a20 2020 2020 2020 2020 7661 6c75  e..         valu
-00003730: 653a 2034 322e 300d 0a20 2020 2020 2020  e: 42.0..       
-00003740: 2020 6465 7363 7269 7074 696f 6e3a 2061    description: a
-00003750: 6e20 6578 616d 706c 6520 7061 7261 6d65  n example parame
-00003760: 7465 720d 0a22 2222 0d0a 0d0a 2020 2020  ter.."""....    
-00003770: 2020 2020 7365 6c66 2e65 6469 7453 6574      self.editSet
-00003780: 7469 6e67 7342 7574 746f 6e2e 7472 6967  tingsButton.trig
-00003790: 6765 7265 642e 636f 6e6e 6563 7428 7365  gered.connect(se
-000037a0: 6c66 2e65 6469 745f 7365 7474 696e 6773  lf.edit_settings
-000037b0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-000037c0: 662e 6164 6442 7574 746f 6e2e 7072 6573  f.addButton.pres
-000037d0: 7365 642e 636f 6e6e 6563 7428 7365 6c66  sed.connect(self
-000037e0: 2e61 6464 5f6e 6577 2920 2320 6164 6420  .add_new) # add 
-000037f0: 616e 2061 6765 6e74 0d0a 2020 2020 2020  an agent..      
-00003800: 2020 7365 6c66 2e61 6464 4275 7474 6f6e    self.addButton
-00003810: 322e 7072 6573 7365 642e 636f 6e6e 6563  2.pressed.connec
-00003820: 7428 7365 6c66 2e61 6464 5f68 656c 7065  t(self.add_helpe
-00003830: 7229 2023 2061 6464 2061 2068 656c 7065  r) # add a helpe
-00003840: 7220 6167 656e 7420 286e 6f20 7472 616e  r agent (no tran
-00003850: 7361 6374 696f 6e73 290d 0a20 2020 2020  sactions)..     
-00003860: 2020 2073 656c 662e 6772 6170 6844 656c     self.graphDel
-00003870: 6574 6542 7574 746f 6e2e 7072 6573 7365  eteButton.presse
-00003880: 642e 636f 6e6e 6563 7428 7365 6c66 2e72  d.connect(self.r
-00003890: 656d 6f76 655f 6865 6c70 6572 290d 0a0d  emove_helper)...
-000038a0: 0a0d 0a0d 0a20 2020 2020 2020 2023 7365  .....        #se
-000038b0: 6c66 2e73 6176 6542 7574 746f 6e2e 7072  lf.saveButton.pr
-000038c0: 6573 7365 642e 636f 6e6e 6563 7428 7365  essed.connect(se
-000038d0: 6c66 2e73 6176 6529 0d0a 0d0a 2020 2020  lf.save)....    
-000038e0: 2020 2020 2320 7365 6c66 2e67 7261 7068      # self.graph
-000038f0: 5365 6c65 6374 4275 7474 6f6e 2e70 7265  SelectButton.pre
-00003900: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
-00003910: 662e 6368 616e 6765 5f67 7261 7068 6d6f  f.change_graphmo
-00003920: 6465 5f73 656c 6563 7429 0d0a 2020 2020  de_select)..    
-00003930: 2020 2020 2320 7365 6c66 2e67 7261 7068      # self.graph
-00003940: 4472 6167 4275 7474 6f6e 2e70 7265 7373  DragButton.press
-00003950: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00003960: 6368 616e 6765 5f67 7261 7068 6d6f 6465  change_graphmode
-00003970: 5f64 7261 6729 0d0a 0d0a 2020 2020 2020  _drag)....      
-00003980: 2020 7365 6c66 2e67 7261 7068 4564 6974    self.graphEdit
-00003990: 4275 7474 6f6e 2e70 7265 7373 6564 2e63  Button.pressed.c
-000039a0: 6f6e 6e65 6374 2873 656c 662e 6564 6974  onnect(self.edit
-000039b0: 5f67 7261 7068 5f61 6765 6e74 290d 0a0d  _graph_agent)...
-000039c0: 0a20 2020 2020 2020 2023 666f 7220 7769  .        #for wi
-000039d0: 6467 6574 2069 6e20 5b73 656c 662e 4173  dget in [self.As
-000039e0: 7365 744c 6973 744c 6566 742c 2073 656c  setListLeft, sel
-000039f0: 662e 4173 7365 744c 6973 7452 6967 6874  f.AssetListRight
-00003a00: 2c0d 0a20 2020 2020 2020 2023 2020 2020  ,..        #    
-00003a10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00003a20: 4c69 6162 696c 6974 794c 6973 744c 6566  LiabilityListLef
-00003a30: 742c 2073 656c 662e 4c69 6162 696c 6974  t, self.Liabilit
-00003a40: 794c 6973 7452 6967 6874 2c0d 0a20 2020  yListRight,..   
-00003a50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00003a60: 2020 2020 2073 656c 662e 4571 7569 7479       self.Equity
-00003a70: 4c69 7374 4c65 6674 2c20 7365 6c66 2e45  ListLeft, self.E
-00003a80: 7175 6974 794c 6973 7452 6967 6874 5d3a  quityListRight]:
-00003a90: 0d0a 2020 2020 2020 2020 2320 2020 2077  ..        #    w
-00003aa0: 6964 6765 742e 7465 7874 4368 616e 6765  idget.textChange
-00003ab0: 642e 636f 6e6e 6563 7428 7365 6c66 2e75  d.connect(self.u
-00003ac0: 7064 6174 655f 6461 7461 290d 0a20 2020  pdate_data)..   
-00003ad0: 2020 2020 2073 656c 662e 6163 7469 6f6e       self.action
-00003ae0: 5377 6170 5f4c 696e 655f 496e 7465 7270  Swap_Line_Interp
-00003af0: 6f6c 6174 696f 6e2e 7472 6967 6765 7265  olation.triggere
-00003b00: 642e 636f 6e6e 6563 7428 7365 6c66 2e64  d.connect(self.d
-00003b10: 7261 7763 616e 7661 732e 7377 6170 5f69  rawcanvas.swap_i
-00003b20: 6e74 6572 706f 6c5f 7374 796c 6529 0d0a  nterpol_style)..
-00003b30: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00003b40: 6374 696f 6e45 7870 6f72 745f 4772 6170  ctionExport_Grap
-00003b50: 685f 746f 5f50 4446 2e74 7269 6767 6572  h_to_PDF.trigger
-00003b60: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00003b70: 6472 6177 6361 6e76 6173 2e65 7870 6f72  drawcanvas.expor
-00003b80: 745f 7064 6629 0d0a 0d0a 2020 2020 2020  t_pdf)....      
-00003b90: 2020 7365 6c66 2e75 6470 6174 6542 7574    self.udpateBut
-00003ba0: 746f 6e2e 7072 6573 7365 642e 636f 6e6e  ton.pressed.conn
-00003bb0: 6563 7428 7365 6c66 2e75 7064 6174 655f  ect(self.update_
-00003bc0: 6461 7461 290d 0a0d 0a20 2020 2020 2020  data)....       
-00003bd0: 2073 656c 662e 6669 6c65 6e61 6d65 203d   self.filename =
-00003be0: 204e 6f6e 6520 2020 2023 2063 7572 7265   None    # curre
-00003bf0: 6e74 202e 7961 6d6c 2066 696c 650d 0a20  nt .yaml file.. 
-00003c00: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-00003c10: 795f 6461 7461 203d 205b 5d20 2320 7374  y_data = [] # st
-00003c20: 6f72 6520 6375 7272 656e 7420 656e 7472  ore current entr
-00003c30: 6965 730d 0a20 2020 2020 2020 2073 656c  ies..        sel
-00003c40: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
-00003c50: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
-00003c60: 2020 2373 656c 662e 6d61 7472 6978 5669    #self.matrixVi
-00003c70: 6577 203d 204d 6174 7269 7856 6965 7765  ew = MatrixViewe
-00003c80: 7228 7365 6c66 290d 0a20 2020 2020 2020  r(self)..       
-00003c90: 2073 656c 662e 6d6f 7665 5570 4274 6e2e   self.moveUpBtn.
-00003ca0: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
-00003cb0: 7365 6c66 2e6d 6f76 655f 7570 290d 0a20  self.move_up).. 
-00003cc0: 2020 2020 2020 2073 656c 662e 6d6f 7665         self.move
-00003cd0: 446e 4274 6e2e 7072 6573 7365 642e 636f  DnBtn.pressed.co
-00003ce0: 6e6e 6563 7428 7365 6c66 2e6d 6f76 655f  nnect(self.move_
-00003cf0: 646f 776e 290d 0a0d 0a20 2020 2020 2020  down)....       
-00003d00: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
-00003d10: 6f2e 6974 656d 5365 6c65 6374 696f 6e43  o.itemSelectionC
-00003d20: 6861 6e67 6564 2e63 6f6e 6e65 6374 286c  hanged.connect(l
-00003d30: 616d 6264 613a 2073 656c 662e 6472 6177  ambda: self.draw
-00003d40: 6361 6e76 6173 2e75 7064 6174 6528 2929  canvas.update())
-00003d50: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-00003d60: 6c65 6172 4669 6c74 6572 4275 7474 6f6e  learFilterButton
-00003d70: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
-00003d80: 2873 656c 662e 636c 6561 725f 6669 6c74  (self.clear_filt
-00003d90: 6572 290d 0a0d 0a20 2020 2020 2020 2073  er)....        s
-00003da0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00003db0: 722e 7468 656d 6520 3d20 2264 6172 6b22  r.theme = "dark"
-00003dc0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-00003dd0: 7769 7463 685f 7468 656d 6528 290d 0a0d  witch_theme()...
-00003de0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00003df0: 7468 656d 655f 6d61 6e61 6765 722e 7265  theme_manager.re
-00003e00: 7374 6f72 6528 290d 0a0d 0a20 2020 2020  store()....     
-00003e10: 2020 2073 656c 662e 7377 6974 6368 5f74     self.switch_t
-00003e20: 6865 6d65 2829 0d0a 2020 2020 2020 2020  heme()..        
-00003e30: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
-00003e40: 6528 290d 0a0d 0a0d 0a20 2020 2064 6566  e()......    def
-00003e50: 2063 6861 6e67 655f 636f 6c6f 7228 7365   change_color(se
-00003e60: 6c66 2c77 6869 6368 293a 0d0a 2020 2020  lf,which):..    
-00003e70: 2020 2020 636f 6c6f 7220 3d20 5143 6f6c      color = QCol
-00003e80: 6f72 4469 616c 6f67 2e67 6574 436f 6c6f  orDialog.getColo
-00003e90: 7228 290d 0a0d 0a20 2020 2020 2020 2069  r()....        i
-00003ea0: 6620 636f 6c6f 722e 6973 5661 6c69 6428  f color.isValid(
-00003eb0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00003ec0: 7072 696e 7428 2243 4841 4e47 4520 434f  print("CHANGE CO
-00003ed0: 4c4f 5222 2c20 7768 6963 682c 2063 6f6c  LOR", which, col
-00003ee0: 6f72 2e6e 616d 6528 2929 0d0a 0d0a 2020  or.name())....  
-00003ef0: 2020 2020 2020 2020 2020 6274 6e5f 7461            btn_ta
-00003f00: 626c 6520 3d20 7b0d 0a20 2020 2020 2020  ble = {..       
-00003f10: 2020 2020 2020 2020 2031 3a20 7365 6c66           1: self
-00003f20: 2e62 6331 2c0d 0a20 2020 2020 2020 2020  .bc1,..         
-00003f30: 2020 2020 2020 2032 3a20 7365 6c66 2e62         2: self.b
-00003f40: 6332 2c0d 0a20 2020 2020 2020 2020 2020  c2,..           
-00003f50: 2020 2020 2033 3a20 7365 6c66 2e62 6333       3: self.bc3
-00003f60: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00003f70: 2020 2034 3a20 7365 6c66 2e62 6334 2c0d     4: self.bc4,.
-00003f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003f90: 2035 3a20 7365 6c66 2e62 6335 2c0d 0a20   5: self.bc5,.. 
-00003fa0: 2020 2020 2020 2020 2020 2020 2020 2036                 6
-00003fb0: 3a20 7365 6c66 2e62 6336 2c0d 0a20 2020  : self.bc6,..   
-00003fc0: 2020 2020 2020 2020 2020 2020 2037 3a20               7: 
-00003fd0: 7365 6c66 2e62 6337 2c0d 0a20 2020 2020  self.bc7,..     
-00003fe0: 2020 2020 2020 2020 2020 2038 3a20 7365             8: se
-00003ff0: 6c66 2e62 6338 2c0d 0a20 2020 2020 2020  lf.bc8,..       
-00004000: 2020 2020 207d 0d0a 0d0a 2020 2020 2020       }....      
-00004010: 2020 2020 2020 6274 6e5f 7461 626c 655b        btn_table[
-00004020: 7768 6963 685d 2e73 6574 5374 796c 6553  which].setStyleS
-00004030: 6865 6574 2822 6261 636b 6772 6f75 6e64  heet("background
-00004040: 2d63 6f6c 6f72 3a20 7267 6228 2573 2c25  -color: rgb(%s,%
-00004050: 732c 2573 293b 2225 2863 6f6c 6f72 2e72  s,%s);"%(color.r
-00004060: 6564 2829 2c63 6f6c 6f72 2e67 7265 656e  ed(),color.green
-00004070: 2829 2c63 6f6c 6f72 2e62 6c75 6528 2929  (),color.blue())
-00004080: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00004090: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-000040a0: 722e 636f 6c6f 7273 5b73 656c 662e 7468  r.colors[self.th
-000040b0: 656d 655f 6d61 6e61 6765 722e 7468 656d  eme_manager.them
-000040c0: 655d 5b77 6869 6368 2d31 5d20 3d20 636f  e][which-1] = co
-000040d0: 6c6f 720d 0a0d 0a0d 0a20 2020 2064 6566  lor......    def
-000040e0: 2063 6c65 6172 5f66 696c 7465 7228 7365   clear_filter(se
-000040f0: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
-00004100: 6c66 2e66 696c 7465 7243 6f6d 626f 2e63  lf.filterCombo.c
-00004110: 6c65 6172 5365 6c65 6374 696f 6e28 290d  learSelection().
-00004120: 0a0d 0a20 2020 2064 6566 2067 656e 5f62  ...    def gen_b
-00004130: 616c 616e 6365 5f6d 6174 7269 7828 7365  alance_matrix(se
-00004140: 6c66 2c64 6574 6169 6c65 643d 5472 7565  lf,detailed=True
-00004150: 293a 0d0a 2020 2020 2020 2020 2320 6765  ):..        # ge
-00004160: 6e65 7261 7465 7320 6120 6261 6c61 6e63  nerates a balanc
-00004170: 6520 7368 6565 7420 6d61 7472 6978 2066  e sheet matrix f
-00004180: 6f72 2061 6c6c 2061 6765 6e74 730d 0a20  or all agents.. 
-00004190: 2020 2020 2020 2023 203a 7061 7261 6d3a         # :param:
-000041a0: 2064 6574 6169 6c65 643a 2073 686f 7720   detailed: show 
-000041b0: 6c61 7267 6520 6d61 7472 6978 206f 7220  large matrix or 
-000041c0: 6167 6772 6567 6174 6520 696e 6469 7669  aggregate indivi
-000041d0: 6475 616c 2072 6f77 733f 0d0a 0d0a 2020  dual rows?....  
-000041e0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-000041f0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00004200: 5f62 616c 616e 6365 203d 2020 6465 6661  _balance =  defa
-00004210: 756c 7464 6963 7428 6c61 6d62 6461 3a20  ultdict(lambda: 
-00004220: 7b22 4974 656d 223a 5b5d 2c22 4173 7365  {"Item":[],"Asse
-00004230: 7473 223a 5b5d 2c22 4c69 6162 696c 6974  ts":[],"Liabilit
-00004240: 6965 7322 3a20 5b5d 7d29 0d0a 0d0a 0d0a  ies": []})......
-00004250: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00004260: 6669 6c65 6461 7461 2069 6e20 7365 6c66  filedata in self
-00004270: 2e65 6e74 7279 5f64 6174 613a 0d0a 0d0a  .entry_data:....
-00004280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004290: 6167 656e 7431 203d 2066 696c 6564 6174  agent1 = filedat
-000042a0: 615b 2261 6765 6e74 3122 5d2e 7374 7269  a["agent1"].stri
-000042b0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-000042c0: 2020 2020 2061 6765 6e74 3220 3d20 6669       agent2 = fi
-000042d0: 6c65 6461 7461 5b22 6167 656e 7432 225d  ledata["agent2"]
-000042e0: 2e73 7472 6970 2829 0d0a 0d0a 2020 2020  .strip()....    
-000042f0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-00004300: 7473 3120 3d20 6669 6c65 6461 7461 5b22  ts1 = filedata["
-00004310: 6131 225d 0d0a 2020 2020 2020 2020 2020  a1"]..          
-00004320: 2020 2020 2020 6c69 6162 7331 203d 2066        liabs1 = f
-00004330: 696c 6564 6174 615b 226c 3122 5d20 232b  iledata["l1"] #+
-00004340: 2066 696c 6564 6174 615b 2265 3122 5d20   filedata["e1"] 
-00004350: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
-00004360: 2020 2020 2020 2020 2020 6173 7365 7473            assets
-00004370: 3220 3d20 6669 6c65 6461 7461 5b22 6132  2 = filedata["a2
-00004380: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-00004390: 2020 2020 6c69 6162 7332 203d 2066 696c      liabs2 = fil
-000043a0: 6564 6174 615b 226c 3222 5d20 232b 2066  edata["l2"] #+ f
-000043b0: 696c 6564 6174 615b 2265 3222 5d20 2b20  iledata["e2"] + 
-000043c0: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-000043d0: 2020 2020 2020 2020 6966 2064 6574 6169          if detai
-000043e0: 6c65 643a 0d0a 2020 2020 2020 2020 2020  led:..          
-000043f0: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
-00004400: 7420 3d20 2220 2825 7329 5c6e 2220 2520  t = " (%s)\n" % 
-00004410: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
-00004420: 7422 5d0d 0a20 2020 2020 2020 2020 2020  t"]..           
-00004430: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00004440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004450: 7375 626a 6563 7420 3d20 225c 6e22 0d0a  subject = "\n"..
-00004460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004470: 6d79 5f61 7373 6574 7331 203d 205b 5d0d  my_assets1 = [].
-00004480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004490: 206d 795f 6c69 6162 7331 203d 205b 5d0d   my_liabs1 = [].
-000044a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000044b0: 206d 795f 6173 7365 7473 3220 3d20 5b5d   my_assets2 = []
-000044c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000044d0: 2020 6d79 5f6c 6961 6273 3220 3d20 5b5d    my_liabs2 = []
-000044e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000044f0: 2020 2020 666f 7220 6920 696e 2061 7373      for i in ass
-00004500: 6574 7331 2e73 706c 6974 2822 5c6e 2229  ets1.split("\n")
-00004510: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004520: 2020 2020 2020 2069 6620 692e 7374 7269         if i.stri
-00004530: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
-00004540: 2b22 293a 0d0a 2020 2020 2020 2020 2020  +"):..          
-00004550: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-00004560: 5f69 7465 6d20 3d20 692e 7370 6c69 7428  _item = i.split(
-00004570: 222b 2229 5b31 5d20 2b20 7375 626a 6563  "+")[1] + subjec
-00004580: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-00004590: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
-000045a0: 3d20 222b 220d 0a20 2020 2020 2020 2020  = "+"..         
-000045b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000045c0: 692e 7374 7269 7028 292e 7374 6172 7473  i.strip().starts
-000045d0: 7769 7468 2822 2d22 293a 0d0a 2020 2020  with("-"):..    
-000045e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045f0: 2020 2020 6d79 5f69 7465 6d20 3d20 692e      my_item = i.
-00004600: 7370 6c69 7428 222d 2229 5b31 5d20 2b20  split("-")[1] + 
-00004610: 7375 626a 6563 740d 0a20 2020 2020 2020  subject..       
-00004620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004630: 2073 6967 6e20 3d20 222d 220d 0a20 2020   sign = "-"..   
-00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004650: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00004660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004670: 6272 6561 6b0d 0a20 2020 2020 2020 2020  break..         
-00004680: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-00004690: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
-000046a0: 7431 5d5b 2249 7465 6d22 5d2e 6170 7065  t1]["Item"].appe
-000046b0: 6e64 286d 795f 6974 656d 290d 0a20 2020  nd(my_item)..   
-000046c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046d0: 2063 6f6d 6269 6e65 645f 6261 6c61 6e63   combined_balanc
-000046e0: 655b 6167 656e 7431 5d5b 2241 7373 6574  e[agent1]["Asset
-000046f0: 7322 5d2e 6170 7065 6e64 2873 6967 6e2b  s"].append(sign+
-00004700: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
-00004710: 7479 225d 2b22 5c6e 2229 0d0a 2020 2020  ty"]+"\n")..    
-00004720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004730: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
-00004740: 5b61 6765 6e74 315d 5b22 4c69 6162 696c  [agent1]["Liabil
-00004750: 6974 6965 7322 5d2e 6170 7065 6e64 2822  ities"].append("
-00004760: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-00004770: 2020 2020 2020 666f 7220 6920 696e 2061        for i in a
-00004780: 7373 6574 7332 2e73 706c 6974 2822 5c6e  ssets2.split("\n
-00004790: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-000047a0: 2020 2020 2020 2020 2069 6620 692e 7374           if i.st
-000047b0: 7269 7028 292e 7374 6172 7473 7769 7468  rip().startswith
-000047c0: 2822 2b22 293a 0d0a 2020 2020 2020 2020  ("+"):..        
-000047d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047e0: 6d79 5f69 7465 6d20 3d20 692e 7370 6c69  my_item = i.spli
-000047f0: 7428 222b 2229 5b31 5d20 2b20 7375 626a  t("+")[1] + subj
-00004800: 6563 740d 0a20 2020 2020 2020 2020 2020  ect..           
-00004810: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-00004820: 6e20 3d20 222b 220d 0a20 2020 2020 2020  n = "+"..       
-00004830: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00004840: 6620 692e 7374 7269 7028 292e 7374 6172  f i.strip().star
-00004850: 7473 7769 7468 2822 2d22 293a 0d0a 2020  tswith("-"):..  
-00004860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004870: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
-00004880: 692e 7370 6c69 7428 222d 2229 5b31 5d20  i.split("-")[1] 
-00004890: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
-000048a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048b0: 2020 2073 6967 6e20 3d20 222d 220d 0a20     sign = "-".. 
-000048c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048d0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-000048e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048f0: 2020 6272 6561 6b0d 0a20 2020 2020 2020    break..       
-00004900: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00004910: 6269 6e65 645f 6261 6c61 6e63 655b 6167  bined_balance[ag
-00004920: 656e 7432 5d5b 2249 7465 6d22 5d2e 6170  ent2]["Item"].ap
-00004930: 7065 6e64 286d 795f 6974 656d 290d 0a20  pend(my_item).. 
-00004940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004950: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
-00004960: 6e63 655b 6167 656e 7432 5d5b 2241 7373  nce[agent2]["Ass
-00004970: 6574 7322 5d2e 6170 7065 6e64 2873 6967  ets"].append(sig
-00004980: 6e2b 6669 6c65 6461 7461 5b22 7175 616e  n+filedata["quan
-00004990: 7469 7479 225d 2b22 5c6e 2229 0d0a 2020  tity"]+"\n")..  
-000049a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049b0: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
-000049c0: 6365 5b61 6765 6e74 325d 5b22 4c69 6162  ce[agent2]["Liab
-000049d0: 696c 6974 6965 7322 5d2e 6170 7065 6e64  ilities"].append
-000049e0: 2822 2229 0d0a 0d0a 0d0a 2020 2020 2020  ("")......      
-000049f0: 2020 2020 2020 2020 2020 666f 7220 6a20            for j 
-00004a00: 696e 206c 6961 6273 312e 7370 6c69 7428  in liabs1.split(
-00004a10: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-00004a20: 2020 2020 2020 2020 2020 2020 6966 206a              if j
-00004a30: 2e73 7472 6970 2829 2e73 7461 7274 7377  .strip().startsw
-00004a40: 6974 6828 222b 2229 3a0d 0a20 2020 2020  ith("+"):..     
-00004a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a60: 2020 206d 795f 6974 656d 203d 206a 2e73     my_item = j.s
-00004a70: 706c 6974 2822 2b22 295b 315d 202b 2073  plit("+")[1] + s
-00004a80: 7562 6a65 6374 0d0a 2020 2020 2020 2020  ubject..        
-00004a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004aa0: 7369 676e 203d 2022 2b22 0d0a 0d0a 2020  sign = "+"....  
-00004ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ac0: 2020 656c 6966 206a 2e73 7472 6970 2829    elif j.strip()
-00004ad0: 2e73 7461 7274 7377 6974 6828 222d 2229  .startswith("-")
-00004ae0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004af0: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
-00004b00: 656d 203d 206a 2e73 706c 6974 2822 2d22  em = j.split("-"
-00004b10: 295b 315d 202b 2073 7562 6a65 6374 0d0a  )[1] + subject..
-00004b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b30: 2020 2020 2020 2020 7369 676e 203d 2022          sign = "
-00004b40: 2d22 0d0a 2020 2020 2020 2020 2020 2020  -"..            
-00004b50: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00004b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b70: 2020 2020 2020 2062 7265 616b 0d0a 2020         break..  
-00004b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b90: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
-00004ba0: 6365 5b61 6765 6e74 315d 5b22 4974 656d  ce[agent1]["Item
-00004bb0: 225d 2e61 7070 656e 6428 6d79 5f69 7465  "].append(my_ite
-00004bc0: 6d29 0d0a 2020 2020 2020 2020 2020 2020  m)..            
-00004bd0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00004be0: 5f62 616c 616e 6365 5b61 6765 6e74 315d  _balance[agent1]
-00004bf0: 5b22 4c69 6162 696c 6974 6965 7322 5d2e  ["Liabilities"].
-00004c00: 6170 7065 6e64 2873 6967 6e2b 6669 6c65  append(sign+file
-00004c10: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
-00004c20: 2b22 5c6e 2229 0d0a 2020 2020 2020 2020  +"\n")..        
-00004c30: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-00004c40: 696e 6564 5f62 616c 616e 6365 5b61 6765  ined_balance[age
-00004c50: 6e74 315d 5b22 4173 7365 7473 225d 2e61  nt1]["Assets"].a
-00004c60: 7070 656e 6428 2222 290d 0a0d 0a20 2020  ppend("")....   
-00004c70: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00004c80: 206a 2069 6e20 6c69 6162 7332 2e73 706c   j in liabs2.spl
-00004c90: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
-00004ca0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00004cb0: 6620 6a2e 7374 7269 7028 292e 7374 6172  f j.strip().star
-00004cc0: 7473 7769 7468 2822 2b22 293a 0d0a 2020  tswith("+"):..  
-00004cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ce0: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
-00004cf0: 6a2e 7370 6c69 7428 222b 2229 5b31 5d20  j.split("+")[1] 
-00004d00: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
-00004d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004d20: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
-00004d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004d40: 2020 2020 2065 6c69 6620 6a2e 7374 7269       elif j.stri
-00004d50: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
-00004d60: 2d22 293a 0d0a 2020 2020 2020 2020 2020  -"):..          
-00004d70: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-00004d80: 5f69 7465 6d20 3d20 6a2e 7370 6c69 7428  _item = j.split(
-00004d90: 222d 2229 5b31 5d20 2b20 7375 626a 6563  "-")[1] + subjec
-00004da0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-00004db0: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
-00004dc0: 3d20 222d 220d 0a20 2020 2020 2020 2020  = "-"..         
-00004dd0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00004de0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004df0: 2020 2020 2020 2020 2020 6272 6561 6b0d            break.
-00004e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004e10: 2020 2020 2063 6f6d 6269 6e65 645f 6261       combined_ba
-00004e20: 6c61 6e63 655b 6167 656e 7432 5d5b 2249  lance[agent2]["I
-00004e30: 7465 6d22 5d2e 6170 7065 6e64 286d 795f  tem"].append(my_
-00004e40: 6974 656d 290d 0a20 2020 2020 2020 2020  item)..         
-00004e50: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-00004e60: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
-00004e70: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
-00004e80: 225d 2e61 7070 656e 6428 7369 676e 2b66  "].append(sign+f
-00004e90: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
-00004ea0: 7922 5d2b 225c 6e22 290d 0a20 2020 2020  y"]+"\n")..     
-00004eb0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00004ec0: 6f6d 6269 6e65 645f 6261 6c61 6e63 655b  ombined_balance[
-00004ed0: 6167 656e 7432 5d5b 2241 7373 6574 7322  agent2]["Assets"
-00004ee0: 5d2e 6170 7065 6e64 2822 2229 0d0a 0d0a  ].append("")....
-00004ef0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00004f00: 7072 696e 7428 636f 6d62 696e 6564 5f62  print(combined_b
-00004f10: 616c 616e 6365 290d 0a0d 0a20 2020 2020  alance)....     
-00004f20: 2020 2020 2020 2064 6673 203d 205b 5d0d         dfs = [].
-00004f30: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00004f40: 206b 2c76 2069 6e20 636f 6d62 696e 6564   k,v in combined
-00004f50: 5f62 616c 616e 6365 2e69 7465 6d73 2829  _balance.items()
-00004f60: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004f70: 2020 2064 7620 3d20 7064 2e44 6174 6146     dv = pd.DataF
-00004f80: 7261 6d65 2876 290d 0a20 2020 2020 2020  rame(v)..       
-00004f90: 2020 2020 2020 2020 2064 7620 3d20 6476           dv = dv
-00004fa0: 2e72 656e 616d 6528 636f 6c75 6d6e 733d  .rename(columns=
-00004fb0: 7b22 4c69 6162 696c 6974 6965 7322 3a22  {"Liabilities":"
-00004fc0: 4c69 6162 696c 6974 6965 7320 2825 7329  Liabilities (%s)
-00004fd0: 2225 6b2c 2022 4173 7365 7473 223a 2022  "%k, "Assets": "
-00004fe0: 4173 7365 7473 2028 2573 2922 256b 7d29  Assets (%s)"%k})
-00004ff0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00005000: 2020 2020 6966 206e 6f74 2064 6574 6169      if not detai
-00005010: 6c65 643a 0d0a 2020 2020 2020 2020 2020  led:..          
-00005020: 2020 2020 2020 2020 2020 6167 6772 6567            aggreg
-00005030: 6174 696f 6e5f 6675 6e63 7469 6f6e 7320  ation_functions 
-00005040: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
-00005050: 2020 2020 2020 2020 2020 666f 7220 636f            for co
-00005060: 6c20 696e 2064 762e 636f 6c75 6d6e 733a  l in dv.columns:
-00005070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005080: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-00005090: 203d 3d20 2249 7465 6d22 3a0d 0a20 2020   == "Item":..   
+000007d0: 7061 7265 6e74 3d4e 6f6e 6529 3a0d 0a20  parent=None):.. 
+000007e0: 2020 2020 2020 2073 7570 6572 2853 6561         super(Sea
+000007f0: 7263 6844 6961 6c6f 672c 2073 656c 6629  rchDialog, self)
+00000800: 2e5f 5f69 6e69 745f 5f28 7061 7265 6e74  .__init__(parent
+00000810: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00000820: 662e 5f5f 636c 6173 735f 5f2e 696e 7374  f.__class__.inst
+00000830: 616e 6365 203d 2073 656c 660d 0a0d 0a20  ance = self.... 
+00000840: 2020 2020 2020 2070 6174 6820 3d20 6f73         path = os
+00000850: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
+00000860: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
+00000870: 6669 6c65 5f5f 2929 0d0a 2020 2020 2020  file__))..      
+00000880: 2020 7569 632e 6c6f 6164 5569 286f 732e    uic.loadUi(os.
+00000890: 7061 7468 2e6a 6f69 6e28 7061 7468 2c27  path.join(path,'
+000008a0: 7365 6172 6368 5f64 6961 6c6f 672e 7569  search_dialog.ui
+000008b0: 2729 2c20 7365 6c66 290d 0a0d 0a20 2020  '), self)....   
+000008c0: 2020 2020 2073 656c 662e 7075 7368 4275       self.pushBu
+000008d0: 7474 6f6e 2e70 7265 7373 6564 2e63 6f6e  tton.pressed.con
+000008e0: 6e65 6374 2873 656c 662e 7374 6172 745f  nect(self.start_
+000008f0: 7365 6172 6368 290d 0a0d 0a20 2020 2064  search)....    d
+00000900: 6566 2073 7461 7274 5f73 6561 7263 6828  ef start_search(
+00000910: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00000920: 7365 6172 6368 5f6e 616d 6520 3d20 7365  search_name = se
+00000930: 6c66 2e6c 696e 6545 6469 742e 7465 7874  lf.lineEdit.text
+00000940: 2829 0d0a 2020 2020 2020 2020 7072 696e  ()..        prin
+00000950: 7428 2273 6561 7263 6820 666f 7222 2c20  t("search for", 
+00000960: 7365 6172 6368 5f6e 616d 6529 0d0a 0d0a  search_name)....
+00000970: 2020 2020 2020 2020 2320 7365 6172 6368          # search
+00000980: 2061 6765 6e74 0d0a 0d0a 2020 2020 2020   agent....      
+00000990: 2020 666f 7220 626f 7820 696e 2073 656c    for box in sel
+000009a0: 662e 7061 7265 6e74 2829 2e64 7261 7763  f.parent().drawc
+000009b0: 616e 7661 732e 626f 7865 733a 0d0a 2020  anvas.boxes:..  
+000009c0: 2020 2020 2020 2020 2020 6966 2062 6f78            if box
+000009d0: 2e6e 616d 6520 3d3d 2073 6561 7263 685f  .name == search_
+000009e0: 6e61 6d65 3a0d 0a20 2020 2020 2020 2020  name:..         
+000009f0: 2020 2020 2020 2073 656c 662e 7061 7265         self.pare
+00000a00: 6e74 2829 2e64 7261 7763 616e 7661 732e  nt().drawcanvas.
+00000a10: 6869 6768 6c69 6768 7465 6420 3d20 626f  highlighted = bo
+00000a20: 780d 0a20 2020 2020 2020 2020 2020 2020  x..             
+00000a30: 2020 2073 656c 662e 7061 7265 6e74 2829     self.parent()
+00000a40: 2e75 7064 6174 6528 290d 0a20 2020 2020  .update()..     
+00000a50: 2020 2020 2020 2020 2020 2062 7265 616b             break
+00000a60: 0d0a 0d0a 2020 2020 6465 6620 436c 6f73  ....    def Clos
+00000a70: 6545 7665 6e74 2873 656c 662c 2065 7665  eEvent(self, eve
+00000a80: 6e74 293a 0d0a 2020 2020 2020 2020 7365  nt):..        se
+00000a90: 6c66 2e5f 5f63 6c61 7373 5f5f 2e69 6e73  lf.__class__.ins
+00000aa0: 7461 6e63 6520 3d20 4e6f 6e65 0d0a 0d0a  tance = None....
+00000ab0: 0d0a 636c 6173 7320 4d61 7472 6978 5669  ..class MatrixVi
+00000ac0: 6577 6572 2851 7457 6964 6765 7473 2e51  ewer(QtWidgets.Q
+00000ad0: 4469 616c 6f67 293a 0d0a 2020 2020 696e  Dialog):..    in
+00000ae0: 7374 616e 6365 203d 204e 6f6e 650d 0a0d  stance = None...
+00000af0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00000b00: 5f28 7365 6c66 2c6d 6f64 656c 2c70 6172  _(self,model,par
+00000b10: 656e 743d 4e6f 6e65 293a 0d0a 2020 2020  ent=None):..    
+00000b20: 2020 2020 7375 7065 7228 4d61 7472 6978      super(Matrix
+00000b30: 5669 6577 6572 2c20 7365 6c66 292e 5f5f  Viewer, self).__
+00000b40: 696e 6974 5f5f 2870 6172 656e 7429 2020  init__(parent)  
+00000b50: 2320 4361 6c6c 2074 6865 2069 6e68 6572  # Call the inher
+00000b60: 6974 6564 2063 6c61 7373 6573 205f 5f69  ited classes __i
+00000b70: 6e69 745f 5f20 6d65 7468 6f64 0d0a 0d0a  nit__ method....
+00000b80: 2020 2020 2020 2020 7365 6c66 2e5f 5f63          self.__c
+00000b90: 6c61 7373 5f5f 2e69 6e73 7461 6e63 6520  lass__.instance 
+00000ba0: 3d20 7365 6c66 0d0a 0d0a 2020 2020 2020  = self....      
+00000bb0: 2020 7061 7468 203d 206f 732e 7061 7468    path = os.path
+00000bc0: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
+00000bd0: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
+00000be0: 5f29 290d 0a20 2020 2020 2020 2075 6963  _))..        uic
+00000bf0: 2e6c 6f61 6455 6928 6f73 2e70 6174 682e  .loadUi(os.path.
+00000c00: 6a6f 696e 2870 6174 682c 276d 6174 7269  join(path,'matri
+00000c10: 785f 7669 6577 6572 2e75 6927 292c 2073  x_viewer.ui'), s
+00000c20: 656c 6629 0d0a 0d0a 2020 2020 2020 2020  elf)....        
+00000c30: 7365 6c66 2e73 6574 5f6d 6f64 656c 286d  self.set_model(m
+00000c40: 6f64 656c 290d 0a20 2020 2020 2020 2023  odel)..        #
+00000c50: 2073 656c 662e 7365 7453 7479 6c65 5368   self.setStyleSh
+00000c60: 6565 7428 7061 7265 6e74 2e74 6865 6d65  eet(parent.theme
+00000c70: 5f6d 616e 6167 6572 2e67 6574 5f73 7479  _manager.get_sty
+00000c80: 6c65 7368 6565 7428 226d 6169 6e22 2929  lesheet("main"))
+00000c90: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+00000ca0: 2e73 6574 5374 796c 6553 6865 6574 2870  .setStyleSheet(p
+00000cb0: 6172 656e 742e 7468 656d 655f 6d61 6e61  arent.theme_mana
+00000cc0: 6765 722e 6765 745f 6261 636b 6772 6f75  ger.get_backgrou
+00000cd0: 6e64 5f73 7479 6c65 2829 290d 0a0d 0a0d  nd_style()).....
+00000ce0: 0a20 2020 2064 6566 2073 6574 5f6d 6f64  .    def set_mod
+00000cf0: 656c 2873 656c 662c 6d6f 6465 6c29 3a0d  el(self,model):.
+00000d00: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
+00000d10: 5345 5420 4d4f 4445 4c22 2c20 6d6f 6465  SET MODEL", mode
+00000d20: 6c29 0d0a 2020 2020 2020 2020 7365 6c66  l)..        self
+00000d30: 2e70 616e 6461 735f 6d6f 6465 6c20 3d20  .pandas_model = 
+00000d40: 6d6f 6465 6c0d 0a20 2020 2020 2020 2073  model..        s
+00000d50: 656c 662e 7461 626c 6556 6965 772e 7365  elf.tableView.se
+00000d60: 744d 6f64 656c 286d 6f64 656c 290d 0a0d  tModel(model)...
+00000d70: 0a20 2020 2064 6566 2067 6574 5f64 6174  .    def get_dat
+00000d80: 6128 7365 6c66 293a 0d0a 2020 2020 2020  a(self):..      
+00000d90: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00000da0: 6e64 6173 5f6d 6f64 656c 2e67 6574 5f72  ndas_model.get_r
+00000db0: 6177 6461 7461 2829 0d0a 0d0a 0d0a 636c  awdata()......cl
+00000dc0: 6173 7320 4361 7368 466c 6f77 5669 6577  ass CashFlowView
+00000dd0: 6572 2851 7457 6964 6765 7473 2e51 4469  er(QtWidgets.QDi
+00000de0: 616c 6f67 293a 0d0a 2020 2020 696e 7374  alog):..    inst
+00000df0: 616e 6365 7320 3d20 7b7d 0d0a 0d0a 2020  ances = {}....  
+00000e00: 2020 6465 6620 636c 6f73 6545 7665 6e74    def closeEvent
+00000e10: 2873 656c 662c 2065 7665 6e74 293a 0d0a  (self, event):..
+00000e20: 2020 2020 2020 2020 6465 6c20 7365 6c66          del self
+00000e30: 2e5f 5f63 6c61 7373 5f5f 2e69 6e73 7461  .__class__.insta
+00000e40: 6e63 6573 5b73 656c 662e 6e61 6d65 5d0d  nces[self.name].
+00000e50: 0a20 2020 2020 2020 2065 7665 6e74 2e61  .        event.a
+00000e60: 6363 6570 7428 2920 2320 6c65 7420 7468  ccept() # let th
+00000e70: 6520 7769 6e64 6f77 2063 6c6f 7365 0d0a  e window close..
+00000e80: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00000e90: 5f5f 2873 656c 662c 7061 7265 6e74 3d4e  __(self,parent=N
+00000ea0: 6f6e 652c 6e61 6d65 3d22 556e 6b6e 6f77  one,name="Unknow
+00000eb0: 6e22 293a 0d0a 0d0a 2020 2020 2020 2020  n"):....        
+00000ec0: 7365 6c66 2e6e 616d 6520 3d20 6e61 6d65  self.name = name
+00000ed0: 0d0a 0d0a 2020 2020 2020 2020 7375 7065  ....        supe
+00000ee0: 7228 4361 7368 466c 6f77 5669 6577 6572  r(CashFlowViewer
+00000ef0: 2c20 7365 6c66 292e 5f5f 696e 6974 5f5f  , self).__init__
+00000f00: 2870 6172 656e 7429 2020 2320 4361 6c6c  (parent)  # Call
+00000f10: 2074 6865 2069 6e68 6572 6974 6564 2063   the inherited c
+00000f20: 6c61 7373 6573 205f 5f69 6e69 745f 5f20  lasses __init__ 
+00000f30: 6d65 7468 6f64 0d0a 2020 2020 2020 2020  method..        
+00000f40: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
+00000f50: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
+00000f60: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
+00000f70: 290d 0a20 2020 2020 2020 2075 6963 2e6c  )..        uic.l
+00000f80: 6f61 6455 6928 6f73 2e70 6174 682e 6a6f  oadUi(os.path.jo
+00000f90: 696e 2870 6174 682c 2769 6e63 6f6d 655f  in(path,'income_
+00000fa0: 7669 6577 6572 2e75 6927 292c 2073 656c  viewer.ui'), sel
+00000fb0: 6629 0d0a 2020 2020 2020 2020 7365 6c66  f)..        self
+00000fc0: 2e73 6574 5769 6e64 6f77 5469 746c 6528  .setWindowTitle(
+00000fd0: 2243 6173 6820 466c 6f77 2053 7461 7465  "Cash Flow State
+00000fe0: 6d65 6e74 206f 6620 2573 2220 2520 6e61  ment of %s" % na
+00000ff0: 6d65 290d 0a0d 0a20 2020 2020 2020 2073  me)....        s
+00001000: 656c 662e 5f5f 636c 6173 735f 5f2e 696e  elf.__class__.in
+00001010: 7374 616e 6365 735b 6e61 6d65 5d20 3d20  stances[name] = 
+00001020: 7365 6c66 0d0a 0d0a 0d0a 2020 2020 6465  self......    de
+00001030: 6620 7365 745f 6d6f 6465 6c28 7365 6c66  f set_model(self
+00001040: 2c6d 6f64 656c 293a 0d0a 2020 2020 2020  ,model):..      
+00001050: 2020 7072 696e 7428 2253 4554 204d 4f44    print("SET MOD
+00001060: 454c 222c 206d 6f64 656c 290d 0a20 2020  EL", model)..   
+00001070: 2020 2020 2073 656c 662e 7061 6e64 6173       self.pandas
+00001080: 5f6d 6f64 656c 203d 206d 6f64 656c 0d0a  _model = model..
+00001090: 2020 2020 2020 2020 7365 6c66 2e74 6162          self.tab
+000010a0: 6c65 5669 6577 2e73 6574 4d6f 6465 6c28  leView.setModel(
+000010b0: 6d6f 6465 6c29 0d0a 0d0a 2020 2020 6465  model)....    de
+000010c0: 6620 6765 745f 6461 7461 2873 656c 6629  f get_data(self)
+000010d0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+000010e0: 6e20 7365 6c66 2e70 616e 6461 735f 6d6f  n self.pandas_mo
+000010f0: 6465 6c2e 6765 745f 7261 7764 6174 6128  del.get_rawdata(
+00001100: 290d 0a0d 0a0d 0a63 6c61 7373 2049 6e63  )......class Inc
+00001110: 6f6d 6556 6965 7765 7228 5174 5769 6467  omeViewer(QtWidg
+00001120: 6574 732e 5144 6961 6c6f 6729 3a0d 0a20  ets.QDialog):.. 
+00001130: 2020 2069 6e73 7461 6e63 6573 203d 207b     instances = {
+00001140: 7d0d 0a0d 0a20 2020 2064 6566 2063 6c6f  }....    def clo
+00001150: 7365 4576 656e 7428 7365 6c66 2c20 6576  seEvent(self, ev
+00001160: 656e 7429 3a0d 0a20 2020 2020 2020 2064  ent):..        d
+00001170: 656c 2073 656c 662e 5f5f 636c 6173 735f  el self.__class_
+00001180: 5f2e 696e 7374 616e 6365 735b 7365 6c66  _.instances[self
+00001190: 2e6e 616d 655d 0d0a 2020 2020 2020 2020  .name]..        
+000011a0: 6576 656e 742e 6163 6365 7074 2829 2023  event.accept() #
+000011b0: 206c 6574 2074 6865 2077 696e 646f 7720   let the window 
+000011c0: 636c 6f73 650d 0a0d 0a20 2020 2064 6566  close....    def
+000011d0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c70   __init__(self,p
+000011e0: 6172 656e 743d 4e6f 6e65 2c6e 616d 653d  arent=None,name=
+000011f0: 2255 6e6b 6e6f 776e 2229 3a0d 0a0d 0a20  "Unknown"):.... 
+00001200: 2020 2020 2020 2073 7570 6572 2849 6e63         super(Inc
+00001210: 6f6d 6556 6965 7765 722c 2073 656c 6629  omeViewer, self)
+00001220: 2e5f 5f69 6e69 745f 5f28 7061 7265 6e74  .__init__(parent
+00001230: 2920 2023 2043 616c 6c20 7468 6520 696e  )  # Call the in
+00001240: 6865 7269 7465 6420 636c 6173 7365 7320  herited classes 
+00001250: 5f5f 696e 6974 5f5f 206d 6574 686f 640d  __init__ method.
+00001260: 0a20 2020 2020 2020 2070 6174 6820 3d20  .        path = 
+00001270: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
+00001280: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
+00001290: 5f5f 6669 6c65 5f5f 2929 0d0a 2020 2020  __file__))..    
+000012a0: 2020 2020 7569 632e 6c6f 6164 5569 286f      uic.loadUi(o
+000012b0: 732e 7061 7468 2e6a 6f69 6e28 7061 7468  s.path.join(path
+000012c0: 2c27 696e 636f 6d65 5f76 6965 7765 722e  ,'income_viewer.
+000012d0: 7569 2729 2c20 7365 6c66 290d 0a20 2020  ui'), self)..   
+000012e0: 2020 2020 2073 656c 662e 7365 7457 696e       self.setWin
+000012f0: 646f 7754 6974 6c65 2822 496e 636f 6d65  dowTitle("Income
+00001300: 2053 6865 6574 206f 6620 2573 2220 2520   Sheet of %s" % 
+00001310: 6e61 6d65 290d 0a0d 0a20 2020 2020 2020  name)....       
+00001320: 2073 656c 662e 6e61 6d65 203d 206e 616d   self.name = nam
+00001330: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00001340: 5f5f 636c 6173 735f 5f2e 696e 7374 616e  __class__.instan
+00001350: 6365 735b 6e61 6d65 5d20 3d20 7365 6c66  ces[name] = self
+00001360: 0d0a 0d0a 2020 2020 6465 6620 7365 745f  ....    def set_
+00001370: 6d6f 6465 6c28 7365 6c66 2c6d 6f64 656c  model(self,model
+00001380: 293a 0d0a 2020 2020 2020 2020 7072 696e  ):..        prin
+00001390: 7428 2253 4554 204d 4f44 454c 222c 206d  t("SET MODEL", m
+000013a0: 6f64 656c 290d 0a20 2020 2020 2020 2073  odel)..        s
+000013b0: 656c 662e 7061 6e64 6173 5f6d 6f64 656c  elf.pandas_model
+000013c0: 203d 206d 6f64 656c 0d0a 2020 2020 2020   = model..      
+000013d0: 2020 7365 6c66 2e74 6162 6c65 5669 6577    self.tableView
+000013e0: 2e73 6574 4d6f 6465 6c28 6d6f 6465 6c29  .setModel(model)
+000013f0: 0d0a 0d0a 2020 2020 6465 6620 6765 745f  ....    def get_
+00001400: 6461 7461 2873 656c 6629 3a0d 0a20 2020  data(self):..   
+00001410: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00001420: 2e70 616e 6461 735f 6d6f 6465 6c2e 6765  .pandas_model.ge
+00001430: 745f 7261 7764 6174 6128 290d 0a0d 0a0d  t_rawdata().....
+00001440: 0a0d 0a23 2053 7465 7020 313a 2043 7265  ...# Step 1: Cre
+00001450: 6174 6520 6120 776f 726b 6572 0d0a 636c  ate a worker..cl
+00001460: 6173 7320 5374 6174 7573 4c45 4428 514f  ass StatusLED(QO
+00001470: 626a 6563 7429 3a0d 0a20 2020 2066 696e  bject):..    fin
+00001480: 6973 6865 6420 3d20 7079 7174 5369 676e  ished = pyqtSign
+00001490: 616c 2829 0d0a 2020 2020 7072 6f67 7265  al()..    progre
+000014a0: 7373 203d 2070 7971 7453 6967 6e61 6c28  ss = pyqtSignal(
+000014b0: 696e 7429 0d0a 0d0a 2020 2020 6465 6620  int)....    def 
+000014c0: 5f5f 696e 6974 5f5f 2873 656c 662c 7262  __init__(self,rb
+000014d0: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
+000014e0: 7228 292e 5f5f 696e 6974 5f5f 2829 0d0a  r().__init__()..
+000014f0: 2020 2020 2020 2020 7365 6c66 2e72 6220          self.rb 
+00001500: 3d20 7262 0d0a 0d0a 2020 2020 2020 2020  = rb....        
+00001510: 2320 7365 6c66 2e72 6220 3d20 7262 0d0a  # self.rb = rb..
+00001520: 2020 2020 2020 2020 7365 6c66 2e69 203d          self.i =
+00001530: 2030 0d0a 2020 2020 2020 2020 7365 6c66   0..        self
+00001540: 2e6a 203d 2030 0d0a 2020 2020 2020 2020  .j = 0..        
+00001550: 7365 6c66 2e6f 6e20 3d20 4661 6c73 650d  self.on = False.
+00001560: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
+00001570: 2822 574f 524b 4552 2043 5245 4154 4544  ("WORKER CREATED
+00001580: 2229 0d0a 0d0a 2020 2020 6465 6620 7275  ")....    def ru
+00001590: 6e28 7365 6c66 293a 0d0a 2020 2020 2020  n(self):..      
+000015a0: 2020 2222 224c 6f6e 672d 7275 6e6e 696e    """Long-runnin
+000015b0: 6720 7461 736b 2e22 2222 0d0a 2020 2020  g task."""..    
+000015c0: 2020 2020 7768 696c 6528 5472 7565 293a      while(True):
+000015d0: 0d0a 2020 2020 2020 2020 2020 2020 7469  ..            ti
+000015e0: 6d65 2e73 6c65 6570 282e 3129 0d0a 0d0a  me.sleep(.1)....
+000015f0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00001600: 656c 662e 6f6e 3a0d 0a20 2020 2020 2020  elf.on:..       
+00001610: 2020 2020 2020 2020 2073 656c 662e 6920           self.i 
+00001620: 2b3d 2031 0d0a 0d0a 2020 2020 2020 2020  += 1....        
+00001630: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
+00001640: 7365 6c66 2e72 622e 6973 4368 6563 6b65  self.rb.isChecke
+00001650: 6428 290d 0a20 2020 2020 2020 2020 2020  d()..           
+00001660: 2020 2020 2023 2073 656c 662e 7262 2e73       # self.rb.s
+00001670: 6574 4368 6563 6b65 6428 6e6f 7420 7374  etChecked(not st
+00001680: 6174 6529 0d0a 0d0a 2020 2020 2020 2020  ate)....        
+00001690: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000016a0: 6920 3d3d 2035 3a0d 0a20 2020 2020 2020  i == 5:..       
+000016b0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000016c0: 662e 6920 3d20 300d 0a20 2020 2020 2020  f.i = 0..       
+000016d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000016e0: 662e 7377 6974 6368 5f73 7461 7465 2829  f.switch_state()
+000016f0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00001700: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00001710: 2020 2020 2070 6173 730d 0a20 2020 2020       pass..     
+00001720: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
+00001730: 662e 7262 2e73 6574 4368 6563 6b65 6428  f.rb.setChecked(
+00001740: 4661 6c73 6529 0d0a 0d0a 2020 2020 2020  False)....      
+00001750: 2020 2020 2020 2370 7269 6e74 2822 7374        #print("st
+00001760: 6174 6522 2c73 656c 662e 6929 0d0a 0d0a  ate",self.i)....
+00001770: 2020 2020 6465 6620 7377 6974 6368 5f73      def switch_s
+00001780: 7461 7465 2873 656c 6629 3a0d 0a20 2020  tate(self):..   
+00001790: 2020 2020 2073 656c 662e 6f6e 203d 206e       self.on = n
+000017a0: 6f74 2073 656c 662e 6f6e 0d0a 2020 2020  ot self.on..    
+000017b0: 2020 2020 2320 7072 696e 7428 2273 7769      # print("swi
+000017c0: 7463 6822 2c20 7365 6c66 2e6f 6e29 0d0a  tch", self.on)..
+000017d0: 0d0a 2020 2020 2020 2020 2369 6620 6e6f  ..        #if no
+000017e0: 7420 7365 6c66 2e6f 6e3a 0d0a 2020 2020  t self.on:..    
+000017f0: 2020 2020 2320 2020 2073 656c 662e 7262      #    self.rb
+00001800: 2e73 6574 4368 6563 6b65 6428 4661 6c73  .setChecked(Fals
+00001810: 6529 0d0a 0d0a 636c 6173 7320 5472 616e  e)....class Tran
+00001820: 7361 6374 696f 6e44 6573 6967 6e65 7228  sactionDesigner(
+00001830: 5174 5769 6467 6574 732e 514d 6169 6e57  QtWidgets.QMainW
+00001840: 696e 646f 7729 3a0d 0a20 2020 2064 6566  indow):..    def
+00001850: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+00001860: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00001870: 5472 616e 7361 6374 696f 6e44 6573 6967  TransactionDesig
+00001880: 6e65 722c 2073 656c 6629 2e5f 5f69 6e69  ner, self).__ini
+00001890: 745f 5f28 2920 2320 4361 6c6c 2074 6865  t__() # Call the
+000018a0: 2069 6e68 6572 6974 6564 2063 6c61 7373   inherited class
+000018b0: 6573 205f 5f69 6e69 745f 5f20 6d65 7468  es __init__ meth
+000018c0: 6f64 0d0a 2020 2020 2020 2020 7072 696e  od..        prin
+000018d0: 7428 226c 6f61 642e 2e2e 2229 0d0a 2020  t("load...")..  
+000018e0: 2020 2020 2020 7061 7468 203d 206f 732e        path = os.
+000018f0: 7061 7468 2e64 6972 6e61 6d65 286f 732e  path.dirname(os.
+00001900: 7061 7468 2e61 6273 7061 7468 285f 5f66  path.abspath(__f
+00001910: 696c 655f 5f29 290d 0a20 2020 2020 2020  ile__))..       
+00001920: 206c 6f61 6470 6174 6820 3d20 6f73 2e70   loadpath = os.p
+00001930: 6174 682e 6a6f 696e 2870 6174 682c 2274  ath.join(path,"t
+00001940: 7261 6e73 6163 7469 6f6e 5f64 6573 6967  ransaction_desig
+00001950: 6e65 725f 6d61 696e 7769 6e64 6f77 2e75  ner_mainwindow.u
+00001960: 6922 290d 0a20 2020 2020 2020 2063 6f6e  i")..        con
+00001970: 7465 6e74 203d 205b 5d0d 0a20 2020 2020  tent = []..     
+00001980: 2020 2073 7563 6365 7373 203d 2046 616c     success = Fal
+00001990: 7365 0d0a 0d0a 2020 2020 2020 2020 7365  se....        se
+000019a0: 6c66 2e74 6573 745f 6d6f 6465 203d 2046  lf.test_mode = F
+000019b0: 616c 7365 2023 2075 7365 6420 666f 7220  alse # used for 
+000019c0: 7465 7374 696e 670d 0a0d 0a20 2020 2020  testing....     
+000019d0: 2020 2023 2072 656d 6f76 6520 666f 6e74     # remove font
+000019e0: 2d73 697a 6520 746f 2066 6978 2062 7567  -size to fix bug
+000019f0: 2069 6e20 7174 2064 6573 6967 6e65 720d   in qt designer.
+00001a00: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+00001a10: 656e 286c 6f61 6470 6174 682c 2272 2229  en(loadpath,"r")
+00001a20: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
+00001a30: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
+00001a40: 696e 2066 696c 652e 7265 6164 6c69 6e65  in file.readline
+00001a50: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+00001a60: 2020 2020 2020 6966 2022 3c70 6f69 6e74        if "<point
+00001a70: 7369 7a65 3e2d 313c 2f70 6f69 6e74 7369  size>-1</pointsi
+00001a80: 7a65 3e22 206e 6f74 2069 6e20 6c69 6e65  ze>" not in line
+00001a90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00001aa0: 2020 2020 2020 2063 6f6e 7465 6e74 2e61         content.a
+00001ab0: 7070 656e 6428 6c69 6e65 290d 0a0d 0a20  ppend(line).... 
+00001ac0: 2020 2020 2020 2020 2020 2073 7563 6365             succe
+00001ad0: 7373 203d 2054 7275 650d 0a0d 0a20 2020  ss = True....   
+00001ae0: 2020 2020 2069 6620 7375 6363 6573 733a       if success:
+00001af0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
+00001b00: 7468 206f 7065 6e28 6c6f 6164 7061 7468  th open(loadpath
+00001b10: 2c22 7722 2920 6173 2066 696c 653a 0d0a  ,"w") as file:..
+00001b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b30: 6669 6c65 2e77 7269 7465 2822 222e 6a6f  file.write("".jo
+00001b40: 696e 2863 6f6e 7465 6e74 2929 0d0a 0d0a  in(content))....
+00001b50: 0d0a 0d0a 2020 2020 2020 2020 2320 7569  ....        # ui
+00001b60: 632e 6c6f 6164 5569 2827 7472 616e 7361  c.loadUi('transa
+00001b70: 6374 696f 6e5f 6465 7369 676e 6572 2e75  ction_designer.u
+00001b80: 6927 2c20 7365 6c66 2920 2320 4c6f 6164  i', self) # Load
+00001b90: 2074 6865 202e 7569 2066 696c 650d 0a20   the .ui file.. 
+00001ba0: 2020 2020 2020 2075 6963 2e6c 6f61 6455         uic.loadU
+00001bb0: 6928 6c6f 6164 7061 7468 2c20 7365 6c66  i(loadpath, self
+00001bc0: 2920 2320 4c6f 6164 2074 6865 202e 7569  ) # Load the .ui
+00001bd0: 2066 696c 650d 0a20 2020 2020 2020 2070   file..        p
+00001be0: 7269 6e74 2822 646f 6e65 2e22 290d 0a0d  rint("done.")...
+00001bf0: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00001c00: 7457 696e 646f 7746 6c61 6773 2873 656c  tWindowFlags(sel
+00001c10: 662e 7769 6e64 6f77 466c 6167 7328 2920  f.windowFlags() 
+00001c20: 7c20 5174 2e57 696e 646f 774d 696e 696d  | Qt.WindowMinim
+00001c30: 697a 6542 7574 746f 6e48 696e 7429 0d0a  izeButtonHint)..
+00001c40: 2020 2020 2020 2020 2320 7365 6c66 2e73          # self.s
+00001c50: 6574 4669 7865 6453 697a 6528 7365 6c66  etFixedSize(self
+00001c60: 2e73 697a 6528 2929 3b0d 0a20 2020 2020  .size());..     
+00001c70: 2020 2073 656c 662e 666c 6970 7065 6420     self.flipped 
+00001c80: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
+00001c90: 2020 206d 795f 7769 6467 6574 203d 204d     my_widget = M
+00001ca0: 7944 7261 7757 6964 6765 7428 7365 6c66  yDrawWidget(self
+00001cb0: 2e66 7261 6d65 2c73 656c 6629 0d0a 2020  .frame,self)..  
+00001cc0: 2020 2020 2020 2320 6d79 5f77 6964 6765        # my_widge
+00001cd0: 742e 6d6f 7665 282d 352c 2d35 3529 2023  t.move(-5,-55) #
+00001ce0: 2838 302c 3136 3029 0d0a 0d0a 2020 2020  (80,160)....    
+00001cf0: 2020 2020 2320 7365 6c66 2e6c 6162 656c      # self.label
+00001d00: 5f31 372e 7365 7456 6973 6962 6c65 2846  _17.setVisible(F
+00001d10: 616c 7365 2920 2320 6c6f 676f 0d0a 0d0a  alse) # logo....
+00001d20: 2020 2020 2020 2020 7365 6c66 2e63 6f64          self.cod
+00001d30: 655f 6461 7461 203d 207b 7d0d 0a0d 0a20  e_data = {}.... 
+00001d40: 2020 2020 2020 2023 206c 6f67 6765 7220         # logger 
+00001d50: 666f 7220 6368 616e 6765 7320 696e 2074  for changes in t
+00001d60: 7261 6e73 6163 7469 6f6e 730d 0a20 2020  ransactions..   
+00001d70: 2020 2020 2073 656c 662e 6d61 6465 5f63       self.made_c
+00001d80: 6861 6e67 6573 203d 2046 616c 7365 0d0a  hanges = False..
+00001d90: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00001da0: 7272 616e 6765 4275 7474 6f6e 5f37 2e70  rrangeButton_7.p
+00001db0: 7265 7373 6564 2e63 6f6e 6e65 6374 286c  ressed.connect(l
+00001dc0: 616d 6264 613a 2073 656c 662e 6e6f 7469  ambda: self.noti
+00001dd0: 6679 5f74 6f6f 6c74 6970 2873 656c 662e  fy_tooltip(self.
+00001de0: 6172 7261 6e67 6542 7574 746f 6e5f 3729  arrangeButton_7)
+00001df0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00001e00: 6172 7261 6e67 6542 7574 746f 6e5f 382e  arrangeButton_8.
+00001e10: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00001e20: 6c61 6d62 6461 3a20 7365 6c66 2e6e 6f74  lambda: self.not
+00001e30: 6966 795f 746f 6f6c 7469 7028 7365 6c66  ify_tooltip(self
+00001e40: 2e61 7272 616e 6765 4275 7474 6f6e 5f38  .arrangeButton_8
+00001e50: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
+00001e60: 2e61 7272 616e 6765 4275 7474 6f6e 5f39  .arrangeButton_9
+00001e70: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
+00001e80: 286c 616d 6264 613a 2073 656c 662e 6e6f  (lambda: self.no
+00001e90: 7469 6679 5f74 6f6f 6c74 6970 2873 656c  tify_tooltip(sel
+00001ea0: 662e 6172 7261 6e67 6542 7574 746f 6e5f  f.arrangeButton_
+00001eb0: 3929 290d 0a20 2020 2020 2020 2073 656c  9))..        sel
+00001ec0: 662e 6172 7261 6e67 6542 7574 746f 6e5f  f.arrangeButton_
+00001ed0: 332e 7072 6573 7365 642e 636f 6e6e 6563  3.pressed.connec
+00001ee0: 7428 6c61 6d62 6461 3a20 7365 6c66 2e6e  t(lambda: self.n
+00001ef0: 6f74 6966 795f 746f 6f6c 7469 7028 7365  otify_tooltip(se
+00001f00: 6c66 2e61 7272 616e 6765 4275 7474 6f6e  lf.arrangeButton
+00001f10: 5f33 2929 0d0a 2020 2020 2020 2020 7365  _3))..        se
+00001f20: 6c66 2e61 7272 616e 6765 4275 7474 6f6e  lf.arrangeButton
+00001f30: 5f34 2e70 7265 7373 6564 2e63 6f6e 6e65  _4.pressed.conne
+00001f40: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
+00001f50: 6e6f 7469 6679 5f74 6f6f 6c74 6970 2873  notify_tooltip(s
+00001f60: 656c 662e 6172 7261 6e67 6542 7574 746f  elf.arrangeButto
+00001f70: 6e5f 3429 290d 0a20 2020 2020 2020 2073  n_4))..        s
+00001f80: 656c 662e 6172 7261 6e67 6542 7574 746f  elf.arrangeButto
+00001f90: 6e5f 352e 7072 6573 7365 642e 636f 6e6e  n_5.pressed.conn
+00001fa0: 6563 7428 6c61 6d62 6461 3a20 7365 6c66  ect(lambda: self
+00001fb0: 2e6e 6f74 6966 795f 746f 6f6c 7469 7028  .notify_tooltip(
+00001fc0: 7365 6c66 2e61 7272 616e 6765 4275 7474  self.arrangeButt
+00001fd0: 6f6e 5f35 2929 0d0a 2020 2020 2020 2020  on_5))..        
+00001fe0: 7365 6c66 2e61 7272 616e 6765 4275 7474  self.arrangeButt
+00001ff0: 6f6e 5f36 2e70 7265 7373 6564 2e63 6f6e  on_6.pressed.con
+00002000: 6e65 6374 286c 616d 6264 613a 2073 656c  nect(lambda: sel
+00002010: 662e 6e6f 7469 6679 5f74 6f6f 6c74 6970  f.notify_tooltip
+00002020: 2873 656c 662e 6172 7261 6e67 6542 7574  (self.arrangeBut
+00002030: 746f 6e5f 3629 290d 0a20 2020 2020 2020  ton_6))..       
+00002040: 2023 2073 656c 662e 6172 7261 6e67 6542   # self.arrangeB
+00002050: 7574 746f 6e5f 322e 7072 6573 7365 642e  utton_2.pressed.
+00002060: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00002070: 7365 6c66 2e6e 6f74 6966 795f 746f 6f6c  self.notify_tool
+00002080: 7469 7028 7365 6c66 2e61 7272 616e 6765  tip(self.arrange
+00002090: 4275 7474 6f6e 5f32 2929 0d0a 0d0a 2020  Button_2))....  
+000020a0: 2020 2020 2020 7365 6c66 2e61 6374 696f        self.actio
+000020b0: 6e47 656e 6572 6174 655f 4261 6c61 6e63  nGenerate_Balanc
+000020c0: 6553 6865 6574 5f4d 6174 7269 782e 7472  eSheet_Matrix.tr
+000020d0: 6967 6765 7265 642e 636f 6e6e 6563 7428  iggered.connect(
+000020e0: 6c61 6d62 6461 3a20 7365 6c66 2e67 656e  lambda: self.gen
+000020f0: 5f62 616c 616e 6365 5f6d 6174 7269 7828  _balance_matrix(
+00002100: 6465 7461 696c 6564 3d46 616c 7365 2929  detailed=False))
+00002110: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00002120: 6374 696f 6e47 656e 6572 6174 655f 4261  ctionGenerate_Ba
+00002130: 6c61 6e63 655f 4d61 7472 6978 5f44 6574  lance_Matrix_Det
+00002140: 6169 6c65 642e 7472 6967 6765 7265 642e  ailed.triggered.
+00002150: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00002160: 7365 6c66 2e67 656e 5f62 616c 616e 6365  self.gen_balance
+00002170: 5f6d 6174 7269 7828 6465 7461 696c 6564  _matrix(detailed
+00002180: 3d54 7275 6529 290d 0a0d 0a20 2020 2020  =True))....     
+00002190: 2020 2073 656c 662e 6167 656e 7431 4564     self.agent1Ed
+000021a0: 6974 2e74 6578 7445 6469 7465 642e 636f  it.textEdited.co
+000021b0: 6e6e 6563 7428 7365 6c66 2e63 6861 6e67  nnect(self.chang
+000021c0: 655f 616c 6572 7429 0d0a 2020 2020 2020  e_alert)..      
+000021d0: 2020 7365 6c66 2e61 6765 6e74 3245 6469    self.agent2Edi
+000021e0: 742e 7465 7874 4564 6974 6564 2e63 6f6e  t.textEdited.con
+000021f0: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
+00002200: 5f61 6c65 7274 290d 0a20 2020 2020 2020  _alert)..       
+00002210: 2073 656c 662e 4173 7365 744c 6973 744c   self.AssetListL
+00002220: 6566 742e 7465 7874 4368 616e 6765 642e  eft.textChanged.
+00002230: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
+00002240: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
+00002250: 2020 2020 7365 6c66 2e4c 6961 6269 6c69      self.Liabili
+00002260: 7479 4c69 7374 4c65 6674 2e74 6578 7443  tyListLeft.textC
+00002270: 6861 6e67 6564 2e63 6f6e 6e65 6374 2873  hanged.connect(s
+00002280: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
+00002290: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000022a0: 4571 7569 7479 4c69 7374 4c65 6674 2e74  EquityListLeft.t
+000022b0: 6578 7443 6861 6e67 6564 2e63 6f6e 6e65  extChanged.conne
+000022c0: 6374 2873 656c 662e 6368 616e 6765 5f61  ct(self.change_a
+000022d0: 6c65 7274 290d 0a20 2020 2020 2020 2073  lert)..        s
+000022e0: 656c 662e 4173 7365 744c 6973 7452 6967  elf.AssetListRig
+000022f0: 6874 2e74 6578 7443 6861 6e67 6564 2e63  ht.textChanged.c
+00002300: 6f6e 6e65 6374 2873 656c 662e 6368 616e  onnect(self.chan
+00002310: 6765 5f61 6c65 7274 290d 0a20 2020 2020  ge_alert)..     
+00002320: 2020 2073 656c 662e 4c69 6162 696c 6974     self.Liabilit
+00002330: 794c 6973 7452 6967 6874 2e74 6578 7443  yListRight.textC
+00002340: 6861 6e67 6564 2e63 6f6e 6e65 6374 2873  hanged.connect(s
+00002350: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
+00002360: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002370: 4571 7569 7479 4c69 7374 5269 6768 742e  EquityListRight.
+00002380: 7465 7874 4368 616e 6765 642e 636f 6e6e  textChanged.conn
+00002390: 6563 7428 7365 6c66 2e63 6861 6e67 655f  ect(self.change_
+000023a0: 616c 6572 7429 0d0a 2020 2020 2020 2020  alert)..        
+000023b0: 7365 6c66 2e65 6469 7453 7562 6a65 6374  self.editSubject
+000023c0: 2e74 6578 7445 6469 7465 642e 636f 6e6e  .textEdited.conn
+000023d0: 6563 7428 7365 6c66 2e63 6861 6e67 655f  ect(self.change_
+000023e0: 616c 6572 7429 0d0a 2020 2020 2020 2020  alert)..        
+000023f0: 7365 6c66 2e65 6469 7453 686f 7274 6e61  self.editShortna
+00002400: 6d65 2e74 6578 7445 6469 7465 642e 636f  me.textEdited.co
+00002410: 6e6e 6563 7428 7365 6c66 2e63 6861 6e67  nnect(self.chang
+00002420: 655f 616c 6572 7429 0d0a 2020 2020 2020  e_alert)..      
+00002430: 2020 7365 6c66 2e65 6469 7451 7561 6e74    self.editQuant
+00002440: 6974 792e 7465 7874 4564 6974 6564 2e63  ity.textEdited.c
+00002450: 6f6e 6e65 6374 2873 656c 662e 6368 616e  onnect(self.chan
+00002460: 6765 5f61 6c65 7274 290d 0a20 2020 2020  ge_alert)..     
+00002470: 2020 2073 656c 662e 6564 6974 4465 7363     self.editDesc
+00002480: 7269 7074 696f 6e2e 7465 7874 4564 6974  ription.textEdit
+00002490: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+000024a0: 6368 616e 6765 5f61 6c65 7274 290d 0a0d  change_alert)...
+000024b0: 0a20 2020 2020 2020 2073 656c 662e 636f  .        self.co
+000024c0: 6d62 6f49 6e63 6f6d 654c 6566 742e 6375  mboIncomeLeft.cu
+000024d0: 7272 656e 7449 6e64 6578 4368 616e 6765  rrentIndexChange
+000024e0: 642e 636f 6e6e 6563 7428 7365 6c66 2e63  d.connect(self.c
+000024f0: 6861 6e67 655f 616c 6572 7429 0d0a 2020  hange_alert)..  
+00002500: 2020 2020 2020 7365 6c66 2e63 6f6d 626f        self.combo
+00002510: 4361 7368 4c65 6674 2e63 7572 7265 6e74  CashLeft.current
+00002520: 496e 6465 7843 6861 6e67 6564 2e63 6f6e  IndexChanged.con
+00002530: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
+00002540: 5f61 6c65 7274 290d 0a20 2020 2020 2020  _alert)..       
+00002550: 2073 656c 662e 636f 6d62 6f49 6e63 6f6d   self.comboIncom
+00002560: 6552 6967 6874 2e63 7572 7265 6e74 496e  eRight.currentIn
+00002570: 6465 7843 6861 6e67 6564 2e63 6f6e 6e65  dexChanged.conne
+00002580: 6374 2873 656c 662e 6368 616e 6765 5f61  ct(self.change_a
+00002590: 6c65 7274 290d 0a20 2020 2020 2020 2073  lert)..        s
+000025a0: 656c 662e 636f 6d62 6f43 6173 6852 6967  elf.comboCashRig
+000025b0: 6874 2e63 7572 7265 6e74 496e 6465 7843  ht.currentIndexC
+000025c0: 6861 6e67 6564 2e63 6f6e 6e65 6374 2873  hanged.connect(s
+000025d0: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
+000025e0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000025f0: 7265 6769 7374 6572 466c 6f77 426f 782e  registerFlowBox.
+00002600: 6375 7272 656e 7449 6e64 6578 4368 616e  currentIndexChan
+00002610: 6765 642e 636f 6e6e 6563 7428 7365 6c66  ged.connect(self
+00002620: 2e63 6861 6e67 655f 616c 6572 7429 0d0a  .change_alert)..
+00002630: 2020 2020 2020 2020 7365 6c66 2e72 6567          self.reg
+00002640: 6973 7465 7246 6c6f 7742 6f78 2e63 7572  isterFlowBox.cur
+00002650: 7265 6e74 496e 6465 7843 6861 6e67 6564  rentIndexChanged
+00002660: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00002670: 2070 7269 6e74 2822 5245 4749 5354 4552   print("REGISTER
+00002680: 2046 4c4f 5722 2c20 7365 6c66 2e72 6567   FLOW", self.reg
+00002690: 6973 7465 7246 6c6f 7742 6f78 2e63 7572  isterFlowBox.cur
+000026a0: 7265 6e74 5465 7874 2829 2929 0d0a 2020  rentText()))..  
+000026b0: 2020 2020 2020 7365 6c66 2e63 6f6d 626f        self.combo
+000026c0: 496e 636f 6d65 4c65 6674 2e63 7572 7265  IncomeLeft.curre
+000026d0: 6e74 496e 6465 7843 6861 6e67 6564 2e63  ntIndexChanged.c
+000026e0: 6f6e 6e65 6374 286c 616d 6264 613a 2070  onnect(lambda: p
+000026f0: 7269 6e74 2822 5245 4749 5354 4552 2046  rint("REGISTER F
+00002700: 4c4f 5722 2c20 7365 6c66 2e72 6567 6973  LOW", self.regis
+00002710: 7465 7246 6c6f 7742 6f78 2e63 7572 7265  terFlowBox.curre
+00002720: 6e74 5465 7874 2829 2929 0d0a 0d0a 2020  ntText()))....  
+00002730: 2020 2020 2020 7365 6c66 2e65 6469 7454        self.editT
+00002740: 7970 652e 6375 7272 656e 7449 6e64 6578  ype.currentIndex
+00002750: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002760: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
+00002770: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
+00002780: 2e63 6f6d 626f 556e 6964 6972 2e63 7572  .comboUnidir.cur
+00002790: 7265 6e74 496e 6465 7843 6861 6e67 6564  rentIndexChanged
+000027a0: 2e63 6f6e 6e65 6374 2873 656c 662e 6368  .connect(self.ch
+000027b0: 616e 6765 5f61 6c65 7274 290d 0a0d 0a0d  ange_alert).....
+000027c0: 0a20 2020 2020 2020 2073 656c 662e 7370  .        self.sp
+000027d0: 696e 426f 7846 6f6e 7453 697a 652e 7661  inBoxFontSize.va
+000027e0: 6c75 6543 6861 6e67 6564 2e63 6f6e 6e65  lueChanged.conne
+000027f0: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
+00002800: 6472 6177 6361 6e76 6173 2e75 7064 6174  drawcanvas.updat
+00002810: 6528 2929 0d0a 2020 2020 2020 2020 7365  e())..        se
+00002820: 6c66 2e73 7069 6e42 6f78 466f 6e74 5369  lf.spinBoxFontSi
+00002830: 7a65 5f32 2e76 616c 7565 4368 616e 6765  ze_2.valueChange
+00002840: 642e 636f 6e6e 6563 7428 6c61 6d62 6461  d.connect(lambda
+00002850: 3a20 7365 6c66 2e64 7261 7763 616e 7661  : self.drawcanva
+00002860: 732e 7570 6461 7465 2829 290d 0a0d 0a20  s.update()).... 
+00002870: 2020 2020 2020 2073 656c 662e 4669 6c74         self.Filt
+00002880: 6572 6c69 6e65 4564 6974 2e74 6578 7443  erlineEdit.textC
+00002890: 6861 6e67 6564 2e63 6f6e 6e65 6374 2873  hanged.connect(s
+000028a0: 656c 662e 7570 6461 7465 5f74 6162 6c65  elf.update_table
+000028b0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+000028c0: 662e 6368 6563 6b42 6f78 2e73 7461 7465  f.checkBox.state
+000028d0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+000028e0: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+000028f0: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002900: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002910: 6368 6563 6b42 6f78 5f32 2e73 7461 7465  checkBox_2.state
+00002920: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002930: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002940: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002950: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002960: 6368 6563 6b42 6f78 5f33 2e73 7461 7465  checkBox_3.state
+00002970: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002980: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002990: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+000029a0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000029b0: 6368 6563 6b42 6f78 5f34 2e73 7461 7465  checkBox_4.state
+000029c0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+000029d0: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+000029e0: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+000029f0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002a00: 6368 6563 6b42 6f78 5f35 2e73 7461 7465  checkBox_5.state
+00002a10: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002a20: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002a30: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002a40: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002a50: 6368 6563 6b42 6f78 5f36 2e73 7461 7465  checkBox_6.state
+00002a60: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002a70: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002a80: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002a90: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002aa0: 6368 6563 6b42 6f78 5f37 2e73 7461 7465  checkBox_7.state
+00002ab0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002ac0: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002ad0: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002ae0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002af0: 6368 6563 6b42 6f78 5f38 2e73 7461 7465  checkBox_8.state
+00002b00: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002b10: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002b20: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002b30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002b40: 6368 6563 6b42 6f78 5f39 2e73 7461 7465  checkBox_9.state
+00002b50: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00002b60: 6c61 6d62 6461 3a20 7365 6c66 2e64 7261  lambda: self.dra
+00002b70: 7763 616e 7661 732e 7570 6461 7465 2829  wcanvas.update()
+00002b80: 290d 0a0d 0a20 2020 2020 2020 2023 2073  )....        # s
+00002b90: 7461 7475 7320 4c45 440d 0a20 2020 2020  tatus LED..     
+00002ba0: 2020 2073 656c 662e 7468 7265 6164 203d     self.thread =
+00002bb0: 2051 5468 7265 6164 2829 0d0a 0d0a 2020   QThread()....  
+00002bc0: 2020 2020 2020 7365 6c66 2e77 6f72 6b65        self.worke
+00002bd0: 7220 3d20 5374 6174 7573 4c45 4428 7365  r = StatusLED(se
+00002be0: 6c66 2e72 6164 696f 4275 7474 6f6e 290d  lf.radioButton).
+00002bf0: 0a20 2020 2020 2020 2073 656c 662e 776f  .        self.wo
+00002c00: 726b 6572 2e6d 6f76 6554 6f54 6872 6561  rker.moveToThrea
+00002c10: 6428 7365 6c66 2e74 6872 6561 6429 0d0a  d(self.thread)..
+00002c20: 2020 2020 2020 2020 7365 6c66 2e77 6f72          self.wor
+00002c30: 6b65 722e 6669 6e69 7368 6564 2e63 6f6e  ker.finished.con
+00002c40: 6e65 6374 2873 656c 662e 776f 726b 6572  nect(self.worker
+00002c50: 2e64 656c 6574 654c 6174 6572 290d 0a20  .deleteLater).. 
+00002c60: 2020 2020 2020 2073 656c 662e 7468 7265         self.thre
+00002c70: 6164 2e66 696e 6973 6865 642e 636f 6e6e  ad.finished.conn
+00002c80: 6563 7428 7365 6c66 2e74 6872 6561 642e  ect(self.thread.
+00002c90: 6465 6c65 7465 4c61 7465 7229 0d0a 2020  deleteLater)..  
+00002ca0: 2020 2020 2020 7365 6c66 2e74 6872 6561        self.threa
+00002cb0: 642e 7374 6172 7465 642e 636f 6e6e 6563  d.started.connec
+00002cc0: 7428 7365 6c66 2e77 6f72 6b65 722e 7275  t(self.worker.ru
+00002cd0: 6e29 0d0a 2020 2020 2020 2020 7365 6c66  n)..        self
+00002ce0: 2e74 6872 6561 642e 7374 6172 7428 290d  .thread.start().
+00002cf0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00002d00: 7468 656d 655f 6d61 6e61 6765 7220 3d20  theme_manager = 
+00002d10: 5468 656d 654d 616e 6167 6572 2873 656c  ThemeManager(sel
+00002d20: 6629 0d0a 2020 2020 2020 2020 7365 6c66  f)..        self
+00002d30: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+00002d40: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00002d50: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
+00002d60: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
+00002d70: 2020 2020 2073 656c 662e 6375 7272 656e       self.curren
+00002d80: 745f 6669 6c65 203d 204e 6f6e 650d 0a0d  t_file = None...
+00002d90: 0a20 2020 2020 2020 2023 202d 2d0d 0a20  .        # --.. 
+00002da0: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
+00002db0: 6361 6e76 6173 203d 206d 795f 7769 6467  canvas = my_widg
+00002dc0: 6574 0d0a 2020 2020 2020 2020 7365 6c66  et..        self
+00002dd0: 2e64 7261 7763 616e 7661 732e 6d6f 6465  .drawcanvas.mode
+00002de0: 203d 2022 6472 6167 220d 0a0d 0a20 2020   = "drag"....   
+00002df0: 2020 2020 2073 656c 662e 6261 636b 7570       self.backup
+00002e00: 5f73 7472 203d 2022 220d 0a20 2020 2020  _str = ""..     
+00002e10: 2020 2023 2073 656c 662e 7365 744d 6f75     # self.setMou
+00002e20: 7365 5472 6163 6b69 6e67 2854 7275 6529  seTracking(True)
+00002e30: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+00002e40: 2e6e 6578 7442 7574 746f 6e2e 7072 6573  .nextButton.pres
+00002e50: 7365 642e 636f 6e6e 6563 7428 7365 6c66  sed.connect(self
+00002e60: 2e67 6f74 6f5f 6e65 7874 290d 0a20 2020  .goto_next)..   
+00002e70: 2020 2020 2073 656c 662e 6272 6f77 7365       self.browse
+00002e80: 4275 7474 6f6e 2e74 7269 6767 6572 6564  Button.triggered
+00002e90: 2e63 6f6e 6e65 6374 2873 656c 662e 6272  .connect(self.br
+00002ea0: 6f77 7365 290d 0a20 2020 2020 2020 2023  owse)..        #
+00002eb0: 2073 656c 662e 7361 7665 4275 7474 6f6e   self.saveButton
+00002ec0: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
+00002ed0: 6374 2873 656c 662e 7361 7665 290d 0a20  ct(self.save).. 
+00002ee0: 2020 2020 2020 2073 656c 662e 7361 7665         self.save
+00002ef0: 4173 4275 7474 6f6e 2e74 7269 6767 6572  AsButton.trigger
+00002f00: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+00002f10: 7361 7665 5f64 6c67 290d 0a20 2020 2020  save_dlg)..     
+00002f20: 2020 2073 656c 662e 7361 7665 4275 696c     self.saveBuil
+00002f30: 6442 7574 746f 6e2e 7472 6967 6765 7265  dButton.triggere
+00002f40: 642e 636f 6e6e 6563 7428 7365 6c66 2e73  d.connect(self.s
+00002f50: 6176 655f 616e 645f 6275 696c 6429 0d0a  ave_and_build)..
+00002f60: 2020 2020 2020 2020 2320 7365 6c66 2e46          # self.F
+00002f70: 6c69 7048 6569 6768 7442 7574 746f 6e2e  lipHeightButton.
+00002f80: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00002f90: 7365 6c66 2e66 6c69 705f 6865 6967 6874  self.flip_height
+00002fa0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002fb0: 6163 7469 6f6e 466c 6970 5f56 6965 772e  actionFlip_View.
+00002fc0: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+00002fd0: 7428 7365 6c66 2e66 6c69 705f 6865 6967  t(self.flip_heig
+00002fe0: 6874 290d 0a20 2020 2020 2020 2073 656c  ht)..        sel
+00002ff0: 662e 6163 7469 6f6e 5265 7374 6f72 655f  f.actionRestore_
+00003000: 4f72 6967 696e 616c 5f53 697a 652e 7472  Original_Size.tr
+00003010: 6967 6765 7265 642e 636f 6e6e 6563 7428  iggered.connect(
+00003020: 7365 6c66 2e72 6573 746f 7265 5f6f 7269  self.restore_ori
+00003030: 6769 6e61 6c5f 7369 7a65 290d 0a0d 0a20  ginal_size).... 
+00003040: 2020 2020 2020 2073 656c 662e 6163 7469         self.acti
+00003050: 6f6e 5368 6f77 5f4f 7574 7075 745f 4c6f  onShow_Output_Lo
+00003060: 672e 7472 6967 6765 7265 642e 636f 6e6e  g.triggered.conn
+00003070: 6563 7428 7365 6c66 2e73 686f 775f 6f75  ect(self.show_ou
+00003080: 7470 7574 5f64 6973 706c 6179 290d 0a0d  tput_display)...
+00003090: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
+000030a0: 7368 6f77 6772 6170 6842 7574 746f 6e2e  showgraphButton.
+000030b0: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+000030c0: 7428 7365 6c66 2e73 686f 775f 6772 6170  t(self.show_grap
+000030d0: 6829 0d0a 2020 2020 2020 2020 7365 6c66  h)..        self
+000030e0: 2e67 656e 4d61 7442 7574 746f 6e2e 7472  .genMatButton.tr
+000030f0: 6967 6765 7265 642e 636f 6e6e 6563 7428  iggered.connect(
+00003100: 7365 6c66 2e74 7279 5f67 656e 5f6d 6174  self.try_gen_mat
+00003110: 7269 7829 0d0a 2020 2020 2020 2020 2320  rix)..        # 
+00003120: 7365 6c66 2e67 656e 436f 6465 4275 7474  self.genCodeButt
+00003130: 6f6e 2e74 7269 6767 6572 6564 2e63 6f6e  on.triggered.con
+00003140: 6e65 6374 2873 656c 662e 6765 6e5f 636f  nect(self.gen_co
+00003150: 6465 290d 0a20 2020 2020 2020 2023 2073  de)..        # s
+00003160: 656c 662e 6765 6e54 6578 4275 7474 6f6e  elf.genTexButton
+00003170: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
+00003180: 2873 656c 662e 6765 6e5f 7465 785f 6465  (self.gen_tex_de
+00003190: 7363 7269 7074 696f 6e29 0d0a 2020 2020  scription)..    
+000031a0: 2020 2020 7365 6c66 2e67 656e 4943 5342      self.genICSB
+000031b0: 7574 746f 6e2e 7472 6967 6765 7265 642e  utton.triggered.
+000031c0: 636f 6e6e 6563 7428 7365 6c66 2e67 656e  connect(self.gen
+000031d0: 5f74 6578 5f69 6373 290d 0a0d 0a20 2020  _tex_ics)....   
+000031e0: 2020 2020 2073 656c 662e 6772 6170 6873       self.graphs
+000031f0: 686f 7769 6e63 6f6d 652e 7072 6573 7365  howincome.presse
+00003200: 642e 636f 6e6e 6563 7428 7365 6c66 2e67  d.connect(self.g
+00003210: 656e 5f69 6373 5f73 696e 676c 6529 0d0a  en_ics_single)..
+00003220: 2020 2020 2020 2020 7365 6c66 2e67 656e          self.gen
+00003230: 4346 5342 7574 746f 6e2e 7072 6573 7365  CFSButton.presse
+00003240: 642e 636f 6e6e 6563 7428 7365 6c66 2e67  d.connect(self.g
+00003250: 656e 5f63 6173 6866 6c6f 775f 7369 6e67  en_cashflow_sing
+00003260: 6c65 290d 0a0d 0a20 2020 2020 2020 2073  le)....        s
+00003270: 656c 662e 6564 6974 4d61 696e 4c6f 6f70  elf.editMainLoop
+00003280: 4275 7474 6f6e 2e74 7269 6767 6572 6564  Button.triggered
+00003290: 2e63 6f6e 6e65 6374 2873 656c 662e 6564  .connect(self.ed
+000032a0: 6974 5f6d 6169 6e6c 6f6f 7029 0d0a 0d0a  it_mainloop)....
+000032b0: 2020 2020 2020 2020 7365 6c66 2e62 7569          self.bui
+000032c0: 6c64 5072 6f6a 6563 7442 7574 746f 6e2e  ldProjectButton.
+000032d0: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+000032e0: 7428 6c61 6d62 6461 3a20 7365 6c66 2e62  t(lambda: self.b
+000032f0: 7569 6c64 5f70 726f 6a65 6374 286f 7665  uild_project(ove
+00003300: 7277 7269 7465 3d54 7275 6529 290d 0a20  rwrite=True)).. 
+00003310: 2020 2020 2020 2073 656c 662e 7275 6e42         self.runB
+00003320: 7574 746f 6e2e 7472 6967 6765 7265 642e  utton.triggered.
+00003330: 636f 6e6e 6563 7428 7365 6c66 2e72 756e  connect(self.run
+00003340: 5f70 726f 6a65 6374 290d 0a0d 0a20 2020  _project)....   
+00003350: 2020 2020 2073 656c 662e 7368 6f72 7463       self.shortc
+00003360: 7574 203d 2051 5368 6f72 7463 7574 2851  ut = QShortcut(Q
+00003370: 4b65 7953 6571 7565 6e63 6528 2243 7472  KeySequence("Ctr
+00003380: 6c2b 5322 292c 7365 6c66 290d 0a20 2020  l+S"),self)..   
+00003390: 2020 2020 2073 656c 662e 7368 6f72 7463       self.shortc
+000033a0: 7574 2e61 6374 6976 6174 6564 2e63 6f6e  ut.activated.con
+000033b0: 6e65 6374 2873 656c 662e 7361 7665 5f61  nect(self.save_a
+000033c0: 6e64 5f62 7569 6c64 290d 0a0d 0a20 2020  nd_build)....   
+000033d0: 2020 2020 2073 656c 662e 7368 6f72 7463       self.shortc
+000033e0: 7574 5f73 6561 7263 6820 3d20 5153 686f  ut_search = QSho
+000033f0: 7274 6375 7428 514b 6579 5365 7175 656e  rtcut(QKeySequen
+00003400: 6365 2822 4374 726c 2b46 2229 2c73 656c  ce("Ctrl+F"),sel
+00003410: 6629 0d0a 2020 2020 2020 2020 7365 6c66  f)..        self
+00003420: 2e73 686f 7274 6375 745f 7365 6172 6368  .shortcut_search
+00003430: 2e61 6374 6976 6174 6564 2e63 6f6e 6e65  .activated.conne
+00003440: 6374 2873 656c 662e 7365 6172 6368 5f64  ct(self.search_d
+00003450: 6c67 290d 0a0d 0a20 2020 2020 2020 2073  lg)....        s
+00003460: 656c 662e 6163 7469 6f6e 4162 6f75 742e  elf.actionAbout.
+00003470: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+00003480: 7428 6c61 6d62 6461 3a20 7365 6c66 2e6e  t(lambda: self.n
+00003490: 6f74 6966 7928 2273 6663 746f 6c73 2d61  otify("sfctols-a
+000034a0: 7474 756e 6520 7665 722e 2030 2e32 2063  ttune ver. 0.2 c
+000034b0: 6f6d 7061 7469 626c 6520 7769 7468 2073  ompatible with s
+000034c0: 6663 746f 6f6c 7320 3e3d 2031 2e30 2e31  fctools >= 1.0.1
+000034d0: 2e20 5468 616e 6b73 2066 6f72 2075 7369  . Thanks for usi
+000034e0: 6e67 2120 506c 6561 7365 2072 6570 6f72  ng! Please repor
+000034f0: 7420 6275 6773 2074 6f20 7468 6f6d 6173  t bugs to thomas
+00003500: 2e62 616c 6461 7566 4064 6c72 2e64 6522  .baldauf@dlr.de"
+00003510: 2c74 6974 6c65 3d22 4162 6f75 7420 7468  ,title="About th
+00003520: 6973 2073 6f66 7477 6172 6522 2929 0d0a  is software"))..
+00003530: 2020 2020 2020 2020 7365 6c66 2e61 6374          self.act
+00003540: 696f 6e46 6c6f 774d 6174 7269 785f 746f  ionFlowMatrix_to
+00003550: 5f45 7863 656c 5f66 696c 652e 7472 6967  _Excel_file.trig
+00003560: 6765 7265 642e 636f 6e6e 6563 7428 6c61  gered.connect(la
+00003570: 6d62 6461 3a20 7365 6c66 2e67 656e 5f6d  mbda: self.gen_m
+00003580: 6174 7269 7828 6d6f 6465 3d22 6578 6365  atrix(mode="exce
+00003590: 6c22 2929 0d0a 0d0a 2020 2020 2020 2020  l"))....        
+000035a0: 7365 6c66 2e61 6374 696f 6e53 7769 7463  self.actionSwitc
+000035b0: 685f 4461 726b 5f42 7269 6768 745f 4d6f  h_Dark_Bright_Mo
+000035c0: 6465 2e74 7269 6767 6572 6564 2e63 6f6e  de.triggered.con
+000035d0: 6e65 6374 2873 656c 662e 7377 6974 6368  nect(self.switch
+000035e0: 5f74 6865 6d65 290d 0a0d 0a20 2020 2020  _theme)....     
+000035f0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+00003600: 696f 6e56 6965 772e 7365 7445 6469 7454  ionView.setEditT
+00003610: 7269 6767 6572 7328 5141 6273 7472 6163  riggers(QAbstrac
+00003620: 7449 7465 6d56 6965 772e 4e6f 4564 6974  tItemView.NoEdit
+00003630: 5472 6967 6765 7273 290d 0a20 2020 2020  Triggers)..     
+00003640: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+00003650: 696f 6e56 6965 772e 646f 7562 6c65 436c  ionView.doubleCl
+00003660: 6963 6b65 642e 636f 6e6e 6563 7428 7365  icked.connect(se
+00003670: 6c66 2e64 6174 615f 7365 6c65 6374 290d  lf.data_select).
+00003680: 0a20 2020 2020 2020 2073 656c 662e 7472  .        self.tr
+00003690: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+000036a0: 7443 6f6c 756d 6e57 6964 7468 2830 2c20  tColumnWidth(0, 
+000036b0: 3132 3029 0d0a 0d0a 2020 2020 2020 2020  120)....        
+000036c0: 7365 6c66 2e61 7272 616e 6765 4275 7474  self.arrangeButt
+000036d0: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
+000036e0: 6374 2873 656c 662e 6172 7261 6e67 655f  ct(self.arrange_
+000036f0: 7072 6574 7479 290d 0a20 2020 2020 2020  pretty)..       
+00003700: 2073 656c 662e 7265 6d6f 7665 4275 7474   self.removeButt
+00003710: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
+00003720: 6374 2873 656c 662e 7265 6d6f 7665 5f69  ct(self.remove_i
+00003730: 7465 6d29 0d0a 0d0a 2020 2020 2020 2020  tem)....        
+00003740: 7365 6c66 2e62 6331 2e70 7265 7373 6564  self.bc1.pressed
+00003750: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00003760: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+00003770: 6f72 2831 2929 0d0a 2020 2020 2020 2020  or(1))..        
+00003780: 7365 6c66 2e62 6332 2e70 7265 7373 6564  self.bc2.pressed
+00003790: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000037a0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+000037b0: 6f72 2832 2929 0d0a 2020 2020 2020 2020  or(2))..        
+000037c0: 7365 6c66 2e62 6333 2e70 7265 7373 6564  self.bc3.pressed
+000037d0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000037e0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+000037f0: 6f72 2833 2929 0d0a 2020 2020 2020 2020  or(3))..        
+00003800: 7365 6c66 2e62 6334 2e70 7265 7373 6564  self.bc4.pressed
+00003810: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00003820: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+00003830: 6f72 2834 2929 0d0a 2020 2020 2020 2020  or(4))..        
+00003840: 7365 6c66 2e62 6335 2e70 7265 7373 6564  self.bc5.pressed
+00003850: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00003860: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+00003870: 6f72 2835 2929 0d0a 2020 2020 2020 2020  or(5))..        
+00003880: 7365 6c66 2e62 6336 2e70 7265 7373 6564  self.bc6.pressed
+00003890: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000038a0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+000038b0: 6f72 2836 2929 0d0a 2020 2020 2020 2020  or(6))..        
+000038c0: 7365 6c66 2e62 6337 2e70 7265 7373 6564  self.bc7.pressed
+000038d0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000038e0: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+000038f0: 6f72 2837 2929 0d0a 2020 2020 2020 2020  or(7))..        
+00003900: 7365 6c66 2e62 6338 2e70 7265 7373 6564  self.bc8.pressed
+00003910: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00003920: 2073 656c 662e 6368 616e 6765 5f63 6f6c   self.change_col
+00003930: 6f72 2838 2929 0d0a 0d0a 2020 2020 2020  or(8))....      
+00003940: 2020 7365 6c66 2e62 746e 5f63 7361 7665    self.btn_csave
+00003950: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
+00003960: 286c 616d 6264 613a 2073 656c 662e 7468  (lambda: self.th
+00003970: 656d 655f 6d61 6e61 6765 722e 7361 7665  eme_manager.save
+00003980: 5f63 6f6c 6f72 7328 2929 0d0a 2020 2020  _colors())..    
+00003990: 2020 2020 7365 6c66 2e62 746e 5f63 6c6f      self.btn_clo
+000039a0: 6164 2e70 7265 7373 6564 2e63 6f6e 6e65  ad.pressed.conne
+000039b0: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
+000039c0: 7468 656d 655f 6d61 6e61 6765 722e 6c6f  theme_manager.lo
+000039d0: 6164 5f63 6f6c 6f72 7328 2929 0d0a 2020  ad_colors())..  
+000039e0: 2020 2020 2020 7365 6c66 2e62 746e 5f63        self.btn_c
+000039f0: 7265 7374 6f72 652e 7072 6573 7365 642e  restore.pressed.
+00003a00: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00003a10: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+00003a20: 6572 2e72 6573 746f 7265 2829 290d 0a0d  er.restore())...
+00003a30: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00003a40: 696e 6c6f 6f70 5f73 7472 203d 2022 220d  inloop_str = "".
+00003a50: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00003a60: 7365 7474 696e 6773 5f73 7472 203d 2022  settings_str = "
+00003a70: 2222 0d0a 6d65 7461 696e 666f 3a0d 0a09  ""..metainfo:...
+00003a80: 6175 7468 6f72 3a20 796f 7572 206e 616d  author: your nam
+00003a90: 6520 6865 7265 0d0a 0964 6174 653a 2032  e here...date: 2
+00003aa0: 3032 320d 0a09 696e 666f 3a20 6578 616d  022...info: exam
+00003ab0: 706c 6520 7365 7474 696e 6773 0d0a 0d0a  ple settings....
+00003ac0: 6879 7065 7270 6172 616d 733a 0d0a 2020  hyperparams:..  
+00003ad0: 2020 2020 202d 206e 616d 653a 2065 7861       - name: exa
+00003ae0: 6d70 6c65 0d0a 2020 2020 2020 2020 2076  mple..         v
+00003af0: 616c 7565 3a20 3432 2e30 0d0a 2020 2020  alue: 42.0..    
+00003b00: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
+00003b10: 3a20 616e 2065 7861 6d70 6c65 2070 6172  : an example par
+00003b20: 616d 6574 6572 0d0a 2222 220d 0a0d 0a20  ameter..""".... 
+00003b30: 2020 2020 2020 2073 656c 662e 6564 6974         self.edit
+00003b40: 5365 7474 696e 6773 4275 7474 6f6e 2e74  SettingsButton.t
+00003b50: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
+00003b60: 2873 656c 662e 6564 6974 5f73 6574 7469  (self.edit_setti
+00003b70: 6e67 7329 0d0a 0d0a 2020 2020 2020 2020  ngs)....        
+00003b80: 7365 6c66 2e61 6464 4275 7474 6f6e 2e70  self.addButton.p
+00003b90: 7265 7373 6564 2e63 6f6e 6e65 6374 2873  ressed.connect(s
+00003ba0: 656c 662e 6164 645f 6e65 7729 2023 2061  elf.add_new) # a
+00003bb0: 6464 2061 6e20 6167 656e 740d 0a20 2020  dd an agent..   
+00003bc0: 2020 2020 2073 656c 662e 6164 6442 7574       self.addBut
+00003bd0: 746f 6e32 2e70 7265 7373 6564 2e63 6f6e  ton2.pressed.con
+00003be0: 6e65 6374 2873 656c 662e 6164 645f 6865  nect(self.add_he
+00003bf0: 6c70 6572 2920 2320 6164 6420 6120 6865  lper) # add a he
+00003c00: 6c70 6572 2061 6765 6e74 2028 6e6f 2074  lper agent (no t
+00003c10: 7261 6e73 6163 7469 6f6e 7329 0d0a 2020  ransactions)..  
+00003c20: 2020 2020 2020 7365 6c66 2e67 7261 7068        self.graph
+00003c30: 4465 6c65 7465 4275 7474 6f6e 2e70 7265  DeleteButton.pre
+00003c40: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
+00003c50: 662e 7265 6d6f 7665 5f68 656c 7065 7229  f.remove_helper)
+00003c60: 0d0a 0d0a 0d0a 0d0a 2020 2020 2020 2020  ........        
+00003c70: 2373 656c 662e 7361 7665 4275 7474 6f6e  #self.saveButton
+00003c80: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
+00003c90: 2873 656c 662e 7361 7665 290d 0a0d 0a20  (self.save).... 
+00003ca0: 2020 2020 2020 2023 2073 656c 662e 6772         # self.gr
+00003cb0: 6170 6853 656c 6563 7442 7574 746f 6e2e  aphSelectButton.
+00003cc0: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00003cd0: 7365 6c66 2e63 6861 6e67 655f 6772 6170  self.change_grap
+00003ce0: 686d 6f64 655f 7365 6c65 6374 290d 0a20  hmode_select).. 
+00003cf0: 2020 2020 2020 2023 2073 656c 662e 6772         # self.gr
+00003d00: 6170 6844 7261 6742 7574 746f 6e2e 7072  aphDragButton.pr
+00003d10: 6573 7365 642e 636f 6e6e 6563 7428 7365  essed.connect(se
+00003d20: 6c66 2e63 6861 6e67 655f 6772 6170 686d  lf.change_graphm
+00003d30: 6f64 655f 6472 6167 290d 0a0d 0a20 2020  ode_drag)....   
+00003d40: 2020 2020 2073 656c 662e 6772 6170 6845       self.graphE
+00003d50: 6469 7442 7574 746f 6e2e 7072 6573 7365  ditButton.presse
+00003d60: 642e 636f 6e6e 6563 7428 7365 6c66 2e65  d.connect(self.e
+00003d70: 6469 745f 6772 6170 685f 6167 656e 7429  dit_graph_agent)
+00003d80: 0d0a 0d0a 2020 2020 2020 2020 2366 6f72  ....        #for
+00003d90: 2077 6964 6765 7420 696e 205b 7365 6c66   widget in [self
+00003da0: 2e41 7373 6574 4c69 7374 4c65 6674 2c20  .AssetListLeft, 
+00003db0: 7365 6c66 2e41 7373 6574 4c69 7374 5269  self.AssetListRi
+00003dc0: 6768 742c 0d0a 2020 2020 2020 2020 2320  ght,..        # 
+00003dd0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00003de0: 6c66 2e4c 6961 6269 6c69 7479 4c69 7374  lf.LiabilityList
+00003df0: 4c65 6674 2c20 7365 6c66 2e4c 6961 6269  Left, self.Liabi
+00003e00: 6c69 7479 4c69 7374 5269 6768 742c 0d0a  lityListRight,..
+00003e10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00003e20: 2020 2020 2020 2020 7365 6c66 2e45 7175          self.Equ
+00003e30: 6974 794c 6973 744c 6566 742c 2073 656c  ityListLeft, sel
+00003e40: 662e 4571 7569 7479 4c69 7374 5269 6768  f.EquityListRigh
+00003e50: 745d 3a0d 0a20 2020 2020 2020 2023 2020  t]:..        #  
+00003e60: 2020 7769 6467 6574 2e74 6578 7443 6861    widget.textCha
+00003e70: 6e67 6564 2e63 6f6e 6e65 6374 2873 656c  nged.connect(sel
+00003e80: 662e 7570 6461 7465 5f64 6174 6129 0d0a  f.update_data)..
+00003e90: 2020 2020 2020 2020 7365 6c66 2e61 6374          self.act
+00003ea0: 696f 6e53 7761 705f 4c69 6e65 5f49 6e74  ionSwap_Line_Int
+00003eb0: 6572 706f 6c61 7469 6f6e 2e74 7269 6767  erpolation.trigg
+00003ec0: 6572 6564 2e63 6f6e 6e65 6374 2873 656c  ered.connect(sel
+00003ed0: 662e 6472 6177 6361 6e76 6173 2e73 7761  f.drawcanvas.swa
+00003ee0: 705f 696e 7465 7270 6f6c 5f73 7479 6c65  p_interpol_style
+00003ef0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00003f00: 662e 6163 7469 6f6e 4578 706f 7274 5f47  f.actionExport_G
+00003f10: 7261 7068 5f74 6f5f 5044 462e 7472 6967  raph_to_PDF.trig
+00003f20: 6765 7265 642e 636f 6e6e 6563 7428 7365  gered.connect(se
+00003f30: 6c66 2e64 7261 7763 616e 7661 732e 6578  lf.drawcanvas.ex
+00003f40: 706f 7274 5f70 6466 290d 0a0d 0a20 2020  port_pdf)....   
+00003f50: 2020 2020 2073 656c 662e 7564 7061 7465       self.udpate
+00003f60: 4275 7474 6f6e 2e70 7265 7373 6564 2e63  Button.pressed.c
+00003f70: 6f6e 6e65 6374 2873 656c 662e 7570 6461  onnect(self.upda
+00003f80: 7465 5f64 6174 6129 0d0a 0d0a 2020 2020  te_data)....    
+00003f90: 2020 2020 7365 6c66 2e66 696c 656e 616d      self.filenam
+00003fa0: 6520 3d20 4e6f 6e65 2020 2020 2320 6375  e = None    # cu
+00003fb0: 7272 656e 7420 2e79 616d 6c20 6669 6c65  rrent .yaml file
+00003fc0: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
+00003fd0: 6e74 7279 5f64 6174 6120 3d20 5b5d 2023  ntry_data = [] #
+00003fe0: 2073 746f 7265 2063 7572 7265 6e74 2065   store current e
+00003ff0: 6e74 7269 6573 0d0a 2020 2020 2020 2020  ntries..        
+00004000: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+00004010: 6478 203d 204e 6f6e 650d 0a0d 0a20 2020  dx = None....   
+00004020: 2020 2020 2023 7365 6c66 2e6d 6174 7269       #self.matri
+00004030: 7856 6965 7720 3d20 4d61 7472 6978 5669  xView = MatrixVi
+00004040: 6577 6572 2873 656c 6629 0d0a 2020 2020  ewer(self)..    
+00004050: 2020 2020 7365 6c66 2e6d 6f76 6555 7042      self.moveUpB
+00004060: 746e 2e70 7265 7373 6564 2e63 6f6e 6e65  tn.pressed.conne
+00004070: 6374 2873 656c 662e 6d6f 7665 5f75 7029  ct(self.move_up)
+00004080: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
+00004090: 6f76 6544 6e42 746e 2e70 7265 7373 6564  oveDnBtn.pressed
+000040a0: 2e63 6f6e 6e65 6374 2873 656c 662e 6d6f  .connect(self.mo
+000040b0: 7665 5f64 6f77 6e29 0d0a 0d0a 2020 2020  ve_down)....    
+000040c0: 2020 2020 7365 6c66 2e66 696c 7465 7243      self.filterC
+000040d0: 6f6d 626f 2e69 7465 6d53 656c 6563 7469  ombo.itemSelecti
+000040e0: 6f6e 4368 616e 6765 642e 636f 6e6e 6563  onChanged.connec
+000040f0: 7428 6c61 6d62 6461 3a20 7365 6c66 2e64  t(lambda: self.d
+00004100: 7261 7763 616e 7661 732e 7570 6461 7465  rawcanvas.update
+00004110: 2829 290d 0a20 2020 2020 2020 2073 656c  ())..        sel
+00004120: 662e 636c 6561 7246 696c 7465 7242 7574  f.clearFilterBut
+00004130: 746f 6e2e 7072 6573 7365 642e 636f 6e6e  ton.pressed.conn
+00004140: 6563 7428 7365 6c66 2e63 6c65 6172 5f66  ect(self.clear_f
+00004150: 696c 7465 7229 0d0a 0d0a 2020 2020 2020  ilter)....      
+00004160: 2020 7365 6c66 2e6d 6169 6e6c 6f6f 705f    self.mainloop_
+00004170: 6564 6974 6f72 203d 204d 6169 6e4c 6f6f  editor = MainLoo
+00004180: 7045 6469 746f 7228 7365 6c66 2c73 656c  pEditor(self,sel
+00004190: 662e 6d61 696e 6c6f 6f70 5f73 7472 290d  f.mainloop_str).
+000041a0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+000041b0: 696e 6c6f 6f70 5f65 6469 746f 722e 7368  inloop_editor.sh
+000041c0: 6f77 2829 0d0a 2020 2020 2020 2020 7365  ow()..        se
+000041d0: 6c66 2e6d 6169 6e6c 6f6f 705f 6564 6974  lf.mainloop_edit
+000041e0: 6f72 2e68 6964 6528 290d 0a0d 0a0d 0a20  or.hide()...... 
+000041f0: 2020 2020 2020 2073 656c 662e 7468 656d         self.them
+00004200: 655f 6d61 6e61 6765 722e 7468 656d 6520  e_manager.theme 
+00004210: 3d20 2264 6172 6b22 0d0a 2020 2020 2020  = "dark"..      
+00004220: 2020 7365 6c66 2e73 7769 7463 685f 7468    self.switch_th
+00004230: 656d 6528 290d 0a0d 0a0d 0a20 2020 2020  eme()......     
+00004240: 2020 2073 656c 662e 7468 656d 655f 6d61     self.theme_ma
+00004250: 6e61 6765 722e 7265 7374 6f72 6528 290d  nager.restore().
+00004260: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00004270: 7377 6974 6368 5f74 6865 6d65 2829 0d0a  switch_theme()..
+00004280: 2020 2020 2020 2020 7365 6c66 2e73 7769          self.swi
+00004290: 7463 685f 7468 656d 6528 290d 0a0d 0a0d  tch_theme().....
+000042a0: 0a20 2020 2064 6566 2073 6561 7263 685f  .    def search_
+000042b0: 646c 6728 7365 6c66 293a 0d0a 2020 2020  dlg(self):..    
+000042c0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000042d0: 2073 6561 7263 6820 666f 7220 616e 2061   search for an a
+000042e0: 6765 6e74 0d0a 2020 2020 2020 2020 2222  gent..        ""
+000042f0: 220d 0a0d 0a20 2020 2020 2020 2069 6620  "....        if 
+00004300: 5365 6172 6368 4469 616c 6f67 2e69 6e73  SearchDialog.ins
+00004310: 7461 6e63 6520 6973 204e 6f6e 653a 0d0a  tance is None:..
+00004320: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00004330: 646c 6720 3d20 5365 6172 6368 4469 616c  dlg = SearchDial
+00004340: 6f67 2873 656c 6629 0d0a 2020 2020 2020  og(self)..      
+00004350: 2020 2020 2020 6e65 775f 646c 672e 7368        new_dlg.sh
+00004360: 6f77 2829 0d0a 2020 2020 2020 2020 2320  ow()..        # 
+00004370: 7365 6c66 2e6e 6f74 6966 7928 2254 6573  self.notify("Tes
+00004380: 7420 5365 6172 6368 222c 2074 6974 6c65  t Search", title
+00004390: 3d22 5365 6172 6368 2041 6765 6e74 2229  ="Search Agent")
+000043a0: 0d0a 0d0a 2020 2020 6465 6620 6368 616e  ....    def chan
+000043b0: 6765 5f63 6f6c 6f72 2873 656c 662c 7768  ge_color(self,wh
+000043c0: 6963 6829 3a0d 0a20 2020 2020 2020 2063  ich):..        c
+000043d0: 6f6c 6f72 203d 2051 436f 6c6f 7244 6961  olor = QColorDia
+000043e0: 6c6f 672e 6765 7443 6f6c 6f72 2829 0d0a  log.getColor()..
+000043f0: 0d0a 2020 2020 2020 2020 6966 2063 6f6c  ..        if col
+00004400: 6f72 2e69 7356 616c 6964 2829 3a0d 0a20  or.isValid():.. 
+00004410: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00004420: 2822 4348 414e 4745 2043 4f4c 4f52 222c  ("CHANGE COLOR",
+00004430: 2077 6869 6368 2c20 636f 6c6f 722e 6e61   which, color.na
+00004440: 6d65 2829 290d 0a0d 0a20 2020 2020 2020  me())....       
+00004450: 2020 2020 2062 746e 5f74 6162 6c65 203d       btn_table =
+00004460: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+00004470: 2020 2020 313a 2073 656c 662e 6263 312c      1: self.bc1,
+00004480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004490: 2020 323a 2073 656c 662e 6263 322c 0d0a    2: self.bc2,..
+000044a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000044b0: 333a 2073 656c 662e 6263 332c 0d0a 2020  3: self.bc3,..  
+000044c0: 2020 2020 2020 2020 2020 2020 2020 343a                4:
+000044d0: 2073 656c 662e 6263 342c 0d0a 2020 2020   self.bc4,..    
+000044e0: 2020 2020 2020 2020 2020 2020 353a 2073              5: s
+000044f0: 656c 662e 6263 352c 0d0a 2020 2020 2020  elf.bc5,..      
+00004500: 2020 2020 2020 2020 2020 363a 2073 656c            6: sel
+00004510: 662e 6263 362c 0d0a 2020 2020 2020 2020  f.bc6,..        
+00004520: 2020 2020 2020 2020 373a 2073 656c 662e          7: self.
+00004530: 6263 372c 0d0a 2020 2020 2020 2020 2020  bc7,..          
+00004540: 2020 2020 2020 383a 2073 656c 662e 6263        8: self.bc
+00004550: 382c 0d0a 2020 2020 2020 2020 2020 2020  8,..            
+00004560: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
+00004570: 2062 746e 5f74 6162 6c65 5b77 6869 6368   btn_table[which
+00004580: 5d2e 7365 7453 7479 6c65 5368 6565 7428  ].setStyleSheet(
+00004590: 2262 6163 6b67 726f 756e 642d 636f 6c6f  "background-colo
+000045a0: 723a 2072 6762 2825 732c 2573 2c25 7329  r: rgb(%s,%s,%s)
+000045b0: 3b22 2528 636f 6c6f 722e 7265 6428 292c  ;"%(color.red(),
+000045c0: 636f 6c6f 722e 6772 6565 6e28 292c 636f  color.green(),co
+000045d0: 6c6f 722e 626c 7565 2829 2929 0d0a 2020  lor.blue()))..  
+000045e0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+000045f0: 6865 6d65 5f6d 616e 6167 6572 2e63 6f6c  heme_manager.col
+00004600: 6f72 735b 7365 6c66 2e74 6865 6d65 5f6d  ors[self.theme_m
+00004610: 616e 6167 6572 2e74 6865 6d65 5d5b 7768  anager.theme][wh
+00004620: 6963 682d 315d 203d 2063 6f6c 6f72 0d0a  ich-1] = color..
+00004630: 0d0a 0d0a 2020 2020 6465 6620 636c 6561  ....    def clea
+00004640: 725f 6669 6c74 6572 2873 656c 6629 3a0d  r_filter(self):.
+00004650: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
+00004660: 6c74 6572 436f 6d62 6f2e 636c 6561 7253  lterCombo.clearS
+00004670: 656c 6563 7469 6f6e 2829 0d0a 0d0a 2020  election()....  
+00004680: 2020 6465 6620 6765 6e5f 6261 6c61 6e63    def gen_balanc
+00004690: 655f 6d61 7472 6978 2873 656c 662c 6465  e_matrix(self,de
+000046a0: 7461 696c 6564 3d54 7275 6529 3a0d 0a20  tailed=True):.. 
+000046b0: 2020 2020 2020 2023 2067 656e 6572 6174         # generat
+000046c0: 6573 2061 2062 616c 616e 6365 2073 6865  es a balance she
+000046d0: 6574 206d 6174 7269 7820 666f 7220 616c  et matrix for al
+000046e0: 6c20 6167 656e 7473 0d0a 2020 2020 2020  l agents..      
+000046f0: 2020 2320 3a70 6172 616d 3a20 6465 7461    # :param: deta
+00004700: 696c 6564 3a20 7368 6f77 206c 6172 6765  iled: show large
+00004710: 206d 6174 7269 7820 6f72 2061 6767 7265   matrix or aggre
+00004720: 6761 7465 2069 6e64 6976 6964 7561 6c20  gate individual 
+00004730: 726f 7773 3f0d 0a0d 0a20 2020 2020 2020  rows?....       
+00004740: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00004750: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
+00004760: 6e63 6520 3d20 2064 6566 6175 6c74 6469  nce =  defaultdi
+00004770: 6374 286c 616d 6264 613a 207b 2249 7465  ct(lambda: {"Ite
+00004780: 6d22 3a5b 5d2c 2241 7373 6574 7322 3a5b  m":[],"Assets":[
+00004790: 5d2c 224c 6961 6269 6c69 7469 6573 223a  ],"Liabilities":
+000047a0: 205b 5d7d 290d 0a0d 0a0d 0a20 2020 2020   []})......     
+000047b0: 2020 2020 2020 2066 6f72 2066 696c 6564         for filed
+000047c0: 6174 6120 696e 2073 656c 662e 656e 7472  ata in self.entr
+000047d0: 795f 6461 7461 3a0d 0a0d 0a20 2020 2020  y_data:....     
+000047e0: 2020 2020 2020 2020 2020 2061 6765 6e74             agent
+000047f0: 3120 3d20 6669 6c65 6461 7461 5b22 6167  1 = filedata["ag
+00004800: 656e 7431 225d 2e73 7472 6970 2829 0d0a  ent1"].strip()..
+00004810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004820: 6167 656e 7432 203d 2066 696c 6564 6174  agent2 = filedat
+00004830: 615b 2261 6765 6e74 3222 5d2e 7374 7269  a["agent2"].stri
+00004840: 7028 290d 0a0d 0a20 2020 2020 2020 2020  p()....         
+00004850: 2020 2020 2020 2061 7373 6574 7331 203d         assets1 =
+00004860: 2066 696c 6564 6174 615b 2261 3122 5d0d   filedata["a1"].
+00004870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004880: 206c 6961 6273 3120 3d20 6669 6c65 6461   liabs1 = fileda
+00004890: 7461 5b22 6c31 225d 2023 2b20 6669 6c65  ta["l1"] #+ file
+000048a0: 6461 7461 5b22 6531 225d 202b 2022 5c6e  data["e1"] + "\n
+000048b0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+000048c0: 2020 2020 2061 7373 6574 7332 203d 2066       assets2 = f
+000048d0: 696c 6564 6174 615b 2261 3222 5d0d 0a20  iledata["a2"].. 
+000048e0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+000048f0: 6961 6273 3220 3d20 6669 6c65 6461 7461  iabs2 = filedata
+00004900: 5b22 6c32 225d 2023 2b20 6669 6c65 6461  ["l2"] #+ fileda
+00004910: 7461 5b22 6532 225d 202b 2022 5c6e 220d  ta["e2"] + "\n".
+00004920: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00004930: 2020 2069 6620 6465 7461 696c 6564 3a0d     if detailed:.
+00004940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004950: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
+00004960: 2028 2573 295c 6e22 2025 2066 696c 6564   (%s)\n" % filed
+00004970: 6174 615b 2273 7562 6a65 6374 225d 0d0a  ata["subject"]..
+00004980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004990: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000049a0: 2020 2020 2020 2020 2020 2073 7562 6a65             subje
+000049b0: 6374 203d 2022 5c6e 220d 0a20 2020 2020  ct = "\n"..     
+000049c0: 2020 2020 2020 2020 2020 206d 795f 6173             my_as
+000049d0: 7365 7473 3120 3d20 5b5d 0d0a 2020 2020  sets1 = []..    
+000049e0: 2020 2020 2020 2020 2020 2020 6d79 5f6c              my_l
+000049f0: 6961 6273 3120 3d20 5b5d 0d0a 2020 2020  iabs1 = []..    
+00004a00: 2020 2020 2020 2020 2020 2020 6d79 5f61              my_a
+00004a10: 7373 6574 7332 203d 205b 5d0d 0a20 2020  ssets2 = []..   
+00004a20: 2020 2020 2020 2020 2020 2020 206d 795f               my_
+00004a30: 6c69 6162 7332 203d 205b 5d0d 0a0d 0a20  liabs2 = [].... 
+00004a40: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00004a50: 6f72 2069 2069 6e20 6173 7365 7473 312e  or i in assets1.
+00004a60: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
+00004a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a80: 2020 6966 2069 2e73 7472 6970 2829 2e73    if i.strip().s
+00004a90: 7461 7274 7377 6974 6828 222b 2229 3a0d  tartswith("+"):.
+00004aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004ab0: 2020 2020 2020 2020 206d 795f 6974 656d           my_item
+00004ac0: 203d 2069 2e73 706c 6974 2822 2b22 295b   = i.split("+")[
+00004ad0: 315d 202b 2073 7562 6a65 6374 0d0a 2020  1] + subject..  
+00004ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004af0: 2020 2020 2020 7369 676e 203d 2022 2b22        sign = "+"
+00004b00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004b10: 2020 2020 2020 656c 6966 2069 2e73 7472        elif i.str
+00004b20: 6970 2829 2e73 7461 7274 7377 6974 6828  ip().startswith(
+00004b30: 222d 2229 3a0d 0a20 2020 2020 2020 2020  "-"):..         
+00004b40: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00004b50: 795f 6974 656d 203d 2069 2e73 706c 6974  y_item = i.split
+00004b60: 2822 2d22 295b 315d 202b 2073 7562 6a65  ("-")[1] + subje
+00004b70: 6374 0d0a 2020 2020 2020 2020 2020 2020  ct..            
+00004b80: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00004b90: 203d 2022 2d22 0d0a 2020 2020 2020 2020   = "-"..        
+00004ba0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00004bb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004bc0: 2020 2020 2020 2020 2020 2062 7265 616b             break
+00004bd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004be0: 2020 2020 2020 636f 6d62 696e 6564 5f62        combined_b
+00004bf0: 616c 616e 6365 5b61 6765 6e74 315d 5b22  alance[agent1]["
+00004c00: 4974 656d 225d 2e61 7070 656e 6428 6d79  Item"].append(my
+00004c10: 5f69 7465 6d29 0d0a 2020 2020 2020 2020  _item)..        
+00004c20: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+00004c30: 696e 6564 5f62 616c 616e 6365 5b61 6765  ined_balance[age
+00004c40: 6e74 315d 5b22 4173 7365 7473 225d 2e61  nt1]["Assets"].a
+00004c50: 7070 656e 6428 7369 676e 2b66 696c 6564  ppend(sign+filed
+00004c60: 6174 615b 2271 7561 6e74 6974 7922 5d2b  ata["quantity"]+
+00004c70: 225c 6e22 290d 0a20 2020 2020 2020 2020  "\n")..         
+00004c80: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+00004c90: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
+00004ca0: 7431 5d5b 224c 6961 6269 6c69 7469 6573  t1]["Liabilities
+00004cb0: 225d 2e61 7070 656e 6428 2222 290d 0a0d  "].append("")...
+00004cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004cd0: 2066 6f72 2069 2069 6e20 6173 7365 7473   for i in assets
+00004ce0: 322e 7370 6c69 7428 225c 6e22 293a 0d0a  2.split("\n"):..
+00004cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d00: 2020 2020 6966 2069 2e73 7472 6970 2829      if i.strip()
+00004d10: 2e73 7461 7274 7377 6974 6828 222b 2229  .startswith("+")
+00004d20: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004d30: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
+00004d40: 656d 203d 2069 2e73 706c 6974 2822 2b22  em = i.split("+"
+00004d50: 295b 315d 202b 2073 7562 6a65 6374 0d0a  )[1] + subject..
+00004d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d70: 2020 2020 2020 2020 7369 676e 203d 2022          sign = "
+00004d80: 2b22 0d0a 2020 2020 2020 2020 2020 2020  +"..            
+00004d90: 2020 2020 2020 2020 656c 6966 2069 2e73          elif i.s
+00004da0: 7472 6970 2829 2e73 7461 7274 7377 6974  trip().startswit
+00004db0: 6828 222d 2229 3a0d 0a20 2020 2020 2020  h("-"):..       
+00004dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004dd0: 206d 795f 6974 656d 203d 2069 2e73 706c   my_item = i.spl
+00004de0: 6974 2822 2d22 295b 315d 202b 2073 7562  it("-")[1] + sub
+00004df0: 6a65 6374 0d0a 2020 2020 2020 2020 2020  ject..          
+00004e00: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00004e10: 676e 203d 2022 2d22 0d0a 2020 2020 2020  gn = "-"..      
+00004e20: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00004e30: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00004e40: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+00004e50: 616b 0d0a 2020 2020 2020 2020 2020 2020  ak..            
+00004e60: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00004e70: 5f62 616c 616e 6365 5b61 6765 6e74 325d  _balance[agent2]
+00004e80: 5b22 4974 656d 225d 2e61 7070 656e 6428  ["Item"].append(
+00004e90: 6d79 5f69 7465 6d29 0d0a 2020 2020 2020  my_item)..      
+00004ea0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00004eb0: 6d62 696e 6564 5f62 616c 616e 6365 5b61  mbined_balance[a
+00004ec0: 6765 6e74 325d 5b22 4173 7365 7473 225d  gent2]["Assets"]
+00004ed0: 2e61 7070 656e 6428 7369 676e 2b66 696c  .append(sign+fil
+00004ee0: 6564 6174 615b 2271 7561 6e74 6974 7922  edata["quantity"
+00004ef0: 5d2b 225c 6e22 290d 0a20 2020 2020 2020  ]+"\n")..       
+00004f00: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+00004f10: 6269 6e65 645f 6261 6c61 6e63 655b 6167  bined_balance[ag
+00004f20: 656e 7432 5d5b 224c 6961 6269 6c69 7469  ent2]["Liabiliti
+00004f30: 6573 225d 2e61 7070 656e 6428 2222 290d  es"].append("").
+00004f40: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00004f50: 2020 2020 2066 6f72 206a 2069 6e20 6c69       for j in li
+00004f60: 6162 7331 2e73 706c 6974 2822 5c6e 2229  abs1.split("\n")
+00004f70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004f80: 2020 2020 2020 2069 6620 6a2e 7374 7269         if j.stri
+00004f90: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
+00004fa0: 2b22 293a 0d0a 2020 2020 2020 2020 2020  +"):..          
+00004fb0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+00004fc0: 5f69 7465 6d20 3d20 6a2e 7370 6c69 7428  _item = j.split(
+00004fd0: 222b 2229 5b31 5d20 2b20 7375 626a 6563  "+")[1] + subjec
+00004fe0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00004ff0: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
+00005000: 3d20 222b 220d 0a0d 0a20 2020 2020 2020  = "+"....       
+00005010: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00005020: 6620 6a2e 7374 7269 7028 292e 7374 6172  f j.strip().star
+00005030: 7473 7769 7468 2822 2d22 293a 0d0a 2020  tswith("-"):..  
+00005040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005050: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
+00005060: 6a2e 7370 6c69 7428 222d 2229 5b31 5d20  j.split("-")[1] 
+00005070: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
+00005080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005090: 2020 2073 6967 6e20 3d20 222d 220d 0a20     sign = "-".. 
 000050a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050b0: 2020 2020 2020 2020 2061 6767 7265 6761           aggrega
-000050c0: 7469 6f6e 5f66 756e 6374 696f 6e73 5b63  tion_functions[c
-000050d0: 6f6c 5d20 3d20 2266 6972 7374 220d 0a20  ol] = "first".. 
-000050e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050f0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00005100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005110: 2020 2020 2020 2020 2020 6167 6772 6567            aggreg
-00005120: 6174 696f 6e5f 6675 6e63 7469 6f6e 735b  ation_functions[
-00005130: 636f 6c5d 203d 2022 7375 6d22 0d0a 2020  col] = "sum"..  
-00005140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005150: 2020 6476 203d 2064 762e 6772 6f75 7062    dv = dv.groupb
-00005160: 7928 6476 5b27 4974 656d 275d 292e 6167  y(dv['Item']).ag
-00005170: 6772 6567 6174 6528 6167 6772 6567 6174  gregate(aggregat
-00005180: 696f 6e5f 6675 6e63 7469 6f6e 7329 0d0a  ion_functions)..
-00005190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000051a0: 2020 2020 6476 203d 2064 762e 6472 6f70      dv = dv.drop
-000051b0: 2863 6f6c 756d 6e73 3d22 4974 656d 2229  (columns="Item")
-000051c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000051d0: 2020 2020 6466 732e 6170 7065 6e64 2870      dfs.append(p
-000051e0: 642e 4461 7461 4672 616d 6528 6476 2929  d.DataFrame(dv))
-000051f0: 0d0a 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
-00005200: 2020 6466 203d 2070 642e 636f 6e63 6174    df = pd.concat
-00005210: 2864 6673 2c61 7869 733d 3129 2023 2c6b  (dfs,axis=1) #,k
-00005220: 6579 7320 3d63 6f6d 6269 6e65 645f 6261  eys =combined_ba
-00005230: 6c61 6e63 652e 6b65 7973 2829 290d 0a20  lance.keys()).. 
-00005240: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00005250: 2864 662e 746f 5f73 7472 696e 6728 2929  (df.to_string())
-00005260: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
-00005270: 203d 2064 662e 7265 706c 6163 6528 6e70   = df.replace(np
-00005280: 2e6e 616e 2c22 2229 0d0a 0d0a 0d0a 0d0a  .nan,"")........
-00005290: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-000052a0: 6c20 3d20 5061 6e64 6173 4d6f 6465 6c28  l = PandasModel(
-000052b0: 6466 290d 0a20 2020 2020 2020 2020 2020  df)..           
-000052c0: 206d 7669 6577 203d 204d 6174 7269 7856   mview = MatrixV
-000052d0: 6965 7765 7228 6d6f 6465 6c2c 7061 7265  iewer(model,pare
-000052e0: 6e74 3d73 656c 6629 0d0a 0d0a 2020 2020  nt=self)....    
-000052f0: 2020 2020 2020 2020 2320 6d76 6965 772e          # mview.
-00005300: 7765 6256 6965 772e 7365 7448 746d 6c28  webView.setHtml(
-00005310: 6466 5f68 746d 6c29 0d0a 2020 2020 2020  df_html)..      
-00005320: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
-00005330: 662e 7465 7374 5f6d 6f64 653a 0d0a 2020  f.test_mode:..  
-00005340: 2020 2020 2020 2020 2020 2020 2020 6d76                mv
-00005350: 6965 772e 7368 6f77 2829 0d0a 0d0a 2020  iew.show()....  
-00005360: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00005370: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00005380: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-00005390: 6f74 6966 7928 7469 746c 653d 2245 7272  otify(title="Err
-000053a0: 6f72 222c 6d65 7373 6167 653d 2245 7272  or",message="Err
-000053b0: 6f72 3a22 202b 2073 7472 2865 2929 0d0a  or:" + str(e))..
-000053c0: 0d0a 0d0a 2020 2020 6465 6620 6564 6974  ....    def edit
-000053d0: 5f6d 6169 6e6c 6f6f 7028 7365 6c66 293a  _mainloop(self):
-000053e0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-000053f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00005400: 7428 2273 656c 662e 6d61 696e 6c6f 6f70  t("self.mainloop
-00005410: 5f73 7472 222c 7365 6c66 2e6d 6169 6e6c  _str",self.mainl
-00005420: 6f6f 705f 7374 7229 0d0a 2020 2020 2020  oop_str)..      
-00005430: 2020 2020 2020 6c69 6e65 7320 3d20 7365        lines = se
-00005440: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 720d  lf.mainloop_str.
-00005450: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
-00005460: 795f 6564 6974 203d 204d 6169 6e4c 6f6f  y_edit = MainLoo
-00005470: 7045 6469 746f 7228 7061 7265 6e74 3d73  pEditor(parent=s
-00005480: 656c 662c 2074 6578 743d 6c69 6e65 7329  elf, text=lines)
-00005490: 0d0a 2020 2020 2020 2020 2020 2020 6d79  ..            my
-000054a0: 5f65 6469 742e 7365 7453 7479 6c65 5368  _edit.setStyleSh
-000054b0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-000054c0: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-000054d0: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-000054e0: 2020 2020 2020 2020 2020 2020 6d79 5f65              my_e
-000054f0: 6469 742e 7365 7453 7479 6c65 5368 6565  dit.setStyleShee
-00005500: 7428 7365 6c66 2e74 6865 6d65 5f6d 616e  t(self.theme_man
-00005510: 6167 6572 2e67 6574 5f73 7479 6c65 7368  ager.get_stylesh
-00005520: 6565 7428 226d 6169 6e22 2929 0d0a 0d0a  eet("main"))....
-00005530: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00005540: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
-00005550: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00005560: 2e6e 6f74 6966 7928 7374 7228 6529 2c20  .notify(str(e), 
-00005570: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
-00005580: 0d0a 2020 2020 6465 6620 7265 7374 6f72  ..    def restor
-00005590: 655f 6f72 6967 696e 616c 5f73 697a 6528  e_original_size(
-000055a0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000055b0: 7365 6c66 2e73 6574 4669 7865 6453 697a  self.setFixedSiz
-000055c0: 6528 3138 3231 2c31 3031 3029 0d0a 2020  e(1821,1010)..  
-000055d0: 2020 2020 2020 7365 6c66 2e73 6574 4d61        self.setMa
-000055e0: 7869 6d75 6d53 697a 6528 3430 3030 302c  ximumSize(40000,
-000055f0: 3430 3030 3029 0d0a 0d0a 2020 2020 6465  40000)....    de
-00005600: 6620 666c 6970 5f68 6569 6768 7428 7365  f flip_height(se
-00005610: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
-00005620: 2073 656c 662e 666c 6970 7065 643a 0d0a   self.flipped:..
-00005630: 2020 2020 2020 2020 2020 2020 5720 3d20              W = 
-00005640: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
-00005650: 7279 2829 2e77 6964 7468 2829 0d0a 2020  ry().width()..  
-00005660: 2020 2020 2020 2020 2020 4820 3d20 7365            H = se
-00005670: 6c66 2e66 7261 6d65 4765 6f6d 6574 7279  lf.frameGeometry
-00005680: 2829 2e68 6569 6768 7428 290d 0a0d 0a20  ().height().... 
-00005690: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000056a0: 7365 744d 696e 696d 756d 5369 7a65 2873  setMinimumSize(s
-000056b0: 656c 662e 6c61 7374 5f77 6964 7468 2c73  elf.last_width,s
-000056c0: 656c 662e 6c61 7374 5f68 6569 6768 7429  elf.last_height)
-000056d0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000056e0: 7365 6c66 2e73 6574 4d61 7869 6d75 6d53  self.setMaximumS
-000056f0: 697a 6528 7365 6c66 2e6c 6173 745f 7769  ize(self.last_wi
-00005700: 6474 682c 7365 6c66 2e6c 6173 745f 6865  dth,self.last_he
-00005710: 6967 6874 290d 0a20 2020 2020 2020 2020  ight)..         
-00005720: 2020 2073 656c 662e 7365 744d 6178 696d     self.setMaxim
-00005730: 756d 5369 7a65 2834 3030 3030 2c34 3030  umSize(40000,400
-00005740: 3030 290d 0a20 2020 2020 2020 2020 2020  00)..           
-00005750: 2023 2073 656c 662e 7365 744d 696e 696d   # self.setMinim
-00005760: 756d 5369 7a65 2834 3030 2c34 3030 290d  umSize(400,400).
-00005770: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00005780: 2057 203d 2073 656c 662e 6672 616d 6547   W = self.frameG
-00005790: 656f 6d65 7472 7928 292e 7769 6474 6828  eometry().width(
-000057a0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-000057b0: 2073 656c 662e 466c 6970 4865 6967 6874   self.FlipHeight
-000057c0: 4275 7474 6f6e 2e73 6574 4765 6f6d 6574  Button.setGeomet
-000057d0: 7279 2869 6e74 2857 292d 3831 2d32 352c  ry(int(W)-81-25,
-000057e0: 352c 3831 2c32 3129 0d0a 0d0a 2020 2020  5,81,21)....    
-000057f0: 2020 2020 2020 2020 7365 6c66 2e66 6c69          self.fli
-00005800: 7070 6564 203d 2046 616c 7365 0d0a 2020  pped = False..  
-00005810: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00005820: 2020 2020 2020 2020 2057 203d 2073 656c           W = sel
-00005830: 662e 6672 616d 6547 656f 6d65 7472 7928  f.frameGeometry(
-00005840: 292e 7769 6474 6828 290d 0a20 2020 2020  ).width()..     
-00005850: 2020 2020 2020 2048 203d 2073 656c 662e         H = self.
-00005860: 6672 616d 6547 656f 6d65 7472 7928 292e  frameGeometry().
-00005870: 6865 6967 6874 2829 0d0a 2020 2020 2020  height()..      
-00005880: 2020 2020 2020 7365 6c66 2e6c 6173 745f        self.last_
-00005890: 7769 6474 6820 3d20 570d 0a20 2020 2020  width = W..     
-000058a0: 2020 2020 2020 2073 656c 662e 6c61 7374         self.last
-000058b0: 5f68 6569 6768 7420 3d20 480d 0a0d 0a20  _height = H.... 
-000058c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000058d0: 7365 7446 6978 6564 5369 7a65 2838 3030  setFixedSize(800
-000058e0: 2c37 3029 0d0a 0d0a 2020 2020 2020 2020  ,70)....        
-000058f0: 2020 2020 2357 203d 2073 656c 662e 6672      #W = self.fr
-00005900: 616d 6547 656f 6d65 7472 7928 292e 7769  ameGeometry().wi
-00005910: 6474 6828 290d 0a20 2020 2020 2020 2020  dth()..         
-00005920: 2020 2023 7365 6c66 2e46 6c69 7048 6569     #self.FlipHei
-00005930: 6768 7442 7574 746f 6e2e 7365 7447 656f  ghtButton.setGeo
-00005940: 6d65 7472 7928 696e 7428 5729 2d38 312d  metry(int(W)-81-
-00005950: 3235 2c35 2c38 312c 3231 290d 0a0d 0a20  25,5,81,21).... 
-00005960: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005970: 666c 6970 7065 6420 3d20 5472 7565 0d0a  flipped = True..
-00005980: 0d0a 0d0a 2020 2020 6465 6620 6368 616e  ....    def chan
-00005990: 6765 5f61 6c65 7274 2873 656c 6629 3a0d  ge_alert(self):.
-000059a0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-000059b0: 6465 5f63 6861 6e67 6573 203d 2054 7275  de_changes = Tru
-000059c0: 650d 0a20 2020 2020 2020 2023 2073 656c  e..        # sel
-000059d0: 662e 7564 7061 7465 4275 7474 6f6e 2e73  f.udpateButton.s
-000059e0: 6574 5465 7874 2822 5570 6461 7465 2056  etText("Update V
-000059f0: 616c 7565 7320 2a22 290d 0a0d 0a20 2020  alues *")....   
-00005a00: 2064 6566 2073 686f 775f 6f75 7470 7574   def show_output
-00005a10: 5f64 6973 706c 6179 2873 656c 6629 3a0d  _display(self):.
-00005a20: 0a20 2020 2020 2020 2023 2073 686f 7773  .        # shows
-00005a30: 2074 6865 206c 6f67 6765 7220 6469 7370   the logger disp
-00005a40: 6c61 7920 666f 7220 6f75 7470 7574 2071  lay for output q
-00005a50: 7561 6e74 6974 6965 730d 0a0d 0a20 2020  uantities....   
-00005a60: 2020 2020 2074 7279 3a0d 0a0d 0a20 2020       try:....   
-00005a70: 2020 2020 2020 2020 2070 6174 6820 3d20           path = 
-00005a80: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
-00005a90: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
-00005aa0: 6529 2b22 2f6f 7574 7075 742f 220d 0a20  e)+"/output/".. 
-00005ab0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00005ac0: 2822 5b44 4542 5547 204d 4553 5341 4745  ("[DEBUG MESSAGE
-00005ad0: 5d20 6f70 656e 206f 7574 7075 7420 6469  ] open output di
-00005ae0: 7370 6c61 7920 696e 2070 6174 6822 2c20  splay in path", 
-00005af0: 7061 7468 290d 0a0d 0a20 2020 2020 2020  path)....       
-00005b00: 2020 2020 206f 7574 7075 745f 6469 7370       output_disp
-00005b10: 6c61 7920 3d20 4f75 7470 7574 4469 7370  lay = OutputDisp
-00005b20: 6c61 7928 7365 6c66 2c70 6174 6820 3d20  lay(self,path = 
-00005b30: 7061 7468 290d 0a20 2020 2020 2020 2065  path)..        e
-00005b40: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-00005b50: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-00005b60: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
-00005b70: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
-00005b80: 6f72 2229 0d0a 0d0a 0d0a 0d0a 2020 2020  or")........    
-00005b90: 6465 6620 7361 7665 5f61 6e64 5f62 7569  def save_and_bui
-00005ba0: 6c64 2873 656c 6629 3a0d 0a0d 0a20 2020  ld(self):....   
-00005bb0: 2020 2020 2023 202d 2d20 6372 6561 7465       # -- create
-00005bc0: 206e 6577 2073 7461 7475 7320 7369 676e   new status sign
-00005bd0: 616c 0d0a 0d0a 2020 2020 2020 2020 7365  al....        se
-00005be0: 6c66 2e77 6f72 6b65 722e 7377 6974 6368  lf.worker.switch
-00005bf0: 5f73 7461 7465 2829 0d0a 2020 2020 2020  _state()..      
-00005c00: 2020 2320 2d2d 2d0d 0a0d 0a20 2020 2020    # ---....     
-00005c10: 2020 2073 656c 662e 7361 7665 2829 0d0a     self.save()..
-00005c20: 0d0a 2020 2020 2020 2020 6120 3d20 5b5d  ..        a = []
-00005c30: 0d0a 2020 2020 2020 2020 666f 7220 6365  ..        for ce
-00005c40: 2069 6e20 436f 6465 4564 6974 6f72 2e69   in CodeEditor.i
-00005c50: 6e73 7461 6e63 6573 2e76 616c 7565 7328  nstances.values(
-00005c60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00005c70: 6e61 6d65 7320 3d20 6365 2e73 6176 655f  names = ce.save_
-00005c80: 616e 645f 6275 696c 6428 290d 0a20 2020  and_build()..   
-00005c90: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
-00005ca0: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
-00005cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005cc0: 612e 6170 7065 6e64 286e 616d 6573 290d  a.append(names).
-00005cd0: 0a0d 0a20 2020 2020 2020 2066 6f72 2061  ...        for a
-00005ce0: 6920 696e 2061 3a0d 0a20 2020 2020 2020  i in a:..       
-00005cf0: 2020 2020 2069 6620 6169 5b30 5d20 696e       if ai[0] in
-00005d00: 2043 6f64 6545 6469 746f 722e 696e 7374   CodeEditor.inst
-00005d10: 616e 6365 733a 0d0a 2020 2020 2020 2020  ances:..        
-00005d20: 2020 2020 2020 2020 436f 6465 4564 6974          CodeEdit
-00005d30: 6f72 2e69 6e73 7461 6e63 6573 5b61 695b  or.instances[ai[
-00005d40: 305d 5d20 3d20 4e6f 6e65 0d0a 2020 2020  0]] = None..    
-00005d50: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
-00005d60: 436f 6465 4564 6974 6f72 2e69 6e73 7461  CodeEditor.insta
-00005d70: 6e63 6573 5b61 695b 305d 5d0d 0a20 2020  nces[ai[0]]..   
-00005d80: 2020 2020 2020 2020 2043 6f64 6545 6469           CodeEdi
-00005d90: 746f 722e 696e 7374 616e 6365 735b 6169  tor.instances[ai
-00005da0: 5b31 5d5d 203d 2061 695b 325d 0d0a 0d0a  [1]] = ai[2]....
-00005db0: 2020 2020 2020 2020 7072 696e 7428 225c          print("\
-00005dc0: 6e4e 4557 2049 4e53 5441 4e43 4553 5c6e  nNEW INSTANCES\n
-00005dd0: 222c 2043 6f64 6545 6469 746f 722e 696e  ", CodeEditor.in
-00005de0: 7374 616e 6365 7329 0d0a 0d0a 0d0a 2020  stances)......  
-00005df0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00005e00: 2020 2020 2020 2020 7365 6c66 2e62 7569          self.bui
-00005e10: 6c64 5f70 726f 6a65 6374 2873 696c 656e  ld_project(silen
-00005e20: 743d 5472 7565 290d 0a20 2020 2020 2020  t=True)..       
-00005e30: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
-00005e40: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
-00005e50: 6528 2253 6176 6564 2022 202b 2073 656c  e("Saved " + sel
-00005e60: 662e 6375 7272 656e 745f 6669 6c65 290d  f.current_file).
-00005e70: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-00005e80: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00005e90: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00005ea0: 2073 656c 662e 6e6f 7469 6679 2873 7472   self.notify(str
-00005eb0: 2865 292c 7469 746c 653d 2245 7863 6570  (e),title="Excep
-00005ec0: 7469 6f6e 2229 0d0a 2020 2020 2020 2020  tion")..        
-00005ed0: 2020 2020 7072 696e 7428 7374 7228 6529      print(str(e)
-00005ee0: 290d 0a0d 0a0d 0a0d 0a20 2020 2064 6566  )........    def
-00005ef0: 2072 756e 5f70 726f 6a65 6374 2873 656c   run_project(sel
-00005f00: 6629 3a0d 0a0d 0a20 2020 2020 2020 2073  f):....        s
-00005f10: 656c 662e 7361 7665 5f61 6e64 5f62 7569  elf.save_and_bui
-00005f20: 6c64 2829 0d0a 0d0a 2020 2020 2020 2020  ld()....        
-00005f30: 2320 7365 6c66 2e73 686f 775f 6f75 7470  # self.show_outp
-00005f40: 7574 5f64 6973 706c 6179 2829 0d0a 0d0a  ut_display()....
-00005f50: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
-00005f60: 4375 7273 6f72 2851 742e 5761 6974 4375  Cursor(Qt.WaitCu
-00005f70: 7273 6f72 290d 0a0d 0a20 2020 2020 2020  rsor)....       
-00005f80: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00005f90: 2020 2023 2073 656c 662e 7461 6257 6964     # self.tabWid
-00005fa0: 6765 742e 7365 7443 7572 7265 6e74 496e  get.setCurrentIn
-00005fb0: 6465 7828 3129 0d0a 0d0a 2020 2020 2020  dex(1)....      
-00005fc0: 2020 2020 2020 2366 696c 656e 616d 6520        #filename 
-00005fd0: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00005fe0: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-00005ff0: 696c 6529 202b 2022 2f70 7974 686f 6e5f  ile) + "/python_
-00006000: 636f 6465 2f6d 6169 6e6c 6f6f 702e 7079  code/mainloop.py
-00006010: 220d 0a20 2020 2020 2020 2020 2020 2066  "..            f
-00006020: 696c 656e 616d 6520 3d20 6f73 2e70 6174  ilename = os.pat
-00006030: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
-00006040: 7572 7265 6e74 5f66 696c 6529 202b 2022  urrent_file) + "
-00006050: 2f72 756e 6e65 722e 7079 220d 0a20 2020  /runner.py"..   
-00006060: 2020 2020 2020 2020 2066 6f6c 6465 7220           folder 
-00006070: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00006080: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-00006090: 696c 6529 202b 2022 2f22 0d0a 0d0a 2020  ile) + "/"....  
-000060a0: 2020 2020 2020 2020 2020 6966 2022 2022            if " "
-000060b0: 2069 6e20 6669 6c65 6e61 6d65 206f 7220   in filename or 
-000060c0: 2220 2220 696e 2066 6f6c 6465 723a 0d0a  " " in folder:..
-000060d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060e0: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
-000060f0: 653d 2249 6e76 616c 6964 2066 696c 6520  e="Invalid file 
-00006100: 6e61 6d65 222c 206d 6573 7361 6765 3d22  name", message="
-00006110: 5468 6572 6520 6172 6520 7370 6163 6573  There are spaces
-00006120: 2069 6e20 796f 7572 2066 6f6c 6465 7220   in your folder 
-00006130: 6f72 2066 696c 6520 6e61 6d65 2e20 5468  or file name. Th
-00006140: 6973 206d 6967 6874 2063 6175 7365 2070  is might cause p
-00006150: 726f 626c 656d 732e 2229 0d0a 0d0a 2020  roblems.")....  
-00006160: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00006170: 226c 6f6f 6b75 7022 2c20 6669 6c65 6e61  "lookup", filena
-00006180: 6d65 2c20 2269 6e22 2c20 666f 6c64 6572  me, "in", folder
-00006190: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000061a0: 206f 6c64 5f64 6972 203d 206f 732e 6765   old_dir = os.ge
-000061b0: 7463 7764 2829 0d0a 2020 2020 2020 2020  tcwd()..        
-000061c0: 2020 2020 2320 7072 696e 7428 226f 6c64      # print("old
-000061d0: 5f64 6972 222c 6f6c 645f 6469 7229 0d0a  _dir",old_dir)..
-000061e0: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-000061f0: 2e63 6864 6972 2866 6f6c 6465 7229 0d0a  .chdir(folder)..
-00006200: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
-00006210: 3d20 2263 6f6e 6461 2061 6374 6976 6174  = "conda activat
-00006220: 6520 6174 7475 6e65 202f 6b20 7079 7468  e attune /k pyth
-00006230: 6f6e 2025 7322 2025 2066 696c 656e 616d  on %s" % filenam
-00006240: 650d 0a20 2020 2020 2020 2020 2020 2070  e..            p
-00006250: 7269 6e74 2822 434f 4d4d 414e 4422 2c20  rint("COMMAND", 
-00006260: 636d 6429 0d0a 2020 2020 2020 2020 2020  cmd)..          
-00006270: 2020 6f73 2e73 7973 7465 6d28 2273 7461    os.system("sta
-00006280: 7274 2063 6d64 2020 2020 2025 7322 2025  rt cmd     %s" %
-00006290: 2063 6d64 290d 0a0d 0a20 2020 2020 2020   cmd)....       
-000062a0: 2020 2020 206f 732e 6368 6469 7228 6f6c       os.chdir(ol
-000062b0: 645f 6469 7229 0d0a 0d0a 2020 2020 2020  d_dir)....      
-000062c0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-000062d0: 6f6e 2061 7320 653a 0d0a 0d0a 2020 2020  on as e:....    
-000062e0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-000062f0: 6966 7928 7374 7228 6529 2c74 6974 6c65  ify(str(e),title
-00006300: 3d22 2229 0d0a 2020 2020 2020 2020 2020  ="")..          
-00006310: 2020 7365 6c66 2e73 6574 4375 7273 6f72    self.setCursor
-00006320: 2851 742e 4172 726f 7743 7572 736f 7229  (Qt.ArrowCursor)
-00006330: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00006340: 2e73 6574 4375 7273 6f72 2851 742e 4172  .setCursor(Qt.Ar
-00006350: 726f 7743 7572 736f 7229 0d0a 0d0a 2020  rowCursor)....  
-00006360: 2020 6465 6620 6275 696c 645f 7072 6f6a    def build_proj
-00006370: 6563 7428 7365 6c66 2c73 696c 656e 743d  ect(self,silent=
-00006380: 4661 6c73 652c 6f76 6572 7772 6974 653d  False,overwrite=
-00006390: 4661 6c73 6529 3a0d 0a0d 0a20 2020 2020  False):....     
-000063a0: 2020 2023 666f 6c64 6572 203d 2051 4669     #folder = QFi
-000063b0: 6c65 4469 616c 6f67 2e67 6574 4578 6973  leDialog.getExis
-000063c0: 7469 6e67 4469 7265 6374 6f72 7920 2873  tingDirectory (s
-000063d0: 656c 662c 2027 4275 696c 6420 5072 6f6a  elf, 'Build Proj
-000063e0: 6563 742e 2e2e 272c 206f 732e 6765 7463  ect...', os.getc
-000063f0: 7764 2829 290d 0a0d 0a20 2020 2020 2020  wd())....       
-00006400: 2069 6620 7365 6c66 2e63 7572 7265 6e74   if self.current
-00006410: 5f66 696c 6520 6973 204e 6f6e 653a 0d0a  _file is None:..
-00006420: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00006430: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
-00006440: 2243 616e 6e6f 7420 6275 696c 6420 7072  "Cannot build pr
-00006450: 6f6a 6563 742e 2050 6c65 6173 6520 7361  oject. Please sa
-00006460: 7665 2074 6f20 6669 6c65 2066 6972 7374  ve to file first
-00006470: 2e22 2c74 6974 6c65 3d22 4572 726f 7222  .",title="Error"
-00006480: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00006490: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
-000064a0: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
-000064b0: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
-000064c0: 7572 7265 6e74 5f66 696c 6529 0d0a 2020  urrent_file)..  
-000064d0: 2020 2020 2020 7072 696e 7428 2262 7569        print("bui
-000064e0: 6c64 2070 726f 6a65 6374 2069 6e20 222c  ld project in ",
-000064f0: 2066 6f6c 6465 7229 0d0a 0d0a 2020 2020   folder)....    
-00006500: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00006510: 2020 2020 2020 6f73 2e6d 6b64 6972 2866        os.mkdir(f
-00006520: 6f6c 6465 7220 2b20 222f 6d61 6d62 615f  older + "/mamba_
-00006530: 636f 6465 2f22 290d 0a20 2020 2020 2020  code/")..       
-00006540: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
-00006550: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
-00006560: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00006570: 2020 2020 2020 2020 6f73 2e6d 6b64 6972          os.mkdir
-00006580: 2866 6f6c 6465 7220 2b20 222f 7079 7468  (folder + "/pyth
-00006590: 6f6e 5f63 6f64 652f 2229 0d0a 2020 2020  on_code/")..    
-000065a0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-000065b0: 2020 2020 2020 2020 2070 6173 730d 0a0d           pass...
-000065c0: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-000065d0: 2020 2020 2020 2020 2020 206f 732e 6d6b             os.mk
-000065e0: 6469 7228 666f 6c64 6572 202b 2022 2f6f  dir(folder + "/o
-000065f0: 7574 7075 742f 2229 0d0a 2020 2020 2020  utput/")..      
-00006600: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-00006610: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
-00006620: 2020 2020 2020 2074 7279 3a0d 0a0d 0a20         try:.... 
-00006630: 2020 2020 2020 2020 2020 2066 6f72 2061             for a
-00006640: 6765 6e74 2c20 636f 6465 2069 6e20 7365  gent, code in se
-00006650: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
-00006660: 6465 5f64 6174 612e 6974 656d 7328 293a  de_data.items():
-00006670: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006680: 2020 6966 2061 6765 6e74 2069 6e20 436f    if agent in Co
-00006690: 6465 4564 6974 6f72 2e69 6e73 7461 6e63  deEditor.instanc
-000066a0: 6573 3a20 2320 6f6e 6c79 2063 6f6e 7665  es: # only conve
-000066b0: 7274 2065 6469 7465 6420 636f 6465 0d0a  rt edited code..
-000066c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000066d0: 2020 2020 2020 2320 7772 6974 6520 6d61        # write ma
-000066e0: 6d62 6120 636f 6465 2066 6f72 2063 6f6d  mba code for com
-000066f0: 706c 6574 656e 6573 730d 0a20 2020 2020  pleteness..     
-00006700: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00006710: 6174 6820 3d20 666f 6c64 6572 202b 2022  ath = folder + "
-00006720: 2f6d 616d 6261 5f63 6f64 652f 2573 2e70  /mamba_code/%s.p
-00006730: 7922 2025 2061 6765 6e74 2023 2066 6f72  y" % agent # for
-00006740: 6d65 7220 2e74 7874 0d0a 0d0a 2020 2020  mer .txt....    
-00006750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006760: 7072 696e 7428 2270 6174 6822 2c70 6174  print("path",pat
-00006770: 6829 0d0a 0d0a 2020 2020 2020 2020 2020  h)....          
-00006780: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-00006790: 7065 6e28 7061 7468 2c20 2277 2229 2061  pen(path, "w") a
-000067a0: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
-000067b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000067c0: 2066 696c 652e 7772 6974 6528 636f 6465   file.write(code
-000067d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000067e0: 2020 2020 2020 2020 2023 2077 7269 7465           # write
-000067f0: 2070 7974 686f 6e20 636f 6465 0d0a 2020   python code..  
-00006800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006810: 2020 7061 7468 203d 2066 6f6c 6465 7220    path = folder 
-00006820: 2b20 222f 7079 7468 6f6e 5f63 6f64 652f  + "/python_code/
-00006830: 2573 2e70 7922 2025 2061 6765 6e74 2e6c  %s.py" % agent.l
-00006840: 6f77 6572 2829 0d0a 0d0a 2020 2020 2020  ower()....      
-00006850: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00006860: 696e 7428 2270 6174 6822 2c70 6174 6829  int("path",path)
-00006870: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00006880: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00006890: 6e28 7061 7468 2c20 2277 2229 2061 7320  n(path, "w") as 
-000068a0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
-000068b0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000068c0: 6577 5f63 6f64 6520 3d20 636f 6e76 6572  ew_code = conver
-000068d0: 745f 636f 6465 2863 6f64 652e 7370 6c69  t_code(code.spli
-000068e0: 7428 225c 6e22 2929 5b30 5d0d 0a20 2020  t("\n"))[0]..   
-000068f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006900: 2020 2020 206e 6577 5f63 6f64 6520 3d20       new_code = 
-00006910: 6e65 775f 636f 6465 2e65 6e63 6f64 6528  new_code.encode(
-00006920: 2275 7466 2d38 2229 2e64 6563 6f64 6528  "utf-8").decode(
-00006930: 2763 7031 3235 3227 290d 0a20 2020 2020  'cp1252')..     
-00006940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006950: 2020 2066 696c 652e 7772 6974 6528 6e65     file.write(ne
-00006960: 775f 636f 6465 2920 2320 636f 6e76 6572  w_code) # conver
-00006970: 7420 7573 696e 6720 7468 6520 6d61 6d62  t using the mamb
-00006980: 6120 696e 7465 7270 7265 7465 720d 0a0d  a interpreter...
-00006990: 0a20 2020 2020 2020 2020 2020 2023 2077  .            # w
-000069a0: 7269 7465 2073 6574 7469 6e67 7320 6669  rite settings fi
-000069b0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
-000069c0: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
-000069d0: 202b 2022 2f73 6574 7469 6e67 732e 796d   + "/settings.ym
-000069e0: 6c22 2c22 7722 2920 6173 2066 696c 653a  l","w") as file:
-000069f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006a00: 2020 6669 6c65 2e77 7269 7465 2873 656c    file.write(sel
-00006a10: 662e 7365 7474 696e 6773 5f73 7472 290d  f.settings_str).
-00006a20: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00006a30: 2077 7269 7465 2074 6865 2072 756e 6e65   write the runne
-00006a40: 7220 6669 6c65 0d0a 2020 2020 2020 2020  r file..        
-00006a50: 2020 2020 6966 2073 656c 662e 6d61 696e      if self.main
-00006a60: 6c6f 6f70 5f73 7472 203d 3d20 2222 206f  loop_str == "" o
-00006a70: 7220 6f76 6572 7772 6974 653a 0d0a 2020  r overwrite:..  
-00006a80: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-00006a90: 7468 206f 7065 6e28 666f 6c64 6572 2b22  th open(folder+"
-00006aa0: 2f72 756e 6e65 722e 7079 222c 2277 2229  /runner.py","w")
-00006ab0: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
-00006ac0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00006ad0: 696c 652e 7772 6974 6528 2266 726f 6d20  ile.write("from 
-00006ae0: 7079 7468 6f6e 5f63 6f64 652e 6d61 696e  python_code.main
-00006af0: 6c6f 6f70 2069 6d70 6f72 7420 7275 6e5c  loop import run\
-00006b00: 6e5c 6e72 756e 2829 5c6e 2229 0d0a 0d0a  n\nrun()\n")....
-00006b10: 2020 2020 2020 2020 2020 2020 2320 7772              # wr
-00006b20: 6974 6520 6d61 696e 2073 696d 756c 6174  ite main simulat
-00006b30: 696f 6e20 6669 6c65 0d0a 2020 2020 2020  ion file..      
-00006b40: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00006b50: 666f 6c64 6572 202b 2022 2f70 7974 686f  folder + "/pytho
-00006b60: 6e5f 636f 6465 2f6d 6169 6e6c 6f6f 702e  n_code/mainloop.
-00006b70: 7079 222c 2277 2229 2061 7320 6669 6c65  py","w") as file
-00006b80: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00006b90: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
-00006ba0: 202b 2022 2e2f 6d61 696e 6c6f 6f70 2e70   + "./mainloop.p
-00006bb0: 7922 2c22 7722 2920 6173 2066 696c 653a  y","w") as file:
-00006bc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006bd0: 2020 6966 2073 656c 662e 6d61 696e 6c6f    if self.mainlo
-00006be0: 6f70 5f73 7472 203d 3d20 2222 206f 7220  op_str == "" or 
-00006bf0: 6f76 6572 7772 6974 653a 0d0a 0d0a 2020  overwrite:....  
-00006c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c10: 2020 6966 206f 7665 7277 7269 7465 3a0d    if overwrite:.
-00006c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006c30: 2020 2020 2020 2020 2079 6573 203d 2073           yes = s
-00006c40: 656c 662e 6173 6b5f 7175 6573 7469 6f6e  elf.ask_question
-00006c50: 2827 272c 2022 5741 524e 494e 4720 2d20  ('', "WARNING - 
-00006c60: 596f 7520 6172 6520 6162 6f75 7420 746f  You are about to
-00006c70: 2063 7265 6174 6520 6120 6672 6573 6820   create a fresh 
-00006c80: 6d61 696e 2073 6372 6970 742e 2054 6869  main script. Thi
-00006c90: 7320 636f 756c 6420 706f 7465 6e74 6961  s could potentia
-00006ca0: 6c6c 7920 6f76 6572 7772 6974 6520 7072  lly overwrite pr
-00006cb0: 6576 696f 7573 2076 6572 7369 6f6e 7320  evious versions 
-00006cc0: 2869 6620 616e 7929 2e5c 6e54 6869 7320  (if any).\nThis 
-00006cd0: 6f70 6572 6174 696f 6e20 6361 6e6e 6f74  operation cannot
-00006ce0: 2062 6520 7265 7665 7274 6564 2e20 436f   be reverted. Co
-00006cf0: 6e74 696e 7565 3f22 290d 0a20 2020 2020  ntinue?")..     
-00006d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d10: 2020 2069 6620 6e6f 7420 7965 733a 0d0a     if not yes:..
-00006d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006d40: 726e 0d0a 0d0a 2020 2020 2020 2020 2020  rn....          
-00006d50: 2020 2020 2020 2020 2020 6966 206f 7665            if ove
-00006d60: 7277 7269 7465 2061 6e64 2073 656c 662e  rwrite and self.
-00006d70: 6d61 696e 6c6f 6f70 5f73 7472 2021 3d20  mainloop_str != 
-00006d80: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
-00006d90: 2020 2020 2020 2020 2020 2020 2077 6974               wit
-00006da0: 6820 6f70 656e 2866 6f6c 6465 7220 2b20  h open(folder + 
-00006db0: 222f 7079 7468 6f6e 5f63 6f64 652f 6d61  "/python_code/ma
-00006dc0: 696e 6c6f 6f70 5f62 6163 6b75 702e 7079  inloop_backup.py
-00006dd0: 222c 2277 2229 2061 7320 6261 636b 7570  ","w") as backup
-00006de0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
-00006df0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00006e00: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
-00006e10: 202b 2022 2e2f 6d61 696e 6c6f 6f70 5f62   + "./mainloop_b
-00006e20: 6163 6b75 702e 7079 222c 2277 2229 2061  ackup.py","w") a
-00006e30: 7320 6261 636b 7570 6669 6c65 3a0d 0a20  s backupfile:.. 
-00006e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e50: 2020 2020 2020 2020 2020 2062 6163 6b75             backu
-00006e60: 7066 696c 652e 7772 6974 6528 7365 6c66  pfile.write(self
-00006e70: 2e6d 6169 6e6c 6f6f 705f 7374 722e 7265  .mainloop_str.re
-00006e80: 706c 6163 6528 225c 7422 2c22 2020 2020  place("\t","    
-00006e90: 2229 290d 0a0d 0a20 2020 2020 2020 2020  "))....         
-00006ea0: 2020 2020 2020 2020 2020 2073 696d 755f             simu_
-00006eb0: 7374 7220 3d20 2222 220d 0a5c 225c 225c  str = """..\"\"\
-00006ec0: 220d 0a54 6869 7320 7468 6520 6d61 696e  "..This the main
-00006ed0: 2041 424d 2053 696d 756c 6174 696f 6e20   ABM Simulation 
-00006ee0: 6669 6c65 0d0a 4372 6574 6165 6420 7769  file..Cretaed wi
-00006ef0: 7468 204d 414d 4241 2047 5549 0d0a 0d0a  th MAMBA GUI....
-00006f00: 4061 7574 686f 723a 203c 596f 7572 206e  @author: <Your n
-00006f10: 616d 653e 0d0a 4064 6174 653a 203c 596f  ame>..@date: <Yo
-00006f20: 7572 2064 6174 653e 0d0a 5c22 5c22 5c22  ur date>..\"\"\"
-00006f30: 0d0a 0d0a 6672 6f6d 2073 6663 746f 6f6c  ....from sfctool
-00006f40: 7320 696d 706f 7274 2041 6765 6e74 2c20  s import Agent, 
-00006f50: 576f 726c 642c 2053 6574 7469 6e67 732c  World, Settings,
-00006f60: 2043 6c6f 636b 2c20 466c 6f77 4d61 7472   Clock, FlowMatr
-00006f70: 6978 0d0a 2222 220d 0a20 2020 2020 2020  ix.."""..       
-00006f80: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00006f90: 2061 6765 6e74 2069 6e20 7365 6c66 2e64   agent in self.d
-00006fa0: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
-00006fb0: 6174 612e 6b65 7973 2829 3a0d 0a20 2020  ata.keys():..   
-00006fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006fd0: 2020 2020 2073 696d 755f 7374 7220 2b3d       simu_str +=
-00006fe0: 2022 6672 6f6d 2070 7974 686f 6e5f 636f   "from python_co
-00006ff0: 6465 2e25 7320 696d 706f 7274 2025 735c  de.%s import %s\
-00007000: 6e22 2025 2028 6167 656e 742e 6c6f 7765  n" % (agent.lowe
-00007010: 7228 292c 6167 656e 742e 6361 7069 7461  r(),agent.capita
-00007020: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
-00007030: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007040: 696d 755f 7374 7220 2b3d 2022 2222 0d0a  imu_str += """..
-00007050: 0d0a 6465 6620 6974 6572 2829 3a0d 0a20  ..def iter():.. 
-00007060: 2020 205c 225c 225c 220d 0a20 2020 2074     \"\"\"..    t
-00007070: 6869 7320 6973 206f 6e65 2069 7465 7261  his is one itera
-00007080: 7469 6f6e 0d0a 2020 2020 5c22 5c22 5c22  tion..    \"\"\"
-00007090: 0d0a 0d0a 2020 2020 2320 544f 444f 206d  ....    # TODO m
-000070a0: 6f64 6966 7920 6974 6572 6174 696f 6e20  odify iteration 
-000070b0: 6865 7265 0d0a 2222 220d 0a0d 0a20 2020  here.."""....   
-000070c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000070d0: 2066 6f72 2061 6765 6e74 2069 6e20 7365   for agent in se
-000070e0: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
-000070f0: 6465 5f64 6174 612e 6b65 7973 2829 3a0d  de_data.keys():.
-00007100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007110: 2020 2020 2020 2020 2061 203d 2061 6765           a = age
-00007120: 6e74 2e63 6170 6974 616c 697a 6528 290d  nt.capitalize().
-00007130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007140: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
-00007150: 7220 2b3d 2022 5c74 666f 7220 6120 696e  r += "\tfor a in
-00007160: 2057 6f72 6c64 2829 2e67 6574 5f61 6765   World().get_age
-00007170: 6e74 735f 6f66 5f74 7970 6528 2725 7327  nts_of_type('%s'
-00007180: 293a 5c6e 5c74 5c74 7072 696e 7428 2744  ):\n\t\tprint('D
-00007190: 6f20 736f 6d65 7468 696e 6720 7769 7468  o something with
-000071a0: 2720 2b20 7374 7228 6129 295c 6e5c 6e22  ' + str(a))\n\n"
-000071b0: 2025 2028 6129 0d0a 2020 2020 2020 2020   % (a)..        
-000071c0: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
-000071d0: 5f73 7472 202b 3d20 2222 225c 6e0d 0a64  _str += """\n..d
-000071e0: 6566 2072 756e 2829 3a0d 0a20 2020 205c  ef run():..    \
-000071f0: 225c 225c 220d 0a20 2020 2074 6869 7320  "\"\"..    this 
-00007200: 6973 2074 6865 206d 6169 6e20 7369 6d75  is the main simu
-00007210: 6c61 7469 6f6e 206c 6f6f 700d 0a20 2020  lation loop..   
-00007220: 205c 225c 225c 220d 0a22 2222 0d0a 0d0a   \"\"\".."""....
-00007230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007240: 2020 2020 2020 7369 6d75 5f73 7472 202b        simu_str +
-00007250: 3d20 2222 225c 6e0d 0a0d 0a20 2020 2053  = """\n....    S
-00007260: 6574 7469 6e67 7328 292e 7265 6164 285c  ettings().read(\
-00007270: 2273 6574 7469 6e67 732e 796d 6c5c 2229  "settings.yml\")
-00007280: 2023 2072 6561 6420 7365 7474 696e 6773   # read settings
-00007290: 2066 696c 650d 0a0d 0a20 2020 205c 225c   file....    \"\
-000072a0: 225c 220d 0a20 2020 2053 696d 756c 6174  "\"..    Simulat
-000072b0: 696f 6e20 7061 7261 6d65 7465 7273 0d0a  ion parameters..
-000072c0: 2020 2020 5c22 5c22 5c22 0d0a 0d0a 2020      \"\"\"....  
-000072d0: 2020 2320 6e75 6d62 6572 206f 6620 6167    # number of ag
-000072e0: 656e 7473 2074 6f20 6265 2063 7265 6174  ents to be creat
-000072f0: 6564 0d0a 2222 220d 0a0d 0a20 2020 2020  ed.."""....     
-00007300: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00007310: 6f72 2061 6765 6e74 2069 6e20 7365 6c66  or agent in self
-00007320: 2e64 7261 7763 616e 7661 732e 636f 6465  .drawcanvas.code
-00007330: 5f64 6174 612e 6b65 7973 2829 3a0d 0a20  _data.keys():.. 
-00007340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007350: 2020 2020 2020 2073 696d 755f 7374 7220         simu_str 
-00007360: 2b3d 2022 5c74 4e5f 2573 203d 2031 5c6e  += "\tN_%s = 1\n
-00007370: 2220 2520 6167 656e 742e 6361 7069 7461  " % agent.capita
-00007380: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
-00007390: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
-000073a0: 5f73 7472 202b 3d20 2222 220d 0a20 2020  _str += """..   
-000073b0: 2023 2054 4f44 4f5e 2073 6574 2074 6865   # TODO^ set the
-000073c0: 2063 6f72 7265 6374 2076 616c 7565 0d0a   correct value..
-000073d0: 0d0a 2020 2020 2320 6e75 6d62 6572 206f  ..    # number o
-000073e0: 6620 7369 6d75 6c61 7469 6f6e 2073 7465  f simulation ste
-000073f0: 7073 0d0a 2020 2020 5420 3d20 3130 300d  ps..    T = 100.
-00007400: 0a0d 0a20 2020 2023 2054 4f44 4f5e 2073  ...    # TODO^ s
-00007410: 6574 2074 6865 2063 6f72 7265 6374 2076  et the correct v
-00007420: 616c 7565 730d 0a0d 0a20 2020 2023 2063  alues....    # c
-00007430: 7265 6174 6520 4167 656e 7473 3a0d 0a22  reate Agents:.."
-00007440: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-00007450: 2020 2020 2020 2020 666f 7220 6167 656e          for agen
-00007460: 7420 696e 2073 656c 662e 6472 6177 6361  t in self.drawca
-00007470: 6e76 6173 2e63 6f64 655f 6461 7461 2e6b  nvas.code_data.k
-00007480: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
-00007490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074a0: 6120 3d20 6167 656e 742e 6361 7069 7461  a = agent.capita
-000074b0: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
-000074c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074d0: 7369 6d75 5f73 7472 202b 3d20 225c 745b  simu_str += "\t[
-000074e0: 2573 2829 2066 6f72 2069 2069 6e20 7261  %s() for i in ra
-000074f0: 6e67 6528 4e5f 2573 295d 5c6e 2220 2520  nge(N_%s)]\n" % 
-00007500: 2861 2c61 290d 0a0d 0a20 2020 2020 2020  (a,a)....       
-00007510: 2020 2020 2020 2020 2020 2020 2073 696d               sim
-00007520: 755f 7374 7220 2b3d 2022 5c6e 220d 0a20  u_str += "\n".. 
-00007530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007540: 2020 2073 696d 755f 7374 7220 2b3d 2022     simu_str += "
-00007550: 5c74 2320 696e 7465 722d 6c69 6e6b 2061  \t# inter-link a
-00007560: 6765 6e74 7320 5c6e 220d 0a0d 0a20 2020  gents \n"....   
-00007570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007580: 2073 696d 755f 7374 7220 2b3d 2022 5c74   simu_str += "\t
-00007590: 576f 726c 6428 292e 6c69 6e6b 2829 5c6e  World().link()\n
-000075a0: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
-000075b0: 2020 2020 2020 2020 2020 2023 2066 6f72             # for
-000075c0: 2061 6765 6e74 2069 6e20 7365 6c66 2e64   agent in self.d
-000075d0: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
-000075e0: 6174 612e 6b65 7973 2829 3a0d 0a20 2020  ata.keys():..   
+000050b0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+000050c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000050d0: 2020 6272 6561 6b0d 0a20 2020 2020 2020    break..       
+000050e0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+000050f0: 6269 6e65 645f 6261 6c61 6e63 655b 6167  bined_balance[ag
+00005100: 656e 7431 5d5b 2249 7465 6d22 5d2e 6170  ent1]["Item"].ap
+00005110: 7065 6e64 286d 795f 6974 656d 290d 0a20  pend(my_item).. 
+00005120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005130: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
+00005140: 6e63 655b 6167 656e 7431 5d5b 224c 6961  nce[agent1]["Lia
+00005150: 6269 6c69 7469 6573 225d 2e61 7070 656e  bilities"].appen
+00005160: 6428 7369 676e 2b66 696c 6564 6174 615b  d(sign+filedata[
+00005170: 2271 7561 6e74 6974 7922 5d2b 225c 6e22  "quantity"]+"\n"
+00005180: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00005190: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+000051a0: 6261 6c61 6e63 655b 6167 656e 7431 5d5b  balance[agent1][
+000051b0: 2241 7373 6574 7322 5d2e 6170 7065 6e64  "Assets"].append
+000051c0: 2822 2229 0d0a 0d0a 2020 2020 2020 2020  ("")....        
+000051d0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
+000051e0: 206c 6961 6273 322e 7370 6c69 7428 225c   liabs2.split("\
+000051f0: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+00005200: 2020 2020 2020 2020 2020 6966 206a 2e73            if j.s
+00005210: 7472 6970 2829 2e73 7461 7274 7377 6974  trip().startswit
+00005220: 6828 222b 2229 3a0d 0a20 2020 2020 2020  h("+"):..       
+00005230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005240: 206d 795f 6974 656d 203d 206a 2e73 706c   my_item = j.spl
+00005250: 6974 2822 2b22 295b 315d 202b 2073 7562  it("+")[1] + sub
+00005260: 6a65 6374 0d0a 2020 2020 2020 2020 2020  ject..          
+00005270: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00005280: 676e 203d 2022 2b22 0d0a 0d0a 2020 2020  gn = "+"....    
+00005290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000052a0: 656c 6966 206a 2e73 7472 6970 2829 2e73  elif j.strip().s
+000052b0: 7461 7274 7377 6974 6828 222d 2229 3a0d  tartswith("-"):.
+000052c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000052d0: 2020 2020 2020 2020 206d 795f 6974 656d           my_item
+000052e0: 203d 206a 2e73 706c 6974 2822 2d22 295b   = j.split("-")[
+000052f0: 315d 202b 2073 7562 6a65 6374 0d0a 2020  1] + subject..  
+00005300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005310: 2020 2020 2020 7369 676e 203d 2022 2d22        sign = "-"
+00005320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005330: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00005340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005350: 2020 2020 2062 7265 616b 0d0a 2020 2020       break..    
+00005360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005370: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
+00005380: 5b61 6765 6e74 325d 5b22 4974 656d 225d  [agent2]["Item"]
+00005390: 2e61 7070 656e 6428 6d79 5f69 7465 6d29  .append(my_item)
+000053a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000053b0: 2020 2020 2020 636f 6d62 696e 6564 5f62        combined_b
+000053c0: 616c 616e 6365 5b61 6765 6e74 325d 5b22  alance[agent2]["
+000053d0: 4c69 6162 696c 6974 6965 7322 5d2e 6170  Liabilities"].ap
+000053e0: 7065 6e64 2873 6967 6e2b 6669 6c65 6461  pend(sign+fileda
+000053f0: 7461 5b22 7175 616e 7469 7479 225d 2b22  ta["quantity"]+"
+00005400: 5c6e 2229 0d0a 2020 2020 2020 2020 2020  \n")..          
+00005410: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
+00005420: 6564 5f62 616c 616e 6365 5b61 6765 6e74  ed_balance[agent
+00005430: 325d 5b22 4173 7365 7473 225d 2e61 7070  2]["Assets"].app
+00005440: 656e 6428 2222 290d 0a0d 0a0d 0a0d 0a20  end("")........ 
+00005450: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00005460: 2863 6f6d 6269 6e65 645f 6261 6c61 6e63  (combined_balanc
+00005470: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+00005480: 2020 6466 7320 3d20 5b5d 0d0a 2020 2020    dfs = []..    
+00005490: 2020 2020 2020 2020 666f 7220 6b2c 7620          for k,v 
+000054a0: 696e 2063 6f6d 6269 6e65 645f 6261 6c61  in combined_bala
+000054b0: 6e63 652e 6974 656d 7328 293a 0d0a 2020  nce.items():..  
+000054c0: 2020 2020 2020 2020 2020 2020 2020 6476                dv
+000054d0: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
+000054e0: 7629 0d0a 2020 2020 2020 2020 2020 2020  v)..            
+000054f0: 2020 2020 6476 203d 2064 762e 7265 6e61      dv = dv.rena
+00005500: 6d65 2863 6f6c 756d 6e73 3d7b 224c 6961  me(columns={"Lia
+00005510: 6269 6c69 7469 6573 223a 224c 6961 6269  bilities":"Liabi
+00005520: 6c69 7469 6573 2028 2573 2922 256b 2c20  lities (%s)"%k, 
+00005530: 2241 7373 6574 7322 3a20 2241 7373 6574  "Assets": "Asset
+00005540: 7320 2825 7329 2225 6b7d 290d 0a0d 0a20  s (%s)"%k}).... 
+00005550: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00005560: 6620 6e6f 7420 6465 7461 696c 6564 3a0d  f not detailed:.
+00005570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005580: 2020 2020 2061 6767 7265 6761 7469 6f6e       aggregation
+00005590: 5f66 756e 6374 696f 6e73 203d 207b 7d0d  _functions = {}.
+000055a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000055b0: 2020 2020 2066 6f72 2063 6f6c 2069 6e20       for col in 
+000055c0: 6476 2e63 6f6c 756d 6e73 3a0d 0a20 2020  dv.columns:..   
+000055d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000055e0: 2020 2020 2069 6620 636f 6c20 3d3d 2022       if col == "
+000055f0: 4974 656d 223a 0d0a 2020 2020 2020 2020  Item":..        
+00005600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005610: 2020 2020 6167 6772 6567 6174 696f 6e5f      aggregation_
+00005620: 6675 6e63 7469 6f6e 735b 636f 6c5d 203d  functions[col] =
+00005630: 2022 6669 7273 7422 0d0a 2020 2020 2020   "first"..      
+00005640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005650: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00005660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005670: 2020 2020 2061 6767 7265 6761 7469 6f6e       aggregation
+00005680: 5f66 756e 6374 696f 6e73 5b63 6f6c 5d20  _functions[col] 
+00005690: 3d20 2273 756d 220d 0a20 2020 2020 2020  = "sum"..       
+000056a0: 2020 2020 2020 2020 2020 2020 2064 7620               dv 
+000056b0: 3d20 6476 2e67 726f 7570 6279 2864 765b  = dv.groupby(dv[
+000056c0: 2749 7465 6d27 5d29 2e61 6767 7265 6761  'Item']).aggrega
+000056d0: 7465 2861 6767 7265 6761 7469 6f6e 5f66  te(aggregation_f
+000056e0: 756e 6374 696f 6e73 290d 0a20 2020 2020  unctions)..     
+000056f0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00005700: 7620 3d20 6476 2e64 726f 7028 636f 6c75  v = dv.drop(colu
+00005710: 6d6e 733d 2249 7465 6d22 290d 0a0d 0a20  mns="Item").... 
+00005720: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00005730: 6673 2e61 7070 656e 6428 7064 2e44 6174  fs.append(pd.Dat
+00005740: 6146 7261 6d65 2864 7629 290d 0a0d 0a0d  aFrame(dv)).....
+00005750: 0a20 2020 2020 2020 2020 2020 2064 6620  .            df 
+00005760: 3d20 7064 2e63 6f6e 6361 7428 6466 732c  = pd.concat(dfs,
+00005770: 6178 6973 3d31 2920 232c 6b65 7973 203d  axis=1) #,keys =
+00005780: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
+00005790: 2e6b 6579 7328 2929 0d0a 2020 2020 2020  .keys())..      
+000057a0: 2020 2020 2020 7072 696e 7428 6466 2e74        print(df.t
+000057b0: 6f5f 7374 7269 6e67 2829 290d 0a20 2020  o_string())..   
+000057c0: 2020 2020 2020 2020 2064 6620 3d20 6466           df = df
+000057d0: 2e72 6570 6c61 6365 286e 702e 6e61 6e2c  .replace(np.nan,
+000057e0: 2222 290d 0a0d 0a0d 0a0d 0a20 2020 2020  "")........     
+000057f0: 2020 2020 2020 206d 6f64 656c 203d 2050         model = P
+00005800: 616e 6461 734d 6f64 656c 2864 6629 0d0a  andasModel(df)..
+00005810: 2020 2020 2020 2020 2020 2020 6d76 6965              mvie
+00005820: 7720 3d20 4d61 7472 6978 5669 6577 6572  w = MatrixViewer
+00005830: 286d 6f64 656c 2c70 6172 656e 743d 7365  (model,parent=se
+00005840: 6c66 290d 0a0d 0a20 2020 2020 2020 2020  lf)....         
+00005850: 2020 2023 206d 7669 6577 2e77 6562 5669     # mview.webVi
+00005860: 6577 2e73 6574 4874 6d6c 2864 665f 6874  ew.setHtml(df_ht
+00005870: 6d6c 290d 0a20 2020 2020 2020 2020 2020  ml)..           
+00005880: 2069 6620 6e6f 7420 7365 6c66 2e74 6573   if not self.tes
+00005890: 745f 6d6f 6465 3a0d 0a20 2020 2020 2020  t_mode:..       
+000058a0: 2020 2020 2020 2020 206d 7669 6577 2e73           mview.s
+000058b0: 686f 7728 290d 0a0d 0a20 2020 2020 2020  how()....       
+000058c0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+000058d0: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+000058e0: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+000058f0: 2874 6974 6c65 3d22 4572 726f 7222 2c6d  (title="Error",m
+00005900: 6573 7361 6765 3d22 4572 726f 723a 2220  essage="Error:" 
+00005910: 2b20 7374 7228 6529 290d 0a0d 0a0d 0a20  + str(e))...... 
+00005920: 2020 2064 6566 2065 6469 745f 6d61 696e     def edit_main
+00005930: 6c6f 6f70 2873 656c 6629 3a0d 0a20 2020  loop(self):..   
+00005940: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00005950: 2020 2020 2020 2070 7269 6e74 2822 7365         print("se
+00005960: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7222  lf.mainloop_str"
+00005970: 2c73 656c 662e 6d61 696e 6c6f 6f70 5f73  ,self.mainloop_s
+00005980: 7472 290d 0a20 2020 2020 2020 2020 2020  tr)..           
+00005990: 206c 696e 6573 203d 2073 656c 662e 6d61   lines = self.ma
+000059a0: 696e 6c6f 6f70 5f73 7472 0d0a 0d0a 2020  inloop_str....  
+000059b0: 2020 2020 2020 2020 2020 6d79 5f65 6469            my_edi
+000059c0: 7420 3d20 7365 6c66 2e6d 6169 6e6c 6f6f  t = self.mainloo
+000059d0: 705f 6564 6974 6f72 2023 204d 6169 6e4c  p_editor # MainL
+000059e0: 6f6f 7045 6469 746f 7228 7061 7265 6e74  oopEditor(parent
+000059f0: 3d73 656c 662c 2074 6578 743d 6c69 6e65  =self, text=line
+00005a00: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+00005a10: 6d79 5f65 6469 742e 7365 745f 7465 7874  my_edit.set_text
+00005a20: 286c 696e 6573 290d 0a20 2020 2020 2020  (lines)..       
+00005a30: 2020 2020 206d 795f 6564 6974 2e73 6574       my_edit.set
+00005a40: 5374 796c 6553 6865 6574 2873 656c 662e  StyleSheet(self.
+00005a50: 7468 656d 655f 6d61 6e61 6765 722e 6765  theme_manager.ge
+00005a60: 745f 6261 636b 6772 6f75 6e64 5f73 7479  t_background_sty
+00005a70: 6c65 2829 290d 0a20 2020 2020 2020 2020  le())..         
+00005a80: 2020 206d 795f 6564 6974 2e73 6574 5374     my_edit.setSt
+00005a90: 796c 6553 6865 6574 2873 656c 662e 7468  yleSheet(self.th
+00005aa0: 656d 655f 6d61 6e61 6765 722e 6765 745f  eme_manager.get_
+00005ab0: 7374 796c 6573 6865 6574 2822 6d61 696e  stylesheet("main
+00005ac0: 2229 290d 0a20 2020 2020 2020 2020 2020  "))..           
+00005ad0: 206d 795f 6564 6974 2e73 7461 7274 5f77   my_edit.start_w
+00005ae0: 6174 6368 646f 6728 7365 6c66 2e63 7572  atchdog(self.cur
+00005af0: 7265 6e74 5f66 696c 6529 0d0a 2020 2020  rent_file)..    
+00005b00: 2020 2020 2020 2020 6d79 5f65 6469 742e          my_edit.
+00005b10: 7368 6f77 2829 0d0a 0d0a 2020 2020 2020  show()....      
+00005b20: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+00005b30: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
+00005b40: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+00005b50: 7928 2243 6f75 6c64 206e 6f74 2065 6469  y("Could not edi
+00005b60: 7420 6d61 696e 6c6f 6f70 2066 696c 652e  t mainloop file.
+00005b70: 2048 6176 6520 796f 7520 7361 7665 6420   Have you saved 
+00005b80: 7468 6520 7072 6f6a 6563 7420 7965 743f  the project yet?
+00005b90: 5c6e 2220 202b 2073 7472 2865 292c 2074  \n"  + str(e), t
+00005ba0: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
+00005bb0: 0a20 2020 2064 6566 2072 6573 746f 7265  .    def restore
+00005bc0: 5f6f 7269 6769 6e61 6c5f 7369 7a65 2873  _original_size(s
+00005bd0: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
+00005be0: 656c 662e 7365 7446 6978 6564 5369 7a65  elf.setFixedSize
+00005bf0: 2831 3832 312c 3130 3130 290d 0a20 2020  (1821,1010)..   
+00005c00: 2020 2020 2073 656c 662e 7365 744d 6178       self.setMax
+00005c10: 696d 756d 5369 7a65 2834 3030 3030 2c34  imumSize(40000,4
+00005c20: 3030 3030 290d 0a0d 0a20 2020 2064 6566  0000)....    def
+00005c30: 2066 6c69 705f 6865 6967 6874 2873 656c   flip_height(sel
+00005c40: 6629 3a0d 0a20 2020 2020 2020 2069 6620  f):..        if 
+00005c50: 7365 6c66 2e66 6c69 7070 6564 3a0d 0a20  self.flipped:.. 
+00005c60: 2020 2020 2020 2020 2020 2057 203d 2073             W = s
+00005c70: 656c 662e 6672 616d 6547 656f 6d65 7472  elf.frameGeometr
+00005c80: 7928 292e 7769 6474 6828 290d 0a20 2020  y().width()..   
+00005c90: 2020 2020 2020 2020 2048 203d 2073 656c           H = sel
+00005ca0: 662e 6672 616d 6547 656f 6d65 7472 7928  f.frameGeometry(
+00005cb0: 292e 6865 6967 6874 2829 0d0a 0d0a 2020  ).height()....  
+00005cc0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00005cd0: 6574 4d69 6e69 6d75 6d53 697a 6528 7365  etMinimumSize(se
+00005ce0: 6c66 2e6c 6173 745f 7769 6474 682c 7365  lf.last_width,se
+00005cf0: 6c66 2e6c 6173 745f 6865 6967 6874 290d  lf.last_height).
+00005d00: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
+00005d10: 656c 662e 7365 744d 6178 696d 756d 5369  elf.setMaximumSi
+00005d20: 7a65 2873 656c 662e 6c61 7374 5f77 6964  ze(self.last_wid
+00005d30: 7468 2c73 656c 662e 6c61 7374 5f68 6569  th,self.last_hei
+00005d40: 6768 7429 0d0a 2020 2020 2020 2020 2020  ght)..          
+00005d50: 2020 7365 6c66 2e73 6574 4d61 7869 6d75    self.setMaximu
+00005d60: 6d53 697a 6528 3430 3030 302c 3430 3030  mSize(40000,4000
+00005d70: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
+00005d80: 2320 7365 6c66 2e73 6574 4d69 6e69 6d75  # self.setMinimu
+00005d90: 6d53 697a 6528 3430 302c 3430 3029 0d0a  mSize(400,400)..
+00005da0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00005db0: 5720 3d20 7365 6c66 2e66 7261 6d65 4765  W = self.frameGe
+00005dc0: 6f6d 6574 7279 2829 2e77 6964 7468 2829  ometry().width()
+00005dd0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00005de0: 7365 6c66 2e46 6c69 7048 6569 6768 7442  self.FlipHeightB
+00005df0: 7574 746f 6e2e 7365 7447 656f 6d65 7472  utton.setGeometr
+00005e00: 7928 696e 7428 5729 2d38 312d 3235 2c35  y(int(W)-81-25,5
+00005e10: 2c38 312c 3231 290d 0a0d 0a20 2020 2020  ,81,21)....     
+00005e20: 2020 2020 2020 2073 656c 662e 666c 6970         self.flip
+00005e30: 7065 6420 3d20 4661 6c73 650d 0a20 2020  ped = False..   
+00005e40: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00005e50: 2020 2020 2020 2020 5720 3d20 7365 6c66          W = self
+00005e60: 2e66 7261 6d65 4765 6f6d 6574 7279 2829  .frameGeometry()
+00005e70: 2e77 6964 7468 2829 0d0a 2020 2020 2020  .width()..      
+00005e80: 2020 2020 2020 4820 3d20 7365 6c66 2e66        H = self.f
+00005e90: 7261 6d65 4765 6f6d 6574 7279 2829 2e68  rameGeometry().h
+00005ea0: 6569 6768 7428 290d 0a20 2020 2020 2020  eight()..       
+00005eb0: 2020 2020 2073 656c 662e 6c61 7374 5f77       self.last_w
+00005ec0: 6964 7468 203d 2057 0d0a 2020 2020 2020  idth = W..      
+00005ed0: 2020 2020 2020 7365 6c66 2e6c 6173 745f        self.last_
+00005ee0: 6865 6967 6874 203d 2048 0d0a 0d0a 2020  height = H....  
+00005ef0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00005f00: 6574 4669 7865 6453 697a 6528 3830 302c  etFixedSize(800,
+00005f10: 3730 290d 0a0d 0a20 2020 2020 2020 2020  70)....         
+00005f20: 2020 2023 5720 3d20 7365 6c66 2e66 7261     #W = self.fra
+00005f30: 6d65 4765 6f6d 6574 7279 2829 2e77 6964  meGeometry().wid
+00005f40: 7468 2829 0d0a 2020 2020 2020 2020 2020  th()..          
+00005f50: 2020 2373 656c 662e 466c 6970 4865 6967    #self.FlipHeig
+00005f60: 6874 4275 7474 6f6e 2e73 6574 4765 6f6d  htButton.setGeom
+00005f70: 6574 7279 2869 6e74 2857 292d 3831 2d32  etry(int(W)-81-2
+00005f80: 352c 352c 3831 2c32 3129 0d0a 0d0a 2020  5,5,81,21)....  
+00005f90: 2020 2020 2020 2020 2020 7365 6c66 2e66            self.f
+00005fa0: 6c69 7070 6564 203d 2054 7275 650d 0a0d  lipped = True...
+00005fb0: 0a0d 0a20 2020 2064 6566 2063 6861 6e67  ...    def chang
+00005fc0: 655f 616c 6572 7428 7365 6c66 293a 0d0a  e_alert(self):..
+00005fd0: 2020 2020 2020 2020 7365 6c66 2e6d 6164          self.mad
+00005fe0: 655f 6368 616e 6765 7320 3d20 5472 7565  e_changes = True
+00005ff0: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+00006000: 2e75 6470 6174 6542 7574 746f 6e2e 7365  .udpateButton.se
+00006010: 7454 6578 7428 2255 7064 6174 6520 5661  tText("Update Va
+00006020: 6c75 6573 202a 2229 0d0a 0d0a 2020 2020  lues *")....    
+00006030: 6465 6620 7368 6f77 5f6f 7574 7075 745f  def show_output_
+00006040: 6469 7370 6c61 7928 7365 6c66 293a 0d0a  display(self):..
+00006050: 2020 2020 2020 2020 2320 7368 6f77 7320          # shows 
+00006060: 7468 6520 6c6f 6767 6572 2064 6973 706c  the logger displ
+00006070: 6179 2066 6f72 206f 7574 7075 7420 7175  ay for output qu
+00006080: 616e 7469 7469 6573 0d0a 0d0a 2020 2020  antities....    
+00006090: 2020 2020 7472 793a 0d0a 0d0a 2020 2020      try:....    
+000060a0: 2020 2020 2020 2020 7061 7468 203d 206f          path = o
+000060b0: 732e 7061 7468 2e64 6972 6e61 6d65 2873  s.path.dirname(s
+000060c0: 656c 662e 6375 7272 656e 745f 6669 6c65  elf.current_file
+000060d0: 292b 222f 6f75 7470 7574 2f22 0d0a 2020  )+"/output/"..  
+000060e0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+000060f0: 225b 4445 4255 4720 4d45 5353 4147 455d  "[DEBUG MESSAGE]
+00006100: 206f 7065 6e20 6f75 7470 7574 2064 6973   open output dis
+00006110: 706c 6179 2069 6e20 7061 7468 222c 2070  play in path", p
+00006120: 6174 6829 0d0a 0d0a 2020 2020 2020 2020  ath)....        
+00006130: 2020 2020 6f75 7470 7574 5f64 6973 706c      output_displ
+00006140: 6179 203d 204f 7574 7075 7444 6973 706c  ay = OutputDispl
+00006150: 6179 2873 656c 662c 7061 7468 203d 2070  ay(self,path = p
+00006160: 6174 6829 0d0a 2020 2020 2020 2020 6578  ath)..        ex
+00006170: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+00006180: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+00006190: 2020 7365 6c66 2e6e 6f74 6966 7928 7374    self.notify(st
+000061a0: 7228 6529 2c74 6974 6c65 3d22 4572 726f  r(e),title="Erro
+000061b0: 7222 290d 0a0d 0a0d 0a0d 0a20 2020 2064  r")........    d
+000061c0: 6566 2073 6176 655f 616e 645f 6275 696c  ef save_and_buil
+000061d0: 6428 7365 6c66 293a 0d0a 0d0a 2020 2020  d(self):....    
+000061e0: 2020 2020 2320 2d2d 2063 7265 6174 6520      # -- create 
+000061f0: 6e65 7720 7374 6174 7573 2073 6967 6e61  new status signa
+00006200: 6c0d 0a0d 0a20 2020 2020 2020 2073 656c  l....        sel
+00006210: 662e 776f 726b 6572 2e73 7769 7463 685f  f.worker.switch_
+00006220: 7374 6174 6528 290d 0a20 2020 2020 2020  state()..       
+00006230: 2023 202d 2d2d 0d0a 0d0a 2020 2020 2020   # ---....      
+00006240: 2020 7365 6c66 2e73 6176 6528 290d 0a0d    self.save()...
+00006250: 0a20 2020 2020 2020 2061 203d 205b 5d0d  .        a = [].
+00006260: 0a20 2020 2020 2020 2066 6f72 2063 6520  .        for ce 
+00006270: 696e 2043 6f64 6545 6469 746f 722e 696e  in CodeEditor.in
+00006280: 7374 616e 6365 732e 7661 6c75 6573 2829  stances.values()
+00006290: 3a0d 0a20 2020 2020 2020 2020 2020 206e  :..            n
+000062a0: 616d 6573 203d 2063 652e 7361 7665 5f61  ames = ce.save_a
+000062b0: 6e64 5f62 7569 6c64 2829 0d0a 2020 2020  nd_build()..    
+000062c0: 2020 2020 2020 2020 6966 206e 616d 6573          if names
+000062d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+000062e0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000062f0: 2e61 7070 656e 6428 6e61 6d65 7329 0d0a  .append(names)..
+00006300: 0d0a 2020 2020 2020 2020 666f 7220 6169  ..        for ai
+00006310: 2069 6e20 613a 0d0a 2020 2020 2020 2020   in a:..        
+00006320: 2020 2020 6966 2061 695b 305d 2069 6e20      if ai[0] in 
+00006330: 436f 6465 4564 6974 6f72 2e69 6e73 7461  CodeEditor.insta
+00006340: 6e63 6573 3a0d 0a20 2020 2020 2020 2020  nces:..         
+00006350: 2020 2020 2020 2043 6f64 6545 6469 746f         CodeEdito
+00006360: 722e 696e 7374 616e 6365 735b 6169 5b30  r.instances[ai[0
+00006370: 5d5d 203d 204e 6f6e 650d 0a20 2020 2020  ]] = None..     
+00006380: 2020 2020 2020 2020 2020 2064 656c 2043             del C
+00006390: 6f64 6545 6469 746f 722e 696e 7374 616e  odeEditor.instan
+000063a0: 6365 735b 6169 5b30 5d5d 0d0a 2020 2020  ces[ai[0]]..    
+000063b0: 2020 2020 2020 2020 436f 6465 4564 6974          CodeEdit
+000063c0: 6f72 2e69 6e73 7461 6e63 6573 5b61 695b  or.instances[ai[
+000063d0: 315d 5d20 3d20 6169 5b32 5d0d 0a0d 0a20  1]] = ai[2].... 
+000063e0: 2020 2020 2020 2070 7269 6e74 2822 5c6e         print("\n
+000063f0: 4e45 5720 494e 5354 414e 4345 535c 6e22  NEW INSTANCES\n"
+00006400: 2c20 436f 6465 4564 6974 6f72 2e69 6e73  , CodeEditor.ins
+00006410: 7461 6e63 6573 290d 0a0d 0a0d 0a20 2020  tances)......   
+00006420: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00006430: 2020 2020 2020 2073 656c 662e 6275 696c         self.buil
+00006440: 645f 7072 6f6a 6563 7428 7369 6c65 6e74  d_project(silent
+00006450: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+00006460: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
+00006470: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
+00006480: 2822 5361 7665 6420 2220 2b20 7365 6c66  ("Saved " + self
+00006490: 2e63 7572 7265 6e74 5f66 696c 6529 0d0a  .current_file)..
+000064a0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+000064b0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+000064c0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000064d0: 7365 6c66 2e6e 6f74 6966 7928 7374 7228  self.notify(str(
+000064e0: 6529 2c74 6974 6c65 3d22 4578 6365 7074  e),title="Except
+000064f0: 696f 6e22 290d 0a20 2020 2020 2020 2020  ion")..         
+00006500: 2020 2070 7269 6e74 2873 7472 2865 2929     print(str(e))
+00006510: 0d0a 0d0a 0d0a 0d0a 2020 2020 6465 6620  ........    def 
+00006520: 7275 6e5f 7072 6f6a 6563 7428 7365 6c66  run_project(self
+00006530: 293a 0d0a 0d0a 2020 2020 2020 2020 7365  ):....        se
+00006540: 6c66 2e73 6176 655f 616e 645f 6275 696c  lf.save_and_buil
+00006550: 6428 290d 0a0d 0a20 2020 2020 2020 2023  d()....        #
+00006560: 2073 656c 662e 7368 6f77 5f6f 7574 7075   self.show_outpu
+00006570: 745f 6469 7370 6c61 7928 290d 0a0d 0a20  t_display().... 
+00006580: 2020 2020 2020 2073 656c 662e 7365 7443         self.setC
+00006590: 7572 736f 7228 5174 2e57 6169 7443 7572  ursor(Qt.WaitCur
+000065a0: 736f 7229 0d0a 0d0a 2020 2020 2020 2020  sor)....        
+000065b0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+000065c0: 2020 2320 7365 6c66 2e74 6162 5769 6467    # self.tabWidg
+000065d0: 6574 2e73 6574 4375 7272 656e 7449 6e64  et.setCurrentInd
+000065e0: 6578 2831 290d 0a0d 0a20 2020 2020 2020  ex(1)....       
+000065f0: 2020 2020 2023 6669 6c65 6e61 6d65 203d       #filename =
+00006600: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+00006610: 2873 656c 662e 6375 7272 656e 745f 6669  (self.current_fi
+00006620: 6c65 2920 2b20 222f 7079 7468 6f6e 5f63  le) + "/python_c
+00006630: 6f64 652f 6d61 696e 6c6f 6f70 2e70 7922  ode/mainloop.py"
+00006640: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00006650: 6c65 6e61 6d65 203d 206f 732e 7061 7468  lename = os.path
+00006660: 2e64 6972 6e61 6d65 2873 656c 662e 6375  .dirname(self.cu
+00006670: 7272 656e 745f 6669 6c65 2920 2b20 222f  rrent_file) + "/
+00006680: 7275 6e6e 6572 2e70 7922 0d0a 2020 2020  runner.py"..    
+00006690: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
+000066a0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+000066b0: 2873 656c 662e 6375 7272 656e 745f 6669  (self.current_fi
+000066c0: 6c65 2920 2b20 222f 220d 0a0d 0a20 2020  le) + "/"....   
+000066d0: 2020 2020 2020 2020 2069 6620 2220 2220           if " " 
+000066e0: 696e 2066 696c 656e 616d 6520 6f72 2022  in filename or "
+000066f0: 2022 2069 6e20 666f 6c64 6572 3a0d 0a20   " in folder:.. 
+00006700: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00006710: 656c 662e 6e6f 7469 6679 2874 6974 6c65  elf.notify(title
+00006720: 3d22 496e 7661 6c69 6420 6669 6c65 206e  ="Invalid file n
+00006730: 616d 6522 2c20 6d65 7373 6167 653d 2254  ame", message="T
+00006740: 6865 7265 2061 7265 2073 7061 6365 7320  here are spaces 
+00006750: 696e 2079 6f75 7220 666f 6c64 6572 206f  in your folder o
+00006760: 7220 6669 6c65 206e 616d 652e 2054 6869  r file name. Thi
+00006770: 7320 6d69 6768 7420 6361 7573 6520 7072  s might cause pr
+00006780: 6f62 6c65 6d73 2e22 290d 0a0d 0a20 2020  oblems.")....   
+00006790: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+000067a0: 6c6f 6f6b 7570 222c 2066 696c 656e 616d  lookup", filenam
+000067b0: 652c 2022 696e 222c 2066 6f6c 6465 7229  e, "in", folder)
+000067c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000067d0: 6f6c 645f 6469 7220 3d20 6f73 2e67 6574  old_dir = os.get
+000067e0: 6377 6428 290d 0a20 2020 2020 2020 2020  cwd()..         
+000067f0: 2020 2023 2070 7269 6e74 2822 6f6c 645f     # print("old_
+00006800: 6469 7222 2c6f 6c64 5f64 6972 290d 0a0d  dir",old_dir)...
+00006810: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
+00006820: 6368 6469 7228 666f 6c64 6572 290d 0a20  chdir(folder).. 
+00006830: 2020 2020 2020 2020 2020 2063 6d64 203d             cmd =
+00006840: 2022 636f 6e64 6120 6163 7469 7661 7465   "conda activate
+00006850: 2061 7474 756e 6520 2f6b 2070 7974 686f   attune /k pytho
+00006860: 6e20 2573 2220 2520 6669 6c65 6e61 6d65  n %s" % filename
+00006870: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00006880: 696e 7428 2243 4f4d 4d41 4e44 222c 2063  int("COMMAND", c
+00006890: 6d64 290d 0a20 2020 2020 2020 2020 2020  md)..           
+000068a0: 206f 732e 7379 7374 656d 2822 7374 6172   os.system("star
+000068b0: 7420 636d 6420 2020 2020 2573 2220 2520  t cmd     %s" % 
+000068c0: 636d 6429 0d0a 0d0a 2020 2020 2020 2020  cmd)....        
+000068d0: 2020 2020 6f73 2e63 6864 6972 286f 6c64      os.chdir(old
+000068e0: 5f64 6972 290d 0a0d 0a20 2020 2020 2020  _dir)....       
+000068f0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00006900: 6e20 6173 2065 3a0d 0a0d 0a20 2020 2020  n as e:....     
+00006910: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+00006920: 6679 2873 7472 2865 292c 7469 746c 653d  fy(str(e),title=
+00006930: 2222 290d 0a20 2020 2020 2020 2020 2020  "")..           
+00006940: 2073 656c 662e 7365 7443 7572 736f 7228   self.setCursor(
+00006950: 5174 2e41 7272 6f77 4375 7273 6f72 290d  Qt.ArrowCursor).
+00006960: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00006970: 7365 7443 7572 736f 7228 5174 2e41 7272  setCursor(Qt.Arr
+00006980: 6f77 4375 7273 6f72 290d 0a0d 0a20 2020  owCursor)....   
+00006990: 2064 6566 2062 7569 6c64 5f70 726f 6a65   def build_proje
+000069a0: 6374 2873 656c 662c 7369 6c65 6e74 3d46  ct(self,silent=F
+000069b0: 616c 7365 2c6f 7665 7277 7269 7465 3d46  alse,overwrite=F
+000069c0: 616c 7365 293a 0d0a 0d0a 2020 2020 2020  alse):....      
+000069d0: 2020 2366 6f6c 6465 7220 3d20 5146 696c    #folder = QFil
+000069e0: 6544 6961 6c6f 672e 6765 7445 7869 7374  eDialog.getExist
+000069f0: 696e 6744 6972 6563 746f 7279 2028 7365  ingDirectory (se
+00006a00: 6c66 2c20 2742 7569 6c64 2050 726f 6a65  lf, 'Build Proje
+00006a10: 6374 2e2e 2e27 2c20 6f73 2e67 6574 6377  ct...', os.getcw
+00006a20: 6428 2929 0d0a 0d0a 2020 2020 2020 2020  d())....        
+00006a30: 6966 2073 656c 662e 6375 7272 656e 745f  if self.current_
+00006a40: 6669 6c65 2069 7320 4e6f 6e65 3a0d 0a20  file is None:.. 
+00006a50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00006a60: 6e6f 7469 6679 286d 6573 7361 6765 3d22  notify(message="
+00006a70: 4361 6e6e 6f74 2062 7569 6c64 2070 726f  Cannot build pro
+00006a80: 6a65 6374 2e20 506c 6561 7365 2073 6176  ject. Please sav
+00006a90: 6520 746f 2066 696c 6520 6669 7273 742e  e to file first.
+00006aa0: 222c 7469 746c 653d 2245 7272 6f72 2229  ",title="Error")
+00006ab0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00006ac0: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
+00006ad0: 666f 6c64 6572 203d 206f 732e 7061 7468  folder = os.path
+00006ae0: 2e64 6972 6e61 6d65 2873 656c 662e 6375  .dirname(self.cu
+00006af0: 7272 656e 745f 6669 6c65 290d 0a20 2020  rrent_file)..   
+00006b00: 2020 2020 2070 7269 6e74 2822 6275 696c       print("buil
+00006b10: 6420 7072 6f6a 6563 7420 696e 2022 2c20  d project in ", 
+00006b20: 666f 6c64 6572 290d 0a0d 0a20 2020 2020  folder)....     
+00006b30: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00006b40: 2020 2020 206f 732e 6d6b 6469 7228 666f       os.mkdir(fo
+00006b50: 6c64 6572 202b 2022 2f6d 616d 6261 5f63  lder + "/mamba_c
+00006b60: 6f64 652f 2229 0d0a 2020 2020 2020 2020  ode/")..        
+00006b70: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
+00006b80: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
+00006b90: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00006ba0: 2020 2020 2020 206f 732e 6d6b 6469 7228         os.mkdir(
+00006bb0: 666f 6c64 6572 202b 2022 2f70 7974 686f  folder + "/pytho
+00006bc0: 6e5f 636f 6465 2f22 290d 0a20 2020 2020  n_code/")..     
+00006bd0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+00006be0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+00006bf0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00006c00: 2020 2020 2020 2020 2020 6f73 2e6d 6b64            os.mkd
+00006c10: 6972 2866 6f6c 6465 7220 2b20 222f 6f75  ir(folder + "/ou
+00006c20: 7470 7574 2f22 290d 0a20 2020 2020 2020  tput/")..       
+00006c30: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+00006c40: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
+00006c50: 2020 2020 2020 7472 793a 0d0a 0d0a 2020        try:....  
+00006c60: 2020 2020 2020 2020 2020 666f 7220 6167            for ag
+00006c70: 656e 742c 2063 6f64 6520 696e 2073 656c  ent, code in sel
+00006c80: 662e 6472 6177 6361 6e76 6173 2e63 6f64  f.drawcanvas.cod
+00006c90: 655f 6461 7461 2e69 7465 6d73 2829 3a0d  e_data.items():.
+00006ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006cb0: 2069 6620 6167 656e 7420 696e 2043 6f64   if agent in Cod
+00006cc0: 6545 6469 746f 722e 696e 7374 616e 6365  eEditor.instance
+00006cd0: 733a 2023 206f 6e6c 7920 636f 6e76 6572  s: # only conver
+00006ce0: 7420 6564 6974 6564 2063 6f64 650d 0a0d  t edited code...
+00006cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006d00: 2020 2020 2023 2077 7269 7465 206d 616d       # write mam
+00006d10: 6261 2063 6f64 6520 666f 7220 636f 6d70  ba code for comp
+00006d20: 6c65 7465 6e65 7373 0d0a 2020 2020 2020  leteness..      
+00006d30: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+00006d40: 7468 203d 2066 6f6c 6465 7220 2b20 222f  th = folder + "/
+00006d50: 6d61 6d62 615f 636f 6465 2f25 732e 7079  mamba_code/%s.py
+00006d60: 2220 2520 6167 656e 7420 2320 666f 726d  " % agent # form
+00006d70: 6572 202e 7478 740d 0a0d 0a20 2020 2020  er .txt....     
+00006d80: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00006d90: 7269 6e74 2822 7061 7468 222c 7061 7468  rint("path",path
+00006da0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00006db0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+00006dc0: 656e 2870 6174 682c 2022 7722 2920 6173  en(path, "w") as
+00006dd0: 2066 696c 653a 0d0a 2020 2020 2020 2020   file:..        
+00006de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006df0: 6669 6c65 2e77 7269 7465 2863 6f64 6529  file.write(code)
+00006e00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00006e10: 2020 2020 2020 2020 2320 7772 6974 6520          # write 
+00006e20: 7079 7468 6f6e 2063 6f64 650d 0a20 2020  python code..   
+00006e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006e40: 2070 6174 6820 3d20 666f 6c64 6572 202b   path = folder +
+00006e50: 2022 2f70 7974 686f 6e5f 636f 6465 2f25   "/python_code/%
+00006e60: 732e 7079 2220 2520 6167 656e 742e 6c6f  s.py" % agent.lo
+00006e70: 7765 7228 290d 0a0d 0a20 2020 2020 2020  wer()....       
+00006e80: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00006e90: 6e74 2822 7061 7468 222c 7061 7468 290d  nt("path",path).
+00006ea0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00006eb0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+00006ec0: 2870 6174 682c 2022 7722 2920 6173 2066  (path, "w") as f
+00006ed0: 696c 653a 0d0a 2020 2020 2020 2020 2020  ile:..          
+00006ee0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+00006ef0: 775f 636f 6465 203d 2063 6f6e 7665 7274  w_code = convert
+00006f00: 5f63 6f64 6528 636f 6465 2e73 706c 6974  _code(code.split
+00006f10: 2822 5c6e 2229 295b 305d 0d0a 2020 2020  ("\n"))[0]..    
+00006f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f30: 2020 2020 6e65 775f 636f 6465 203d 206e      new_code = n
+00006f40: 6577 5f63 6f64 652e 656e 636f 6465 2822  ew_code.encode("
+00006f50: 7574 662d 3822 292e 6465 636f 6465 2827  utf-8").decode('
+00006f60: 6370 3132 3532 2729 0d0a 2020 2020 2020  cp1252')..      
+00006f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f80: 2020 6669 6c65 2e77 7269 7465 286e 6577    file.write(new
+00006f90: 5f63 6f64 6529 2023 2063 6f6e 7665 7274  _code) # convert
+00006fa0: 2075 7369 6e67 2074 6865 206d 616d 6261   using the mamba
+00006fb0: 2069 6e74 6572 7072 6574 6572 0d0a 0d0a   interpreter....
+00006fc0: 2020 2020 2020 2020 2020 2020 2320 7772              # wr
+00006fd0: 6974 6520 7365 7474 696e 6773 2066 696c  ite settings fil
+00006fe0: 650d 0a20 2020 2020 2020 2020 2020 2077  e..            w
+00006ff0: 6974 6820 6f70 656e 2866 6f6c 6465 7220  ith open(folder 
+00007000: 2b20 222f 7365 7474 696e 6773 2e79 6d6c  + "/settings.yml
+00007010: 222c 2277 2229 2061 7320 6669 6c65 3a0d  ","w") as file:.
+00007020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007030: 2066 696c 652e 7772 6974 6528 7365 6c66   file.write(self
+00007040: 2e73 6574 7469 6e67 735f 7374 7229 0d0a  .settings_str)..
+00007050: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00007060: 7772 6974 6520 7468 6520 7275 6e6e 6572  write the runner
+00007070: 2066 696c 650d 0a20 2020 2020 2020 2020   file..         
+00007080: 2020 2069 6620 7365 6c66 2e6d 6169 6e6c     if self.mainl
+00007090: 6f6f 705f 7374 7220 3d3d 2022 2220 6f72  oop_str == "" or
+000070a0: 206f 7665 7277 7269 7465 3a0d 0a20 2020   overwrite:..   
+000070b0: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+000070c0: 6820 6f70 656e 2866 6f6c 6465 722b 222f  h open(folder+"/
+000070d0: 7275 6e6e 6572 2e70 7922 2c22 7722 2920  runner.py","w") 
+000070e0: 6173 2066 696c 653a 0d0a 2020 2020 2020  as file:..      
+000070f0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00007100: 6c65 2e77 7269 7465 2822 6672 6f6d 2070  le.write("from p
+00007110: 7974 686f 6e5f 636f 6465 2e6d 6169 6e6c  ython_code.mainl
+00007120: 6f6f 7020 696d 706f 7274 2072 756e 5c6e  oop import run\n
+00007130: 5c6e 7275 6e28 295c 6e22 290d 0a0d 0a20  \nrun()\n").... 
+00007140: 2020 2020 2020 2020 2020 2023 2077 7269             # wri
+00007150: 7465 206d 6169 6e20 7369 6d75 6c61 7469  te main simulati
+00007160: 6f6e 2066 696c 650d 0a20 2020 2020 2020  on file..       
+00007170: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
+00007180: 6f6c 6465 7220 2b20 222f 7079 7468 6f6e  older + "/python
+00007190: 5f63 6f64 652f 6d61 696e 6c6f 6f70 2e70  _code/mainloop.p
+000071a0: 7922 2c22 7722 2920 6173 2066 696c 653a  y","w") as file:
+000071b0: 0d0a 2020 2020 2020 2020 2020 2020 2377  ..            #w
+000071c0: 6974 6820 6f70 656e 2866 6f6c 6465 7220  ith open(folder 
+000071d0: 2b20 222e 2f6d 6169 6e6c 6f6f 702e 7079  + "./mainloop.py
+000071e0: 222c 2277 2229 2061 7320 6669 6c65 3a0d  ","w") as file:.
+000071f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007200: 2069 6620 7365 6c66 2e6d 6169 6e6c 6f6f   if self.mainloo
+00007210: 705f 7374 7220 3d3d 2022 2220 6f72 206f  p_str == "" or o
+00007220: 7665 7277 7269 7465 3a0d 0a0d 0a20 2020  verwrite:....   
+00007230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007240: 2069 6620 6f76 6572 7772 6974 653a 0d0a   if overwrite:..
+00007250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007260: 2020 2020 2020 2020 7965 7320 3d20 7365          yes = se
+00007270: 6c66 2e61 736b 5f71 7565 7374 696f 6e28  lf.ask_question(
+00007280: 2727 2c20 2257 4152 4e49 4e47 202d 2059  '', "WARNING - Y
+00007290: 6f75 2061 7265 2061 626f 7574 2074 6f20  ou are about to 
+000072a0: 6372 6561 7465 2061 2066 7265 7368 206d  create a fresh m
+000072b0: 6169 6e20 7363 7269 7074 2e20 5468 6973  ain script. This
+000072c0: 2063 6f75 6c64 2070 6f74 656e 7469 616c   could potential
+000072d0: 6c79 206f 7665 7277 7269 7465 2070 7265  ly overwrite pre
+000072e0: 7669 6f75 7320 7665 7273 696f 6e73 2028  vious versions (
+000072f0: 6966 2061 6e79 292e 5c6e 5468 6973 206f  if any).\nThis o
+00007300: 7065 7261 7469 6f6e 2063 616e 6e6f 7420  peration cannot 
+00007310: 6265 2072 6576 6572 7465 642e 2043 6f6e  be reverted. Con
+00007320: 7469 6e75 653f 2229 0d0a 2020 2020 2020  tinue?")..      
+00007330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007340: 2020 6966 206e 6f74 2079 6573 3a0d 0a20    if not yes:.. 
+00007350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007360: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00007370: 6e0d 0a0d 0a20 2020 2020 2020 2020 2020  n....           
+00007380: 2020 2020 2020 2020 2069 6620 6f76 6572           if over
+00007390: 7772 6974 6520 616e 6420 7365 6c66 2e6d  write and self.m
+000073a0: 6169 6e6c 6f6f 705f 7374 7220 213d 2022  ainloop_str != "
+000073b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000073c0: 2020 2020 2020 2020 2020 2020 7769 7468              with
+000073d0: 206f 7065 6e28 666f 6c64 6572 202b 2022   open(folder + "
+000073e0: 2f70 7974 686f 6e5f 636f 6465 2f6d 6169  /python_code/mai
+000073f0: 6e6c 6f6f 705f 6261 636b 7570 2e70 7922  nloop_backup.py"
+00007400: 2c22 7722 2920 6173 2062 6163 6b75 7066  ,"w") as backupf
+00007410: 696c 653a 0d0a 2020 2020 2020 2020 2020  ile:..          
+00007420: 2020 2020 2020 2020 2020 2020 2020 2377                #w
+00007430: 6974 6820 6f70 656e 2866 6f6c 6465 7220  ith open(folder 
+00007440: 2b20 222e 2f6d 6169 6e6c 6f6f 705f 6261  + "./mainloop_ba
+00007450: 636b 7570 2e70 7922 2c22 7722 2920 6173  ckup.py","w") as
+00007460: 2062 6163 6b75 7066 696c 653a 0d0a 2020   backupfile:..  
+00007470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007480: 2020 2020 2020 2020 2020 6261 636b 7570            backup
+00007490: 6669 6c65 2e77 7269 7465 2873 656c 662e  file.write(self.
+000074a0: 6d61 696e 6c6f 6f70 5f73 7472 2e72 6570  mainloop_str.rep
+000074b0: 6c61 6365 2822 5c74 222c 2220 2020 2022  lace("\t","    "
+000074c0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+000074d0: 2020 2020 2020 2020 2020 7369 6d75 5f73            simu_s
+000074e0: 7472 203d 2022 2222 0d0a 5c22 5c22 5c22  tr = """..\"\"\"
+000074f0: 0d0a 5468 6973 2074 6865 206d 6169 6e20  ..This the main 
+00007500: 4142 4d20 5369 6d75 6c61 7469 6f6e 2066  ABM Simulation f
+00007510: 696c 650d 0a43 7265 7461 6564 2077 6974  ile..Cretaed wit
+00007520: 6820 4d41 4d42 4120 4755 490d 0a0d 0a40  h MAMBA GUI....@
+00007530: 6175 7468 6f72 3a20 3c59 6f75 7220 6e61  author: <Your na
+00007540: 6d65 3e0d 0a40 6461 7465 3a20 3c59 6f75  me>..@date: <You
+00007550: 7220 6461 7465 3e0d 0a5c 225c 225c 220d  r date>..\"\"\".
+00007560: 0a0d 0a66 726f 6d20 7366 6374 6f6f 6c73  ...from sfctools
+00007570: 2069 6d70 6f72 7420 4167 656e 742c 2057   import Agent, W
+00007580: 6f72 6c64 2c20 5365 7474 696e 6773 2c20  orld, Settings, 
+00007590: 436c 6f63 6b2c 2046 6c6f 774d 6174 7269  Clock, FlowMatri
+000075a0: 780d 0a22 2222 0d0a 2020 2020 2020 2020  x.."""..        
+000075b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000075c0: 6167 656e 7420 696e 2073 656c 662e 6472  agent in self.dr
+000075d0: 6177 6361 6e76 6173 2e63 6f64 655f 6461  awcanvas.code_da
+000075e0: 7461 2e6b 6579 7328 293a 0d0a 2020 2020  ta.keys():..    
 000075f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007600: 2023 2020 2020 6120 3d20 6167 656e 742e   #    a = agent.
-00007610: 6361 7069 7461 6c69 7a65 2829 0d0a 2020  capitalize()..  
-00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007630: 2020 2320 2020 2073 696d 755f 7374 7220    #    simu_str 
-00007640: 2b3d 2022 5c74 5b69 2e6c 696e 6b28 2920  += "\t[i.link() 
-00007650: 666f 7220 6920 696e 2025 735f 7069 6c65  for i in %s_pile
-00007660: 5d5c 6e22 2025 2028 6129 0d0a 0d0a 2020  ]\n" % (a)....  
-00007670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007680: 2020 7369 6d75 5f73 7472 202b 3d20 2222    simu_str += ""
-00007690: 220d 0a20 2020 2066 6f72 2069 2069 6e20  "..    for i in 
-000076a0: 7261 6e67 6528 5429 3a0d 0a20 2020 2020  range(T):..     
-000076b0: 2020 2069 7465 7228 290d 0a0d 0a20 2020     iter()....   
-000076c0: 2020 2020 2023 2054 4f44 4f20 7772 6974       # TODO writ
-000076d0: 6520 6f75 7470 7574 7320 6865 7265 202e  e outputs here .
-000076e0: 2e2e 0d0a 0d0a 2020 2020 2020 2020 436c  ......        Cl
-000076f0: 6f63 6b28 292e 7469 636b 2829 0d0a 0d0a  ock().tick()....
-00007700: 2020 2020 7072 696e 7428 466c 6f77 4d61      print(FlowMa
-00007710: 7472 6978 2829 2e74 6f5f 7374 7269 6e67  trix().to_string
-00007720: 2829 290d 0a22 2222 0d0a 2020 2020 2020  ()).."""..      
-00007730: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00007740: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7220  lf.mainloop_str 
-00007750: 3d20 7369 6d75 5f73 7472 0d0a 0d0a 2020  = simu_str....  
-00007760: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00007770: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00007780: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
-00007790: 7220 3d20 7365 6c66 2e6d 6169 6e6c 6f6f  r = self.mainloo
-000077a0: 705f 7374 720d 0a0d 0a20 2020 2020 2020  p_str....       
-000077b0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-000077c0: 5349 4d55 2053 5452 222c 2073 696d 755f  SIMU STR", simu_
-000077d0: 7374 7229 0d0a 2020 2020 2020 2020 2020  str)..          
-000077e0: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-000077f0: 2873 696d 755f 7374 722e 7265 706c 6163  (simu_str.replac
-00007800: 6528 225c 7422 2c22 2020 2020 2229 290d  e("\t","    ")).
-00007810: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00007820: 2020 2069 6620 6e6f 7420 7369 6c65 6e74     if not silent
-00007830: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007840: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00007850: 6679 2822 5072 6f6a 6563 7420 6669 6c65  fy("Project file
-00007860: 7320 6275 696c 7421 222c 7469 746c 653d  s built!",title=
-00007870: 2253 7563 6365 7373 2229 0d0a 0d0a 2020  "Success")....  
-00007880: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00007890: 6c66 2e67 656e 5f63 6f64 6528 2920 2320  lf.gen_code() # 
-000078a0: 6765 6e65 7261 7465 2074 7261 6e73 6163  generate transac
-000078b0: 7469 6f6e 732e 7079 0d0a 0d0a 2020 2020  tions.py....    
-000078c0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-000078d0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-000078e0: 2020 2020 2020 2020 6578 6365 7074 696f          exceptio
-000078f0: 6e5f 7479 7065 2c20 6578 6365 7074 696f  n_type, exceptio
-00007900: 6e5f 6f62 6a65 6374 2c20 6578 6365 7074  n_object, except
-00007910: 696f 6e5f 7472 6163 6562 6163 6b20 3d20  ion_traceback = 
-00007920: 7379 732e 6578 635f 696e 666f 2829 0d0a  sys.exc_info()..
-00007930: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00007940: 2e6e 6f74 6966 7928 2243 6f75 6c64 206e  .notify("Could n
-00007950: 6f74 2062 7569 6c64 2070 726f 6a65 6374  ot build project
-00007960: 2e5c 6e22 202b 2073 7472 2865 7863 6570  .\n" + str(excep
-00007970: 7469 6f6e 5f6f 626a 6563 7429 202b 2073  tion_object) + s
-00007980: 7472 2865 7863 6570 7469 6f6e 5f74 7261  tr(exception_tra
-00007990: 6365 6261 636b 292c 7469 746c 653d 2245  ceback),title="E
-000079a0: 7272 6f72 206f 6e20 5072 6f6a 6563 7420  rror on Project 
-000079b0: 4275 696c 6422 290d 0a0d 0a20 2020 2064  Build")....    d
-000079c0: 6566 2061 7574 6f5f 6261 636b 7570 2873  ef auto_backup(s
-000079d0: 656c 6629 3a0d 0a20 2020 2020 2020 2074  elf):..        t
-000079e0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-000079f0: 2066 6f6c 6465 7220 3d20 7365 6c66 2e63   folder = self.c
-00007a00: 7572 7265 6e74 5f66 696c 650d 0a20 2020  urrent_file..   
-00007a10: 2020 2020 2020 2020 2069 6620 666f 6c64           if fold
-00007a20: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0d  er is not None:.
-00007a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007a40: 2073 656c 662e 7361 7665 6173 2866 6f6c   self.saveas(fol
-00007a50: 6465 725b 3a2d 365d 202b 225f 6175 746f  der[:-6] +"_auto
-00007a60: 6261 636b 7570 2e73 6663 746c 2229 2023  backup.sfctl") #
-00007a70: 206d 616b 6573 2061 2062 6163 6b75 7020   makes a backup 
-00007a80: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
-00007a90: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00007aa0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-00007ab0: 6e6f 7469 6679 2822 596f 7520 6172 6520  notify("You are 
-00007ac0: 776f 726b 696e 6720 6f6e 2061 2062 6c61  working on a bla
-00007ad0: 6e6b 2070 726f 6a65 6374 2066 696c 652e  nk project file.
-00007ae0: 2050 6c65 6173 6520 7361 7665 2079 6f75   Please save you
-00007af0: 7220 6368 616e 6765 7320 736f 6f6e 2e22  r changes soon."
-00007b00: 2c20 7469 746c 653d 2257 6172 6e69 6e67  , title="Warning
-00007b10: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00007b20: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
-00007b30: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
-00007b40: 2822 5741 524e 494e 473a 2059 6f75 2061  ("WARNING: You a
-00007b50: 7265 2077 6f72 6b69 6e67 206f 6e20 6120  re working on a 
-00007b60: 626c 616e 6b20 7072 6f6a 6563 7420 6669  blank project fi
-00007b70: 6c65 2e20 506c 6561 7365 2073 6176 6520  le. Please save 
-00007b80: 796f 7572 2063 6861 6e67 6573 2073 6f6f  your changes soo
-00007b90: 6e2e 2229 0d0a 2020 2020 2020 2020 6578  n.")..        ex
-00007ba0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-00007bb0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
-00007bc0: 2020 7365 6c66 2e6e 6f74 6966 7928 7374    self.notify(st
-00007bd0: 7228 6529 2c20 7469 746c 653d 2245 7272  r(e), title="Err
-00007be0: 6f72 206f 6e20 4175 746f 4261 636b 7570  or on AutoBackup
-00007bf0: 2229 0d0a 0d0a 2020 2020 6465 6620 6564  ")....    def ed
-00007c00: 6974 5f73 6574 7469 6e67 7328 7365 6c66  it_settings(self
-00007c10: 293a 0d0a 2020 2020 2020 2020 6966 2073  ):..        if s
-00007c20: 656c 662e 7365 7474 696e 6773 5f73 7472  elf.settings_str
-00007c30: 203d 3d22 2220 6f72 2073 656c 662e 7365   =="" or self.se
-00007c40: 7474 696e 6773 5f73 7472 2069 7320 4e6f  ttings_str is No
-00007c50: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00007c60: 2073 656c 662e 6e6f 7469 6679 286d 6573   self.notify(mes
-00007c70: 7361 6765 3d22 536f 6d65 7468 696e 6720  sage="Something 
-00007c80: 7765 6e74 2077 726f 6e67 2e20 4861 7665  went wrong. Have
-00007c90: 2079 6f75 2062 7569 6c74 2074 6865 2070   you built the p
-00007ca0: 726f 6a65 6374 3f22 2c74 6974 6c65 3d22  roject?",title="
-00007cb0: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
-00007cc0: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-00007cd0: 2020 2020 2020 206d 795f 6564 6974 203d         my_edit =
-00007ce0: 2053 6574 7469 6e67 7345 6469 746f 7228   SettingsEditor(
-00007cf0: 7061 7265 6e74 3d73 656c 662c 2074 6578  parent=self, tex
-00007d00: 743d 7365 6c66 2e73 6574 7469 6e67 735f  t=self.settings_
-00007d10: 7374 7229 0d0a 0d0a 2020 2020 6465 6620  str)....    def 
-00007d20: 6564 6974 5f67 7261 7068 5f61 6765 6e74  edit_graph_agent
-00007d30: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00007d40: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00007d50: 2e65 6469 745f 6167 656e 7428 290d 0a0d  .edit_agent()...
-00007d60: 0a20 2020 2064 6566 2063 6861 6e67 655f  .    def change_
-00007d70: 6772 6170 686d 6f64 655f 7365 6c65 6374  graphmode_select
-00007d80: 2873 656c 6629 3a0d 0a0d 0a20 2020 2020  (self):....     
-00007d90: 2020 2073 656c 662e 6472 6177 6361 6e76     self.drawcanv
-00007da0: 6173 2e6d 6f64 6520 3d20 2273 656c 6563  as.mode = "selec
-00007db0: 7422 0d0a 0d0a 2020 2020 6465 6620 6368  t"....    def ch
-00007dc0: 616e 6765 5f67 7261 7068 6d6f 6465 5f64  ange_graphmode_d
-00007dd0: 7261 6728 7365 6c66 293a 0d0a 0d0a 2020  rag(self):....  
-00007de0: 2020 2020 2020 7365 6c66 2e64 7261 7763        self.drawc
-00007df0: 616e 7661 732e 6d6f 6465 203d 2022 6472  anvas.mode = "dr
-00007e00: 6167 220d 0a0d 0a20 2020 2064 6566 2061  ag"....    def a
-00007e10: 7272 616e 6765 5f70 7265 7474 7928 7365  rrange_pretty(se
-00007e20: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
-00007e30: 6c66 2e75 7064 6174 655f 7461 626c 6528  lf.update_table(
-00007e40: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00007e50: 6472 6177 6361 6e76 6173 2e61 7272 616e  drawcanvas.arran
-00007e60: 6765 5f70 7265 7474 7928 290d 0a0d 0a0d  ge_pretty().....
-00007e70: 0a20 2020 2064 6566 2075 7064 6174 655f  .    def update_
-00007e80: 6772 6170 6869 6373 5f64 6174 6128 7365  graphics_data(se
-00007e90: 6c66 2c20 626f 782c 2063 6f6e 6e29 3a0d  lf, box, conn):.
-00007ea0: 0a20 2020 2020 2020 2070 6173 730d 0a0d  .        pass...
-00007eb0: 0a0d 0a20 2020 2064 6566 2073 7769 7463  ...    def switc
-00007ec0: 685f 7468 656d 6528 7365 6c66 293a 0d0a  h_theme(self):..
-00007ed0: 0d0a 0d0a 2020 2020 2020 2020 2320 6672  ....        # fr
-00007ee0: 6f6d 2071 745f 6d61 7465 7269 616c 2069  om qt_material i
-00007ef0: 6d70 6f72 7420 6170 706c 795f 7374 796c  mport apply_styl
-00007f00: 6573 6865 6574 0d0a 0d0a 2020 2020 2020  esheet....      
-00007f10: 2020 6966 2073 656c 662e 7468 656d 655f    if self.theme_
-00007f20: 6d61 6e61 6765 722e 7468 656d 6520 3d3d  manager.theme ==
-00007f30: 2022 6461 726b 223a 0d0a 2020 2020 2020   "dark":..      
-00007f40: 2020 2020 2020 7365 6c66 2e74 6865 6d65        self.theme
-00007f50: 5f6d 616e 6167 6572 2e74 6865 6d65 203d  _manager.theme =
-00007f60: 2022 6272 6967 6874 220d 0a0d 0a20 2020   "bright"....   
-00007f70: 2020 2020 2065 6c69 6620 7365 6c66 2e74       elif self.t
-00007f80: 6865 6d65 5f6d 616e 6167 6572 2e74 6865  heme_manager.the
-00007f90: 6d65 203d 3d20 2262 7269 6768 7422 3a0d  me == "bright":.
-00007fa0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00007fb0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-00007fc0: 7468 656d 6520 3d20 2264 6172 6b22 0d0a  theme = "dark"..
-00007fd0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00007fe0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-00007ff0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00008000: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
-00008010: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
-00008020: 2020 2020 2073 656c 662e 7468 656d 655f       self.theme_
-00008030: 6d61 6e61 6765 722e 7265 7374 6f72 655f  manager.restore_
-00008040: 6275 7474 6f6e 7328 290d 0a0d 0a20 2020  buttons()....   
-00008050: 2020 2020 2073 656c 662e 7461 6257 6964       self.tabWid
-00008060: 6765 745f 322e 7365 7453 7479 6c65 5368  get_2.setStyleSh
-00008070: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-00008080: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-00008090: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-000080a0: 2020 2020 2020 2020 7365 6c66 2e64 6f63          self.doc
-000080b0: 6b57 6964 6765 745f 332e 7365 7453 7479  kWidget_3.setSty
-000080c0: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
-000080d0: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
-000080e0: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
-000080f0: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00008100: 2e64 6f63 6b57 6964 6765 745f 342e 7365  .dockWidget_4.se
-00008110: 7453 7479 6c65 5368 6565 7428 7365 6c66  tStyleSheet(self
-00008120: 2e74 6865 6d65 5f6d 616e 6167 6572 2e67  .theme_manager.g
-00008130: 6574 5f62 6163 6b67 726f 756e 645f 7374  et_background_st
-00008140: 796c 6528 2929 0d0a 2020 2020 2020 2020  yle())..        
-00008150: 7365 6c66 2e64 6f63 6b57 6964 6765 745f  self.dockWidget_
-00008160: 352e 7365 7453 7479 6c65 5368 6565 7428  5.setStyleSheet(
-00008170: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00008180: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
-00008190: 645f 7374 796c 6528 2929 0d0a 0d0a 2020  d_style())....  
-000081a0: 2020 2020 2020 7365 6c66 2e77 6964 6765        self.widge
-000081b0: 742e 7365 7453 7479 6c65 5368 6565 7428  t.setStyleSheet(
-000081c0: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-000081d0: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
-000081e0: 645f 7374 796c 6528 2929 0d0a 0d0a 2020  d_style())....  
-000081f0: 2020 2020 2020 7365 6c66 2e64 6f63 6b57        self.dockW
-00008200: 6964 6765 745f 372e 7365 7453 7479 6c65  idget_7.setStyle
-00008210: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
-00008220: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
-00008230: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
-00008240: 0d0a 2020 2020 2020 2020 7365 6c66 2e74  ..        self.t
-00008250: 6162 5769 6467 6574 2e73 6574 5374 796c  abWidget.setStyl
-00008260: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
-00008270: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
-00008280: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
-00008290: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
-000082a0: 2063 6520 696e 2043 6f64 6545 6469 746f   ce in CodeEdito
-000082b0: 722e 696e 7374 616e 6365 732e 7661 6c75  r.instances.valu
-000082c0: 6573 2829 3a0d 0a20 2020 2020 2020 2020  es():..         
-000082d0: 2020 2063 652e 7365 7453 7479 6c65 5368     ce.setStyleSh
-000082e0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-000082f0: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-00008300: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-00008310: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00008320: 6765 6e74 3145 6469 742e 7365 7453 7479  gent1Edit.setSty
-00008330: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
-00008340: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
-00008350: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
-00008360: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00008370: 2e61 6765 6e74 3245 6469 742e 7365 7453  .agent2Edit.setS
-00008380: 7479 6c65 5368 6565 7428 7365 6c66 2e74  tyleSheet(self.t
-00008390: 6865 6d65 5f6d 616e 6167 6572 2e67 6574  heme_manager.get
-000083a0: 5f62 6163 6b67 726f 756e 645f 7374 796c  _background_styl
-000083b0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
-000083c0: 7472 793a 0d0a 0d0a 2020 2020 2020 2020  try:....        
-000083d0: 2020 2020 6966 204d 6169 6e4c 6f6f 7045      if MainLoopE
-000083e0: 6469 746f 722e 696e 7374 616e 6365 2069  ditor.instance i
-000083f0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00008400: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00008410: 7420 3d20 4d61 696e 4c6f 6f70 4564 6974  t = MainLoopEdit
-00008420: 6f72 2e69 6e73 7461 6e63 650d 0a20 2020  or.instance..   
-00008430: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00008440: 742e 7365 7453 7479 6c65 5368 6565 7428  t.setStyleSheet(
-00008450: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00008460: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
-00008470: 645f 7374 796c 6528 2929 0d0a 2020 2020  d_style())..    
-00008480: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-00008490: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-000084a0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-000084b0: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
-000084c0: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
-000084d0: 2020 2020 2065 7863 6570 743a 0d0a 0d0a       except:....
-000084e0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-000084f0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00008500: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
-00008510: 0a0d 0a20 2020 2020 2020 2023 2073 656c  ...        # sel
-00008520: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-00008530: 772e 7365 7453 7479 6c65 5368 6565 7428  w.setStyleSheet(
-00008540: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00008550: 6572 2e67 6574 5f74 6162 6c65 5f73 7479  er.get_table_sty
-00008560: 6c65 2829 290d 0a0d 0a20 2020 2064 6566  le())....    def
-00008570: 2061 736b 5f71 7565 7374 696f 6e28 7365   ask_question(se
-00008580: 6c66 2c74 6974 6c65 2c6d 6573 7361 6765  lf,title,message
-00008590: 293a 0d0a 2020 2020 2020 2020 2320 6173  ):..        # as
-000085a0: 6b20 6120 7175 6573 7469 6f6e 2079 6573  k a question yes
-000085b0: 202f 206e 6f0d 0a20 2020 2020 2020 206d   / no..        m
-000085c0: 7367 203d 2051 4d65 7373 6167 6542 6f78  sg = QMessageBox
-000085d0: 2851 4d65 7373 6167 6542 6f78 2e51 7565  (QMessageBox.Que
-000085e0: 7374 696f 6e2c 0d0a 2020 2020 2020 2020  stion,..        
-000085f0: 2020 2020 2020 2020 7469 746c 652c 206d          title, m
-00008600: 6573 7361 6765 2c62 7574 746f 6e73 3d51  essage,buttons=Q
-00008610: 4d65 7373 6167 6542 6f78 2e59 6573 207c  MessageBox.Yes |
-00008620: 2051 4d65 7373 6167 6542 6f78 2e4e 6f2c   QMessageBox.No,
-00008630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008640: 2020 7061 7265 6e74 3d73 656c 6629 0d0a    parent=self)..
-00008650: 2020 2020 2020 2020 6d73 672e 7365 7457          msg.setW
-00008660: 696e 646f 7754 6974 6c65 2874 6974 6c65  indowTitle(title
-00008670: 290d 0a20 2020 2020 2020 206d 7367 2e73  )..        msg.s
-00008680: 6574 5374 796c 6553 6865 6574 2873 656c  etStyleSheet(sel
-00008690: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-000086a0: 6765 745f 6e6f 7469 6669 6361 7469 6f6e  get_notification
-000086b0: 5f73 7479 6c65 2829 290d 0a20 2020 2020  _style())..     
-000086c0: 2020 206d 7367 2e65 7865 635f 2829 0d0a     msg.exec_()..
-000086d0: 2020 2020 2020 2020 7265 706c 7920 3d20          reply = 
-000086e0: 6d73 672e 7374 616e 6461 7264 4275 7474  msg.standardButt
-000086f0: 6f6e 286d 7367 2e63 6c69 636b 6564 4275  on(msg.clickedBu
-00008700: 7474 6f6e 2829 290d 0a0d 0a20 2020 2020  tton())....     
-00008710: 2020 2069 6620 7265 706c 7920 3d3d 206d     if reply == m
-00008720: 7367 2e59 6573 3a0d 0a20 2020 2020 2020  sg.Yes:..       
-00008730: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-00008740: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-00008750: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00008760: 7572 6e20 4661 6c73 650d 0a0d 0a20 2020  urn False....   
-00008770: 2064 6566 206e 6f74 6966 7928 7365 6c66   def notify(self
-00008780: 2c6d 6573 7361 6765 2c74 6974 6c65 293a  ,message,title):
-00008790: 0d0a 2020 2020 2020 2020 236d 7367 203d  ..        #msg =
-000087a0: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
-000087b0: 6629 0d0a 2020 2020 2020 2020 6d73 6720  f)..        msg 
-000087c0: 3d20 514d 6573 7361 6765 426f 7828 7365  = QMessageBox(se
-000087d0: 6c66 290d 0a20 2020 2020 2020 206d 7367  lf)..        msg
-000087e0: 2e73 6574 5769 6e64 6f77 5469 746c 6528  .setWindowTitle(
-000087f0: 7469 746c 6529 0d0a 2020 2020 2020 2020  title)..        
-00008800: 6d73 672e 7365 7454 6578 7428 6d65 7373  msg.setText(mess
-00008810: 6167 6529 0d0a 2020 2020 2020 2020 236d  age)..        #m
-00008820: 7367 2e73 6574 5374 796c 6553 6865 6574  sg.setStyleSheet
-00008830: 2873 656c 662e 7374 796c 6573 6865 6574  (self.stylesheet
-00008840: 290d 0a20 2020 2020 2020 2023 2067 6574  )..        # get
-00008850: 2062 6163 6b67 726f 756e 6420 636f 6c6f   background colo
-00008860: 7220 6672 6f6d 2074 6865 6d65 206d 616e  r from theme man
-00008870: 6167 6572 0d0a 2020 2020 2020 2020 2320  ager..        # 
-00008880: 6765 7420 666f 7265 6772 6f75 6e64 2063  get foreground c
-00008890: 6f6c 6f72 2066 726f 6d20 7468 656d 6520  olor from theme 
-000088a0: 6d61 6e61 6765 720d 0a20 2020 2020 2020  manager..       
-000088b0: 2073 7479 6c65 203d 2073 656c 662e 7468   style = self.th
-000088c0: 656d 655f 6d61 6e61 6765 722e 6765 745f  eme_manager.get_
-000088d0: 6e6f 7469 6669 6361 7469 6f6e 5f73 7479  notification_sty
-000088e0: 6c65 2829 0d0a 2020 2020 2020 2020 6d73  le()..        ms
-000088f0: 672e 7365 7453 7479 6c65 5368 6565 7428  g.setStyleSheet(
-00008900: 7374 796c 6529 0d0a 2020 2020 2020 2020  style)..        
-00008910: 6d73 672e 6f70 656e 2829 0d0a 0d0a 0d0a  msg.open()......
-00008920: 2020 2020 6465 6620 636c 6561 6e75 705f      def cleanup_
-00008930: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
-00008940: 2873 656c 662c 6461 7461 293a 0d0a 2020  (self,data):..  
-00008950: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00008960: 2020 2063 6c65 616e 7320 7570 2074 7261     cleans up tra
-00008970: 6e73 6163 7469 6f6e 2064 6174 6120 6672  nsaction data fr
-00008980: 6f6d 206f 6c64 2066 696c 6520 7665 7273  om old file vers
-00008990: 696f 6e73 0d0a 2020 2020 2020 2020 2222  ions..        ""
-000089a0: 220d 0a20 2020 2020 2020 2074 7279 3a0d  "..        try:.
-000089b0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000089c0: 6e74 2822 6f6c 645f 6461 7461 222c 6461  nt("old_data",da
-000089d0: 7461 290d 0a20 2020 2020 2020 2020 2020  ta)..           
-000089e0: 2023 2064 6174 6120 3d20 6469 6374 2864   # data = dict(d
-000089f0: 6174 6129 0d0a 2020 2020 2020 2020 2020  ata)..          
-00008a00: 2020 6e65 775f 6461 7461 203d 207b 2261    new_data = {"a
-00008a10: 6765 6e74 7322 3a7b 7d2c 2274 7261 6e73  gents":{},"trans
-00008a20: 6163 7469 6f6e 7322 3a5b 5d2c 2262 6f78  actions":[],"box
-00008a30: 5f70 6f73 6974 696f 6e73 223a 7b7d 2c20  _positions":{}, 
-00008a40: 226c 6162 656c 5f70 6f73 6974 696f 6e73  "label_positions
-00008a50: 223a 7b7d 2c22 7468 656d 6522 3a4e 6f6e  ":{},"theme":Non
-00008a60: 657d 2023 2064 6174 612e 636f 7079 2829  e} # data.copy()
-00008a70: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00008a80: 6e65 775f 6461 7461 5b22 7472 616e 7361  new_data["transa
-00008a90: 6374 696f 6e73 225d 203d 2064 6174 615b  ctions"] = data[
-00008aa0: 2274 7261 6e73 6163 7469 6f6e 7322 5d2e  "transactions"].
-00008ab0: 636f 7079 2829 0d0a 0d0a 2020 2020 2020  copy()....      
-00008ac0: 2020 2020 2020 666f 7220 6b2c 7620 696e        for k,v in
-00008ad0: 2064 6174 612e 6974 656d 7328 293a 0d0a   data.items():..
-00008ae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008af0: 2020 6966 206b 203d 3d20 2274 6865 6d65    if k == "theme
-00008b00: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-00008b10: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
-00008b20: 5b22 7468 656d 6522 5d20 3d20 6461 7461  ["theme"] = data
-00008b30: 5b6b 5d20 2320 7b22 676c 6f62 616c 7468  [k] # {"globalth
-00008b40: 656d 6522 3a20 6272 6967 6874 2f64 6172  eme": bright/dar
-00008b50: 6b2c 2022 636f 6c6f 7273 223a 2063 6f6c  k, "colors": col
-00008b60: 6f72 737d 2023 206c 6f61 6420 7468 6520  ors} # load the 
-00008b70: 636f 6c6f 7220 7468 656d 650d 0a0d 0a20  color theme.... 
-00008b80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00008b90: 6620 6b20 3d3d 2022 6167 656e 7473 223a  f k == "agents":
-00008ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008bb0: 2020 2020 2020 666f 7220 6b32 2c76 3220        for k2,v2 
-00008bc0: 696e 2064 6174 615b 6b5d 2e69 7465 6d73  in data[k].items
-00008bd0: 2829 3a0d 0a0d 0a20 2020 2020 2020 2020  ():....         
-00008be0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00008bf0: 2031 2e20 7265 6e61 6d65 2061 6765 6e74   1. rename agent
-00008c00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008c10: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00008c20: 2252 454e 414d 4520 4147 454e 5453 2e2e  "RENAME AGENTS..
-00008c30: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
-00008c40: 2020 2020 2020 2020 2020 2020 206e 6577               new
-00008c50: 5f63 6f64 655f 6c69 6e65 7320 3d20 5b5d  _code_lines = []
-00008c60: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00008c70: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00008c80: 6c69 6e65 2069 6e20 7632 2e73 706c 6974  line in v2.split
-00008c90: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-00008ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008cb0: 2020 2020 2069 6620 2241 4745 4e54 2220       if "AGENT" 
-00008cc0: 696e 206c 696e 653a 2023 2020 616e 6420  in line: #  and 
-00008cd0: 6c65 6e28 6c69 6e65 2920 3e3d 2039 3a0d  len(line) >= 9:.
-00008ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d00: 206e 6c69 6e65 203d 206c 696e 655b 3a39   nline = line[:9
-00008d10: 5d20 2b20 6361 6d65 6c28 6c69 6e65 5b39  ] + camel(line[9
-00008d20: 5d29 202b 206c 696e 655b 3130 3a5d 0d0a  ]) + line[10:]..
-00008d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d50: 7072 696e 7428 2220 2020 7265 6e61 6d65  print("   rename
-00008d60: 6422 2c20 6c69 6e65 2c6e 6c69 6e65 290d  d", line,nline).
-00008d70: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00008d80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00008d90: 6c69 6620 2243 4c41 5353 2220 696e 206c  lif "CLASS" in l
-00008da0: 696e 653a 2023 0d0a 2020 2020 2020 2020  ine: #..        
-00008db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008dc0: 2020 2020 2020 2020 6e6c 696e 6520 3d20          nline = 
-00008dd0: 206c 696e 655b 3a39 5d20 2b20 6361 6d65   line[:9] + came
-00008de0: 6c28 6c69 6e65 5b39 5d29 202b 206c 696e  l(line[9]) + lin
-00008df0: 655b 3130 3a5d 0d0a 2020 2020 2020 2020  e[10:]..        
-00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e10: 2020 2020 2020 2020 7072 696e 7428 2220          print(" 
-00008e20: 2020 7265 6e61 6d65 6422 2c20 6c69 6e65    renamed", line
-00008e30: 2c6e 6c69 6e65 290d 0a0d 0a20 2020 2020  ,nline)....     
-00008e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e50: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00008e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e70: 2020 2020 2020 2020 2020 2020 2020 6e6c                nl
-00008e80: 696e 6520 3d20 6c69 6e65 2023 2022 4e4f  ine = line # "NO
-00008e90: 5420 464f 554e 4422 2023 206c 696e 650d  T FOUND" # line.
-00008ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008eb0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-00008ec0: 7269 6e74 2822 6e6c 696e 6522 2c6e 6c69  rint("nline",nli
-00008ed0: 6e65 2c22 6f6c 6422 2c76 3229 0d0a 0d0a  ne,"old",v2)....
-00008ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ef0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-00008f00: 636f 6465 5f6c 696e 6573 2e61 7070 656e  code_lines.appen
-00008f10: 6428 6e6c 696e 6529 0d0a 0d0a 2020 2020  d(nline)....    
-00008f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f30: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-00008f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f50: 2020 2020 2020 2020 6e65 775f 636f 6465          new_code
-00008f60: 203d 2022 5c6e 222e 6a6f 696e 286e 6577   = "\n".join(new
-00008f70: 5f63 6f64 655f 6c69 6e65 7329 0d0a 0d0a  _code_lines)....
-00008f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f90: 2020 2020 2020 2020 6167 656e 745f 6e61          agent_na
-00008fa0: 6d65 203d 2063 616d 656c 2873 7472 286b  me = camel(str(k
-00008fb0: 3229 290d 0a20 2020 2020 2020 2020 2020  2))..           
-00008fc0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00008fd0: 6e74 2822 2020 2020 6167 656e 7420 6e61  nt("    agent na
-00008fe0: 6d65 222c 2073 7472 286b 3229 2c20 222d  me", str(k2), "-
-00008ff0: 3e22 202c 2063 616d 656c 2873 7472 286b  >" , camel(str(k
-00009000: 3229 2929 0d0a 0d0a 0d0a 2020 2020 2020  2)))......      
-00009010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009020: 2020 6966 2073 7472 286b 3229 2069 6e20    if str(k2) in 
-00009030: 6461 7461 5b22 626f 785f 706f 7369 7469  data["box_positi
-00009040: 6f6e 7322 5d3a 2023 2074 7279 2069 6620  ons"]: # try if 
-00009050: 6167 656e 7420 6973 2070 6c61 6365 6420  agent is placed 
-00009060: 736f 6d65 7768 6572 650d 0a0d 0a20 2020  somewhere....   
-00009070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009080: 2020 2020 2020 2020 206e 6577 5f64 6174           new_dat
-00009090: 615b 2261 6765 6e74 7322 5d5b 6167 656e  a["agents"][agen
-000090a0: 745f 6e61 6d65 5d20 3d20 6e65 775f 636f  t_name] = new_co
-000090b0: 6465 0d0a 0d0a 2020 2020 2020 2020 2020  de....          
-000090c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090d0: 2020 2320 322e 2061 7373 6967 6e20 6e65    # 2. assign ne
-000090e0: 7720 626f 7820 706f 7369 7469 6f6e 0d0a  w box position..
-000090f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009100: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00009110: 7428 2241 5353 4947 4e20 4e45 5720 424f  t("ASSIGN NEW BO
-00009120: 5820 504f 5349 5449 4f4e 532e 2e2e 2229  X POSITIONS...")
-00009130: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00009140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009150: 6f6c 645f 706f 7320 3d20 6461 7461 5b22  old_pos = data["
-00009160: 626f 785f 706f 7369 7469 6f6e 7322 5d5b  box_positions"][
-00009170: 7374 7228 6b32 295d 0d0a 2020 2020 2020  str(k2)]..      
-00009180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009190: 2020 2020 2020 6e65 775f 6461 7461 5b22        new_data["
-000091a0: 626f 785f 706f 7369 7469 6f6e 7322 5d5b  box_positions"][
-000091b0: 6167 656e 745f 6e61 6d65 5d20 3d20 6f6c  agent_name] = ol
-000091c0: 645f 706f 730d 0a0d 0a20 2020 2020 2020  d_pos....       
-000091d0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-000091e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000091f0: 2020 2020 6e65 775f 6461 7461 5b6b 5d20      new_data[k] 
-00009200: 3d20 760d 0a0d 0a20 2020 2020 2020 2020  = v....         
-00009210: 2020 2070 7269 6e74 2822 5245 4e41 4d45     print("RENAME
-00009220: 2054 5241 4e53 4143 5449 4f4e 532e 2e2e   TRANSACTIONS...
-00009230: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00009240: 2320 332e 2072 656e 616d 6520 7472 616e  # 3. rename tran
-00009250: 7361 6374 696f 6e73 0d0a 2020 2020 2020  sactions..      
-00009260: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00009270: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00009280: 692c 7420 696e 2065 6e75 6d65 7261 7465  i,t in enumerate
-00009290: 286c 6973 7428 6461 7461 5b22 7472 616e  (list(data["tran
-000092a0: 7361 6374 696f 6e73 225d 2929 3a0d 0a20  sactions"])):.. 
-000092b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000092c0: 2020 206e 6577 5f64 6174 615b 2274 7261     new_data["tra
-000092d0: 6e73 6163 7469 6f6e 7322 5d5b 695d 5b22  nsactions"][i]["
-000092e0: 6167 656e 7431 225d 203d 2063 616d 656c  agent1"] = camel
-000092f0: 2864 6174 615b 2274 7261 6e73 6163 7469  (data["transacti
-00009300: 6f6e 7322 5d5b 695d 5b22 6167 656e 7431  ons"][i]["agent1
-00009310: 225d 2920 232e 6361 7069 7461 6c69 7a65  "]) #.capitalize
-00009320: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00009330: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
-00009340: 5b22 7472 616e 7361 6374 696f 6e73 225d  ["transactions"]
-00009350: 5b69 5d5b 2261 6765 6e74 3222 5d20 3d20  [i]["agent2"] = 
-00009360: 6361 6d65 6c28 6461 7461 5b22 7472 616e  camel(data["tran
-00009370: 7361 6374 696f 6e73 225d 5b69 5d5b 2261  sactions"][i]["a
-00009380: 6765 6e74 3222 5d29 2023 2e63 6170 6974  gent2"]) #.capit
-00009390: 616c 697a 6528 290d 0a20 2020 2020 2020  alize()..       
-000093a0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-000093b0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-000093c0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-000093d0: 6570 7469 6f6e 5f74 7970 652c 2065 7863  eption_type, exc
-000093e0: 6570 7469 6f6e 5f6f 626a 6563 742c 2065  eption_object, e
-000093f0: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
-00009400: 636b 203d 2073 7973 2e65 7863 5f69 6e66  ck = sys.exc_inf
-00009410: 6f28 290d 0a20 2020 2020 2020 2020 2020  o()..           
-00009420: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
-00009430: 6578 6365 7074 696f 6e5f 7472 6163 6562  exception_traceb
-00009440: 6163 6b2e 7462 5f66 7261 6d65 2e66 5f63  ack.tb_frame.f_c
-00009450: 6f64 652e 636f 5f66 696c 656e 616d 650d  ode.co_filename.
-00009460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009470: 206c 696e 655f 6e75 6d62 6572 203d 2065   line_number = e
-00009480: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
-00009490: 636b 2e74 625f 6c69 6e65 6e6f 0d0a 2020  ck.tb_lineno..  
-000094a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000094b0: 6c66 2e6e 6f74 6966 7928 2253 6f6d 6574  lf.notify("Somet
-000094c0: 6869 6e67 2077 656e 2077 726f 6e67 2077  hing wen wrong w
-000094d0: 6865 6e20 696e 7365 7274 696e 6720 7468  hen inserting th
-000094e0: 6520 7472 616e 7361 6374 696f 6e73 3a5c  e transactions:\
-000094f0: 6e22 202b 2073 7472 2865 2920 2b20 225c  n" + str(e) + "\
-00009500: 6e4c 696e 653a 2220 2b20 7374 7228 6c69  nLine:" + str(li
-00009510: 6e65 5f6e 756d 6265 7229 2c74 6974 6c65  ne_number),title
-00009520: 3d22 4572 726f 7222 290d 0a0d 0a20 2020  ="Error")....   
-00009530: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00009540: 6e65 775f 6461 7461 0d0a 2020 2020 2020  new_data..      
-00009550: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-00009560: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
-00009570: 2020 2020 2020 6578 6365 7074 696f 6e5f        exception_
-00009580: 7479 7065 2c20 6578 6365 7074 696f 6e5f  type, exception_
-00009590: 6f62 6a65 6374 2c20 6578 6365 7074 696f  object, exceptio
-000095a0: 6e5f 7472 6163 6562 6163 6b20 3d20 7379  n_traceback = sy
-000095b0: 732e 6578 635f 696e 666f 2829 0d0a 2020  s.exc_info()..  
-000095c0: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
-000095d0: 6d65 203d 2065 7863 6570 7469 6f6e 5f74  me = exception_t
-000095e0: 7261 6365 6261 636b 2e74 625f 6672 616d  raceback.tb_fram
-000095f0: 652e 665f 636f 6465 2e63 6f5f 6669 6c65  e.f_code.co_file
-00009600: 6e61 6d65 0d0a 2020 2020 2020 2020 2020  name..          
-00009610: 2020 6c69 6e65 5f6e 756d 6265 7220 3d20    line_number = 
-00009620: 6578 6365 7074 696f 6e5f 7472 6163 6562  exception_traceb
-00009630: 6163 6b2e 7462 5f6c 696e 656e 6f0d 0a0d  ack.tb_lineno...
-00009640: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00009650: 662e 6e6f 7469 6679 2822 436f 756c 7420  f.notify("Coult 
-00009660: 6e6f 7420 6f70 746e 2074 6865 2070 726f  not optn the pro
-00009670: 6a65 6374 2066 696c 652e 2049 7320 6974  ject file. Is it
-00009680: 2061 6e20 6f6c 6420 7665 7273 696f 6e3f   an old version?
-00009690: 5c6e 2045 7272 6f72 2069 6e20 4c69 6e65  \n Error in Line
-000096a0: 2025 693a 2022 256c 696e 655f 6e75 6d62   %i: "%line_numb
-000096b0: 6572 202b 2073 7472 2865 292c 7469 746c  er + str(e),titl
-000096c0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
-000096d0: 2020 6465 6620 6e6f 7469 6679 5f74 6f6f    def notify_too
-000096e0: 6c74 6970 2873 656c 662c 7768 6963 6829  ltip(self,which)
-000096f0: 3a0d 0a20 2020 2020 2020 2074 7420 3d20  :..        tt = 
-00009700: 7768 6963 682e 746f 6f6c 5469 7020 2829  which.toolTip ()
-00009710: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
-00009720: 6f74 6966 7928 7469 746c 653d 2254 6970  otify(title="Tip
-00009730: 222c 6d65 7373 6167 653d 7374 7228 7474  ",message=str(tt
-00009740: 2929 0d0a 0d0a 0d0a 2020 2020 6465 6620  ))......    def 
-00009750: 7265 7369 7a65 4576 656e 7428 7365 6c66  resizeEvent(self
-00009760: 2c20 6576 656e 7429 3a0d 0a20 2020 2020  , event):..     
-00009770: 2020 2070 7269 6e74 2822 7265 7369 7a65     print("resize
-00009780: 2229 0d0a 0d0a 2020 2020 2020 2020 2373  ")....        #s
-00009790: 656c 662e 6472 6177 6361 6e76 6173 2e70  elf.drawcanvas.p
-000097a0: 6172 656e 742e 7265 7369 7a65 5f66 7261  arent.resize_fra
-000097b0: 6d65 2829 0d0a 2020 2020 2020 2020 5174  me()..        Qt
-000097c0: 5769 6467 6574 732e 514d 6169 6e57 696e  Widgets.QMainWin
-000097d0: 646f 772e 7265 7369 7a65 4576 656e 7428  dow.resizeEvent(
-000097e0: 7365 6c66 2c20 6576 656e 7429 0d0a 0d0a  self, event)....
-000097f0: 2020 2020 2020 2020 2320 7265 7369 7a65          # resize
-00009800: 2074 7261 6e73 6163 7469 6f6e 0d0a 2020   transaction..  
-00009810: 2020 2020 2020 7720 3d20 3734 310d 0a20        w = 741.. 
-00009820: 2020 2020 2020 2068 203d 2031 3931 202b         h = 191 +
-00009830: 206d 6178 2830 2c73 656c 662e 6672 616d   max(0,self.fram
-00009840: 6547 656f 6d65 7472 7928 292e 6865 6967  eGeometry().heig
-00009850: 6874 2829 2d39 3835 290d 0a20 2020 2020  ht()-985)..     
-00009860: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-00009870: 696f 6e56 6965 772e 7061 7265 6e74 203d  ionView.parent =
-00009880: 2073 656c 662e 646f 636b 5769 6467 6574   self.dockWidget
-00009890: 5f35 0d0a 2020 2020 2020 2020 2320 7365  _5..        # se
-000098a0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-000098b0: 6577 2e73 6574 4765 6f6d 6574 7279 2833  ew.setGeometry(3
-000098c0: 302c 3635 2c77 2c68 2920 2320 3330 2c36  0,65,w,h) # 30,6
-000098d0: 3730 2c77 2c68 290d 0a0d 0a20 2020 2020  70,w,h)....     
-000098e0: 2020 2023 7365 6c66 2e6c 6162 656c 5f31     #self.label_1
-000098f0: 372e 7365 7447 656f 6d65 7472 7928 3130  7.setGeometry(10
-00009900: 2c73 656c 662e 6672 616d 6547 656f 6d65  ,self.frameGeome
-00009910: 7472 7928 292e 6865 6967 6874 2829 2d31  try().height()-1
-00009920: 3530 2c31 3331 2c38 3929 2023 206c 6f67  50,131,89) # log
-00009930: 6f0d 0a20 2020 2020 2020 2023 7365 6c66  o..        #self
-00009940: 2e6c 6162 656c 5f31 372e 7365 7456 6973  .label_17.setVis
-00009950: 6962 6c65 2846 616c 7365 290d 0a0d 0a20  ible(False).... 
-00009960: 2020 2020 2020 2073 656c 662e 7261 6469         self.radi
-00009970: 6f42 7574 746f 6e2e 7365 7447 656f 6d65  oButton.setGeome
-00009980: 7472 7928 302c 7365 6c66 2e66 7261 6d65  try(0,self.frame
-00009990: 4765 6f6d 6574 7279 2829 2e68 6569 6768  Geometry().heigh
-000099a0: 7428 292d 3238 2c32 322c 3232 290d 0a0d  t()-28,22,22)...
-000099b0: 0a20 2020 2064 6566 2062 726f 7773 6528  .    def browse(
-000099c0: 7365 6c66 293a 0d0a 0d0a 0d0a 2020 2020  self):......    
-000099d0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-000099e0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
-000099f0: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
-00009a00: 4f70 656e 4669 6c65 4e61 6d65 2873 656c  OpenFileName(sel
-00009a10: 662c 2027 4f70 656e 2066 696c 6527 2c6f  f, 'Open file',o
-00009a20: 732e 6765 7463 7764 2829 2c20 2261 7474  s.getcwd(), "att
-00009a30: 756e 6520 4669 6c65 7320 282a 2e73 6663  une Files (*.sfc
-00009a40: 746c 293b 3b4d 414d 4241 2046 696c 6573  tl);;MAMBA Files
-00009a50: 2028 2a2e 6d61 6d62 6129 3b3b 5472 616e   (*.mamba);;Tran
-00009a60: 7361 6374 696f 6e20 4669 6c65 7320 282a  saction Files (*
-00009a70: 2e74 7261 6e73 2922 295b 305d 0d0a 2020  .trans)")[0]..  
-00009a80: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-00009a90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00009aa0: 6e6f 7469 6679 2822 5365 656d 7320 6173  notify("Seems as
-00009ab0: 2069 6620 7468 6520 7072 6f6a 6563 7473   if the projects
-00009ac0: 2066 6f6c 6465 7220 646f 6573 206e 6f74   folder does not
-00009ad0: 2079 6574 2065 7869 7374 2e20 706c 6561   yet exist. plea
-00009ae0: 7365 2063 7265 6174 6520 6974 206d 616e  se create it man
-00009af0: 7561 6c6c 7920 696e 2074 6865 2070 6172  ually in the par
-00009b00: 656e 7420 6469 7265 6374 6f72 7920 6f66  ent directory of
-00009b10: 2073 7263 222c 2074 6974 6c65 3d22 5072   src", title="Pr
-00009b20: 6f6a 6563 7473 2066 6f6c 6465 7222 290d  ojects folder").
-00009b30: 0a0d 0a0d 0a20 2020 2020 2020 2023 2072  .....        # r
-00009b40: 656d 6f76 6520 616c 6c20 7461 6273 2066  emove all tabs f
-00009b50: 726f 6d20 7461 6220 7769 6467 6574 0d0a  rom tab widget..
-00009b60: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00009b70: 2072 616e 6765 2831 2c73 656c 662e 7461   range(1,self.ta
-00009b80: 6257 6964 6765 742e 636f 756e 7428 2929  bWidget.count())
-00009b90: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
-00009ba0: 6162 203d 2073 656c 662e 7461 6257 6964  ab = self.tabWid
-00009bb0: 6765 742e 7769 6467 6574 2831 290d 0a20  get.widget(1).. 
-00009bc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00009bd0: 7461 6257 6964 6765 742e 7265 6d6f 7665  tabWidget.remove
-00009be0: 5461 6228 3129 0d0a 2020 2020 2020 2020  Tab(1)..        
-00009bf0: 2020 2020 6465 6c20 7461 620d 0a0d 0a20      del tab.... 
-00009c00: 2020 2020 2020 2043 6f64 6545 6469 746f         CodeEdito
-00009c10: 722e 696e 7374 616e 6365 7320 3d20 7b7d  r.instances = {}
-00009c20: 0d0a 0d0a 0d0a 2020 2020 2020 2020 6669  ......        fi
-00009c30: 6c65 6e61 6d65 5f62 6163 6b75 7020 3d20  lename_backup = 
-00009c40: 7365 6c66 2e66 696c 656e 616d 650d 0a20  self.filename.. 
-00009c50: 2020 2020 2020 2063 7572 7265 6e74 5f66         current_f
-00009c60: 696c 655f 6261 636b 7570 203d 2073 656c  ile_backup = sel
-00009c70: 662e 6375 7272 656e 745f 6669 6c65 0d0a  f.current_file..
-00009c80: 0d0a 2020 2020 2020 2020 7365 6c66 2e66  ..        self.f
-00009c90: 696c 656e 616d 6520 3d20 6669 6c65 6e61  ilename = filena
-00009ca0: 6d65 0d0a 2020 2020 2020 2020 7365 6c66  me..        self
-00009cb0: 2e63 7572 7265 6e74 5f66 696c 6520 3d20  .current_file = 
-00009cc0: 6669 6c65 6e61 6d65 0d0a 0d0a 2020 2020  filename....    
-00009cd0: 2020 2020 7365 6c66 2e6c 6162 656c 5f66      self.label_f
-00009ce0: 6e61 6d65 2e73 6574 5465 7874 2866 696c  name.setText(fil
-00009cf0: 656e 616d 6529 0d0a 0d0a 2020 2020 2020  ename)....      
-00009d00: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00009d10: 2020 2020 7072 696e 7428 2246 494c 454e      print("FILEN
-00009d20: 414d 4522 2c66 696c 656e 616d 6529 0d0a  AME",filename)..
-00009d30: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00009d40: 6c6f 6164 2065 6e74 7269 6573 2069 6e74  load entries int
-00009d50: 6f20 7468 6520 6c69 7374 0d0a 2020 2020  o the list..    
-00009d60: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00009d70: 6e28 6669 6c65 6e61 6d65 2c20 2772 2729  n(filename, 'r')
-00009d80: 2061 7320 7374 7265 616d 3a0d 0a0d 0a20   as stream:.... 
-00009d90: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00009da0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00009db0: 2020 2020 2020 2020 2074 7261 6e73 6163           transac
-00009dc0: 7469 6f6e 5f64 6174 6120 3d20 7365 6c66  tion_data = self
-00009dd0: 2e63 6c65 616e 7570 5f74 7261 6e73 6163  .cleanup_transac
-00009de0: 7469 6f6e 5f64 6174 6128 7961 6d6c 2e73  tion_data(yaml.s
-00009df0: 6166 655f 6c6f 6164 2873 7472 6561 6d29  afe_load(stream)
-00009e00: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00009e10: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00009e20: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-00009e30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00009e40: 656c 662e 6e6f 7469 6679 2822 4572 726f  elf.notify("Erro
-00009e50: 7220 7265 7472 6569 7669 6e67 2074 6865  r retreiving the
-00009e60: 2074 7261 6e73 6163 7469 6f6e 2064 6174   transaction dat
-00009e70: 6120 6672 6f6d 2074 6865 2073 6f75 7263  a from the sourc
-00009e80: 6520 6669 6c65 2e20 4162 6f72 7469 6e67  e file. Aborting
-00009e90: 2e5c 6e22 2b73 7472 2865 292c 7469 746c  .\n"+str(e),titl
-00009ea0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
-00009eb0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00009ec0: 696e 7428 2274 7261 6e73 6163 7469 6f6e  int("transaction
-00009ed0: 5f64 6174 6122 2c74 7261 6e73 6163 7469  _data",transacti
-00009ee0: 6f6e 5f64 6174 6129 0d0a 2020 2020 2020  on_data)..      
-00009ef0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-00009f00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009f10: 2020 2020 2020 2320 7472 7920 746f 206c        # try to l
-00009f20: 6f61 6420 6e6f 7465 730d 0a20 2020 2020  oad notes..     
-00009f30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00009f40: 6620 226e 6f74 6573 2220 696e 2074 7261  f "notes" in tra
-00009f50: 6e73 6163 7469 6f6e 5f64 6174 613a 0d0a  nsaction_data:..
-00009f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f70: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00009f80: 6573 4564 6974 2e73 6574 506c 6169 6e54  esEdit.setPlainT
-00009f90: 6578 7428 7472 616e 7361 6374 696f 6e5f  ext(transaction_
-00009fa0: 6461 7461 5b22 6e6f 7465 7322 5d29 0d0a  data["notes"])..
-00009fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009fc0: 2020 2020 2020 2320 7472 7920 746f 206c        # try to l
-00009fd0: 6f61 6420 636f 6c6f 7220 7468 656d 650d  oad color theme.
-00009fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009ff0: 2020 2020 2069 6620 7472 616e 7361 6374       if transact
-0000a000: 696f 6e5f 6461 7461 5b22 7468 656d 6522  ion_data["theme"
-0000a010: 5d20 6973 206e 6f74 204e 6f6e 653a 0d0a  ] is not None:..
-0000a020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a030: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0000a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a050: 2020 2020 2020 2020 2020 7468 656d 655f            theme_
-0000a060: 666e 616d 6520 3d20 7472 616e 7361 6374  fname = transact
-0000a070: 696f 6e5f 6461 7461 5b22 7468 656d 6522  ion_data["theme"
-0000a080: 5d5b 2263 6f6c 6f72 7322 5d0d 0a20 2020  ]["colors"]..   
-0000a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0a0: 2020 2020 2020 2020 2067 7468 656d 6520           gtheme 
-0000a0b0: 3d20 7472 616e 7361 6374 696f 6e5f 6461  = transaction_da
-0000a0c0: 7461 5b22 7468 656d 6522 5d5b 2267 6c6f  ta["theme"]["glo
-0000a0d0: 6261 6c74 6865 6d65 225d 0d0a 2020 2020  baltheme"]..    
-0000a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0f0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000a100: 7468 656d 655f 6d61 6e61 6765 722e 7468  theme_manager.th
-0000a110: 656d 6520 213d 2067 7468 656d 653a 0d0a  eme != gtheme:..
-0000a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a140: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
-0000a150: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-0000a160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a170: 2073 656c 662e 7468 656d 655f 6d61 6e61   self.theme_mana
-0000a180: 6765 722e 6c6f 6164 5f63 6f6c 6f72 7328  ger.load_colors(
-0000a190: 7468 656d 655f 666e 616d 6529 0d0a 0d0a  theme_fname)....
-0000a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1b0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
-0000a1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a1d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000a1e0: 662e 7374 6174 7573 4261 7228 292e 7368  f.statusBar().sh
-0000a1f0: 6f77 4d65 7373 6167 6528 2243 6f75 6c64  owMessage("Could
-0000a200: 206e 6f74 206c 6f61 6420 636f 6c6f 7220   not load color 
-0000a210: 7468 656d 652e 2046 616c 6c62 6163 6b20  theme. Fallback 
-0000a220: 746f 2073 7461 6e61 7264 2074 6865 6d65  to stanard theme
-0000a230: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-0000a240: 2020 2020 2020 2020 2020 2320 6e65 7720            # new 
-0000a250: 666f 726d 6174 0d0a 2020 2020 2020 2020  format..        
-0000a260: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000a270: 2e65 6e74 7279 5f64 6174 6120 3d20 7472  .entry_data = tr
-0000a280: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
-0000a290: 7472 616e 7361 6374 696f 6e73 225d 0d0a  transactions"]..
-0000a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2b0: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
-0000a2c0: 7661 732e 636c 6561 7228 636c 6561 7261  vas.clear(cleara
-0000a2d0: 6c6c 3d54 7275 6529 0d0a 2020 2020 2020  ll=True)..      
-0000a2e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000a2f0: 6164 6420 7468 6520 6865 6c70 6572 2061  add the helper a
-0000a300: 6765 6e74 730d 0a0d 0a20 2020 2020 2020  gents....       
-0000a310: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0000a320: 206b 2c76 2069 6e20 7472 616e 7361 6374   k,v in transact
-0000a330: 696f 6e5f 6461 7461 5b22 6167 656e 7473  ion_data["agents
-0000a340: 225d 2e69 7465 6d73 2829 3a0d 0a20 2020  "].items():..   
-0000a350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a360: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-0000a370: 6e76 6173 2e61 6464 5f61 6765 6e74 286b  nvas.add_agent(k
-0000a380: 2920 2320 2e63 6170 6974 616c 697a 6528  ) # .capitalize(
-0000a390: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000a3a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0000a3b0: 7428 2241 6464 2061 6765 6e74 222c 206b  t("Add agent", k
-0000a3c0: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
-0000a3d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000a3e0: 2020 2020 2020 2020 2023 2061 6464 2074           # add t
-0000a3f0: 6865 2074 7261 6e73 6163 7469 6f6e 7320  he transactions 
-0000a400: 2863 6f6e 6e65 6374 6f72 7320 616e 6420  (connectors and 
-0000a410: 626f 7865 7329 0d0a 2020 2020 2020 2020  boxes)..        
-0000a420: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000a430: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
-0000a440: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a450: 2020 2020 2020 2023 206c 6f61 6420 6167         # load ag
-0000a460: 656e 7427 7320 636f 6465 730d 0a0d 0a20  ent's codes.... 
-0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a480: 2020 2023 2066 6972 7374 2c20 636f 6d70     # first, comp
-0000a490: 6172 6520 6966 2074 6865 2063 6f64 6520  are if the code 
-0000a4a0: 696e 2074 6865 2066 696c 6520 7472 6565  in the file tree
-0000a4b0: 2028 6966 2061 6e79 2920 636f 7272 6573   (if any) corres
-0000a4c0: 706f 6e64 7320 746f 2074 6865 2063 6f64  ponds to the cod
-0000a4d0: 6520 696e 2074 6865 202e 7366 6374 6c20  e in the .sfctl 
-0000a4e0: 6669 6c65 0d0a 0d0a 2020 2020 2020 2020  file....        
-0000a4f0: 2020 2020 2020 2020 2020 2020 2320 6368              # ch
-0000a500: 6563 6b20 6966 2066 696c 6520 7472 6565  eck if file tree
-0000a510: 2069 7320 6578 6973 7465 6e74 0d0a 2020   is existent..  
-0000a520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a530: 2020 6d79 5f61 6765 6e74 7320 3d20 6c69    my_agents = li
-0000a540: 7374 2874 7261 6e73 6163 7469 6f6e 5f64  st(transaction_d
-0000a550: 6174 615b 2261 6765 6e74 7322 5d2e 6b65  ata["agents"].ke
-0000a560: 7973 2829 290d 0a0d 0a20 2020 2020 2020  ys())....       
-0000a570: 2020 2020 2020 2020 2020 2020 2023 2067               # g
-0000a580: 6574 2064 6972 6563 746f 7279 2066 726f  et directory fro
-0000a590: 6d20 6669 6c65 6e61 6d65 0d0a 2020 2020  m filename..    
+00007600: 2020 2020 7369 6d75 5f73 7472 202b 3d20      simu_str += 
+00007610: 2266 726f 6d20 7079 7468 6f6e 5f63 6f64  "from python_cod
+00007620: 652e 2573 2069 6d70 6f72 7420 2573 5c6e  e.%s import %s\n
+00007630: 2220 2520 2861 6765 6e74 2e6c 6f77 6572  " % (agent.lower
+00007640: 2829 2c61 6765 6e74 2e63 6170 6974 616c  (),agent.capital
+00007650: 697a 6528 2929 0d0a 0d0a 2020 2020 2020  ize())....      
+00007660: 2020 2020 2020 2020 2020 2020 2020 7369                si
+00007670: 6d75 5f73 7472 202b 3d20 2222 220d 0a0d  mu_str += """...
+00007680: 0a64 6566 2069 7465 7228 293a 0d0a 2020  .def iter():..  
+00007690: 2020 5c22 5c22 5c22 0d0a 2020 2020 7468    \"\"\"..    th
+000076a0: 6973 2069 7320 6f6e 6520 6974 6572 6174  is is one iterat
+000076b0: 696f 6e0d 0a20 2020 205c 225c 225c 220d  ion..    \"\"\".
+000076c0: 0a0d 0a20 2020 2023 2054 4f44 4f20 6d6f  ...    # TODO mo
+000076d0: 6469 6679 2069 7465 7261 7469 6f6e 2068  dify iteration h
+000076e0: 6572 650d 0a22 2222 0d0a 0d0a 2020 2020  ere.."""....    
+000076f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007700: 666f 7220 6167 656e 7420 696e 2073 656c  for agent in sel
+00007710: 662e 6472 6177 6361 6e76 6173 2e63 6f64  f.drawcanvas.cod
+00007720: 655f 6461 7461 2e6b 6579 7328 293a 0d0a  e_data.keys():..
+00007730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007740: 2020 2020 2020 2020 6120 3d20 6167 656e          a = agen
+00007750: 742e 6361 7069 7461 6c69 7a65 2829 0d0a  t.capitalize()..
+00007760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007770: 2020 2020 2020 2020 7369 6d75 5f73 7472          simu_str
+00007780: 202b 3d20 225c 7466 6f72 2061 2069 6e20   += "\tfor a in 
+00007790: 576f 726c 6428 292e 6765 745f 6167 656e  World().get_agen
+000077a0: 7473 5f6f 665f 7479 7065 2827 2573 2729  ts_of_type('%s')
+000077b0: 3a5c 6e5c 745c 7470 7269 6e74 2827 446f  :\n\t\tprint('Do
+000077c0: 2073 6f6d 6574 6869 6e67 2077 6974 6827   something with'
+000077d0: 202b 2073 7472 2861 2929 5c6e 5c6e 2220   + str(a))\n\n" 
+000077e0: 2520 2861 290d 0a20 2020 2020 2020 2020  % (a)..         
+000077f0: 2020 2020 2020 2020 2020 2073 696d 755f             simu_
+00007800: 7374 7220 2b3d 2022 2222 5c6e 0d0a 6465  str += """\n..de
+00007810: 6620 7275 6e28 293a 0d0a 2020 2020 5c22  f run():..    \"
+00007820: 5c22 5c22 0d0a 2020 2020 7468 6973 2069  \"\"..    this i
+00007830: 7320 7468 6520 6d61 696e 2073 696d 756c  s the main simul
+00007840: 6174 696f 6e20 6c6f 6f70 0d0a 2020 2020  ation loop..    
+00007850: 5c22 5c22 5c22 0d0a 2222 220d 0a0d 0a0d  \"\"\"..""".....
+00007860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007870: 2020 2020 2073 696d 755f 7374 7220 2b3d       simu_str +=
+00007880: 2022 2222 5c6e 0d0a 0d0a 2020 2020 5365   """\n....    Se
+00007890: 7474 696e 6773 2829 2e72 6561 6428 5c22  ttings().read(\"
+000078a0: 7365 7474 696e 6773 2e79 6d6c 5c22 2920  settings.yml\") 
+000078b0: 2320 7265 6164 2073 6574 7469 6e67 7320  # read settings 
+000078c0: 6669 6c65 0d0a 0d0a 2020 2020 5c22 5c22  file....    \"\"
+000078d0: 5c22 0d0a 2020 2020 5369 6d75 6c61 7469  \"..    Simulati
+000078e0: 6f6e 2070 6172 616d 6574 6572 730d 0a20  on parameters.. 
+000078f0: 2020 205c 225c 225c 220d 0a0d 0a20 2020     \"\"\"....   
+00007900: 2023 206e 756d 6265 7220 6f66 2061 6765   # number of age
+00007910: 6e74 7320 746f 2062 6520 6372 6561 7465  nts to be create
+00007920: 640d 0a22 2222 0d0a 0d0a 2020 2020 2020  d.."""....      
+00007930: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00007940: 7220 6167 656e 7420 696e 2073 656c 662e  r agent in self.
+00007950: 6472 6177 6361 6e76 6173 2e63 6f64 655f  drawcanvas.code_
+00007960: 6461 7461 2e6b 6579 7328 293a 0d0a 2020  data.keys():..  
+00007970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007980: 2020 2020 2020 7369 6d75 5f73 7472 202b        simu_str +
+00007990: 3d20 225c 744e 5f25 7320 3d20 315c 6e22  = "\tN_%s = 1\n"
+000079a0: 2025 2061 6765 6e74 2e63 6170 6974 616c   % agent.capital
+000079b0: 697a 6528 290d 0a20 2020 2020 2020 2020  ize()..         
+000079c0: 2020 2020 2020 2020 2020 2073 696d 755f             simu_
+000079d0: 7374 7220 2b3d 2022 2222 0d0a 2020 2020  str += """..    
+000079e0: 2320 544f 444f 5e20 7365 7420 7468 6520  # TODO^ set the 
+000079f0: 636f 7272 6563 7420 7661 6c75 650d 0a0d  correct value...
+00007a00: 0a20 2020 2023 206e 756d 6265 7220 6f66  .    # number of
+00007a10: 2073 696d 756c 6174 696f 6e20 7374 6570   simulation step
+00007a20: 730d 0a20 2020 2054 203d 2031 3030 0d0a  s..    T = 100..
+00007a30: 0d0a 2020 2020 2320 544f 444f 5e20 7365  ..    # TODO^ se
+00007a40: 7420 7468 6520 636f 7272 6563 7420 7661  t the correct va
+00007a50: 6c75 6573 0d0a 0d0a 2020 2020 2320 6372  lues....    # cr
+00007a60: 6561 7465 2041 6765 6e74 733a 0d0a 2222  eate Agents:..""
+00007a70: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00007a80: 2020 2020 2020 2066 6f72 2061 6765 6e74         for agent
+00007a90: 2069 6e20 7365 6c66 2e64 7261 7763 616e   in self.drawcan
+00007aa0: 7661 732e 636f 6465 5f64 6174 612e 6b65  vas.code_data.ke
+00007ab0: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
+00007ac0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00007ad0: 203d 2061 6765 6e74 2e63 6170 6974 616c   = agent.capital
+00007ae0: 697a 6528 290d 0a20 2020 2020 2020 2020  ize()..         
+00007af0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00007b00: 696d 755f 7374 7220 2b3d 2022 5c74 5b25  imu_str += "\t[%
+00007b10: 7328 2920 666f 7220 6920 696e 2072 616e  s() for i in ran
+00007b20: 6765 284e 5f25 7329 5d5c 6e22 2025 2028  ge(N_%s)]\n" % (
+00007b30: 612c 6129 0d0a 0d0a 2020 2020 2020 2020  a,a)....        
+00007b40: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
+00007b50: 5f73 7472 202b 3d20 225c 6e22 0d0a 2020  _str += "\n"..  
+00007b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b70: 2020 7369 6d75 5f73 7472 202b 3d20 225c    simu_str += "\
+00007b80: 7423 2069 6e74 6572 2d6c 696e 6b20 6167  t# inter-link ag
+00007b90: 656e 7473 205c 6e22 0d0a 0d0a 2020 2020  ents \n"....    
+00007ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007bb0: 7369 6d75 5f73 7472 202b 3d20 225c 7457  simu_str += "\tW
+00007bc0: 6f72 6c64 2829 2e6c 696e 6b28 295c 6e5c  orld().link()\n\
+00007bd0: 6e22 0d0a 0d0a 2020 2020 2020 2020 2020  n"....          
+00007be0: 2020 2020 2020 2020 2020 2320 666f 7220            # for 
+00007bf0: 6167 656e 7420 696e 2073 656c 662e 6472  agent in self.dr
+00007c00: 6177 6361 6e76 6173 2e63 6f64 655f 6461  awcanvas.code_da
+00007c10: 7461 2e6b 6579 7328 293a 0d0a 2020 2020  ta.keys():..    
+00007c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c30: 2320 2020 2061 203d 2061 6765 6e74 2e63  #    a = agent.c
+00007c40: 6170 6974 616c 697a 6528 290d 0a20 2020  apitalize()..   
+00007c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c60: 2023 2020 2020 7369 6d75 5f73 7472 202b   #    simu_str +
+00007c70: 3d20 225c 745b 692e 6c69 6e6b 2829 2066  = "\t[i.link() f
+00007c80: 6f72 2069 2069 6e20 2573 5f70 696c 655d  or i in %s_pile]
+00007c90: 5c6e 2220 2520 2861 290d 0a0d 0a20 2020  \n" % (a)....   
+00007ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007cb0: 2073 696d 755f 7374 7220 2b3d 2022 2222   simu_str += """
+00007cc0: 0d0a 2020 2020 666f 7220 6920 696e 2072  ..    for i in r
+00007cd0: 616e 6765 2854 293a 0d0a 2020 2020 2020  ange(T):..      
+00007ce0: 2020 6974 6572 2829 0d0a 0d0a 2020 2020    iter()....    
+00007cf0: 2020 2020 2320 544f 444f 2077 7269 7465      # TODO write
+00007d00: 206f 7574 7075 7473 2068 6572 6520 2e2e   outputs here ..
+00007d10: 2e0d 0a0d 0a20 2020 2020 2020 2043 6c6f  .....        Clo
+00007d20: 636b 2829 2e74 6963 6b28 290d 0a0d 0a20  ck().tick().... 
+00007d30: 2020 2070 7269 6e74 2846 6c6f 774d 6174     print(FlowMat
+00007d40: 7269 7828 292e 746f 5f73 7472 696e 6728  rix().to_string(
+00007d50: 2929 0d0a 2222 220d 0a20 2020 2020 2020  )).."""..       
+00007d60: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00007d70: 662e 6d61 696e 6c6f 6f70 5f73 7472 203d  f.mainloop_str =
+00007d80: 2073 696d 755f 7374 720d 0a0d 0a20 2020   simu_str....   
+00007d90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00007da0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00007db0: 2020 2020 2020 2020 7369 6d75 5f73 7472          simu_str
+00007dc0: 203d 2073 656c 662e 6d61 696e 6c6f 6f70   = self.mainloop
+00007dd0: 5f73 7472 0d0a 0d0a 2020 2020 2020 2020  _str....        
+00007de0: 2020 2020 2020 2020 7072 696e 7428 2253          print("S
+00007df0: 494d 5520 5354 5222 2c20 7369 6d75 5f73  IMU STR", simu_s
+00007e00: 7472 290d 0a20 2020 2020 2020 2020 2020  tr)..           
+00007e10: 2020 2020 2066 696c 652e 7772 6974 6528       file.write(
+00007e20: 7369 6d75 5f73 7472 2e72 6570 6c61 6365  simu_str.replace
+00007e30: 2822 5c74 222c 2220 2020 2022 2929 0d0a  ("\t","    "))..
+00007e40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007e50: 2020 6966 206e 6f74 2073 696c 656e 743a    if not silent:
+00007e60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007e70: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+00007e80: 7928 2250 726f 6a65 6374 2066 696c 6573  y("Project files
+00007e90: 2062 7569 6c74 2122 2c74 6974 6c65 3d22   built!",title="
+00007ea0: 5375 6363 6573 7322 290d 0a0d 0a20 2020  Success")....   
+00007eb0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00007ec0: 662e 6765 6e5f 636f 6465 2829 2023 2067  f.gen_code() # g
+00007ed0: 656e 6572 6174 6520 7472 616e 7361 6374  enerate transact
+00007ee0: 696f 6e73 2e70 790d 0a0d 0a20 2020 2020  ions.py....     
+00007ef0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00007f00: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+00007f10: 2020 2020 2020 2065 7863 6570 7469 6f6e         exception
+00007f20: 5f74 7970 652c 2065 7863 6570 7469 6f6e  _type, exception
+00007f30: 5f6f 626a 6563 742c 2065 7863 6570 7469  _object, excepti
+00007f40: 6f6e 5f74 7261 6365 6261 636b 203d 2073  on_traceback = s
+00007f50: 7973 2e65 7863 5f69 6e66 6f28 290d 0a20  ys.exc_info().. 
+00007f60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00007f70: 6e6f 7469 6679 2822 436f 756c 6420 6e6f  notify("Could no
+00007f80: 7420 6275 696c 6420 7072 6f6a 6563 742e  t build project.
+00007f90: 5c6e 2220 2b20 7374 7228 6578 6365 7074  \n" + str(except
+00007fa0: 696f 6e5f 6f62 6a65 6374 2920 2b20 7374  ion_object) + st
+00007fb0: 7228 6578 6365 7074 696f 6e5f 7472 6163  r(exception_trac
+00007fc0: 6562 6163 6b29 2c74 6974 6c65 3d22 4572  eback),title="Er
+00007fd0: 726f 7220 6f6e 2050 726f 6a65 6374 2042  ror on Project B
+00007fe0: 7569 6c64 2229 0d0a 0d0a 2020 2020 6465  uild")....    de
+00007ff0: 6620 6175 746f 5f62 6163 6b75 7028 7365  f auto_backup(se
+00008000: 6c66 293a 0d0a 2020 2020 2020 2020 7472  lf):..        tr
+00008010: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00008020: 666f 6c64 6572 203d 2073 656c 662e 6375  folder = self.cu
+00008030: 7272 656e 745f 6669 6c65 0d0a 2020 2020  rrent_file..    
+00008040: 2020 2020 2020 2020 6966 2066 6f6c 6465          if folde
+00008050: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+00008060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008070: 7365 6c66 2e73 6176 6561 7328 666f 6c64  self.saveas(fold
+00008080: 6572 5b3a 2d36 5d20 2b22 5f61 7574 6f62  er[:-6] +"_autob
+00008090: 6163 6b75 702e 7366 6374 6c22 2920 2320  ackup.sfctl") # 
+000080a0: 6d61 6b65 7320 6120 6261 636b 7570 2066  makes a backup f
+000080b0: 696c 650d 0a20 2020 2020 2020 2020 2020  ile..           
+000080c0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000080d0: 2020 2020 2020 2020 2320 7365 6c66 2e6e          # self.n
+000080e0: 6f74 6966 7928 2259 6f75 2061 7265 2077  otify("You are w
+000080f0: 6f72 6b69 6e67 206f 6e20 6120 626c 616e  orking on a blan
+00008100: 6b20 7072 6f6a 6563 7420 6669 6c65 2e20  k project file. 
+00008110: 506c 6561 7365 2073 6176 6520 796f 7572  Please save your
+00008120: 2063 6861 6e67 6573 2073 6f6f 6e2e 222c   changes soon.",
+00008130: 2074 6974 6c65 3d22 5761 726e 696e 6722   title="Warning"
+00008140: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00008150: 2020 2073 656c 662e 7374 6174 7573 4261     self.statusBa
+00008160: 7228 292e 7368 6f77 4d65 7373 6167 6528  r().showMessage(
+00008170: 2257 4152 4e49 4e47 3a20 596f 7520 6172  "WARNING: You ar
+00008180: 6520 776f 726b 696e 6720 6f6e 2061 2062  e working on a b
+00008190: 6c61 6e6b 2070 726f 6a65 6374 2066 696c  lank project fil
+000081a0: 652e 2050 6c65 6173 6520 7361 7665 2079  e. Please save y
+000081b0: 6f75 7220 6368 616e 6765 7320 736f 6f6e  our changes soon
+000081c0: 2e22 290d 0a20 2020 2020 2020 2065 7863  .")..        exc
+000081d0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+000081e0: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+000081f0: 2073 656c 662e 6e6f 7469 6679 2873 7472   self.notify(str
+00008200: 2865 292c 2074 6974 6c65 3d22 4572 726f  (e), title="Erro
+00008210: 7220 6f6e 2041 7574 6f42 6163 6b75 7022  r on AutoBackup"
+00008220: 290d 0a0d 0a20 2020 2064 6566 2065 6469  )....    def edi
+00008230: 745f 7365 7474 696e 6773 2873 656c 6629  t_settings(self)
+00008240: 3a0d 0a20 2020 2020 2020 2069 6620 7365  :..        if se
+00008250: 6c66 2e73 6574 7469 6e67 735f 7374 7220  lf.settings_str 
+00008260: 3d3d 2222 206f 7220 7365 6c66 2e73 6574  =="" or self.set
+00008270: 7469 6e67 735f 7374 7220 6973 204e 6f6e  tings_str is Non
+00008280: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00008290: 7365 6c66 2e6e 6f74 6966 7928 6d65 7373  self.notify(mess
+000082a0: 6167 653d 2253 6f6d 6574 6869 6e67 2077  age="Something w
+000082b0: 656e 7420 7772 6f6e 672e 2048 6176 6520  ent wrong. Have 
+000082c0: 796f 7520 6275 696c 7420 7468 6520 7072  you built the pr
+000082d0: 6f6a 6563 743f 222c 7469 746c 653d 2245  oject?",title="E
+000082e0: 7272 6f72 2229 0d0a 2020 2020 2020 2020  rror")..        
+000082f0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
+00008300: 2020 2020 2020 6d79 5f65 6469 7420 3d20        my_edit = 
+00008310: 5365 7474 696e 6773 4564 6974 6f72 2870  SettingsEditor(p
+00008320: 6172 656e 743d 7365 6c66 2c20 7465 7874  arent=self, text
+00008330: 3d73 656c 662e 7365 7474 696e 6773 5f73  =self.settings_s
+00008340: 7472 290d 0a0d 0a20 2020 2064 6566 2065  tr)....    def e
+00008350: 6469 745f 6772 6170 685f 6167 656e 7428  dit_graph_agent(
+00008360: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00008370: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+00008380: 6564 6974 5f61 6765 6e74 2829 0d0a 0d0a  edit_agent()....
+00008390: 2020 2020 6465 6620 6368 616e 6765 5f67      def change_g
+000083a0: 7261 7068 6d6f 6465 5f73 656c 6563 7428  raphmode_select(
+000083b0: 7365 6c66 293a 0d0a 0d0a 2020 2020 2020  self):....      
+000083c0: 2020 7365 6c66 2e64 7261 7763 616e 7661    self.drawcanva
+000083d0: 732e 6d6f 6465 203d 2022 7365 6c65 6374  s.mode = "select
+000083e0: 220d 0a0d 0a20 2020 2064 6566 2063 6861  "....    def cha
+000083f0: 6e67 655f 6772 6170 686d 6f64 655f 6472  nge_graphmode_dr
+00008400: 6167 2873 656c 6629 3a0d 0a0d 0a20 2020  ag(self):....   
+00008410: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+00008420: 6e76 6173 2e6d 6f64 6520 3d20 2264 7261  nvas.mode = "dra
+00008430: 6722 0d0a 0d0a 2020 2020 6465 6620 6172  g"....    def ar
+00008440: 7261 6e67 655f 7072 6574 7479 2873 656c  range_pretty(sel
+00008450: 6629 3a0d 0a20 2020 2020 2020 2073 656c  f):..        sel
+00008460: 662e 7570 6461 7465 5f74 6162 6c65 2829  f.update_table()
+00008470: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+00008480: 7261 7763 616e 7661 732e 6172 7261 6e67  rawcanvas.arrang
+00008490: 655f 7072 6574 7479 2829 0d0a 0d0a 0d0a  e_pretty()......
+000084a0: 2020 2020 6465 6620 7570 6461 7465 5f67      def update_g
+000084b0: 7261 7068 6963 735f 6461 7461 2873 656c  raphics_data(sel
+000084c0: 662c 2062 6f78 2c20 636f 6e6e 293a 0d0a  f, box, conn):..
+000084d0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+000084e0: 0d0a 2020 2020 6465 6620 7377 6974 6368  ..    def switch
+000084f0: 5f74 6865 6d65 2873 656c 6629 3a0d 0a0d  _theme(self):...
+00008500: 0a0d 0a20 2020 2020 2020 2023 2066 726f  ...        # fro
+00008510: 6d20 7174 5f6d 6174 6572 6961 6c20 696d  m qt_material im
+00008520: 706f 7274 2061 7070 6c79 5f73 7479 6c65  port apply_style
+00008530: 7368 6565 740d 0a0d 0a20 2020 2020 2020  sheet....       
+00008540: 2069 6620 7365 6c66 2e74 6865 6d65 5f6d   if self.theme_m
+00008550: 616e 6167 6572 2e74 6865 6d65 203d 3d20  anager.theme == 
+00008560: 2264 6172 6b22 3a0d 0a20 2020 2020 2020  "dark":..       
+00008570: 2020 2020 2073 656c 662e 7468 656d 655f       self.theme_
+00008580: 6d61 6e61 6765 722e 7468 656d 6520 3d20  manager.theme = 
+00008590: 2262 7269 6768 7422 0d0a 0d0a 2020 2020  "bright"....    
+000085a0: 2020 2020 656c 6966 2073 656c 662e 7468      elif self.th
+000085b0: 656d 655f 6d61 6e61 6765 722e 7468 656d  eme_manager.them
+000085c0: 6520 3d3d 2022 6272 6967 6874 223a 0d0a  e == "bright":..
+000085d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000085e0: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
+000085f0: 6865 6d65 203d 2022 6461 726b 220d 0a0d  heme = "dark"...
+00008600: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00008610: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
+00008620: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
+00008630: 2e67 6574 5f73 7479 6c65 7368 6565 7428  .get_stylesheet(
+00008640: 226d 6169 6e22 2929 0d0a 0d0a 2020 2020  "main"))....    
+00008650: 2020 2020 7365 6c66 2e74 6865 6d65 5f6d      self.theme_m
+00008660: 616e 6167 6572 2e72 6573 746f 7265 5f62  anager.restore_b
+00008670: 7574 746f 6e73 2829 0d0a 0d0a 2020 2020  uttons()....    
+00008680: 2020 2020 7365 6c66 2e74 6162 5769 6467      self.tabWidg
+00008690: 6574 5f32 2e73 6574 5374 796c 6553 6865  et_2.setStyleShe
+000086a0: 6574 2873 656c 662e 7468 656d 655f 6d61  et(self.theme_ma
+000086b0: 6e61 6765 722e 6765 745f 6261 636b 6772  nager.get_backgr
+000086c0: 6f75 6e64 5f73 7479 6c65 2829 290d 0a20  ound_style()).. 
+000086d0: 2020 2020 2020 2073 656c 662e 646f 636b         self.dock
+000086e0: 5769 6467 6574 5f33 2e73 6574 5374 796c  Widget_3.setStyl
+000086f0: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
+00008700: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
+00008710: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
+00008720: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00008730: 646f 636b 5769 6467 6574 5f34 2e73 6574  dockWidget_4.set
+00008740: 5374 796c 6553 6865 6574 2873 656c 662e  StyleSheet(self.
+00008750: 7468 656d 655f 6d61 6e61 6765 722e 6765  theme_manager.ge
+00008760: 745f 6261 636b 6772 6f75 6e64 5f73 7479  t_background_sty
+00008770: 6c65 2829 290d 0a20 2020 2020 2020 2073  le())..        s
+00008780: 656c 662e 646f 636b 5769 6467 6574 5f35  elf.dockWidget_5
+00008790: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+000087a0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+000087b0: 722e 6765 745f 6261 636b 6772 6f75 6e64  r.get_background
+000087c0: 5f73 7479 6c65 2829 290d 0a0d 0a20 2020  _style())....   
+000087d0: 2020 2020 2073 656c 662e 7769 6467 6574       self.widget
+000087e0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+000087f0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00008800: 722e 6765 745f 6261 636b 6772 6f75 6e64  r.get_background
+00008810: 5f73 7479 6c65 2829 290d 0a0d 0a20 2020  _style())....   
+00008820: 2020 2020 2073 656c 662e 646f 636b 5769       self.dockWi
+00008830: 6467 6574 5f37 2e73 6574 5374 796c 6553  dget_7.setStyleS
+00008840: 6865 6574 2873 656c 662e 7468 656d 655f  heet(self.theme_
+00008850: 6d61 6e61 6765 722e 6765 745f 6261 636b  manager.get_back
+00008860: 6772 6f75 6e64 5f73 7479 6c65 2829 290d  ground_style()).
+00008870: 0a20 2020 2020 2020 2073 656c 662e 7461  .        self.ta
+00008880: 6257 6964 6765 742e 7365 7453 7479 6c65  bWidget.setStyle
+00008890: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
+000088a0: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
+000088b0: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
+000088c0: 0d0a 0d0a 2020 2020 2020 2020 666f 7220  ....        for 
+000088d0: 6365 2069 6e20 436f 6465 4564 6974 6f72  ce in CodeEditor
+000088e0: 2e69 6e73 7461 6e63 6573 2e76 616c 7565  .instances.value
+000088f0: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+00008900: 2020 6365 2e73 6574 5374 796c 6553 6865    ce.setStyleShe
+00008910: 6574 2873 656c 662e 7468 656d 655f 6d61  et(self.theme_ma
+00008920: 6e61 6765 722e 6765 745f 6261 636b 6772  nager.get_backgr
+00008930: 6f75 6e64 5f73 7479 6c65 2829 290d 0a0d  ound_style())...
+00008940: 0a20 2020 2020 2020 2073 656c 662e 6167  .        self.ag
+00008950: 656e 7431 4564 6974 2e73 6574 5374 796c  ent1Edit.setStyl
+00008960: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
+00008970: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
+00008980: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
+00008990: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000089a0: 6167 656e 7432 4564 6974 2e73 6574 5374  agent2Edit.setSt
+000089b0: 796c 6553 6865 6574 2873 656c 662e 7468  yleSheet(self.th
+000089c0: 656d 655f 6d61 6e61 6765 722e 6765 745f  eme_manager.get_
+000089d0: 6261 636b 6772 6f75 6e64 5f73 7479 6c65  background_style
+000089e0: 2829 290d 0a0d 0a20 2020 2020 2020 2074  ())....        t
+000089f0: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
+00008a00: 2020 2069 6620 4d61 696e 4c6f 6f70 4564     if MainLoopEd
+00008a10: 6974 6f72 2e69 6e73 7461 6e63 6520 6973  itor.instance is
+00008a20: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00008a30: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00008a40: 203d 204d 6169 6e4c 6f6f 7045 6469 746f   = MainLoopEdito
+00008a50: 722e 696e 7374 616e 6365 0d0a 2020 2020  r.instance..    
+00008a60: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00008a70: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+00008a80: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00008a90: 722e 6765 745f 6261 636b 6772 6f75 6e64  r.get_background
+00008aa0: 5f73 7479 6c65 2829 290d 0a20 2020 2020  _style())..     
+00008ab0: 2020 2020 2020 2020 2020 2069 6e73 742e             inst.
+00008ac0: 7365 7453 7479 6c65 5368 6565 7428 7365  setStyleSheet(se
+00008ad0: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
+00008ae0: 2e67 6574 5f73 7479 6c65 7368 6565 7428  .get_stylesheet(
+00008af0: 226d 6169 6e22 2929 0d0a 0d0a 2020 2020  "main"))....    
+00008b00: 2020 2020 6578 6365 7074 3a0d 0a0d 0a20      except:.... 
+00008b10: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
+00008b20: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00008b30: 7570 6461 7465 5f74 6162 6c65 2829 0d0a  update_table()..
+00008b40: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+00008b50: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+00008b60: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+00008b70: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00008b80: 722e 6765 745f 7461 626c 655f 7374 796c  r.get_table_styl
+00008b90: 6528 2929 0d0a 0d0a 2020 2020 6465 6620  e())....    def 
+00008ba0: 6173 6b5f 7175 6573 7469 6f6e 2873 656c  ask_question(sel
+00008bb0: 662c 7469 746c 652c 6d65 7373 6167 6529  f,title,message)
+00008bc0: 3a0d 0a20 2020 2020 2020 2023 2061 736b  :..        # ask
+00008bd0: 2061 2071 7565 7374 696f 6e20 7965 7320   a question yes 
+00008be0: 2f20 6e6f 0d0a 2020 2020 2020 2020 6d73  / no..        ms
+00008bf0: 6720 3d20 514d 6573 7361 6765 426f 7828  g = QMessageBox(
+00008c00: 514d 6573 7361 6765 426f 782e 5175 6573  QMessageBox.Ques
+00008c10: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
+00008c20: 2020 2020 2020 2074 6974 6c65 2c20 6d65         title, me
+00008c30: 7373 6167 652c 6275 7474 6f6e 733d 514d  ssage,buttons=QM
+00008c40: 6573 7361 6765 426f 782e 5965 7320 7c20  essageBox.Yes | 
+00008c50: 514d 6573 7361 6765 426f 782e 4e6f 2c0d  QMessageBox.No,.
+00008c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008c70: 2070 6172 656e 743d 7365 6c66 290d 0a20   parent=self).. 
+00008c80: 2020 2020 2020 206d 7367 2e73 6574 5769         msg.setWi
+00008c90: 6e64 6f77 5469 746c 6528 7469 746c 6529  ndowTitle(title)
+00008ca0: 0d0a 2020 2020 2020 2020 6d73 672e 7365  ..        msg.se
+00008cb0: 7453 7479 6c65 5368 6565 7428 7365 6c66  tStyleSheet(self
+00008cc0: 2e74 6865 6d65 5f6d 616e 6167 6572 2e67  .theme_manager.g
+00008cd0: 6574 5f6e 6f74 6966 6963 6174 696f 6e5f  et_notification_
+00008ce0: 7374 796c 6528 2929 0d0a 2020 2020 2020  style())..      
+00008cf0: 2020 6d73 672e 6578 6563 5f28 290d 0a20    msg.exec_().. 
+00008d00: 2020 2020 2020 2072 6570 6c79 203d 206d         reply = m
+00008d10: 7367 2e73 7461 6e64 6172 6442 7574 746f  sg.standardButto
+00008d20: 6e28 6d73 672e 636c 6963 6b65 6442 7574  n(msg.clickedBut
+00008d30: 746f 6e28 2929 0d0a 0d0a 2020 2020 2020  ton())....      
+00008d40: 2020 6966 2072 6570 6c79 203d 3d20 6d73    if reply == ms
+00008d50: 672e 5965 733a 0d0a 2020 2020 2020 2020  g.Yes:..        
+00008d60: 2020 2020 7265 7475 726e 2054 7275 650d      return True.
+00008d70: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00008d80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00008d90: 726e 2046 616c 7365 0d0a 0d0a 2020 2020  rn False....    
+00008da0: 6465 6620 6e6f 7469 6679 2873 656c 662c  def notify(self,
+00008db0: 6d65 7373 6167 652c 7469 746c 6529 3a0d  message,title):.
+00008dc0: 0a20 2020 2020 2020 2023 6d73 6720 3d20  .        #msg = 
+00008dd0: 514d 6573 7361 6765 426f 7828 7365 6c66  QMessageBox(self
+00008de0: 290d 0a20 2020 2020 2020 206d 7367 203d  )..        msg =
+00008df0: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
+00008e00: 6629 0d0a 2020 2020 2020 2020 6d73 672e  f)..        msg.
+00008e10: 7365 7457 696e 646f 7754 6974 6c65 2874  setWindowTitle(t
+00008e20: 6974 6c65 290d 0a20 2020 2020 2020 206d  itle)..        m
+00008e30: 7367 2e73 6574 5465 7874 286d 6573 7361  sg.setText(messa
+00008e40: 6765 290d 0a20 2020 2020 2020 2023 6d73  ge)..        #ms
+00008e50: 672e 7365 7453 7479 6c65 5368 6565 7428  g.setStyleSheet(
+00008e60: 7365 6c66 2e73 7479 6c65 7368 6565 7429  self.stylesheet)
+00008e70: 0d0a 2020 2020 2020 2020 2320 6765 7420  ..        # get 
+00008e80: 6261 636b 6772 6f75 6e64 2063 6f6c 6f72  background color
+00008e90: 2066 726f 6d20 7468 656d 6520 6d61 6e61   from theme mana
+00008ea0: 6765 720d 0a20 2020 2020 2020 2023 2067  ger..        # g
+00008eb0: 6574 2066 6f72 6567 726f 756e 6420 636f  et foreground co
+00008ec0: 6c6f 7220 6672 6f6d 2074 6865 6d65 206d  lor from theme m
+00008ed0: 616e 6167 6572 0d0a 2020 2020 2020 2020  anager..        
+00008ee0: 7374 796c 6520 3d20 7365 6c66 2e74 6865  style = self.the
+00008ef0: 6d65 5f6d 616e 6167 6572 2e67 6574 5f6e  me_manager.get_n
+00008f00: 6f74 6966 6963 6174 696f 6e5f 7374 796c  otification_styl
+00008f10: 6528 290d 0a20 2020 2020 2020 206d 7367  e()..        msg
+00008f20: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+00008f30: 7479 6c65 290d 0a20 2020 2020 2020 206d  tyle)..        m
+00008f40: 7367 2e6f 7065 6e28 290d 0a0d 0a0d 0a20  sg.open()...... 
+00008f50: 2020 2064 6566 2063 6c65 616e 7570 5f74     def cleanup_t
+00008f60: 7261 6e73 6163 7469 6f6e 5f64 6174 6128  ransaction_data(
+00008f70: 7365 6c66 2c64 6174 6129 3a0d 0a20 2020  self,data):..   
+00008f80: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00008f90: 2020 636c 6561 6e73 2075 7020 7472 616e    cleans up tran
+00008fa0: 7361 6374 696f 6e20 6461 7461 2066 726f  saction data fro
+00008fb0: 6d20 6f6c 6420 6669 6c65 2076 6572 7369  m old file versi
+00008fc0: 6f6e 730d 0a20 2020 2020 2020 2022 2222  ons..        """
+00008fd0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+00008fe0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00008ff0: 7428 226f 6c64 5f64 6174 6122 2c64 6174  t("old_data",dat
+00009000: 6129 0d0a 2020 2020 2020 2020 2020 2020  a)..            
+00009010: 2320 6461 7461 203d 2064 6963 7428 6461  # data = dict(da
+00009020: 7461 290d 0a20 2020 2020 2020 2020 2020  ta)..           
+00009030: 206e 6577 5f64 6174 6120 3d20 7b22 6167   new_data = {"ag
+00009040: 656e 7473 223a 7b7d 2c22 7472 616e 7361  ents":{},"transa
+00009050: 6374 696f 6e73 223a 5b5d 2c22 626f 785f  ctions":[],"box_
+00009060: 706f 7369 7469 6f6e 7322 3a7b 7d2c 2022  positions":{}, "
+00009070: 6c61 6265 6c5f 706f 7369 7469 6f6e 7322  label_positions"
+00009080: 3a7b 7d2c 2274 6865 6d65 223a 4e6f 6e65  :{},"theme":None
+00009090: 7d20 2320 6461 7461 2e63 6f70 7928 290d  } # data.copy().
+000090a0: 0a20 2020 2020 2020 2020 2020 2023 206e  .            # n
+000090b0: 6577 5f64 6174 615b 2274 7261 6e73 6163  ew_data["transac
+000090c0: 7469 6f6e 7322 5d20 3d20 6461 7461 5b22  tions"] = data["
+000090d0: 7472 616e 7361 6374 696f 6e73 225d 2e63  transactions"].c
+000090e0: 6f70 7928 290d 0a0d 0a20 2020 2020 2020  opy()....       
+000090f0: 2020 2020 2066 6f72 206b 2c76 2069 6e20       for k,v in 
+00009100: 6461 7461 2e69 7465 6d73 2829 3a0d 0a0d  data.items():...
+00009110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009120: 2069 6620 6b20 3d3d 2022 7468 656d 6522   if k == "theme"
+00009130: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00009140: 2020 2020 2020 206e 6577 5f64 6174 615b         new_data[
+00009150: 2274 6865 6d65 225d 203d 2064 6174 615b  "theme"] = data[
+00009160: 6b5d 2023 207b 2267 6c6f 6261 6c74 6865  k] # {"globalthe
+00009170: 6d65 223a 2062 7269 6768 742f 6461 726b  me": bright/dark
+00009180: 2c20 2263 6f6c 6f72 7322 3a20 636f 6c6f  , "colors": colo
+00009190: 7273 7d20 2320 6c6f 6164 2074 6865 2063  rs} # load the c
+000091a0: 6f6c 6f72 2074 6865 6d65 0d0a 0d0a 2020  olor theme....  
+000091b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000091c0: 206b 203d 3d20 2261 6765 6e74 7322 3a0d   k == "agents":.
+000091d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000091e0: 2020 2020 2066 6f72 206b 322c 7632 2069       for k2,v2 i
+000091f0: 6e20 6461 7461 5b6b 5d2e 6974 656d 7328  n data[k].items(
+00009200: 293a 0d0a 0d0a 2020 2020 2020 2020 2020  ):....          
+00009210: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00009220: 312e 2072 656e 616d 6520 6167 656e 740d  1. rename agent.
+00009230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009240: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+00009250: 5245 4e41 4d45 2041 4745 4e54 532e 2e2e  RENAME AGENTS...
+00009260: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00009270: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00009280: 636f 6465 5f6c 696e 6573 203d 205b 5d0d  code_lines = [].
+00009290: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000092a0: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
+000092b0: 696e 6520 696e 2076 322e 7370 6c69 7428  ine in v2.split(
+000092c0: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+000092d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000092e0: 2020 2020 6966 2022 4147 454e 5422 2069      if "AGENT" i
+000092f0: 6e20 6c69 6e65 3a20 2320 2061 6e64 206c  n line: #  and l
+00009300: 656e 286c 696e 6529 203e 3d20 393a 0d0a  en(line) >= 9:..
+00009310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009330: 6e6c 696e 6520 3d20 6c69 6e65 5b3a 395d  nline = line[:9]
+00009340: 202b 2063 616d 656c 286c 696e 655b 395d   + camel(line[9]
+00009350: 2920 2b20 6c69 6e65 5b31 303a 5d0d 0a20  ) + line[10:].. 
+00009360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009370: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00009380: 7269 6e74 2822 2020 2072 656e 616d 6564  rint("   renamed
+00009390: 222c 206c 696e 652c 6e6c 696e 6529 0d0a  ", line,nline)..
+000093a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000093b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000093c0: 6966 2022 434c 4153 5322 2069 6e20 6c69  if "CLASS" in li
+000093d0: 6e65 3a20 230d 0a20 2020 2020 2020 2020  ne: #..         
+000093e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000093f0: 2020 2020 2020 206e 6c69 6e65 203d 2020         nline =  
+00009400: 6c69 6e65 5b3a 395d 202b 2063 616d 656c  line[:9] + camel
+00009410: 286c 696e 655b 395d 2920 2b20 6c69 6e65  (line[9]) + line
+00009420: 5b31 303a 5d0d 0a20 2020 2020 2020 2020  [10:]..         
+00009430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009440: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
+00009450: 2072 656e 616d 6564 222c 206c 696e 652c   renamed", line,
+00009460: 6e6c 696e 6529 0d0a 0d0a 2020 2020 2020  nline)....      
+00009470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009480: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00009490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000094a0: 2020 2020 2020 2020 2020 2020 206e 6c69               nli
+000094b0: 6e65 203d 206c 696e 6520 2320 224e 4f54  ne = line # "NOT
+000094c0: 2046 4f55 4e44 2220 2320 6c69 6e65 0d0a   FOUND" # line..
+000094d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000094e0: 2020 2020 2020 2020 2020 2020 2320 7072              # pr
+000094f0: 696e 7428 226e 6c69 6e65 222c 6e6c 696e  int("nline",nlin
+00009500: 652c 226f 6c64 222c 7632 290d 0a0d 0a20  e,"old",v2).... 
+00009510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009520: 2020 2020 2020 2020 2020 206e 6577 5f63             new_c
+00009530: 6f64 655f 6c69 6e65 732e 6170 7065 6e64  ode_lines.append
+00009540: 286e 6c69 6e65 290d 0a0d 0a20 2020 2020  (nline)....     
+00009550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009560: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
+00009570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009580: 2020 2020 2020 206e 6577 5f63 6f64 6520         new_code 
+00009590: 3d20 225c 6e22 2e6a 6f69 6e28 6e65 775f  = "\n".join(new_
+000095a0: 636f 6465 5f6c 696e 6573 290d 0a0d 0a20  code_lines).... 
+000095b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000095c0: 2020 2020 2020 2061 6765 6e74 5f6e 616d         agent_nam
+000095d0: 6520 3d20 6361 6d65 6c28 7374 7228 6b32  e = camel(str(k2
+000095e0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+000095f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00009600: 7428 2220 2020 2061 6765 6e74 206e 616d  t("    agent nam
+00009610: 6522 2c20 7374 7228 6b32 292c 2022 2d3e  e", str(k2), "->
+00009620: 2220 2c20 6361 6d65 6c28 7374 7228 6b32  " , camel(str(k2
+00009630: 2929 290d 0a0d 0a0d 0a20 2020 2020 2020  )))......       
+00009640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009650: 2069 6620 7374 7228 6b32 2920 696e 2064   if str(k2) in d
+00009660: 6174 615b 2262 6f78 5f70 6f73 6974 696f  ata["box_positio
+00009670: 6e73 225d 3a20 2320 7472 7920 6966 2061  ns"]: # try if a
+00009680: 6765 6e74 2069 7320 706c 6163 6564 2073  gent is placed s
+00009690: 6f6d 6577 6865 7265 0d0a 0d0a 2020 2020  omewhere....    
+000096a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000096b0: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
+000096c0: 5b22 6167 656e 7473 225d 5b61 6765 6e74  ["agents"][agent
+000096d0: 5f6e 616d 655d 203d 206e 6577 5f63 6f64  _name] = new_cod
+000096e0: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
+000096f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009700: 2023 2032 2e20 6173 7369 676e 206e 6577   # 2. assign new
+00009710: 2062 6f78 2070 6f73 6974 696f 6e0d 0a20   box position.. 
+00009720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009730: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00009740: 2822 4153 5349 474e 204e 4557 2042 4f58  ("ASSIGN NEW BOX
+00009750: 2050 4f53 4954 494f 4e53 2e2e 2e22 290d   POSITIONS...").
+00009760: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00009770: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00009780: 6c64 5f70 6f73 203d 2064 6174 615b 2262  ld_pos = data["b
+00009790: 6f78 5f70 6f73 6974 696f 6e73 225d 5b73  ox_positions"][s
+000097a0: 7472 286b 3229 5d0d 0a20 2020 2020 2020  tr(k2)]..       
+000097b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000097c0: 2020 2020 206e 6577 5f64 6174 615b 2262       new_data["b
+000097d0: 6f78 5f70 6f73 6974 696f 6e73 225d 5b61  ox_positions"][a
+000097e0: 6765 6e74 5f6e 616d 655d 203d 206f 6c64  gent_name] = old
+000097f0: 5f70 6f73 0d0a 0d0a 2020 2020 2020 2020  _pos....        
+00009800: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00009810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009820: 2020 206e 6577 5f64 6174 615b 6b5d 203d     new_data[k] =
+00009830: 2076 0d0a 0d0a 2020 2020 2020 2020 2020   v....          
+00009840: 2020 7072 696e 7428 2252 454e 414d 4520    print("RENAME 
+00009850: 5452 414e 5341 4354 494f 4e53 2e2e 2e22  TRANSACTIONS..."
+00009860: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+00009870: 2033 2e20 7265 6e61 6d65 2074 7261 6e73   3. rename trans
+00009880: 6163 7469 6f6e 730d 0a20 2020 2020 2020  actions..       
+00009890: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+000098a0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+000098b0: 2c74 2069 6e20 656e 756d 6572 6174 6528  ,t in enumerate(
+000098c0: 6c69 7374 2864 6174 615b 2274 7261 6e73  list(data["trans
+000098d0: 6163 7469 6f6e 7322 5d29 293a 0d0a 2020  actions"])):..  
+000098e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000098f0: 2020 6e65 775f 6461 7461 5b22 7472 616e    new_data["tran
+00009900: 7361 6374 696f 6e73 225d 5b69 5d5b 2261  sactions"][i]["a
+00009910: 6765 6e74 3122 5d20 3d20 6361 6d65 6c28  gent1"] = camel(
+00009920: 6461 7461 5b22 7472 616e 7361 6374 696f  data["transactio
+00009930: 6e73 225d 5b69 5d5b 2261 6765 6e74 3122  ns"][i]["agent1"
+00009940: 5d29 2023 2e63 6170 6974 616c 697a 6528  ]) #.capitalize(
+00009950: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00009960: 2020 2020 2020 206e 6577 5f64 6174 615b         new_data[
+00009970: 2274 7261 6e73 6163 7469 6f6e 7322 5d5b  "transactions"][
+00009980: 695d 5b22 6167 656e 7432 225d 203d 2063  i]["agent2"] = c
+00009990: 616d 656c 2864 6174 615b 2274 7261 6e73  amel(data["trans
+000099a0: 6163 7469 6f6e 7322 5d5b 695d 5b22 6167  actions"][i]["ag
+000099b0: 656e 7432 225d 2920 232e 6361 7069 7461  ent2"]) #.capita
+000099c0: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
+000099d0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000099e0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+000099f0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00009a00: 7074 696f 6e5f 7479 7065 2c20 6578 6365  ption_type, exce
+00009a10: 7074 696f 6e5f 6f62 6a65 6374 2c20 6578  ption_object, ex
+00009a20: 6365 7074 696f 6e5f 7472 6163 6562 6163  ception_tracebac
+00009a30: 6b20 3d20 7379 732e 6578 635f 696e 666f  k = sys.exc_info
+00009a40: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00009a50: 2020 2020 6669 6c65 6e61 6d65 203d 2065      filename = e
+00009a60: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
+00009a70: 636b 2e74 625f 6672 616d 652e 665f 636f  ck.tb_frame.f_co
+00009a80: 6465 2e63 6f5f 6669 6c65 6e61 6d65 0d0a  de.co_filename..
+00009a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009aa0: 6c69 6e65 5f6e 756d 6265 7220 3d20 6578  line_number = ex
+00009ab0: 6365 7074 696f 6e5f 7472 6163 6562 6163  ception_tracebac
+00009ac0: 6b2e 7462 5f6c 696e 656e 6f0d 0a20 2020  k.tb_lineno..   
+00009ad0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00009ae0: 662e 6e6f 7469 6679 2822 536f 6d65 7468  f.notify("Someth
+00009af0: 696e 6720 7765 6e20 7772 6f6e 6720 7768  ing wen wrong wh
+00009b00: 656e 2069 6e73 6572 7469 6e67 2074 6865  en inserting the
+00009b10: 2074 7261 6e73 6163 7469 6f6e 733a 5c6e   transactions:\n
+00009b20: 2220 2b20 7374 7228 6529 202b 2022 5c6e  " + str(e) + "\n
+00009b30: 4c69 6e65 3a22 202b 2073 7472 286c 696e  Line:" + str(lin
+00009b40: 655f 6e75 6d62 6572 292c 7469 746c 653d  e_number),title=
+00009b50: 2245 7272 6f72 2229 0d0a 0d0a 2020 2020  "Error")....    
+00009b60: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00009b70: 6577 5f64 6174 610d 0a20 2020 2020 2020  ew_data..       
+00009b80: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00009b90: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+00009ba0: 2020 2020 2065 7863 6570 7469 6f6e 5f74       exception_t
+00009bb0: 7970 652c 2065 7863 6570 7469 6f6e 5f6f  ype, exception_o
+00009bc0: 626a 6563 742c 2065 7863 6570 7469 6f6e  bject, exception
+00009bd0: 5f74 7261 6365 6261 636b 203d 2073 7973  _traceback = sys
+00009be0: 2e65 7863 5f69 6e66 6f28 290d 0a20 2020  .exc_info()..   
+00009bf0: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+00009c00: 6520 3d20 6578 6365 7074 696f 6e5f 7472  e = exception_tr
+00009c10: 6163 6562 6163 6b2e 7462 5f66 7261 6d65  aceback.tb_frame
+00009c20: 2e66 5f63 6f64 652e 636f 5f66 696c 656e  .f_code.co_filen
+00009c30: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
+00009c40: 206c 696e 655f 6e75 6d62 6572 203d 2065   line_number = e
+00009c50: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
+00009c60: 636b 2e74 625f 6c69 6e65 6e6f 0d0a 0d0a  ck.tb_lineno....
+00009c70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00009c80: 2e6e 6f74 6966 7928 2243 6f75 6c74 206e  .notify("Coult n
+00009c90: 6f74 206f 7074 6e20 7468 6520 7072 6f6a  ot optn the proj
+00009ca0: 6563 7420 6669 6c65 2e20 4973 2069 7420  ect file. Is it 
+00009cb0: 616e 206f 6c64 2076 6572 7369 6f6e 3f5c  an old version?\
+00009cc0: 6e20 4572 726f 7220 696e 204c 696e 6520  n Error in Line 
+00009cd0: 2569 3a20 2225 6c69 6e65 5f6e 756d 6265  %i: "%line_numbe
+00009ce0: 7220 2b20 7374 7228 6529 2c74 6974 6c65  r + str(e),title
+00009cf0: 3d22 4572 726f 7222 290d 0a0d 0a20 2020  ="Error")....   
+00009d00: 2064 6566 206e 6f74 6966 795f 746f 6f6c   def notify_tool
+00009d10: 7469 7028 7365 6c66 2c77 6869 6368 293a  tip(self,which):
+00009d20: 0d0a 2020 2020 2020 2020 7474 203d 2077  ..        tt = w
+00009d30: 6869 6368 2e74 6f6f 6c54 6970 2028 290d  hich.toolTip ().
+00009d40: 0a20 2020 2020 2020 2073 656c 662e 6e6f  .        self.no
+00009d50: 7469 6679 2874 6974 6c65 3d22 5469 7022  tify(title="Tip"
+00009d60: 2c6d 6573 7361 6765 3d73 7472 2874 7429  ,message=str(tt)
+00009d70: 290d 0a0d 0a0d 0a20 2020 2064 6566 2072  )......    def r
+00009d80: 6573 697a 6545 7665 6e74 2873 656c 662c  esizeEvent(self,
+00009d90: 2065 7665 6e74 293a 0d0a 2020 2020 2020   event):..      
+00009da0: 2020 7072 696e 7428 2272 6573 697a 6522    print("resize"
+00009db0: 290d 0a0d 0a20 2020 2020 2020 2023 7365  )....        #se
+00009dc0: 6c66 2e64 7261 7763 616e 7661 732e 7061  lf.drawcanvas.pa
+00009dd0: 7265 6e74 2e72 6573 697a 655f 6672 616d  rent.resize_fram
+00009de0: 6528 290d 0a20 2020 2020 2020 2051 7457  e()..        QtW
+00009df0: 6964 6765 7473 2e51 4d61 696e 5769 6e64  idgets.QMainWind
+00009e00: 6f77 2e72 6573 697a 6545 7665 6e74 2873  ow.resizeEvent(s
+00009e10: 656c 662c 2065 7665 6e74 290d 0a0d 0a20  elf, event).... 
+00009e20: 2020 2020 2020 2023 2072 6573 697a 6520         # resize 
+00009e30: 7472 616e 7361 6374 696f 6e0d 0a20 2020  transaction..   
+00009e40: 2020 2020 2077 203d 2037 3431 0d0a 2020       w = 741..  
+00009e50: 2020 2020 2020 6820 3d20 3139 3120 2b20        h = 191 + 
+00009e60: 6d61 7828 302c 7365 6c66 2e66 7261 6d65  max(0,self.frame
+00009e70: 4765 6f6d 6574 7279 2829 2e68 6569 6768  Geometry().heigh
+00009e80: 7428 292d 3938 3529 0d0a 2020 2020 2020  t()-985)..      
+00009e90: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+00009ea0: 6f6e 5669 6577 2e70 6172 656e 7420 3d20  onView.parent = 
+00009eb0: 7365 6c66 2e64 6f63 6b57 6964 6765 745f  self.dockWidget_
+00009ec0: 350d 0a20 2020 2020 2020 2023 2073 656c  5..        # sel
+00009ed0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+00009ee0: 772e 7365 7447 656f 6d65 7472 7928 3330  w.setGeometry(30
+00009ef0: 2c36 352c 772c 6829 2023 2033 302c 3637  ,65,w,h) # 30,67
+00009f00: 302c 772c 6829 0d0a 0d0a 2020 2020 2020  0,w,h)....      
+00009f10: 2020 2373 656c 662e 6c61 6265 6c5f 3137    #self.label_17
+00009f20: 2e73 6574 4765 6f6d 6574 7279 2831 302c  .setGeometry(10,
+00009f30: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
+00009f40: 7279 2829 2e68 6569 6768 7428 292d 3135  ry().height()-15
+00009f50: 302c 3133 312c 3839 2920 2320 6c6f 676f  0,131,89) # logo
+00009f60: 0d0a 2020 2020 2020 2020 2373 656c 662e  ..        #self.
+00009f70: 6c61 6265 6c5f 3137 2e73 6574 5669 7369  label_17.setVisi
+00009f80: 626c 6528 4661 6c73 6529 0d0a 0d0a 2020  ble(False)....  
+00009f90: 2020 2020 2020 7365 6c66 2e72 6164 696f        self.radio
+00009fa0: 4275 7474 6f6e 2e73 6574 4765 6f6d 6574  Button.setGeomet
+00009fb0: 7279 2830 2c73 656c 662e 6672 616d 6547  ry(0,self.frameG
+00009fc0: 656f 6d65 7472 7928 292e 6865 6967 6874  eometry().height
+00009fd0: 2829 2d32 382c 3232 2c32 3229 0d0a 0d0a  ()-28,22,22)....
+00009fe0: 2020 2020 6465 6620 6272 6f77 7365 2873      def browse(s
+00009ff0: 656c 6629 3a0d 0a0d 0a0d 0a20 2020 2020  elf):......     
+0000a000: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+0000a010: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
+0000a020: 5146 696c 6544 6961 6c6f 672e 6765 744f  QFileDialog.getO
+0000a030: 7065 6e46 696c 654e 616d 6528 7365 6c66  penFileName(self
+0000a040: 2c20 274f 7065 6e20 6669 6c65 272c 6f73  , 'Open file',os
+0000a050: 2e67 6574 6377 6428 292c 2022 6174 7475  .getcwd(), "attu
+0000a060: 6e65 2046 696c 6573 2028 2a2e 7366 6374  ne Files (*.sfct
+0000a070: 6c29 3b3b 4d41 4d42 4120 4669 6c65 7320  l);;MAMBA Files 
+0000a080: 282a 2e6d 616d 6261 293b 3b54 7261 6e73  (*.mamba);;Trans
+0000a090: 6163 7469 6f6e 2046 696c 6573 2028 2a2e  action Files (*.
+0000a0a0: 7472 616e 7329 2229 5b30 5d0d 0a20 2020  trans)")[0]..   
+0000a0b0: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
+0000a0c0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+0000a0d0: 6f74 6966 7928 2253 6565 6d73 2061 7320  otify("Seems as 
+0000a0e0: 6966 2074 6865 2070 726f 6a65 6374 7320  if the projects 
+0000a0f0: 666f 6c64 6572 2064 6f65 7320 6e6f 7420  folder does not 
+0000a100: 7965 7420 6578 6973 742e 2070 6c65 6173  yet exist. pleas
+0000a110: 6520 6372 6561 7465 2069 7420 6d61 6e75  e create it manu
+0000a120: 616c 6c79 2069 6e20 7468 6520 7061 7265  ally in the pare
+0000a130: 6e74 2064 6972 6563 746f 7279 206f 6620  nt directory of 
+0000a140: 7372 6322 2c20 7469 746c 653d 2250 726f  src", title="Pro
+0000a150: 6a65 6374 7320 666f 6c64 6572 2229 0d0a  jects folder")..
+0000a160: 0d0a 0d0a 2020 2020 2020 2020 2320 7265  ....        # re
+0000a170: 6d6f 7665 2061 6c6c 2074 6162 7320 6672  move all tabs fr
+0000a180: 6f6d 2074 6162 2077 6964 6765 740d 0a20  om tab widget.. 
+0000a190: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0000a1a0: 7261 6e67 6528 312c 7365 6c66 2e74 6162  range(1,self.tab
+0000a1b0: 5769 6467 6574 2e63 6f75 6e74 2829 293a  Widget.count()):
+0000a1c0: 0d0a 2020 2020 2020 2020 2020 2020 7461  ..            ta
+0000a1d0: 6220 3d20 7365 6c66 2e74 6162 5769 6467  b = self.tabWidg
+0000a1e0: 6574 2e77 6964 6765 7428 3129 0d0a 2020  et.widget(1)..  
+0000a1f0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0000a200: 6162 5769 6467 6574 2e72 656d 6f76 6554  abWidget.removeT
+0000a210: 6162 2831 290d 0a20 2020 2020 2020 2020  ab(1)..         
+0000a220: 2020 2064 656c 2074 6162 0d0a 0d0a 2020     del tab....  
+0000a230: 2020 2020 2020 436f 6465 4564 6974 6f72        CodeEditor
+0000a240: 2e69 6e73 7461 6e63 6573 203d 207b 7d0d  .instances = {}.
+0000a250: 0a0d 0a0d 0a20 2020 2020 2020 2066 696c  .....        fil
+0000a260: 656e 616d 655f 6261 636b 7570 203d 2073  ename_backup = s
+0000a270: 656c 662e 6669 6c65 6e61 6d65 0d0a 2020  elf.filename..  
+0000a280: 2020 2020 2020 6375 7272 656e 745f 6669        current_fi
+0000a290: 6c65 5f62 6163 6b75 7020 3d20 7365 6c66  le_backup = self
+0000a2a0: 2e63 7572 7265 6e74 5f66 696c 650d 0a0d  .current_file...
+0000a2b0: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
+0000a2c0: 6c65 6e61 6d65 203d 2066 696c 656e 616d  lename = filenam
+0000a2d0: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+0000a2e0: 6375 7272 656e 745f 6669 6c65 203d 2066  current_file = f
+0000a2f0: 696c 656e 616d 650d 0a0d 0a20 2020 2020  ilename....     
+0000a300: 2020 2073 656c 662e 6d61 696e 6c6f 6f70     self.mainloop
+0000a310: 5f65 6469 746f 722e 7374 6172 745f 7761  _editor.start_wa
+0000a320: 7463 6864 6f67 2873 656c 662e 6375 7272  tchdog(self.curr
+0000a330: 656e 745f 6669 6c65 290d 0a0d 0a20 2020  ent_file)....   
+0000a340: 2020 2020 2073 656c 662e 6c61 6265 6c5f       self.label_
+0000a350: 666e 616d 652e 7365 7454 6578 7428 6669  fname.setText(fi
+0000a360: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2020  lename)....     
+0000a370: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+0000a380: 2020 2020 2070 7269 6e74 2822 4649 4c45       print("FILE
+0000a390: 4e41 4d45 222c 6669 6c65 6e61 6d65 290d  NAME",filename).
+0000a3a0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+0000a3b0: 206c 6f61 6420 656e 7472 6965 7320 696e   load entries in
+0000a3c0: 746f 2074 6865 206c 6973 740d 0a20 2020  to the list..   
+0000a3d0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+0000a3e0: 656e 2866 696c 656e 616d 652c 2027 7227  en(filename, 'r'
+0000a3f0: 2920 6173 2073 7472 6561 6d3a 0d0a 0d0a  ) as stream:....
+0000a400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a410: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0000a420: 2020 2020 2020 2020 2020 7472 616e 7361            transa
+0000a430: 6374 696f 6e5f 6461 7461 203d 2073 656c  ction_data = sel
+0000a440: 662e 636c 6561 6e75 705f 7472 616e 7361  f.cleanup_transa
+0000a450: 6374 696f 6e5f 6461 7461 2879 616d 6c2e  ction_data(yaml.
+0000a460: 7361 6665 5f6c 6f61 6428 7374 7265 616d  safe_load(stream
+0000a470: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000a480: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+0000a490: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4b0: 7365 6c66 2e6e 6f74 6966 7928 2245 7272  self.notify("Err
+0000a4c0: 6f72 2072 6574 7265 6976 696e 6720 7468  or retreiving th
+0000a4d0: 6520 7472 616e 7361 6374 696f 6e20 6461  e transaction da
+0000a4e0: 7461 2066 726f 6d20 7468 6520 736f 7572  ta from the sour
+0000a4f0: 6365 2066 696c 652e 2041 626f 7274 696e  ce file. Abortin
+0000a500: 672e 5c6e 222b 7374 7228 6529 2c74 6974  g.\n"+str(e),tit
+0000a510: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
+0000a520: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000a530: 7269 6e74 2822 7472 616e 7361 6374 696f  rint("transactio
+0000a540: 6e5f 6461 7461 222c 7472 616e 7361 6374  n_data",transact
+0000a550: 696f 6e5f 6461 7461 290d 0a20 2020 2020  ion_data)..     
+0000a560: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+0000a570: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000a580: 2020 2020 2020 2023 2074 7279 2074 6f20         # try to 
+0000a590: 6c6f 6164 206e 6f74 6573 0d0a 2020 2020  load notes..    
 0000a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5b0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-0000a5c0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0000a5d0: 696e 7428 2243 4845 434b 2044 4952 4543  int("CHECK DIREC
-0000a5e0: 544f 5259 2046 4f52 2055 5044 4154 4553  TORY FOR UPDATES
-0000a5f0: 222c 2066 696c 656e 616d 6529 0d0a 2020  ", filename)..  
-0000a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a610: 2020 2020 2020 6669 6c65 7061 7468 203d        filepath =
-0000a620: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
-0000a630: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
-0000a640: 2866 696c 656e 616d 6529 290d 0a20 2020  (filename))..   
-0000a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a660: 2020 2020 206d 616d 6261 5f70 6174 6820       mamba_path 
-0000a670: 3d20 6669 6c65 7061 7468 202b 2022 2f6d  = filepath + "/m
-0000a680: 616d 6261 5f63 6f64 6522 0d0a 2020 2020  amba_code"..    
-0000a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6a0: 2020 2020 7072 696e 7428 226d 616d 6261      print("mamba
-0000a6b0: 2070 6174 6822 2c6d 616d 6261 5f70 6174   path",mamba_pat
-0000a6c0: 6829 0d0a 0d0a 2020 2020 2020 2020 2020  h)....          
-0000a6d0: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
-0000a6e0: 6720 3d20 2249 2068 6176 6520 6465 7465  g = "I have dete
-0000a6f0: 6374 6564 2061 2064 6576 6961 7469 6f6e  cted a deviation
-0000a700: 2062 6574 7765 656e 2074 6865 202f 6d61   between the /ma
-0000a710: 6d62 615f 636f 6465 2f20 6469 7265 6374  mba_code/ direct
-0000a720: 6f72 7920 616e 6420 7468 6520 636f 6465  ory and the code
-0000a730: 2073 746f 7265 6420 696e 2074 6869 7320   stored in this 
-0000a740: 6669 6c65 2122 0d0a 2020 2020 2020 2020  file!"..        
+0000a5b0: 6966 2022 6e6f 7465 7322 2069 6e20 7472  if "notes" in tr
+0000a5c0: 616e 7361 6374 696f 6e5f 6461 7461 3a0d  ansaction_data:.
+0000a5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a5e0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0000a5f0: 7465 7345 6469 742e 7365 7450 6c61 696e  tesEdit.setPlain
+0000a600: 5465 7874 2874 7261 6e73 6163 7469 6f6e  Text(transaction
+0000a610: 5f64 6174 615b 226e 6f74 6573 225d 290d  _data["notes"]).
+0000a620: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000a630: 2020 2020 2020 2023 2074 7279 2074 6f20         # try to 
+0000a640: 6c6f 6164 2063 6f6c 6f72 2074 6865 6d65  load color theme
+0000a650: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a660: 2020 2020 2020 6966 2074 7261 6e73 6163        if transac
+0000a670: 7469 6f6e 5f64 6174 615b 2274 6865 6d65  tion_data["theme
+0000a680: 225d 2069 7320 6e6f 7420 4e6f 6e65 3a0d  "] is not None:.
+0000a690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a6a0: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+0000a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6c0: 2020 2020 2020 2020 2020 2074 6865 6d65             theme
+0000a6d0: 5f66 6e61 6d65 203d 2074 7261 6e73 6163  _fname = transac
+0000a6e0: 7469 6f6e 5f64 6174 615b 2274 6865 6d65  tion_data["theme
+0000a6f0: 225d 5b22 636f 6c6f 7273 225d 0d0a 2020  "]["colors"]..  
+0000a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a710: 2020 2020 2020 2020 2020 6774 6865 6d65            gtheme
+0000a720: 203d 2074 7261 6e73 6163 7469 6f6e 5f64   = transaction_d
+0000a730: 6174 615b 2274 6865 6d65 225d 5b22 676c  ata["theme"]["gl
+0000a740: 6f62 616c 7468 656d 6522 5d0d 0a20 2020  obaltheme"]..   
 0000a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a760: 6d73 6720 2b3d 2022 2041 6666 6563 7465  msg += " Affecte
-0000a770: 6420 6669 6c65 733a 5c6e 5c6e 220d 0a0d  d files:\n\n"...
-0000a780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a790: 2020 2020 2020 2020 2073 7562 5f6e 616d           sub_nam
-0000a7a0: 6573 203d 206e 6578 7428 6f73 2e77 616c  es = next(os.wal
-0000a7b0: 6b28 6d61 6d62 615f 7061 7468 292c 2028  k(mamba_path), (
-0000a7c0: 4e6f 6e65 2c20 4e6f 6e65 2c20 5b5d 2929  None, None, []))
-0000a7d0: 5b32 5d20 2023 205b 5d20 6966 206e 6f20  [2]  # [] if no 
-0000a7e0: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
-0000a7f0: 2020 2020 2020 2020 2020 2020 2020 616c                al
-0000a800: 745f 7472 616e 7361 6374 696f 6e5f 6461  t_transaction_da
-0000a810: 7461 203d 207b 7d0d 0a20 2020 2020 2020  ta = {}..       
-0000a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a830: 2061 6c74 5f64 6966 6673 203d 207b 7d0d   alt_diffs = {}.
-0000a840: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a850: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
-0000a860: 6920 696e 2073 7562 5f6e 616d 6573 3a0d  i in sub_names:.
-0000a870: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a880: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000a890: 2063 6865 636b 2066 696c 656e 616d 6520   check filename 
-0000a8a0: 666f 7220 6167 656e 740d 0a20 2020 2020  for agent..     
-0000a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8c0: 2020 2020 2020 2061 6e61 6d65 203d 2063         aname = c
-0000a8d0: 616d 656c 2866 695b 3a2d 345d 2920 2320  amel(fi[:-4]) # 
-0000a8e0: 2e63 6170 6974 616c 697a 6528 290d 0a0d  .capitalize()...
-0000a8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a900: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000a910: 6e74 2822 4669 6c65 2022 2c61 6e61 6d65  nt("File ",aname
-0000a920: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000a930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000a940: 6620 616e 616d 6520 696e 206d 795f 6167  f aname in my_ag
-0000a950: 656e 7473 3a0d 0a0d 0a20 2020 2020 2020  ents:....       
-0000a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a970: 2020 2020 2020 2020 2023 2072 6561 6420           # read 
-0000a980: 7468 6973 2066 696c 650d 0a20 2020 2020  this file..     
-0000a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9a0: 2020 2020 2020 2020 2020 2077 6974 6820             with 
-0000a9b0: 6f70 656e 286d 616d 6261 5f70 6174 682b  open(mamba_path+
-0000a9c0: 222f 2220 2b20 6669 2c22 7222 2920 6173  "/" + fi,"r") as
-0000a9d0: 2066 696c 653a 0d0a 2020 2020 2020 2020   file:..        
-0000a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9f0: 2020 2020 2020 2020 2020 2020 636f 6465              code
-0000aa00: 203d 2066 696c 652e 7265 6164 2829 0d0a   = file.read()..
-0000aa10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa30: 2020 2020 2020 2320 7072 696e 7428 2264        # print("d
-0000aa40: 6576 206d 616d 6261 2066 6f6c 6465 723a  ev mamba folder:
-0000aa50: 2022 2c63 6f64 6529 0d0a 2020 2020 2020   ",code)..      
-0000aa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa70: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000aa80: 7072 696e 7428 2264 6576 2073 6663 746c  print("dev sfctl
-0000aa90: 2066 696c 653a 222c 2074 7261 6e73 6163   file:", transac
-0000aaa0: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
-0000aab0: 7322 5d5b 616e 616d 655d 290d 0a0d 0a20  s"][aname]).... 
-0000aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aae0: 2020 2069 6620 636f 6465 2e73 7472 6970     if code.strip
-0000aaf0: 2829 2021 3d20 7472 616e 7361 6374 696f  () != transactio
-0000ab00: 6e5f 6461 7461 5b22 6167 656e 7473 225d  n_data["agents"]
-0000ab10: 5b61 6e61 6d65 5d2e 7374 7269 7028 293a  [aname].strip():
-0000ab20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab40: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0000ab50: 7428 2244 4556 4941 5449 4f4e 2064 6574  t("DEVIATION det
-0000ab60: 6563 7465 6420 696e 2022 2c61 6e61 6d65  ected in ",aname
-0000ab70: 290d 0a0d 0a0d 0a20 2020 2020 2020 2020  )......         
-0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000aba0: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
-0000abb0: 6174 615b 616e 616d 655d 203d 2063 6f64  ata[aname] = cod
-0000abc0: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
-0000abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abe0: 2020 2020 2020 2020 2020 2020 2064 6966               dif
-0000abf0: 6620 3d20 205b 6c69 2066 6f72 206c 6920  f =  [li for li 
-0000ac00: 696e 2064 6966 666c 6962 2e6e 6469 6666  in difflib.ndiff
-0000ac10: 2863 6f64 652e 7374 7269 7028 292c 2074  (code.strip(), t
-0000ac20: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
-0000ac30: 2261 6765 6e74 7322 5d5b 616e 616d 655d  "agents"][aname]
-0000ac40: 2e73 7472 6970 2829 2920 6966 206c 695b  .strip()) if li[
-0000ac50: 305d 2021 3d20 2720 275d 0d0a 2020 2020  0] != ' ']..    
-0000ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a760: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0000a770: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
+0000a780: 6865 6d65 2021 3d20 6774 6865 6d65 3a0d  heme != gtheme:.
+0000a790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7b0: 2073 656c 662e 7377 6974 6368 5f74 6865   self.switch_the
+0000a7c0: 6d65 2829 0d0a 2020 2020 2020 2020 2020  me()..          
+0000a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7e0: 2020 7365 6c66 2e74 6865 6d65 5f6d 616e    self.theme_man
+0000a7f0: 6167 6572 2e6c 6f61 645f 636f 6c6f 7273  ager.load_colors
+0000a800: 2874 6865 6d65 5f66 6e61 6d65 290d 0a0d  (theme_fname)...
+0000a810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a820: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0000a830: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a840: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000a850: 6c66 2e73 7461 7475 7342 6172 2829 2e73  lf.statusBar().s
+0000a860: 686f 774d 6573 7361 6765 2822 436f 756c  howMessage("Coul
+0000a870: 6420 6e6f 7420 6c6f 6164 2063 6f6c 6f72  d not load color
+0000a880: 2074 6865 6d65 2e20 4661 6c6c 6261 636b   theme. Fallback
+0000a890: 2074 6f20 7374 616e 6172 6420 7468 656d   to stanard them
+0000a8a0: 6522 290d 0a0d 0a20 2020 2020 2020 2020  e")....         
+0000a8b0: 2020 2020 2020 2020 2020 2023 206e 6577             # new
+0000a8c0: 2066 6f72 6d61 740d 0a20 2020 2020 2020   format..       
+0000a8d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000a8e0: 662e 656e 7472 795f 6461 7461 203d 2074  f.entry_data = t
+0000a8f0: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
+0000a900: 2274 7261 6e73 6163 7469 6f6e 7322 5d0d  "transactions"].
+0000a910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a920: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+0000a930: 6e76 6173 2e63 6c65 6172 2863 6c65 6172  nvas.clear(clear
+0000a940: 616c 6c3d 5472 7565 290d 0a20 2020 2020  all=True)..     
+0000a950: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000a960: 2061 6464 2074 6865 2068 656c 7065 7220   add the helper 
+0000a970: 6167 656e 7473 0d0a 0d0a 2020 2020 2020  agents....      
+0000a980: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000a990: 7220 6b2c 7620 696e 2074 7261 6e73 6163  r k,v in transac
+0000a9a0: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
+0000a9b0: 7322 5d2e 6974 656d 7328 293a 0d0a 2020  s"].items():..  
+0000a9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9d0: 2020 2020 2020 7365 6c66 2e64 7261 7763        self.drawc
+0000a9e0: 616e 7661 732e 6164 645f 6167 656e 7428  anvas.add_agent(
+0000a9f0: 6b29 2023 202e 6361 7069 7461 6c69 7a65  k) # .capitalize
+0000aa00: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+0000aa10: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000aa20: 6e74 2822 4164 6420 6167 656e 7422 2c20  nt("Add agent", 
+0000aa30: 6b29 2023 2e63 6170 6974 616c 697a 6528  k) #.capitalize(
+0000aa40: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+0000aa50: 2020 2020 2020 2020 2020 2320 6164 6420            # add 
+0000aa60: 7468 6520 7472 616e 7361 6374 696f 6e73  the transactions
+0000aa70: 2028 636f 6e6e 6563 746f 7273 2061 6e64   (connectors and
+0000aa80: 2062 6f78 6573 290d 0a20 2020 2020 2020   boxes)..       
+0000aa90: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000aaa0: 662e 7570 6461 7465 5f74 6162 6c65 2829  f.update_table()
+0000aab0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000aac0: 2020 2020 2020 2020 2320 6c6f 6164 2061          # load a
+0000aad0: 6765 6e74 2773 2063 6f64 6573 0d0a 0d0a  gent's codes....
+0000aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aaf0: 2020 2020 2320 6669 7273 742c 2063 6f6d      # first, com
+0000ab00: 7061 7265 2069 6620 7468 6520 636f 6465  pare if the code
+0000ab10: 2069 6e20 7468 6520 6669 6c65 2074 7265   in the file tre
+0000ab20: 6520 2869 6620 616e 7929 2063 6f72 7265  e (if any) corre
+0000ab30: 7370 6f6e 6473 2074 6f20 7468 6520 636f  sponds to the co
+0000ab40: 6465 2069 6e20 7468 6520 2e73 6663 746c  de in the .sfctl
+0000ab50: 2066 696c 650d 0a0d 0a20 2020 2020 2020   file....       
+0000ab60: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+0000ab70: 6865 636b 2069 6620 6669 6c65 2074 7265  heck if file tre
+0000ab80: 6520 6973 2065 7869 7374 656e 740d 0a20  e is existent.. 
+0000ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aba0: 2020 206d 795f 6167 656e 7473 203d 206c     my_agents = l
+0000abb0: 6973 7428 7472 616e 7361 6374 696f 6e5f  ist(transaction_
+0000abc0: 6461 7461 5b22 6167 656e 7473 225d 2e6b  data["agents"].k
+0000abd0: 6579 7328 2929 0d0a 0d0a 2020 2020 2020  eys())....      
+0000abe0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000abf0: 6765 7420 6469 7265 6374 6f72 7920 6672  get directory fr
+0000ac00: 6f6d 2066 696c 656e 616d 650d 0a20 2020  om filename..   
+0000ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac20: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0000ac30: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000ac40: 7269 6e74 2822 4348 4543 4b20 4449 5245  rint("CHECK DIRE
+0000ac50: 4354 4f52 5920 464f 5220 5550 4441 5445  CTORY FOR UPDATE
+0000ac60: 5322 2c20 6669 6c65 6e61 6d65 290d 0a20  S", filename).. 
 0000ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac80: 2020 2020 616c 745f 6469 6666 735b 616e      alt_diffs[an
-0000ac90: 616d 655d 203d 2073 7472 2864 6966 6629  ame] = str(diff)
-0000aca0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000acb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acc0: 2020 2020 2020 2020 2020 2020 7374 7264              strd
-0000acd0: 6966 6620 3d20 7374 7228 6469 6666 292e  iff = str(diff).
-0000ace0: 7374 7269 7028 290d 0a0d 0a20 2020 2020  strip()....     
-0000acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac80: 2020 2020 2020 2066 696c 6570 6174 6820         filepath 
+0000ac90: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+0000aca0: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
+0000acb0: 6828 6669 6c65 6e61 6d65 2929 0d0a 2020  h(filename))..  
+0000acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000acd0: 2020 2020 2020 6d61 6d62 615f 7061 7468        mamba_path
+0000ace0: 203d 2066 696c 6570 6174 6820 2b20 222f   = filepath + "/
+0000acf0: 6d61 6d62 615f 636f 6465 220d 0a20 2020  mamba_code"..   
 0000ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad10: 2020 2069 6620 6c65 6e28 7374 7264 6966     if len(strdif
-0000ad20: 6629 203e 2034 303a 0d0a 2020 2020 2020  f) > 40:..      
-0000ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad50: 2020 2020 2020 7374 7264 6966 6620 3d20        strdiff = 
-0000ad60: 7374 7264 6966 665b 3a37 5d20 2b20 222e  strdiff[:7] + ".
-0000ad70: 2e2e 220d 0a20 2020 2020 2020 2020 2020  .."..           
-0000ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0000ada0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad10: 2020 2020 2070 7269 6e74 2822 6d61 6d62       print("mamb
+0000ad20: 6120 7061 7468 222c 6d61 6d62 615f 7061  a path",mamba_pa
+0000ad30: 7468 290d 0a0d 0a20 2020 2020 2020 2020  th)....         
+0000ad40: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000ad50: 7367 203d 2022 4920 6861 7665 2064 6574  sg = "I have det
+0000ad60: 6563 7465 6420 6120 6465 7669 6174 696f  ected a deviatio
+0000ad70: 6e20 6265 7477 6565 6e20 7468 6520 2f6d  n between the /m
+0000ad80: 616d 6261 5f63 6f64 652f 2064 6972 6563  amba_code/ direc
+0000ad90: 746f 7279 2061 6e64 2074 6865 2063 6f64  tory and the cod
+0000ada0: 6520 7374 6f72 6564 2069 6e20 7468 6973  e stored in this
+0000adb0: 2066 696c 6521 220d 0a20 2020 2020 2020   file!"..       
 0000adc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000add0: 7374 7264 6966 6620 3d20 7374 7264 6966  strdiff = strdif
-0000ade0: 660d 0a0d 0a20 2020 2020 2020 2020 2020  f....           
-0000adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae00: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-0000ae10: 202b 3d20 6669 202b 2022 3a20 2220 2b20   += fi + ": " + 
-0000ae20: 7374 7264 6966 6620 2b20 225c 6e22 0d0a  strdiff + "\n"..
-0000ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae50: 2020 2020 2020 2020 7072 696e 7428 6469          print(di
-0000ae60: 6666 290d 0a20 2020 2020 2020 2020 2020  ff)..           
-0000ae70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae80: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000ae90: 6e74 2822 5c6e 2229 0d0a 0d0a 2020 2020  nt("\n")....    
-0000aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aeb0: 2020 2020 6d73 6720 2b3d 2022 5c6e 446f      msg += "\nDo
-0000aec0: 2079 6f75 2077 616e 7420 746f 2061 6461   you want to ada
-0000aed0: 7074 2074 6865 2065 7874 6572 6e61 6c20  pt the external 
-0000aee0: 6368 616e 6765 733f 220d 0a20 2020 2020  changes?"..     
+0000add0: 206d 7367 202b 3d20 2220 4166 6665 6374   msg += " Affect
+0000ade0: 6564 2066 696c 6573 3a5c 6e5c 6e22 0d0a  ed files:\n\n"..
+0000adf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ae00: 2020 2020 2020 2020 2020 7375 625f 6e61            sub_na
+0000ae10: 6d65 7320 3d20 6e65 7874 286f 732e 7761  mes = next(os.wa
+0000ae20: 6c6b 286d 616d 6261 5f70 6174 6829 2c20  lk(mamba_path), 
+0000ae30: 284e 6f6e 652c 204e 6f6e 652c 205b 5d29  (None, None, [])
+0000ae40: 295b 325d 2020 2320 5b5d 2069 6620 6e6f  )[2]  # [] if no
+0000ae50: 2066 696c 650d 0a20 2020 2020 2020 2020   file..         
+0000ae60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000ae70: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
+0000ae80: 6174 6120 3d20 7b7d 0d0a 2020 2020 2020  ata = {}..      
+0000ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aea0: 2020 616c 745f 6469 6666 7320 3d20 7b7d    alt_diffs = {}
+0000aeb0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000aec0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0000aed0: 6669 2069 6e20 7375 625f 6e61 6d65 733a  fi in sub_names:
+0000aee0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0000aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af00: 2020 2023 2073 656c 662e 6e6f 7469 6679     # self.notify
-0000af10: 286d 7367 2c74 6974 6c65 3d22 4368 616e  (msg,title="Chan
-0000af20: 6765 7320 4465 7465 6374 6564 2229 0d0a  ges Detected")..
-0000af30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000af40: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0000af50: 2861 6c74 5f74 7261 6e73 6163 7469 6f6e  (alt_transaction
-0000af60: 5f64 6174 6129 203e 2030 3a0d 0a0d 0a20  _data) > 0:.... 
-0000af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af80: 2020 2020 2020 2020 2020 2071 6d20 3d20             qm = 
-0000af90: 514d 6573 7361 6765 426f 7828 7365 6c66  QMessageBox(self
-0000afa0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000afb0: 2020 2020 2020 2020 2020 2020 2020 2071                 q
-0000afc0: 6d2e 7365 7457 696e 646f 7754 6974 6c65  m.setWindowTitle
-0000afd0: 2822 4361 7574 696f 6e22 290d 0a20 2020  ("Caution")..   
-0000afe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aff0: 2020 2020 2020 2020 2023 2071 6d2e 7365           # qm.se
-0000b000: 7454 6578 7428 6d65 7373 6167 6529 0d0a  tText(message)..
-0000b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b020: 2020 2020 2020 2020 2020 2020 7374 796c              styl
-0000b030: 6520 3d20 7365 6c66 2e74 6865 6d65 5f6d  e = self.theme_m
-0000b040: 616e 6167 6572 2e67 6574 5f6e 6f74 6966  anager.get_notif
-0000b050: 6963 6174 696f 6e5f 7374 796c 6528 290d  ication_style().
-0000b060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b070: 2020 2020 2020 2020 2020 2020 2071 6d2e               qm.
-0000b080: 7365 7453 7479 6c65 5368 6565 7428 7374  setStyleSheet(st
-0000b090: 796c 6529 0d0a 0d0a 0d0a 2020 2020 2020  yle)......      
-0000b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0b0: 2020 2020 2020 7265 7420 3d20 716d 2e71        ret = qm.q
-0000b0c0: 7565 7374 696f 6e28 7365 6c66 2c27 4361  uestion(self,'Ca
-0000b0d0: 7574 696f 6e27 2c20 6d73 6720 2c20 716d  ution', msg , qm
-0000b0e0: 2e59 6573 207c 2071 6d2e 4e6f 290d 0a0d  .Yes | qm.No)...
-0000b0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b100: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000b110: 7265 7420 3d3d 2071 6d2e 5965 733a 0d0a  ret == qm.Yes:..
-0000b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af00: 2320 6368 6563 6b20 6669 6c65 6e61 6d65  # check filename
+0000af10: 2066 6f72 2061 6765 6e74 0d0a 2020 2020   for agent..    
+0000af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af30: 2020 2020 2020 2020 616e 616d 6520 3d20          aname = 
+0000af40: 6361 6d65 6c28 6669 5b3a 2d34 5d29 2023  camel(fi[:-4]) #
+0000af50: 202e 6361 7069 7461 6c69 7a65 2829 0d0a   .capitalize()..
+0000af60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000af70: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000af80: 696e 7428 2246 696c 6520 222c 616e 616d  int("File ",anam
+0000af90: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0000afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000afb0: 6966 2061 6e61 6d65 2069 6e20 6d79 5f61  if aname in my_a
+0000afc0: 6765 6e74 733a 0d0a 0d0a 2020 2020 2020  gents:....      
+0000afd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000afe0: 2020 2020 2020 2020 2020 2320 7265 6164            # read
+0000aff0: 2074 6869 7320 6669 6c65 0d0a 2020 2020   this file..    
+0000b000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b010: 2020 2020 2020 2020 2020 2020 7769 7468              with
+0000b020: 206f 7065 6e28 6d61 6d62 615f 7061 7468   open(mamba_path
+0000b030: 2b22 2f22 202b 2066 692c 2272 2229 2061  +"/" + fi,"r") a
+0000b040: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
+0000b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b060: 2020 2020 2020 2020 2020 2020 2063 6f64               cod
+0000b070: 6520 3d20 6669 6c65 2e72 6561 6428 290d  e = file.read().
+0000b080: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b0a0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
+0000b0b0: 6465 7620 6d61 6d62 6120 666f 6c64 6572  dev mamba folder
+0000b0c0: 3a20 222c 636f 6465 290d 0a20 2020 2020  : ",code)..     
+0000b0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000b0f0: 2070 7269 6e74 2822 6465 7620 7366 6374   print("dev sfct
+0000b100: 6c20 6669 6c65 3a22 2c20 7472 616e 7361  l file:", transa
+0000b110: 6374 696f 6e5f 6461 7461 5b22 6167 656e  ction_data["agen
+0000b120: 7473 225d 5b61 6e61 6d65 5d29 0d0a 0d0a  ts"][aname])....
 0000b130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b140: 666f 7220 6b2c 7620 696e 2061 6c74 5f74  for k,v in alt_t
-0000b150: 7261 6e73 6163 7469 6f6e 5f64 6174 612e  ransaction_data.
-0000b160: 6974 656d 7328 293a 0d0a 2020 2020 2020  items():..      
-0000b170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b180: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-0000b190: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
-0000b1a0: 6167 656e 7473 225d 5b6b 5d20 3d20 616c  agents"][k] = al
-0000b1b0: 745f 7472 616e 7361 6374 696f 6e5f 6461  t_transaction_da
-0000b1c0: 7461 5b6b 5d0d 0a20 2020 2020 2020 2020  ta[k]..         
-0000b1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b1e0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000b140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b150: 2020 2020 6966 2063 6f64 652e 7374 7269      if code.stri
+0000b160: 7028 2920 213d 2074 7261 6e73 6163 7469  p() != transacti
+0000b170: 6f6e 5f64 6174 615b 2261 6765 6e74 7322  on_data["agents"
+0000b180: 5d5b 616e 616d 655d 2e73 7472 6970 2829  ][aname].strip()
+0000b190: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0000b1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1b0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b1c0: 6e74 2822 4445 5649 4154 494f 4e20 6465  nt("DEVIATION de
+0000b1d0: 7465 6374 6564 2069 6e20 222c 616e 616d  tected in ",anam
+0000b1e0: 6529 0d0a 0d0a 0d0a 2020 2020 2020 2020  e)......        
 0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b200: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
-0000b210: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b220: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-0000b230: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+0000b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b210: 616c 745f 7472 616e 7361 6374 696f 6e5f  alt_transaction_
+0000b220: 6461 7461 5b61 6e61 6d65 5d20 3d20 636f  data[aname] = co
+0000b230: 6465 0d0a 0d0a 2020 2020 2020 2020 2020  de....          
 0000b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b250: 2020 2020 2020 7072 696e 7428 2253 4f4d        print("SOM
-0000b260: 4554 4849 4e47 2057 454e 5420 5752 4f4e  ETHING WENT WRON
-0000b270: 4722 290d 0a20 2020 2020 2020 2020 2020  G")..           
-0000b280: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000b290: 6e74 2873 7472 2865 2929 0d0a 0d0a 2020  nt(str(e))....  
-0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2b0: 2020 230d 0a20 2020 2020 2020 2020 2020    #..           
-0000b2c0: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
-0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000b2e0: 656c 662e 6472 6177 6361 6e76 6173 2e63  elf.drawcanvas.c
-0000b2f0: 6f64 655f 6461 7461 203d 2074 7261 6e73  ode_data = trans
-0000b300: 6163 7469 6f6e 5f64 6174 615b 2261 6765  action_data["age
-0000b310: 6e74 7322 5d0d 0a20 2020 2020 2020 2020  nts"]..         
-0000b320: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0000b330: 2822 434f 4445 2044 4154 4122 2c74 7261  ("CODE DATA",tra
-0000b340: 6e73 6163 7469 6f6e 5f64 6174 615b 2261  nsaction_data["a
-0000b350: 6765 6e74 7322 5d29 0d0a 0d0a 2020 2020  gents"])....    
+0000b250: 2020 2020 2020 2020 2020 2020 2020 6469                di
+0000b260: 6666 203d 2020 5b6c 6920 666f 7220 6c69  ff =  [li for li
+0000b270: 2069 6e20 6469 6666 6c69 622e 6e64 6966   in difflib.ndif
+0000b280: 6628 636f 6465 2e73 7472 6970 2829 2c20  f(code.strip(), 
+0000b290: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
+0000b2a0: 5b22 6167 656e 7473 225d 5b61 6e61 6d65  ["agents"][aname
+0000b2b0: 5d2e 7374 7269 7028 2929 2069 6620 6c69  ].strip()) if li
+0000b2c0: 5b30 5d20 213d 2027 2027 5d0d 0a20 2020  [0] != ' ']..   
+0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2f0: 2020 2020 2061 6c74 5f64 6966 6673 5b61       alt_diffs[a
+0000b300: 6e61 6d65 5d20 3d20 7374 7228 6469 6666  name] = str(diff
+0000b310: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b330: 2020 2020 2020 2020 2020 2020 2073 7472               str
+0000b340: 6469 6666 203d 2073 7472 2864 6966 6629  diff = str(diff)
+0000b350: 2e73 7472 6970 2829 0d0a 0d0a 2020 2020  .strip()....    
 0000b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b370: 2320 6d6f 7665 2074 6865 2062 6f78 6573  # move the boxes
-0000b380: 2074 6f20 7468 6520 7361 7665 6420 706f   to the saved po
-0000b390: 7369 7469 6f6e 730d 0a20 2020 2020 2020  sitions..       
-0000b3a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000b3b0: 662e 6472 6177 6361 6e76 6173 2e72 6570  f.drawcanvas.rep
-0000b3c0: 6f73 6974 696f 6e28 7472 616e 7361 6374  osition(transact
-0000b3d0: 696f 6e5f 6461 7461 5b22 626f 785f 706f  ion_data["box_po
-0000b3e0: 7369 7469 6f6e 7322 5d29 0d0a 0d0a 2020  sitions"])....  
+0000b370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b380: 2020 2020 6966 206c 656e 2873 7472 6469      if len(strdi
+0000b390: 6666 2920 3e20 3430 3a0d 0a20 2020 2020  ff) > 40:..     
+0000b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3c0: 2020 2020 2020 2073 7472 6469 6666 203d         strdiff =
+0000b3d0: 2073 7472 6469 6666 5b3a 375d 202b 2022   strdiff[:7] + "
+0000b3e0: 2e2e 2e22 0d0a 2020 2020 2020 2020 2020  ..."..          
 0000b3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b400: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-0000b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b420: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0000b430: 7265 706f 7369 7469 6f6e 5f6c 6162 656c  reposition_label
-0000b440: 7328 7472 616e 7361 6374 696f 6e5f 6461  s(transaction_da
-0000b450: 7461 5b22 6c61 6265 6c5f 706f 7369 7469  ta["label_positi
-0000b460: 6f6e 7322 5d29 0d0a 2020 2020 2020 2020  ons"])..        
-0000b470: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000b480: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
-0000b490: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000b4a0: 6e74 2822 436f 756c 6420 6e6f 7420 6c6f  nt("Could not lo
-0000b4b0: 6164 206c 6162 656c 2070 6f73 6974 696f  ad label positio
-0000b4c0: 6e73 2e20 5265 7365 7474 696e 6720 746f  ns. Resetting to
-0000b4d0: 207a 6572 6f2e 2229 0d0a 0d0a 2020 2020   zero.")....    
+0000b400: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0000b410: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0000b420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b440: 2073 7472 6469 6666 203d 2073 7472 6469   strdiff = strdi
+0000b450: 6666 0d0a 0d0a 2020 2020 2020 2020 2020  ff....          
+0000b460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b470: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+0000b480: 6720 2b3d 2066 6920 2b20 223a 2022 202b  g += fi + ": " +
+0000b490: 2073 7472 6469 6666 202b 2022 5c6e 220d   strdiff + "\n".
+0000b4a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4c0: 2020 2020 2020 2020 2070 7269 6e74 2864           print(d
+0000b4d0: 6966 6629 0d0a 2020 2020 2020 2020 2020  iff)..          
 0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4f0: 7365 6c66 2e73 6574 7469 6e67 735f 7374  self.settings_st
-0000b500: 7220 3d20 7472 616e 7361 6374 696f 6e5f  r = transaction_
-0000b510: 6461 7461 5b22 7365 7474 696e 6773 225d  data["settings"]
-0000b520: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000b530: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0000b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b550: 2020 2020 2020 7365 6c66 2e6d 6169 6e6c        self.mainl
-0000b560: 6f6f 705f 7374 7220 3d20 7472 616e 7361  oop_str = transa
-0000b570: 6374 696f 6e5f 6461 7461 5b22 6d61 696e  ction_data["main
-0000b580: 6c6f 6f70 225d 0d0a 2020 2020 2020 2020  loop"]..        
-0000b590: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000b5a0: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
-0000b5b0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000b5c0: 6e74 2822 4e4f 204d 4149 4e4c 4f4f 5020  nt("NO MAINLOOP 
-0000b5d0: 464f 4e44 2e20 534b 4950 5049 4e47 2229  FOND. SKIPPING")
-0000b5e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000b5f0: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
-0000b600: 7475 7342 6172 2829 2e73 686f 774d 6573  tusBar().showMes
-0000b610: 7361 6765 2822 4f70 656e 6564 2066 696c  sage("Opened fil
-0000b620: 6520 2220 2b20 6669 6c65 6e61 6d65 290d  e " + filename).
-0000b630: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000b640: 2020 2065 7863 6570 743a 0d0a 0d0a 2020     except:....  
+0000b4f0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000b500: 696e 7428 225c 6e22 290d 0a0d 0a20 2020  int("\n")....   
+0000b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b520: 2020 2020 206d 7367 202b 3d20 225c 6e44       msg += "\nD
+0000b530: 6f20 796f 7520 7761 6e74 2074 6f20 6164  o you want to ad
+0000b540: 6170 7420 7468 6520 6578 7465 726e 616c  apt the external
+0000b550: 2063 6861 6e67 6573 3f22 0d0a 2020 2020   changes?"..    
+0000b560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b570: 2020 2020 2320 7365 6c66 2e6e 6f74 6966      # self.notif
+0000b580: 7928 6d73 672c 7469 746c 653d 2243 6861  y(msg,title="Cha
+0000b590: 6e67 6573 2044 6574 6563 7465 6422 290d  nges Detected").
+0000b5a0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b5b0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0000b5c0: 6e28 616c 745f 7472 616e 7361 6374 696f  n(alt_transactio
+0000b5d0: 6e5f 6461 7461 2920 3e20 303a 0d0a 0d0a  n_data) > 0:....
+0000b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b5f0: 2020 2020 2020 2020 2020 2020 716d 203d              qm =
+0000b600: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
+0000b610: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
+0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b630: 716d 2e73 6574 5769 6e64 6f77 5469 746c  qm.setWindowTitl
+0000b640: 6528 2243 6175 7469 6f6e 2229 0d0a 2020  e("Caution")..  
 0000b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b660: 2020 2320 6f6c 6420 666f 726d 6174 2061    # old format a
-0000b670: 7320 6661 6c6c 6261 636b 0d0a 2020 2020  s fallback..    
-0000b680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b690: 7365 6c66 2e65 6e74 7279 5f64 6174 6120  self.entry_data 
-0000b6a0: 3d20 7472 616e 7361 6374 696f 6e5f 6461  = transaction_da
-0000b6b0: 7461 0d0a 2020 2020 2020 2020 2020 2020  ta..            
-0000b6c0: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
-0000b6d0: 7763 616e 7661 732e 636f 6465 5f64 6174  wcanvas.code_dat
-0000b6e0: 6120 3d20 7472 616e 7361 6374 696f 6e5f  a = transaction_
-0000b6f0: 6461 7461 5b22 6167 656e 7473 225d 0d0a  data["agents"]..
-0000b700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b710: 2020 2020 7365 6c66 2e75 7064 6174 655f      self.update_
-0000b720: 7461 626c 6528 290d 0a20 2020 2020 2020  table()..       
-0000b730: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000b740: 6e74 2822 7741 524e 494e 4720 2d20 4641  nt("wARNING - FA
-0000b750: 4c4c 4241 434b 2054 4f20 4f4c 4420 4649  LLBACK TO OLD FI
-0000b760: 4c45 2046 4f52 4d41 5421 2229 0d0a 0d0a  LE FORMAT!")....
-0000b770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b780: 2320 7365 6c66 2e66 696c 6545 6469 742e  # self.fileEdit.
-0000b790: 7365 7454 6578 7428 6669 6c65 6e61 6d65  setText(filename
-0000b7a0: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
-0000b7b0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-0000b7c0: 2065 203a 0d0a 0d0a 2020 2020 2020 2020   e :....        
-0000b7d0: 2020 2020 2320 7365 6c66 2e6e 6f74 6966      # self.notif
-0000b7e0: 7928 6d65 7373 6167 653d 2253 6f6d 6574  y(message="Somet
-0000b7f0: 6869 6e67 2077 656e 7420 7772 6f6e 6720  hing went wrong 
-0000b800: 7768 656e 206f 7065 6e69 6e67 2074 6865  when opening the
-0000b810: 2066 696c 653a 5c6e 2025 7322 2573 7472   file:\n %s"%str
-0000b820: 2865 292c 7469 746c 653d 2245 7272 6f72  (e),title="Error
-0000b830: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0000b840: 7365 6c66 2e66 696c 656e 616d 6520 3d20  self.filename = 
-0000b850: 6669 6c65 6e61 6d65 5f62 6163 6b75 700d  filename_backup.
-0000b860: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000b870: 662e 6375 7265 6e74 5f66 696c 6520 3d20  f.curent_file = 
-0000b880: 6375 7272 656e 745f 6669 6c65 5f62 6163  current_file_bac
-0000b890: 6b75 700d 0a20 2020 2020 2020 2020 2020  kup..           
-0000b8a0: 2069 6620 7374 7228 7365 6c66 2e63 7572   if str(self.cur
-0000b8b0: 7265 6e74 5f66 696c 6529 2021 3d20 2222  rent_file) != ""
-0000b8c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000b8d0: 2020 2073 656c 662e 7374 6174 7573 4261     self.statusBa
-0000b8e0: 7228 292e 7368 6f77 4d65 7373 6167 6528  r().showMessage(
-0000b8f0: 2243 616e 6365 6c6c 6564 2e20 5265 7374  "Cancelled. Rest
-0000b900: 6f72 6564 2066 696c 6520 2725 7327 2220  ored file '%s'" 
-0000b910: 2520 7374 7228 7365 6c66 2e63 7572 7265  % str(self.curre
-0000b920: 6e74 5f66 696c 6529 290d 0a0d 0a20 2020  nt_file))....   
-0000b930: 2020 2020 2023 2075 7064 6174 6520 7472       # update tr
-0000b940: 616e 7361 6374 696f 6e20 7461 626c 650d  ansaction table.
-0000b950: 0a20 2020 2020 2020 2073 656c 662e 7570  .        self.up
-0000b960: 6461 7465 5f74 6162 6c65 2829 0d0a 0d0a  date_table()....
-0000b970: 2020 2020 2020 2020 2320 7570 6461 7465          # update
-0000b980: 2074 6865 6d65 0d0a 2020 2020 2020 2020   theme..        
-0000b990: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-0000b9a0: 6572 2e72 6573 746f 7265 2829 0d0a 0d0a  er.restore()....
-0000b9b0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0000b9c0: 2020 2020 2020 2020 2020 666e 616d 652c            fname,
-0000b9d0: 2066 696c 655f 6578 7465 6e73 696f 6e20   file_extension 
-0000b9e0: 3d20 6f73 2e70 6174 682e 7370 6c69 7465  = os.path.splite
-0000b9f0: 7874 2873 656c 662e 6669 6c65 6e61 6d65  xt(self.filename
-0000ba00: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000ba10: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-0000ba20: 722e 6c6f 6164 5f63 6f6c 6f72 7328 666e  r.load_colors(fn
-0000ba30: 616d 6520 2b20 222e 7366 6374 6865 6d65  ame + ".sfctheme
-0000ba40: 2229 0d0a 0d0a 2020 2020 2020 2020 6578  ")....        ex
-0000ba50: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-0000ba60: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
-0000ba70: 2020 7072 696e 7428 2263 6f75 6c64 206e    print("could n
-0000ba80: 6f74 206c 6f61 6420 7468 656d 653a 2022  ot load theme: "
-0000ba90: 2c20 7374 7228 6529 290d 0a0d 0a20 2020  , str(e))....   
-0000baa0: 2020 2020 2023 2075 7064 6174 6520 626f       # update bo
-0000bab0: 7865 730d 0a20 2020 2020 2020 2066 6f72  xes..        for
-0000bac0: 2062 6f78 2069 6e20 7365 6c66 2e64 7261   box in self.dra
-0000bad0: 7763 616e 7661 732e 626f 7865 733a 0d0a  wcanvas.boxes:..
-0000bae0: 2020 2020 2020 2020 2020 2020 626f 782e              box.
-0000baf0: 6564 6974 5f61 6765 6e74 2829 0d0a 0d0a  edit_agent()....
-0000bb00: 2020 2020 6465 6620 656e 7472 795f 746f      def entry_to
-0000bb10: 5f76 616c 7328 7365 6c66 2c65 6e74 7279  _vals(self,entry
-0000bb20: 2c20 6167 656e 742c 7768 6963 6829 3a0d  , agent,which):.
-0000bb30: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
-0000bb40: 7420 626f 6f6c 2872 6567 6578 2e66 696e  t bool(regex.fin
-0000bb50: 6461 6c6c 2822 285b 2b2d 5d2b 2922 2c20  dall("([+-]+)", 
-0000bb60: 656e 7472 7929 293a 0d0a 2020 2020 2020  entry)):..      
-0000bb70: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-0000bb80: 7928 6d65 7373 6167 653d 2253 6967 6e20  y(message="Sign 
-0000bb90: 636f 7272 7570 7465 6420 696e 2065 6e74  corrupted in ent
-0000bba0: 7279 2025 7320 2825 7320 6f66 2025 7329  ry %s (%s of %s)
-0000bbb0: 2225 2865 6e74 7279 2c77 6869 6368 2c61  "%(entry,which,a
-0000bbc0: 6765 6e74 292c 7469 746c 653d 2245 7272  gent),title="Err
-0000bbd0: 6f72 2229 0d0a 2020 2020 2020 2020 2020  or")..          
-0000bbe0: 2020 7265 7475 726e 204e 6f6e 652c 204e    return None, N
-0000bbf0: 6f6e 652c 204e 6f6e 650d 0a0d 0a20 2020  one, None....   
-0000bc00: 2020 2020 2069 6620 7265 6765 782e 6669       if regex.fi
-0000bc10: 6e64 616c 6c28 2228 5b2b 2d5d 2b29 222c  ndall("([+-]+)",
-0000bc20: 2065 6e74 7279 295b 305d 203d 3d20 222d   entry)[0] == "-
-0000bc30: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0000bc40: 7369 676e 203d 2022 2d22 0d0a 2020 2020  sign = "-"..    
-0000bc50: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000bc60: 2020 2020 2020 2073 6967 6e20 3d20 222b         sign = "+
-0000bc70: 220d 0a0d 0a20 2020 2020 2020 2077 6f72  "....        wor
-0000bc80: 6473 203d 2072 6567 6578 2e66 696e 6461  ds = regex.finda
-0000bc90: 6c6c 2822 285b 5c77 5c73 5d2b 2922 2c20  ll("([\w\s]+)", 
-0000bca0: 656e 7472 7929 0d0a 0d0a 2020 2020 2020  entry)....      
-0000bcb0: 2020 6974 656d 203d 2022 220d 0a20 2020    item = ""..   
-0000bcc0: 2020 2020 2073 696c 656e 7420 3d20 4661       silent = Fa
-0000bcd0: 6c73 650d 0a20 2020 2020 2020 2066 6f72  lse..        for
-0000bce0: 2077 6f72 6420 696e 2077 6f72 6473 3a0d   word in words:.
-0000bcf0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000bd00: 776f 7264 2021 3d20 2273 223a 0d0a 2020  word != "s":..  
-0000bd10: 2020 2020 2020 2020 2020 2020 2020 6974                it
-0000bd20: 656d 202b 3d20 776f 7264 2e73 7472 6970  em += word.strip
-0000bd30: 2829 202b 2022 2022 0d0a 2020 2020 2020  () + " "..      
-0000bd40: 2020 2020 2020 656c 6966 2077 6f72 6420        elif word 
-0000bd50: 3d3d 2022 7322 3a0d 0a20 2020 2020 2020  == "s":..       
-0000bd60: 2020 2020 2020 2020 2073 696c 656e 7420           silent 
-0000bd70: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
-0000bd80: 2020 6974 656d 203d 2069 7465 6d2e 7374    item = item.st
-0000bd90: 7269 7028 290d 0a0d 0a20 2020 2020 2020  rip()....       
-0000bda0: 2072 6574 7572 6e20 7369 676e 2c20 6974   return sign, it
-0000bdb0: 656d 2c20 7369 6c65 6e74 0d0a 0d0a 0d0a  em, silent......
-0000bdc0: 2020 2020 6465 6620 7570 6461 7465 5f74      def update_t
-0000bdd0: 6162 6c65 2873 656c 6629 3a0d 0a20 2020  able(self):..   
-0000bde0: 2020 2020 2023 7365 6c66 2e73 656c 6563       #self.selec
-0000bdf0: 7469 6f6e 5f69 6478 203d 204e 6f6e 650d  tion_idx = None.
-0000be00: 0a20 2020 2020 2020 2073 656c 662e 7472  .        self.tr
-0000be10: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-0000be20: 7452 6f77 436f 756e 7428 3029 0d0a 0d0a  tRowCount(0)....
-0000be30: 2020 2020 2020 2020 2320 7365 6c66 2e74          # self.t
-0000be40: 7261 6e73 6163 7469 6f6e 5669 6577 2e6d  ransactionView.m
-0000be50: 6f64 656c 2829 2e73 6574 546f 7269 7a6f  odel().setTorizo
-0000be60: 6e74 616c 4865 6164 6572 4974 656d 2820  ntalHeaderItem( 
-0000be70: 302c 2051 5461 626c 6557 6964 6765 7449  0, QTableWidgetI
-0000be80: 7465 6d28 224e 616d 6522 2929 0d0a 2020  tem("Name"))..  
-0000be90: 2020 2020 2020 2320 7365 6c66 2e74 7261        # self.tra
-0000bea0: 6e73 6163 7469 6f6e 5669 6577 2e6d 6f64  nsactionView.mod
-0000beb0: 656c 2829 2e73 6574 546f 7269 7a6f 6e74  el().setTorizont
-0000bec0: 616c 4865 6164 6572 4974 656d 2820 312c  alHeaderItem( 1,
-0000bed0: 2051 5461 626c 6557 6964 6765 7449 7465   QTableWidgetIte
-0000bee0: 6d28 2253 686f 7274 204e 616d 6522 2929  m("Short Name"))
-0000bef0: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
-0000bf00: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000bf10: 2e6d 6f64 656c 2829 2e73 6574 546f 7269  .model().setTori
-0000bf20: 7a6f 6e74 616c 4865 6164 6572 4974 656d  zontalHeaderItem
-0000bf30: 2820 322c 2051 5461 626c 6557 6964 6765  ( 2, QTableWidge
-0000bf40: 7449 7465 6d28 2255 6e69 6469 7265 6374  tItem("Unidirect
-0000bf50: 696f 6e61 6c22 2929 0d0a 2020 2020 2020  ional"))..      
-0000bf60: 2020 2320 7365 6c66 2e74 7261 6e73 6163    # self.transac
-0000bf70: 7469 6f6e 5669 6577 2e6d 6f64 656c 2829  tionView.model()
-0000bf80: 2e73 6574 546f 7269 7a6f 6e74 616c 4865  .setTorizontalHe
-0000bf90: 6164 6572 4974 656d 2820 332c 2051 5461  aderItem( 3, QTa
-0000bfa0: 626c 6557 6964 6765 7449 7465 6d28 2246  bleWidgetItem("F
-0000bfb0: 6c6f 7722 2929 0d0a 0d0a 2020 2020 2020  low"))....      
-0000bfc0: 2020 2320 696e 7365 7274 206e 6577 2072    # insert new r
-0000bfd0: 6f77 7320 6966 206e 6565 6465 640d 0a20  ows if needed.. 
-0000bfe0: 2020 2020 2020 2072 6f77 5f63 6f75 6e74         row_count
-0000bff0: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
-0000c000: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
-0000c010: 2829 0d0a 0d0a 2020 2020 2020 2020 6966  ()....        if
-0000c020: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000c030: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-0000c040: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-0000c050: 6679 2822 4461 7461 2069 7320 656d 7074  fy("Data is empt
-0000c060: 7920 6f72 2063 6f72 7275 7074 6564 2e20  y or corrupted. 
-0000c070: 536f 6d65 7468 696e 6720 7765 6e74 2077  Something went w
-0000c080: 726f 6e67 222c 2074 6974 6c65 3d22 4661  rong", title="Fa
-0000c090: 7461 6c20 4572 726f 7222 290d 0a20 2020  tal Error")..   
-0000c0a0: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
-0000c0b0: 0a0d 0a20 2020 2020 2020 2069 6620 726f  ...        if ro
-0000c0c0: 775f 636f 756e 7420 3c20 6c65 6e28 7365  w_count < len(se
-0000c0d0: 6c66 2e65 6e74 7279 5f64 6174 6129 3a0d  lf.entry_data):.
-0000c0e0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0000c0f0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
-0000c100: 7365 6c66 2e65 6e74 7279 5f64 6174 6129  self.entry_data)
-0000c110: 2d72 6f77 5f63 6f75 6e74 293a 0d0a 2020  -row_count):..  
-0000c120: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000c130: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000c140: 6577 2e69 6e73 6572 7452 6f77 2872 6f77  ew.insertRow(row
-0000c150: 5f63 6f75 6e74 290d 0a0d 0a20 2020 2020  _count)....     
-0000c160: 2020 2073 656c 662e 6472 6177 6361 6e76     self.drawcanv
-0000c170: 6173 2e63 6c65 6172 2829 0d0a 2020 2020  as.clear()..    
-0000c180: 2020 2020 7365 6c66 2e66 696c 7465 7243      self.filterC
-0000c190: 6f6d 626f 2e63 6c65 6172 2829 0d0a 2020  ombo.clear()..  
-0000c1a0: 2020 2020 2020 7365 6c66 2e66 696c 7465        self.filte
-0000c1b0: 725f 656e 7472 6965 7320 3d20 5b5d 0d0a  r_entries = []..
-0000c1c0: 0d0a 2020 2020 2020 2020 666f 7220 692c  ..        for i,
-0000c1d0: 6461 7461 2069 6e20 656e 756d 6572 6174  data in enumerat
-0000c1e0: 6528 7365 6c66 2e65 6e74 7279 5f64 6174  e(self.entry_dat
-0000c1f0: 6129 3a0d 0a20 2020 2020 2020 2020 2020  a):..           
-0000c200: 2023 2065 7869 7374 7331 203d 2073 656c   # exists1 = sel
-0000c210: 662e 6472 6177 6361 6e76 6173 2e63 6865  f.drawcanvas.che
-0000c220: 636b 5f65 7869 7374 2864 6174 615b 2261  ck_exist(data["a
-0000c230: 6765 6e74 3122 5d2e 6361 7069 7461 6c69  gent1"].capitali
-0000c240: 7a65 2829 290d 0a20 2020 2020 2020 2020  ze())..         
-0000c250: 2020 2023 2065 7869 7374 7332 203d 2073     # exists2 = s
-0000c260: 656c 662e 6472 6177 6361 6e76 6173 2e63  elf.drawcanvas.c
-0000c270: 6865 636b 5f65 7869 7374 2864 6174 615b  heck_exist(data[
-0000c280: 2261 6765 6e74 3222 5d2e 6361 7069 7461  "agent2"].capita
-0000c290: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
-0000c2a0: 2020 2020 2020 2062 6f78 3120 3d20 7365         box1 = se
-0000c2b0: 6c66 2e64 7261 7763 616e 7661 732e 6164  lf.drawcanvas.ad
-0000c2c0: 645f 6167 656e 7428 6361 6d65 6c28 6461  d_agent(camel(da
-0000c2d0: 7461 5b22 6167 656e 7431 225d 2929 2023  ta["agent1"])) #
-0000c2e0: 202e 6361 7069 7461 6c69 7a65 2829 290d   .capitalize()).
-0000c2f0: 0a20 2020 2020 2020 2020 2020 2062 6f78  .            box
-0000c300: 3220 3d20 7365 6c66 2e64 7261 7763 616e  2 = self.drawcan
-0000c310: 7661 732e 6164 645f 6167 656e 7428 6361  vas.add_agent(ca
-0000c320: 6d65 6c28 6461 7461 5b22 6167 656e 7432  mel(data["agent2
-0000c330: 225d 2929 2023 2e63 6170 6974 616c 697a  "])) #.capitaliz
-0000c340: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
-0000c350: 2020 2020 2320 636f 7272 6563 7420 6e75      # correct nu
-0000c360: 6d62 6572 206f 6620 636f 6e6e 6563 7469  mber of connecti
-0000c370: 6f6e 7320 666f 7220 6578 6973 7469 6e67  ons for existing
-0000c380: 2061 6765 6e74 730d 0a20 2020 2020 2020   agents..       
-0000c390: 2020 2020 2062 6f78 312e 6e5f 636f 6e6e       box1.n_conn
-0000c3a0: 6563 7469 6f6e 7320 3d20 300d 0a20 2020  ections = 0..   
-0000c3b0: 2020 2020 2020 2020 2062 6f78 322e 6e5f           box2.n_
-0000c3c0: 636f 6e6e 6563 7469 6f6e 7320 3d20 300d  connections = 0.
-0000c3d0: 0a0d 0a20 2020 2020 2020 2023 2075 7064  ...        # upd
-0000c3e0: 6174 6520 7468 6520 6461 7461 0d0a 2020  ate the data..  
-0000c3f0: 2020 2020 2020 666f 7220 692c 2064 6174        for i, dat
-0000c400: 6120 696e 2065 6e75 6d65 7261 7465 2873  a in enumerate(s
-0000c410: 656c 662e 656e 7472 795f 6461 7461 293a  elf.entry_data):
-0000c420: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
-0000c430: 696e 7428 6461 7461 290d 0a0d 0a20 2020  int(data)....   
-0000c440: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0000c450: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-0000c460: 7449 7465 6d28 692c 2030 2c20 5154 6162  tItem(i, 0, QTab
-0000c470: 6c65 5769 6467 6574 4974 656d 2864 6174  leWidgetItem(dat
-0000c480: 615b 2273 7562 6a65 6374 225d 2929 0d0a  a["subject"]))..
-0000c490: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000c4a0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000c4b0: 2e73 6574 4974 656d 2869 2c20 312c 2051  .setItem(i, 1, Q
-0000c4c0: 5461 626c 6557 6964 6765 7449 7465 6d28  TableWidgetItem(
-0000c4d0: 6361 6d65 6c28 6461 7461 5b22 6167 656e  camel(data["agen
-0000c4e0: 7431 225d 2929 2920 2320 2e63 6170 6974  t1"]))) # .capit
-0000c4f0: 616c 697a 6528 2929 290d 0a20 2020 2020  alize()))..     
-0000c500: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000c510: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
-0000c520: 7465 6d28 692c 2032 2c20 5154 6162 6c65  tem(i, 2, QTable
-0000c530: 5769 6467 6574 4974 656d 2863 616d 656c  WidgetItem(camel
-0000c540: 2864 6174 615b 2261 6765 6e74 3222 5d29  (data["agent2"])
-0000c550: 2929 2023 202e 6361 7069 7461 6c69 7a65  )) # .capitalize
-0000c560: 2829 2929 0d0a 2020 2020 2020 2020 2020  ()))..          
-0000c570: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
-0000c580: 6f6e 5669 6577 2e73 6574 4974 656d 2869  onView.setItem(i
-0000c590: 2c20 332c 2051 5461 626c 6557 6964 6765  , 3, QTableWidge
-0000c5a0: 7449 7465 6d28 6461 7461 5b22 7368 6f72  tItem(data["shor
-0000c5b0: 746e 616d 6522 5d29 290d 0a20 2020 2020  tname"]))..     
-0000c5c0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000c5d0: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
-0000c5e0: 7465 6d28 692c 2034 2c20 5154 6162 6c65  tem(i, 4, QTable
-0000c5f0: 5769 6467 6574 4974 656d 2864 6174 615b  WidgetItem(data[
-0000c600: 226b 696e 6422 5d29 290d 0a20 2020 2020  "kind"]))..     
-0000c610: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000c620: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
-0000c630: 7465 6d28 692c 2035 2c20 5154 6162 6c65  tem(i, 5, QTable
-0000c640: 5769 6467 6574 4974 656d 2873 7472 2864  WidgetItem(str(d
-0000c650: 6174 615b 2275 6e69 2d64 6972 6563 7469  ata["uni-directi
-0000c660: 6f6e 616c 225d 2929 290d 0a20 2020 2020  onal"])))..     
-0000c670: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000c680: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
-0000c690: 7465 6d28 692c 2036 2c20 5154 6162 6c65  tem(i, 6, QTable
-0000c6a0: 5769 6467 6574 4974 656d 2873 7472 2864  WidgetItem(str(d
-0000c6b0: 6174 615b 2271 7561 6e74 6974 7922 5d29  ata["quantity"])
-0000c6c0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000c6d0: 2320 7365 6c66 2e74 7261 6e73 6163 7469  # self.transacti
-0000c6e0: 6f6e 5669 6577 2e73 656c 6563 7469 6f6e  onView.selection
-0000c6f0: 4d6f 6465 6c28 292e 7365 6c65 6374 6564  Model().selected
-0000c700: 526f 7773 2829 0d0a 0d0a 2020 2020 2020  Rows()....      
-0000c710: 2020 2020 2020 626f 7831 203d 2073 656c        box1 = sel
-0000c720: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
-0000c730: 5f61 6765 6e74 2863 616d 656c 2864 6174  _agent(camel(dat
-0000c740: 615b 2261 6765 6e74 3122 5d29 2920 232e  a["agent1"])) #.
-0000c750: 6361 7069 7461 6c69 7a65 2829 290d 0a20  capitalize()).. 
-0000c760: 2020 2020 2020 2020 2020 2062 6f78 3220             box2 
-0000c770: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
-0000c780: 732e 6164 645f 6167 656e 7428 6361 6d65  s.add_agent(came
-0000c790: 6c28 6461 7461 5b22 6167 656e 7432 225d  l(data["agent2"]
-0000c7a0: 2929 2023 2e63 6170 6974 616c 697a 6528  )) #.capitalize(
-0000c7b0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-0000c7c0: 2020 6d79 5f69 7465 6d73 203d 205b 5d0d    my_items = [].
-0000c7d0: 0a0d 0a20 2020 2020 2020 2020 2020 2061  ...            a
-0000c7e0: 6c6c 656e 7472 6965 7320 3d20 225c 6e22  llentries = "\n"
-0000c7f0: 2e6a 6f69 6e28 5b64 6174 615b 226c 3122  .join([data["l1"
-0000c800: 5d2c 2064 6174 615b 2261 3122 5d2c 2064  ], data["a1"], d
-0000c810: 6174 615b 2265 3122 5d2c 2064 6174 615b  ata["e1"], data[
-0000c820: 226c 3222 5d2c 2064 6174 615b 2261 3222  "l2"], data["a2"
-0000c830: 5d2c 2064 6174 615b 2265 3222 5d5d 290d  ], data["e2"]]).
-0000c840: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0000c850: 2073 7562 5f69 7465 6d20 696e 2061 6c6c   sub_item in all
-0000c860: 656e 7472 6965 732e 7370 6c69 7428 225c  entries.split("\
-0000c870: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-0000c880: 2020 2020 2020 666f 7220 7375 625f 656e        for sub_en
-0000c890: 7472 7920 696e 2073 7562 5f69 7465 6d2e  try in sub_item.
-0000c8a0: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
-0000c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c8c0: 2020 656e 7472 7920 3d20 7375 625f 656e    entry = sub_en
-0000c8d0: 7472 792e 7265 706c 6163 6528 222d 222c  try.replace("-",
-0000c8e0: 2222 292e 7265 706c 6163 6528 222b 222c  "").replace("+",
-0000c8f0: 2222 292e 7374 7269 7028 290d 0a20 2020  "").strip()..   
-0000c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c910: 2069 6620 656e 7472 7920 213d 2020 2222   if entry !=  ""
-0000c920: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000c930: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
-0000c940: 656d 732e 6170 7065 6e64 2865 6e74 7279  ems.append(entry
-0000c950: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000b660: 2020 2020 2020 2020 2020 2320 716d 2e73            # qm.s
+0000b670: 6574 5465 7874 286d 6573 7361 6765 290d  etText(message).
+0000b680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b690: 2020 2020 2020 2020 2020 2020 2073 7479               sty
+0000b6a0: 6c65 203d 2073 656c 662e 7468 656d 655f  le = self.theme_
+0000b6b0: 6d61 6e61 6765 722e 6765 745f 6e6f 7469  manager.get_noti
+0000b6c0: 6669 6361 7469 6f6e 5f73 7479 6c65 2829  fication_style()
+0000b6d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b6e0: 2020 2020 2020 2020 2020 2020 2020 716d                qm
+0000b6f0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+0000b700: 7479 6c65 290d 0a0d 0a0d 0a20 2020 2020  tyle)......     
+0000b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b720: 2020 2020 2020 2072 6574 203d 2071 6d2e         ret = qm.
+0000b730: 7175 6573 7469 6f6e 2873 656c 662c 2743  question(self,'C
+0000b740: 6175 7469 6f6e 272c 206d 7367 202c 2071  aution', msg , q
+0000b750: 6d2e 5965 7320 7c20 716d 2e4e 6f29 0d0a  m.Yes | qm.No)..
+0000b760: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b770: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000b780: 2072 6574 203d 3d20 716d 2e59 6573 3a0d   ret == qm.Yes:.
+0000b790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b7b0: 2066 6f72 206b 2c76 2069 6e20 616c 745f   for k,v in alt_
+0000b7c0: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
+0000b7d0: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+0000b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b7f0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0000b800: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
+0000b810: 2261 6765 6e74 7322 5d5b 6b5d 203d 2061  "agents"][k] = a
+0000b820: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
+0000b830: 6174 615b 6b5d 0d0a 2020 2020 2020 2020  ata[k]..        
+0000b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b850: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0000b860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b870: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
+0000b880: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b890: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0000b8a0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+0000b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b8c0: 2020 2020 2020 2070 7269 6e74 2822 534f         print("SO
+0000b8d0: 4d45 5448 494e 4720 5745 4e54 2057 524f  METHING WENT WRO
+0000b8e0: 4e47 2229 0d0a 2020 2020 2020 2020 2020  NG")..          
+0000b8f0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000b900: 696e 7428 7374 7228 6529 290d 0a0d 0a20  int(str(e)).... 
+0000b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b920: 2020 2023 0d0a 0d0a 2020 2020 2020 2020     #....        
+0000b930: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000b940: 2e64 7261 7763 616e 7661 732e 636f 6465  .drawcanvas.code
+0000b950: 5f64 6174 6120 3d20 7472 616e 7361 6374  _data = transact
+0000b960: 696f 6e5f 6461 7461 5b22 6167 656e 7473  ion_data["agents
+0000b970: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+0000b980: 2020 2020 2020 2020 7072 696e 7428 2243          print("C
+0000b990: 4f44 4520 4441 5441 222c 7472 616e 7361  ODE DATA",transa
+0000b9a0: 6374 696f 6e5f 6461 7461 5b22 6167 656e  ction_data["agen
+0000b9b0: 7473 225d 290d 0a0d 0a20 2020 2020 2020  ts"])....       
+0000b9c0: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+0000b9d0: 6f76 6520 7468 6520 626f 7865 7320 746f  ove the boxes to
+0000b9e0: 2074 6865 2073 6176 6564 2070 6f73 6974   the saved posit
+0000b9f0: 696f 6e73 0d0a 2020 2020 2020 2020 2020  ions..          
+0000ba00: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
+0000ba10: 7261 7763 616e 7661 732e 7265 706f 7369  rawcanvas.reposi
+0000ba20: 7469 6f6e 2874 7261 6e73 6163 7469 6f6e  tion(transaction
+0000ba30: 5f64 6174 615b 2262 6f78 5f70 6f73 6974  _data["box_posit
+0000ba40: 696f 6e73 225d 290d 0a0d 0a20 2020 2020  ions"])....     
+0000ba50: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0000ba60: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0000ba70: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000ba80: 662e 6472 6177 6361 6e76 6173 2e72 6570  f.drawcanvas.rep
+0000ba90: 6f73 6974 696f 6e5f 6c61 6265 6c73 2874  osition_labels(t
+0000baa0: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
+0000bab0: 226c 6162 656c 5f70 6f73 6974 696f 6e73  "label_positions
+0000bac0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
+0000bad0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0000bae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000baf0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0000bb00: 2243 6f75 6c64 206e 6f74 206c 6f61 6420  "Could not load 
+0000bb10: 6c61 6265 6c20 706f 7369 7469 6f6e 732e  label positions.
+0000bb20: 2052 6573 6574 7469 6e67 2074 6f20 7a65   Resetting to ze
+0000bb30: 726f 2e22 290d 0a0d 0a20 2020 2020 2020  ro.")....       
+0000bb40: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000bb50: 662e 7365 7474 696e 6773 5f73 7472 203d  f.settings_str =
+0000bb60: 2074 7261 6e73 6163 7469 6f6e 5f64 6174   transaction_dat
+0000bb70: 615b 2273 6574 7469 6e67 7322 5d0d 0a0d  a["settings"]...
+0000bb80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bb90: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+0000bba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bbb0: 2020 2073 656c 662e 6d61 696e 6c6f 6f70     self.mainloop
+0000bbc0: 5f73 7472 203d 2074 7261 6e73 6163 7469  _str = transacti
+0000bbd0: 6f6e 5f64 6174 615b 226d 6169 6e6c 6f6f  on_data["mainloo
+0000bbe0: 7022 5d0d 0a20 2020 2020 2020 2020 2020  p"]..           
+0000bbf0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0000bc00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000bc10: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0000bc20: 224e 4f20 4d41 494e 4c4f 4f50 2046 4f4e  "NO MAINLOOP FON
+0000bc30: 442e 2053 4b49 5050 494e 4722 290d 0a0d  D. SKIPPING")...
+0000bc40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bc50: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
+0000bc60: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
+0000bc70: 6528 224f 7065 6e65 6420 6669 6c65 2022  e("Opened file "
+0000bc80: 202b 2066 696c 656e 616d 6529 0d0a 0d0a   + filename)....
+0000bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bca0: 6578 6365 7074 3a0d 0a0d 0a20 2020 2020  except:....     
+0000bcb0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000bcc0: 206f 6c64 2066 6f72 6d61 7420 6173 2066   old format as f
+0000bcd0: 616c 6c62 6163 6b0d 0a20 2020 2020 2020  allback..       
+0000bce0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000bcf0: 662e 656e 7472 795f 6461 7461 203d 2074  f.entry_data = t
+0000bd00: 7261 6e73 6163 7469 6f6e 5f64 6174 610d  ransaction_data.
+0000bd10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bd20: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+0000bd30: 6e76 6173 2e63 6f64 655f 6461 7461 203d  nvas.code_data =
+0000bd40: 2074 7261 6e73 6163 7469 6f6e 5f64 6174   transaction_dat
+0000bd50: 615b 2261 6765 6e74 7322 5d0d 0a20 2020  a["agents"]..   
+0000bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd70: 2073 656c 662e 7570 6461 7465 5f74 6162   self.update_tab
+0000bd80: 6c65 2829 0d0a 2020 2020 2020 2020 2020  le()..          
+0000bd90: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0000bda0: 2277 4152 4e49 4e47 202d 2046 414c 4c42  "wARNING - FALLB
+0000bdb0: 4143 4b20 544f 204f 4c44 2046 494c 4520  ACK TO OLD FILE 
+0000bdc0: 464f 524d 4154 2122 290d 0a0d 0a20 2020  FORMAT!")....   
+0000bdd0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+0000bde0: 656c 662e 6669 6c65 4564 6974 2e73 6574  elf.fileEdit.set
+0000bdf0: 5465 7874 2866 696c 656e 616d 6529 0d0a  Text(filename)..
+0000be00: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+0000be10: 2045 7863 6570 7469 6f6e 2061 7320 6520   Exception as e 
+0000be20: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0000be30: 2023 2073 656c 662e 6e6f 7469 6679 286d   # self.notify(m
+0000be40: 6573 7361 6765 3d22 536f 6d65 7468 696e  essage="Somethin
+0000be50: 6720 7765 6e74 2077 726f 6e67 2077 6865  g went wrong whe
+0000be60: 6e20 6f70 656e 696e 6720 7468 6520 6669  n opening the fi
+0000be70: 6c65 3a5c 6e20 2573 2225 7374 7228 6529  le:\n %s"%str(e)
+0000be80: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
+0000be90: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000bea0: 662e 6669 6c65 6e61 6d65 203d 2066 696c  f.filename = fil
+0000beb0: 656e 616d 655f 6261 636b 7570 0d0a 2020  ename_backup..  
+0000bec0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+0000bed0: 7572 656e 745f 6669 6c65 203d 2063 7572  urent_file = cur
+0000bee0: 7265 6e74 5f66 696c 655f 6261 636b 7570  rent_file_backup
+0000bef0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000bf00: 2073 7472 2873 656c 662e 6375 7272 656e   str(self.curren
+0000bf10: 745f 6669 6c65 2920 213d 2022 223a 0d0a  t_file) != "":..
+0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf30: 7365 6c66 2e73 7461 7475 7342 6172 2829  self.statusBar()
+0000bf40: 2e73 686f 774d 6573 7361 6765 2822 4361  .showMessage("Ca
+0000bf50: 6e63 656c 6c65 642e 2052 6573 746f 7265  ncelled. Restore
+0000bf60: 6420 6669 6c65 2027 2573 2722 2025 2073  d file '%s'" % s
+0000bf70: 7472 2873 656c 662e 6375 7272 656e 745f  tr(self.current_
+0000bf80: 6669 6c65 2929 0d0a 0d0a 2020 2020 2020  file))....      
+0000bf90: 2020 2320 7570 6461 7465 2074 7261 6e73    # update trans
+0000bfa0: 6163 7469 6f6e 2074 6162 6c65 0d0a 2020  action table..  
+0000bfb0: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
+0000bfc0: 655f 7461 626c 6528 290d 0a0d 0a20 2020  e_table()....   
+0000bfd0: 2020 2020 2023 2075 7064 6174 6520 7468       # update th
+0000bfe0: 656d 650d 0a20 2020 2020 2020 2073 656c  eme..        sel
+0000bff0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+0000c000: 7265 7374 6f72 6528 290d 0a0d 0a20 2020  restore()....   
+0000c010: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+0000c020: 2020 2020 2020 2066 6e61 6d65 2c20 6669         fname, fi
+0000c030: 6c65 5f65 7874 656e 7369 6f6e 203d 206f  le_extension = o
+0000c040: 732e 7061 7468 2e73 706c 6974 6578 7428  s.path.splitext(
+0000c050: 7365 6c66 2e66 696c 656e 616d 6529 0d0a  self.filename)..
+0000c060: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000c070: 2e74 6865 6d65 5f6d 616e 6167 6572 2e6c  .theme_manager.l
+0000c080: 6f61 645f 636f 6c6f 7273 2866 6e61 6d65  oad_colors(fname
+0000c090: 202b 2022 2e73 6663 7468 656d 6522 290d   + ".sfctheme").
+0000c0a0: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+0000c0b0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+0000c0c0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+0000c0d0: 7269 6e74 2822 636f 756c 6420 6e6f 7420  rint("could not 
+0000c0e0: 6c6f 6164 2074 6865 6d65 3a20 222c 2073  load theme: ", s
+0000c0f0: 7472 2865 2929 0d0a 0d0a 2020 2020 2020  tr(e))....      
+0000c100: 2020 2320 7570 6461 7465 2062 6f78 6573    # update boxes
+0000c110: 0d0a 2020 2020 2020 2020 666f 7220 626f  ..        for bo
+0000c120: 7820 696e 2073 656c 662e 6472 6177 6361  x in self.drawca
+0000c130: 6e76 6173 2e62 6f78 6573 3a0d 0a20 2020  nvas.boxes:..   
+0000c140: 2020 2020 2020 2020 2062 6f78 2e65 6469           box.edi
+0000c150: 745f 6167 656e 7428 290d 0a0d 0a20 2020  t_agent()....   
+0000c160: 2064 6566 2065 6e74 7279 5f74 6f5f 7661   def entry_to_va
+0000c170: 6c73 2873 656c 662c 656e 7472 792c 2061  ls(self,entry, a
+0000c180: 6765 6e74 2c77 6869 6368 293a 0d0a 0d0a  gent,which):....
+0000c190: 2020 2020 2020 2020 6966 206e 6f74 2062          if not b
+0000c1a0: 6f6f 6c28 7265 6765 782e 6669 6e64 616c  ool(regex.findal
+0000c1b0: 6c28 2228 5b2b 2d5d 2b29 222c 2065 6e74  l("([+-]+)", ent
+0000c1c0: 7279 2929 3a0d 0a20 2020 2020 2020 2020  ry)):..         
+0000c1d0: 2020 2073 656c 662e 6e6f 7469 6679 286d     self.notify(m
+0000c1e0: 6573 7361 6765 3d22 5369 676e 2063 6f72  essage="Sign cor
+0000c1f0: 7275 7074 6564 2069 6e20 656e 7472 7920  rupted in entry 
+0000c200: 2573 2028 2573 206f 6620 2573 2922 2528  %s (%s of %s)"%(
+0000c210: 656e 7472 792c 7768 6963 682c 6167 656e  entry,which,agen
+0000c220: 7429 2c74 6974 6c65 3d22 4572 726f 7222  t),title="Error"
+0000c230: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+0000c240: 6574 7572 6e20 4e6f 6e65 2c20 4e6f 6e65  eturn None, None
+0000c250: 2c20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  , None....      
+0000c260: 2020 6966 2072 6567 6578 2e66 696e 6461    if regex.finda
+0000c270: 6c6c 2822 285b 2b2d 5d2b 2922 2c20 656e  ll("([+-]+)", en
+0000c280: 7472 7929 5b30 5d20 3d3d 2022 2d22 3a0d  try)[0] == "-":.
+0000c290: 0a20 2020 2020 2020 2020 2020 2073 6967  .            sig
+0000c2a0: 6e20 3d20 222d 220d 0a20 2020 2020 2020  n = "-"..       
+0000c2b0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0000c2c0: 2020 2020 7369 676e 203d 2022 2b22 0d0a      sign = "+"..
+0000c2d0: 0d0a 2020 2020 2020 2020 776f 7264 7320  ..        words 
+0000c2e0: 3d20 7265 6765 782e 6669 6e64 616c 6c28  = regex.findall(
+0000c2f0: 2228 5b5c 775c 735d 2b29 222c 2065 6e74  "([\w\s]+)", ent
+0000c300: 7279 290d 0a0d 0a20 2020 2020 2020 2069  ry)....        i
+0000c310: 7465 6d20 3d20 2222 0d0a 2020 2020 2020  tem = ""..      
+0000c320: 2020 7369 6c65 6e74 203d 2046 616c 7365    silent = False
+0000c330: 0d0a 2020 2020 2020 2020 666f 7220 776f  ..        for wo
+0000c340: 7264 2069 6e20 776f 7264 733a 0d0a 2020  rd in words:..  
+0000c350: 2020 2020 2020 2020 2020 6966 2077 6f72            if wor
+0000c360: 6420 213d 2022 7322 3a0d 0a20 2020 2020  d != "s":..     
+0000c370: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+0000c380: 2b3d 2077 6f72 642e 7374 7269 7028 2920  += word.strip() 
+0000c390: 2b20 2220 220d 0a20 2020 2020 2020 2020  + " "..         
+0000c3a0: 2020 2065 6c69 6620 776f 7264 203d 3d20     elif word == 
+0000c3b0: 2273 223a 0d0a 2020 2020 2020 2020 2020  "s":..          
+0000c3c0: 2020 2020 2020 7369 6c65 6e74 203d 2054        silent = T
+0000c3d0: 7275 650d 0a0d 0a20 2020 2020 2020 2069  rue....        i
+0000c3e0: 7465 6d20 3d20 6974 656d 2e73 7472 6970  tem = item.strip
+0000c3f0: 2829 0d0a 0d0a 2020 2020 2020 2020 7265  ()....        re
+0000c400: 7475 726e 2073 6967 6e2c 2069 7465 6d2c  turn sign, item,
+0000c410: 2073 696c 656e 740d 0a0d 0a0d 0a20 2020   silent......   
+0000c420: 2064 6566 2075 7064 6174 655f 7461 626c   def update_tabl
+0000c430: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
+0000c440: 2020 2373 656c 662e 7365 6c65 6374 696f    #self.selectio
+0000c450: 6e5f 6964 7820 3d20 4e6f 6e65 0d0a 2020  n_idx = None..  
+0000c460: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0000c470: 6163 7469 6f6e 5669 6577 2e73 6574 526f  actionView.setRo
+0000c480: 7743 6f75 6e74 2830 290d 0a0d 0a20 2020  wCount(0)....   
+0000c490: 2020 2020 2023 2073 656c 662e 7472 616e       # self.tran
+0000c4a0: 7361 6374 696f 6e56 6965 772e 6d6f 6465  sactionView.mode
+0000c4b0: 6c28 292e 7365 7454 6f72 697a 6f6e 7461  l().setTorizonta
+0000c4c0: 6c48 6561 6465 7249 7465 6d28 2030 2c20  lHeaderItem( 0, 
+0000c4d0: 5154 6162 6c65 5769 6467 6574 4974 656d  QTableWidgetItem
+0000c4e0: 2822 4e61 6d65 2229 290d 0a20 2020 2020  ("Name"))..     
+0000c4f0: 2020 2023 2073 656c 662e 7472 616e 7361     # self.transa
+0000c500: 6374 696f 6e56 6965 772e 6d6f 6465 6c28  ctionView.model(
+0000c510: 292e 7365 7454 6f72 697a 6f6e 7461 6c48  ).setTorizontalH
+0000c520: 6561 6465 7249 7465 6d28 2031 2c20 5154  eaderItem( 1, QT
+0000c530: 6162 6c65 5769 6467 6574 4974 656d 2822  ableWidgetItem("
+0000c540: 5368 6f72 7420 4e61 6d65 2229 290d 0a20  Short Name")).. 
+0000c550: 2020 2020 2020 2023 2073 656c 662e 7472         # self.tr
+0000c560: 616e 7361 6374 696f 6e56 6965 772e 6d6f  ansactionView.mo
+0000c570: 6465 6c28 292e 7365 7454 6f72 697a 6f6e  del().setTorizon
+0000c580: 7461 6c48 6561 6465 7249 7465 6d28 2032  talHeaderItem( 2
+0000c590: 2c20 5154 6162 6c65 5769 6467 6574 4974  , QTableWidgetIt
+0000c5a0: 656d 2822 556e 6964 6972 6563 7469 6f6e  em("Unidirection
+0000c5b0: 616c 2229 290d 0a20 2020 2020 2020 2023  al"))..        #
+0000c5c0: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000c5d0: 6e56 6965 772e 6d6f 6465 6c28 292e 7365  nView.model().se
+0000c5e0: 7454 6f72 697a 6f6e 7461 6c48 6561 6465  tTorizontalHeade
+0000c5f0: 7249 7465 6d28 2033 2c20 5154 6162 6c65  rItem( 3, QTable
+0000c600: 5769 6467 6574 4974 656d 2822 466c 6f77  WidgetItem("Flow
+0000c610: 2229 290d 0a0d 0a20 2020 2020 2020 2023  "))....        #
+0000c620: 2069 6e73 6572 7420 6e65 7720 726f 7773   insert new rows
+0000c630: 2069 6620 6e65 6564 6564 0d0a 2020 2020   if needed..    
+0000c640: 2020 2020 726f 775f 636f 756e 7420 3d20      row_count = 
+0000c650: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000c660: 5669 6577 2e72 6f77 436f 756e 7428 290d  View.rowCount().
+0000c670: 0a0d 0a20 2020 2020 2020 2069 6620 7365  ...        if se
+0000c680: 6c66 2e65 6e74 7279 5f64 6174 6120 6973  lf.entry_data is
+0000c690: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000c6a0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+0000c6b0: 2244 6174 6120 6973 2065 6d70 7479 206f  "Data is empty o
+0000c6c0: 7220 636f 7272 7570 7465 642e 2053 6f6d  r corrupted. Som
+0000c6d0: 6574 6869 6e67 2077 656e 7420 7772 6f6e  ething went wron
+0000c6e0: 6722 2c20 7469 746c 653d 2246 6174 616c  g", title="Fatal
+0000c6f0: 2045 7272 6f72 2229 0d0a 2020 2020 2020   Error")..      
+0000c700: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
+0000c710: 2020 2020 2020 2020 6966 2072 6f77 5f63          if row_c
+0000c720: 6f75 6e74 203c 206c 656e 2873 656c 662e  ount < len(self.
+0000c730: 656e 7472 795f 6461 7461 293a 0d0a 2020  entry_data):..  
+0000c740: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+0000c750: 696e 2072 616e 6765 286c 656e 2873 656c  in range(len(sel
+0000c760: 662e 656e 7472 795f 6461 7461 292d 726f  f.entry_data)-ro
+0000c770: 775f 636f 756e 7429 3a0d 0a20 2020 2020  w_count):..     
+0000c780: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000c790: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000c7a0: 696e 7365 7274 526f 7728 726f 775f 636f  insertRow(row_co
+0000c7b0: 756e 7429 0d0a 0d0a 2020 2020 2020 2020  unt)....        
+0000c7c0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0000c7d0: 636c 6561 7228 290d 0a20 2020 2020 2020  clear()..       
+0000c7e0: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
+0000c7f0: 6f2e 636c 6561 7228 290d 0a20 2020 2020  o.clear()..     
+0000c800: 2020 2073 656c 662e 6669 6c74 6572 5f65     self.filter_e
+0000c810: 6e74 7269 6573 203d 205b 5d0d 0a0d 0a20  ntries = [].... 
+0000c820: 2020 2020 2020 2066 6f72 2069 2c64 6174         for i,dat
+0000c830: 6120 696e 2065 6e75 6d65 7261 7465 2873  a in enumerate(s
+0000c840: 656c 662e 656e 7472 795f 6461 7461 293a  elf.entry_data):
+0000c850: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0000c860: 6578 6973 7473 3120 3d20 7365 6c66 2e64  exists1 = self.d
+0000c870: 7261 7763 616e 7661 732e 6368 6563 6b5f  rawcanvas.check_
+0000c880: 6578 6973 7428 6461 7461 5b22 6167 656e  exist(data["agen
+0000c890: 7431 225d 2e63 6170 6974 616c 697a 6528  t1"].capitalize(
+0000c8a0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000c8b0: 2320 6578 6973 7473 3220 3d20 7365 6c66  # exists2 = self
+0000c8c0: 2e64 7261 7763 616e 7661 732e 6368 6563  .drawcanvas.chec
+0000c8d0: 6b5f 6578 6973 7428 6461 7461 5b22 6167  k_exist(data["ag
+0000c8e0: 656e 7432 225d 2e63 6170 6974 616c 697a  ent2"].capitaliz
+0000c8f0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
+0000c900: 2020 2020 626f 7831 203d 2073 656c 662e      box1 = self.
+0000c910: 6472 6177 6361 6e76 6173 2e61 6464 5f61  drawcanvas.add_a
+0000c920: 6765 6e74 2863 616d 656c 2864 6174 615b  gent(camel(data[
+0000c930: 2261 6765 6e74 3122 5d29 2920 2320 2e63  "agent1"])) # .c
+0000c940: 6170 6974 616c 697a 6528 2929 0d0a 2020  apitalize())..  
+0000c950: 2020 2020 2020 2020 2020 626f 7832 203d            box2 =
 0000c960: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-0000c970: 2e61 6464 5f63 6f6e 6e65 6374 696f 6e28  .add_connection(
-0000c980: 626f 7831 2c62 6f78 322c 206e 616d 653d  box1,box2, name=
-0000c990: 2064 6174 615b 2273 686f 7274 6e61 6d65   data["shortname
-0000c9a0: 225d 2c73 7562 6a65 6374 3d64 6174 615b  "],subject=data[
-0000c9b0: 2273 7562 6a65 6374 225d 2c69 7465 6d73  "subject"],items
-0000c9c0: 3d6d 795f 6974 656d 7329 0d0a 0d0a 2020  =my_items)....  
-0000c9d0: 2020 2020 2020 2020 2020 2320 7570 6461            # upda
-0000c9e0: 7465 2074 6865 2066 696c 7465 7220 7661  te the filter va
-0000c9f0: 6c75 6573 0d0a 2020 2020 2020 2020 2020  lues..          
-0000ca00: 2020 666f 7220 656e 7472 7920 696e 206d    for entry in m
-0000ca10: 795f 6974 656d 733a 0d0a 2020 2020 2020  y_items:..      
-0000ca20: 2020 2020 2020 2020 2020 6966 2065 6e74            if ent
-0000ca30: 7279 206e 6f74 2069 6e20 7365 6c66 2e66  ry not in self.f
-0000ca40: 696c 7465 725f 656e 7472 6965 733a 0d0a  ilter_entries:..
-0000ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca60: 2020 2020 7365 6c66 2e66 696c 7465 725f      self.filter_
-0000ca70: 656e 7472 6965 732e 6170 7065 6e64 2865  entries.append(e
-0000ca80: 6e74 7279 290d 0a0d 0a20 2020 2020 2020  ntry)....       
-0000ca90: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0000caa0: 2020 2023 2073 6561 7263 6820 666f 7220     # search for 
-0000cab0: 6120 6d61 7463 6820 696e 2074 6865 2066  a match in the f
-0000cac0: 696c 7465 720d 0a0d 0a20 2020 2020 2020  ilter....       
-0000cad0: 2020 2020 2066 6f75 6e64 5f69 6478 7320       found_idxs 
-0000cae0: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
-0000caf0: 2020 7365 6172 6368 5f73 7472 203d 2073    search_str = s
-0000cb00: 656c 662e 4669 6c74 6572 6c69 6e65 4564  elf.FilterlineEd
-0000cb10: 6974 2e74 6578 7428 290d 0a0d 0a20 2020  it.text()....   
-0000cb20: 2020 2020 2020 2020 2069 6620 7365 6172           if sear
-0000cb30: 6368 5f73 7472 2021 3d20 2222 3a0d 0a20  ch_str != "":.. 
-0000cb40: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000cb50: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-0000cb60: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-0000cb70: 6e20 7261 6e67 6528 7365 6c66 2e74 7261  n range(self.tra
-0000cb80: 6e73 6163 7469 6f6e 5669 6577 2e72 6f77  nsactionView.row
-0000cb90: 436f 756e 7428 2929 3a0d 0a0d 0a20 2020  Count()):....   
-0000cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cbb0: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
-0000cbc0: 6e67 6528 7365 6c66 2e74 7261 6e73 6163  nge(self.transac
-0000cbd0: 7469 6f6e 5669 6577 2e63 6f6c 756d 6e43  tionView.columnC
-0000cbe0: 6f75 6e74 2829 293a 0d0a 0d0a 2020 2020  ount()):....    
-0000cbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc00: 2020 2020 2020 2020 656e 7472 795f 7374          entry_st
-0000cc10: 7220 3d20 7365 6c66 2e74 7261 6e73 6163  r = self.transac
-0000cc20: 7469 6f6e 5669 6577 2e69 7465 6d28 692c  tionView.item(i,
-0000cc30: 6a29 2e74 6578 7428 290d 0a0d 0a20 2020  j).text()....   
-0000cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc50: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
-0000cc60: 795f 7374 722e 6669 6e64 2873 6561 7263  y_str.find(searc
-0000cc70: 685f 7374 7229 203e 202d 313a 0d0a 0d0a  h_str) > -1:....
-0000cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cca0: 666f 756e 645f 6964 7873 2e61 7070 656e  found_idxs.appen
-0000ccb0: 6428 6929 0d0a 2020 2020 2020 2020 2020  d(i)..          
-0000ccc0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-0000ccd0: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-0000cce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ccf0: 2020 7072 696e 7428 2245 7863 6570 7469    print("Excepti
-0000cd00: 6f6e 3a22 2c20 7374 7228 6529 290d 0a0d  on:", str(e))...
-0000cd10: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0000cd20: 2066 6f75 6e64 5f69 6478 2069 6e20 666f   found_idx in fo
-0000cd30: 756e 645f 6964 7873 3a0d 0a20 2020 2020  und_idxs:..     
-0000cd40: 2020 2020 2020 2020 2020 2023 2068 6967             # hig
-0000cd50: 686c 6967 6874 206f 6363 7572 616e 6365  hlight occurance
-0000cd60: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0000cd70: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
-0000cd80: 6528 7365 6c66 2e74 7261 6e73 6163 7469  e(self.transacti
-0000cd90: 6f6e 5669 6577 2e63 6f6c 756d 6e43 6f75  onView.columnCou
-0000cda0: 6e74 2829 293a 0d0a 2020 2020 2020 2020  nt()):..        
-0000cdb0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0000cdc0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000cdd0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0000cde0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-0000cdf0: 722e 7468 656d 6520 3d3d 2022 6272 6967  r.theme == "brig
-0000ce00: 6874 223a 0d0a 0d0a 2020 2020 2020 2020  ht":....        
-0000ce10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce20: 2020 2020 2320 6c69 6768 7420 6d6f 6465      # light mode
-0000ce30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ce40: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000ce50: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000ce60: 6577 2e69 7465 6d28 666f 756e 645f 6964  ew.item(found_id
-0000ce70: 782c 206a 292e 7365 7442 6163 6b67 726f  x, j).setBackgro
-0000ce80: 756e 6428 5174 4775 692e 5143 6f6c 6f72  und(QtGui.QColor
-0000ce90: 2832 3237 2c20 3136 362c 2031 3636 2929  (227, 166, 166))
-0000cea0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ceb0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000cec0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000ced0: 6577 2e69 7465 6d28 666f 756e 645f 6964  ew.item(found_id
-0000cee0: 782c 206a 292e 7365 7446 6f72 6567 726f  x, j).setForegro
-0000cef0: 756e 6428 5174 4775 692e 5143 6f6c 6f72  und(QtGui.QColor
-0000cf00: 2831 3830 2c20 3138 2c20 3138 2929 0d0a  (180, 18, 18))..
-0000cf10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000cf20: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0000cf30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000cf40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000cf50: 2064 6172 6b20 6d6f 6465 0d0a 2020 2020   dark mode..    
-0000cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf70: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0000cf80: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
-0000cf90: 6d28 666f 756e 645f 6964 782c 206a 292e  m(found_idx, j).
-0000cfa0: 7365 7442 6163 6b67 726f 756e 6428 5174  setBackground(Qt
-0000cfb0: 4775 692e 5143 6f6c 6f72 2831 3230 2c20  Gui.QColor(120, 
-0000cfc0: 3132 302c 2031 3230 2929 0d0a 2020 2020  120, 120))..    
-0000cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cfe0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0000cff0: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
-0000d000: 6d28 666f 756e 645f 6964 782c 206a 292e  m(found_idx, j).
-0000d010: 7365 7446 6f72 6567 726f 756e 6428 5174  setForeground(Qt
-0000d020: 4775 692e 5143 6f6c 6f72 2835 302c 2035  Gui.QColor(50, 5
-0000d030: 302c 2035 3029 290d 0a0d 0a20 2020 2020  0, 50))....     
-0000d040: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000d050: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
-0000d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d070: 7061 7373 0d0a 2020 2020 2020 2020 2020  pass..          
-0000d080: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000d090: 6176 6f69 6473 204e 6f6e 6520 706f 696e  avoids None poin
-0000d0a0: 7465 7220 7768 656e 2061 2074 7261 6e73  ter when a trans
-0000d0b0: 6163 7469 6f6e 2069 7320 6465 6c65 7465  action is delete
-0000d0c0: 640d 0a20 2020 2020 2020 2065 7863 6570  d..        excep
-0000d0d0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-0000d0e0: 7061 7373 0d0a 0d0a 0d0a 2020 2020 2020  pass......      
-0000d0f0: 2020 666f 7220 656e 7472 7920 696e 2073    for entry in s
-0000d100: 656c 662e 6669 6c74 6572 5f65 6e74 7269  elf.filter_entri
-0000d110: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
-0000d120: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
-0000d130: 6f2e 6164 6449 7465 6d28 656e 7472 7929  o.addItem(entry)
-0000d140: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-0000d150: 2e64 7261 7763 616e 7661 732e 7570 6461  .drawcanvas.upda
-0000d160: 7465 2829 0d0a 2020 2020 2020 2020 7365  te()..        se
-0000d170: 6c66 2e6d 6164 655f 6368 616e 6765 7320  lf.made_changes 
-0000d180: 3d20 4661 6c73 650d 0a0d 0a0d 0a0d 0a0d  = False.........
-0000d190: 0a20 2020 2064 6566 206d 6f76 655f 646f  .    def move_do
-0000d1a0: 776e 2873 656c 6629 3a0d 0a20 2020 2020  wn(self):..     
-0000d1b0: 2020 2023 206d 6f76 6520 7365 6c65 6374     # move select
-0000d1c0: 6564 2074 7261 6e73 6163 7469 6f6e 2075  ed transaction u
-0000d1d0: 7020 696e 2074 6162 6c65 0d0a 2020 2020  p in table..    
-0000d1e0: 2020 2020 7365 6c65 6374 6564 5f72 6f77      selected_row
-0000d1f0: 7320 3d20 736f 7274 6564 2873 6574 2869  s = sorted(set(i
-0000d200: 6e64 6578 2e72 6f77 2829 2066 6f72 2069  ndex.row() for i
-0000d210: 6e64 6578 2069 6e0d 0a20 2020 2020 2020  ndex in..       
-0000d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d230: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000d240: 696f 6e56 6965 772e 7365 6c65 6374 6564  ionView.selected
-0000d250: 496e 6465 7865 7328 2929 290d 0a0d 0a20  Indexes())).... 
-0000d260: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
-0000d270: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
-0000d280: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-0000d290: 7072 696e 7428 226e 6f20 7365 6c65 6374  print("no select
-0000d2a0: 6564 2072 6f77 7322 290d 0a20 2020 2020  ed rows")..     
-0000d2b0: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
-0000d2c0: 0a20 2020 2020 2020 2073 656c 6563 7469  .        selecti
-0000d2d0: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
-0000d2e0: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
-0000d2f0: 206e 756d 6265 725f 6f66 5f69 7465 6d73   number_of_items
-0000d300: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
-0000d310: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
-0000d320: 2829 0d0a 2020 2020 2020 2020 6e75 6d62  ()..        numb
-0000d330: 6572 5f6f 665f 636f 6c75 6d6e 7320 3d20  er_of_columns = 
-0000d340: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000d350: 5669 6577 2e63 6f6c 756d 6e43 6f75 6e74  View.columnCount
-0000d360: 2829 0d0a 0d0a 2020 2020 2020 2020 7472  ()....        tr
-0000d370: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
-0000d380: 2020 6966 2073 656c 6563 7469 6f6e 203c    if selection <
-0000d390: 206e 756d 6265 725f 6f66 5f69 7465 6d73   number_of_items
-0000d3a0: 2d31 3a0d 0a20 2020 2020 2020 2020 2020  -1:..           
-0000d3b0: 2020 2020 2063 7572 7265 6e74 526f 7720       currentRow 
-0000d3c0: 3d20 7365 6c66 2e74 7261 6e73 6163 7469  = self.transacti
-0000d3d0: 6f6e 5669 6577 2e63 7572 7265 6e74 526f  onView.currentRo
-0000d3e0: 7728 290d 0a0d 0a20 2020 2020 2020 2020  w()....         
-0000d3f0: 2020 2020 2020 2066 6f72 206a 2069 6e20         for j in 
-0000d400: 7261 6e67 6528 6e75 6d62 6572 5f6f 665f  range(number_of_
-0000d410: 636f 6c75 6d6e 7329 3a0d 0a20 2020 2020  columns):..     
-0000d420: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000d430: 7572 7265 6e74 4974 656d 203d 2073 656c  urrentItem = sel
-0000d440: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000d450: 772e 7461 6b65 4974 656d 2863 7572 7265  w.takeItem(curre
-0000d460: 6e74 526f 772c 6a29 0d0a 2020 2020 2020  ntRow,j)..      
-0000d470: 2020 2020 2020 2020 2020 2020 2020 7377                sw
-0000d480: 6974 6368 4974 656d 203d 2073 656c 662e  itchItem = self.
-0000d490: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000d4a0: 7461 6b65 4974 656d 2863 7572 7265 6e74  takeItem(current
-0000d4b0: 526f 772b 312c 6a29 0d0a 0d0a 2020 2020  Row+1,j)....    
-0000d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d4d0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000d4e0: 5669 6577 2e73 6574 4974 656d 2863 7572  View.setItem(cur
-0000d4f0: 7265 6e74 526f 7720 2b20 312c 206a 2c20  rentRow + 1, j, 
-0000d500: 6375 7272 656e 7449 7465 6d29 0d0a 2020  currentItem)..  
-0000d510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d520: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
-0000d530: 6f6e 5669 6577 2e73 6574 4974 656d 2863  onView.setItem(c
-0000d540: 7572 7265 6e74 526f 772c 206a 2c20 7377  urrentRow, j, sw
-0000d550: 6974 6368 4974 656d 290d 0a0d 0a20 2020  itchItem)....   
-0000d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d570: 2073 7769 7463 685f 656e 7472 7920 3d20   switch_entry = 
-0000d580: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
-0000d590: 6375 7272 656e 7452 6f77 2b31 5d0d 0a20  currentRow+1].. 
-0000d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d5b0: 2020 2063 7572 7265 6e74 5f65 6e74 7279     current_entry
-0000d5c0: 203d 2073 656c 662e 656e 7472 795f 6461   = self.entry_da
-0000d5d0: 7461 5b63 7572 7265 6e74 526f 775d 0d0a  ta[currentRow]..
-0000d5e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d5f0: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000d600: 5f64 6174 615b 6375 7272 656e 7452 6f77  _data[currentRow
-0000d610: 5d20 3d20 7377 6974 6368 5f65 6e74 7279  ] = switch_entry
-0000d620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d630: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000d640: 5f64 6174 615b 6375 7272 656e 7452 6f77  _data[currentRow
-0000d650: 2b31 5d20 3d20 6375 7272 656e 745f 656e  +1] = current_en
-0000d660: 7472 790d 0a0d 0a20 2020 2020 2020 2020  try....         
-0000d670: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0000d680: 7361 6374 696f 6e56 6965 772e 636c 6561  sactionView.clea
-0000d690: 7253 656c 6563 7469 6f6e 2829 0d0a 2020  rSelection()..  
-0000d6a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000d6b0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000d6c0: 6577 2e73 6574 4375 7272 656e 7443 656c  ew.setCurrentCel
-0000d6d0: 6c28 6375 7272 656e 7452 6f77 2b31 2c30  l(currentRow+1,0
-0000d6e0: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
-0000d6f0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-0000d700: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-0000d710: 2073 656c 662e 6e6f 7469 6679 2822 6572   self.notify("er
-0000d720: 726f 723a 2022 2b73 7472 2865 292c 2074  ror: "+str(e), t
-0000d730: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
-0000d740: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
-0000d750: 7570 2873 656c 6629 3a0d 0a20 2020 2020  up(self):..     
-0000d760: 2020 2023 206d 6f76 6520 7365 6c65 6374     # move select
-0000d770: 6564 2074 7261 6e73 6163 7469 6f6e 2075  ed transaction u
-0000d780: 7020 696e 2074 6162 6c65 0d0a 2020 2020  p in table..    
-0000d790: 2020 2020 7365 6c65 6374 6564 5f72 6f77      selected_row
-0000d7a0: 7320 3d20 736f 7274 6564 2873 6574 2869  s = sorted(set(i
-0000d7b0: 6e64 6578 2e72 6f77 2829 2066 6f72 2069  ndex.row() for i
-0000d7c0: 6e64 6578 2069 6e0d 0a20 2020 2020 2020  ndex in..       
-0000d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d7e0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000d7f0: 696f 6e56 6965 772e 7365 6c65 6374 6564  ionView.selected
-0000d800: 496e 6465 7865 7328 2929 290d 0a0d 0a20  Indexes())).... 
-0000d810: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
-0000d820: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
-0000d830: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-0000d840: 7072 696e 7428 226e 6f20 7365 6c65 6374  print("no select
-0000d850: 6564 2072 6f77 7322 290d 0a20 2020 2020  ed rows")..     
-0000d860: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
-0000d870: 0a20 2020 2020 2020 2073 656c 6563 7469  .        selecti
-0000d880: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
-0000d890: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
-0000d8a0: 206e 756d 6265 725f 6f66 5f69 7465 6d73   number_of_items
-0000d8b0: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
-0000d8c0: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
-0000d8d0: 2829 0d0a 2020 2020 2020 2020 6e75 6d62  ()..        numb
-0000d8e0: 6572 5f6f 665f 636f 6c75 6d6e 7320 3d20  er_of_columns = 
-0000d8f0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000d900: 5669 6577 2e63 6f6c 756d 6e43 6f75 6e74  View.columnCount
-0000d910: 2829 0d0a 0d0a 2020 2020 2020 2020 7472  ()....        tr
-0000d920: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
-0000d930: 2020 6966 2073 656c 6563 7469 6f6e 203e    if selection >
-0000d940: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
-0000d950: 2020 2020 2020 6375 7272 656e 7452 6f77        currentRow
-0000d960: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
-0000d970: 696f 6e56 6965 772e 6375 7272 656e 7452  ionView.currentR
-0000d980: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
-0000d990: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
-0000d9a0: 2072 616e 6765 286e 756d 6265 725f 6f66   range(number_of
-0000d9b0: 5f63 6f6c 756d 6e73 293a 0d0a 2020 2020  _columns):..    
-0000d9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d9d0: 6375 7272 656e 7449 7465 6d20 3d20 7365  currentItem = se
-0000d9e0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000d9f0: 6577 2e74 616b 6549 7465 6d28 6375 7272  ew.takeItem(curr
-0000da00: 656e 7452 6f77 2c6a 290d 0a20 2020 2020  entRow,j)..     
-0000da10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000da20: 7769 7463 6849 7465 6d20 3d20 7365 6c66  witchItem = self
-0000da30: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000da40: 2e74 616b 6549 7465 6d28 6375 7272 656e  .takeItem(curren
-0000da50: 7452 6f77 2d31 2c6a 290d 0a0d 0a20 2020  tRow-1,j)....   
-0000da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000da70: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000da80: 6e56 6965 772e 7365 7449 7465 6d28 6375  nView.setItem(cu
-0000da90: 7272 656e 7452 6f77 202d 2031 2c20 6a2c  rrentRow - 1, j,
-0000daa0: 2063 7572 7265 6e74 4974 656d 290d 0a20   currentItem).. 
-0000dab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dac0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000dad0: 696f 6e56 6965 772e 7365 7449 7465 6d28  ionView.setItem(
-0000dae0: 6375 7272 656e 7452 6f77 2c20 6a2c 2073  currentRow, j, s
-0000daf0: 7769 7463 6849 7465 6d29 0d0a 0d0a 2020  witchItem)....  
-0000db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000db10: 2020 7377 6974 6368 5f65 6e74 7279 203d    switch_entry =
-0000db20: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000db30: 5b63 7572 7265 6e74 526f 772d 315d 0d0a  [currentRow-1]..
-0000db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000db50: 2020 2020 6375 7272 656e 745f 656e 7472      current_entr
-0000db60: 7920 3d20 7365 6c66 2e65 6e74 7279 5f64  y = self.entry_d
-0000db70: 6174 615b 6375 7272 656e 7452 6f77 5d0d  ata[currentRow].
-0000db80: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000db90: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000dba0: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
-0000dbb0: 775d 203d 2073 7769 7463 685f 656e 7472  w] = switch_entr
-0000dbc0: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
-0000dbd0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000dbe0: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
-0000dbf0: 772d 315d 203d 2063 7572 7265 6e74 5f65  w-1] = current_e
-0000dc00: 6e74 7279 0d0a 0d0a 2020 2020 2020 2020  ntry....        
-0000dc10: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0000dc20: 6e73 6163 7469 6f6e 5669 6577 2e63 6c65  nsactionView.cle
-0000dc30: 6172 5365 6c65 6374 696f 6e28 290d 0a20  arSelection().. 
-0000dc40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000dc50: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000dc60: 6965 772e 7365 7443 7572 7265 6e74 4365  iew.setCurrentCe
-0000dc70: 6c6c 2863 7572 7265 6e74 526f 772d 312c  ll(currentRow-1,
-0000dc80: 3029 0d0a 0d0a 2020 2020 2020 2020 6578  0)....        ex
-0000dc90: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-0000dca0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
-0000dcb0: 2020 7365 6c66 2e6e 6f74 6966 7928 2265    self.notify("e
-0000dcc0: 7272 6f72 3a20 222b 7374 7228 6529 2c20  rror: "+str(e), 
-0000dcd0: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
-0000dce0: 0d0a 2020 2020 6465 6620 6461 7461 5f73  ..    def data_s
-0000dcf0: 656c 6563 7428 7365 6c66 293a 0d0a 0d0a  elect(self):....
-0000dd00: 2020 2020 2020 2020 2373 656c 6563 7465          #selecte
-0000dd10: 645f 726f 7773 203d 2073 656c 662e 7472  d_rows = self.tr
-0000dd20: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-0000dd30: 6c65 6374 696f 6e4d 6f64 656c 2829 2e73  lectionModel().s
-0000dd40: 656c 6563 7465 6452 6f77 7328 290d 0a20  electedRows().. 
-0000dd50: 2020 2020 2020 2073 656c 6563 7465 645f         selected_
-0000dd60: 726f 7773 203d 2073 6f72 7465 6428 7365  rows = sorted(se
-0000dd70: 7428 696e 6465 782e 726f 7728 2920 666f  t(index.row() fo
-0000dd80: 7220 696e 6465 7820 696e 0d0a 2020 2020  r index in..    
-0000dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dda0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000ddb0: 6163 7469 6f6e 5669 6577 2e73 656c 6563  actionView.selec
-0000ddc0: 7465 6449 6e64 6578 6573 2829 2929 0d0a  tedIndexes()))..
-0000ddd0: 0d0a 2020 2020 2020 2020 6966 206c 656e  ..        if len
-0000dde0: 2873 656c 6563 7465 645f 726f 7773 2920  (selected_rows) 
-0000ddf0: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
-0000de00: 2020 2070 7269 6e74 2822 6e6f 2073 656c     print("no sel
-0000de10: 6563 7465 6420 726f 7773 2229 0d0a 2020  ected rows")..  
-0000de20: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000de30: 0d0a 0d0a 2020 2020 2020 2020 7365 6c65  ....        sele
-0000de40: 6374 696f 6e20 3d20 7365 6c65 6374 6564  ction = selected
-0000de50: 5f72 6f77 735b 305d 0d0a 0d0a 2020 2020  _rows[0]....    
-0000de60: 2020 2020 7365 6c66 2e72 6f77 5f73 656c      self.row_sel
-0000de70: 6563 7428 7365 6c65 6374 696f 6e29 0d0a  ect(selection)..
-0000de80: 2020 2020 2020 2020 7365 6c66 2e6d 6164          self.mad
-0000de90: 655f 6368 616e 6765 7320 3d20 4661 6c73  e_changes = Fals
-0000dea0: 650d 0a0d 0a0d 0a20 2020 2064 6566 2064  e......    def d
-0000deb0: 6174 615f 7365 6c65 6374 5f77 6865 7265  ata_select_where
-0000dec0: 2873 656c 662c 6578 7072 293a 0d0a 2020  (self,expr):..  
-0000ded0: 2020 2020 2020 7072 696e 7428 2264 6174        print("dat
-0000dee0: 6120 7365 6c65 6374 2077 6865 7265 222c  a select where",
-0000def0: 6578 7072 290d 0a0d 0a20 2020 2020 2020  expr)....       
-0000df00: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0000c970: 2e61 6464 5f61 6765 6e74 2863 616d 656c  .add_agent(camel
+0000c980: 2864 6174 615b 2261 6765 6e74 3222 5d29  (data["agent2"])
+0000c990: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
+0000c9a0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000c9b0: 2023 2063 6f72 7265 6374 206e 756d 6265   # correct numbe
+0000c9c0: 7220 6f66 2063 6f6e 6e65 6374 696f 6e73  r of connections
+0000c9d0: 2066 6f72 2065 7869 7374 696e 6720 6167   for existing ag
+0000c9e0: 656e 7473 0d0a 2020 2020 2020 2020 2020  ents..          
+0000c9f0: 2020 626f 7831 2e6e 5f63 6f6e 6e65 6374    box1.n_connect
+0000ca00: 696f 6e73 203d 2030 0d0a 2020 2020 2020  ions = 0..      
+0000ca10: 2020 2020 2020 626f 7832 2e6e 5f63 6f6e        box2.n_con
+0000ca20: 6e65 6374 696f 6e73 203d 2030 0d0a 0d0a  nections = 0....
+0000ca30: 2020 2020 2020 2020 2320 7570 6461 7465          # update
+0000ca40: 2074 6865 2064 6174 610d 0a20 2020 2020   the data..     
+0000ca50: 2020 2066 6f72 2069 2c20 6461 7461 2069     for i, data i
+0000ca60: 6e20 656e 756d 6572 6174 6528 7365 6c66  n enumerate(self
+0000ca70: 2e65 6e74 7279 5f64 6174 6129 3a0d 0a20  .entry_data):.. 
+0000ca80: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0000ca90: 2864 6174 6129 0d0a 0d0a 2020 2020 2020  (data)....      
+0000caa0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0000cab0: 6163 7469 6f6e 5669 6577 2e73 6574 4974  actionView.setIt
+0000cac0: 656d 2869 2c20 302c 2051 5461 626c 6557  em(i, 0, QTableW
+0000cad0: 6964 6765 7449 7465 6d28 6461 7461 5b22  idgetItem(data["
+0000cae0: 7375 626a 6563 7422 5d29 290d 0a20 2020  subject"]))..   
+0000caf0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000cb00: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+0000cb10: 7449 7465 6d28 692c 2031 2c20 5154 6162  tItem(i, 1, QTab
+0000cb20: 6c65 5769 6467 6574 4974 656d 2863 616d  leWidgetItem(cam
+0000cb30: 656c 2864 6174 615b 2261 6765 6e74 3122  el(data["agent1"
+0000cb40: 5d29 2929 2023 202e 6361 7069 7461 6c69  ]))) # .capitali
+0000cb50: 7a65 2829 2929 0d0a 2020 2020 2020 2020  ze()))..        
+0000cb60: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000cb70: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
+0000cb80: 2869 2c20 322c 2051 5461 626c 6557 6964  (i, 2, QTableWid
+0000cb90: 6765 7449 7465 6d28 6361 6d65 6c28 6461  getItem(camel(da
+0000cba0: 7461 5b22 6167 656e 7432 225d 2929 2920  ta["agent2"]))) 
+0000cbb0: 2320 2e63 6170 6974 616c 697a 6528 2929  # .capitalize())
+0000cbc0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0000cbd0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000cbe0: 6965 772e 7365 7449 7465 6d28 692c 2033  iew.setItem(i, 3
+0000cbf0: 2c20 5154 6162 6c65 5769 6467 6574 4974  , QTableWidgetIt
+0000cc00: 656d 2864 6174 615b 2273 686f 7274 6e61  em(data["shortna
+0000cc10: 6d65 225d 2929 0d0a 2020 2020 2020 2020  me"]))..        
+0000cc20: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000cc30: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
+0000cc40: 2869 2c20 342c 2051 5461 626c 6557 6964  (i, 4, QTableWid
+0000cc50: 6765 7449 7465 6d28 6461 7461 5b22 6b69  getItem(data["ki
+0000cc60: 6e64 225d 2929 0d0a 2020 2020 2020 2020  nd"]))..        
+0000cc70: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000cc80: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
+0000cc90: 2869 2c20 352c 2051 5461 626c 6557 6964  (i, 5, QTableWid
+0000cca0: 6765 7449 7465 6d28 7374 7228 6461 7461  getItem(str(data
+0000ccb0: 5b22 756e 692d 6469 7265 6374 696f 6e61  ["uni-directiona
+0000ccc0: 6c22 5d29 2929 0d0a 2020 2020 2020 2020  l"])))..        
+0000ccd0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000cce0: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
+0000ccf0: 2869 2c20 362c 2051 5461 626c 6557 6964  (i, 6, QTableWid
+0000cd00: 6765 7449 7465 6d28 7374 7228 6461 7461  getItem(str(data
+0000cd10: 5b22 7175 616e 7469 7479 225d 2929 290d  ["quantity"]))).
+0000cd20: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
+0000cd30: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000cd40: 6965 772e 7365 6c65 6374 696f 6e4d 6f64  iew.selectionMod
+0000cd50: 656c 2829 2e73 656c 6563 7465 6452 6f77  el().selectedRow
+0000cd60: 7328 290d 0a0d 0a20 2020 2020 2020 2020  s()....         
+0000cd70: 2020 2062 6f78 3120 3d20 7365 6c66 2e64     box1 = self.d
+0000cd80: 7261 7763 616e 7661 732e 6164 645f 6167  rawcanvas.add_ag
+0000cd90: 656e 7428 6361 6d65 6c28 6461 7461 5b22  ent(camel(data["
+0000cda0: 6167 656e 7431 225d 2929 2023 2e63 6170  agent1"])) #.cap
+0000cdb0: 6974 616c 697a 6528 2929 0d0a 2020 2020  italize())..    
+0000cdc0: 2020 2020 2020 2020 626f 7832 203d 2073          box2 = s
+0000cdd0: 656c 662e 6472 6177 6361 6e76 6173 2e61  elf.drawcanvas.a
+0000cde0: 6464 5f61 6765 6e74 2863 616d 656c 2864  dd_agent(camel(d
+0000cdf0: 6174 615b 2261 6765 6e74 3222 5d29 2920  ata["agent2"])) 
+0000ce00: 232e 6361 7069 7461 6c69 7a65 2829 290d  #.capitalize()).
+0000ce10: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+0000ce20: 795f 6974 656d 7320 3d20 5b5d 0d0a 0d0a  y_items = []....
+0000ce30: 2020 2020 2020 2020 2020 2020 616c 6c65              alle
+0000ce40: 6e74 7269 6573 203d 2022 5c6e 222e 6a6f  ntries = "\n".jo
+0000ce50: 696e 285b 6461 7461 5b22 6c31 225d 2c20  in([data["l1"], 
+0000ce60: 6461 7461 5b22 6131 225d 2c20 6461 7461  data["a1"], data
+0000ce70: 5b22 6531 225d 2c20 6461 7461 5b22 6c32  ["e1"], data["l2
+0000ce80: 225d 2c20 6461 7461 5b22 6132 225d 2c20  "], data["a2"], 
+0000ce90: 6461 7461 5b22 6532 225d 5d29 0d0a 2020  data["e2"]])..  
+0000cea0: 2020 2020 2020 2020 2020 666f 7220 7375            for su
+0000ceb0: 625f 6974 656d 2069 6e20 616c 6c65 6e74  b_item in allent
+0000cec0: 7269 6573 2e73 706c 6974 2822 5c6e 2229  ries.split("\n")
+0000ced0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000cee0: 2020 2066 6f72 2073 7562 5f65 6e74 7279     for sub_entry
+0000cef0: 2069 6e20 7375 625f 6974 656d 2e73 706c   in sub_item.spl
+0000cf00: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
+0000cf10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000cf20: 6e74 7279 203d 2073 7562 5f65 6e74 7279  ntry = sub_entry
+0000cf30: 2e72 6570 6c61 6365 2822 2d22 2c22 2229  .replace("-","")
+0000cf40: 2e72 6570 6c61 6365 2822 2b22 2c22 2229  .replace("+","")
+0000cf50: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
+0000cf60: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000cf70: 2065 6e74 7279 2021 3d20 2022 223a 0d0a   entry !=  "":..
+0000cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf90: 2020 2020 2020 2020 6d79 5f69 7465 6d73          my_items
+0000cfa0: 2e61 7070 656e 6428 656e 7472 7929 0d0a  .append(entry)..
+0000cfb0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000cfc0: 6c66 2e64 7261 7763 616e 7661 732e 6164  lf.drawcanvas.ad
+0000cfd0: 645f 636f 6e6e 6563 7469 6f6e 2862 6f78  d_connection(box
+0000cfe0: 312c 626f 7832 2c20 6e61 6d65 3d20 6461  1,box2, name= da
+0000cff0: 7461 5b22 7368 6f72 746e 616d 6522 5d2c  ta["shortname"],
+0000d000: 7375 626a 6563 743d 6461 7461 5b22 7375  subject=data["su
+0000d010: 626a 6563 7422 5d2c 6974 656d 733d 6d79  bject"],items=my
+0000d020: 5f69 7465 6d73 290d 0a0d 0a20 2020 2020  _items)....     
+0000d030: 2020 2020 2020 2023 2075 7064 6174 6520         # update 
+0000d040: 7468 6520 6669 6c74 6572 2076 616c 7565  the filter value
+0000d050: 730d 0a20 2020 2020 2020 2020 2020 2066  s..            f
+0000d060: 6f72 2065 6e74 7279 2069 6e20 6d79 5f69  or entry in my_i
+0000d070: 7465 6d73 3a0d 0a20 2020 2020 2020 2020  tems:..         
+0000d080: 2020 2020 2020 2069 6620 656e 7472 7920         if entry 
+0000d090: 6e6f 7420 696e 2073 656c 662e 6669 6c74  not in self.filt
+0000d0a0: 6572 5f65 6e74 7269 6573 3a0d 0a20 2020  er_entries:..   
+0000d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d0c0: 2073 656c 662e 6669 6c74 6572 5f65 6e74   self.filter_ent
+0000d0d0: 7269 6573 2e61 7070 656e 6428 656e 7472  ries.append(entr
+0000d0e0: 7929 0d0a 0d0a 2020 2020 2020 2020 7472  y)....        tr
+0000d0f0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0000d100: 2320 7365 6172 6368 2066 6f72 2061 206d  # search for a m
+0000d110: 6174 6368 2069 6e20 7468 6520 6669 6c74  atch in the filt
+0000d120: 6572 0d0a 0d0a 2020 2020 2020 2020 2020  er....          
+0000d130: 2020 666f 756e 645f 6964 7873 203d 205b    found_idxs = [
+0000d140: 5d0d 0a20 2020 2020 2020 2020 2020 2073  ]..            s
+0000d150: 6561 7263 685f 7374 7220 3d20 7365 6c66  earch_str = self
+0000d160: 2e46 696c 7465 726c 696e 6545 6469 742e  .FilterlineEdit.
+0000d170: 7465 7874 2829 0d0a 0d0a 2020 2020 2020  text()....      
+0000d180: 2020 2020 2020 6966 2073 6561 7263 685f        if search_
+0000d190: 7374 7220 213d 2022 223a 0d0a 2020 2020  str != "":..    
+0000d1a0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+0000d1b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d1c0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+0000d1d0: 616e 6765 2873 656c 662e 7472 616e 7361  ange(self.transa
+0000d1e0: 6374 696f 6e56 6965 772e 726f 7743 6f75  ctionView.rowCou
+0000d1f0: 6e74 2829 293a 0d0a 0d0a 2020 2020 2020  nt()):....      
+0000d200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d210: 2020 666f 7220 6a20 696e 2072 616e 6765    for j in range
+0000d220: 2873 656c 662e 7472 616e 7361 6374 696f  (self.transactio
+0000d230: 6e56 6965 772e 636f 6c75 6d6e 436f 756e  nView.columnCoun
+0000d240: 7428 2929 3a0d 0a0d 0a20 2020 2020 2020  t()):....       
+0000d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d260: 2020 2020 2065 6e74 7279 5f73 7472 203d       entry_str =
+0000d270: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000d280: 6e56 6965 772e 6974 656d 2869 2c6a 292e  nView.item(i,j).
+0000d290: 7465 7874 2829 0d0a 0d0a 2020 2020 2020  text()....      
+0000d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d2b0: 2020 2020 2020 6966 2065 6e74 7279 5f73        if entry_s
+0000d2c0: 7472 2e66 696e 6428 7365 6172 6368 5f73  tr.find(search_s
+0000d2d0: 7472 2920 3e20 2d31 3a0d 0a0d 0a20 2020  tr) > -1:....   
+0000d2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d2f0: 2020 2020 2020 2020 2020 2020 2066 6f75               fou
+0000d300: 6e64 5f69 6478 732e 6170 7065 6e64 2869  nd_idxs.append(i
+0000d310: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000d320: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+0000d330: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+0000d340: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000d350: 7269 6e74 2822 4578 6365 7074 696f 6e3a  rint("Exception:
+0000d360: 222c 2073 7472 2865 2929 0d0a 0d0a 2020  ", str(e))....  
+0000d370: 2020 2020 2020 2020 2020 666f 7220 666f            for fo
+0000d380: 756e 645f 6964 7820 696e 2066 6f75 6e64  und_idx in found
+0000d390: 5f69 6478 733a 0d0a 2020 2020 2020 2020  _idxs:..        
+0000d3a0: 2020 2020 2020 2020 2320 6869 6768 6c69          # highli
+0000d3b0: 6768 7420 6f63 6375 7261 6e63 6573 0d0a  ght occurances..
+0000d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d3d0: 666f 7220 6a20 696e 2072 616e 6765 2873  for j in range(s
+0000d3e0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000d3f0: 6965 772e 636f 6c75 6d6e 436f 756e 7428  iew.columnCount(
+0000d400: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
+0000d410: 2020 2020 2020 2020 2074 7279 3a0d 0a0d           try:...
+0000d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d430: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0000d440: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
+0000d450: 6865 6d65 203d 3d20 2262 7269 6768 7422  heme == "bright"
+0000d460: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0000d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d480: 2023 206c 6967 6874 206d 6f64 650d 0a20   # light mode.. 
+0000d490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d4b0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000d4c0: 6974 656d 2866 6f75 6e64 5f69 6478 2c20  item(found_idx, 
+0000d4d0: 6a29 2e73 6574 4261 636b 6772 6f75 6e64  j).setBackground
+0000d4e0: 2851 7447 7569 2e51 436f 6c6f 7228 3232  (QtGui.QColor(22
+0000d4f0: 372c 2031 3636 2c20 3136 3629 290d 0a20  7, 166, 166)).. 
+0000d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d510: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d520: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000d530: 6974 656d 2866 6f75 6e64 5f69 6478 2c20  item(found_idx, 
+0000d540: 6a29 2e73 6574 466f 7265 6772 6f75 6e64  j).setForeground
+0000d550: 2851 7447 7569 2e51 436f 6c6f 7228 3138  (QtGui.QColor(18
+0000d560: 302c 2031 382c 2031 3829 290d 0a0d 0a20  0, 18, 18)).... 
+0000d570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d580: 2020 2020 2020 2065 6c73 653a 0d0a 0d0a         else:....
+0000d590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d5a0: 2020 2020 2020 2020 2020 2020 2320 6461              # da
+0000d5b0: 726b 206d 6f64 650d 0a20 2020 2020 2020  rk mode..       
+0000d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d5d0: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
+0000d5e0: 6374 696f 6e56 6965 772e 6974 656d 2866  ctionView.item(f
+0000d5f0: 6f75 6e64 5f69 6478 2c20 6a29 2e73 6574  ound_idx, j).set
+0000d600: 4261 636b 6772 6f75 6e64 2851 7447 7569  Background(QtGui
+0000d610: 2e51 436f 6c6f 7228 3132 302c 2031 3230  .QColor(120, 120
+0000d620: 2c20 3132 3029 290d 0a20 2020 2020 2020  , 120))..       
+0000d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d640: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
+0000d650: 6374 696f 6e56 6965 772e 6974 656d 2866  ctionView.item(f
+0000d660: 6f75 6e64 5f69 6478 2c20 6a29 2e73 6574  ound_idx, j).set
+0000d670: 466f 7265 6772 6f75 6e64 2851 7447 7569  Foreground(QtGui
+0000d680: 2e51 436f 6c6f 7228 3530 2c20 3530 2c20  .QColor(50, 50, 
+0000d690: 3530 2929 0d0a 0d0a 2020 2020 2020 2020  50))....        
+0000d6a0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0000d6b0: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
+0000d6c0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+0000d6d0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+0000d6e0: 2020 2020 2020 2020 2020 2023 2061 766f             # avo
+0000d6f0: 6964 7320 4e6f 6e65 2070 6f69 6e74 6572  ids None pointer
+0000d700: 2077 6865 6e20 6120 7472 616e 7361 6374   when a transact
+0000d710: 696f 6e20 6973 2064 656c 6574 6564 0d0a  ion is deleted..
+0000d720: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0000d730: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
+0000d740: 730d 0a0d 0a0d 0a20 2020 2020 2020 2066  s......        f
+0000d750: 6f72 2065 6e74 7279 2069 6e20 7365 6c66  or entry in self
+0000d760: 2e66 696c 7465 725f 656e 7472 6965 733a  .filter_entries:
+0000d770: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000d780: 6c66 2e66 696c 7465 7243 6f6d 626f 2e61  lf.filterCombo.a
+0000d790: 6464 4974 656d 2865 6e74 7279 290d 0a0d  ddItem(entry)...
+0000d7a0: 0a20 2020 2020 2020 2073 656c 662e 6472  .        self.dr
+0000d7b0: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
+0000d7c0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000d7d0: 6d61 6465 5f63 6861 6e67 6573 203d 2046  made_changes = F
+0000d7e0: 616c 7365 0d0a 0d0a 0d0a 0d0a 0d0a 2020  alse..........  
+0000d7f0: 2020 6465 6620 6d6f 7665 5f64 6f77 6e28    def move_down(
+0000d800: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0000d810: 2320 6d6f 7665 2073 656c 6563 7465 6420  # move selected 
+0000d820: 7472 616e 7361 6374 696f 6e20 7570 2069  transaction up i
+0000d830: 6e20 7461 626c 650d 0a20 2020 2020 2020  n table..       
+0000d840: 2073 656c 6563 7465 645f 726f 7773 203d   selected_rows =
+0000d850: 2073 6f72 7465 6428 7365 7428 696e 6465   sorted(set(inde
+0000d860: 782e 726f 7728 2920 666f 7220 696e 6465  x.row() for inde
+0000d870: 7820 696e 0d0a 2020 2020 2020 2020 2020  x in..          
+0000d880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d890: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000d8a0: 5669 6577 2e73 656c 6563 7465 6449 6e64  View.selectedInd
+0000d8b0: 6578 6573 2829 2929 0d0a 0d0a 2020 2020  exes()))....    
+0000d8c0: 2020 2020 6966 206c 656e 2873 656c 6563      if len(selec
+0000d8d0: 7465 645f 726f 7773 2920 3d3d 2030 3a0d  ted_rows) == 0:.
+0000d8e0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+0000d8f0: 6e74 2822 6e6f 2073 656c 6563 7465 6420  nt("no selected 
+0000d900: 726f 7773 2229 0d0a 2020 2020 2020 2020  rows")..        
+0000d910: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
+0000d920: 2020 2020 2020 7365 6c65 6374 696f 6e20        selection 
+0000d930: 3d20 7365 6c65 6374 6564 5f72 6f77 735b  = selected_rows[
+0000d940: 305d 0d0a 0d0a 2020 2020 2020 2020 6e75  0]....        nu
+0000d950: 6d62 6572 5f6f 665f 6974 656d 7320 3d20  mber_of_items = 
+0000d960: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000d970: 5669 6577 2e72 6f77 436f 756e 7428 290d  View.rowCount().
+0000d980: 0a20 2020 2020 2020 206e 756d 6265 725f  .        number_
+0000d990: 6f66 5f63 6f6c 756d 6e73 203d 2073 656c  of_columns = sel
+0000d9a0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000d9b0: 772e 636f 6c75 6d6e 436f 756e 7428 290d  w.columnCount().
+0000d9c0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+0000d9d0: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
+0000d9e0: 6620 7365 6c65 6374 696f 6e20 3c20 6e75  f selection < nu
+0000d9f0: 6d62 6572 5f6f 665f 6974 656d 732d 313a  mber_of_items-1:
+0000da00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000da10: 2020 6375 7272 656e 7452 6f77 203d 2073    currentRow = s
+0000da20: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000da30: 6965 772e 6375 7272 656e 7452 6f77 2829  iew.currentRow()
+0000da40: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000da50: 2020 2020 666f 7220 6a20 696e 2072 616e      for j in ran
+0000da60: 6765 286e 756d 6265 725f 6f66 5f63 6f6c  ge(number_of_col
+0000da70: 756d 6e73 293a 0d0a 2020 2020 2020 2020  umns):..        
+0000da80: 2020 2020 2020 2020 2020 2020 6375 7272              curr
+0000da90: 656e 7449 7465 6d20 3d20 7365 6c66 2e74  entItem = self.t
+0000daa0: 7261 6e73 6163 7469 6f6e 5669 6577 2e74  ransactionView.t
+0000dab0: 616b 6549 7465 6d28 6375 7272 656e 7452  akeItem(currentR
+0000dac0: 6f77 2c6a 290d 0a20 2020 2020 2020 2020  ow,j)..         
+0000dad0: 2020 2020 2020 2020 2020 2073 7769 7463             switc
+0000dae0: 6849 7465 6d20 3d20 7365 6c66 2e74 7261  hItem = self.tra
+0000daf0: 6e73 6163 7469 6f6e 5669 6577 2e74 616b  nsactionView.tak
+0000db00: 6549 7465 6d28 6375 7272 656e 7452 6f77  eItem(currentRow
+0000db10: 2b31 2c6a 290d 0a0d 0a20 2020 2020 2020  +1,j)....       
+0000db20: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000db30: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000db40: 772e 7365 7449 7465 6d28 6375 7272 656e  w.setItem(curren
+0000db50: 7452 6f77 202b 2031 2c20 6a2c 2063 7572  tRow + 1, j, cur
+0000db60: 7265 6e74 4974 656d 290d 0a20 2020 2020  rentItem)..     
+0000db70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000db80: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000db90: 6965 772e 7365 7449 7465 6d28 6375 7272  iew.setItem(curr
+0000dba0: 656e 7452 6f77 2c20 6a2c 2073 7769 7463  entRow, j, switc
+0000dbb0: 6849 7465 6d29 0d0a 0d0a 2020 2020 2020  hItem)....      
+0000dbc0: 2020 2020 2020 2020 2020 2020 2020 7377                sw
+0000dbd0: 6974 6368 5f65 6e74 7279 203d 2073 656c  itch_entry = sel
+0000dbe0: 662e 656e 7472 795f 6461 7461 5b63 7572  f.entry_data[cur
+0000dbf0: 7265 6e74 526f 772b 315d 0d0a 2020 2020  rentRow+1]..    
+0000dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dc10: 6375 7272 656e 745f 656e 7472 7920 3d20  current_entry = 
+0000dc20: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+0000dc30: 6375 7272 656e 7452 6f77 5d0d 0a0d 0a20  currentRow].... 
+0000dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dc50: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+0000dc60: 7461 5b63 7572 7265 6e74 526f 775d 203d  ta[currentRow] =
+0000dc70: 2073 7769 7463 685f 656e 7472 790d 0a20   switch_entry.. 
+0000dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dc90: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+0000dca0: 7461 5b63 7572 7265 6e74 526f 772b 315d  ta[currentRow+1]
+0000dcb0: 203d 2063 7572 7265 6e74 5f65 6e74 7279   = current_entry
+0000dcc0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000dcd0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0000dce0: 7469 6f6e 5669 6577 2e63 6c65 6172 5365  tionView.clearSe
+0000dcf0: 6c65 6374 696f 6e28 290d 0a20 2020 2020  lection()..     
+0000dd00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000dd10: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000dd20: 7365 7443 7572 7265 6e74 4365 6c6c 2863  setCurrentCell(c
+0000dd30: 7572 7265 6e74 526f 772b 312c 3029 0d0a  urrentRow+1,0)..
+0000dd40: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+0000dd50: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+0000dd60: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000dd70: 6c66 2e6e 6f74 6966 7928 2265 7272 6f72  lf.notify("error
+0000dd80: 3a20 222b 7374 7228 6529 2c20 7469 746c  : "+str(e), titl
+0000dd90: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
+0000dda0: 2020 2020 6465 6620 6d6f 7665 5f75 7028      def move_up(
+0000ddb0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0000ddc0: 2320 6d6f 7665 2073 656c 6563 7465 6420  # move selected 
+0000ddd0: 7472 616e 7361 6374 696f 6e20 7570 2069  transaction up i
+0000dde0: 6e20 7461 626c 650d 0a20 2020 2020 2020  n table..       
+0000ddf0: 2073 656c 6563 7465 645f 726f 7773 203d   selected_rows =
+0000de00: 2073 6f72 7465 6428 7365 7428 696e 6465   sorted(set(inde
+0000de10: 782e 726f 7728 2920 666f 7220 696e 6465  x.row() for inde
+0000de20: 7820 696e 0d0a 2020 2020 2020 2020 2020  x in..          
+0000de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de40: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000de50: 5669 6577 2e73 656c 6563 7465 6449 6e64  View.selectedInd
+0000de60: 6578 6573 2829 2929 0d0a 0d0a 2020 2020  exes()))....    
+0000de70: 2020 2020 6966 206c 656e 2873 656c 6563      if len(selec
+0000de80: 7465 645f 726f 7773 2920 3d3d 2030 3a0d  ted_rows) == 0:.
+0000de90: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+0000dea0: 6e74 2822 6e6f 2073 656c 6563 7465 6420  nt("no selected 
+0000deb0: 726f 7773 2229 0d0a 2020 2020 2020 2020  rows")..        
+0000dec0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
+0000ded0: 2020 2020 2020 7365 6c65 6374 696f 6e20        selection 
+0000dee0: 3d20 7365 6c65 6374 6564 5f72 6f77 735b  = selected_rows[
+0000def0: 305d 0d0a 0d0a 2020 2020 2020 2020 6e75  0]....        nu
+0000df00: 6d62 6572 5f6f 665f 6974 656d 7320 3d20  mber_of_items = 
 0000df10: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000df20: 5669 6577 2e72 6f77 436f 756e 7428 2929  View.rowCount())
-0000df30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000df40: 2020 206d 795f 656e 7472 7920 3d20 7365     my_entry = se
-0000df50: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000df60: 6577 2e69 7465 6d28 692c 2033 292e 7465  ew.item(i, 3).te
-0000df70: 7874 2829 0d0a 0d0a 2020 2020 2020 2020  xt()....        
-0000df80: 2020 2020 2020 2020 7072 696e 7428 222e          print(".
-0000df90: 2e2e 222c 692c 6d79 5f65 6e74 7279 290d  ..",i,my_entry).
-0000dfa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000dfb0: 2069 6620 6d79 5f65 6e74 7279 203d 3d20   if my_entry == 
-0000dfc0: 6578 7072 206f 7220 6d79 5f65 6e74 7279  expr or my_entry
-0000dfd0: 2e6c 6f77 6572 2829 203d 3d20 6578 7072  .lower() == expr
-0000dfe0: 2e6c 6f77 6572 2829 3a0d 0a0d 0a20 2020  .lower():....   
-0000dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e000: 2073 656c 662e 726f 775f 7365 6c65 6374   self.row_select
-0000e010: 2869 290d 0a20 2020 2020 2020 2020 2020  (i)..           
-0000e020: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
-0000e030: 0a0d 0a20 2020 2064 6566 2072 6f77 5f73  ...    def row_s
-0000e040: 656c 6563 7428 7365 6c66 2c73 656c 6563  elect(self,selec
-0000e050: 7469 6f6e 293a 0d0a 0d0a 2020 2020 2020  tion):....      
-0000e060: 2020 2320 636f 6c6f 7220 7468 6520 7365    # color the se
-0000e070: 6c65 6374 6564 2072 6f77 0d0a 2020 2020  lected row..    
-0000e080: 2020 2020 2320 6762 2832 3333 2c20 3233      # gb(233, 23
-0000e090: 342c 2032 3237 293b 0d0a 0d0a 2020 2020  4, 227);....    
-0000e0a0: 2020 2020 7365 6c66 2e73 656c 6563 7469      self.selecti
-0000e0b0: 6f6e 5f69 6478 203d 204e 6f6e 650d 0a0d  on_idx = None...
-0000e0c0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0000e0d0: 2e6d 6164 655f 6368 616e 6765 733a 0d0a  .made_changes:..
-0000e0e0: 2020 2020 2020 2020 2020 2020 7965 7320              yes 
-0000e0f0: 3d20 7365 6c66 2e61 736b 5f71 7565 7374  = self.ask_quest
-0000e100: 696f 6e28 2257 6172 6e69 6e67 222c 2022  ion("Warning", "
-0000e110: 596f 7520 6172 6520 6162 6f75 7420 746f  You are about to
-0000e120: 2063 6861 6e67 6520 746f 2061 6e6f 7468   change to anoth
-0000e130: 6572 2074 7261 6e73 6163 7469 6f6e 2061  er transaction a
-0000e140: 6e64 2077 6974 6864 7261 7720 7468 6520  nd withdraw the 
-0000e150: 6368 616e 6765 7320 796f 7520 6d61 6465  changes you made
-0000e160: 2e20 436f 6e74 696e 7565 3f22 290d 0a20  . Continue?").. 
-0000e170: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0000e180: 7420 7965 733a 0d0a 2020 2020 2020 2020  t yes:..        
-0000e190: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
-0000e1a0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-0000e1b0: 2020 2020 2020 2020 2020 2020 2222 220d              """.
-0000e1c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000e1d0: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
-0000e1e0: 6478 2069 7320 6e6f 7420 4e6f 6e65 3a0d  dx is not None:.
-0000e1f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e200: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0000e210: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000e220: 5669 6577 2e63 6f6c 756d 6e43 6f75 6e74  View.columnCount
-0000e230: 2829 293a 0d0a 2020 2020 2020 2020 2020  ()):..          
-0000e240: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000e250: 7261 6e73 6163 7469 6f6e 5669 6577 2e69  ransactionView.i
-0000e260: 7465 6d28 7365 6c66 2e73 656c 6563 7469  tem(self.selecti
-0000e270: 6f6e 5f69 6478 2c20 6929 2e73 6574 4261  on_idx, i).setBa
-0000e280: 636b 6772 6f75 6e64 2851 7447 7569 2e51  ckground(QtGui.Q
-0000e290: 436f 6c6f 7228 3233 332c 2032 3334 2c20  Color(233, 234, 
-0000e2a0: 3232 3729 290d 0a20 2020 2020 2020 2020  227))..         
-0000e2b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e2c0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000e2d0: 7363 726f 6c6c 546f 4974 656d 2873 656c  scrollToItem(sel
-0000e2e0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000e2f0: 772e 6974 656d 2873 656c 6563 7469 6f6e  w.item(selection
-0000e300: 2c20 6929 290d 0a20 2020 2020 2020 2020  , i))..         
-0000e310: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0000e320: 6528 7365 6c66 2e74 7261 6e73 6163 7469  e(self.transacti
-0000e330: 6f6e 5669 6577 2e63 6f6c 756d 6e43 6f75  onView.columnCou
-0000e340: 6e74 2829 293a 0d0a 2020 2020 2020 2020  nt()):..        
-0000e350: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0000e360: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
-0000e370: 6d28 7365 6c65 6374 696f 6e2c 2069 292e  m(selection, i).
-0000e380: 7365 7442 6163 6b67 726f 756e 6428 5174  setBackground(Qt
-0000e390: 4775 692e 5143 6f6c 6f72 2835 392c 2035  Gui.QColor(59, 5
-0000e3a0: 392c 2031 3539 2929 0d0a 2020 2020 2020  9, 159))..      
-0000e3b0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000e3c0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
-0000e3d0: 6372 6f6c 6c54 6f49 7465 6d28 7365 6c66  crollToItem(self
-0000e3e0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000e3f0: 2e69 7465 6d28 7365 6c65 6374 696f 6e2c  .item(selection,
-0000e400: 2069 2929 0d0a 2020 2020 2020 2020 2020   i))..          
-0000e410: 2020 2222 220d 0a20 2020 2020 2020 2020    """..         
-0000e420: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000e430: 696f 6e56 6965 772e 636c 6561 7253 656c  ionView.clearSel
-0000e440: 6563 7469 6f6e 2829 0d0a 2020 2020 2020  ection()..      
-0000e450: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000e460: 6163 7469 6f6e 5669 6577 2e73 6574 4375  actionView.setCu
-0000e470: 7272 656e 7443 656c 6c28 7365 6c65 6374  rrentCell(select
-0000e480: 696f 6e2c 3329 0d0a 0d0a 0d0a 0d0a 2020  ion,3)........  
-0000e490: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-0000e4a0: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-0000e4b0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
-0000e4c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000e4d0: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
-0000e4e0: 3d20 7365 6c65 6374 696f 6e0d 0a20 2020  = selection..   
-0000e4f0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-0000e500: 7365 6c65 6374 696f 6e22 2c73 656c 6563  selection",selec
-0000e510: 7469 6f6e 290d 0a0d 0a20 2020 2020 2020  tion)....       
-0000e520: 2020 2020 2064 6174 6120 3d20 7365 6c66       data = self
-0000e530: 2e65 6e74 7279 5f64 6174 615b 7365 6c65  .entry_data[sele
-0000e540: 6374 696f 6e5d 0d0a 0d0a 2020 2020 2020  ction]....      
-0000e550: 2020 2020 2020 7072 696e 7428 2264 6174        print("dat
-0000e560: 6122 2c20 6461 7461 290d 0a0d 0a20 2020  a", data)....   
-0000e570: 2020 2020 2020 2020 2073 656c 662e 4173           self.As
-0000e580: 7365 744c 6973 744c 6566 742e 636c 6561  setListLeft.clea
-0000e590: 7228 290d 0a20 2020 2020 2020 2020 2020  r()..           
-0000e5a0: 2073 656c 662e 4c69 6162 696c 6974 794c   self.LiabilityL
-0000e5b0: 6973 744c 6566 742e 636c 6561 7228 290d  istLeft.clear().
-0000e5c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000e5d0: 662e 4c69 6162 696c 6974 794c 6973 7452  f.LiabilityListR
-0000e5e0: 6967 6874 2e63 6c65 6172 2829 0d0a 2020  ight.clear()..  
-0000e5f0: 2020 2020 2020 2020 2020 7365 6c66 2e41            self.A
-0000e600: 7373 6574 4c69 7374 5269 6768 742e 636c  ssetListRight.cl
-0000e610: 6561 7228 290d 0a20 2020 2020 2020 2020  ear()..         
-0000e620: 2020 2073 656c 662e 4571 7569 7479 4c69     self.EquityLi
-0000e630: 7374 4c65 6674 2e63 6c65 6172 2829 0d0a  stLeft.clear()..
-0000e640: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000e650: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
-0000e660: 2e63 6c65 6172 2829 0d0a 0d0a 2020 2020  .clear()....    
-0000e670: 2020 2020 2020 2020 7365 6c66 2e41 7373          self.Ass
-0000e680: 6574 4c69 7374 4c65 6674 2e73 6574 506c  etListLeft.setPl
-0000e690: 6169 6e54 6578 7428 6461 7461 5b22 6131  ainText(data["a1
-0000e6a0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
-0000e6b0: 2073 656c 662e 4173 7365 744c 6973 7452   self.AssetListR
-0000e6c0: 6967 6874 2e73 6574 506c 6169 6e54 6578  ight.setPlainTex
-0000e6d0: 7428 6461 7461 5b22 6132 225d 290d 0a20  t(data["a2"]).. 
-0000e6e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e6f0: 4c69 6162 696c 6974 794c 6973 744c 6566  LiabilityListLef
-0000e700: 742e 7365 7450 6c61 696e 5465 7874 2864  t.setPlainText(d
-0000e710: 6174 615b 226c 3122 5d29 2020 2320 2b64  ata["l1"])  # +d
-0000e720: 6174 615b 2265 3122 5d29 0d0a 2020 2020  ata["e1"])..    
-0000e730: 2020 2020 2020 2020 7365 6c66 2e4c 6961          self.Lia
-0000e740: 6269 6c69 7479 4c69 7374 5269 6768 742e  bilityListRight.
-0000e750: 7365 7450 6c61 696e 5465 7874 2864 6174  setPlainText(dat
-0000e760: 615b 226c 3222 5d29 2023 202b 6461 7461  a["l2"]) # +data
-0000e770: 5b22 6532 225d 290d 0a20 2020 2020 2020  ["e2"])..       
-0000e780: 2020 2020 2073 656c 662e 4571 7569 7479       self.Equity
-0000e790: 4c69 7374 4c65 6674 2e73 6574 506c 6169  ListLeft.setPlai
-0000e7a0: 6e54 6578 7428 6461 7461 5b22 6531 225d  nText(data["e1"]
-0000e7b0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000e7c0: 656c 662e 4571 7569 7479 4c69 7374 5269  elf.EquityListRi
-0000e7d0: 6768 742e 7365 7450 6c61 696e 5465 7874  ght.setPlainText
-0000e7e0: 2864 6174 615b 2265 3222 5d29 0d0a 0d0a  (data["e2"])....
-0000e7f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000e800: 2e61 6765 6e74 3145 6469 742e 7365 7454  .agent1Edit.setT
-0000e810: 6578 7428 6361 6d65 6c28 6461 7461 5b22  ext(camel(data["
-0000e820: 6167 656e 7431 225d 2929 2023 2e63 6170  agent1"])) #.cap
-0000e830: 6974 616c 697a 6528 2929 0d0a 2020 2020  italize())..    
-0000e840: 2020 2020 2020 2020 7365 6c66 2e61 6765          self.age
-0000e850: 6e74 3245 6469 742e 7365 7454 6578 7428  nt2Edit.setText(
-0000e860: 6361 6d65 6c28 6461 7461 5b22 6167 656e  camel(data["agen
-0000e870: 7432 225d 2929 2023 202e 6361 7069 7461  t2"])) # .capita
-0000e880: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
-0000e890: 2020 2020 2020 2073 656c 662e 7265 6769         self.regi
-0000e8a0: 7374 6572 466c 6f77 426f 782e 7365 7443  sterFlowBox.setC
-0000e8b0: 7572 7265 6e74 496e 6465 7828 7365 6c66  urrentIndex(self
-0000e8c0: 2e72 6567 6973 7465 7246 6c6f 7742 6f78  .registerFlowBox
-0000e8d0: 2e66 696e 6454 6578 7428 7374 7228 6461  .findText(str(da
-0000e8e0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
-0000e8f0: 696f 6e22 5d29 2929 0d0a 0d0a 2020 2020  ion"])))....    
-0000e900: 2020 2020 2020 2020 6361 7368 666c 6f77          cashflow
-0000e910: 3120 3d20 6461 7461 5b22 6361 7368 666c  1 = data["cashfl
-0000e920: 6f77 3122 5d20 6f72 2022 4e6f 6e65 220d  ow1"] or "None".
-0000e930: 0a20 2020 2020 2020 2020 2020 2063 6173  .            cas
-0000e940: 6866 6c6f 7732 203d 2064 6174 615b 2263  hflow2 = data["c
-0000e950: 6173 6866 6c6f 7732 225d 206f 7220 224e  ashflow2"] or "N
-0000e960: 6f6e 6522 0d0a 2020 2020 2020 2020 2020  one"..          
-0000e970: 2020 7365 6c66 2e63 6f6d 626f 4361 7368    self.comboCash
-0000e980: 4c65 6674 2e73 6574 4375 7272 656e 7449  Left.setCurrentI
-0000e990: 6e64 6578 2873 656c 662e 636f 6d62 6f43  ndex(self.comboC
-0000e9a0: 6173 684c 6566 742e 6669 6e64 5465 7874  ashLeft.findText
-0000e9b0: 2873 7472 2863 6173 6866 6c6f 7731 2929  (str(cashflow1))
-0000e9c0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000e9d0: 656c 662e 636f 6d62 6f43 6173 6852 6967  elf.comboCashRig
-0000e9e0: 6874 2e73 6574 4375 7272 656e 7449 6e64  ht.setCurrentInd
-0000e9f0: 6578 2873 656c 662e 636f 6d62 6f43 6173  ex(self.comboCas
-0000ea00: 6852 6967 6874 2e66 696e 6454 6578 7428  hRight.findText(
-0000ea10: 7374 7228 6361 7368 666c 6f77 3229 2929  str(cashflow2)))
-0000ea20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000ea30: 7472 7479 7065 203d 2064 6174 615b 226b  trtype = data["k
-0000ea40: 696e 6422 5d20 6f72 2022 4b41 2d3e 4b41  ind"] or "KA->KA
-0000ea50: 220d 0a20 2020 2020 2020 2020 2020 2073  "..            s
-0000ea60: 656c 662e 6564 6974 5479 7065 2e73 6574  elf.editType.set
-0000ea70: 4375 7272 656e 7449 6e64 6578 2873 656c  CurrentIndex(sel
-0000ea80: 662e 6564 6974 5479 7065 2e66 696e 6454  f.editType.findT
-0000ea90: 6578 7428 7374 7228 7472 7479 7065 2929  ext(str(trtype))
-0000eaa0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000eab0: 2069 6373 3120 3d20 6461 7461 5b22 696e   ics1 = data["in
-0000eac0: 636f 6d65 3122 5d20 6f72 2022 4e6f 6e65  come1"] or "None
-0000ead0: 220d 0a20 2020 2020 2020 2020 2020 2069  "..            i
-0000eae0: 6373 3220 3d20 6461 7461 5b22 696e 636f  cs2 = data["inco
-0000eaf0: 6d65 3222 5d20 6f72 2022 4e6f 6e65 220d  me2"] or "None".
-0000eb00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000eb10: 662e 636f 6d62 6f49 6e63 6f6d 654c 6566  f.comboIncomeLef
-0000eb20: 742e 7365 7443 7572 7265 6e74 496e 6465  t.setCurrentInde
-0000eb30: 7828 7365 6c66 2e63 6f6d 626f 496e 636f  x(self.comboInco
-0000eb40: 6d65 4c65 6674 2e66 696e 6454 6578 7428  meLeft.findText(
-0000eb50: 6963 7331 2929 0d0a 2020 2020 2020 2020  ics1))..        
-0000eb60: 2020 2020 7365 6c66 2e63 6f6d 626f 496e      self.comboIn
-0000eb70: 636f 6d65 5269 6768 742e 7365 7443 7572  comeRight.setCur
-0000eb80: 7265 6e74 496e 6465 7828 7365 6c66 2e63  rentIndex(self.c
-0000eb90: 6f6d 626f 496e 636f 6d65 5269 6768 742e  omboIncomeRight.
-0000eba0: 6669 6e64 5465 7874 2869 6373 3229 290d  findText(ics2)).
-0000ebb0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-0000ebc0: 656c 662e 6564 6974 5175 616e 7469 7479  elf.editQuantity
-0000ebd0: 2e73 6574 5465 7874 2864 6174 615b 2271  .setText(data["q
-0000ebe0: 7561 6e74 6974 7922 5d29 0d0a 2020 2020  uantity"])..    
-0000ebf0: 2020 2020 2020 2020 7365 6c66 2e65 6469          self.edi
-0000ec00: 7453 7562 6a65 6374 2e73 6574 5465 7874  tSubject.setText
-0000ec10: 2864 6174 615b 2273 7562 6a65 6374 225d  (data["subject"]
-0000ec20: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000ec30: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-0000ec40: 2e68 6967 686c 6967 6874 5f63 6f6e 6e65  .highlight_conne
-0000ec50: 6374 6f72 2864 6174 615b 2273 686f 7274  ctor(data["short
-0000ec60: 6e61 6d65 225d 290d 0a0d 0a20 2020 2020  name"])....     
-0000ec70: 2020 2020 2020 2069 6620 2264 6573 6372         if "descr
-0000ec80: 6970 7469 6f6e 2220 696e 2064 6174 613a  iption" in data:
-0000ec90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000eca0: 2020 7365 6c66 2e65 6469 7444 6573 6372    self.editDescr
-0000ecb0: 6970 7469 6f6e 2e73 6574 5465 7874 2864  iption.setText(d
-0000ecc0: 6174 615b 2264 6573 6372 6970 7469 6f6e  ata["description
-0000ecd0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
-0000ece0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0000ecf0: 2020 2020 2020 2020 7365 6c66 2e65 6469          self.edi
-0000ed00: 7444 6573 6372 6970 7469 6f6e 2e73 6574  tDescription.set
-0000ed10: 5465 7874 2822 2229 0d0a 2020 2020 2020  Text("")..      
-0000ed20: 2020 2020 2020 7365 6c66 2e65 6469 7453        self.editS
-0000ed30: 686f 7274 6e61 6d65 2e73 6574 5465 7874  hortname.setText
-0000ed40: 2864 6174 615b 2273 686f 7274 6e61 6d65  (data["shortname
-0000ed50: 225d 290d 0a0d 0a20 2020 2020 2020 2020  "])....         
-0000ed60: 2020 2075 6e69 6469 7220 3d20 7374 7228     unidir = str(
-0000ed70: 6461 7461 5b22 756e 692d 6469 7265 6374  data["uni-direct
-0000ed80: 696f 6e61 6c22 5d29 206f 7220 224e 6f6e  ional"]) or "Non
-0000ed90: 6522 0d0a 2020 2020 2020 2020 2020 2020  e"..            
-0000eda0: 7365 6c66 2e63 6f6d 626f 556e 6964 6972  self.comboUnidir
-0000edb0: 2e73 6574 4375 7272 656e 7449 6e64 6578  .setCurrentIndex
-0000edc0: 2873 656c 662e 636f 6d62 6f55 6e69 6469  (self.comboUnidi
-0000edd0: 722e 6669 6e64 5465 7874 2875 6e69 6469  r.findText(unidi
-0000ede0: 7229 290d 0a0d 0a20 2020 2020 2020 2065  r))....        e
-0000edf0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-0000ee00: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-0000ee10: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
-0000ee20: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
-0000ee30: 6f72 2229 0d0a 0d0a 2020 2020 2020 2020  or")....        
-0000ee40: 7365 6c66 2e6d 6164 655f 6368 616e 6765  self.made_change
-0000ee50: 7320 3d20 4661 6c73 650d 0a0d 0a20 2020  s = False....   
-0000ee60: 2064 6566 2075 7064 6174 655f 6461 7461   def update_data
-0000ee70: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0000ee80: 2069 6620 7365 6c66 2e73 656c 6563 7469   if self.selecti
-0000ee90: 6f6e 5f69 6478 2069 7320 4e6f 6e65 3a0d  on_idx is None:.
-0000eea0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000eeb0: 7572 6e0d 0a0d 0a20 2020 2020 2020 2073  urn....        s
-0000eec0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000eed0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000eee0: 785d 5b22 6131 225d 203d 2073 656c 662e  x]["a1"] = self.
-0000eef0: 4173 7365 744c 6973 744c 6566 742e 746f  AssetListLeft.to
-0000ef00: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
-0000ef10: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
-0000ef20: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000ef30: 696f 6e5f 6964 785d 5b22 6132 225d 203d  ion_idx]["a2"] =
-0000ef40: 2073 656c 662e 4173 7365 744c 6973 7452   self.AssetListR
-0000ef50: 6967 6874 2e74 6f50 6c61 696e 5465 7874  ight.toPlainText
-0000ef60: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-0000ef70: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000ef80: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000ef90: 226c 3122 5d20 3d20 7365 6c66 2e4c 6961  "l1"] = self.Lia
-0000efa0: 6269 6c69 7479 4c69 7374 4c65 6674 2e74  bilityListLeft.t
-0000efb0: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
-0000efc0: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000efd0: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
-0000efe0: 7469 6f6e 5f69 6478 5d5b 226c 3222 5d20  tion_idx]["l2"] 
-0000eff0: 3d20 7365 6c66 2e4c 6961 6269 6c69 7479  = self.Liability
-0000f000: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
-0000f010: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
-0000f020: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000f030: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
-0000f040: 6964 785d 5b22 6531 225d 203d 2073 656c  idx]["e1"] = sel
-0000f050: 662e 4571 7569 7479 4c69 7374 4c65 6674  f.EquityListLeft
-0000f060: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
-0000f070: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-0000f080: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
-0000f090: 6563 7469 6f6e 5f69 6478 5d5b 2265 3222  ection_idx]["e2"
-0000f0a0: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
-0000f0b0: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
-0000f0c0: 5465 7874 2829 0d0a 0d0a 2020 2020 2020  Text()....      
-0000f0d0: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-0000f0e0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000f0f0: 5f69 6478 5d5b 2261 3122 5d20 203d 2073  _idx]["a1"]  = s
-0000f100: 656c 662e 4173 7365 744c 6973 744c 6566  elf.AssetListLef
-0000f110: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
-0000f120: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-0000f130: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-0000f140: 6c65 6374 696f 6e5f 6964 785d 5b22 6132  lection_idx]["a2
-0000f150: 225d 203d 2073 656c 662e 4173 7365 744c  "] = self.AssetL
-0000f160: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
-0000f170: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
-0000f180: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
-0000f190: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
-0000f1a0: 6478 5d5b 226c 3122 5d20 203d 2073 656c  dx]["l1"]  = sel
-0000f1b0: 662e 4c69 6162 696c 6974 794c 6973 744c  f.LiabilityListL
-0000f1c0: 6566 742e 746f 506c 6169 6e54 6578 7428  eft.toPlainText(
-0000f1d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000f1e0: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
-0000f1f0: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
-0000f200: 6c32 225d 2020 3d20 7365 6c66 2e4c 6961  l2"]  = self.Lia
-0000f210: 6269 6c69 7479 4c69 7374 5269 6768 742e  bilityListRight.
-0000f220: 746f 506c 6169 6e54 6578 7428 290d 0a20  toPlainText().. 
-0000f230: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000f240: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
-0000f250: 6374 696f 6e5f 6964 785d 5b22 6531 225d  ction_idx]["e1"]
-0000f260: 2020 3d20 7365 6c66 2e45 7175 6974 794c    = self.EquityL
-0000f270: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
-0000f280: 6578 7428 290d 0a20 2020 2020 2020 2073  ext()..        s
-0000f290: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000f2a0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000f2b0: 785d 5b22 6532 225d 2020 3d20 7365 6c66  x]["e2"]  = self
-0000f2c0: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
-0000f2d0: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
-0000f2e0: 0d0a 2020 2020 2020 2020 6f6e 6c79 5f72  ..        only_r
-0000f2f0: 656e 616d 6520 3d20 5472 7565 0d0a 2020  ename = True..  
-0000f300: 2020 2020 2020 6966 2073 656c 662e 656e        if self.en
-0000f310: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-0000f320: 6c65 6374 696f 6e5f 6964 785d 5b22 6167  lection_idx]["ag
-0000f330: 656e 7431 225d 2020 213d 2073 656c 662e  ent1"]  != self.
-0000f340: 6167 656e 7431 4564 6974 2e74 6578 7428  agent1Edit.text(
-0000f350: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000f360: 6f6e 6c79 5f72 656e 616d 6520 3d20 4661  only_rename = Fa
-0000f370: 6c73 650d 0a20 2020 2020 2020 2069 6620  lse..        if 
-0000f380: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
-0000f390: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
-0000f3a0: 6478 5d5b 2261 6765 6e74 3222 5d20 2021  dx]["agent2"]  !
-0000f3b0: 3d73 656c 662e 6167 656e 7432 4564 6974  =self.agent2Edit
-0000f3c0: 2e74 6578 7428 293a 0d0a 2020 2020 2020  .text():..      
-0000f3d0: 2020 2020 2020 6f6e 6c79 5f72 656e 616d        only_renam
-0000f3e0: 6520 3d20 4661 6c73 650d 0a0d 0a0d 0a20  e = False...... 
-0000f3f0: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-0000f400: 6c66 2e64 7261 7763 616e 7661 732e 6368  lf.drawcanvas.ch
-0000f410: 6563 6b5f 6578 6973 7428 7365 6c66 2e61  eck_exist(self.a
-0000f420: 6765 6e74 3145 6469 742e 7465 7874 2829  gent1Edit.text()
-0000f430: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000f440: 6966 2073 656c 662e 6167 656e 7431 4564  if self.agent1Ed
-0000f450: 6974 2e74 6578 7428 292e 7374 7269 7028  it.text().strip(
-0000f460: 2920 213d 2022 223a 0d0a 2020 2020 2020  ) != "":..      
-0000f470: 2020 2020 2020 2020 2020 7965 7320 3d20            yes = 
-0000f480: 7365 6c66 2e61 736b 5f71 7565 7374 696f  self.ask_questio
-0000f490: 6e28 2727 2c22 5468 6520 6167 656e 7420  n('',"The agent 
-0000f4a0: 2573 2064 6f65 7320 6e6f 7420 6578 6973  %s does not exis
-0000f4b0: 742e 5c6e 446f 2079 6f75 2077 6973 6820  t.\nDo you wish 
-0000f4c0: 746f 2063 6f6e 7469 6e75 6520 616e 6420  to continue and 
-0000f4d0: 6175 746f 6d61 7469 6361 6c6c 7920 6372  automatically cr
-0000f4e0: 6561 7465 2061 206e 6577 2061 6765 6e74  eate a new agent
-0000f4f0: 3f22 2573 656c 662e 6167 656e 7431 4564  ?"%self.agent1Ed
-0000f500: 6974 2e74 6578 7428 2929 0d0a 2020 2020  it.text())..    
-0000f510: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0000f520: 6f74 2079 6573 3a0d 0a20 2020 2020 2020  ot yes:..       
-0000f530: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0000f540: 7572 6e0d 0a0d 0a20 2020 2020 2020 2069  urn....        i
-0000f550: 6620 6e6f 7420 7365 6c66 2e64 7261 7763  f not self.drawc
-0000f560: 616e 7661 732e 6368 6563 6b5f 6578 6973  anvas.check_exis
-0000f570: 7428 7365 6c66 2e61 6765 6e74 3245 6469  t(self.agent2Edi
-0000f580: 742e 7465 7874 2829 293a 0d0a 2020 2020  t.text()):..    
-0000f590: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000f5a0: 6167 656e 7432 4564 6974 2e74 6578 7428  agent2Edit.text(
-0000f5b0: 292e 7374 7269 7028 2920 213d 2022 223a  ).strip() != "":
-0000f5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f5d0: 2020 7965 7320 3d20 7365 6c66 2e61 736b    yes = self.ask
-0000f5e0: 5f71 7565 7374 696f 6e28 2727 2c22 5468  _question('',"Th
-0000f5f0: 6520 6167 656e 7420 2573 2064 6f65 7320  e agent %s does 
-0000f600: 6e6f 7420 6578 6973 742e 5c6e 446f 2079  not exist.\nDo y
-0000f610: 6f75 2077 6973 6820 746f 2063 6f6e 7469  ou wish to conti
-0000f620: 6e75 6520 616e 6420 6175 746f 6d61 7469  nue and automati
-0000f630: 6361 6c6c 7920 6372 6561 7465 2061 206e  cally create a n
-0000f640: 6577 2061 6765 6e74 3f22 2573 656c 662e  ew agent?"%self.
-0000f650: 6167 656e 7432 4564 6974 2e74 6578 7428  agent2Edit.text(
-0000f660: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000f670: 2020 2020 6966 206e 6f74 2079 6573 3a0d      if not yes:.
-0000f680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f690: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-0000f6a0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000f6b0: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
-0000f6c0: 6374 696f 6e5f 6964 785d 5b22 6167 656e  ction_idx]["agen
-0000f6d0: 7431 225d 2020 3d20 6361 6d65 6c28 7365  t1"]  = camel(se
-0000f6e0: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
-0000f6f0: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
-0000f700: 7a65 2829 2023 2075 7070 6572 2062 6563  ze() # upper bec
-0000f710: 6175 7365 2061 6765 6e74 7320 6172 6520  ause agents are 
-0000f720: 616c 7761 7973 2075 7070 6572 6361 7365  always uppercase
-0000f730: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
-0000f740: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
-0000f750: 656c 6563 7469 6f6e 5f69 6478 5d5b 2261  election_idx]["a
-0000f760: 6765 6e74 3222 5d20 203d 2063 616d 656c  gent2"]  = camel
-0000f770: 2873 656c 662e 6167 656e 7432 4564 6974  (self.agent2Edit
-0000f780: 2e74 6578 7428 2929 2023 2e63 6170 6974  .text()) #.capit
-0000f790: 616c 697a 6528 290d 0a0d 0a20 2020 2020  alize()....     
-0000f7a0: 2020 2073 656c 662e 6167 656e 7431 4564     self.agent1Ed
-0000f7b0: 6974 2e73 6574 5465 7874 2863 616d 656c  it.setText(camel
-0000f7c0: 2873 656c 662e 6167 656e 7431 4564 6974  (self.agent1Edit
-0000f7d0: 2e74 6578 7428 2929 2920 232e 6361 7069  .text())) #.capi
-0000f7e0: 7461 6c69 7a65 2829 290d 0a20 2020 2020  talize())..     
-0000f7f0: 2020 2073 656c 662e 6167 656e 7432 4564     self.agent2Ed
-0000f800: 6974 2e73 6574 5465 7874 2863 616d 656c  it.setText(camel
-0000f810: 2873 656c 662e 6167 656e 7432 4564 6974  (self.agent2Edit
-0000f820: 2e74 6578 7428 2929 2920 232e 6361 7069  .text())) #.capi
-0000f830: 7461 6c69 7a65 2829 290d 0a0d 0a20 2020  talize())....   
-0000f840: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
-0000f850: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000f860: 696f 6e5f 6964 785d 5b22 756e 692d 6469  ion_idx]["uni-di
-0000f870: 7265 6374 696f 6e61 6c22 5d20 3d20 5c0d  rectional"] = \.
-0000f880: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
-0000f890: 2873 656c 662e 636f 6d62 6f55 6e69 6469  (self.comboUnidi
-0000f8a0: 722e 6375 7272 656e 7454 6578 7428 2929  r.currentText())
-0000f8b0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-0000f8c0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000f8d0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000f8e0: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
-0000f8f0: 225d 203d 5c0d 0a20 2020 2020 2020 2020  "] =\..         
-0000f900: 2020 2073 7472 2873 656c 662e 7265 6769     str(self.regi
-0000f910: 7374 6572 466c 6f77 426f 782e 6375 7272  sterFlowBox.curr
-0000f920: 656e 7454 6578 7428 2929 0d0a 0d0a 2020  entText())....  
-0000f930: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000f940: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
-0000f950: 7469 6f6e 5f69 6478 5d5b 2263 6173 6866  tion_idx]["cashf
-0000f960: 6c6f 7731 225d 203d 205c 0d0a 2020 2020  low1"] = \..    
-0000f970: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0000f980: 2e63 6f6d 626f 4361 7368 4c65 6674 2e63  .comboCashLeft.c
-0000f990: 7572 7265 6e74 5465 7874 2829 290d 0a20  urrentText()).. 
-0000f9a0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000f9b0: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
-0000f9c0: 6374 696f 6e5f 6964 785d 5b22 6361 7368  ction_idx]["cash
-0000f9d0: 666c 6f77 3222 5d20 3d20 5c0d 0a20 2020  flow2"] = \..   
-0000f9e0: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
-0000f9f0: 662e 636f 6d62 6f43 6173 6852 6967 6874  f.comboCashRight
-0000fa00: 2e63 7572 7265 6e74 5465 7874 2829 290d  .currentText()).
-0000fa10: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-0000fa20: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
-0000fa30: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
-0000fa40: 6b69 6e64 225d 203d 205c 0d0a 2020 2020  kind"] = \..    
-0000fa50: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0000fa60: 2e65 6469 7454 7970 652e 6375 7272 656e  .editType.curren
-0000fa70: 7454 6578 7428 2929 0d0a 0d0a 2020 2020  tText())....    
-0000fa80: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-0000fa90: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
-0000faa0: 6f6e 5f69 6478 5d5b 2269 6e63 6f6d 6531  on_idx]["income1
-0000fab0: 225d 203d 205c 0d0a 2020 2020 2020 2020  "] = \..        
-0000fac0: 2020 2020 7374 7228 7365 6c66 2e63 6f6d      str(self.com
-0000fad0: 626f 496e 636f 6d65 4c65 6674 2e63 7572  boIncomeLeft.cur
-0000fae0: 7265 6e74 5465 7874 2829 290d 0a20 2020  rentText())..   
-0000faf0: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
-0000fb00: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000fb10: 696f 6e5f 6964 785d 5b22 696e 636f 6d65  ion_idx]["income
-0000fb20: 3222 5d20 3d20 5c0d 0a20 2020 2020 2020  2"] = \..       
-0000fb30: 2020 2020 2073 7472 2873 656c 662e 636f       str(self.co
-0000fb40: 6d62 6f49 6e63 6f6d 6552 6967 6874 2e63  mboIncomeRight.c
-0000fb50: 7572 7265 6e74 5465 7874 2829 290d 0a0d  urrentText())...
-0000fb60: 0a0d 0a20 2020 2020 2020 2069 6620 6f6e  ...        if on
-0000fb70: 6c79 5f72 656e 616d 653a 0d0a 0d0a 2020  ly_rename:....  
-0000fb80: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
-0000fb90: 7261 7763 616e 7661 732e 7265 6e61 6d65  rawcanvas.rename
-0000fba0: 5f63 6f6e 6e65 6374 696f 6e28 7365 6c66  _connection(self
-0000fbb0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000fbc0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000fbd0: 2273 686f 7274 6e61 6d65 225d 202c 2073  "shortname"] , s
-0000fbe0: 7472 2873 656c 662e 6564 6974 5368 6f72  tr(self.editShor
-0000fbf0: 746e 616d 652e 7465 7874 2829 2929 0d0a  tname.text()))..
-0000fc00: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-0000fc10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000fc20: 662e 6472 6177 6361 6e76 6173 2e72 656d  f.drawcanvas.rem
-0000fc30: 6f76 655f 636f 6e6e 6563 7469 6f6e 2873  ove_connection(s
-0000fc40: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000fc50: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000fc60: 785d 5b22 7368 6f72 746e 616d 6522 5d29  x]["shortname"])
-0000fc70: 2023 2c20 7374 7228 7365 6c66 2e65 6469   #, str(self.edi
-0000fc80: 7453 7562 6a65 6374 2e74 6578 7428 2929  tSubject.text())
-0000fc90: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000fca0: 2062 6f78 3120 3d20 7365 6c66 2e64 7261   box1 = self.dra
-0000fcb0: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
-0000fcc0: 7428 7365 6c66 2e65 6e74 7279 5f64 6174  t(self.entry_dat
-0000fcd0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000fce0: 5f69 6478 5d5b 2261 6765 6e74 3122 5d29  _idx]["agent1"])
-0000fcf0: 0d0a 2020 2020 2020 2020 2020 2020 626f  ..            bo
-0000fd00: 7832 203d 2073 656c 662e 6472 6177 6361  x2 = self.drawca
-0000fd10: 6e76 6173 2e61 6464 5f61 6765 6e74 2873  nvas.add_agent(s
-0000fd20: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000fd30: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000fd40: 785d 5b22 6167 656e 7432 225d 290d 0a0d  x]["agent2"])...
-0000fd50: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
-0000fd60: 795f 6974 656d 7320 3d20 5b5d 0d0a 2020  y_items = []..  
-0000fd70: 2020 2020 2020 2020 2020 6461 7461 203d            data =
-0000fd80: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000fd90: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
-0000fda0: 6964 785d 0d0a 0d0a 2020 2020 2020 2020  idx]....        
-0000fdb0: 2020 2020 616c 6c65 6e74 7269 6573 203d      allentries =
-0000fdc0: 2022 5c6e 222e 6a6f 696e 285b 6461 7461   "\n".join([data
-0000fdd0: 5b22 6c31 225d 2c20 6461 7461 5b22 6131  ["l1"], data["a1
-0000fde0: 225d 2c20 6461 7461 5b22 6531 225d 2c20  "], data["e1"], 
-0000fdf0: 6461 7461 5b22 6c32 225d 2c20 6461 7461  data["l2"], data
-0000fe00: 5b22 6132 225d 2c20 6461 7461 5b22 6532  ["a2"], data["e2
-0000fe10: 225d 5d29 0d0a 2020 2020 2020 2020 2020  "]])..          
-0000fe20: 2020 666f 7220 7375 625f 6974 656d 2069    for sub_item i
-0000fe30: 6e20 616c 6c65 6e74 7269 6573 2e73 706c  n allentries.spl
-0000fe40: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
-0000fe50: 2020 2020 2020 2020 2020 2066 6f72 2073             for s
-0000fe60: 7562 5f65 6e74 7279 2069 6e20 7375 625f  ub_entry in sub_
-0000fe70: 6974 656d 2e73 706c 6974 2822 5c6e 2229  item.split("\n")
-0000fe80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000fe90: 2020 2020 2020 2065 6e74 7279 203d 2073         entry = s
-0000fea0: 7562 5f65 6e74 7279 2e72 6570 6c61 6365  ub_entry.replace
-0000feb0: 2822 2d22 2c22 2229 2e72 6570 6c61 6365  ("-","").replace
-0000fec0: 2822 2b22 2c22 2229 2e73 7472 6970 2829  ("+","").strip()
-0000fed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000fee0: 2020 2020 2020 6966 2065 6e74 7279 2021        if entry !
-0000fef0: 3d20 2022 223a 0d0a 2020 2020 2020 2020  =  "":..        
-0000ff00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ff10: 6d79 5f69 7465 6d73 2e61 7070 656e 6428  my_items.append(
-0000ff20: 656e 7472 7929 0d0a 0d0a 0d0a 2020 2020  entry)......    
-0000ff30: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
-0000ff40: 7763 616e 7661 732e 6164 645f 636f 6e6e  wcanvas.add_conn
-0000ff50: 6563 7469 6f6e 2862 6f78 312c 626f 7832  ection(box1,box2
-0000ff60: 2c20 7374 7228 7365 6c66 2e65 6469 7453  , str(self.editS
-0000ff70: 686f 7274 6e61 6d65 2e74 6578 7428 2929  hortname.text())
-0000ff80: 2c73 7562 6a65 6374 3d73 656c 662e 6564  ,subject=self.ed
-0000ff90: 6974 5375 626a 6563 742e 7465 7874 2829  itSubject.text()
-0000ffa0: 2c69 7465 6d73 3d6d 795f 6974 656d 7329  ,items=my_items)
-0000ffb0: 0d0a 0d0a 0d0a 2020 2020 2020 2020 7365  ......        se
-0000ffc0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-0000ffd0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0000ffe0: 5d5b 2271 7561 6e74 6974 7922 5d20 3d20  ]["quantity"] = 
-0000fff0: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
-00010000: 7472 2873 656c 662e 6564 6974 5175 616e  tr(self.editQuan
-00010010: 7469 7479 2e74 6578 7428 2929 0d0a 0d0a  tity.text())....
-00010020: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
-00010030: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
-00010040: 656c 6563 7469 6f6e 5f69 6478 5d5b 2273  election_idx]["s
-00010050: 7562 6a65 6374 225d 203d 205c 0d0a 2020  ubject"] = \..  
-00010060: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
-00010070: 6c66 2e65 6469 7453 7562 6a65 6374 2e74  lf.editSubject.t
-00010080: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
-00010090: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-000100a0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-000100b0: 5f69 6478 5d5b 2273 686f 7274 6e61 6d65  _idx]["shortname
-000100c0: 225d 203d 205c 0d0a 2020 2020 2020 2020  "] = \..        
-000100d0: 2020 2020 7374 7228 7365 6c66 2e65 6469      str(self.edi
-000100e0: 7453 686f 7274 6e61 6d65 2e74 6578 7428  tShortname.text(
-000100f0: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
-00010100: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-00010110: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-00010120: 5d5b 2264 6573 6372 6970 7469 6f6e 225d  ]["description"]
-00010130: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
-00010140: 2020 7374 7228 7365 6c66 2e65 6469 7444    str(self.editD
-00010150: 6573 6372 6970 7469 6f6e 2e74 6578 7428  escription.text(
-00010160: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
-00010170: 6c66 2e75 7064 6174 655f 7461 626c 6528  lf.update_table(
-00010180: 290d 0a0d 0a20 2020 2020 2020 2070 7269  )....        pri
-00010190: 6e74 2822 6461 7461 2063 6861 6e67 6564  nt("data changed
-000101a0: 2e22 290d 0a0d 0a20 2020 2020 2020 2073  .")....        s
-000101b0: 656c 662e 6d61 6465 5f63 6861 6e67 6573  elf.made_changes
-000101c0: 203d 2046 616c 7365 0d0a 0d0a 2020 2020   = False....    
-000101d0: 2020 2020 7365 6c66 2e72 6f77 5f73 656c      self.row_sel
-000101e0: 6563 7428 7365 6c66 2e73 656c 6563 7469  ect(self.selecti
-000101f0: 6f6e 5f69 6478 290d 0a0d 0a20 2020 2020  on_idx)....     
-00010200: 2020 2023 2073 656c 662e 7564 7061 7465     # self.udpate
-00010210: 4275 7474 6f6e 2e73 6574 5465 7874 2822  Button.setText("
-00010220: 5570 6461 7465 2056 616c 7565 7322 290d  Update Values").
-00010230: 0a0d 0a20 2020 2064 6566 2073 6176 6528  ...    def save(
-00010240: 7365 6c66 293a 0d0a 0d0a 2020 2020 2020  self):....      
-00010250: 2020 7472 793a 0d0a 0d0a 0d0a 2020 2020    try:......    
-00010260: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-00010270: 203d 2073 656c 662e 6375 7272 656e 745f   = self.current_
-00010280: 6669 6c65 2023 2073 7461 7475 7342 6172  file # statusBar
-00010290: 2829 2e63 7572 7265 6e74 4d65 7373 6167  ().currentMessag
-000102a0: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-000102b0: 2073 656c 662e 6c61 6265 6c5f 666e 616d   self.label_fnam
-000102c0: 652e 7365 7454 6578 7428 6669 6c65 6e61  e.setText(filena
-000102d0: 6d65 290d 0a0d 0a20 2020 2020 2020 2020  me)....         
-000102e0: 2020 2069 6620 6669 6c65 6e61 6d65 2069     if filename i
-000102f0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a0d 0a20  s not None:.... 
-00010300: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00010310: 656c 662e 7361 7665 6173 2866 696c 656e  elf.saveas(filen
-00010320: 616d 6529 0d0a 0d0a 2020 2020 2020 2020  ame)....        
-00010330: 2020 2020 2020 2020 2320 544f 444f 206d          # TODO m
-00010340: 6179 6265 2062 6163 6b75 7028 3f29 0d0a  aybe backup(?)..
-00010350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010360: 2320 7365 6c66 2e6e 6f74 6966 7928 2246  # self.notify("F
-00010370: 696c 6520 7361 7665 6420 756e 6465 7220  ile saved under 
-00010380: 2573 2220 2520 6669 6c65 6e61 6d65 2c74  %s" % filename,t
-00010390: 6974 6c65 3d22 4f6b 2229 0d0a 2020 2020  itle="Ok")..    
-000103a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000103b0: 7428 2246 494c 4520 5341 5645 4421 2229  t("FILE SAVED!")
-000103c0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-000103d0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-000103e0: 2020 2020 2073 656c 662e 7361 7665 5f64       self.save_d
-000103f0: 6c67 2829 0d0a 0d0a 2020 2020 2020 2020  lg()....        
-00010400: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00010410: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-00010420: 2020 2020 6966 2066 696c 656e 616d 6520      if filename 
-00010430: 213d 2022 223a 0d0a 2020 2020 2020 2020  != "":..        
-00010440: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00010450: 6966 7928 7374 7228 6529 2c74 6974 6c65  ify(str(e),title
-00010460: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a0d  ="Error").......
-00010470: 0a20 2020 2064 6566 2073 6176 655f 646c  .    def save_dl
-00010480: 6728 7365 6c66 293a 0d0a 2020 2020 2020  g(self):..      
-00010490: 2020 7472 793a 0d0a 0d0a 2020 2020 2020    try:....      
-000104a0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
-000104b0: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
-000104c0: 5361 7665 4669 6c65 4e61 6d65 2873 656c  SaveFileName(sel
-000104d0: 662c 2027 5361 7665 2066 696c 6527 2c0d  f, 'Save file',.
-000104e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000104f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010510: 6f73 2e67 6574 6377 6428 292c 2022 6174  os.getcwd(), "at
-00010520: 7475 6e65 2046 696c 6573 2028 2a2e 7366  tune Files (*.sf
-00010530: 6374 6c29 2229 5b30 5d0d 0a20 2020 2020  ctl)")[0]..     
-00010540: 2020 2020 2020 2073 656c 662e 7374 6174         self.stat
-00010550: 7573 4261 7228 292e 7368 6f77 4d65 7373  usBar().showMess
-00010560: 6167 6528 2253 6176 6564 2066 696c 6520  age("Saved file 
-00010570: 2220 2b20 6669 6c65 6e61 6d65 290d 0a0d  " + filename)...
-00010580: 0a20 2020 2020 2020 2020 2020 2063 7572  .            cur
-00010590: 7265 6e74 5f66 696c 655f 6261 636b 7570  rent_file_backup
-000105a0: 203d 2073 656c 662e 6375 7272 656e 745f   = self.current_
-000105b0: 6669 6c65 0d0a 0d0a 2020 2020 2020 2020  file....        
-000105c0: 2020 2020 6966 2066 696c 656e 616d 6520      if filename 
-000105d0: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
-000105e0: 6669 6c65 6e61 6d65 2021 3d20 2222 3a0d  filename != "":.
-000105f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010600: 2073 656c 662e 6c61 6265 6c5f 666e 616d   self.label_fnam
-00010610: 652e 7365 7454 6578 7428 6669 6c65 6e61  e.setText(filena
-00010620: 6d65 290d 0a0d 0a20 2020 2020 2020 2020  me)....         
-00010630: 2020 2020 2020 2073 656c 662e 6375 7272         self.curr
-00010640: 656e 745f 6669 6c65 203d 2066 696c 656e  ent_file = filen
-00010650: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
-00010660: 2020 2020 2073 656c 662e 7361 7665 6173       self.saveas
-00010670: 2866 696c 656e 616d 6529 0d0a 0d0a 2020  (filename)....  
-00010680: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
-00010690: 206d 6179 6265 2062 6163 6b75 7028 3f29   maybe backup(?)
-000106a0: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
-000106b0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-000106c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000106d0: 7365 6c66 2e6e 6f74 6966 7928 2243 6f75  self.notify("Cou
-000106e0: 6c64 206e 6f74 2073 6176 6520 7072 6f6a  ld not save proj
-000106f0: 6563 742e 222c 7469 746c 653d 2245 7272  ect.",title="Err
-00010700: 6f72 2229 0d0a 2020 2020 2020 2020 2020  or")..          
-00010710: 2020 7365 6c66 2e63 7572 7265 6e74 5f66    self.current_f
-00010720: 696c 6520 3d20 6375 7272 656e 745f 6669  ile = current_fi
-00010730: 6c65 5f62 6163 6b75 700d 0a0d 0a0d 0a20  le_backup...... 
-00010740: 2020 2064 6566 2073 6176 6561 7328 7365     def saveas(se
-00010750: 6c66 2c66 696c 656e 616d 6529 3a0d 0a0d  lf,filename):...
-00010760: 0a20 2020 2020 2020 2066 7468 656d 6520  .        ftheme 
-00010770: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00010780: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00010790: 2020 6674 6865 6d65 203d 2066 696c 656e    ftheme = filen
-000107a0: 616d 655b 3a2d 355d 2b22 7366 6374 6865  ame[:-5]+"sfcthe
-000107b0: 6d65 2220 2320 6162 736f 6c75 7465 2066  me" # absolute f
-000107c0: 696c 6520 7061 7468 0d0a 2020 2020 2020  ile path..      
-000107d0: 2020 2020 2020 666f 6c64 6572 2c66 7468        folder,fth
-000107e0: 656d 6520 3d20 6f73 2e70 6174 682e 7370  eme = os.path.sp
-000107f0: 6c69 7428 6674 6865 6d65 2920 2320 636f  lit(ftheme) # co
-00010800: 6e76 6572 7420 746f 2072 656c 6174 6976  nvert to relativ
-00010810: 6520 6669 6c65 2070 6174 680d 0a20 2020  e file path..   
-00010820: 2020 2020 2020 2020 2073 656c 662e 7468           self.th
-00010830: 656d 655f 6d61 6e61 6765 722e 7361 7665  eme_manager.save
-00010840: 5f63 6f6c 6f72 7328 6674 6865 6d65 290d  _colors(ftheme).
-00010850: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-00010860: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00010870: 6c66 2e6e 6f74 6966 7928 2243 6f75 6c64  lf.notify("Could
-00010880: 206e 6f74 2073 6176 6520 636f 6c6f 7220   not save color 
-00010890: 7468 656d 652e 2070 726f 6365 6564 696e  theme. proceedin
-000108a0: 6720 7769 7468 6f75 7422 2c74 6974 6c65  g without",title
-000108b0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
-000108c0: 2020 2020 2020 2023 2064 7261 7763 616e         # drawcan
-000108d0: 7661 7320 636f 6465 5f64 6174 610d 0a20  vas code_data.. 
-000108e0: 2020 2020 2020 2063 6f64 655f 6461 7461         code_data
-000108f0: 203d 207b 7d0d 0a20 2020 2020 2020 2066   = {}..        f
-00010900: 6f72 206b 2c76 2069 6e20 7365 6c66 2e64  or k,v in self.d
-00010910: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
-00010920: 6174 612e 6974 656d 7328 293a 0d0a 2020  ata.items():..  
-00010930: 2020 2020 2020 2020 2020 636f 6465 5f64            code_d
-00010940: 6174 615b 6b5d 203d 2073 7472 2876 2e65  ata[k] = str(v.e
-00010950: 6e63 6f64 6528 2275 7466 2d38 2229 2e64  ncode("utf-8").d
-00010960: 6563 6f64 6528 2763 7031 3235 3227 2929  ecode('cp1252'))
-00010970: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00010980: 6669 7820 736f 6d65 2070 6f74 656e 7469  fix some potenti
-00010990: 616c 2065 6e63 6f64 696e 6720 6572 726f  al encoding erro
-000109a0: 7273 0d0a 0d0a 2020 2020 2020 2020 7472  rs....        tr
-000109b0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-000109c0: 7072 696e 7428 2246 494c 454e 414d 4522  print("FILENAME"
-000109d0: 2c20 6669 6c65 6e61 6d65 290d 0a0d 0a20  , filename).... 
-000109e0: 2020 2020 2020 2020 2020 2023 206c 6f61             # loa
-000109f0: 6420 656e 7472 6965 7320 696e 746f 2074  d entries into t
-00010a00: 6865 206c 6973 740d 0a20 2020 2020 2020  he list..       
-00010a10: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-00010a20: 696c 656e 616d 652c 2027 7727 2920 6173  ilename, 'w') as
-00010a30: 2073 7472 6561 6d3a 0d0a 0d0a 2020 2020   stream:....    
-00010a40: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00010a50: 203d 207b 2274 7261 6e73 6163 7469 6f6e   = {"transaction
-00010a60: 7322 3a20 7365 6c66 2e65 6e74 7279 5f64  s": self.entry_d
-00010a70: 6174 612c 0d0a 2020 2020 2020 2020 2020  ata,..          
-00010a80: 2020 2020 2020 2261 6765 6e74 7322 3a20        "agents": 
-00010a90: 636f 6465 5f64 6174 612c 0d0a 2020 2020  code_data,..    
-00010aa0: 2020 2020 2020 2020 2020 2020 2262 6f78              "box
-00010ab0: 5f70 6f73 6974 696f 6e73 223a 2073 656c  _positions": sel
-00010ac0: 662e 6472 6177 6361 6e76 6173 2e62 6f78  f.drawcanvas.box
-00010ad0: 5f70 6f73 6974 696f 6e73 2829 2c0d 0a20  _positions(),.. 
-00010ae0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00010af0: 6c61 6265 6c5f 706f 7369 7469 6f6e 7322  label_positions"
-00010b00: 3a20 7365 6c66 2e64 7261 7763 616e 7661  : self.drawcanva
-00010b10: 732e 6c61 6265 6c5f 706f 7369 7469 6f6e  s.label_position
-00010b20: 7328 292c 0d0a 2020 2020 2020 2020 2020  s(),..          
-00010b30: 2020 2020 2020 2273 6574 7469 6e67 7322        "settings"
-00010b40: 3a20 7365 6c66 2e73 6574 7469 6e67 735f  : self.settings_
-00010b50: 7374 722c 0d0a 2020 2020 2020 2020 2020  str,..          
-00010b60: 2020 2020 2020 226d 6169 6e6c 6f6f 7022        "mainloop"
-00010b70: 3a20 7365 6c66 2e6d 6169 6e6c 6f6f 705f  : self.mainloop_
-00010b80: 7374 722c 0d0a 2020 2020 2020 2020 2020  str,..          
-00010b90: 2020 2020 2020 2274 6865 6d65 223a 207b        "theme": {
-00010ba0: 2267 6c6f 6261 6c74 6865 6d65 223a 2073  "globaltheme": s
-00010bb0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00010bc0: 722e 7468 656d 652c 2022 636f 6c6f 7273  r.theme, "colors
-00010bd0: 223a 6674 6865 6d65 7d2c 0d0a 2020 2020  ":ftheme},..    
-00010be0: 2020 2020 2020 2020 2020 2020 226e 6f74              "not
-00010bf0: 6573 223a 2073 656c 662e 6e6f 7465 7345  es": self.notesE
-00010c00: 6469 742e 746f 506c 6169 6e54 6578 7428  dit.toPlainText(
-00010c10: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-00010c20: 2020 2020 7d0d 0a0d 0a20 2020 2020 2020      }....       
-00010c30: 2020 2020 2020 2020 2079 616d 6c2e 6475           yaml.du
-00010c40: 6d70 2864 6174 612c 7374 7265 616d 290d  mp(data,stream).
-00010c50: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-00010c60: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00010c70: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00010c80: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
-00010c90: 6765 3d73 7472 2865 292c 2074 6974 6c65  ge=str(e), title
-00010ca0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
-00010cb0: 2020 2064 6566 2074 7279 5f67 656e 5f6d     def try_gen_m
-00010cc0: 6174 7269 7828 7365 6c66 293a 0d0a 2020  atrix(self):..  
-00010cd0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00010ce0: 2020 2020 2020 2020 7365 6c66 2e67 656e          self.gen
-00010cf0: 5f6d 6174 7269 7828 290d 0a20 2020 2020  _matrix()..     
-00010d00: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00010d10: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-00010d20: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00010d30: 6679 2822 4572 726f 7222 2c73 7472 2865  fy("Error",str(e
-00010d40: 2929 0d0a 0d0a 2020 2020 6465 6620 6765  ))....    def ge
-00010d50: 6e5f 6d61 7472 6978 2873 656c 662c 6d6f  n_matrix(self,mo
-00010d60: 6465 3d22 7374 616e 6461 7264 2229 3a0d  de="standard"):.
-00010d70: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00010d80: 2020 2020 2020 6765 6e65 7261 7465 2066        generate f
-00010d90: 6c6f 7720 6d61 7472 6978 3a0d 0a0d 0a20  low matrix:.... 
-00010da0: 2020 2020 2020 203a 7061 7261 6d20 6d6f         :param mo
-00010db0: 6465 3a20 7374 616e 6461 7264 2c65 7863  de: standard,exc
-00010dc0: 656c 2c6c 6174 6578 0d0a 0d0a 2020 2020  el,latex....    
-00010dd0: 2020 2020 7374 616e 6461 7264 3a20 7368      standard: sh
-00010de0: 6f77 7320 6d61 7472 6978 2067 7261 7068  ows matrix graph
-00010df0: 6963 616c 6c79 0d0a 2020 2020 2020 2020  ically..        
-00010e00: 6578 6365 6c3a 2065 7870 6f72 7473 2061  excel: exports a
-00010e10: 6e20 6578 6365 6c20 6669 6c65 0d0a 2020  n excel file..  
-00010e20: 2020 2020 2020 6c61 7465 783a 206e 6f74        latex: not
-00010e30: 2079 6574 2073 7570 706f 7274 6564 204e   yet supported N
-00010e40: 4f54 2041 5641 494c 4142 4c45 2046 4f52  OT AVAILABLE FOR
-00010e50: 204e 4f57 0d0a 2020 2020 2020 2020 6874   NOW..        ht
-00010e60: 6d6c 3a20 4e4f 5420 4156 4149 4c41 424c  ml: NOT AVAILABL
-00010e70: 4520 464f 5220 4e4f 570d 0a20 2020 2020  E FOR NOW..     
-00010e80: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
-00010e90: 2020 666c 6f77 5f64 6174 6120 3d20 7b7d    flow_data = {}
-00010ea0: 0d0a 0d0a 2020 2020 2020 2020 666c 6f77  ....        flow
-00010eb0: 5f64 6174 615b 2243 4122 5d20 3d20 6465  _data["CA"] = de
-00010ec0: 6661 756c 7464 6963 7428 6c61 6d62 6461  faultdict(lambda
-00010ed0: 3a20 6465 6661 756c 7464 6963 7428 6c69  : defaultdict(li
-00010ee0: 7374 2929 2020 2320 6375 7272 656e 7420  st))  # current 
-00010ef0: 6163 636f 756e 740d 0a20 2020 2020 2020  account..       
-00010f00: 2066 6c6f 775f 6461 7461 5b22 4b41 225d   flow_data["KA"]
-00010f10: 203d 2064 6566 6175 6c74 6469 6374 286c   = defaultdict(l
-00010f20: 616d 6264 613a 2064 6566 6175 6c74 6469  ambda: defaultdi
-00010f30: 6374 286c 6973 7429 2920 2023 2063 6170  ct(list))  # cap
-00010f40: 6974 616c 2061 6363 6f75 6e74 0d0a 0d0a  ital account....
-00010f50: 2020 2020 2020 2020 2320 666c 6f77 5f64          # flow_d
-00010f60: 6174 615b 4b41 206f 7220 4341 5d5b 7375  ata[KA or CA][su
-00010f70: 626a 6563 745d 5b61 6765 6e74 5d0d 0a20  bject][agent].. 
-00010f80: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
-00010f90: 6c66 2e65 6e74 7279 5f64 6174 6129 203d  lf.entry_data) =
-00010fa0: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
-00010fb0: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
-00010fc0: 7373 6167 653d 2243 616e 6e6f 7420 6765  ssage="Cannot ge
-00010fd0: 6e65 7261 7465 204d 6174 7269 782e 2048  nerate Matrix. H
-00010fe0: 6176 6520 796f 7520 7365 7420 7570 2061  ave you set up a
-00010ff0: 6e79 2074 7261 6e73 6163 7469 6f6e 7320  ny transactions 
-00011000: 7965 743f 222c 7469 746c 653d 2245 7272  yet?",title="Err
-00011010: 6f72 2229 0d0a 2020 2020 2020 2020 2020  or")..          
-00011020: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
-00011030: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00011040: 2020 2020 2020 666f 7220 6669 6c65 6461        for fileda
-00011050: 7461 2069 6e20 7365 6c66 2e65 6e74 7279  ta in self.entry
-00011060: 5f64 6174 613a 0d0a 2020 2020 2020 2020  _data:..        
-00011070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011080: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00011090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110a0: 2020 2020 2020 2020 2020 2020 2065 7661               eva
-000110b0: 6c75 6174 6520 7472 616e 7361 6374 696f  luate transactio
-000110c0: 6e20 656e 7472 6965 7320 7769 7468 2074  n entries with t
-000110d0: 6865 2066 6c6f 7720 6c6f 6767 6572 0d0a  he flow logger..
-000110e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011100: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
-00011110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011120: 2020 2020 2073 7562 6a65 6374 203d 2066       subject = f
-00011130: 696c 6564 6174 615b 2273 7562 6a65 6374  iledata["subject
-00011140: 225d 2e72 6570 6c61 6365 2822 5f22 2c20  "].replace("_", 
-00011150: 2220 2229 2e74 6974 6c65 2829 0d0a 2020  " ").title()..  
-00011160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011170: 2020 2020 2020 2020 2020 2020 2020 6b69                ki
-00011180: 6e64 203d 2066 696c 6564 6174 615b 226b  nd = filedata["k
-00011190: 696e 6422 5d0d 0a20 2020 2020 2020 2020  ind"]..         
-000111a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111b0: 2020 2020 2020 206c 6f67 5f66 6c6f 7720         log_flow 
-000111c0: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
-000111d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111e0: 2020 2020 2020 2020 6966 2066 696c 6564          if filed
-000111f0: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
-00011200: 7469 6f6e 225d 203d 3d20 2246 616c 7365  tion"] == "False
-00011210: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-00011220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011230: 2020 2020 2020 2020 6c6f 675f 666c 6f77          log_flow
-00011240: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
-00011250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011260: 2020 2020 2020 2020 2023 2020 206c 6f67           #   log
-00011270: 5f66 6c6f 7720 3d20 626f 6f6c 2866 696c  _flow = bool(fil
-00011280: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
-00011290: 6163 7469 6f6e 225d 290d 0a20 2020 2020  action"])..     
-000112a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000112b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000112c0: 2822 4c4f 4720 464c 4f57 222c 6c6f 675f  ("LOG FLOW",log_
-000112d0: 666c 6f77 2c22 7261 7722 2c66 696c 6564  flow,"raw",filed
-000112e0: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
-000112f0: 7469 6f6e 225d 290d 0a20 2020 2020 2020  tion"])..       
-00011300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011310: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
-00011320: 7920 3d20 6669 6c65 6461 7461 5b22 7175  y = filedata["qu
-00011330: 616e 7469 7479 225d 0d0a 2020 2020 2020  antity"]..      
-00011340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011350: 2020 2020 2020 2020 2020 6167 656e 7431            agent1
-00011360: 203d 2066 696c 6564 6174 615b 2261 6765   = filedata["age
-00011370: 6e74 3122 5d2e 7265 706c 6163 6528 225f  nt1"].replace("_
-00011380: 222c 2022 2022 292e 7469 746c 6528 290d  ", " ").title().
-00011390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000113a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000113b0: 2061 6765 6e74 3220 3d20 6669 6c65 6461   agent2 = fileda
-000113c0: 7461 5b22 6167 656e 7432 225d 2e72 6570  ta["agent2"].rep
-000113d0: 6c61 6365 2822 5f22 2c20 2220 2229 2e74  lace("_", " ").t
-000113e0: 6974 6c65 2829 0d0a 0d0a 2020 2020 2020  itle()....      
-000113f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011400: 2020 2020 2020 2020 2020 2320 7570 7065            # uppe
-00011410: 7220 7061 7274 206f 6620 6d61 7472 6978  r part of matrix
-00011420: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011440: 2020 6966 206c 6f67 5f66 6c6f 773a 0d0a    if log_flow:..
-00011450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011470: 2020 2020 6163 636f 756e 745f 6672 6f6d      account_from
-00011480: 203d 206b 696e 642e 7370 6c69 7428 222d   = kind.split("-
-00011490: 3e22 295b 305d 0d0a 2020 2020 2020 2020  >")[0]..        
-000114a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114b0: 2020 2020 2020 2020 2020 2020 6163 636f              acco
-000114c0: 756e 745f 746f 203d 206b 696e 642e 7370  unt_to = kind.sp
-000114d0: 6c69 7428 222d 3e22 295b 315d 0d0a 0d0a  lit("->")[1]....
-000114e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011500: 2020 2020 666c 6f77 5f64 6174 615b 6163      flow_data[ac
-00011510: 636f 756e 745f 6672 6f6d 5d5b 7375 626a  count_from][subj
-00011520: 6563 745d 5b61 6765 6e74 315d 2e61 7070  ect][agent1].app
-00011530: 656e 6428 222d 2220 2b20 7374 7228 7175  end("-" + str(qu
-00011540: 616e 7469 7479 2929 0d0a 2020 2020 2020  antity))..      
-00011550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011560: 2020 2020 2020 2020 2020 2020 2020 666c                fl
-00011570: 6f77 5f64 6174 615b 6163 636f 756e 745f  ow_data[account_
-00011580: 746f 5d5b 7375 626a 6563 745d 5b61 6765  to][subject][age
-00011590: 6e74 325d 2e61 7070 656e 6428 7374 7228  nt2].append(str(
-000115a0: 7175 616e 7469 7479 2929 0d0a 0d0a 2020  quantity))....  
-000115b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000115d0: 6c6f 7765 7220 7061 7274 206f 6620 6d61  lower part of ma
-000115e0: 7472 6978 203d 2063 6861 6e67 6573 2069  trix = changes i
-000115f0: 6e20 6173 7365 7473 2061 6e73 206c 6961  n assets ans lia
-00011600: 6269 6c69 7469 6573 0d0a 0d0a 2020 2020  bilities....    
-00011610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011620: 2020 2020 2020 2020 2020 2020 6131 203d              a1 =
-00011630: 2066 696c 6564 6174 615b 2261 3122 5d20   filedata["a1"] 
-00011640: 2023 202b 2022 5c6e 220d 0a20 2020 2020   # + "\n"..     
-00011650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011660: 2020 2020 2020 2020 2020 2065 3120 3d20             e1 = 
-00011670: 6669 6c65 6461 7461 5b22 6531 225d 2020  filedata["e1"]  
-00011680: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
-00011690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116a0: 2020 2020 2020 2020 2020 6c31 203d 2066            l1 = f
-000116b0: 696c 6564 6174 615b 226c 3122 5d20 2023  iledata["l1"]  #
-000116c0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+0000df20: 5669 6577 2e72 6f77 436f 756e 7428 290d  View.rowCount().
+0000df30: 0a20 2020 2020 2020 206e 756d 6265 725f  .        number_
+0000df40: 6f66 5f63 6f6c 756d 6e73 203d 2073 656c  of_columns = sel
+0000df50: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000df60: 772e 636f 6c75 6d6e 436f 756e 7428 290d  w.columnCount().
+0000df70: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+0000df80: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
+0000df90: 6620 7365 6c65 6374 696f 6e20 3e3d 2031  f selection >= 1
+0000dfa0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000dfb0: 2020 2063 7572 7265 6e74 526f 7720 3d20     currentRow = 
+0000dfc0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000dfd0: 5669 6577 2e63 7572 7265 6e74 526f 7728  View.currentRow(
+0000dfe0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000dff0: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
+0000e000: 6e67 6528 6e75 6d62 6572 5f6f 665f 636f  nge(number_of_co
+0000e010: 6c75 6d6e 7329 3a0d 0a20 2020 2020 2020  lumns):..       
+0000e020: 2020 2020 2020 2020 2020 2020 2063 7572               cur
+0000e030: 7265 6e74 4974 656d 203d 2073 656c 662e  rentItem = self.
+0000e040: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000e050: 7461 6b65 4974 656d 2863 7572 7265 6e74  takeItem(current
+0000e060: 526f 772c 6a29 0d0a 2020 2020 2020 2020  Row,j)..        
+0000e070: 2020 2020 2020 2020 2020 2020 7377 6974              swit
+0000e080: 6368 4974 656d 203d 2073 656c 662e 7472  chItem = self.tr
+0000e090: 616e 7361 6374 696f 6e56 6965 772e 7461  ansactionView.ta
+0000e0a0: 6b65 4974 656d 2863 7572 7265 6e74 526f  keItem(currentRo
+0000e0b0: 772d 312c 6a29 0d0a 0d0a 2020 2020 2020  w-1,j)....      
+0000e0c0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000e0d0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000e0e0: 6577 2e73 6574 4974 656d 2863 7572 7265  ew.setItem(curre
+0000e0f0: 6e74 526f 7720 2d20 312c 206a 2c20 6375  ntRow - 1, j, cu
+0000e100: 7272 656e 7449 7465 6d29 0d0a 2020 2020  rrentItem)..    
+0000e110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e120: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000e130: 5669 6577 2e73 6574 4974 656d 2863 7572  View.setItem(cur
+0000e140: 7265 6e74 526f 772c 206a 2c20 7377 6974  rentRow, j, swit
+0000e150: 6368 4974 656d 290d 0a0d 0a20 2020 2020  chItem)....     
+0000e160: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000e170: 7769 7463 685f 656e 7472 7920 3d20 7365  witch_entry = se
+0000e180: 6c66 2e65 6e74 7279 5f64 6174 615b 6375  lf.entry_data[cu
+0000e190: 7272 656e 7452 6f77 2d31 5d0d 0a20 2020  rrentRow-1]..   
+0000e1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e1b0: 2063 7572 7265 6e74 5f65 6e74 7279 203d   current_entry =
+0000e1c0: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000e1d0: 5b63 7572 7265 6e74 526f 775d 0d0a 0d0a  [currentRow]....
+0000e1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e1f0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
+0000e200: 6174 615b 6375 7272 656e 7452 6f77 5d20  ata[currentRow] 
+0000e210: 3d20 7377 6974 6368 5f65 6e74 7279 0d0a  = switch_entry..
+0000e220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e230: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
+0000e240: 6174 615b 6375 7272 656e 7452 6f77 2d31  ata[currentRow-1
+0000e250: 5d20 3d20 6375 7272 656e 745f 656e 7472  ] = current_entr
+0000e260: 790d 0a0d 0a20 2020 2020 2020 2020 2020  y....           
+0000e270: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
+0000e280: 6374 696f 6e56 6965 772e 636c 6561 7253  ctionView.clearS
+0000e290: 656c 6563 7469 6f6e 2829 0d0a 2020 2020  election()..    
+0000e2a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000e2b0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000e2c0: 2e73 6574 4375 7272 656e 7443 656c 6c28  .setCurrentCell(
+0000e2d0: 6375 7272 656e 7452 6f77 2d31 2c30 290d  currentRow-1,0).
+0000e2e0: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+0000e2f0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+0000e300: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0000e310: 656c 662e 6e6f 7469 6679 2822 6572 726f  elf.notify("erro
+0000e320: 723a 2022 2b73 7472 2865 292c 2074 6974  r: "+str(e), tit
+0000e330: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
+0000e340: 2020 2064 6566 2064 6174 615f 7365 6c65     def data_sele
+0000e350: 6374 2873 656c 6629 3a0d 0a0d 0a20 2020  ct(self):....   
+0000e360: 2020 2020 2023 7365 6c65 6374 6564 5f72       #selected_r
+0000e370: 6f77 7320 3d20 7365 6c66 2e74 7261 6e73  ows = self.trans
+0000e380: 6163 7469 6f6e 5669 6577 2e73 656c 6563  actionView.selec
+0000e390: 7469 6f6e 4d6f 6465 6c28 292e 7365 6c65  tionModel().sele
+0000e3a0: 6374 6564 526f 7773 2829 0d0a 2020 2020  ctedRows()..    
+0000e3b0: 2020 2020 7365 6c65 6374 6564 5f72 6f77      selected_row
+0000e3c0: 7320 3d20 736f 7274 6564 2873 6574 2869  s = sorted(set(i
+0000e3d0: 6e64 6578 2e72 6f77 2829 2066 6f72 2069  ndex.row() for i
+0000e3e0: 6e64 6578 2069 6e0d 0a20 2020 2020 2020  ndex in..       
+0000e3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e400: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000e410: 696f 6e56 6965 772e 7365 6c65 6374 6564  ionView.selected
+0000e420: 496e 6465 7865 7328 2929 290d 0a0d 0a20  Indexes())).... 
+0000e430: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+0000e440: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
+0000e450: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+0000e460: 7072 696e 7428 226e 6f20 7365 6c65 6374  print("no select
+0000e470: 6564 2072 6f77 7322 290d 0a20 2020 2020  ed rows")..     
+0000e480: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
+0000e490: 0a20 2020 2020 2020 2073 656c 6563 7469  .        selecti
+0000e4a0: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
+0000e4b0: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
+0000e4c0: 2073 656c 662e 726f 775f 7365 6c65 6374   self.row_select
+0000e4d0: 2873 656c 6563 7469 6f6e 290d 0a20 2020  (selection)..   
+0000e4e0: 2020 2020 2073 656c 662e 6d61 6465 5f63       self.made_c
+0000e4f0: 6861 6e67 6573 203d 2046 616c 7365 0d0a  hanges = False..
+0000e500: 0d0a 0d0a 2020 2020 6465 6620 6461 7461  ....    def data
+0000e510: 5f73 656c 6563 745f 7768 6572 6528 7365  _select_where(se
+0000e520: 6c66 2c65 7870 7229 3a0d 0a20 2020 2020  lf,expr):..     
+0000e530: 2020 2070 7269 6e74 2822 6461 7461 2073     print("data s
+0000e540: 656c 6563 7420 7768 6572 6522 2c65 7870  elect where",exp
+0000e550: 7229 0d0a 0d0a 2020 2020 2020 2020 666f  r)....        fo
+0000e560: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
+0000e570: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000e580: 772e 726f 7743 6f75 6e74 2829 293a 0d0a  w.rowCount()):..
+0000e590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e5a0: 6d79 5f65 6e74 7279 203d 2073 656c 662e  my_entry = self.
+0000e5b0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000e5c0: 6974 656d 2869 2c20 3329 2e74 6578 7428  item(i, 3).text(
+0000e5d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000e5e0: 2020 2020 2070 7269 6e74 2822 2e2e 2e22       print("..."
+0000e5f0: 2c69 2c6d 795f 656e 7472 7929 0d0a 2020  ,i,my_entry)..  
+0000e600: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000e610: 206d 795f 656e 7472 7920 3d3d 2065 7870   my_entry == exp
+0000e620: 7220 6f72 206d 795f 656e 7472 792e 6c6f  r or my_entry.lo
+0000e630: 7765 7228 2920 3d3d 2065 7870 722e 6c6f  wer() == expr.lo
+0000e640: 7765 7228 293a 0d0a 0d0a 2020 2020 2020  wer():....      
+0000e650: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000e660: 6c66 2e72 6f77 5f73 656c 6563 7428 6929  lf.row_select(i)
+0000e670: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e680: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
+0000e690: 2020 2020 6465 6620 726f 775f 7365 6c65      def row_sele
+0000e6a0: 6374 2873 656c 662c 7365 6c65 6374 696f  ct(self,selectio
+0000e6b0: 6e29 3a0d 0a0d 0a20 2020 2020 2020 2023  n):....        #
+0000e6c0: 2063 6f6c 6f72 2074 6865 2073 656c 6563   color the selec
+0000e6d0: 7465 6420 726f 770d 0a20 2020 2020 2020  ted row..       
+0000e6e0: 2023 2067 6228 3233 332c 2032 3334 2c20   # gb(233, 234, 
+0000e6f0: 3232 3729 3b0d 0a0d 0a20 2020 2020 2020  227);....       
+0000e700: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
+0000e710: 6964 7820 3d20 4e6f 6e65 0d0a 0d0a 2020  idx = None....  
+0000e720: 2020 2020 2020 6966 2073 656c 662e 6d61        if self.ma
+0000e730: 6465 5f63 6861 6e67 6573 3a0d 0a20 2020  de_changes:..   
+0000e740: 2020 2020 2020 2020 2079 6573 203d 2073           yes = s
+0000e750: 656c 662e 6173 6b5f 7175 6573 7469 6f6e  elf.ask_question
+0000e760: 2822 5761 726e 696e 6722 2c20 2259 6f75  ("Warning", "You
+0000e770: 2061 7265 2061 626f 7574 2074 6f20 6368   are about to ch
+0000e780: 616e 6765 2074 6f20 616e 6f74 6865 7220  ange to another 
+0000e790: 7472 616e 7361 6374 696f 6e20 616e 6420  transaction and 
+0000e7a0: 7769 7468 6472 6177 2074 6865 2063 6861  withdraw the cha
+0000e7b0: 6e67 6573 2079 6f75 206d 6164 652e 2043  nges you made. C
+0000e7c0: 6f6e 7469 6e75 653f 2229 0d0a 2020 2020  ontinue?")..    
+0000e7d0: 2020 2020 2020 2020 6966 206e 6f74 2079          if not y
+0000e7e0: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+0000e7f0: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
+0000e800: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0000e810: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
+0000e820: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0000e830: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
+0000e840: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0000e850: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000e860: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
+0000e870: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000e880: 772e 636f 6c75 6d6e 436f 756e 7428 2929  w.columnCount())
+0000e890: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000e8a0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000e8b0: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
+0000e8c0: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
+0000e8d0: 6964 782c 2069 292e 7365 7442 6163 6b67  idx, i).setBackg
+0000e8e0: 726f 756e 6428 5174 4775 692e 5143 6f6c  round(QtGui.QCol
+0000e8f0: 6f72 2832 3333 2c20 3233 342c 2032 3237  or(233, 234, 227
+0000e900: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000e910: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0000e920: 6e73 6163 7469 6f6e 5669 6577 2e73 6372  nsactionView.scr
+0000e930: 6f6c 6c54 6f49 7465 6d28 7365 6c66 2e74  ollToItem(self.t
+0000e940: 7261 6e73 6163 7469 6f6e 5669 6577 2e69  ransactionView.i
+0000e950: 7465 6d28 7365 6c65 6374 696f 6e2c 2069  tem(selection, i
+0000e960: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000e970: 666f 7220 6920 696e 2072 616e 6765 2873  for i in range(s
+0000e980: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000e990: 6965 772e 636f 6c75 6d6e 436f 756e 7428  iew.columnCount(
+0000e9a0: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
+0000e9b0: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
+0000e9c0: 6374 696f 6e56 6965 772e 6974 656d 2873  ctionView.item(s
+0000e9d0: 656c 6563 7469 6f6e 2c20 6929 2e73 6574  election, i).set
+0000e9e0: 4261 636b 6772 6f75 6e64 2851 7447 7569  Background(QtGui
+0000e9f0: 2e51 436f 6c6f 7228 3539 2c20 3539 2c20  .QColor(59, 59, 
+0000ea00: 3135 3929 290d 0a20 2020 2020 2020 2020  159))..         
+0000ea10: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000ea20: 7361 6374 696f 6e56 6965 772e 7363 726f  sactionView.scro
+0000ea30: 6c6c 546f 4974 656d 2873 656c 662e 7472  llToItem(self.tr
+0000ea40: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
+0000ea50: 656d 2873 656c 6563 7469 6f6e 2c20 6929  em(selection, i)
+0000ea60: 290d 0a20 2020 2020 2020 2020 2020 2022  )..            "
+0000ea70: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+0000ea80: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000ea90: 5669 6577 2e63 6c65 6172 5365 6c65 6374  View.clearSelect
+0000eaa0: 696f 6e28 290d 0a20 2020 2020 2020 2020  ion()..         
+0000eab0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000eac0: 696f 6e56 6965 772e 7365 7443 7572 7265  ionView.setCurre
+0000ead0: 6e74 4365 6c6c 2873 656c 6563 7469 6f6e  ntCell(selection
+0000eae0: 2c33 290d 0a0d 0a0d 0a0d 0a20 2020 2020  ,3)........     
+0000eaf0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0000eb00: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+0000eb10: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000eb20: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+0000eb30: 656c 6563 7469 6f6e 5f69 6478 203d 2073  election_idx = s
+0000eb40: 656c 6563 7469 6f6e 0d0a 2020 2020 2020  election..      
+0000eb50: 2020 2020 2020 7072 696e 7428 2273 656c        print("sel
+0000eb60: 6563 7469 6f6e 222c 7365 6c65 6374 696f  ection",selectio
+0000eb70: 6e29 0d0a 0d0a 2020 2020 2020 2020 2020  n)....          
+0000eb80: 2020 6461 7461 203d 2073 656c 662e 656e    data = self.en
+0000eb90: 7472 795f 6461 7461 5b73 656c 6563 7469  try_data[selecti
+0000eba0: 6f6e 5d0d 0a0d 0a20 2020 2020 2020 2020  on]....         
+0000ebb0: 2020 2070 7269 6e74 2822 6461 7461 222c     print("data",
+0000ebc0: 2064 6174 6129 0d0a 0d0a 2020 2020 2020   data)....      
+0000ebd0: 2020 2020 2020 7365 6c66 2e41 7373 6574        self.Asset
+0000ebe0: 4c69 7374 4c65 6674 2e63 6c65 6172 2829  ListLeft.clear()
+0000ebf0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000ec00: 6c66 2e4c 6961 6269 6c69 7479 4c69 7374  lf.LiabilityList
+0000ec10: 4c65 6674 2e63 6c65 6172 2829 0d0a 2020  Left.clear()..  
+0000ec20: 2020 2020 2020 2020 2020 7365 6c66 2e4c            self.L
+0000ec30: 6961 6269 6c69 7479 4c69 7374 5269 6768  iabilityListRigh
+0000ec40: 742e 636c 6561 7228 290d 0a20 2020 2020  t.clear()..     
+0000ec50: 2020 2020 2020 2073 656c 662e 4173 7365         self.Asse
+0000ec60: 744c 6973 7452 6967 6874 2e63 6c65 6172  tListRight.clear
+0000ec70: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0000ec80: 7365 6c66 2e45 7175 6974 794c 6973 744c  self.EquityListL
+0000ec90: 6566 742e 636c 6561 7228 290d 0a20 2020  eft.clear()..   
+0000eca0: 2020 2020 2020 2020 2073 656c 662e 4571           self.Eq
+0000ecb0: 7569 7479 4c69 7374 5269 6768 742e 636c  uityListRight.cl
+0000ecc0: 6561 7228 290d 0a0d 0a20 2020 2020 2020  ear()....       
+0000ecd0: 2020 2020 2073 656c 662e 4173 7365 744c       self.AssetL
+0000ece0: 6973 744c 6566 742e 7365 7450 6c61 696e  istLeft.setPlain
+0000ecf0: 5465 7874 2864 6174 615b 2261 3122 5d29  Text(data["a1"])
+0000ed00: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000ed10: 6c66 2e41 7373 6574 4c69 7374 5269 6768  lf.AssetListRigh
+0000ed20: 742e 7365 7450 6c61 696e 5465 7874 2864  t.setPlainText(d
+0000ed30: 6174 615b 2261 3222 5d29 0d0a 2020 2020  ata["a2"])..    
+0000ed40: 2020 2020 2020 2020 7365 6c66 2e4c 6961          self.Lia
+0000ed50: 6269 6c69 7479 4c69 7374 4c65 6674 2e73  bilityListLeft.s
+0000ed60: 6574 506c 6169 6e54 6578 7428 6461 7461  etPlainText(data
+0000ed70: 5b22 6c31 225d 2920 2023 202b 6461 7461  ["l1"])  # +data
+0000ed80: 5b22 6531 225d 290d 0a20 2020 2020 2020  ["e1"])..       
+0000ed90: 2020 2020 2073 656c 662e 4c69 6162 696c       self.Liabil
+0000eda0: 6974 794c 6973 7452 6967 6874 2e73 6574  ityListRight.set
+0000edb0: 506c 6169 6e54 6578 7428 6461 7461 5b22  PlainText(data["
+0000edc0: 6c32 225d 2920 2320 2b64 6174 615b 2265  l2"]) # +data["e
+0000edd0: 3222 5d29 0d0a 2020 2020 2020 2020 2020  2"])..          
+0000ede0: 2020 7365 6c66 2e45 7175 6974 794c 6973    self.EquityLis
+0000edf0: 744c 6566 742e 7365 7450 6c61 696e 5465  tLeft.setPlainTe
+0000ee00: 7874 2864 6174 615b 2265 3122 5d29 0d0a  xt(data["e1"])..
+0000ee10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000ee20: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
+0000ee30: 2e73 6574 506c 6169 6e54 6578 7428 6461  .setPlainText(da
+0000ee40: 7461 5b22 6532 225d 290d 0a0d 0a20 2020  ta["e2"])....   
+0000ee50: 2020 2020 2020 2020 2073 656c 662e 6167           self.ag
+0000ee60: 656e 7431 4564 6974 2e73 6574 5465 7874  ent1Edit.setText
+0000ee70: 2863 616d 656c 2864 6174 615b 2261 6765  (camel(data["age
+0000ee80: 6e74 3122 5d29 2920 232e 6361 7069 7461  nt1"])) #.capita
+0000ee90: 6c69 7a65 2829 290d 0a20 2020 2020 2020  lize())..       
+0000eea0: 2020 2020 2073 656c 662e 6167 656e 7432       self.agent2
+0000eeb0: 4564 6974 2e73 6574 5465 7874 2863 616d  Edit.setText(cam
+0000eec0: 656c 2864 6174 615b 2261 6765 6e74 3222  el(data["agent2"
+0000eed0: 5d29 2920 2320 2e63 6170 6974 616c 697a  ])) # .capitaliz
+0000eee0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
+0000eef0: 2020 2020 7365 6c66 2e72 6567 6973 7465      self.registe
+0000ef00: 7246 6c6f 7742 6f78 2e73 6574 4375 7272  rFlowBox.setCurr
+0000ef10: 656e 7449 6e64 6578 2873 656c 662e 7265  entIndex(self.re
+0000ef20: 6769 7374 6572 466c 6f77 426f 782e 6669  gisterFlowBox.fi
+0000ef30: 6e64 5465 7874 2873 7472 2864 6174 615b  ndText(str(data[
+0000ef40: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
+0000ef50: 225d 2929 290d 0a0d 0a20 2020 2020 2020  "])))....       
+0000ef60: 2020 2020 2063 6173 6866 6c6f 7731 203d       cashflow1 =
+0000ef70: 2064 6174 615b 2263 6173 6866 6c6f 7731   data["cashflow1
+0000ef80: 225d 206f 7220 224e 6f6e 6522 0d0a 2020  "] or "None"..  
+0000ef90: 2020 2020 2020 2020 2020 6361 7368 666c            cashfl
+0000efa0: 6f77 3220 3d20 6461 7461 5b22 6361 7368  ow2 = data["cash
+0000efb0: 666c 6f77 3222 5d20 6f72 2022 4e6f 6e65  flow2"] or "None
+0000efc0: 220d 0a20 2020 2020 2020 2020 2020 2073  "..            s
+0000efd0: 656c 662e 636f 6d62 6f43 6173 684c 6566  elf.comboCashLef
+0000efe0: 742e 7365 7443 7572 7265 6e74 496e 6465  t.setCurrentInde
+0000eff0: 7828 7365 6c66 2e63 6f6d 626f 4361 7368  x(self.comboCash
+0000f000: 4c65 6674 2e66 696e 6454 6578 7428 7374  Left.findText(st
+0000f010: 7228 6361 7368 666c 6f77 3129 2929 0d0a  r(cashflow1)))..
+0000f020: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000f030: 2e63 6f6d 626f 4361 7368 5269 6768 742e  .comboCashRight.
+0000f040: 7365 7443 7572 7265 6e74 496e 6465 7828  setCurrentIndex(
+0000f050: 7365 6c66 2e63 6f6d 626f 4361 7368 5269  self.comboCashRi
+0000f060: 6768 742e 6669 6e64 5465 7874 2873 7472  ght.findText(str
+0000f070: 2863 6173 6866 6c6f 7732 2929 290d 0a0d  (cashflow2)))...
+0000f080: 0a20 2020 2020 2020 2020 2020 2074 7274  .            trt
+0000f090: 7970 6520 3d20 6461 7461 5b22 6b69 6e64  ype = data["kind
+0000f0a0: 225d 206f 7220 224b 412d 3e4b 4122 0d0a  "] or "KA->KA"..
+0000f0b0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000f0c0: 2e65 6469 7454 7970 652e 7365 7443 7572  .editType.setCur
+0000f0d0: 7265 6e74 496e 6465 7828 7365 6c66 2e65  rentIndex(self.e
+0000f0e0: 6469 7454 7970 652e 6669 6e64 5465 7874  ditType.findText
+0000f0f0: 2873 7472 2874 7274 7970 6529 2929 0d0a  (str(trtype)))..
+0000f100: 0d0a 2020 2020 2020 2020 2020 2020 6963  ..            ic
+0000f110: 7331 203d 2064 6174 615b 2269 6e63 6f6d  s1 = data["incom
+0000f120: 6531 225d 206f 7220 224e 6f6e 6522 0d0a  e1"] or "None"..
+0000f130: 2020 2020 2020 2020 2020 2020 6963 7332              ics2
+0000f140: 203d 2064 6174 615b 2269 6e63 6f6d 6532   = data["income2
+0000f150: 225d 206f 7220 224e 6f6e 6522 0d0a 2020  "] or "None"..  
+0000f160: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+0000f170: 6f6d 626f 496e 636f 6d65 4c65 6674 2e73  omboIncomeLeft.s
+0000f180: 6574 4375 7272 656e 7449 6e64 6578 2873  etCurrentIndex(s
+0000f190: 656c 662e 636f 6d62 6f49 6e63 6f6d 654c  elf.comboIncomeL
+0000f1a0: 6566 742e 6669 6e64 5465 7874 2869 6373  eft.findText(ics
+0000f1b0: 3129 290d 0a20 2020 2020 2020 2020 2020  1))..           
+0000f1c0: 2073 656c 662e 636f 6d62 6f49 6e63 6f6d   self.comboIncom
+0000f1d0: 6552 6967 6874 2e73 6574 4375 7272 656e  eRight.setCurren
+0000f1e0: 7449 6e64 6578 2873 656c 662e 636f 6d62  tIndex(self.comb
+0000f1f0: 6f49 6e63 6f6d 6552 6967 6874 2e66 696e  oIncomeRight.fin
+0000f200: 6454 6578 7428 6963 7332 2929 0d0a 0d0a  dText(ics2))....
+0000f210: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000f220: 2e65 6469 7451 7561 6e74 6974 792e 7365  .editQuantity.se
+0000f230: 7454 6578 7428 6461 7461 5b22 7175 616e  tText(data["quan
+0000f240: 7469 7479 225d 290d 0a20 2020 2020 2020  tity"])..       
+0000f250: 2020 2020 2073 656c 662e 6564 6974 5375       self.editSu
+0000f260: 626a 6563 742e 7365 7454 6578 7428 6461  bject.setText(da
+0000f270: 7461 5b22 7375 626a 6563 7422 5d29 0d0a  ta["subject"])..
+0000f280: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000f290: 6c66 2e64 7261 7763 616e 7661 732e 6869  lf.drawcanvas.hi
+0000f2a0: 6768 6c69 6768 745f 636f 6e6e 6563 746f  ghlight_connecto
+0000f2b0: 7228 6461 7461 5b22 7368 6f72 746e 616d  r(data["shortnam
+0000f2c0: 6522 5d29 0d0a 0d0a 2020 2020 2020 2020  e"])....        
+0000f2d0: 2020 2020 6966 2022 6465 7363 7269 7074      if "descript
+0000f2e0: 696f 6e22 2069 6e20 6461 7461 3a0d 0a20  ion" in data:.. 
+0000f2f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000f300: 656c 662e 6564 6974 4465 7363 7269 7074  elf.editDescript
+0000f310: 696f 6e2e 7365 7454 6578 7428 6461 7461  ion.setText(data
+0000f320: 5b22 6465 7363 7269 7074 696f 6e22 5d29  ["description"])
+0000f330: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+0000f340: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0000f350: 2020 2020 2073 656c 662e 6564 6974 4465       self.editDe
+0000f360: 7363 7269 7074 696f 6e2e 7365 7454 6578  scription.setTex
+0000f370: 7428 2222 290d 0a20 2020 2020 2020 2020  t("")..         
+0000f380: 2020 2073 656c 662e 6564 6974 5368 6f72     self.editShor
+0000f390: 746e 616d 652e 7365 7454 6578 7428 6461  tname.setText(da
+0000f3a0: 7461 5b22 7368 6f72 746e 616d 6522 5d29  ta["shortname"])
+0000f3b0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000f3c0: 756e 6964 6972 203d 2073 7472 2864 6174  unidir = str(dat
+0000f3d0: 615b 2275 6e69 2d64 6972 6563 7469 6f6e  a["uni-direction
+0000f3e0: 616c 225d 2920 6f72 2022 4e6f 6e65 220d  al"]) or "None".
+0000f3f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000f400: 662e 636f 6d62 6f55 6e69 6469 722e 7365  f.comboUnidir.se
+0000f410: 7443 7572 7265 6e74 496e 6465 7828 7365  tCurrentIndex(se
+0000f420: 6c66 2e63 6f6d 626f 556e 6964 6972 2e66  lf.comboUnidir.f
+0000f430: 696e 6454 6578 7428 756e 6964 6972 2929  indText(unidir))
+0000f440: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
+0000f450: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+0000f460: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000f470: 7365 6c66 2e6e 6f74 6966 7928 7374 7228  self.notify(str(
+0000f480: 6529 2c74 6974 6c65 3d22 4572 726f 7222  e),title="Error"
+0000f490: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+0000f4a0: 662e 6d61 6465 5f63 6861 6e67 6573 203d  f.made_changes =
+0000f4b0: 2046 616c 7365 0d0a 0d0a 2020 2020 6465   False....    de
+0000f4c0: 6620 7570 6461 7465 5f64 6174 6128 7365  f update_data(se
+0000f4d0: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
+0000f4e0: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
+0000f4f0: 6964 7820 6973 204e 6f6e 653a 0d0a 2020  idx is None:..  
+0000f500: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000f510: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+0000f520: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+0000f530: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+0000f540: 2261 3122 5d20 3d20 7365 6c66 2e41 7373  "a1"] = self.Ass
+0000f550: 6574 4c69 7374 4c65 6674 2e74 6f50 6c61  etListLeft.toPla
+0000f560: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
+0000f570: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
+0000f580: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+0000f590: 5f69 6478 5d5b 2261 3222 5d20 3d20 7365  _idx]["a2"] = se
+0000f5a0: 6c66 2e41 7373 6574 4c69 7374 5269 6768  lf.AssetListRigh
+0000f5b0: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
+0000f5c0: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
+0000f5d0: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
+0000f5e0: 6c65 6374 696f 6e5f 6964 785d 5b22 6c31  lection_idx]["l1
+0000f5f0: 225d 203d 2073 656c 662e 4c69 6162 696c  "] = self.Liabil
+0000f600: 6974 794c 6973 744c 6566 742e 746f 506c  ityListLeft.toPl
+0000f610: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
+0000f620: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+0000f630: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
+0000f640: 6e5f 6964 785d 5b22 6c32 225d 203d 2073  n_idx]["l2"] = s
+0000f650: 656c 662e 4c69 6162 696c 6974 794c 6973  elf.LiabilityLis
+0000f660: 7452 6967 6874 2e74 6f50 6c61 696e 5465  tRight.toPlainTe
+0000f670: 7874 2829 0d0a 2020 2020 2020 2020 7365  xt()..        se
+0000f680: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
+0000f690: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+0000f6a0: 5d5b 2265 3122 5d20 3d20 7365 6c66 2e45  ]["e1"] = self.E
+0000f6b0: 7175 6974 794c 6973 744c 6566 742e 746f  quityListLeft.to
+0000f6c0: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0000f6d0: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
+0000f6e0: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
+0000f6f0: 696f 6e5f 6964 785d 5b22 6532 225d 203d  ion_idx]["e2"] =
+0000f700: 2073 656c 662e 4571 7569 7479 4c69 7374   self.EquityList
+0000f710: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
+0000f720: 7428 290d 0a0d 0a20 2020 2020 2020 2073  t()....        s
+0000f730: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+0000f740: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+0000f750: 785d 5b22 6131 225d 2020 3d20 7365 6c66  x]["a1"]  = self
+0000f760: 2e41 7373 6574 4c69 7374 4c65 6674 2e74  .AssetListLeft.t
+0000f770: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
+0000f780: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+0000f790: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+0000f7a0: 7469 6f6e 5f69 6478 5d5b 2261 3222 5d20  tion_idx]["a2"] 
+0000f7b0: 3d20 7365 6c66 2e41 7373 6574 4c69 7374  = self.AssetList
+0000f7c0: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
+0000f7d0: 7428 290d 0a20 2020 2020 2020 2073 656c  t()..        sel
+0000f7e0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
+0000f7f0: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
+0000f800: 5b22 6c31 225d 2020 3d20 7365 6c66 2e4c  ["l1"]  = self.L
+0000f810: 6961 6269 6c69 7479 4c69 7374 4c65 6674  iabilityListLeft
+0000f820: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
+0000f830: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0000f840: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
+0000f850: 6563 7469 6f6e 5f69 6478 5d5b 226c 3222  ection_idx]["l2"
+0000f860: 5d20 203d 2073 656c 662e 4c69 6162 696c  ]  = self.Liabil
+0000f870: 6974 794c 6973 7452 6967 6874 2e74 6f50  ityListRight.toP
+0000f880: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
+0000f890: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
+0000f8a0: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
+0000f8b0: 6f6e 5f69 6478 5d5b 2265 3122 5d20 203d  on_idx]["e1"]  =
+0000f8c0: 2073 656c 662e 4571 7569 7479 4c69 7374   self.EquityList
+0000f8d0: 4c65 6674 2e74 6f50 6c61 696e 5465 7874  Left.toPlainText
+0000f8e0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+0000f8f0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+0000f900: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+0000f910: 2265 3222 5d20 203d 2073 656c 662e 4571  "e2"]  = self.Eq
+0000f920: 7569 7479 4c69 7374 5269 6768 742e 746f  uityListRight.to
+0000f930: 506c 6169 6e54 6578 7428 290d 0a0d 0a20  PlainText().... 
+0000f940: 2020 2020 2020 206f 6e6c 795f 7265 6e61         only_rena
+0000f950: 6d65 203d 2054 7275 650d 0a20 2020 2020  me = True..     
+0000f960: 2020 2069 6620 7365 6c66 2e65 6e74 7279     if self.entry
+0000f970: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+0000f980: 7469 6f6e 5f69 6478 5d5b 2261 6765 6e74  tion_idx]["agent
+0000f990: 3122 5d20 2021 3d20 7365 6c66 2e61 6765  1"]  != self.age
+0000f9a0: 6e74 3145 6469 742e 7465 7874 2829 3a0d  nt1Edit.text():.
+0000f9b0: 0a20 2020 2020 2020 2020 2020 206f 6e6c  .            onl
+0000f9c0: 795f 7265 6e61 6d65 203d 2046 616c 7365  y_rename = False
+0000f9d0: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+0000f9e0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
+0000f9f0: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
+0000fa00: 5b22 6167 656e 7432 225d 2020 213d 7365  ["agent2"]  !=se
+0000fa10: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
+0000fa20: 7874 2829 3a0d 0a20 2020 2020 2020 2020  xt():..         
+0000fa30: 2020 206f 6e6c 795f 7265 6e61 6d65 203d     only_rename =
+0000fa40: 2046 616c 7365 0d0a 0d0a 0d0a 2020 2020   False......    
+0000fa50: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
+0000fa60: 6472 6177 6361 6e76 6173 2e63 6865 636b  drawcanvas.check
+0000fa70: 5f65 7869 7374 2873 656c 662e 6167 656e  _exist(self.agen
+0000fa80: 7431 4564 6974 2e74 6578 7428 2929 3a0d  t1Edit.text()):.
+0000fa90: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000faa0: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
+0000fab0: 7465 7874 2829 2e73 7472 6970 2829 2021  text().strip() !
+0000fac0: 3d20 2222 3a0d 0a20 2020 2020 2020 2020  = "":..         
+0000fad0: 2020 2020 2020 2079 6573 203d 2073 656c         yes = sel
+0000fae0: 662e 6173 6b5f 7175 6573 7469 6f6e 2827  f.ask_question('
+0000faf0: 272c 2254 6865 2061 6765 6e74 2025 7320  ',"The agent %s 
+0000fb00: 646f 6573 206e 6f74 2065 7869 7374 2e5c  does not exist.\
+0000fb10: 6e44 6f20 796f 7520 7769 7368 2074 6f20  nDo you wish to 
+0000fb20: 636f 6e74 696e 7565 2061 6e64 2061 7574  continue and aut
+0000fb30: 6f6d 6174 6963 616c 6c79 2063 7265 6174  omatically creat
+0000fb40: 6520 6120 6e65 7720 6167 656e 743f 2225  e a new agent?"%
+0000fb50: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
+0000fb60: 7465 7874 2829 290d 0a20 2020 2020 2020  text())..       
+0000fb70: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0000fb80: 7965 733a 0d0a 2020 2020 2020 2020 2020  yes:..          
+0000fb90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000fba0: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
+0000fbb0: 6f74 2073 656c 662e 6472 6177 6361 6e76  ot self.drawcanv
+0000fbc0: 6173 2e63 6865 636b 5f65 7869 7374 2873  as.check_exist(s
+0000fbd0: 656c 662e 6167 656e 7432 4564 6974 2e74  elf.agent2Edit.t
+0000fbe0: 6578 7428 2929 3a0d 0a20 2020 2020 2020  ext()):..       
+0000fbf0: 2020 2020 2069 6620 7365 6c66 2e61 6765       if self.age
+0000fc00: 6e74 3245 6469 742e 7465 7874 2829 2e73  nt2Edit.text().s
+0000fc10: 7472 6970 2829 2021 3d20 2222 3a0d 0a20  trip() != "":.. 
+0000fc20: 2020 2020 2020 2020 2020 2020 2020 2079                 y
+0000fc30: 6573 203d 2073 656c 662e 6173 6b5f 7175  es = self.ask_qu
+0000fc40: 6573 7469 6f6e 2827 272c 2254 6865 2061  estion('',"The a
+0000fc50: 6765 6e74 2025 7320 646f 6573 206e 6f74  gent %s does not
+0000fc60: 2065 7869 7374 2e5c 6e44 6f20 796f 7520   exist.\nDo you 
+0000fc70: 7769 7368 2074 6f20 636f 6e74 696e 7565  wish to continue
+0000fc80: 2061 6e64 2061 7574 6f6d 6174 6963 616c   and automatical
+0000fc90: 6c79 2063 7265 6174 6520 6120 6e65 7720  ly create a new 
+0000fca0: 6167 656e 743f 2225 7365 6c66 2e61 6765  agent?"%self.age
+0000fcb0: 6e74 3245 6469 742e 7465 7874 2829 290d  nt2Edit.text()).
+0000fcc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000fcd0: 2069 6620 6e6f 7420 7965 733a 0d0a 2020   if not yes:..  
+0000fce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fcf0: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
+0000fd00: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
+0000fd10: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
+0000fd20: 6f6e 5f69 6478 5d5b 2261 6765 6e74 3122  on_idx]["agent1"
+0000fd30: 5d20 203d 2063 616d 656c 2873 656c 662e  ]  = camel(self.
+0000fd40: 6167 656e 7431 4564 6974 2e74 6578 7428  agent1Edit.text(
+0000fd50: 2929 2023 2e63 6170 6974 616c 697a 6528  )) #.capitalize(
+0000fd60: 2920 2320 7570 7065 7220 6265 6361 7573  ) # upper becaus
+0000fd70: 6520 6167 656e 7473 2061 7265 2061 6c77  e agents are alw
+0000fd80: 6179 7320 7570 7065 7263 6173 650d 0a20  ays uppercase.. 
+0000fd90: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000fda0: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+0000fdb0: 6374 696f 6e5f 6964 785d 5b22 6167 656e  ction_idx]["agen
+0000fdc0: 7432 225d 2020 3d20 6361 6d65 6c28 7365  t2"]  = camel(se
+0000fdd0: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
+0000fde0: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
+0000fdf0: 7a65 2829 0d0a 0d0a 2020 2020 2020 2020  ze()....        
+0000fe00: 7365 6c66 2e61 6765 6e74 3145 6469 742e  self.agent1Edit.
+0000fe10: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
+0000fe20: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
+0000fe30: 7874 2829 2929 2023 2e63 6170 6974 616c  xt())) #.capital
+0000fe40: 697a 6528 2929 0d0a 2020 2020 2020 2020  ize())..        
+0000fe50: 7365 6c66 2e61 6765 6e74 3245 6469 742e  self.agent2Edit.
+0000fe60: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
+0000fe70: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
+0000fe80: 7874 2829 2929 2023 2e63 6170 6974 616c  xt())) #.capital
+0000fe90: 697a 6528 2929 0d0a 0d0a 2020 2020 2020  ize())....      
+0000fea0: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
+0000feb0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+0000fec0: 5f69 6478 5d5b 2275 6e69 2d64 6972 6563  _idx]["uni-direc
+0000fed0: 7469 6f6e 616c 225d 203d 205c 0d0a 2020  tional"] = \..  
+0000fee0: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
+0000fef0: 6c66 2e63 6f6d 626f 556e 6964 6972 2e63  lf.comboUnidir.c
+0000ff00: 7572 7265 6e74 5465 7874 2829 290d 0a0d  urrentText())...
+0000ff10: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
+0000ff20: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
+0000ff30: 6c65 6374 696f 6e5f 6964 785d 5b22 6c6f  lection_idx]["lo
+0000ff40: 6720 7472 616e 7361 6374 696f 6e22 5d20  g transaction"] 
+0000ff50: 3d5c 0d0a 2020 2020 2020 2020 2020 2020  =\..            
+0000ff60: 7374 7228 7365 6c66 2e72 6567 6973 7465  str(self.registe
+0000ff70: 7246 6c6f 7742 6f78 2e63 7572 7265 6e74  rFlowBox.current
+0000ff80: 5465 7874 2829 290d 0a0d 0a20 2020 2020  Text())....     
+0000ff90: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
+0000ffa0: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
+0000ffb0: 6e5f 6964 785d 5b22 6361 7368 666c 6f77  n_idx]["cashflow
+0000ffc0: 3122 5d20 3d20 5c0d 0a20 2020 2020 2020  1"] = \..       
+0000ffd0: 2020 2020 2073 7472 2873 656c 662e 636f       str(self.co
+0000ffe0: 6d62 6f43 6173 684c 6566 742e 6375 7272  mboCashLeft.curr
+0000fff0: 656e 7454 6578 7428 2929 0d0a 2020 2020  entText())..    
+00010000: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
+00010010: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
+00010020: 6f6e 5f69 6478 5d5b 2263 6173 6866 6c6f  on_idx]["cashflo
+00010030: 7732 225d 203d 205c 0d0a 2020 2020 2020  w2"] = \..      
+00010040: 2020 2020 2020 7374 7228 7365 6c66 2e63        str(self.c
+00010050: 6f6d 626f 4361 7368 5269 6768 742e 6375  omboCashRight.cu
+00010060: 7272 656e 7454 6578 7428 2929 0d0a 0d0a  rrentText())....
+00010070: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+00010080: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
+00010090: 6563 7469 6f6e 5f69 6478 5d5b 226b 696e  ection_idx]["kin
+000100a0: 6422 5d20 3d20 5c0d 0a20 2020 2020 2020  d"] = \..       
+000100b0: 2020 2020 2073 7472 2873 656c 662e 6564       str(self.ed
+000100c0: 6974 5479 7065 2e63 7572 7265 6e74 5465  itType.currentTe
+000100d0: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
+000100e0: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+000100f0: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
+00010100: 6964 785d 5b22 696e 636f 6d65 3122 5d20  idx]["income1"] 
+00010110: 3d20 5c0d 0a20 2020 2020 2020 2020 2020  = \..           
+00010120: 2073 7472 2873 656c 662e 636f 6d62 6f49   str(self.comboI
+00010130: 6e63 6f6d 654c 6566 742e 6375 7272 656e  ncomeLeft.curren
+00010140: 7454 6578 7428 2929 0d0a 2020 2020 2020  tText())..      
+00010150: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
+00010160: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+00010170: 5f69 6478 5d5b 2269 6e63 6f6d 6532 225d  _idx]["income2"]
+00010180: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
+00010190: 2020 7374 7228 7365 6c66 2e63 6f6d 626f    str(self.combo
+000101a0: 496e 636f 6d65 5269 6768 742e 6375 7272  IncomeRight.curr
+000101b0: 656e 7454 6578 7428 2929 0d0a 0d0a 0d0a  entText())......
+000101c0: 2020 2020 2020 2020 6966 206f 6e6c 795f          if only_
+000101d0: 7265 6e61 6d65 3a0d 0a0d 0a20 2020 2020  rename:....     
+000101e0: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
+000101f0: 6361 6e76 6173 2e72 656e 616d 655f 636f  canvas.rename_co
+00010200: 6e6e 6563 7469 6f6e 2873 656c 662e 656e  nnection(self.en
+00010210: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
+00010220: 6c65 6374 696f 6e5f 6964 785d 5b22 7368  lection_idx]["sh
+00010230: 6f72 746e 616d 6522 5d20 2c20 7374 7228  ortname"] , str(
+00010240: 7365 6c66 2e65 6469 7453 686f 7274 6e61  self.editShortna
+00010250: 6d65 2e74 6578 7428 2929 290d 0a0d 0a20  me.text())).... 
+00010260: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00010270: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
+00010280: 7261 7763 616e 7661 732e 7265 6d6f 7665  rawcanvas.remove
+00010290: 5f63 6f6e 6e65 6374 696f 6e28 7365 6c66  _connection(self
+000102a0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+000102b0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+000102c0: 2273 686f 7274 6e61 6d65 225d 2920 232c  "shortname"]) #,
+000102d0: 2073 7472 2873 656c 662e 6564 6974 5375   str(self.editSu
+000102e0: 626a 6563 742e 7465 7874 2829 2929 0d0a  bject.text()))..
+000102f0: 0d0a 2020 2020 2020 2020 2020 2020 626f  ..            bo
+00010300: 7831 203d 2073 656c 662e 6472 6177 6361  x1 = self.drawca
+00010310: 6e76 6173 2e61 6464 5f61 6765 6e74 2873  nvas.add_agent(s
+00010320: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+00010330: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+00010340: 785d 5b22 6167 656e 7431 225d 290d 0a20  x]["agent1"]).. 
+00010350: 2020 2020 2020 2020 2020 2062 6f78 3220             box2 
+00010360: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
+00010370: 732e 6164 645f 6167 656e 7428 7365 6c66  s.add_agent(self
+00010380: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+00010390: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+000103a0: 2261 6765 6e74 3222 5d29 0d0a 0d0a 0d0a  "agent2"])......
+000103b0: 2020 2020 2020 2020 2020 2020 6d79 5f69              my_i
+000103c0: 7465 6d73 203d 205b 5d0d 0a20 2020 2020  tems = []..     
+000103d0: 2020 2020 2020 2064 6174 6120 3d20 7365         data = se
+000103e0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
+000103f0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+00010400: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+00010410: 2061 6c6c 656e 7472 6965 7320 3d20 225c   allentries = "\
+00010420: 6e22 2e6a 6f69 6e28 5b64 6174 615b 226c  n".join([data["l
+00010430: 3122 5d2c 2064 6174 615b 2261 3122 5d2c  1"], data["a1"],
+00010440: 2064 6174 615b 2265 3122 5d2c 2064 6174   data["e1"], dat
+00010450: 615b 226c 3222 5d2c 2064 6174 615b 2261  a["l2"], data["a
+00010460: 3222 5d2c 2064 6174 615b 2265 3222 5d5d  2"], data["e2"]]
+00010470: 290d 0a20 2020 2020 2020 2020 2020 2066  )..            f
+00010480: 6f72 2073 7562 5f69 7465 6d20 696e 2061  or sub_item in a
+00010490: 6c6c 656e 7472 6965 732e 7370 6c69 7428  llentries.split(
+000104a0: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+000104b0: 2020 2020 2020 2020 666f 7220 7375 625f          for sub_
+000104c0: 656e 7472 7920 696e 2073 7562 5f69 7465  entry in sub_ite
+000104d0: 6d2e 7370 6c69 7428 225c 6e22 293a 0d0a  m.split("\n"):..
+000104e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000104f0: 2020 2020 656e 7472 7920 3d20 7375 625f      entry = sub_
+00010500: 656e 7472 792e 7265 706c 6163 6528 222d  entry.replace("-
+00010510: 222c 2222 292e 7265 706c 6163 6528 222b  ","").replace("+
+00010520: 222c 2222 292e 7374 7269 7028 290d 0a20  ","").strip().. 
+00010530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010540: 2020 2069 6620 656e 7472 7920 213d 2020     if entry !=  
+00010550: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
+00010560: 2020 2020 2020 2020 2020 2020 206d 795f               my_
+00010570: 6974 656d 732e 6170 7065 6e64 2865 6e74  items.append(ent
+00010580: 7279 290d 0a0d 0a0d 0a20 2020 2020 2020  ry)......       
+00010590: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+000105a0: 6e76 6173 2e61 6464 5f63 6f6e 6e65 6374  nvas.add_connect
+000105b0: 696f 6e28 626f 7831 2c62 6f78 322c 2073  ion(box1,box2, s
+000105c0: 7472 2873 656c 662e 6564 6974 5368 6f72  tr(self.editShor
+000105d0: 746e 616d 652e 7465 7874 2829 292c 7375  tname.text()),su
+000105e0: 626a 6563 743d 7365 6c66 2e65 6469 7453  bject=self.editS
+000105f0: 7562 6a65 6374 2e74 6578 7428 292c 6974  ubject.text(),it
+00010600: 656d 733d 6d79 5f69 7465 6d73 290d 0a0d  ems=my_items)...
+00010610: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00010620: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
+00010630: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
+00010640: 7175 616e 7469 7479 225d 203d 205c 0d0a  quantity"] = \..
+00010650: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+00010660: 7365 6c66 2e65 6469 7451 7561 6e74 6974  self.editQuantit
+00010670: 792e 7465 7874 2829 290d 0a0d 0a0d 0a20  y.text())...... 
+00010680: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+00010690: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+000106a0: 6374 696f 6e5f 6964 785d 5b22 7375 626a  ction_idx]["subj
+000106b0: 6563 7422 5d20 3d20 5c0d 0a20 2020 2020  ect"] = \..     
+000106c0: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
+000106d0: 6564 6974 5375 626a 6563 742e 7465 7874  editSubject.text
+000106e0: 2829 290d 0a0d 0a20 2020 2020 2020 2073  ())....        s
+000106f0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+00010700: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+00010710: 785d 5b22 7368 6f72 746e 616d 6522 5d20  x]["shortname"] 
+00010720: 3d20 5c0d 0a20 2020 2020 2020 2020 2020  = \..           
+00010730: 2073 7472 2873 656c 662e 6564 6974 5368   str(self.editSh
+00010740: 6f72 746e 616d 652e 7465 7874 2829 290d  ortname.text()).
+00010750: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00010760: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
+00010770: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
+00010780: 6465 7363 7269 7074 696f 6e22 5d20 3d20  description"] = 
+00010790: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
+000107a0: 7472 2873 656c 662e 6564 6974 4465 7363  tr(self.editDesc
+000107b0: 7269 7074 696f 6e2e 7465 7874 2829 290d  ription.text()).
+000107c0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+000107d0: 7570 6461 7465 5f74 6162 6c65 2829 0d0a  update_table()..
+000107e0: 0d0a 2020 2020 2020 2020 7072 696e 7428  ..        print(
+000107f0: 2264 6174 6120 6368 616e 6765 642e 2229  "data changed.")
+00010800: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00010810: 2e6d 6164 655f 6368 616e 6765 7320 3d20  .made_changes = 
+00010820: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
+00010830: 2073 656c 662e 726f 775f 7365 6c65 6374   self.row_select
+00010840: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
+00010850: 6964 7829 0d0a 0d0a 2020 2020 2020 2020  idx)....        
+00010860: 2320 7365 6c66 2e75 6470 6174 6542 7574  # self.udpateBut
+00010870: 746f 6e2e 7365 7454 6578 7428 2255 7064  ton.setText("Upd
+00010880: 6174 6520 5661 6c75 6573 2229 0d0a 0d0a  ate Values")....
+00010890: 2020 2020 6465 6620 7361 7665 2873 656c      def save(sel
+000108a0: 6629 3a0d 0a0d 0a20 2020 2020 2020 2074  f):....        t
+000108b0: 7279 3a0d 0a0d 0a0d 0a20 2020 2020 2020  ry:......       
+000108c0: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
+000108d0: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
+000108e0: 6520 2320 7374 6174 7573 4261 7228 292e  e # statusBar().
+000108f0: 6375 7272 656e 744d 6573 7361 6765 2829  currentMessage()
+00010900: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00010910: 6c66 2e6c 6162 656c 5f66 6e61 6d65 2e73  lf.label_fname.s
+00010920: 6574 5465 7874 2866 696c 656e 616d 6529  etText(filename)
+00010930: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00010940: 6966 2066 696c 656e 616d 6520 6973 206e  if filename is n
+00010950: 6f74 204e 6f6e 653a 0d0a 0d0a 2020 2020  ot None:....    
+00010960: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00010970: 2e73 6176 6561 7328 6669 6c65 6e61 6d65  .saveas(filename
+00010980: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00010990: 2020 2020 2023 2054 4f44 4f20 6d61 7962       # TODO mayb
+000109a0: 6520 6261 636b 7570 283f 290d 0a20 2020  e backup(?)..   
+000109b0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+000109c0: 656c 662e 6e6f 7469 6679 2822 4669 6c65  elf.notify("File
+000109d0: 2073 6176 6564 2075 6e64 6572 2025 7322   saved under %s"
+000109e0: 2025 2066 696c 656e 616d 652c 7469 746c   % filename,titl
+000109f0: 653d 224f 6b22 290d 0a20 2020 2020 2020  e="Ok")..       
+00010a00: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+00010a10: 4649 4c45 2053 4156 4544 2122 290d 0a20  FILE SAVED!").. 
+00010a20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00010a30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010a40: 2020 7365 6c66 2e73 6176 655f 646c 6728    self.save_dlg(
+00010a50: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
+00010a60: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00010a70: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+00010a80: 2069 6620 6669 6c65 6e61 6d65 2021 3d20   if filename != 
+00010a90: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
+00010aa0: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+00010ab0: 2873 7472 2865 292c 7469 746c 653d 2245  (str(e),title="E
+00010ac0: 7272 6f72 2229 0d0a 0d0a 0d0a 0d0a 2020  rror")........  
+00010ad0: 2020 6465 6620 7361 7665 5f64 6c67 2873    def save_dlg(s
+00010ae0: 656c 6629 3a0d 0a20 2020 2020 2020 2074  elf):..        t
+00010af0: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
+00010b00: 2020 2066 696c 656e 616d 6520 3d20 5146     filename = QF
+00010b10: 696c 6544 6961 6c6f 672e 6765 7453 6176  ileDialog.getSav
+00010b20: 6546 696c 654e 616d 6528 7365 6c66 2c20  eFileName(self, 
+00010b30: 2753 6176 6520 6669 6c65 272c 0d0a 2020  'Save file',..  
+00010b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010b60: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+00010b70: 6765 7463 7764 2829 2c20 2261 7474 756e  getcwd(), "attun
+00010b80: 6520 4669 6c65 7320 282a 2e73 6663 746c  e Files (*.sfctl
+00010b90: 2922 295b 305d 0d0a 2020 2020 2020 2020  )")[0]..        
+00010ba0: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
+00010bb0: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
+00010bc0: 2822 5361 7665 6420 6669 6c65 2022 202b  ("Saved file " +
+00010bd0: 2066 696c 656e 616d 6529 0d0a 0d0a 2020   filename)....  
+00010be0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+00010bf0: 745f 6669 6c65 5f62 6163 6b75 7020 3d20  t_file_backup = 
+00010c00: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
+00010c10: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
+00010c20: 2069 6620 6669 6c65 6e61 6d65 2069 7320   if filename is 
+00010c30: 6e6f 7420 4e6f 6e65 2061 6e64 2066 696c  not None and fil
+00010c40: 656e 616d 6520 213d 2022 223a 0d0a 2020  ename != "":..  
+00010c50: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00010c60: 6c66 2e6c 6162 656c 5f66 6e61 6d65 2e73  lf.label_fname.s
+00010c70: 6574 5465 7874 2866 696c 656e 616d 6529  etText(filename)
+00010c80: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00010c90: 2020 2020 7365 6c66 2e63 7572 7265 6e74      self.current
+00010ca0: 5f66 696c 6520 3d20 6669 6c65 6e61 6d65  _file = filename
+00010cb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010cc0: 2020 7365 6c66 2e73 6176 6561 7328 6669    self.saveas(fi
+00010cd0: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2020  lename)....     
+00010ce0: 2020 2020 2020 2023 2054 4f44 4f20 6d61         # TODO ma
+00010cf0: 7962 6520 6261 636b 7570 283f 290d 0a0d  ybe backup(?)...
+00010d00: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00010d10: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00010d20: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00010d30: 662e 6e6f 7469 6679 2822 436f 756c 6420  f.notify("Could 
+00010d40: 6e6f 7420 7361 7665 2070 726f 6a65 6374  not save project
+00010d50: 2e22 2c74 6974 6c65 3d22 4572 726f 7222  .",title="Error"
+00010d60: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00010d70: 656c 662e 6375 7272 656e 745f 6669 6c65  elf.current_file
+00010d80: 203d 2063 7572 7265 6e74 5f66 696c 655f   = current_file_
+00010d90: 6261 636b 7570 0d0a 0d0a 0d0a 2020 2020  backup......    
+00010da0: 6465 6620 7361 7665 6173 2873 656c 662c  def saveas(self,
+00010db0: 6669 6c65 6e61 6d65 293a 0d0a 0d0a 2020  filename):....  
+00010dc0: 2020 2020 2020 6674 6865 6d65 203d 204e        ftheme = N
+00010dd0: 6f6e 650d 0a20 2020 2020 2020 2074 7279  one..        try
+00010de0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00010df0: 7468 656d 6520 3d20 6669 6c65 6e61 6d65  theme = filename
+00010e00: 5b3a 2d35 5d2b 2273 6663 7468 656d 6522  [:-5]+"sfctheme"
+00010e10: 2023 2061 6273 6f6c 7574 6520 6669 6c65   # absolute file
+00010e20: 2070 6174 680d 0a20 2020 2020 2020 2020   path..         
+00010e30: 2020 2066 6f6c 6465 722c 6674 6865 6d65     folder,ftheme
+00010e40: 203d 206f 732e 7061 7468 2e73 706c 6974   = os.path.split
+00010e50: 2866 7468 656d 6529 2023 2063 6f6e 7665  (ftheme) # conve
+00010e60: 7274 2074 6f20 7265 6c61 7469 7665 2066  rt to relative f
+00010e70: 696c 6520 7061 7468 0d0a 2020 2020 2020  ile path..      
+00010e80: 2020 2020 2020 7365 6c66 2e74 6865 6d65        self.theme
+00010e90: 5f6d 616e 6167 6572 2e73 6176 655f 636f  _manager.save_co
+00010ea0: 6c6f 7273 2866 7468 656d 6529 0d0a 2020  lors(ftheme)..  
+00010eb0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+00010ec0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00010ed0: 6e6f 7469 6679 2822 436f 756c 6420 6e6f  notify("Could no
+00010ee0: 7420 7361 7665 2063 6f6c 6f72 2074 6865  t save color the
+00010ef0: 6d65 2e20 7072 6f63 6565 6469 6e67 2077  me. proceeding w
+00010f00: 6974 686f 7574 222c 7469 746c 653d 2245  ithout",title="E
+00010f10: 7272 6f72 2229 0d0a 0d0a 0d0a 2020 2020  rror")......    
+00010f20: 2020 2020 2320 6472 6177 6361 6e76 6173      # drawcanvas
+00010f30: 2063 6f64 655f 6461 7461 0d0a 2020 2020   code_data..    
+00010f40: 2020 2020 636f 6465 5f64 6174 6120 3d20      code_data = 
+00010f50: 7b7d 0d0a 2020 2020 2020 2020 666f 7220  {}..        for 
+00010f60: 6b2c 7620 696e 2073 656c 662e 6472 6177  k,v in self.draw
+00010f70: 6361 6e76 6173 2e63 6f64 655f 6461 7461  canvas.code_data
+00010f80: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+00010f90: 2020 2020 2020 2063 6f64 655f 6461 7461         code_data
+00010fa0: 5b6b 5d20 3d20 7374 7228 762e 656e 636f  [k] = str(v.enco
+00010fb0: 6465 2822 7574 662d 3822 292e 6465 636f  de("utf-8").deco
+00010fc0: 6465 2827 6370 3132 3532 2729 290d 0a20  de('cp1252')).. 
+00010fd0: 2020 2020 2020 2020 2020 2023 2066 6978             # fix
+00010fe0: 2073 6f6d 6520 706f 7465 6e74 6961 6c20   some potential 
+00010ff0: 656e 636f 6469 6e67 2065 7272 6f72 730d  encoding errors.
+00011000: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+00011010: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00011020: 6e74 2822 4649 4c45 4e41 4d45 222c 2066  nt("FILENAME", f
+00011030: 696c 656e 616d 6529 0d0a 0d0a 2020 2020  ilename)....    
+00011040: 2020 2020 2020 2020 2320 6c6f 6164 2065          # load e
+00011050: 6e74 7269 6573 2069 6e74 6f20 7468 6520  ntries into the 
+00011060: 6c69 7374 0d0a 2020 2020 2020 2020 2020  list..          
+00011070: 2020 7769 7468 206f 7065 6e28 6669 6c65    with open(file
+00011080: 6e61 6d65 2c20 2777 2729 2061 7320 7374  name, 'w') as st
+00011090: 7265 616d 3a0d 0a0d 0a20 2020 2020 2020  ream:....       
+000110a0: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
+000110b0: 7b22 7472 616e 7361 6374 696f 6e73 223a  {"transactions":
+000110c0: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+000110d0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000110e0: 2020 2022 6167 656e 7473 223a 2063 6f64     "agents": cod
+000110f0: 655f 6461 7461 2c0d 0a20 2020 2020 2020  e_data,..       
+00011100: 2020 2020 2020 2020 2022 626f 785f 706f           "box_po
+00011110: 7369 7469 6f6e 7322 3a20 7365 6c66 2e64  sitions": self.d
+00011120: 7261 7763 616e 7661 732e 626f 785f 706f  rawcanvas.box_po
+00011130: 7369 7469 6f6e 7328 292c 0d0a 2020 2020  sitions(),..    
+00011140: 2020 2020 2020 2020 2020 2020 226c 6162              "lab
+00011150: 656c 5f70 6f73 6974 696f 6e73 223a 2073  el_positions": s
+00011160: 656c 662e 6472 6177 6361 6e76 6173 2e6c  elf.drawcanvas.l
+00011170: 6162 656c 5f70 6f73 6974 696f 6e73 2829  abel_positions()
+00011180: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00011190: 2020 2022 7365 7474 696e 6773 223a 2073     "settings": s
+000111a0: 656c 662e 7365 7474 696e 6773 5f73 7472  elf.settings_str
+000111b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000111c0: 2020 2022 6d61 696e 6c6f 6f70 223a 2073     "mainloop": s
+000111d0: 656c 662e 6d61 696e 6c6f 6f70 5f73 7472  elf.mainloop_str
+000111e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000111f0: 2020 2022 7468 656d 6522 3a20 7b22 676c     "theme": {"gl
+00011200: 6f62 616c 7468 656d 6522 3a20 7365 6c66  obaltheme": self
+00011210: 2e74 6865 6d65 5f6d 616e 6167 6572 2e74  .theme_manager.t
+00011220: 6865 6d65 2c20 2263 6f6c 6f72 7322 3a66  heme, "colors":f
+00011230: 7468 656d 657d 2c0d 0a20 2020 2020 2020  theme},..       
+00011240: 2020 2020 2020 2020 2022 6e6f 7465 7322           "notes"
+00011250: 3a20 7365 6c66 2e6e 6f74 6573 4564 6974  : self.notesEdit
+00011260: 2e74 6f50 6c61 696e 5465 7874 2829 2c0d  .toPlainText(),.
+00011270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011280: 207d 0d0a 0d0a 2020 2020 2020 2020 2020   }....          
+00011290: 2020 2020 2020 7961 6d6c 2e64 756d 7028        yaml.dump(
+000112a0: 6461 7461 2c73 7472 6561 6d29 0d0a 0d0a  data,stream)....
+000112b0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+000112c0: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+000112d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000112e0: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
+000112f0: 7374 7228 6529 2c20 7469 746c 653d 2245  str(e), title="E
+00011300: 7272 6f72 2229 0d0a 0d0a 0d0a 2020 2020  rror")......    
+00011310: 6465 6620 7472 795f 6765 6e5f 6d61 7472  def try_gen_matr
+00011320: 6978 2873 656c 6629 3a0d 0a20 2020 2020  ix(self):..     
+00011330: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00011340: 2020 2020 2073 656c 662e 6765 6e5f 6d61       self.gen_ma
+00011350: 7472 6978 2829 0d0a 2020 2020 2020 2020  trix()..        
+00011360: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00011370: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+00011380: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+00011390: 2245 7272 6f72 222c 7374 7228 6529 290d  "Error",str(e)).
+000113a0: 0a0d 0a20 2020 2064 6566 2067 656e 5f6d  ...    def gen_m
+000113b0: 6174 7269 7828 7365 6c66 2c6d 6f64 653d  atrix(self,mode=
+000113c0: 2273 7461 6e64 6172 6422 293a 0d0a 2020  "standard"):..  
+000113d0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000113e0: 2020 2067 656e 6572 6174 6520 666c 6f77     generate flow
+000113f0: 206d 6174 7269 783a 0d0a 0d0a 2020 2020   matrix:....    
+00011400: 2020 2020 3a70 6172 616d 206d 6f64 653a      :param mode:
+00011410: 2073 7461 6e64 6172 642c 6578 6365 6c2c   standard,excel,
+00011420: 6c61 7465 780d 0a0d 0a20 2020 2020 2020  latex....       
+00011430: 2073 7461 6e64 6172 643a 2073 686f 7773   standard: shows
+00011440: 206d 6174 7269 7820 6772 6170 6869 6361   matrix graphica
+00011450: 6c6c 790d 0a20 2020 2020 2020 2065 7863  lly..        exc
+00011460: 656c 3a20 6578 706f 7274 7320 616e 2065  el: exports an e
+00011470: 7863 656c 2066 696c 650d 0a20 2020 2020  xcel file..     
+00011480: 2020 206c 6174 6578 3a20 6e6f 7420 7965     latex: not ye
+00011490: 7420 7375 7070 6f72 7465 6420 4e4f 5420  t supported NOT 
+000114a0: 4156 4149 4c41 424c 4520 464f 5220 4e4f  AVAILABLE FOR NO
+000114b0: 570d 0a20 2020 2020 2020 2068 746d 6c3a  W..        html:
+000114c0: 204e 4f54 2041 5641 494c 4142 4c45 2046   NOT AVAILABLE F
+000114d0: 4f52 204e 4f57 0d0a 2020 2020 2020 2020  OR NOW..        
+000114e0: 2222 220d 0a0d 0a20 2020 2020 2020 2066  """....        f
+000114f0: 6c6f 775f 6461 7461 203d 207b 7d0d 0a0d  low_data = {}...
+00011500: 0a20 2020 2020 2020 2066 6c6f 775f 6461  .        flow_da
+00011510: 7461 5b22 4341 225d 203d 2064 6566 6175  ta["CA"] = defau
+00011520: 6c74 6469 6374 286c 616d 6264 613a 2064  ltdict(lambda: d
+00011530: 6566 6175 6c74 6469 6374 286c 6973 7429  efaultdict(list)
+00011540: 2920 2023 2063 7572 7265 6e74 2061 6363  )  # current acc
+00011550: 6f75 6e74 0d0a 2020 2020 2020 2020 666c  ount..        fl
+00011560: 6f77 5f64 6174 615b 224b 4122 5d20 3d20  ow_data["KA"] = 
+00011570: 6465 6661 756c 7464 6963 7428 6c61 6d62  defaultdict(lamb
+00011580: 6461 3a20 6465 6661 756c 7464 6963 7428  da: defaultdict(
+00011590: 6c69 7374 2929 2020 2320 6361 7069 7461  list))  # capita
+000115a0: 6c20 6163 636f 756e 740d 0a0d 0a20 2020  l account....   
+000115b0: 2020 2020 2023 2066 6c6f 775f 6461 7461       # flow_data
+000115c0: 5b4b 4120 6f72 2043 415d 5b73 7562 6a65  [KA or CA][subje
+000115d0: 6374 5d5b 6167 656e 745d 0d0a 2020 2020  ct][agent]..    
+000115e0: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
+000115f0: 656e 7472 795f 6461 7461 2920 3d3d 2030  entry_data) == 0
+00011600: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00011610: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
+00011620: 6765 3d22 4361 6e6e 6f74 2067 656e 6572  ge="Cannot gener
+00011630: 6174 6520 4d61 7472 6978 2e20 4861 7665  ate Matrix. Have
+00011640: 2079 6f75 2073 6574 2075 7020 616e 7920   you set up any 
+00011650: 7472 616e 7361 6374 696f 6e73 2079 6574  transactions yet
+00011660: 3f22 2c74 6974 6c65 3d22 4572 726f 7222  ?",title="Error"
+00011670: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00011680: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
+00011690: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+000116a0: 2020 2066 6f72 2066 696c 6564 6174 6120     for filedata 
+000116b0: 696e 2073 656c 662e 656e 7472 795f 6461  in self.entry_da
+000116c0: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
 000116d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116e0: 2020 2020 2020 2020 2061 3220 3d20 6669           a2 = fi
-000116f0: 6c65 6461 7461 5b22 6132 225d 2020 2320  ledata["a2"]  # 
-00011700: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
-00011710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011720: 2020 2020 2020 2020 6532 203d 2066 696c          e2 = fil
-00011730: 6564 6174 615b 2265 3222 5d20 2023 202b  edata["e2"]  # +
-00011740: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
-00011750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011760: 2020 2020 2020 206c 3220 3d20 6669 6c65         l2 = file
-00011770: 6461 7461 5b22 6c32 225d 2020 2320 2b20  data["l2"]  # + 
-00011780: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-00011790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000117a0: 2020 2020 2020 2020 2320 6173 7365 7473          # assets
-000117b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000116e0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+000116f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011700: 2020 2020 2020 2020 2020 6576 616c 7561            evalua
+00011710: 7465 2074 7261 6e73 6163 7469 6f6e 2065  te transaction e
+00011720: 6e74 7269 6573 2077 6974 6820 7468 6520  ntries with the 
+00011730: 666c 6f77 206c 6f67 6765 720d 0a20 2020  flow logger..   
+00011740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011750: 2020 2020 2020 2020 2020 2020 2022 2222               """
+00011760: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011780: 2020 7375 626a 6563 7420 3d20 6669 6c65    subject = file
+00011790: 6461 7461 5b22 7375 626a 6563 7422 5d2e  data["subject"].
+000117a0: 7265 706c 6163 6528 225f 222c 2022 2022  replace("_", " "
+000117b0: 292e 7469 746c 6528 290d 0a20 2020 2020  ).title()..     
 000117c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000117d0: 2020 666f 7220 6974 656d 5f6e 616d 6520    for item_name 
-000117e0: 696e 2061 312e 7370 6c69 7428 225c 6e22  in a1.split("\n"
-000117f0: 293a 2020 2320 2b20 6531 2e73 706c 6974  ):  # + e1.split
-00011800: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-00011810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011820: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00011830: 6974 656d 5f6e 616d 6520 213d 2022 223a  item_name != "":
-00011840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011860: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-00011870: 2069 7465 6d5f 6e61 6d65 5b31 3a5d 2e73   item_name[1:].s
-00011880: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
-00011890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118b0: 7369 676e 203d 2069 7465 6d5f 6e61 6d65  sign = item_name
-000118c0: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
-000118d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000118f0: 6620 7369 676e 203d 3d20 222b 223a 0d0a  f sign == "+":..
+000117d0: 2020 2020 2020 2020 2020 206b 696e 6420             kind 
+000117e0: 3d20 6669 6c65 6461 7461 5b22 6b69 6e64  = filedata["kind
+000117f0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+00011800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011810: 2020 2020 6c6f 675f 666c 6f77 203d 2054      log_flow = T
+00011820: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
+00011830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011840: 2020 2020 2069 6620 6669 6c65 6461 7461       if filedata
+00011850: 5b22 6c6f 6720 7472 616e 7361 6374 696f  ["log transactio
+00011860: 6e22 5d20 3d3d 2022 4661 6c73 6522 3a0d  n"] == "False":.
+00011870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011890: 2020 2020 206c 6f67 5f66 6c6f 773d 2046       log_flow= F
+000118a0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+000118b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000118c0: 2020 2020 2020 2320 2020 6c6f 675f 666c        #   log_fl
+000118d0: 6f77 203d 2062 6f6f 6c28 6669 6c65 6461  ow = bool(fileda
+000118e0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
+000118f0: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
 00011900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011920: 2020 2020 2020 2020 2020 2020 666c 6970              flip
-00011930: 7065 645f 7369 676e 203d 2022 2d22 0d0a  ped_sign = "-"..
-00011940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011960: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00011970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011990: 2020 2020 2020 2020 2020 2066 6c69 7070             flipp
-000119a0: 6564 5f73 6967 6e20 3d20 222b 220d 0a0d  ed_sign = "+"...
-000119b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000119c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119d0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-000119e0: 2228 7329 2220 696e 206e 616d 653a 0d0a  "(s)" in name:..
+00011910: 2020 2020 2020 2020 7072 696e 7428 224c          print("L
+00011920: 4f47 2046 4c4f 5722 2c6c 6f67 5f66 6c6f  OG FLOW",log_flo
+00011930: 772c 2272 6177 222c 6669 6c65 6461 7461  w,"raw",filedata
+00011940: 5b22 6c6f 6720 7472 616e 7361 6374 696f  ["log transactio
+00011950: 6e22 5d29 0d0a 2020 2020 2020 2020 2020  n"])..          
+00011960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011970: 2020 2020 2020 7175 616e 7469 7479 203d        quantity =
+00011980: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
+00011990: 6974 7922 5d0d 0a20 2020 2020 2020 2020  ity"]..         
+000119a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119b0: 2020 2020 2020 2061 6765 6e74 3120 3d20         agent1 = 
+000119c0: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
+000119d0: 225d 2e72 6570 6c61 6365 2822 5f22 2c20  "].replace("_", 
+000119e0: 2220 2229 2e74 6974 6c65 2829 0d0a 2020  " ").title()..  
 000119f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a10: 2020 2020 2020 2020 2020 2020 666c 6f77              flow
-00011a20: 5f64 6174 615b 224b 4122 5d5b 22ce 9420  _data["KA"][".. 
-00011a30: 2573 2220 2520 6e61 6d65 5d5b 6167 656e  %s" % name][agen
-00011a40: 7431 5d2e 6170 7065 6e64 280d 0a20 2020  t1].append(..   
+00011a00: 2020 2020 2020 2020 2020 2020 2020 6167                ag
+00011a10: 656e 7432 203d 2066 696c 6564 6174 615b  ent2 = filedata[
+00011a20: 2261 6765 6e74 3222 5d2e 7265 706c 6163  "agent2"].replac
+00011a30: 6528 225f 222c 2022 2022 292e 7469 746c  e("_", " ").titl
+00011a40: 6528 290d 0a0d 0a20 2020 2020 2020 2020  e()....         
 00011a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a70: 2020 2020 2020 2020 2020 2020 2022 2822               "("
-00011a80: 202b 2066 6c69 7070 6564 5f73 6967 6e20   + flipped_sign 
-00011a90: 2b20 7175 616e 7469 7479 202b 2022 2922  + quantity + ")"
-00011aa0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00011a60: 2020 2020 2020 2023 2075 7070 6572 2070         # upper p
+00011a70: 6172 7420 6f66 206d 6174 7269 780d 0a20  art of matrix.. 
+00011a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a90: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00011aa0: 6620 6c6f 675f 666c 6f77 3a0d 0a20 2020  f log_flow:..   
 00011ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ac0: 2020 2020 2066 6f72 2069 7465 6d5f 6e61       for item_na
-00011ad0: 6d65 2069 6e20 6132 2e73 706c 6974 2822  me in a2.split("
-00011ae0: 5c6e 2229 3a20 2023 202b 2065 322e 7370  \n"):  # + e2.sp
-00011af0: 6c69 7428 225c 6e22 293a 0d0a 2020 2020  lit("\n"):..    
+00011ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ad0: 2061 6363 6f75 6e74 5f66 726f 6d20 3d20   account_from = 
+00011ae0: 6b69 6e64 2e73 706c 6974 2822 2d3e 2229  kind.split("->")
+00011af0: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
 00011b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b20: 6966 2069 7465 6d5f 6e61 6d65 2021 3d20  if item_name != 
-00011b30: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
+00011b10: 2020 2020 2020 2020 2061 6363 6f75 6e74           account
+00011b20: 5f74 6f20 3d20 6b69 6e64 2e73 706c 6974  _to = kind.split
+00011b30: 2822 2d3e 2229 5b31 5d0d 0a0d 0a20 2020  ("->")[1]....   
 00011b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b50: 2020 2020 2020 2020 2020 2020 206e 616d               nam
-00011b60: 6520 3d20 6974 656d 5f6e 616d 655b 313a  e = item_name[1:
-00011b70: 5d2e 7374 7269 7028 290d 0a20 2020 2020  ].strip()..     
-00011b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ba0: 2020 2073 6967 6e20 3d20 6974 656d 5f6e     sign = item_n
-00011bb0: 616d 655b 305d 0d0a 0d0a 2020 2020 2020  ame[0]....      
-00011bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011be0: 2020 6966 2073 6967 6e20 3d3d 2022 2b22    if sign == "+"
-00011bf0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00011c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c10: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011c20: 6c69 7070 6564 5f73 6967 6e20 3d20 222d  lipped_sign = "-
-00011c30: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00011c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00011c60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011b60: 2066 6c6f 775f 6461 7461 5b61 6363 6f75   flow_data[accou
+00011b70: 6e74 5f66 726f 6d5d 5b73 7562 6a65 6374  nt_from][subject
+00011b80: 5d5b 6167 656e 7431 5d2e 6170 7065 6e64  ][agent1].append
+00011b90: 2822 2d22 202b 2073 7472 2871 7561 6e74  ("-" + str(quant
+00011ba0: 6974 7929 290d 0a20 2020 2020 2020 2020  ity))..         
+00011bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011bc0: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
+00011bd0: 6461 7461 5b61 6363 6f75 6e74 5f74 6f5d  data[account_to]
+00011be0: 5b73 7562 6a65 6374 5d5b 6167 656e 7432  [subject][agent2
+00011bf0: 5d2e 6170 7065 6e64 2873 7472 2871 7561  ].append(str(qua
+00011c00: 6e74 6974 7929 290d 0a0d 0a20 2020 2020  ntity))....     
+00011c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c20: 2020 2020 2020 2020 2020 2023 206c 6f77             # low
+00011c30: 6572 2070 6172 7420 6f66 206d 6174 7269  er part of matri
+00011c40: 7820 3d20 6368 616e 6765 7320 696e 2061  x = changes in a
+00011c50: 7373 6574 7320 616e 7320 6c69 6162 696c  ssets ans liabil
+00011c60: 6974 6965 730d 0a0d 0a20 2020 2020 2020  ities....       
 00011c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c80: 2020 2020 2020 2020 2020 2020 2020 666c                fl
-00011c90: 6970 7065 645f 7369 676e 203d 2022 2b22  ipped_sign = "+"
-00011ca0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00011c80: 2020 2020 2020 2020 2061 3120 3d20 6669           a1 = fi
+00011c90: 6c65 6461 7461 5b22 6131 225d 2020 2320  ledata["a1"]  # 
+00011ca0: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
 00011cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cc0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00011cd0: 6f74 2022 2873 2922 2069 6e20 6e61 6d65  ot "(s)" in name
-00011ce0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00011cc0: 2020 2020 2020 2020 6531 203d 2066 696c          e1 = fil
+00011cd0: 6564 6174 615b 2265 3122 5d20 2023 202b  edata["e1"]  # +
+00011ce0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
 00011cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011d10: 6c6f 775f 6461 7461 5b22 4b41 225d 5b22  low_data["KA"]["
-00011d20: ce94 2025 7322 2025 206e 616d 655d 5b61  .. %s" % name][a
-00011d30: 6765 6e74 325d 2e61 7070 656e 6428 0d0a  gent2].append(..
-00011d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d70: 2228 2220 2b20 666c 6970 7065 645f 7369  "(" + flipped_si
-00011d80: 676e 202b 2071 7561 6e74 6974 7920 2b20  gn + quantity + 
-00011d90: 2229 2229 0d0a 0d0a 2020 2020 2020 2020  ")")....        
-00011da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011db0: 2020 2020 2020 2020 2320 6c69 6162 696c          # liabil
-00011dc0: 6974 6965 730d 0a20 2020 2020 2020 2020  ities..         
-00011dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011de0: 2020 2020 2020 2066 6f72 2069 7465 6d5f         for item_
-00011df0: 6e61 6d65 2069 6e20 6c31 2e73 706c 6974  name in l1.split
-00011e00: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+00011d00: 2020 2020 2020 206c 3120 3d20 6669 6c65         l1 = file
+00011d10: 6461 7461 5b22 6c31 225d 2020 2320 2b20  data["l1"]  # + 
+00011d20: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+00011d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d40: 2020 2020 2020 6132 203d 2066 696c 6564        a2 = filed
+00011d50: 6174 615b 2261 3222 5d20 2023 202b 2022  ata["a2"]  # + "
+00011d60: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
+00011d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d80: 2020 2020 2065 3220 3d20 6669 6c65 6461       e2 = fileda
+00011d90: 7461 5b22 6532 225d 2020 2320 2b20 225c  ta["e2"]  # + "\
+00011da0: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
+00011db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011dc0: 2020 2020 6c32 203d 2066 696c 6564 6174      l2 = filedat
+00011dd0: 615b 226c 3222 5d20 2023 202b 2022 5c6e  a["l2"]  # + "\n
+00011de0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+00011df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e00: 2020 2020 2023 2061 7373 6574 730d 0a20       # assets.. 
 00011e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00011e30: 6974 656d 5f6e 616d 6520 213d 2022 223a  item_name != "":
-00011e40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e60: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-00011e70: 2069 7465 6d5f 6e61 6d65 5b31 3a5d 2e73   item_name[1:].s
-00011e80: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
-00011e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e20: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00011e30: 6f72 2069 7465 6d5f 6e61 6d65 2069 6e20  or item_name in 
+00011e40: 6131 2e73 706c 6974 2822 5c6e 2229 3a20  a1.split("\n"): 
+00011e50: 2023 202b 2065 312e 7370 6c69 7428 225c   # + e1.split("\
+00011e60: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+00011e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e80: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
+00011e90: 6d5f 6e61 6d65 2021 3d20 2222 3a0d 0a20  m_name != "":.. 
 00011ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011eb0: 7369 676e 203d 2069 7465 6d5f 6e61 6d65  sign = item_name
-00011ec0: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
-00011ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ee0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00011ef0: 6620 6e6f 7420 2228 7329 2220 696e 206e  f not "(s)" in n
-00011f00: 616d 653a 0d0a 2020 2020 2020 2020 2020  ame:..          
-00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f30: 2020 666c 6f77 5f64 6174 615b 224b 4122    flow_data["KA"
-00011f40: 5d5b 22ce 9420 2573 2220 2520 6e61 6d65  ][".. %s" % name
-00011f50: 5d5b 6167 656e 7431 5d2e 6170 7065 6e64  ][agent1].append
-00011f60: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00011eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ec0: 2020 2020 2020 206e 616d 6520 3d20 6974         name = it
+00011ed0: 656d 5f6e 616d 655b 313a 5d2e 7374 7269  em_name[1:].stri
+00011ee0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+00011ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f00: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+00011f10: 6e20 3d20 6974 656d 5f6e 616d 655b 305d  n = item_name[0]
+00011f20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00011f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f40: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00011f50: 6967 6e20 3d3d 2022 2b22 3a0d 0a20 2020  ign == "+":..   
+00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00011f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f90: 2020 2022 2822 202b 2073 6967 6e20 2b20     "(" + sign + 
-00011fa0: 7175 616e 7469 7479 202b 2022 2922 290d  quantity + ")").
-00011fb0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00011fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011fd0: 2020 2066 6f72 2069 7465 6d5f 6e61 6d65     for item_name
-00011fe0: 2069 6e20 6c32 2e73 706c 6974 2822 5c6e   in l2.split("\n
-00011ff0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00012000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012010: 2020 2020 2020 2020 2069 6620 6974 656d           if item
-00012020: 5f6e 616d 6520 213d 2022 223a 0d0a 2020  _name != "":..  
-00012030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012050: 2020 2020 2020 6e61 6d65 203d 2069 7465        name = ite
-00012060: 6d5f 6e61 6d65 5b31 3a5d 2e73 7472 6970  m_name[1:].strip
-00012070: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00012080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012090: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-000120a0: 203d 2069 7465 6d5f 6e61 6d65 5b30 5d0d   = item_name[0].
-000120b0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00011f80: 2020 2020 2020 2020 2066 6c69 7070 6564           flipped
+00011f90: 5f73 6967 6e20 3d20 222d 220d 0a20 2020  _sign = "-"..   
+00011fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fc0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00011fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ff0: 2020 2020 2020 2020 666c 6970 7065 645f          flipped_
+00012000: 7369 676e 203d 2022 2b22 0d0a 0d0a 2020  sign = "+"....  
+00012010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012030: 2020 2020 2020 6966 206e 6f74 2022 2873        if not "(s
+00012040: 2922 2069 6e20 6e61 6d65 3a0d 0a20 2020  )" in name:..   
+00012050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012070: 2020 2020 2020 2020 2066 6c6f 775f 6461           flow_da
+00012080: 7461 5b22 4b41 225d 5b22 ce94 2025 7322  ta["KA"][".. %s"
+00012090: 2025 206e 616d 655d 5b61 6765 6e74 315d   % name][agent1]
+000120a0: 2e61 7070 656e 6428 0d0a 2020 2020 2020  .append(..      
+000120b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000120c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120d0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-000120e0: 7420 2228 7329 2220 696e 206e 616d 653a  t "(s)" in name:
-000120f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012110: 2020 2020 2020 2020 2020 2020 2020 666c                fl
-00012120: 6f77 5f64 6174 615b 224b 4122 5d5b 22ce  ow_data["KA"][".
-00012130: 9420 2573 2220 2520 6e61 6d65 5d5b 6167  . %s" % name][ag
-00012140: 656e 7432 5d2e 6170 7065 6e64 280d 0a20  ent2].append(.. 
-00012150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120d0: 2020 2020 2020 2020 2020 2228 2220 2b20            "(" + 
+000120e0: 666c 6970 7065 645f 7369 676e 202b 2071  flipped_sign + q
+000120f0: 7561 6e74 6974 7920 2b20 2229 2229 0d0a  uantity + ")")..
+00012100: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012120: 2020 666f 7220 6974 656d 5f6e 616d 6520    for item_name 
+00012130: 696e 2061 322e 7370 6c69 7428 225c 6e22  in a2.split("\n"
+00012140: 293a 2020 2320 2b20 6532 2e73 706c 6974  ):  # + e2.split
+00012150: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
 00012160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012170: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00012180: 2822 202b 2073 6967 6e20 2b20 7175 616e  (" + sign + quan
-00012190: 7469 7479 202b 2022 2922 290d 0a0d 0a20  tity + ")").... 
-000121a0: 2020 2020 2020 2020 2020 2023 2070 7269             # pri
-000121b0: 6e74 2866 6c6f 775f 6461 7461 290d 0a20  nt(flow_data).. 
-000121c0: 2020 2020 2020 2020 2020 2064 665f 6372             df_cr
-000121d0: 6564 6974 203d 2070 642e 4461 7461 4672  edit = pd.DataFr
-000121e0: 616d 6528 666c 6f77 5f64 6174 615b 2243  ame(flow_data["C
-000121f0: 4122 5d29 2e54 0d0a 2020 2020 2020 2020  A"]).T..        
-00012200: 2020 2020 6466 5f63 6170 6974 616c 203d      df_capital =
-00012210: 2070 642e 4461 7461 4672 616d 6528 666c   pd.DataFrame(fl
-00012220: 6f77 5f64 6174 615b 224b 4122 5d29 2e54  ow_data["KA"]).T
-00012230: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00012240: 6466 5f6d 6572 6765 203d 2070 642e 636f  df_merge = pd.co
-00012250: 6e63 6174 285b 6466 5f63 7265 6469 742c  ncat([df_credit,
-00012260: 2064 665f 6361 7069 7461 6c5d 2c20 6178   df_capital], ax
-00012270: 6973 3d31 2c20 6b65 7973 3d5b 2743 4127  is=1, keys=['CA'
-00012280: 2c20 274b 4127 5d29 2e73 7761 706c 6576  , 'KA']).swaplev
-00012290: 656c 2830 2c20 312c 6178 6973 3d31 292e  el(0, 1,axis=1).
-000122a0: 736f 7274 5f69 6e64 6578 2861 7869 733d  sort_index(axis=
-000122b0: 3129 0d0a 0d0a 0d0a 2020 2020 2020 2020  1)......        
-000122c0: 2020 2020 2320 6170 7065 6e64 206e 6577      # append new
-000122d0: 2063 6f6c 756d 6e73 0d0a 2020 2020 2020   columns..      
-000122e0: 2020 2020 2020 636f 6c5f 6469 6374 5f63        col_dict_c
-000122f0: 6120 3d20 7b7d 0d0a 2020 2020 2020 2020  a = {}..        
-00012300: 2020 2020 666f 7220 636f 6c20 696e 2064      for col in d
-00012310: 665f 6372 6564 6974 2e63 6f6c 756d 6e73  f_credit.columns
-00012320: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00012330: 2020 2063 6f6c 5f64 6963 745f 6361 5b63     col_dict_ca[c
-00012340: 6f6c 5d20 3d20 636f 6c20 2b20 2220 2843  ol] = col + " (C
-00012350: 4129 220d 0a0d 0a20 2020 2020 2020 2020  A)"....         
-00012360: 2020 2063 6f6c 5f64 6963 745f 6b61 203d     col_dict_ka =
-00012370: 207b 7d0d 0a20 2020 2020 2020 2020 2020   {}..           
-00012380: 2066 6f72 2063 6f6c 2069 6e20 6466 5f63   for col in df_c
-00012390: 6170 6974 616c 2e63 6f6c 756d 6e73 3a0d  apital.columns:.
-000123a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000123b0: 2063 6f6c 5f64 6963 745f 6b61 5b63 6f6c   col_dict_ka[col
-000123c0: 5d20 3d20 636f 6c20 2b20 2220 284b 4129  ] = col + " (KA)
-000123d0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-000123e0: 2064 665f 6372 6564 6974 203d 2064 665f   df_credit = df_
-000123f0: 6372 6564 6974 2e72 656e 616d 6528 636f  credit.rename(co
-00012400: 6c75 6d6e 7320 3d20 636f 6c5f 6469 6374  lumns = col_dict
-00012410: 5f63 6129 0d0a 2020 2020 2020 2020 2020  _ca)..          
-00012420: 2020 6466 5f63 6170 6974 616c 203d 2064    df_capital = d
-00012430: 665f 6361 7069 7461 6c2e 7265 6e61 6d65  f_capital.rename
-00012440: 2863 6f6c 756d 6e73 3d63 6f6c 5f64 6963  (columns=col_dic
-00012450: 745f 6b61 290d 0a0d 0a20 2020 2020 2020  t_ka)....       
-00012460: 2020 2020 2064 665f 6d65 7267 6532 203d       df_merge2 =
-00012470: 2070 642e 636f 6e63 6174 285b 6466 5f63   pd.concat([df_c
-00012480: 7265 6469 742c 2064 665f 6361 7069 7461  redit, df_capita
-00012490: 6c5d 2c20 6178 6973 3d31 290d 0a0d 0a20  l], axis=1).... 
-000124a0: 2020 2020 2020 2020 2020 2064 665f 6d65             df_me
-000124b0: 7267 6532 203d 2064 665f 6d65 7267 6532  rge2 = df_merge2
-000124c0: 2e72 6569 6e64 6578 2873 6f72 7465 6428  .reindex(sorted(
-000124d0: 6466 5f6d 6572 6765 322e 636f 6c75 6d6e  df_merge2.column
-000124e0: 7329 2c20 6178 6973 3d31 290d 0a20 2020  s), axis=1)..   
-000124f0: 2020 2020 2020 2020 2064 665f 6d65 7267           df_merg
-00012500: 6532 203d 2064 665f 6d65 7267 6532 2e72  e2 = df_merge2.r
-00012510: 6569 6e64 6578 2873 6f72 7465 6428 6466  eindex(sorted(df
-00012520: 5f6d 6572 6765 322e 696e 6465 7829 2c20  _merge2.index), 
-00012530: 6178 6973 3d30 290d 0a0d 0a20 2020 2020  axis=0)....     
-00012540: 2020 2020 2020 2064 6620 3d20 6466 5f6d         df = df_m
-00012550: 6572 6765 2e66 696c 6c6e 6128 302e 3029  erge.fillna(0.0)
-00012560: 2e73 6f72 745f 696e 6465 7828 290d 0a0d  .sort_index()...
-00012570: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00012580: 6566 206a 6f69 6e5f 656c 656d 656e 7473  ef join_elements
-00012590: 286d 795f 6974 656d 293a 0d0a 2020 2020  (my_item):..    
-000125a0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000125b0: 7369 6e73 7461 6e63 6528 6d79 5f69 7465  sinstance(my_ite
-000125c0: 6d2c 206c 6973 7429 3a0d 0a20 2020 2020  m, list):..     
-000125d0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000125e0: 795f 6c69 7374 203d 205b 5d0d 0a20 2020  y_list = []..   
-000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012600: 2066 6f72 2073 7562 6974 656d 2069 6e20   for subitem in 
-00012610: 6d79 5f69 7465 6d3a 0d0a 2020 2020 2020  my_item:..      
+00012170: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00012180: 6974 656d 5f6e 616d 6520 213d 2022 223a  item_name != "":
+00012190: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000121a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121b0: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+000121c0: 2069 7465 6d5f 6e61 6d65 5b31 3a5d 2e73   item_name[1:].s
+000121d0: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+000121e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012200: 7369 676e 203d 2069 7465 6d5f 6e61 6d65  sign = item_name
+00012210: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
+00012220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012230: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00012240: 6620 7369 676e 203d 3d20 222b 223a 0d0a  f sign == "+":..
+00012250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012270: 2020 2020 2020 2020 2020 2020 666c 6970              flip
+00012280: 7065 645f 7369 676e 203d 2022 2d22 0d0a  ped_sign = "-"..
+00012290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122b0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000122c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122e0: 2020 2020 2020 2020 2020 2066 6c69 7070             flipp
+000122f0: 6564 5f73 6967 6e20 3d20 222b 220d 0a0d  ed_sign = "+"...
+00012300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012320: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00012330: 2228 7329 2220 696e 206e 616d 653a 0d0a  "(s)" in name:..
+00012340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012360: 2020 2020 2020 2020 2020 2020 666c 6f77              flow
+00012370: 5f64 6174 615b 224b 4122 5d5b 22ce 9420  _data["KA"][".. 
+00012380: 2573 2220 2520 6e61 6d65 5d5b 6167 656e  %s" % name][agen
+00012390: 7432 5d2e 6170 7065 6e64 280d 0a20 2020  t2].append(..   
+000123a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123c0: 2020 2020 2020 2020 2020 2020 2022 2822               "("
+000123d0: 202b 2066 6c69 7070 6564 5f73 6967 6e20   + flipped_sign 
+000123e0: 2b20 7175 616e 7469 7479 202b 2022 2922  + quantity + ")"
+000123f0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00012400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012410: 2020 2020 2023 206c 6961 6269 6c69 7469       # liabiliti
+00012420: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+00012430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012440: 2020 2020 666f 7220 6974 656d 5f6e 616d      for item_nam
+00012450: 6520 696e 206c 312e 7370 6c69 7428 225c  e in l1.split("\
+00012460: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+00012470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012480: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
+00012490: 6d5f 6e61 6d65 2021 3d20 2222 3a0d 0a20  m_name != "":.. 
+000124a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000124b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000124c0: 2020 2020 2020 206e 616d 6520 3d20 6974         name = it
+000124d0: 656d 5f6e 616d 655b 313a 5d2e 7374 7269  em_name[1:].stri
+000124e0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+000124f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012500: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+00012510: 6e20 3d20 6974 656d 5f6e 616d 655b 305d  n = item_name[0]
+00012520: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00012530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012540: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00012550: 6f74 2022 2873 2922 2069 6e20 6e61 6d65  ot "(s)" in name
+00012560: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012580: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00012590: 6c6f 775f 6461 7461 5b22 4b41 225d 5b22  low_data["KA"]["
+000125a0: ce94 2025 7322 2025 206e 616d 655d 5b61  .. %s" % name][a
+000125b0: 6765 6e74 315d 2e61 7070 656e 6428 0d0a  gent1].append(..
+000125c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125f0: 2228 2220 2b20 7369 676e 202b 2071 7561  "(" + sign + qua
+00012600: 6e74 6974 7920 2b20 2229 2229 0d0a 0d0a  ntity + ")")....
+00012610: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00012620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012630: 2020 6966 2073 7562 6974 656d 2021 3d20    if subitem != 
-00012640: 2230 223a 0d0a 2020 2020 2020 2020 2020  "0":..          
-00012650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012660: 2020 6d79 5f6c 6973 742e 6170 7065 6e64    my_list.append
-00012670: 2873 7562 6974 656d 290d 0a0d 0a20 2020  (subitem)....   
-00012680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012690: 2072 6574 7572 6e20 222b 222e 6a6f 696e   return "+".join
-000126a0: 286d 795f 6c69 7374 290d 0a0d 0a20 2020  (my_list)....   
-000126b0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-000126c0: 6620 6d79 5f69 7465 6d20 3d3d 2030 2e30  f my_item == 0.0
-000126d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000126e0: 2020 2020 2020 2072 6574 7572 6e20 2230         return "0
-000126f0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00012700: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00012710: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00012720: 7475 726e 206d 795f 6974 656d 0d0a 0d0a  turn my_item....
-00012730: 2020 2020 2020 2020 2020 2020 6466 203d              df =
-00012740: 2064 662e 6170 706c 796d 6170 286a 6f69   df.applymap(joi
-00012750: 6e5f 656c 656d 656e 7473 290d 0a0d 0a0d  n_elements).....
-00012760: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00012770: 2073 756d 206f 7665 7220 7468 6520 636f   sum over the co
-00012780: 6c75 6d6e 730d 0a0d 0a20 2020 2020 2020  lumns....       
-00012790: 2020 2020 2064 6566 2065 7661 6c5f 7375       def eval_su
-000127a0: 6d28 636f 6c75 6d6e 293a 0d0a 2020 2020  m(column):..    
-000127b0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-000127c0: 6d6e 203d 205b 7374 7228 6329 2e72 6570  mn = [str(c).rep
-000127d0: 6c61 6365 2822 5e22 2c20 222a 2a22 2920  lace("^", "**") 
-000127e0: 666f 7220 6320 696e 2063 6f6c 756d 6e5d  for c in column]
-000127f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012800: 2020 6d79 5f65 7870 7220 3d20 222b 222e    my_expr = "+".
-00012810: 6a6f 696e 2863 6f6c 756d 6e29 0d0a 2020  join(column)..  
-00012820: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00012830: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00012840: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-00012850: 6172 7365 5f65 7870 7228 6d79 5f65 7870  arse_expr(my_exp
-00012860: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
-00012870: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-00012880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012890: 2072 6574 7572 6e20 6d79 5f65 7870 720d   return my_expr.
-000128a0: 0a0d 0a0d 0a0d 0a20 2020 2020 2020 2020  .......         
-000128b0: 2020 2064 665b 2254 6f74 616c 225d 203d     df["Total"] =
-000128c0: 2064 662e 542e 6167 6728 6576 616c 5f73   df.T.agg(eval_s
-000128d0: 756d 2920 2023 2064 662e 542e 7375 6d28  um)  # df.T.sum(
-000128e0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
-000128f0: 662e 6c6f 635b 2254 6f74 616c 225d 203d  f.loc["Total"] =
-00012900: 2064 662e 6167 6728 6576 616c 5f73 756d   df.agg(eval_sum
-00012910: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
-00012920: 7269 6e74 2822 544f 5441 4c22 2c64 662e  rint("TOTAL",df.
-00012930: 6c6f 635b 2254 6f74 616c 225d 290d 0a20  loc["Total"]).. 
-00012940: 2020 2020 2020 2020 2020 2064 665f 6d65             df_me
-00012950: 7267 6532 5b22 546f 7461 6c22 5d20 3d20  rge2["Total"] = 
-00012960: 6466 5b22 546f 7461 6c22 5d0d 0a0d 0a20  df["Total"].... 
-00012970: 2020 2020 2020 2020 2020 2023 2067 6574             # get
-00012980: 2074 6865 206e 6577 2063 6f6c 756d 6e73   the new columns
-00012990: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000129a0: 2320 6974 6572 6174 6520 7468 726f 7567  # iterate throug
-000129b0: 6820 7468 6520 636f 6c75 6d6e 730d 0a20  h the columns.. 
-000129c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000129d0: 2864 662e 636f 6c75 6d6e 7329 0d0a 0d0a  (df.columns)....
-000129e0: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-000129f0: 7220 636f 6c75 6d6e 2069 6e20 6466 2e63  r column in df.c
-00012a00: 6f6c 756d 6e73 3a0d 0a20 2020 2020 2020  olumns:..       
-00012a10: 2020 2020 2020 2020 2069 6620 636f 6c75           if colu
-00012a20: 6d6e 5b30 5d20 213d 2022 546f 7461 6c22  mn[0] != "Total"
-00012a30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00012a40: 2020 2020 2020 2070 7269 6e74 2863 6f6c         print(col
-00012a50: 756d 6e5b 305d 202b 2022 2022 2020 2b20  umn[0] + " "  + 
-00012a60: 2228 2573 2922 2025 2063 6f6c 756d 6e5b  "(%s)" % column[
-00012a70: 315d 2c64 662e 6c6f 635b 2254 6f74 616c  1],df.loc["Total
-00012a80: 225d 5b63 6f6c 756d 6e5d 290d 0a20 2020  "][column])..   
-00012a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012aa0: 2064 665f 6d65 7267 6532 2e6c 6f63 5b22   df_merge2.loc["
-00012ab0: 546f 7461 6c22 2c63 6f6c 756d 6e5b 305d  Total",column[0]
-00012ac0: 202b 2022 2022 2020 2b20 2228 2573 2922   + " "  + "(%s)"
-00012ad0: 2025 2063 6f6c 756d 6e5b 315d 5d20 3d20   % column[1]] = 
-00012ae0: 6466 2e6c 6f63 5b22 546f 7461 6c22 5d5b  df.loc["Total"][
-00012af0: 636f 6c75 6d6e 5d0d 0a0d 0a0d 0a0d 0a20  column]........ 
-00012b00: 2020 2020 2020 2020 2020 2064 6566 2073             def s
-00012b10: 696d 706c 6966 795f 6578 7072 286d 795f  implify_expr(my_
-00012b20: 6974 656d 293a 0d0a 2020 2020 2020 2020  item):..        
-00012b30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00012b40: 696d 706c 6966 7928 6d79 5f69 7465 6d29  implify(my_item)
-00012b50: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00012b60: 6466 203d 2064 662e 6170 706c 796d 6170  df = df.applymap
-00012b70: 2873 696d 706c 6966 795f 6578 7072 290d  (simplify_expr).
-00012b80: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00012b90: 665f 666f 725f 6578 6365 6c20 3d20 6466  f_for_excel = df
-00012ba0: 2e63 6f70 7928 290d 0a0d 0a0d 0a0d 0a20  .copy()........ 
-00012bb0: 2020 2020 2020 2020 2020 2064 6566 2061             def a
-00012bc0: 6262 7265 7669 6174 655f 7a65 726f 735f  bbreviate_zeros_
-00012bd0: 6c61 7465 7828 6d79 5f69 7465 6d29 3a0d  latex(my_item):.
-00012be0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012bf0: 2069 6620 6d79 5f69 7465 6d20 3d3d 2022   if my_item == "
-00012c00: 3022 206f 7220 6d79 5f69 7465 6d20 3d3d  0" or my_item ==
-00012c10: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00012c20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00012c30: 2220 2e2d 2022 2020 2320 2e2d 2022 0d0a  " .- "  # .- "..
-00012c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012c50: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00012c60: 2020 2020 2020 2020 2020 2073 203d 2070             s = p
-00012c70: 7269 6e74 696e 672e 6c61 7465 7828 6d79  rinting.latex(my
-00012c80: 5f69 7465 6d20 2c6d 6f64 653d 2269 6e6c  _item ,mode="inl
-00012c90: 696e 6522 2920 2320 206d 6f64 653d 2269  ine") #  mode="i
-00012ca0: 6e6c 696e 6522 290d 0a20 2020 2020 2020  nline")..       
-00012cb0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00012cc0: 6e74 2873 290d 0a20 2020 2020 2020 2020  nt(s)..         
-00012cd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00012ce0: 6e20 730d 0a0d 0a20 2020 2020 2020 2020  n s....         
-00012cf0: 2020 2023 6466 5f62 6163 6b75 7020 3d20     #df_backup = 
-00012d00: 6466 2e63 6f70 7928 290d 0a20 2020 2020  df.copy()..     
-00012d10: 2020 2020 2020 2064 6620 3d20 6466 2e61         df = df.a
-00012d20: 7070 6c79 6d61 7028 6162 6272 6576 6961  pplymap(abbrevia
-00012d30: 7465 5f7a 6572 6f73 5f6c 6174 6578 290d  te_zeros_latex).
-00012d40: 0a0d 0a0d 0a0d 0a20 2020 2020 2020 2020  .......         
-00012d50: 2020 2064 665f 6d65 7267 6532 203d 2064     df_merge2 = d
-00012d60: 665f 6d65 7267 6532 2e72 6570 6c61 6365  f_merge2.replace
-00012d70: 286e 702e 6e61 6e2c 2027 272c 2072 6567  (np.nan, '', reg
-00012d80: 6578 3d54 7275 6529 0d0a 2020 2020 2020  ex=True)..      
-00012d90: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
-00012da0: 3d20 6466 5f6d 6572 6765 322e 7265 706c  = df_merge2.repl
-00012db0: 6163 6528 2230 222c 2027 272c 2072 6567  ace("0", '', reg
-00012dc0: 6578 3d54 7275 6529 0d0a 2020 2020 2020  ex=True)..      
-00012dd0: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
-00012de0: 3d20 6466 5f6d 6572 6765 322e 7265 706c  = df_merge2.repl
-00012df0: 6163 6528 302c 2027 272c 2072 6567 6578  ace(0, '', regex
-00012e00: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
-00012e10: 2020 2020 6466 5f6d 6572 6765 3220 3d20      df_merge2 = 
-00012e20: 6466 5f6d 6572 6765 322e 7265 706c 6163  df_merge2.replac
-00012e30: 6528 302e 302c 2027 272c 2072 6567 6578  e(0.0, '', regex
-00012e40: 3d54 7275 6529 0d0a 0d0a 2020 2020 2020  =True)....      
-00012e50: 2020 2020 2020 2320 7072 696e 7428 6466        # print(df
-00012e60: 2e74 6f5f 7374 7269 6e67 2829 290d 0a20  .to_string()).. 
-00012e70: 2020 2020 2020 2020 2020 2023 2064 662e             # df.
-00012e80: 696c 6f63 5b30 2c30 5d20 3d20 2224 5c5c  iloc[0,0] = "$\\
-00012e90: 616c 7068 6124 220d 0a0d 0a20 2020 2020  alpha$"....     
-00012ea0: 2020 2020 2020 2070 642e 6f70 7469 6f6e         pd.option
-00012eb0: 732e 6469 7370 6c61 792e 6d61 785f 636f  s.display.max_co
-00012ec0: 6c77 6964 7468 203d 204e 6f6e 650d 0a0d  lwidth = None...
-00012ed0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00012ee0: 6d6f 6465 203d 3d20 2268 746d 6c22 3a20  mode == "html": 
-00012ef0: 2320 3c20 4e4f 5420 5945 5420 5355 5050  # < NOT YET SUPP
-00012f00: 4f52 5445 440d 0a0d 0a20 2020 2020 2020  ORTED....       
-00012f10: 2020 2020 2020 2020 2064 665f 6874 6d6c           df_html
-00012f20: 203d 2022 2222 0d0a 2020 2020 2020 2020   = """..        
-00012f30: 3c68 746d 6c3e 0d0a 2020 2020 2020 2020  <html>..        
-00012f40: 3c68 6561 643e 0d0a 2020 2020 2020 2020  <head>..        
-00012f50: 3c74 6974 6c65 3e4d 6174 6865 6465 6d6f  <title>Mathedemo
-00012f60: 3c2f 7469 746c 653e 0d0a 2020 2020 2020  </title>..      
-00012f70: 2020 3c73 6372 6970 7420 7479 7065 3d22    <script type="
-00012f80: 7465 7874 2f78 2d6d 6174 686a 6178 2d63  text/x-mathjax-c
-00012f90: 6f6e 6669 6722 3e0d 0a20 2020 2020 2020  onfig">..       
-00012fa0: 2020 204d 6174 684a 6178 2e48 7562 2e43     MathJax.Hub.C
-00012fb0: 6f6e 6669 6728 7b74 6578 326a 6178 3a20  onfig({tex2jax: 
-00012fc0: 7b69 6e6c 696e 654d 6174 683a 205b 5b27  {inlineMath: [['
-00012fd0: 2427 2c27 2427 5d2c 205b 275c 5c28 272c  $','$'], ['\\(',
-00012fe0: 275c 5c29 275d 5d7d 7d29 3b0d 0a20 2020  '\\)']]}});..   
-00012ff0: 2020 2020 203c 2f73 6372 6970 743e 0d0a       </script>..
-00013000: 2020 2020 2020 2020 3c73 6372 6970 7420          <script 
-00013010: 7479 7065 3d22 7465 7874 2f6a 6176 6173  type="text/javas
-00013020: 6372 6970 7422 0d0a 2020 2020 2020 2020  cript"..        
-00013030: 2020 7372 633d 2268 7474 703a 2f2f 6364    src="http://cd
-00013040: 6e6a 732e 636c 6f75 6466 6c61 7265 2e63  njs.cloudflare.c
-00013050: 6f6d 2f61 6a61 782f 6c69 6273 2f6d 6174  om/ajax/libs/mat
-00013060: 686a 6178 2f32 2e37 2e31 2f4d 6174 684a  hjax/2.7.1/MathJ
-00013070: 6178 2e6a 733f 636f 6e66 6967 3d54 6558  ax.js?config=TeX
-00013080: 2d41 4d53 2d4d 4d4c 5f48 544d 4c6f 724d  -AMS-MML_HTMLorM
-00013090: 4d4c 223e 0d0a 2020 2020 2020 2020 3c2f  ML">..        </
-000130a0: 7363 7269 7074 3e0d 0a20 2020 2020 2020  script>..       
-000130b0: 203c 6c69 6e6b 2072 656c 3d22 7374 796c   <link rel="styl
-000130c0: 6573 6865 6574 2220 6872 6566 3d22 6d79  esheet" href="my
-000130d0: 7374 796c 652e 6373 7322 3e0d 0a20 2020  style.css">..   
-000130e0: 2020 2020 203c 2f68 6561 643e 0d0a 0d0a       </head>....
-000130f0: 2020 2020 2020 2020 3c62 6f64 793e 0d0a          <body>..
-00013100: 2020 2020 2020 2020 2573 0d0a 2020 2020          %s..    
-00013110: 2020 2020 3c2f 626f 6479 3e0d 0a20 2020      </body>..   
-00013120: 2020 2020 203c 2f68 746d 6c3e 0d0a 2020       </html>..  
-00013130: 2020 2020 2020 2222 2225 2020 6466 2e74        """%  df.t
-00013140: 6f5f 6874 6d6c 2829 0d0a 0d0a 2020 2020  o_html()....    
-00013150: 2020 2020 2020 2020 2020 2020 7061 6765              page
-00013160: 536f 7572 6365 203d 2022 2222 0d0a 2020  Source = """..  
-00013170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013180: 2020 2020 2020 2020 2020 203c 6874 6d6c             <html
-00013190: 3e3c 6865 6164 3e0d 0a20 2020 2020 2020  ><head>..       
-000131a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000131b0: 2020 2020 2020 3c2f 6865 6164 3e0d 0a20        </head>.. 
-000131c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000131d0: 2020 2020 2020 2020 2020 2020 3c62 6f64              <bod
-000131e0: 793e 0d0a 2020 2020 2020 2020 2020 2020  y>..            
-000131f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013200: 203c 703e 6173 6466 3c2f 703e 0d0a 2020   <p>asdf</p>..  
-00013210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013220: 2020 2020 2020 2020 2020 203c 2f62 6f64             </bod
-00013230: 793e 3c2f 6874 6d6c 3e0d 0a20 2020 2020  y></html>..     
-00013240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013250: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-00013260: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00013270: 2042 4c41 0d0a 0d0a 2020 2020 2020 2020   BLA....        
-00013280: 2020 2020 2020 2020 2320 7772 6974 6520          # write 
-00013290: 7061 6765 2073 6f75 7263 6520 746f 2068  page source to h
-000132a0: 746d 6c0d 0a20 2020 2020 2020 2020 2020  tml..           
-000132b0: 2020 2020 2069 6620 4661 6c73 653a 0d0a       if False:..
-000132c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000132d0: 2020 2020 2320 4445 5052 4543 4941 5445      # DEPRECIATE
-000132e0: 440d 0a20 2020 2020 2020 2020 2020 2020  D..             
-000132f0: 2020 2020 2020 2070 6174 6820 3d20 6f73         path = os
-00013300: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
-00013310: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
-00013320: 6669 6c65 5f5f 2929 0d0a 2020 2020 2020  file__))..      
-00013330: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00013340: 6c65 203d 206f 7065 6e28 6f73 2e70 6174  le = open(os.pat
-00013350: 682e 6a6f 696e 2870 6174 682c 2266 696c  h.join(path,"fil
-00013360: 6573 2f6d 796d 6174 7269 782e 6874 6d6c  es/mymatrix.html
-00013370: 2229 2c22 7722 2c65 6e63 6f64 696e 673d  "),"w",encoding=
-00013380: 2775 7466 2d38 2729 0d0a 2020 2020 2020  'utf-8')..      
-00013390: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-000133a0: 6c65 2e77 7269 7465 2864 665f 6874 6d6c  le.write(df_html
-000133b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000133c0: 2020 2020 2020 2066 696c 652e 636c 6f73         file.clos
-000133d0: 6528 290d 0a0d 0a20 2020 2020 2020 2020  e()....         
-000133e0: 2020 2023 2051 4465 736b 746f 7053 6572     # QDesktopSer
-000133f0: 7669 6365 732e 6f70 656e 5572 6c28 5155  vices.openUrl(QU
-00013400: 726c 2822 2e2f 6669 6c65 732f 6d61 7472  rl("./files/matr
-00013410: 6978 2e68 746d 6c22 2929 0d0a 0d0a 2020  ix.html"))....  
-00013420: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
-00013430: 6520 3d3d 2022 7374 616e 6461 7264 223a  e == "standard":
-00013440: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013450: 2020 6d6f 6465 6c20 3d20 5061 6e64 6173    model = Pandas
-00013460: 4d6f 6465 6c28 6466 5f6d 6572 6765 3229  Model(df_merge2)
-00013470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013480: 2020 6d76 6965 7720 3d20 4d61 7472 6978    mview = Matrix
-00013490: 5669 6577 6572 286d 6f64 656c 2c70 6172  Viewer(model,par
-000134a0: 656e 743d 7365 6c66 290d 0a0d 0a20 2020  ent=self)....   
-000134b0: 2020 2020 2020 2020 2020 2020 2023 206d               # m
-000134c0: 7669 6577 2e77 6562 5669 6577 2e73 6574  view.webView.set
-000134d0: 4874 6d6c 2864 665f 6874 6d6c 290d 0a20  Html(df_html).. 
-000134e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000134f0: 6620 6e6f 7420 7365 6c66 2e74 6573 745f  f not self.test_
-00013500: 6d6f 6465 3a0d 0a20 2020 2020 2020 2020  mode:..         
-00013510: 2020 2020 2020 2020 2020 206d 7669 6577             mview
-00013520: 2e73 686f 7728 290d 0a0d 0a0d 0a20 2020  .show()......   
-00013530: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
-00013540: 203d 3d20 226c 6174 6578 223a 2023 203c   == "latex": # <
+00012630: 666f 7220 6974 656d 5f6e 616d 6520 696e  for item_name in
+00012640: 206c 322e 7370 6c69 7428 225c 6e22 293a   l2.split("\n"):
+00012650: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012670: 2020 2020 2020 6966 2069 7465 6d5f 6e61        if item_na
+00012680: 6d65 2021 3d20 2222 3a0d 0a20 2020 2020  me != "":..     
+00012690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126b0: 2020 206e 616d 6520 3d20 6974 656d 5f6e     name = item_n
+000126c0: 616d 655b 313a 5d2e 7374 7269 7028 290d  ame[1:].strip().
+000126d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000126e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126f0: 2020 2020 2020 2020 2073 6967 6e20 3d20           sign = 
+00012700: 6974 656d 5f6e 616d 655b 305d 0d0a 0d0a  item_name[0]....
+00012710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012730: 2020 2020 2020 2020 6966 206e 6f74 2022          if not "
+00012740: 2873 2922 2069 6e20 6e61 6d65 3a0d 0a20  (s)" in name:.. 
+00012750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012770: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
+00012780: 6461 7461 5b22 4b41 225d 5b22 ce94 2025  data["KA"][".. %
+00012790: 7322 2025 206e 616d 655d 5b61 6765 6e74  s" % name][agent
+000127a0: 325d 2e61 7070 656e 6428 0d0a 2020 2020  2].append(..    
+000127b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127d0: 2020 2020 2020 2020 2020 2020 2228 2220              "(" 
+000127e0: 2b20 7369 676e 202b 2071 7561 6e74 6974  + sign + quantit
+000127f0: 7920 2b20 2229 2229 0d0a 0d0a 2020 2020  y + ")")....    
+00012800: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+00012810: 666c 6f77 5f64 6174 6129 0d0a 2020 2020  flow_data)..    
+00012820: 2020 2020 2020 2020 6466 5f63 7265 6469          df_credi
+00012830: 7420 3d20 7064 2e44 6174 6146 7261 6d65  t = pd.DataFrame
+00012840: 2866 6c6f 775f 6461 7461 5b22 4341 225d  (flow_data["CA"]
+00012850: 292e 540d 0a20 2020 2020 2020 2020 2020  ).T..           
+00012860: 2064 665f 6361 7069 7461 6c20 3d20 7064   df_capital = pd
+00012870: 2e44 6174 6146 7261 6d65 2866 6c6f 775f  .DataFrame(flow_
+00012880: 6461 7461 5b22 4b41 225d 292e 540d 0a0d  data["KA"]).T...
+00012890: 0a20 2020 2020 2020 2020 2020 2064 665f  .            df_
+000128a0: 6d65 7267 6520 3d20 7064 2e63 6f6e 6361  merge = pd.conca
+000128b0: 7428 5b64 665f 6372 6564 6974 2c20 6466  t([df_credit, df
+000128c0: 5f63 6170 6974 616c 5d2c 2061 7869 733d  _capital], axis=
+000128d0: 312c 206b 6579 733d 5b27 4341 272c 2027  1, keys=['CA', '
+000128e0: 4b41 275d 292e 7377 6170 6c65 7665 6c28  KA']).swaplevel(
+000128f0: 302c 2031 2c61 7869 733d 3129 2e73 6f72  0, 1,axis=1).sor
+00012900: 745f 696e 6465 7828 6178 6973 3d31 290d  t_index(axis=1).
+00012910: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00012920: 2023 2061 7070 656e 6420 6e65 7720 636f   # append new co
+00012930: 6c75 6d6e 730d 0a20 2020 2020 2020 2020  lumns..         
+00012940: 2020 2063 6f6c 5f64 6963 745f 6361 203d     col_dict_ca =
+00012950: 207b 7d0d 0a20 2020 2020 2020 2020 2020   {}..           
+00012960: 2066 6f72 2063 6f6c 2069 6e20 6466 5f63   for col in df_c
+00012970: 7265 6469 742e 636f 6c75 6d6e 733a 0d0a  redit.columns:..
+00012980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012990: 636f 6c5f 6469 6374 5f63 615b 636f 6c5d  col_dict_ca[col]
+000129a0: 203d 2063 6f6c 202b 2022 2028 4341 2922   = col + " (CA)"
+000129b0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000129c0: 636f 6c5f 6469 6374 5f6b 6120 3d20 7b7d  col_dict_ka = {}
+000129d0: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
+000129e0: 7220 636f 6c20 696e 2064 665f 6361 7069  r col in df_capi
+000129f0: 7461 6c2e 636f 6c75 6d6e 733a 0d0a 2020  tal.columns:..  
+00012a00: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00012a10: 6c5f 6469 6374 5f6b 615b 636f 6c5d 203d  l_dict_ka[col] =
+00012a20: 2063 6f6c 202b 2022 2028 4b41 2922 0d0a   col + " (KA)"..
+00012a30: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00012a40: 5f63 7265 6469 7420 3d20 6466 5f63 7265  _credit = df_cre
+00012a50: 6469 742e 7265 6e61 6d65 2863 6f6c 756d  dit.rename(colum
+00012a60: 6e73 203d 2063 6f6c 5f64 6963 745f 6361  ns = col_dict_ca
+00012a70: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+00012a80: 665f 6361 7069 7461 6c20 3d20 6466 5f63  f_capital = df_c
+00012a90: 6170 6974 616c 2e72 656e 616d 6528 636f  apital.rename(co
+00012aa0: 6c75 6d6e 733d 636f 6c5f 6469 6374 5f6b  lumns=col_dict_k
+00012ab0: 6129 0d0a 0d0a 2020 2020 2020 2020 2020  a)....          
+00012ac0: 2020 6466 5f6d 6572 6765 3220 3d20 7064    df_merge2 = pd
+00012ad0: 2e63 6f6e 6361 7428 5b64 665f 6372 6564  .concat([df_cred
+00012ae0: 6974 2c20 6466 5f63 6170 6974 616c 5d2c  it, df_capital],
+00012af0: 2061 7869 733d 3129 0d0a 0d0a 2020 2020   axis=1)....    
+00012b00: 2020 2020 2020 2020 6466 5f6d 6572 6765          df_merge
+00012b10: 3220 3d20 6466 5f6d 6572 6765 322e 7265  2 = df_merge2.re
+00012b20: 696e 6465 7828 736f 7274 6564 2864 665f  index(sorted(df_
+00012b30: 6d65 7267 6532 2e63 6f6c 756d 6e73 292c  merge2.columns),
+00012b40: 2061 7869 733d 3129 0d0a 2020 2020 2020   axis=1)..      
+00012b50: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
+00012b60: 3d20 6466 5f6d 6572 6765 322e 7265 696e  = df_merge2.rein
+00012b70: 6465 7828 736f 7274 6564 2864 665f 6d65  dex(sorted(df_me
+00012b80: 7267 6532 2e69 6e64 6578 292c 2061 7869  rge2.index), axi
+00012b90: 733d 3029 0d0a 0d0a 2020 2020 2020 2020  s=0)....        
+00012ba0: 2020 2020 6466 203d 2064 665f 6d65 7267      df = df_merg
+00012bb0: 652e 6669 6c6c 6e61 2830 2e30 292e 736f  e.fillna(0.0).so
+00012bc0: 7274 5f69 6e64 6578 2829 0d0a 0d0a 0d0a  rt_index()......
+00012bd0: 2020 2020 2020 2020 2020 2020 6465 6620              def 
+00012be0: 6a6f 696e 5f65 6c65 6d65 6e74 7328 6d79  join_elements(my
+00012bf0: 5f69 7465 6d29 3a0d 0a20 2020 2020 2020  _item):..       
+00012c00: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00012c10: 7374 616e 6365 286d 795f 6974 656d 2c20  stance(my_item, 
+00012c20: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
+00012c30: 2020 2020 2020 2020 2020 2020 6d79 5f6c              my_l
+00012c40: 6973 7420 3d20 5b5d 0d0a 2020 2020 2020  ist = []..      
+00012c50: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00012c60: 7220 7375 6269 7465 6d20 696e 206d 795f  r subitem in my_
+00012c70: 6974 656d 3a0d 0a20 2020 2020 2020 2020  item:..         
+00012c80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00012c90: 6620 7375 6269 7465 6d20 213d 2022 3022  f subitem != "0"
+00012ca0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012cb0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00012cc0: 795f 6c69 7374 2e61 7070 656e 6428 7375  y_list.append(su
+00012cd0: 6269 7465 6d29 0d0a 0d0a 2020 2020 2020  bitem)....      
+00012ce0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00012cf0: 7475 726e 2022 2b22 2e6a 6f69 6e28 6d79  turn "+".join(my
+00012d00: 5f6c 6973 7429 0d0a 0d0a 2020 2020 2020  _list)....      
+00012d10: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+00012d20: 795f 6974 656d 203d 3d20 302e 303a 0d0a  y_item == 0.0:..
+00012d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d40: 2020 2020 7265 7475 726e 2022 3022 0d0a      return "0"..
+00012d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d60: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00012d70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00012d80: 6e20 6d79 5f69 7465 6d0d 0a0d 0a20 2020  n my_item....   
+00012d90: 2020 2020 2020 2020 2064 6620 3d20 6466           df = df
+00012da0: 2e61 7070 6c79 6d61 7028 6a6f 696e 5f65  .applymap(join_e
+00012db0: 6c65 6d65 6e74 7329 0d0a 0d0a 0d0a 0d0a  lements)........
+00012dc0: 2020 2020 2020 2020 2020 2020 2320 7375              # su
+00012dd0: 6d20 6f76 6572 2074 6865 2063 6f6c 756d  m over the colum
+00012de0: 6e73 0d0a 0d0a 2020 2020 2020 2020 2020  ns....          
+00012df0: 2020 6465 6620 6576 616c 5f73 756d 2863    def eval_sum(c
+00012e00: 6f6c 756d 6e29 3a0d 0a20 2020 2020 2020  olumn):..       
+00012e10: 2020 2020 2020 2020 2063 6f6c 756d 6e20           column 
+00012e20: 3d20 5b73 7472 2863 292e 7265 706c 6163  = [str(c).replac
+00012e30: 6528 225e 222c 2022 2a2a 2229 2066 6f72  e("^", "**") for
+00012e40: 2063 2069 6e20 636f 6c75 6d6e 5d0d 0a20   c in column].. 
+00012e50: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00012e60: 795f 6578 7072 203d 2022 2b22 2e6a 6f69  y_expr = "+".joi
+00012e70: 6e28 636f 6c75 6d6e 290d 0a20 2020 2020  n(column)..     
+00012e80: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+00012e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012ea0: 2020 2020 2072 6574 7572 6e20 7061 7273       return pars
+00012eb0: 655f 6578 7072 286d 795f 6578 7072 290d  e_expr(my_expr).
+00012ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012ed0: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+00012ee0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00012ef0: 7475 726e 206d 795f 6578 7072 0d0a 0d0a  turn my_expr....
+00012f00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00012f10: 6466 5b22 546f 7461 6c22 5d20 3d20 6466  df["Total"] = df
+00012f20: 2e54 2e61 6767 2865 7661 6c5f 7375 6d29  .T.agg(eval_sum)
+00012f30: 2020 2320 6466 2e54 2e73 756d 2829 0d0a    # df.T.sum()..
+00012f40: 2020 2020 2020 2020 2020 2020 6466 2e6c              df.l
+00012f50: 6f63 5b22 546f 7461 6c22 5d20 3d20 6466  oc["Total"] = df
+00012f60: 2e61 6767 2865 7661 6c5f 7375 6d29 0d0a  .agg(eval_sum)..
+00012f70: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00012f80: 7428 2254 4f54 414c 222c 6466 2e6c 6f63  t("TOTAL",df.loc
+00012f90: 5b22 546f 7461 6c22 5d29 0d0a 2020 2020  ["Total"])..    
+00012fa0: 2020 2020 2020 2020 6466 5f6d 6572 6765          df_merge
+00012fb0: 325b 2254 6f74 616c 225d 203d 2064 665b  2["Total"] = df[
+00012fc0: 2254 6f74 616c 225d 0d0a 0d0a 2020 2020  "Total"]....    
+00012fd0: 2020 2020 2020 2020 2320 6765 7420 7468          # get th
+00012fe0: 6520 6e65 7720 636f 6c75 6d6e 730d 0a0d  e new columns...
+00012ff0: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
+00013000: 7465 7261 7465 2074 6872 6f75 6768 2074  terate through t
+00013010: 6865 2063 6f6c 756d 6e73 0d0a 2020 2020  he columns..    
+00013020: 2020 2020 2020 2020 7072 696e 7428 6466          print(df
+00013030: 2e63 6f6c 756d 6e73 290d 0a0d 0a0d 0a20  .columns)...... 
+00013040: 2020 2020 2020 2020 2020 2066 6f72 2063             for c
+00013050: 6f6c 756d 6e20 696e 2064 662e 636f 6c75  olumn in df.colu
+00013060: 6d6e 733a 0d0a 2020 2020 2020 2020 2020  mns:..          
+00013070: 2020 2020 2020 6966 2063 6f6c 756d 6e5b        if column[
+00013080: 305d 2021 3d20 2254 6f74 616c 223a 0d0a  0] != "Total":..
+00013090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000130a0: 2020 2020 7072 696e 7428 636f 6c75 6d6e      print(column
+000130b0: 5b30 5d20 2b20 2220 2220 202b 2022 2825  [0] + " "  + "(%
+000130c0: 7329 2220 2520 636f 6c75 6d6e 5b31 5d2c  s)" % column[1],
+000130d0: 6466 2e6c 6f63 5b22 546f 7461 6c22 5d5b  df.loc["Total"][
+000130e0: 636f 6c75 6d6e 5d29 0d0a 2020 2020 2020  column])..      
+000130f0: 2020 2020 2020 2020 2020 2020 2020 6466                df
+00013100: 5f6d 6572 6765 322e 6c6f 635b 2254 6f74  _merge2.loc["Tot
+00013110: 616c 222c 636f 6c75 6d6e 5b30 5d20 2b20  al",column[0] + 
+00013120: 2220 2220 202b 2022 2825 7329 2220 2520  " "  + "(%s)" % 
+00013130: 636f 6c75 6d6e 5b31 5d5d 203d 2064 662e  column[1]] = df.
+00013140: 6c6f 635b 2254 6f74 616c 225d 5b63 6f6c  loc["Total"][col
+00013150: 756d 6e5d 0d0a 0d0a 0d0a 0d0a 2020 2020  umn]........    
+00013160: 2020 2020 2020 2020 6465 6620 7369 6d70          def simp
+00013170: 6c69 6679 5f65 7870 7228 6d79 5f69 7465  lify_expr(my_ite
+00013180: 6d29 3a0d 0a20 2020 2020 2020 2020 2020  m):..           
+00013190: 2020 2020 2072 6574 7572 6e20 7369 6d70       return simp
+000131a0: 6c69 6679 286d 795f 6974 656d 290d 0a0d  lify(my_item)...
+000131b0: 0a20 2020 2020 2020 2020 2020 2064 6620  .            df 
+000131c0: 3d20 6466 2e61 7070 6c79 6d61 7028 7369  = df.applymap(si
+000131d0: 6d70 6c69 6679 5f65 7870 7229 0d0a 0d0a  mplify_expr)....
+000131e0: 2020 2020 2020 2020 2020 2020 6466 5f66              df_f
+000131f0: 6f72 5f65 7863 656c 203d 2064 662e 636f  or_excel = df.co
+00013200: 7079 2829 0d0a 0d0a 0d0a 0d0a 2020 2020  py()........    
+00013210: 2020 2020 2020 2020 6465 6620 6162 6272          def abbr
+00013220: 6576 6961 7465 5f7a 6572 6f73 5f6c 6174  eviate_zeros_lat
+00013230: 6578 286d 795f 6974 656d 293a 0d0a 2020  ex(my_item):..  
+00013240: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00013250: 206d 795f 6974 656d 203d 3d20 2230 2220   my_item == "0" 
+00013260: 6f72 206d 795f 6974 656d 203d 3d20 303a  or my_item == 0:
+00013270: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013280: 2020 2020 2020 7265 7475 726e 2022 202e        return " .
+00013290: 2d20 2220 2023 202e 2d20 220d 0a20 2020  - "  # .- "..   
+000132a0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000132b0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000132c0: 2020 2020 2020 2020 7320 3d20 7072 696e          s = prin
+000132d0: 7469 6e67 2e6c 6174 6578 286d 795f 6974  ting.latex(my_it
+000132e0: 656d 202c 6d6f 6465 3d22 696e 6c69 6e65  em ,mode="inline
+000132f0: 2229 2023 2020 6d6f 6465 3d22 696e 6c69  ") #  mode="inli
+00013300: 6e65 2229 0d0a 2020 2020 2020 2020 2020  ne")..          
+00013310: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00013320: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+00013330: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00013340: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00013350: 2364 665f 6261 636b 7570 203d 2064 662e  #df_backup = df.
+00013360: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+00013370: 2020 2020 6466 203d 2064 662e 6170 706c      df = df.appl
+00013380: 796d 6170 2861 6262 7265 7669 6174 655f  ymap(abbreviate_
+00013390: 7a65 726f 735f 6c61 7465 7829 0d0a 0d0a  zeros_latex)....
+000133a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000133b0: 6466 5f6d 6572 6765 3220 3d20 6466 5f6d  df_merge2 = df_m
+000133c0: 6572 6765 322e 7265 706c 6163 6528 6e70  erge2.replace(np
+000133d0: 2e6e 616e 2c20 2727 2c20 7265 6765 783d  .nan, '', regex=
+000133e0: 5472 7565 290d 0a20 2020 2020 2020 2020  True)..         
+000133f0: 2020 2064 665f 6d65 7267 6532 203d 2064     df_merge2 = d
+00013400: 665f 6d65 7267 6532 2e72 6570 6c61 6365  f_merge2.replace
+00013410: 2822 3022 2c20 2727 2c20 7265 6765 783d  ("0", '', regex=
+00013420: 5472 7565 290d 0a20 2020 2020 2020 2020  True)..         
+00013430: 2020 2064 665f 6d65 7267 6532 203d 2064     df_merge2 = d
+00013440: 665f 6d65 7267 6532 2e72 6570 6c61 6365  f_merge2.replace
+00013450: 2830 2c20 2727 2c20 7265 6765 783d 5472  (0, '', regex=Tr
+00013460: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
+00013470: 2064 665f 6d65 7267 6532 203d 2064 665f   df_merge2 = df_
+00013480: 6d65 7267 6532 2e72 6570 6c61 6365 2830  merge2.replace(0
+00013490: 2e30 2c20 2727 2c20 7265 6765 783d 5472  .0, '', regex=Tr
+000134a0: 7565 290d 0a0d 0a20 2020 2020 2020 2020  ue)....         
+000134b0: 2020 2023 2070 7269 6e74 2864 662e 746f     # print(df.to
+000134c0: 5f73 7472 696e 6728 2929 0d0a 2020 2020  _string())..    
+000134d0: 2020 2020 2020 2020 2320 6466 2e69 6c6f          # df.ilo
+000134e0: 635b 302c 305d 203d 2022 245c 5c61 6c70  c[0,0] = "$\\alp
+000134f0: 6861 2422 0d0a 0d0a 2020 2020 2020 2020  ha$"....        
+00013500: 2020 2020 7064 2e6f 7074 696f 6e73 2e64      pd.options.d
+00013510: 6973 706c 6179 2e6d 6178 5f63 6f6c 7769  isplay.max_colwi
+00013520: 6474 6820 3d20 4e6f 6e65 0d0a 0d0a 2020  dth = None....  
+00013530: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
+00013540: 6520 3d3d 2022 6874 6d6c 223a 2023 203c  e == "html": # <
 00013550: 204e 4f54 2059 4554 2053 5550 504f 5254   NOT YET SUPPORT
-00013560: 4544 0d0a 2020 2020 2020 2020 2020 2020  ED..            
-00013570: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00013580: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00013590: 6c66 2e63 6f6e 7665 7274 5f64 665f 746f  lf.convert_df_to
-000135a0: 5f74 6578 2864 6629 0d0a 2020 2020 2020  _tex(df)..      
-000135b0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-000135c0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-000135d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000135e0: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-000135f0: 7928 7374 7228 6529 2c74 6974 6c65 3d22  y(str(e),title="
-00013600: 4572 726f 7220 6475 7269 6e67 2054 6578  Error during Tex
-00013610: 2043 6f6e 7665 7273 696f 6e22 290d 0a0d   Conversion")...
-00013620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013630: 2023 2070 7269 6e74 2822 5649 4557 2229   # print("VIEW")
-00013640: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013650: 2020 2320 7072 696e 7428 6466 5f68 746d    # print(df_htm
-00013660: 6c29 0d0a 0d0a 2020 2020 2020 2020 2020  l)....          
-00013670: 2020 6465 6620 636f 6e76 6572 745f 6578    def convert_ex
-00013680: 6365 6c28 6d79 5f69 7465 6d29 3a0d 0a20  cel(my_item):.. 
-00013690: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000136a0: 6620 6d79 5f69 7465 6d20 3d3d 2022 3022  f my_item == "0"
-000136b0: 206f 7220 6d79 5f69 7465 6d20 3d3d 2030   or my_item == 0
-000136c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000136d0: 2020 2020 2020 2072 6574 7572 6e20 2220         return " 
-000136e0: 2e2d 2022 2020 2320 2e2d 2022 0d0a 2020  .- "  # .- "..  
-000136f0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00013700: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00013710: 2020 2020 2020 2020 2073 203d 2070 7265           s = pre
-00013720: 7474 7928 6d79 5f69 7465 6d29 2023 2070  tty(my_item) # p
-00013730: 7269 6e74 696e 672e 6c61 7465 7828 6d79  rinting.latex(my
-00013740: 5f69 7465 6d29 2023 202c 6d6f 6465 3d22  _item) # ,mode="
-00013750: 696e 6c69 6e65 2229 2023 2020 6d6f 6465  inline") #  mode
-00013760: 3d22 696e 6c69 6e65 2229 0d0a 2020 2020  ="inline")..    
-00013770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013780: 7072 696e 7428 7329 0d0a 2020 2020 2020  print(s)..      
-00013790: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000137a0: 7475 726e 2073 0d0a 0d0a 2020 2020 2020  turn s....      
-000137b0: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
-000137c0: 2022 6578 6365 6c22 3a0d 0a20 2020 2020   "excel":..     
-000137d0: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-000137e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000137f0: 2020 2020 2065 6669 6c65 6e61 6d65 203d       efilename =
-00013800: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
-00013810: 5361 7665 4669 6c65 4e61 6d65 2873 656c  SaveFileName(sel
-00013820: 662c 2027 5361 7665 2066 696c 6527 2c20  f, 'Save file', 
-00013830: 6f73 2e67 6574 6377 6428 292c 2022 4578  os.getcwd(), "Ex
-00013840: 6365 6c20 4669 6c65 7320 282a 2e78 6c73  cel Files (*.xls
-00013850: 7829 2229 5b30 5d0d 0a0d 0a20 2020 2020  x)")[0]....     
-00013860: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00013870: 6620 6566 696c 656e 616d 6520 6973 206e  f efilename is n
-00013880: 6f74 204e 6f6e 6520 616e 6420 6566 696c  ot None and efil
-00013890: 656e 616d 6520 213d 2022 223a 0d0a 2020  ename != "":..  
+00013560: 4544 0d0a 0d0a 2020 2020 2020 2020 2020  ED....          
+00013570: 2020 2020 2020 6466 5f68 746d 6c20 3d20        df_html = 
+00013580: 2222 220d 0a20 2020 2020 2020 203c 6874  """..        <ht
+00013590: 6d6c 3e0d 0a20 2020 2020 2020 203c 6865  ml>..        <he
+000135a0: 6164 3e0d 0a20 2020 2020 2020 203c 7469  ad>..        <ti
+000135b0: 746c 653e 4d61 7468 6564 656d 6f3c 2f74  tle>Mathedemo</t
+000135c0: 6974 6c65 3e0d 0a20 2020 2020 2020 203c  itle>..        <
+000135d0: 7363 7269 7074 2074 7970 653d 2274 6578  script type="tex
+000135e0: 742f 782d 6d61 7468 6a61 782d 636f 6e66  t/x-mathjax-conf
+000135f0: 6967 223e 0d0a 2020 2020 2020 2020 2020  ig">..          
+00013600: 4d61 7468 4a61 782e 4875 622e 436f 6e66  MathJax.Hub.Conf
+00013610: 6967 287b 7465 7832 6a61 783a 207b 696e  ig({tex2jax: {in
+00013620: 6c69 6e65 4d61 7468 3a20 5b5b 2724 272c  lineMath: [['$',
+00013630: 2724 275d 2c20 5b27 5c5c 2827 2c27 5c5c  '$'], ['\\(','\\
+00013640: 2927 5d5d 7d7d 293b 0d0a 2020 2020 2020  )']]}});..      
+00013650: 2020 3c2f 7363 7269 7074 3e0d 0a20 2020    </script>..   
+00013660: 2020 2020 203c 7363 7269 7074 2074 7970       <script typ
+00013670: 653d 2274 6578 742f 6a61 7661 7363 7269  e="text/javascri
+00013680: 7074 220d 0a20 2020 2020 2020 2020 2073  pt"..          s
+00013690: 7263 3d22 6874 7470 3a2f 2f63 646e 6a73  rc="http://cdnjs
+000136a0: 2e63 6c6f 7564 666c 6172 652e 636f 6d2f  .cloudflare.com/
+000136b0: 616a 6178 2f6c 6962 732f 6d61 7468 6a61  ajax/libs/mathja
+000136c0: 782f 322e 372e 312f 4d61 7468 4a61 782e  x/2.7.1/MathJax.
+000136d0: 6a73 3f63 6f6e 6669 673d 5465 582d 414d  js?config=TeX-AM
+000136e0: 532d 4d4d 4c5f 4854 4d4c 6f72 4d4d 4c22  S-MML_HTMLorMML"
+000136f0: 3e0d 0a20 2020 2020 2020 203c 2f73 6372  >..        </scr
+00013700: 6970 743e 0d0a 2020 2020 2020 2020 3c6c  ipt>..        <l
+00013710: 696e 6b20 7265 6c3d 2273 7479 6c65 7368  ink rel="stylesh
+00013720: 6565 7422 2068 7265 663d 226d 7973 7479  eet" href="mysty
+00013730: 6c65 2e63 7373 223e 0d0a 2020 2020 2020  le.css">..      
+00013740: 2020 3c2f 6865 6164 3e0d 0a0d 0a20 2020    </head>....   
+00013750: 2020 2020 203c 626f 6479 3e0d 0a20 2020       <body>..   
+00013760: 2020 2020 2025 730d 0a20 2020 2020 2020       %s..       
+00013770: 203c 2f62 6f64 793e 0d0a 2020 2020 2020   </body>..      
+00013780: 2020 3c2f 6874 6d6c 3e0d 0a20 2020 2020    </html>..     
+00013790: 2020 2022 2222 2520 2064 662e 746f 5f68     """%  df.to_h
+000137a0: 746d 6c28 290d 0a0d 0a20 2020 2020 2020  tml()....       
+000137b0: 2020 2020 2020 2020 2070 6167 6553 6f75           pageSou
+000137c0: 7263 6520 3d20 2222 220d 0a20 2020 2020  rce = """..     
+000137d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000137e0: 2020 2020 2020 2020 3c68 746d 6c3e 3c68          <html><h
+000137f0: 6561 643e 0d0a 2020 2020 2020 2020 2020  ead>..          
+00013800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013810: 2020 203c 2f68 6561 643e 0d0a 2020 2020     </head>..    
+00013820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013830: 2020 2020 2020 2020 203c 626f 6479 3e0d           <body>.
+00013840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013850: 2020 2020 2020 2020 2020 2020 2020 3c70                <p
+00013860: 3e61 7364 663c 2f70 3e0d 0a20 2020 2020  >asdf</p>..     
+00013870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013880: 2020 2020 2020 2020 3c2f 626f 6479 3e3c          </body><
+00013890: 2f68 746d 6c3e 0d0a 2020 2020 2020 2020  /html>..        
 000138a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000138b0: 2020 2020 2020 6466 5f66 6f72 5f65 7863        df_for_exc
-000138c0: 656c 203d 2064 665f 666f 725f 6578 6365  el = df_for_exce
-000138d0: 6c2e 6170 706c 796d 6170 2863 6f6e 7665  l.applymap(conve
-000138e0: 7274 5f65 7863 656c 290d 0a20 2020 2020  rt_excel)..     
-000138f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013900: 2020 2023 2070 6174 6820 3d20 6f73 2e70     # path = os.p
-00013910: 6174 682e 6469 726e 616d 6528 6f73 2e70  ath.dirname(os.p
-00013920: 6174 682e 6162 7370 6174 6828 5f5f 6669  ath.abspath(__fi
-00013930: 6c65 5f5f 2929 0d0a 2020 2020 2020 2020  le__))..        
+000138b0: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+000138c0: 2020 2020 2020 2020 2020 2020 2320 424c              # BL
+000138d0: 410d 0a0d 0a20 2020 2020 2020 2020 2020  A....           
+000138e0: 2020 2020 2023 2077 7269 7465 2070 6167       # write pag
+000138f0: 6520 736f 7572 6365 2074 6f20 6874 6d6c  e source to html
+00013900: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013910: 2020 6966 2046 616c 7365 3a0d 0a20 2020    if False:..   
+00013920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013930: 2023 2044 4550 5245 4349 4154 4544 0d0a   # DEPRECIATED..
 00013940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013950: 6466 5f66 6f72 5f65 7863 656c 2e74 6f5f  df_for_excel.to_
-00013960: 6578 6365 6c28 6566 696c 656e 616d 6529  excel(efilename)
-00013970: 2023 2022 6669 6c65 732f 466c 6f77 4d61   # "files/FlowMa
-00013980: 7472 6978 5f66 6f72 6d61 7474 6564 2e78  trix_formatted.x
-00013990: 6c73 7822 2929 0d0a 2020 2020 2020 2020  lsx"))..        
-000139a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000139b0: 2320 6466 5f6d 6572 6765 322e 746f 5f65  # df_merge2.to_e
-000139c0: 7863 656c 286f 732e 7061 7468 2e6a 6f69  xcel(os.path.joi
-000139d0: 6e28 7061 7468 2c65 6669 6c65 6e61 6d65  n(path,efilename
-000139e0: 2929 2020 2020 2320 2266 696c 6573 2f46  ))    # "files/F
-000139f0: 6c6f 774d 6174 7269 782e 786c 7378 2229  lowMatrix.xlsx")
-00013a00: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00013a10: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00013a20: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00013a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a40: 2073 656c 662e 6e6f 7469 6679 2873 7472   self.notify(str
-00013a50: 2865 292c 2074 6974 6c65 3d22 4572 726f  (e), title="Erro
-00013a60: 7220 6475 7269 6e67 2045 7863 656c 2063  r during Excel c
-00013a70: 6f6e 7665 7273 696f 6e22 290d 0a0d 0a20  onversion").... 
-00013a80: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-00013a90: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-00013aa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013ab0: 6e6f 7469 6679 2873 7472 2865 292c 2074  notify(str(e), t
-00013ac0: 6974 6c65 3d22 4572 726f 7220 6475 7269  itle="Error duri
-00013ad0: 6e67 206d 6174 7269 7820 6765 6e65 7261  ng matrix genera
-00013ae0: 7469 6f6e 2229 0d0a 0d0a 2020 2020 6465  tion")....    de
-00013af0: 6620 7265 6d6f 7665 5f69 7465 6d28 7365  f remove_item(se
-00013b00: 6c66 293a 0d0a 0d0a 2020 2020 2020 2020  lf):....        
-00013b10: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00013b20: 2020 7365 6c65 6374 6564 5f72 6f77 7320    selected_rows 
-00013b30: 3d20 736f 7274 6564 2873 6574 2869 6e64  = sorted(set(ind
-00013b40: 6578 2e72 6f77 2829 2066 6f72 2069 6e64  ex.row() for ind
-00013b50: 6578 2069 6e0d 0a20 2020 2020 2020 2020  ex in..         
-00013b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013b70: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00013b80: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-00013b90: 6577 2e73 656c 6563 7465 6449 6e64 6578  ew.selectedIndex
-00013ba0: 6573 2829 2929 0d0a 0d0a 2020 2020 2020  es()))....      
-00013bb0: 2020 2020 2020 6966 206c 656e 2873 656c        if len(sel
-00013bc0: 6563 7465 645f 726f 7773 2920 3d3d 2030  ected_rows) == 0
-00013bd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00013be0: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
-00013bf0: 6e6f 2073 656c 6563 7465 6420 726f 7773  no selected rows
-00013c00: 222c 7469 746c 653d 2245 7272 6f72 2229  ",title="Error")
-00013c10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013c20: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
-00013c30: 2020 2020 2020 2020 7365 6c65 6374 696f          selectio
-00013c40: 6e20 3d20 7365 6c65 6374 6564 5f72 6f77  n = selected_row
-00013c50: 735b 305d 0d0a 0d0a 2020 2020 2020 2020  s[0]....        
-00013c60: 2020 2020 7965 7320 3d20 2073 656c 662e      yes =  self.
-00013c70: 6173 6b5f 7175 6573 7469 6f6e 2827 272c  ask_question('',
-00013c80: 2241 7265 2079 6f75 2073 7572 6520 796f  "Are you sure yo
-00013c90: 7520 7761 6e74 2074 6f20 7265 6d6f 7665  u want to remove
-00013ca0: 2074 6865 2065 6e74 7279 2027 2573 273f   the entry '%s'?
-00013cb0: 2225 7365 6c66 2e65 6e74 7279 5f64 6174  "%self.entry_dat
-00013cc0: 615b 7365 6c65 6374 696f 6e5d 5b22 7375  a[selection]["su
-00013cd0: 626a 6563 7422 5d29 0d0a 2020 2020 2020  bject"])..      
-00013ce0: 2020 2020 2020 6966 2079 6573 3a0d 0a0d        if yes:...
-00013cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013d00: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00013d10: 2e72 656d 6f76 655f 636f 6e6e 6563 7469  .remove_connecti
-00013d20: 6f6e 2873 656c 662e 656e 7472 795f 6461  on(self.entry_da
-00013d30: 7461 5b73 656c 6563 7469 6f6e 5d5b 2273  ta[selection]["s
-00013d40: 686f 7274 6e61 6d65 225d 290d 0a0d 0a20  hortname"]).... 
-00013d50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00013d60: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-00013d70: 6965 772e 7265 6d6f 7665 526f 7728 7365  iew.removeRow(se
-00013d80: 6c65 6374 696f 6e29 0d0a 2020 2020 2020  lection)..      
-00013d90: 2020 2020 2020 2020 2020 6465 6c20 7365            del se
-00013da0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-00013db0: 6c65 6374 696f 6e5d 0d0a 0d0a 2020 2020  lection]....    
-00013dc0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00013dd0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-00013de0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00013df0: 6966 7928 7374 7228 6529 2c20 7469 746c  ify(str(e), titl
-00013e00: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
-00013e10: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00013e20: 2020 2020 2020 2020 7365 6c66 2e75 7064          self.upd
-00013e30: 6174 655f 7461 626c 6528 290d 0a0d 0a20  ate_table().... 
-00013e40: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-00013e50: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-00013e60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013e70: 6e6f 7469 6679 2873 7472 2865 292c 2074  notify(str(e), t
-00013e80: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
-00013e90: 0a0d 0a20 2020 2064 6566 2063 6f6e 7665  ...    def conve
-00013ea0: 7274 5f64 665f 746f 5f74 6578 2873 656c  rt_df_to_tex(sel
-00013eb0: 662c 6466 293a 0d0a 0d0a 2020 2020 2020  f,df):....      
-00013ec0: 2020 6465 6620 7772 6170 7374 7269 6e67    def wrapstring
-00013ed0: 2873 293a 0d0a 2020 2020 2020 2020 2020  (s):..          
-00013ee0: 2020 2320 7772 6170 7320 7374 7269 6e67    # wraps string
-00013ef0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00013f00: 7475 726e 2074 6578 7477 7261 702e 7772  turn textwrap.wr
-00013f10: 6170 2873 2c20 7769 6474 683d 3130 290d  ap(s, width=10).
-00013f20: 0a0d 0a20 2020 2020 2020 2064 6566 2061  ...        def a
-00013f30: 6262 7265 7669 6174 655f 7a65 726f 7328  bbreviate_zeros(
-00013f40: 6d79 5f69 7465 6d29 3a0d 0a20 2020 2020  my_item):..     
-00013f50: 2020 2020 2020 2069 6620 6d79 5f69 7465         if my_ite
-00013f60: 6d20 3d3d 2022 3022 206f 7220 6d79 5f69  m == "0" or my_i
-00013f70: 7465 6d20 3d3d 2030 3a0d 0a20 2020 2020  tem == 0:..     
-00013f80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00013f90: 6e20 2220 2e2d 2022 2020 2320 2e2d 2022  n " .- "  # .- "
-00013fa0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-00013fb0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00013fc0: 2020 2020 206d 795f 6974 656d 203d 2073       my_item = s
-00013fd0: 7472 286d 795f 6974 656d 290d 0a20 2020  tr(my_item)..   
-00013fe0: 2020 2020 2020 2020 2020 2020 206d 6178               max
-00013ff0: 5f6c 656e 203d 2031 300d 0a20 2020 2020  _len = 10..     
-00014000: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-00014010: 6e28 6d79 5f69 7465 6d29 203e 206d 6178  n(my_item) > max
-00014020: 5f6c 656e 3a0d 0a20 2020 2020 2020 2020  _len:..         
-00014030: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00014040: 6e20 6d79 5f69 7465 6d5b 3a6d 6178 5f6c  n my_item[:max_l
-00014050: 656e 5d20 2b20 222e 2e2e 220d 0a20 2020  en] + "..."..   
-00014060: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00014070: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00014080: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00014090: 795f 6974 656d 0d0a 0d0a 2020 2020 2020  y_item....      
-000140a0: 2020 6466 5f62 6163 6b75 7020 3d20 6466    df_backup = df
-000140b0: 2e63 6f70 7928 290d 0a0d 0a20 2020 2020  .copy()....     
-000140c0: 2020 2064 665f 6c61 7465 7820 3d20 6466     df_latex = df
-000140d0: 2e74 6f5f 6c61 7465 7828 6c6f 6e67 7461  .to_latex(longta
-000140e0: 626c 653d 4661 6c73 652c 2065 7363 6170  ble=False, escap
-000140f0: 653d 4661 6c73 6529 2e72 6570 6c61 6365  e=False).replace
-00014100: 2822 ce94 222c 2022 245c 4465 6c74 6124  ("..", "$\Delta$
-00014110: 2229 0d0a 0d0a 2020 2020 2020 2020 6466  ")....        df
-00014120: 5f6c 6174 6578 203d 2064 665f 6c61 7465  _latex = df_late
-00014130: 782e 7265 706c 6163 6528 225c 5c62 6567  x.replace("\\beg
-00014140: 696e 7b74 6162 756c 6172 7d22 2c20 225c  in{tabular}", "\
-00014150: 5c62 6567 696e 7b74 6162 756c 6172 787d  \begin{tabularx}
-00014160: 7b5c 5c74 6578 7477 6964 7468 7d22 290d  {\\textwidth}").
-00014170: 0a20 2020 2020 2020 2064 665f 6c61 7465  .        df_late
-00014180: 7820 3d20 6466 5f6c 6174 6578 2e72 6570  x = df_latex.rep
-00014190: 6c61 6365 2822 5c5c 656e 647b 7461 6275  lace("\\end{tabu
-000141a0: 6c61 727d 222c 2022 5c5c 656e 647b 7461  lar}", "\\end{ta
-000141b0: 6275 6c61 7278 7d22 290d 0a20 2020 2020  bularx}")..     
-000141c0: 2020 2064 665f 6c61 7465 7820 3d20 225c     df_latex = "\
-000141d0: 5c62 6567 696e 7b73 6d61 6c6c 7d5c 6e22  \begin{small}\n"
-000141e0: 202b 2064 665f 6c61 7465 7820 2b20 225c   + df_latex + "\
-000141f0: 6e5c 656e 647b 736d 616c 6c7d 220d 0a0d  n\end{small}"...
-00014200: 0a20 2020 2020 2020 2064 665f 6c61 7465  .        df_late
-00014210: 7820 3d20 6466 5f6c 6174 6578 2e72 6570  x = df_latex.rep
-00014220: 6c61 6365 2822 5c5c 6c65 6674 2822 2c20  lace("\\left(", 
-00014230: 2228 2229 0d0a 2020 2020 2020 2020 6466  "(")..        df
-00014240: 5f6c 6174 6578 203d 2064 665f 6c61 7465  _latex = df_late
-00014250: 782e 7265 706c 6163 6528 225c 5c72 6967  x.replace("\\rig
-00014260: 6874 2922 2c20 2229 2229 0d0a 0d0a 2020  ht)", ")")....  
-00014270: 2020 2020 2020 6466 5f6c 6174 6578 203d        df_latex =
-00014280: 2064 665f 6c61 7465 782e 7265 706c 6163   df_latex.replac
-00014290: 6528 227b 6c22 2c20 227b 4c7b 3363 6d7d  e("{l", "{L{3cm}
-000142a0: 2229 0d0a 0d0a 2020 2020 2020 2020 6466  ")....        df
-000142b0: 5f6c 6174 6578 203d 2022 2222 0d0a 5c5c  _latex = """..\\
-000142c0: 646f 6375 6d65 6e74 636c 6173 735b 6133  documentclass[a3
-000142d0: 7061 7065 722c 6c61 6e64 7363 6170 655d  paper,landscape]
-000142e0: 7b61 7274 6963 6c65 7d0d 0a5c 5c75 7365  {article}..\\use
-000142f0: 7061 636b 6167 657b 626f 6f6b 7461 6273  package{booktabs
-00014300: 7d0d 0a5c 5c75 7365 7061 636b 6167 657b  }..\\usepackage{
-00014310: 6164 6a75 7374 626f 787d 0d0a 5c5c 7573  adjustbox}..\\us
-00014320: 6570 6163 6b61 6765 5b74 6162 6c65 5d7b  epackage[table]{
-00014330: 7863 6f6c 6f72 7d0d 0a5c 5c75 7365 7061  xcolor}..\\usepa
-00014340: 636b 6167 657b 6c6f 6e67 7461 626c 657d  ckage{longtable}
-00014350: 0d0a 5c5c 7573 6570 6163 6b61 6765 7b74  ..\\usepackage{t
-00014360: 6162 756c 6172 782c 7261 6767 6564 3265  abularx,ragged2e
-00014370: 7d0d 0a5c 5c64 6566 696e 6563 6f6c 6f72  }..\\definecolor
-00014380: 7b47 7261 797d 7b67 7261 797d 7b30 2e39  {Gray}{gray}{0.9
-00014390: 307d 0d0a 5c5c 6465 6669 6e65 636f 6c6f  0}..\\definecolo
-000143a0: 727b 4c69 6768 7447 7261 797d 7b67 7261  r{LightGray}{gra
-000143b0: 797d 7b30 2e39 357d 0d0a 5c5c 6465 6669  y}{0.95}..\\defi
-000143c0: 6e65 636f 6c6f 727b 5768 6974 657d 7b72  necolor{White}{r
-000143d0: 6762 7d7b 312c 312c 317d 0d0a 0d0a 5c5c  gb}{1,1,1}....\\
-000143e0: 6e65 7763 6f6c 756d 6e74 7970 657b 677d  newcolumntype{g}
-000143f0: 7b3e 7b5c 5c63 6f6c 756d 6e63 6f6c 6f72  {>{\\columncolor
-00014400: 7b57 6869 7465 7d5c 5c61 7272 6179 6261  {White}\\arrayba
-00014410: 636b 736c 6173 687d 4c7d 2025 0d0a 5c5c  ckslash}L} %..\\
-00014420: 6e65 7763 6f6c 756d 6e74 7970 657b 6c7d  newcolumntype{l}
-00014430: 7b3e 7b5c 5c63 6f6c 756d 6e63 6f6c 6f72  {>{\\columncolor
-00014440: 7b57 6869 7465 7d5c 5c61 7272 6179 6261  {White}\\arrayba
-00014450: 636b 736c 6173 687d 707b 3363 6d7d 7d20  ckslash}p{3cm}} 
-00014460: 2563 656e 7465 7265 6420 2258 2220 636f  %centered "X" co
-00014470: 6c75 6d6e 0d0a 5c5c 6e65 7763 6f6c 756d  lumn..\\newcolum
-00014480: 6e74 7970 657b 4c7d 5b31 5d7b 3e7b 5c5c  ntype{L}[1]{>{\\
-00014490: 7261 6767 6564 7269 6768 745c 5c61 7272  raggedright\\arr
-000144a0: 6179 6261 636b 736c 6173 687d 707b 5c5c  aybackslash}p{\\
-000144b0: 6469 6d65 7870 7223 312d 325c 5c74 6162  dimexpr#1-2\\tab
-000144c0: 636f 6c73 6570 2d32 5c5c 6172 7261 7972  colsep-2\\arrayr
-000144d0: 756c 6577 6964 7468 2b2e 3231 7074 7d7d  ulewidth+.21pt}}
-000144e0: 0d0a 0d0a 5c5c 7573 6570 6163 6b61 6765  ....\\usepackage
-000144f0: 5b6c 6566 743d 3163 6d2c 7269 6768 743d  [left=1cm,right=
-00014500: 312e 3563 6d5d 7b67 656f 6d65 7472 797d  1.5cm]{geometry}
-00014510: 0d0a 0d0a 5c5c 6265 6769 6e7b 646f 6375  ....\\begin{docu
-00014520: 6d65 6e74 7d5c 6e22 2222 202b 2064 665f  ment}\n""" + df_
-00014530: 6c61 7465 7820 2020 2b20 225c 6e5c 5c65  latex   + "\n\\e
-00014540: 6e64 7b64 6f63 756d 656e 747d 220d 0a0d  nd{document}"...
-00014550: 0a20 2020 2020 2020 2070 7970 6572 636c  .        pypercl
-00014560: 6970 2e63 6f70 7928 6466 5f6c 6174 6578  ip.copy(df_latex
-00014570: 290d 0a20 2020 2020 2020 2023 7365 6c66  )..        #self
-00014580: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
-00014590: 224c 6154 6558 2063 6f64 6520 636f 7069  "LaTeX code copi
-000145a0: 6564 2074 6f20 636c 6970 626f 6172 642e  ed to clipboard.
-000145b0: 2048 6176 6520 6675 6e21 222c 2074 6974   Have fun!", tit
-000145c0: 6c65 3d22 4861 7665 2066 756e 2229 0d0a  le="Have fun")..
-000145d0: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
-000145e0: 7475 7342 6172 2829 2e73 686f 774d 6573  tusBar().showMes
-000145f0: 7361 6765 2822 4c61 5465 5820 636f 6465  sage("LaTeX code
-00014600: 2063 6f70 6965 6420 746f 2063 6c69 7062   copied to clipb
-00014610: 6f61 7264 2e20 4861 7665 2066 756e 2122  oard. Have fun!"
-00014620: 290d 0a0d 0a0d 0a20 2020 2020 2020 2023  )......        #
-00014630: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a   -------------..
-00014640: 2020 2020 2020 2020 6966 2046 616c 7365          if False
-00014650: 3a20 2320 4445 5052 4943 4154 4544 0d0a  : # DEPRICATED..
-00014660: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-00014670: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00014680: 2020 2020 6672 6f6d 2070 6466 6c61 7465      from pdflate
-00014690: 7820 696d 706f 7274 2050 4446 4c61 5465  x import PDFLaTe
-000146a0: 580d 0a20 2020 2020 2020 2020 2020 2020  X..             
-000146b0: 2020 2070 6174 6820 3d20 6f73 2e70 6174     path = os.pat
-000146c0: 682e 6469 726e 616d 6528 6f73 2e70 6174  h.dirname(os.pat
-000146d0: 682e 6162 7370 6174 6828 5f5f 6669 6c65  h.abspath(__file
-000146e0: 5f5f 2929 0d0a 2020 2020 2020 2020 2020  __))..          
-000146f0: 2020 2020 2020 6d79 5f66 696c 6520 3d20        my_file = 
-00014700: 6f73 2e70 6174 682e 6a6f 696e 2870 6174  os.path.join(pat
-00014710: 682c 226d 796d 6174 7269 7822 290d 0a0d  h,"mymatrix")...
-00014720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014730: 2066 696c 6520 3d20 6f70 656e 286d 795f   file = open(my_
-00014740: 6669 6c65 2c20 2277 2229 0d0a 2020 2020  file, "w")..    
-00014750: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00014760: 2e77 7269 7465 2822 2222 0d0a 2020 2020  .write("""..    
-00014770: 2020 2020 5c5c 646f 6375 6d65 6e74 636c      \\documentcl
-00014780: 6173 735b 6133 7061 7065 722c 6c61 6e64  ass[a3paper,land
-00014790: 7363 6170 655d 7b61 7274 6963 6c65 7d0d  scape]{article}.
-000147a0: 0a20 2020 2020 2020 205c 5c75 7365 7061  .        \\usepa
-000147b0: 636b 6167 657b 626f 6f6b 7461 6273 7d0d  ckage{booktabs}.
-000147c0: 0a20 2020 2020 2020 205c 5c75 7365 7061  .        \\usepa
-000147d0: 636b 6167 657b 6164 6a75 7374 626f 787d  ckage{adjustbox}
-000147e0: 0d0a 2020 2020 2020 2020 5c5c 7573 6570  ..        \\usep
-000147f0: 6163 6b61 6765 5b74 6162 6c65 5d7b 7863  ackage[table]{xc
-00014800: 6f6c 6f72 7d0d 0a20 2020 2020 2020 205c  olor}..        \
-00014810: 5c75 7365 7061 636b 6167 657b 6c6f 6e67  \usepackage{long
-00014820: 7461 626c 657d 0d0a 2020 2020 2020 2020  table}..        
-00014830: 5c5c 7573 6570 6163 6b61 6765 7b74 6162  \\usepackage{tab
-00014840: 756c 6172 782c 7261 6767 6564 3265 7d0d  ularx,ragged2e}.
-00014850: 0a20 2020 2020 2020 205c 5c64 6566 696e  .        \\defin
-00014860: 6563 6f6c 6f72 7b47 7261 797d 7b67 7261  ecolor{Gray}{gra
-00014870: 797d 7b30 2e39 307d 0d0a 2020 2020 2020  y}{0.90}..      
-00014880: 2020 5c5c 6465 6669 6e65 636f 6c6f 727b    \\definecolor{
-00014890: 4c69 6768 7447 7261 797d 7b67 7261 797d  LightGray}{gray}
-000148a0: 7b30 2e39 357d 0d0a 2020 2020 2020 2020  {0.95}..        
-000148b0: 5c5c 6465 6669 6e65 636f 6c6f 727b 5768  \\definecolor{Wh
-000148c0: 6974 657d 7b72 6762 7d7b 312c 312c 317d  ite}{rgb}{1,1,1}
-000148d0: 0d0a 0d0a 2020 2020 2020 2020 5c5c 6e65  ....        \\ne
-000148e0: 7763 6f6c 756d 6e74 7970 657b 677d 7b3e  wcolumntype{g}{>
-000148f0: 7b5c 5c63 6f6c 756d 6e63 6f6c 6f72 7b57  {\\columncolor{W
-00014900: 6869 7465 7d5c 5c61 7272 6179 6261 636b  hite}\\arrayback
-00014910: 736c 6173 687d 4c7d 2025 0d0a 2020 2020  slash}L} %..    
-00014920: 2020 2020 5c5c 6e65 7763 6f6c 756d 6e74      \\newcolumnt
-00014930: 7970 657b 6c7d 7b3e 7b5c 5c63 6f6c 756d  ype{l}{>{\\colum
-00014940: 6e63 6f6c 6f72 7b57 6869 7465 7d5c 5c61  ncolor{White}\\a
-00014950: 7272 6179 6261 636b 736c 6173 687d 707b  rraybackslash}p{
-00014960: 3363 6d7d 7d20 2563 656e 7465 7265 6420  3cm}} %centered 
-00014970: 2258 2220 636f 6c75 6d6e 0d0a 2020 2020  "X" column..    
-00014980: 2020 2020 5c5c 6e65 7763 6f6c 756d 6e74      \\newcolumnt
-00014990: 7970 657b 4c7d 5b31 5d7b 3e7b 5c5c 7261  ype{L}[1]{>{\\ra
-000149a0: 6767 6564 7269 6768 745c 5c61 7272 6179  ggedright\\array
-000149b0: 6261 636b 736c 6173 687d 707b 5c5c 6469  backslash}p{\\di
-000149c0: 6d65 7870 7223 312d 325c 5c74 6162 636f  mexpr#1-2\\tabco
-000149d0: 6c73 6570 2d32 5c5c 6172 7261 7972 756c  lsep-2\\arrayrul
-000149e0: 6577 6964 7468 2b2e 3231 7074 7d7d 0d0a  ewidth+.21pt}}..
-000149f0: 0d0a 2020 2020 2020 2020 5c5c 7573 6570  ..        \\usep
-00014a00: 6163 6b61 6765 5b6c 6566 743d 3163 6d2c  ackage[left=1cm,
-00014a10: 7269 6768 743d 312e 3563 6d5d 7b67 656f  right=1.5cm]{geo
-00014a20: 6d65 7472 797d 0d0a 0d0a 2020 2020 2020  metry}....      
-00014a30: 2020 5c5c 6265 6769 6e7b 646f 6375 6d65    \\begin{docume
-00014a40: 6e74 7d22 2222 290d 0a20 2020 2020 2020  nt}""")..       
-00014a50: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
-00014a60: 6974 6528 6466 5f6c 6174 6578 290d 0a20  ite(df_latex).. 
-00014a70: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00014a80: 696c 652e 7772 6974 6528 2222 220d 0a20  ile.write(""".. 
-00014a90: 2020 2020 2020 205c 5c65 6e64 7b64 6f63         \\end{doc
-00014aa0: 756d 656e 747d 2222 2229 0d0a 2020 2020  ument}""")..    
-00014ab0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00014ac0: 2e63 6c6f 7365 2829 0d0a 2020 2020 2020  .close()..      
-00014ad0: 2020 2020 2020 2020 2020 2320 7064 666c            # pdfl
-00014ae0: 203d 2050 4446 4c61 5465 582e 6672 6f6d   = PDFLaTeX.from
-00014af0: 5f74 6578 6669 6c65 2827 6d79 5f74 6578  _texfile('my_tex
-00014b00: 6669 6c65 2e74 6578 2729 0d0a 2020 2020  file.tex')..    
-00014b10: 2020 2020 2020 2020 2020 2020 2320 7064              # pd
-00014b20: 662c 206c 6f67 2c20 636f 6d70 6c65 7465  f, log, complete
-00014b30: 645f 7072 6f63 6573 7320 3d20 7064 666c  d_process = pdfl
-00014b40: 2e63 7265 6174 655f 7064 6628 6b65 6570  .create_pdf(keep
-00014b50: 5f70 6466 5f66 696c 653d 5472 7565 2c20  _pdf_file=True, 
-00014b60: 6b65 6570 5f6c 6f67 5f66 696c 653d 5472  keep_log_file=Tr
-00014b70: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
-00014b80: 2020 2020 2023 206f 732e 706f 7065 6e28       # os.popen(
-00014b90: 2270 6466 6c61 7465 7820 2573 2220 2520  "pdflatex %s" % 
-00014ba0: 286f 732e 6765 7463 7764 2829 2b22 2f6d  (os.getcwd()+"/m
-00014bb0: 795f 7465 7866 696c 652e 7465 7822 2929  y_texfile.tex"))
-00014bc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014bd0: 2020 696d 706f 7274 2073 7562 7072 6f63    import subproc
-00014be0: 6573 730d 0a20 2020 2020 2020 2020 2020  ess..           
-00014bf0: 2020 2020 2070 6174 6820 3d20 6f73 2e70       path = os.p
-00014c00: 6174 682e 6469 726e 616d 6528 6f73 2e70  ath.dirname(os.p
-00014c10: 6174 682e 6162 7370 6174 6828 5f5f 6669  ath.abspath(__fi
-00014c20: 6c65 5f5f 2929 0d0a 2020 2020 2020 2020  le__))..        
-00014c30: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
-00014c40: 7373 2e72 756e 2822 7064 666c 6174 6578  ss.run("pdflatex
-00014c50: 2025 7322 2025 2028 6f73 2e70 6174 682e   %s" % (os.path.
-00014c60: 6a6f 696e 2870 6174 682c 226d 796d 6174  join(path,"mymat
-00014c70: 7269 782e 7465 7822 2929 292e 6368 6563  rix.tex"))).chec
-00014c80: 6b5f 7265 7475 726e 636f 6465 2829 0d0a  k_returncode()..
-00014c90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014ca0: 2020 236f 732e 7374 6172 7466 696c 6528    #os.startfile(
-00014cb0: 6f73 2e67 6574 6377 6428 2920 2b20 225c  os.getcwd() + "\
-00014cc0: 5c6d 796d 6174 7269 782e 7064 6622 290d  \mymatrix.pdf").
+00013950: 2020 2020 7061 7468 203d 206f 732e 7061      path = os.pa
+00013960: 7468 2e64 6972 6e61 6d65 286f 732e 7061  th.dirname(os.pa
+00013970: 7468 2e61 6273 7061 7468 285f 5f66 696c  th.abspath(__fil
+00013980: 655f 5f29 290d 0a20 2020 2020 2020 2020  e__))..         
+00013990: 2020 2020 2020 2020 2020 2066 696c 6520             file 
+000139a0: 3d20 6f70 656e 286f 732e 7061 7468 2e6a  = open(os.path.j
+000139b0: 6f69 6e28 7061 7468 2c22 6669 6c65 732f  oin(path,"files/
+000139c0: 6d79 6d61 7472 6978 2e68 746d 6c22 292c  mymatrix.html"),
+000139d0: 2277 222c 656e 636f 6469 6e67 3d27 7574  "w",encoding='ut
+000139e0: 662d 3827 290d 0a20 2020 2020 2020 2020  f-8')..         
+000139f0: 2020 2020 2020 2020 2020 2066 696c 652e             file.
+00013a00: 7772 6974 6528 6466 5f68 746d 6c29 0d0a  write(df_html)..
+00013a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013a20: 2020 2020 6669 6c65 2e63 6c6f 7365 2829      file.close()
+00013a30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00013a40: 2320 5144 6573 6b74 6f70 5365 7276 6963  # QDesktopServic
+00013a50: 6573 2e6f 7065 6e55 726c 2851 5572 6c28  es.openUrl(QUrl(
+00013a60: 222e 2f66 696c 6573 2f6d 6174 7269 782e  "./files/matrix.
+00013a70: 6874 6d6c 2229 290d 0a0d 0a20 2020 2020  html"))....     
+00013a80: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
+00013a90: 3d20 2273 7461 6e64 6172 6422 3a0d 0a20  = "standard":.. 
+00013aa0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00013ab0: 6f64 656c 203d 2050 616e 6461 734d 6f64  odel = PandasMod
+00013ac0: 656c 2864 665f 6d65 7267 6532 290d 0a20  el(df_merge2).. 
+00013ad0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00013ae0: 7669 6577 203d 204d 6174 7269 7856 6965  view = MatrixVie
+00013af0: 7765 7228 6d6f 6465 6c2c 7061 7265 6e74  wer(model,parent
+00013b00: 3d73 656c 6629 0d0a 0d0a 2020 2020 2020  =self)....      
+00013b10: 2020 2020 2020 2020 2020 2320 6d76 6965            # mvie
+00013b20: 772e 7765 6256 6965 772e 7365 7448 746d  w.webView.setHtm
+00013b30: 6c28 6466 5f68 746d 6c29 0d0a 2020 2020  l(df_html)..    
+00013b40: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00013b50: 6f74 2073 656c 662e 7465 7374 5f6d 6f64  ot self.test_mod
+00013b60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00013b70: 2020 2020 2020 2020 6d76 6965 772e 7368          mview.sh
+00013b80: 6f77 2829 0d0a 0d0a 0d0a 2020 2020 2020  ow()......      
+00013b90: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
+00013ba0: 2022 6c61 7465 7822 3a20 2320 3c20 4e4f   "latex": # < NO
+00013bb0: 5420 5945 5420 5355 5050 4f52 5445 440d  T YET SUPPORTED.
+00013bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013bd0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00013be0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00013bf0: 636f 6e76 6572 745f 6466 5f74 6f5f 7465  convert_df_to_te
+00013c00: 7828 6466 290d 0a20 2020 2020 2020 2020  x(df)..         
+00013c10: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00013c20: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+00013c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c40: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
+00013c50: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
+00013c60: 6f72 2064 7572 696e 6720 5465 7820 436f  or during Tex Co
+00013c70: 6e76 6572 7369 6f6e 2229 0d0a 0d0a 2020  nversion")....  
+00013c80: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00013c90: 7072 696e 7428 2256 4945 5722 290d 0a20  print("VIEW").. 
+00013ca0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00013cb0: 2070 7269 6e74 2864 665f 6874 6d6c 290d   print(df_html).
+00013cc0: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+00013cd0: 6566 2063 6f6e 7665 7274 5f65 7863 656c  ef convert_excel
+00013ce0: 286d 795f 6974 656d 293a 0d0a 2020 2020  (my_item):..    
+00013cf0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00013d00: 795f 6974 656d 203d 3d20 2230 2220 6f72  y_item == "0" or
+00013d10: 206d 795f 6974 656d 203d 3d20 303a 0d0a   my_item == 0:..
+00013d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d30: 2020 2020 7265 7475 726e 2022 202e 2d20      return " .- 
+00013d40: 2220 2023 202e 2d20 220d 0a20 2020 2020  "  # .- "..     
+00013d50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00013d60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013d70: 2020 2020 2020 7320 3d20 7072 6574 7479        s = pretty
+00013d80: 286d 795f 6974 656d 2920 2320 7072 696e  (my_item) # prin
+00013d90: 7469 6e67 2e6c 6174 6578 286d 795f 6974  ting.latex(my_it
+00013da0: 656d 2920 2320 2c6d 6f64 653d 2269 6e6c  em) # ,mode="inl
+00013db0: 696e 6522 2920 2320 206d 6f64 653d 2269  ine") #  mode="i
+00013dc0: 6e6c 696e 6522 290d 0a20 2020 2020 2020  nline")..       
+00013dd0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00013de0: 6e74 2873 290d 0a20 2020 2020 2020 2020  nt(s)..         
+00013df0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00013e00: 6e20 730d 0a0d 0a20 2020 2020 2020 2020  n s....         
+00013e10: 2020 2069 6620 6d6f 6465 203d 3d20 2265     if mode == "e
+00013e20: 7863 656c 223a 0d0a 2020 2020 2020 2020  xcel":..        
+00013e30: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00013e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013e50: 2020 6566 696c 656e 616d 6520 3d20 5146    efilename = QF
+00013e60: 696c 6544 6961 6c6f 672e 6765 7453 6176  ileDialog.getSav
+00013e70: 6546 696c 654e 616d 6528 7365 6c66 2c20  eFileName(self, 
+00013e80: 2753 6176 6520 6669 6c65 272c 206f 732e  'Save file', os.
+00013e90: 6765 7463 7764 2829 2c20 2245 7863 656c  getcwd(), "Excel
+00013ea0: 2046 696c 6573 2028 2a2e 786c 7378 2922   Files (*.xlsx)"
+00013eb0: 295b 305d 0d0a 0d0a 2020 2020 2020 2020  )[0]....        
+00013ec0: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00013ed0: 6669 6c65 6e61 6d65 2069 7320 6e6f 7420  filename is not 
+00013ee0: 4e6f 6e65 2061 6e64 2065 6669 6c65 6e61  None and efilena
+00013ef0: 6d65 2021 3d20 2222 3a0d 0a20 2020 2020  me != "":..     
+00013f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f10: 2020 2064 665f 666f 725f 6578 6365 6c20     df_for_excel 
+00013f20: 3d20 6466 5f66 6f72 5f65 7863 656c 2e61  = df_for_excel.a
+00013f30: 7070 6c79 6d61 7028 636f 6e76 6572 745f  pplymap(convert_
+00013f40: 6578 6365 6c29 0d0a 2020 2020 2020 2020  excel)..        
+00013f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f60: 2320 7061 7468 203d 206f 732e 7061 7468  # path = os.path
+00013f70: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
+00013f80: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
+00013f90: 5f29 290d 0a20 2020 2020 2020 2020 2020  _))..           
+00013fa0: 2020 2020 2020 2020 2020 2020 2064 665f               df_
+00013fb0: 666f 725f 6578 6365 6c2e 746f 5f65 7863  for_excel.to_exc
+00013fc0: 656c 2865 6669 6c65 6e61 6d65 2920 2320  el(efilename) # 
+00013fd0: 2266 696c 6573 2f46 6c6f 774d 6174 7269  "files/FlowMatri
+00013fe0: 785f 666f 726d 6174 7465 642e 786c 7378  x_formatted.xlsx
+00013ff0: 2229 290d 0a20 2020 2020 2020 2020 2020  "))..           
+00014000: 2020 2020 2020 2020 2020 2020 2023 2064               # d
+00014010: 665f 6d65 7267 6532 2e74 6f5f 6578 6365  f_merge2.to_exce
+00014020: 6c28 6f73 2e70 6174 682e 6a6f 696e 2870  l(os.path.join(p
+00014030: 6174 682c 6566 696c 656e 616d 6529 2920  ath,efilename)) 
+00014040: 2020 2023 2022 6669 6c65 732f 466c 6f77     # "files/Flow
+00014050: 4d61 7472 6978 2e78 6c73 7822 2929 0d0a  Matrix.xlsx"))..
+00014060: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014070: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+00014080: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
+00014090: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000140a0: 6c66 2e6e 6f74 6966 7928 7374 7228 6529  lf.notify(str(e)
+000140b0: 2c20 7469 746c 653d 2245 7272 6f72 2064  , title="Error d
+000140c0: 7572 696e 6720 4578 6365 6c20 636f 6e76  uring Excel conv
+000140d0: 6572 7369 6f6e 2229 0d0a 0d0a 2020 2020  ersion")....    
+000140e0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000140f0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+00014100: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00014110: 6966 7928 7374 7228 6529 2c20 7469 746c  ify(str(e), titl
+00014120: 653d 2245 7272 6f72 2064 7572 696e 6720  e="Error during 
+00014130: 6d61 7472 6978 2067 656e 6572 6174 696f  matrix generatio
+00014140: 6e22 290d 0a0d 0a20 2020 2064 6566 2072  n")....    def r
+00014150: 656d 6f76 655f 6974 656d 2873 656c 6629  emove_item(self)
+00014160: 3a0d 0a0d 0a20 2020 2020 2020 2074 7279  :....        try
+00014170: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00014180: 656c 6563 7465 645f 726f 7773 203d 2073  elected_rows = s
+00014190: 6f72 7465 6428 7365 7428 696e 6465 782e  orted(set(index.
+000141a0: 726f 7728 2920 666f 7220 696e 6465 7820  row() for index 
+000141b0: 696e 0d0a 2020 2020 2020 2020 2020 2020  in..            
+000141c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000141d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000141e0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+000141f0: 7365 6c65 6374 6564 496e 6465 7865 7328  selectedIndexes(
+00014200: 2929 290d 0a0d 0a20 2020 2020 2020 2020  )))....         
+00014210: 2020 2069 6620 6c65 6e28 7365 6c65 6374     if len(select
+00014220: 6564 5f72 6f77 7329 203d 3d20 303a 0d0a  ed_rows) == 0:..
+00014230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014240: 7365 6c66 2e6e 6f74 6966 7928 226e 6f20  self.notify("no 
+00014250: 7365 6c65 6374 6564 2072 6f77 7322 2c74  selected rows",t
+00014260: 6974 6c65 3d22 4572 726f 7222 290d 0a20  itle="Error").. 
+00014270: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00014280: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
+00014290: 2020 2020 2073 656c 6563 7469 6f6e 203d       selection =
+000142a0: 2073 656c 6563 7465 645f 726f 7773 5b30   selected_rows[0
+000142b0: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+000142c0: 2079 6573 203d 2020 7365 6c66 2e61 736b   yes =  self.ask
+000142d0: 5f71 7565 7374 696f 6e28 2727 2c22 4172  _question('',"Ar
+000142e0: 6520 796f 7520 7375 7265 2079 6f75 2077  e you sure you w
+000142f0: 616e 7420 746f 2072 656d 6f76 6520 7468  ant to remove th
+00014300: 6520 656e 7472 7920 2725 7327 3f22 2573  e entry '%s'?"%s
+00014310: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+00014320: 656c 6563 7469 6f6e 5d5b 2273 7562 6a65  election]["subje
+00014330: 6374 225d 290d 0a20 2020 2020 2020 2020  ct"])..         
+00014340: 2020 2069 6620 7965 733a 0d0a 0d0a 2020     if yes:....  
+00014350: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00014360: 6c66 2e64 7261 7763 616e 7661 732e 7265  lf.drawcanvas.re
+00014370: 6d6f 7665 5f63 6f6e 6e65 6374 696f 6e28  move_connection(
+00014380: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+00014390: 7365 6c65 6374 696f 6e5d 5b22 7368 6f72  selection]["shor
+000143a0: 746e 616d 6522 5d29 0d0a 0d0a 2020 2020  tname"])....    
+000143b0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000143c0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+000143d0: 2e72 656d 6f76 6552 6f77 2873 656c 6563  .removeRow(selec
+000143e0: 7469 6f6e 290d 0a20 2020 2020 2020 2020  tion)..         
+000143f0: 2020 2020 2020 2064 656c 2073 656c 662e         del self.
+00014400: 656e 7472 795f 6461 7461 5b73 656c 6563  entry_data[selec
+00014410: 7469 6f6e 5d0d 0a0d 0a20 2020 2020 2020  tion]....       
+00014420: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00014430: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+00014440: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+00014450: 2873 7472 2865 292c 2074 6974 6c65 3d22  (str(e), title="
+00014460: 4572 726f 7222 290d 0a0d 0a20 2020 2020  Error")....     
+00014470: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00014480: 2020 2020 2073 656c 662e 7570 6461 7465       self.update
+00014490: 5f74 6162 6c65 2829 0d0a 0d0a 2020 2020  _table()....    
+000144a0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000144b0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+000144c0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+000144d0: 6966 7928 7374 7228 6529 2c20 7469 746c  ify(str(e), titl
+000144e0: 653d 2245 7272 6f72 2229 0d0a 0d0a 0d0a  e="Error")......
+000144f0: 2020 2020 6465 6620 636f 6e76 6572 745f      def convert_
+00014500: 6466 5f74 6f5f 7465 7828 7365 6c66 2c64  df_to_tex(self,d
+00014510: 6629 3a0d 0a0d 0a20 2020 2020 2020 2064  f):....        d
+00014520: 6566 2077 7261 7073 7472 696e 6728 7329  ef wrapstring(s)
+00014530: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00014540: 2077 7261 7073 2073 7472 696e 670d 0a20   wraps string.. 
+00014550: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00014560: 6e20 7465 7874 7772 6170 2e77 7261 7028  n textwrap.wrap(
+00014570: 732c 2077 6964 7468 3d31 3029 0d0a 0d0a  s, width=10)....
+00014580: 2020 2020 2020 2020 6465 6620 6162 6272          def abbr
+00014590: 6576 6961 7465 5f7a 6572 6f73 286d 795f  eviate_zeros(my_
+000145a0: 6974 656d 293a 0d0a 2020 2020 2020 2020  item):..        
+000145b0: 2020 2020 6966 206d 795f 6974 656d 203d      if my_item =
+000145c0: 3d20 2230 2220 6f72 206d 795f 6974 656d  = "0" or my_item
+000145d0: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+000145e0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+000145f0: 202e 2d20 2220 2023 202e 2d20 220d 0a20   .- "  # .- ".. 
+00014600: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00014610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014620: 2020 6d79 5f69 7465 6d20 3d20 7374 7228    my_item = str(
+00014630: 6d79 5f69 7465 6d29 0d0a 2020 2020 2020  my_item)..      
+00014640: 2020 2020 2020 2020 2020 6d61 785f 6c65            max_le
+00014650: 6e20 3d20 3130 0d0a 2020 2020 2020 2020  n = 10..        
+00014660: 2020 2020 2020 2020 6966 206c 656e 286d          if len(m
+00014670: 795f 6974 656d 2920 3e20 6d61 785f 6c65  y_item) > max_le
+00014680: 6e3a 0d0a 2020 2020 2020 2020 2020 2020  n:..            
+00014690: 2020 2020 2020 2020 7265 7475 726e 206d          return m
+000146a0: 795f 6974 656d 5b3a 6d61 785f 6c65 6e5d  y_item[:max_len]
+000146b0: 202b 2022 2e2e 2e22 0d0a 2020 2020 2020   + "..."..      
+000146c0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+000146d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000146e0: 2020 2020 2072 6574 7572 6e20 6d79 5f69       return my_i
+000146f0: 7465 6d0d 0a0d 0a20 2020 2020 2020 2064  tem....        d
+00014700: 665f 6261 636b 7570 203d 2064 662e 636f  f_backup = df.co
+00014710: 7079 2829 0d0a 0d0a 2020 2020 2020 2020  py()....        
+00014720: 6466 5f6c 6174 6578 203d 2064 662e 746f  df_latex = df.to
+00014730: 5f6c 6174 6578 286c 6f6e 6774 6162 6c65  _latex(longtable
+00014740: 3d46 616c 7365 2c20 6573 6361 7065 3d46  =False, escape=F
+00014750: 616c 7365 292e 7265 706c 6163 6528 22ce  alse).replace(".
+00014760: 9422 2c20 2224 5c44 656c 7461 2422 290d  .", "$\Delta$").
+00014770: 0a0d 0a20 2020 2020 2020 2064 665f 6c61  ...        df_la
+00014780: 7465 7820 3d20 6466 5f6c 6174 6578 2e72  tex = df_latex.r
+00014790: 6570 6c61 6365 2822 5c5c 6265 6769 6e7b  eplace("\\begin{
+000147a0: 7461 6275 6c61 727d 222c 2022 5c5c 6265  tabular}", "\\be
+000147b0: 6769 6e7b 7461 6275 6c61 7278 7d7b 5c5c  gin{tabularx}{\\
+000147c0: 7465 7874 7769 6474 687d 2229 0d0a 2020  textwidth}")..  
+000147d0: 2020 2020 2020 6466 5f6c 6174 6578 203d        df_latex =
+000147e0: 2064 665f 6c61 7465 782e 7265 706c 6163   df_latex.replac
+000147f0: 6528 225c 5c65 6e64 7b74 6162 756c 6172  e("\\end{tabular
+00014800: 7d22 2c20 225c 5c65 6e64 7b74 6162 756c  }", "\\end{tabul
+00014810: 6172 787d 2229 0d0a 2020 2020 2020 2020  arx}")..        
+00014820: 6466 5f6c 6174 6578 203d 2022 5c5c 6265  df_latex = "\\be
+00014830: 6769 6e7b 736d 616c 6c7d 5c6e 2220 2b20  gin{small}\n" + 
+00014840: 6466 5f6c 6174 6578 202b 2022 5c6e 5c65  df_latex + "\n\e
+00014850: 6e64 7b73 6d61 6c6c 7d22 0d0a 0d0a 2020  nd{small}"....  
+00014860: 2020 2020 2020 6466 5f6c 6174 6578 203d        df_latex =
+00014870: 2064 665f 6c61 7465 782e 7265 706c 6163   df_latex.replac
+00014880: 6528 225c 5c6c 6566 7428 222c 2022 2822  e("\\left(", "("
+00014890: 290d 0a20 2020 2020 2020 2064 665f 6c61  )..        df_la
+000148a0: 7465 7820 3d20 6466 5f6c 6174 6578 2e72  tex = df_latex.r
+000148b0: 6570 6c61 6365 2822 5c5c 7269 6768 7429  eplace("\\right)
+000148c0: 222c 2022 2922 290d 0a0d 0a20 2020 2020  ", ")")....     
+000148d0: 2020 2064 665f 6c61 7465 7820 3d20 6466     df_latex = df
+000148e0: 5f6c 6174 6578 2e72 6570 6c61 6365 2822  _latex.replace("
+000148f0: 7b6c 222c 2022 7b4c 7b33 636d 7d22 290d  {l", "{L{3cm}").
+00014900: 0a0d 0a20 2020 2020 2020 2064 665f 6c61  ...        df_la
+00014910: 7465 7820 3d20 2222 220d 0a5c 5c64 6f63  tex = """..\\doc
+00014920: 756d 656e 7463 6c61 7373 5b61 3370 6170  umentclass[a3pap
+00014930: 6572 2c6c 616e 6473 6361 7065 5d7b 6172  er,landscape]{ar
+00014940: 7469 636c 657d 0d0a 5c5c 7573 6570 6163  ticle}..\\usepac
+00014950: 6b61 6765 7b62 6f6f 6b74 6162 737d 0d0a  kage{booktabs}..
+00014960: 5c5c 7573 6570 6163 6b61 6765 7b61 646a  \\usepackage{adj
+00014970: 7573 7462 6f78 7d0d 0a5c 5c75 7365 7061  ustbox}..\\usepa
+00014980: 636b 6167 655b 7461 626c 655d 7b78 636f  ckage[table]{xco
+00014990: 6c6f 727d 0d0a 5c5c 7573 6570 6163 6b61  lor}..\\usepacka
+000149a0: 6765 7b6c 6f6e 6774 6162 6c65 7d0d 0a5c  ge{longtable}..\
+000149b0: 5c75 7365 7061 636b 6167 657b 7461 6275  \usepackage{tabu
+000149c0: 6c61 7278 2c72 6167 6765 6432 657d 0d0a  larx,ragged2e}..
+000149d0: 5c5c 6465 6669 6e65 636f 6c6f 727b 4772  \\definecolor{Gr
+000149e0: 6179 7d7b 6772 6179 7d7b 302e 3930 7d0d  ay}{gray}{0.90}.
+000149f0: 0a5c 5c64 6566 696e 6563 6f6c 6f72 7b4c  .\\definecolor{L
+00014a00: 6967 6874 4772 6179 7d7b 6772 6179 7d7b  ightGray}{gray}{
+00014a10: 302e 3935 7d0d 0a5c 5c64 6566 696e 6563  0.95}..\\definec
+00014a20: 6f6c 6f72 7b57 6869 7465 7d7b 7267 627d  olor{White}{rgb}
+00014a30: 7b31 2c31 2c31 7d0d 0a0d 0a5c 5c6e 6577  {1,1,1}....\\new
+00014a40: 636f 6c75 6d6e 7479 7065 7b67 7d7b 3e7b  columntype{g}{>{
+00014a50: 5c5c 636f 6c75 6d6e 636f 6c6f 727b 5768  \\columncolor{Wh
+00014a60: 6974 657d 5c5c 6172 7261 7962 6163 6b73  ite}\\arraybacks
+00014a70: 6c61 7368 7d4c 7d20 250d 0a5c 5c6e 6577  lash}L} %..\\new
+00014a80: 636f 6c75 6d6e 7479 7065 7b6c 7d7b 3e7b  columntype{l}{>{
+00014a90: 5c5c 636f 6c75 6d6e 636f 6c6f 727b 5768  \\columncolor{Wh
+00014aa0: 6974 657d 5c5c 6172 7261 7962 6163 6b73  ite}\\arraybacks
+00014ab0: 6c61 7368 7d70 7b33 636d 7d7d 2025 6365  lash}p{3cm}} %ce
+00014ac0: 6e74 6572 6564 2022 5822 2063 6f6c 756d  ntered "X" colum
+00014ad0: 6e0d 0a5c 5c6e 6577 636f 6c75 6d6e 7479  n..\\newcolumnty
+00014ae0: 7065 7b4c 7d5b 315d 7b3e 7b5c 5c72 6167  pe{L}[1]{>{\\rag
+00014af0: 6765 6472 6967 6874 5c5c 6172 7261 7962  gedright\\arrayb
+00014b00: 6163 6b73 6c61 7368 7d70 7b5c 5c64 696d  ackslash}p{\\dim
+00014b10: 6578 7072 2331 2d32 5c5c 7461 6263 6f6c  expr#1-2\\tabcol
+00014b20: 7365 702d 325c 5c61 7272 6179 7275 6c65  sep-2\\arrayrule
+00014b30: 7769 6474 682b 2e32 3170 747d 7d0d 0a0d  width+.21pt}}...
+00014b40: 0a5c 5c75 7365 7061 636b 6167 655b 6c65  .\\usepackage[le
+00014b50: 6674 3d31 636d 2c72 6967 6874 3d31 2e35  ft=1cm,right=1.5
+00014b60: 636d 5d7b 6765 6f6d 6574 7279 7d0d 0a0d  cm]{geometry}...
+00014b70: 0a5c 5c62 6567 696e 7b64 6f63 756d 656e  .\\begin{documen
+00014b80: 747d 5c6e 2222 2220 2b20 6466 5f6c 6174  t}\n""" + df_lat
+00014b90: 6578 2020 202b 2022 5c6e 5c5c 656e 647b  ex   + "\n\\end{
+00014ba0: 646f 6375 6d65 6e74 7d22 0d0a 0d0a 2020  document}"....  
+00014bb0: 2020 2020 2020 7079 7065 7263 6c69 702e        pyperclip.
+00014bc0: 636f 7079 2864 665f 6c61 7465 7829 0d0a  copy(df_latex)..
+00014bd0: 2020 2020 2020 2020 2373 656c 662e 6e6f          #self.no
+00014be0: 7469 6679 286d 6573 7361 6765 3d22 4c61  tify(message="La
+00014bf0: 5465 5820 636f 6465 2063 6f70 6965 6420  TeX code copied 
+00014c00: 746f 2063 6c69 7062 6f61 7264 2e20 4861  to clipboard. Ha
+00014c10: 7665 2066 756e 2122 2c20 7469 746c 653d  ve fun!", title=
+00014c20: 2248 6176 6520 6675 6e22 290d 0a20 2020  "Have fun")..   
+00014c30: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
+00014c40: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
+00014c50: 6528 224c 6154 6558 2063 6f64 6520 636f  e("LaTeX code co
+00014c60: 7069 6564 2074 6f20 636c 6970 626f 6172  pied to clipboar
+00014c70: 642e 2048 6176 6520 6675 6e21 2229 0d0a  d. Have fun!")..
+00014c80: 0d0a 0d0a 2020 2020 2020 2020 2320 2d2d  ....        # --
+00014c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00014ca0: 2020 2020 2069 6620 4661 6c73 653a 2023       if False: #
+00014cb0: 2044 4550 5249 4341 5445 440d 0a20 2020   DEPRICATED..   
+00014cc0: 2020 2020 2020 2020 2074 7279 3a0d 0a0d           try:...
 00014cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014ce0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00014cf0: 2020 2020 2020 2020 2020 2023 2073 6875             # shu
-00014d00: 7469 6c2e 726d 7472 6565 286f 732e 6765  til.rmtree(os.ge
-00014d10: 7463 7764 2829 2b22 5c5c 6669 6c65 7322  tcwd()+"\\files"
-00014d20: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00014d30: 2020 2020 2020 2023 206f 732e 6d6b 6469         # os.mkdi
-00014d40: 7228 6f73 2e67 6574 6377 6428 292b 225c  r(os.getcwd()+"\
-00014d50: 5c66 696c 6573 2229 0d0a 0d0a 2020 2020  \files")....    
-00014d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d70: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
-00014d80: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
-00014d90: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
-00014da0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00014db0: 2020 2020 2020 2073 6875 7469 6c2e 6d6f         shutil.mo
-00014dc0: 7665 2870 6174 682b 225c 5c6d 796d 6174  ve(path+"\\mymat
-00014dd0: 7269 782e 7465 7822 202c 2070 6174 682b  rix.tex" , path+
-00014de0: 2022 5c5c 6669 6c65 735c 5c6d 796d 6174   "\\files\\mymat
-00014df0: 7269 782e 7465 7822 290d 0a20 2020 2020  rix.tex")..     
-00014e00: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00014e10: 6875 7469 6c2e 6d6f 7665 2870 6174 6820  hutil.move(path 
-00014e20: 2b20 225c 5c6d 796d 6174 7269 782e 6c6f  + "\\mymatrix.lo
-00014e30: 6722 2c20 7061 7468 202b 2022 5c5c 6669  g", path + "\\fi
-00014e40: 6c65 735c 5c6d 796d 6174 7269 782e 6c6f  les\\mymatrix.lo
-00014e50: 6722 290d 0a20 2020 2020 2020 2020 2020  g")..           
-00014e60: 2020 2020 2020 2020 2073 6875 7469 6c2e           shutil.
-00014e70: 6d6f 7665 2870 6174 6820 2b20 225c 5c6d  move(path + "\\m
-00014e80: 796d 6174 7269 782e 6175 7822 2c20 7061  ymatrix.aux", pa
-00014e90: 7468 202b 2022 5c5c 6669 6c65 735c 5c5c  th + "\\files\\\
-00014ea0: 6d79 6d61 7472 6978 2e61 7578 2229 0d0a  mymatrix.aux")..
-00014eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ec0: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
-00014ed0: 7061 7468 202b 2022 5c5c 6d79 6d61 7472  path + "\\mymatr
-00014ee0: 6978 2e70 6466 222c 2070 6174 6820 2b20  ix.pdf", path + 
-00014ef0: 225c 5c66 696c 6573 5c5c 6d79 6d61 7472  "\\files\\mymatr
-00014f00: 6978 2e70 6466 2229 0d0a 2020 2020 2020  ix.pdf")..      
-00014f10: 2020 2020 2020 2020 2020 2020 2020 2373                #s
-00014f20: 6875 7469 6c2e 636f 7079 286f 732e 6765  hutil.copy(os.ge
-00014f30: 7463 7764 2829 202b 2022 5c5c 6669 6c65  tcwd() + "\\file
-00014f40: 735c 5c6d 796d 6174 7269 782e 6874 6d6c  s\\mymatrix.html
-00014f50: 222c 6f73 2e67 6574 6377 6428 2920 2b20  ",os.getcwd() + 
-00014f60: 225c 5c66 696c 6573 5c5c 6d79 6d61 7472  "\\files\\mymatr
-00014f70: 6978 2e68 746d 6c22 290d 0a20 2020 2020  ix.html")..     
-00014f80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00014f90: 7368 7574 696c 2e63 6f70 7928 6f73 2e67  shutil.copy(os.g
-00014fa0: 6574 6377 6428 2920 2b20 225c 5c66 696c  etcwd() + "\\fil
-00014fb0: 6573 5c5c 6d79 7374 796c 652e 6373 7322  es\\mystyle.css"
-00014fc0: 2c20 6f73 2e67 6574 6377 6428 2920 2b20  , os.getcwd() + 
-00014fd0: 225c 5c66 696c 6573 5c5c 6d79 7374 796c  "\\files\\mystyl
-00014fe0: 652e 6373 7322 290d 0a20 2020 2020 2020  e.css")..       
-00014ff0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00015000: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-00015010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015020: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-00015030: 286d 6573 7361 6765 3d73 7472 2865 292c  (message=str(e),
-00015040: 7469 746c 653d 2241 6e20 4572 726f 7220  title="An Error 
-00015050: 6f63 6375 7272 6564 2e2e 2e28 4944 2031  occurred...(ID 1
-00015060: 3330 3829 2229 0d0a 0d0a 2020 2020 2020  308)")....      
-00015070: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00015080: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00015090: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000150a0: 6c66 2e6e 6f74 6966 7928 6d65 7373 6167  lf.notify(messag
-000150b0: 653d 7374 7228 6529 2c74 6974 6c65 3d22  e=str(e),title="
-000150c0: 416e 2045 7272 6f72 206f 6363 7572 7265  An Error occurre
-000150d0: 642e 2e2e 2849 4420 3133 3131 2922 290d  d...(ID 1311)").
-000150e0: 0a20 2020 2020 2020 2020 2020 2023 202d  .            # -
-000150f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a  ------------....
-00015100: 2020 2020 2020 2020 2020 2020 7064 2e6f              pd.o
-00015110: 7074 696f 6e73 2e64 6973 706c 6179 2e6d  ptions.display.m
-00015120: 6178 5f63 6f6c 7769 6474 6820 3d20 320d  ax_colwidth = 2.
-00015130: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00015140: 665f 6469 7370 6c61 7920 3d20 6466 5f62  f_display = df_b
-00015150: 6163 6b75 702e 6170 706c 796d 6170 2861  ackup.applymap(a
-00015160: 6262 7265 7669 6174 655f 7a65 726f 7329  bbreviate_zeros)
-00015170: 2e74 6f5f 7374 7269 6e67 286c 696e 655f  .to_string(line_
-00015180: 7769 6474 683d 4e6f 6e65 292e 7265 706c  width=None).repl
-00015190: 6163 6528 225c 5f22 2c20 225f 2229 0d0a  ace("\_", "_")..
-000151a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000151b0: 7365 6c66 2e70 6172 656e 742e 7061 7265  self.parent.pare
-000151c0: 6e74 4170 702e 6765 7446 6f72 6d28 2241  ntApp.getForm("A
-000151d0: 4747 525f 464c 4f57 2229 2e64 6174 615f  GGR_FLOW").data_
-000151e0: 626f 782e 7661 6c75 6573 203d 2064 665f  box.values = df_
-000151f0: 6469 7370 6c61 792e 7370 6c69 7428 225c  display.split("\
-00015200: 6e22 290d 0a20 2020 2020 2020 2020 2020  n")..           
-00015210: 2023 2073 656c 662e 7061 7265 6e74 2e70   # self.parent.p
-00015220: 6172 656e 7441 7070 2e73 7769 7463 6846  arentApp.switchF
-00015230: 6f72 6d28 2241 4747 525f 464c 4f57 2229  orm("AGGR_FLOW")
-00015240: 0d0a 0d0a 0d0a 2020 2020 6465 6620 6765  ......    def ge
-00015250: 6e5f 636f 6465 2873 656c 662c 7368 6f77  n_code(self,show
-00015260: 5f6e 6f74 6966 6963 6174 696f 6e3d 4661  _notification=Fa
-00015270: 6c73 6529 3a0d 0a0d 0a20 2020 2020 2020  lse):....       
-00015280: 2063 6f64 6520 3d20 2222 0d0a 2020 2020   code = ""..    
-00015290: 2020 2020 636f 6465 202b 3d20 2266 726f      code += "fro
-000152a0: 6d20 7366 6374 6f6f 6c73 2069 6d70 6f72  m sfctools impor
-000152b0: 7420 466c 6f77 4d61 7472 6978 205c 6e69  t FlowMatrix \ni
-000152c0: 6d70 6f72 7420 6e75 6d70 7920 6173 206e  mport numpy as n
-000152d0: 705c 6e22 0d0a 2020 2020 2020 2020 636f  p\n"..        co
-000152e0: 6465 202b 3d20 2266 726f 6d20 7366 6374  de += "from sfct
-000152f0: 6f6f 6c73 2069 6d70 6f72 7420 4261 6c61  ools import Bala
-00015300: 6e63 6545 6e74 7279 2c41 6363 6f75 6e74  nceEntry,Account
-00015310: 735c 6e22 0d0a 2020 2020 2020 2020 636f  s\n"..        co
-00015320: 6465 202b 3d20 2266 726f 6d20 7366 6374  de += "from sfct
-00015330: 6f6f 6c73 2069 6d70 6f72 7420 4361 7368  ools import Cash
-00015340: 466c 6f77 456e 7472 795c 6e22 0d0a 2020  FlowEntry\n"..  
-00015350: 2020 2020 2020 636f 6465 202b 3d20 2266        code += "f
-00015360: 726f 6d20 7366 6374 6f6f 6c73 2069 6d70  rom sfctools imp
-00015370: 6f72 7420 4943 5345 6e74 7279 5c6e 220d  ort ICSEntry\n".
-00015380: 0a20 2020 2020 2020 2063 6f64 6520 2b3d  .        code +=
-00015390: 2022 4341 203d 2041 6363 6f75 6e74 732e   "CA = Accounts.
-000153a0: 4341 5c6e 4b41 203d 2041 6363 6f75 6e74  CA\nKA = Account
-000153b0: 732e 4b41 5c6e 5c6e 220d 0a0d 0a20 2020  s.KA\n\n"....   
-000153c0: 2020 2020 2073 7562 6a65 6374 735f 636f       subjects_co
-000153d0: 756e 7420 3d20 6465 6661 756c 7464 6963  unt = defaultdic
-000153e0: 7428 6c61 6d62 6461 3a20 302e 3029 0d0a  t(lambda: 0.0)..
-000153f0: 0d0a 2020 2020 2020 2020 666f 7220 6669  ..        for fi
-00015400: 6c65 6461 7461 2069 6e20 7365 6c66 2e65  ledata in self.e
-00015410: 6e74 7279 5f64 6174 613a 0d0a 2020 2020  ntry_data:..    
-00015420: 2020 2020 2020 2020 6167 656e 7431 203d          agent1 =
-00015430: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
-00015440: 3122 5d0d 0a20 2020 2020 2020 2020 2020  1"]..           
-00015450: 2061 6765 6e74 3220 3d20 6669 6c65 6461   agent2 = fileda
-00015460: 7461 5b22 6167 656e 7432 225d 0d0a 0d0a  ta["agent2"]....
-00015470: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00015480: 6765 6e74 3120 3d3d 2061 6765 6e74 323a  gent1 == agent2:
-00015490: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000154a0: 2020 6167 656e 7432 203d 2022 6f74 6865    agent2 = "othe
-000154b0: 725f 2220 2b20 6167 656e 7432 0d0a 0d0a  r_" + agent2....
-000154c0: 2020 2020 2020 2020 2020 2020 6131 203d              a1 =
-000154d0: 2066 696c 6564 6174 615b 2261 3122 5d20   filedata["a1"] 
-000154e0: 2023 202b 2022 5c6e 220d 0a20 2020 2020   # + "\n"..     
-000154f0: 2020 2020 2020 2065 3120 3d20 6669 6c65         e1 = file
-00015500: 6461 7461 5b22 6531 225d 2020 2320 2b20  data["e1"]  # + 
-00015510: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-00015520: 2020 6c31 203d 2066 696c 6564 6174 615b    l1 = filedata[
-00015530: 226c 3122 5d20 2023 202b 2022 5c6e 220d  "l1"]  # + "\n".
-00015540: 0a20 2020 2020 2020 2020 2020 2061 3220  .            a2 
-00015550: 3d20 6669 6c65 6461 7461 5b22 6132 225d  = filedata["a2"]
-00015560: 2020 2320 2b20 225c 6e22 0d0a 2020 2020    # + "\n"..    
-00015570: 2020 2020 2020 2020 6532 203d 2066 696c          e2 = fil
-00015580: 6564 6174 615b 2265 3222 5d20 2023 202b  edata["e2"]  # +
-00015590: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
-000155a0: 2020 206c 3220 3d20 6669 6c65 6461 7461     l2 = filedata
-000155b0: 5b22 6c32 225d 2020 2320 2b20 225c 6e22  ["l2"]  # + "\n"
-000155c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000155d0: 666c 6f77 5f63 6865 636b 203d 2054 7275  flow_check = Tru
-000155e0: 650d 0a20 2020 2020 2020 2020 2020 2070  e..            p
-000155f0: 7269 6e74 2822 464c 4f57 2043 4845 434b  rint("FLOW CHECK
-00015600: 222c 2066 696c 6564 6174 615b 2273 686f  ", filedata["sho
-00015610: 7274 6e61 6d65 225d 2c66 696c 6564 6174  rtname"],filedat
-00015620: 615b 226c 6f67 2074 7261 6e73 6163 7469  a["log transacti
-00015630: 6f6e 225d 290d 0a20 2020 2020 2020 2020  on"])..         
-00015640: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00015650: 2866 696c 6564 6174 615b 226c 6f67 2074  (filedata["log t
-00015660: 7261 6e73 6163 7469 6f6e 225d 2c73 7472  ransaction"],str
-00015670: 2920 616e 6420 6669 6c65 6461 7461 5b22  ) and filedata["
-00015680: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
-00015690: 5d2e 7374 7269 7028 2920 3d3d 2022 5472  ].strip() == "Tr
-000156a0: 7565 223a 0d0a 2020 2020 2020 2020 2020  ue":..          
-000156b0: 2020 2020 2020 2320 626f 6f6c 2866 696c        # bool(fil
-000156c0: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
-000156d0: 6163 7469 6f6e 225d 290d 0a20 2020 2020  action"])..     
-000156e0: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
-000156f0: 6368 6563 6b20 3d20 5472 7565 0d0a 2020  check = True..  
-00015700: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00015710: 696e 7428 666c 6f77 5f63 6865 636b 290d  int(flow_check).
-00015720: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00015730: 6620 6973 696e 7374 616e 6365 2866 696c  f isinstance(fil
-00015740: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
-00015750: 6163 7469 6f6e 225d 2c73 7472 2920 616e  action"],str) an
-00015760: 6420 6669 6c65 6461 7461 5b22 6c6f 6720  d filedata["log 
-00015770: 7472 616e 7361 6374 696f 6e22 5d2e 7374  transaction"].st
-00015780: 7269 7028 2920 3d3d 2022 4661 6c73 6522  rip() == "False"
-00015790: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000157a0: 2020 2023 2062 6f6f 6c28 6669 6c65 6461     # bool(fileda
-000157b0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
-000157c0: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
-000157d0: 2020 2020 2020 2020 666c 6f77 5f63 6865          flow_che
-000157e0: 636b 203d 2046 616c 7365 0d0a 2020 2020  ck = False..    
-000157f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00015800: 7428 666c 6f77 5f63 6865 636b 290d 0a20  t(flow_check).. 
-00015810: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00015820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015830: 2020 666c 6f77 5f63 6865 636b 203d 2066    flow_check = f
-00015840: 696c 6564 6174 615b 226c 6f67 2074 7261  iledata["log tra
-00015850: 6e73 6163 7469 6f6e 225d 0d0a 2020 2020  nsaction"]..    
-00015860: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00015870: 7428 666c 6f77 5f63 6865 636b 290d 0a20  t(flow_check).. 
-00015880: 2020 2020 2020 2020 2020 2023 7072 696e             #prin
-00015890: 7428 2246 4c4f 5720 4348 4543 4b22 2c20  t("FLOW CHECK", 
-000158a0: 6669 6c65 6e61 6d65 2c20 666c 6f77 5f63  filename, flow_c
-000158b0: 6865 636b 290d 0a20 2020 2020 2020 2020  heck)..         
-000158c0: 2020 2070 7269 6e74 2822 7479 7065 222c     print("type",
-000158d0: 2074 7970 6528 666c 6f77 5f63 6865 636b   type(flow_check
-000158e0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-000158f0: 2020 6b69 6e64 203d 2066 696c 6564 6174    kind = filedat
-00015900: 615b 226b 696e 6422 5d0d 0a0d 0a20 2020  a["kind"]....   
-00015910: 2020 2020 2020 2020 2023 7375 626a 6563           #subjec
-00015920: 7420 3d20 2066 696c 6564 6174 615b 2273  t =  filedata["s
-00015930: 7562 6a65 6374 225d 2e72 6570 6c61 6365  ubject"].replace
-00015940: 2822 2022 2c22 5f22 2920 2b20 225f 2220  (" ","_") + "_" 
-00015950: 2b20 6669 6c65 6461 7461 5b22 7368 6f72  + filedata["shor
-00015960: 746e 616d 6522 2e72 6570 6c61 6365 2822  tname".replace("
-00015970: 2022 2c22 5f22 295d 2e6c 6f77 6572 2829   ","_")].lower()
-00015980: 0d0a 2020 2020 2020 2020 2020 2020 7375  ..            su
-00015990: 626a 6563 7420 3d20 2066 696c 6564 6174  bject =  filedat
-000159a0: 615b 2273 686f 7274 6e61 6d65 222e 7265  a["shortname".re
-000159b0: 706c 6163 6528 2220 222c 225f 2229 5d2e  place(" ","_")].
-000159c0: 7265 706c 6163 6528 2228 222c 225f 2229  replace("(","_")
-000159d0: 2e72 6570 6c61 6365 2822 2922 2c22 2229  .replace(")","")
-000159e0: 2e6c 6f77 6572 2829 0d0a 2020 2020 2020  .lower()..      
-000159f0: 2020 2020 2020 7375 626a 6563 745f 7374        subject_st
-00015a00: 7220 3d20 2066 696c 6564 6174 615b 2273  r =  filedata["s
-00015a10: 7562 6a65 6374 222e 7265 706c 6163 6528  ubject".replace(
-00015a20: 2220 222c 225f 2229 5d2e 6c6f 7765 7228  " ","_")].lower(
-00015a30: 292e 6361 7069 7461 6c69 7a65 2829 2e72  ).capitalize().r
-00015a40: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
-00015a50: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00015a60: 7375 626a 6563 7473 5f63 6f75 6e74 5b73  subjects_count[s
-00015a70: 7562 6a65 6374 5d20 2b3d 2031 0d0a 2020  ubject] += 1..  
-00015a80: 2020 2020 2020 2020 2020 6966 2073 7562            if sub
-00015a90: 6a65 6374 735f 636f 756e 745b 7375 626a  jects_count[subj
-00015aa0: 6563 745d 203e 2031 3a20 2320 7375 6666  ect] > 1: # suff
-00015ab0: 6978 2066 6f72 2073 616d 6520 6e61 6d65  ix for same name
-00015ac0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-00015ad0: 2020 2073 7562 6a65 6374 202b 3d20 225f     subject += "_
-00015ae0: 2569 2220 2520 696e 7428 7375 626a 6563  %i" % int(subjec
-00015af0: 7473 5f63 6f75 6e74 5b73 7562 6a65 6374  ts_count[subject
-00015b00: 5d29 0d0a 0d0a 0d0a 2020 2020 2020 2020  ])......        
-00015b10: 2020 2020 7175 616e 7469 7479 203d 2022      quantity = "
-00015b20: 7122 2023 2066 696c 6564 6174 615b 2271  q" # filedata["q
-00015b30: 7561 6e74 6974 7922 5d0d 0a0d 0a20 2020  uantity"]....   
-00015b40: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-00015b50: 7320 3d20 5b5d 0d0a 0d0a 2020 2020 2020  s = []....      
-00015b60: 2020 2020 2020 6966 2022 756e 692d 6469        if "uni-di
-00015b70: 7265 6374 696f 6e61 6c22 2069 6e20 6669  rectional" in fi
-00015b80: 6c65 6461 7461 3a0d 0a20 2020 2020 2020  ledata:..       
-00015b90: 2020 2020 2020 2020 2075 6e69 6469 7220           unidir 
-00015ba0: 3d20 6669 6c65 6461 7461 5b22 756e 692d  = filedata["uni-
-00015bb0: 6469 7265 6374 696f 6e61 6c22 5d0d 0a0d  directional"]...
-00015bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015bd0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
-00015be0: 2822 636f 6e64 203d 2028 6973 696e 7374  ("cond = (isinst
-00015bf0: 616e 6365 2871 2c66 6c6f 6174 2920 6f72  ance(q,float) or
-00015c00: 2069 7369 6e73 7461 6e63 6528 712c 696e   isinstance(q,in
-00015c10: 7429 2922 290d 0a20 2020 2020 2020 2020  t))")..         
-00015c20: 2020 2020 2020 2063 6f6d 6d61 6e64 732e         commands.
-00015c30: 6170 7065 6e64 2822 6966 2063 6f6e 643a  append("if cond:
-00015c40: 2061 7373 6572 7420 6e6f 7420 6e70 2e69   assert not np.i
-00015c50: 736e 616e 2871 2922 290d 0a20 2020 2020  snan(q)")..     
-00015c60: 2020 2020 2020 2020 2020 2023 205e 2077             # ^ w
-00015c70: 696c 6c20 616c 736f 2070 6173 7320 666f  ill also pass fo
-00015c80: 7220 6e70 2e66 6c6f 6174 3634 0d0a 2020  r np.float64..  
-00015c90: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00015ca0: 6d6d 616e 6473 2e61 7070 656e 6428 2269  mmands.append("i
-00015cb0: 6620 636f 6e64 3a20 6173 7365 7274 2071  f cond: assert q
-00015cc0: 203c 202b 6e70 2e69 6e66 2229 0d0a 2020   < +np.inf")..  
-00015cd0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00015ce0: 6d6d 616e 6473 2e61 7070 656e 6428 2269  mmands.append("i
-00015cf0: 6620 636f 6e64 3a20 6173 7365 7274 2071  f cond: assert q
-00015d00: 203e 202d 6e70 2e69 6e66 2229 0d0a 0d0a   > -np.inf")....
-00015d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d20: 2370 7269 6e74 2822 756e 692d 6469 7265  #print("uni-dire
-00015d30: 6374 696f 6e61 6c22 2c75 6e69 6469 7229  ctional",unidir)
-00015d40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015d50: 2020 6966 2073 7472 2875 6e69 6469 7229    if str(unidir)
-00015d60: 203d 3d20 2254 7275 6522 3a20 2320 646f   == "True": # do
-00015d70: 206e 6f74 2064 6f20 626f 6f6c 2875 6e69   not do bool(uni
-00015d80: 6469 7229 0d0a 2020 2020 2020 2020 2020  dir)..          
-00015d90: 2020 2020 2020 2020 2020 236e 616d 6161            #namaa
-00015da0: 6120 3d20 6669 6c65 6461 7461 5b22 7368  a = filedata["sh
-00015db0: 6f72 746e 616d 6522 5d0d 0a20 2020 2020  ortname"]..     
-00015dc0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00015dd0: 7365 6c66 2e6e 6f74 6966 7928 2028 6e61  self.notify( (na
-00015de0: 6d61 6161 2b20 7374 7228 756e 6964 6972  maaa+ str(unidir
-00015df0: 292b 2022 3d22 2b28 7374 7228 626f 6f6c  )+ "="+(str(bool
-00015e00: 2875 6e69 6469 7229 2929 292c 7469 746c  (unidir)))),titl
-00015e10: 653d 2263 6865 636b 2229 0d0a 2020 2020  e="check")..    
-00015e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e30: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
-00015e40: 2269 6620 636f 6e64 3a20 6173 7365 7274  "if cond: assert
-00015e50: 2071 203e 3d20 302c 2027 6861 7665 2074   q >= 0, 'have t
-00015e60: 6f20 7061 7373 2070 6f73 6974 6976 6520  o pass positive 
-00015e70: 7175 616e 7469 7479 3a20 756e 6964 6972  quantity: unidir
-00015e80: 6563 7469 6f6e 616c 2074 7261 6e73 6163  ectional transac
-00015e90: 7469 6f6e 2722 290d 0a0d 0a20 2020 2020  tion'")....     
-00015ea0: 2020 2020 2020 2063 6f6d 6d61 6e64 7320         commands 
-00015eb0: 3d20 636f 6d6d 616e 6473 202b 205b 2225  = commands + ["%
-00015ec0: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
-00015ed0: 6469 7365 6e67 6167 6528 2922 2025 2061  disengage()" % a
-00015ee0: 6765 6e74 315d 0d0a 2020 2020 2020 2020  gent1]..        
-00015ef0: 2020 2020 6966 2054 7275 653a 2023 2061      if True: # a
-00015f00: 6765 6e74 3120 213d 2061 6765 6e74 323a  gent1 != agent2:
-00015f10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015f20: 2020 636f 6d6d 616e 6473 2b3d 205b 2225    commands+= ["%
-00015f30: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
-00015f40: 6469 7365 6e67 6167 6528 2922 2025 2061  disengage()" % a
-00015f50: 6765 6e74 325d 0d0a 0d0a 2020 2020 2020  gent2]....      
-00015f60: 2020 2020 2020 666f 7220 656e 7472 7920        for entry 
-00015f70: 696e 2065 312e 7370 6c69 7428 225c 6e22  in e1.split("\n"
-00015f80: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00015f90: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
-00015fa0: 2222 2061 6e64 2065 6e74 7279 2021 3d20  "" and entry != 
-00015fb0: 225c 6e22 3a0d 0a20 2020 2020 2020 2020  "\n":..         
-00015fc0: 2020 2020 2020 2020 2020 2073 6967 6e2c             sign,
-00015fd0: 2069 7465 6d2c 2073 696c 656e 7420 3d20   item, silent = 
-00015fe0: 7365 6c66 2e65 6e74 7279 5f74 6f5f 7661  self.entry_to_va
-00015ff0: 6c73 2865 6e74 7279 2c20 6167 656e 7431  ls(entry, agent1
-00016000: 2c20 2245 7175 6974 7922 290d 0a20 2020  , "Equity")..   
-00016010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016020: 2069 6620 7369 676e 2069 7320 6e6f 7420   if sign is not 
-00016030: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00016040: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00016050: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
-00016060: 2573 2e62 616c 616e 6365 5f73 6865 6574  %s.balance_sheet
-00016070: 2e63 6861 6e67 655f 6974 656d 2827 2573  .change_item('%s
-00016080: 272c 2025 732c 2025 732c 2073 7570 7072  ', %s, %s, suppr
-00016090: 6573 735f 7374 6f63 6b3d 2573 2922 2025  ess_stock=%s)" %
-000160a0: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
-000160b0: 2020 2020 2020 2020 2020 2020 6167 656e              agen
-000160c0: 7431 2c20 6974 656d 2c20 2242 616c 616e  t1, item, "Balan
-000160d0: 6365 456e 7472 792e 4551 5549 5459 222c  ceEntry.EQUITY",
-000160e0: 2073 6967 6e20 2b20 7175 616e 7469 7479   sign + quantity
-000160f0: 2c20 7369 6c65 6e74 2929 0d0a 2020 2020  , silent))..    
-00016100: 2020 2020 2020 2020 666f 7220 656e 7472          for entr
-00016110: 7920 696e 2061 312e 7370 6c69 7428 225c  y in a1.split("\
-00016120: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-00016130: 2020 2020 2020 6966 2065 6e74 7279 2021        if entry !
-00016140: 3d20 2222 2061 6e64 2065 6e74 7279 2021  = "" and entry !
-00016150: 3d20 225c 6e22 3a0d 0a20 2020 2020 2020  = "\n":..       
-00016160: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-00016170: 6e2c 2069 7465 6d2c 2073 696c 656e 7420  n, item, silent 
-00016180: 3d20 7365 6c66 2e65 6e74 7279 5f74 6f5f  = self.entry_to_
-00016190: 7661 6c73 2865 6e74 7279 2c20 6167 656e  vals(entry, agen
-000161a0: 7431 2c20 2241 7373 6574 7322 290d 0a20  t1, "Assets").. 
-000161b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000161c0: 2020 2069 6620 7369 676e 2069 7320 6e6f     if sign is no
-000161d0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-000161e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000161f0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
-00016200: 2822 2573 2e62 616c 616e 6365 5f73 6865  ("%s.balance_she
-00016210: 6574 2e63 6861 6e67 655f 6974 656d 2827  et.change_item('
-00016220: 2573 272c 2025 732c 2025 732c 2073 7570  %s', %s, %s, sup
-00016230: 7072 6573 735f 7374 6f63 6b3d 2573 2922  press_stock=%s)"
-00016240: 2025 2028 0d0a 2020 2020 2020 2020 2020   % (..          
-00016250: 2020 2020 2020 2020 2020 2020 2020 6167                ag
-00016260: 656e 7431 2c20 6974 656d 2c20 2242 616c  ent1, item, "Bal
-00016270: 616e 6365 456e 7472 792e 4153 5345 5453  anceEntry.ASSETS
-00016280: 222c 2073 6967 6e20 2b20 7175 616e 7469  ", sign + quanti
-00016290: 7479 2c20 7369 6c65 6e74 2929 0d0a 2020  ty, silent))..  
-000162a0: 2020 2020 2020 2020 2020 666f 7220 656e            for en
-000162b0: 7472 7920 696e 206c 312e 7370 6c69 7428  try in l1.split(
-000162c0: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-000162d0: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
-000162e0: 2021 3d20 2222 2061 6e64 2065 6e74 7279   != "" and entry
-000162f0: 2021 3d20 225c 6e22 3a0d 0a20 2020 2020   != "\n":..     
-00016300: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00016310: 6967 6e2c 2069 7465 6d2c 2073 696c 656e  ign, item, silen
-00016320: 7420 3d20 7365 6c66 2e65 6e74 7279 5f74  t = self.entry_t
-00016330: 6f5f 7661 6c73 2865 6e74 7279 2c20 6167  o_vals(entry, ag
-00016340: 656e 7431 2c20 224c 6961 6269 6c69 7469  ent1, "Liabiliti
-00016350: 6573 2229 0d0a 2020 2020 2020 2020 2020  es")..          
-00016360: 2020 2020 2020 2020 2020 6966 2073 6967            if sig
-00016370: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
-00016380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016390: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
-000163a0: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
-000163b0: 6e63 655f 7368 6565 742e 6368 616e 6765  nce_sheet.change
-000163c0: 5f69 7465 6d28 2725 7327 2c20 2573 2c20  _item('%s', %s, 
-000163d0: 2573 2c20 7375 7070 7265 7373 5f73 746f  %s, suppress_sto
-000163e0: 636b 3d25 7329 2220 2520 280d 0a20 2020  ck=%s)" % (..   
-000163f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016400: 2020 2020 2061 6765 6e74 312c 2069 7465       agent1, ite
-00016410: 6d2c 2022 4261 6c61 6e63 6545 6e74 7279  m, "BalanceEntry
-00016420: 2e4c 4941 4249 4c49 5449 4553 222c 2073  .LIABILITIES", s
-00016430: 6967 6e20 2b20 7175 616e 7469 7479 2c20  ign + quantity, 
-00016440: 7369 6c65 6e74 2929 0d0a 2020 2020 2020  silent))..      
-00016450: 2020 2020 2020 666f 7220 656e 7472 7920        for entry 
-00016460: 696e 2065 322e 7370 6c69 7428 225c 6e22  in e2.split("\n"
-00016470: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00016480: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
-00016490: 2222 2061 6e64 2065 6e74 7279 2021 3d20  "" and entry != 
-000164a0: 225c 6e22 3a0d 0a20 2020 2020 2020 2020  "\n":..         
-000164b0: 2020 2020 2020 2020 2020 2073 6967 6e2c             sign,
-000164c0: 2069 7465 6d2c 2073 696c 656e 7420 3d20   item, silent = 
-000164d0: 7365 6c66 2e65 6e74 7279 5f74 6f5f 7661  self.entry_to_va
-000164e0: 6c73 2865 6e74 7279 2c20 6167 656e 7432  ls(entry, agent2
-000164f0: 2c20 2245 7175 6974 7922 290d 0a20 2020  , "Equity")..   
-00016500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016510: 2069 6620 7369 676e 2069 7320 6e6f 7420   if sign is not 
-00016520: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00016530: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00016540: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
-00016550: 2573 2e62 616c 616e 6365 5f73 6865 6574  %s.balance_sheet
-00016560: 2e63 6861 6e67 655f 6974 656d 2827 2573  .change_item('%s
-00016570: 272c 2025 732c 2025 732c 2073 7570 7072  ', %s, %s, suppr
-00016580: 6573 735f 7374 6f63 6b3d 2573 2922 2025  ess_stock=%s)" %
-00016590: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
-000165a0: 2020 2020 2020 2020 2020 2020 6167 656e              agen
-000165b0: 7432 2c20 6974 656d 2c20 2242 616c 616e  t2, item, "Balan
-000165c0: 6365 456e 7472 792e 4551 5549 5459 222c  ceEntry.EQUITY",
-000165d0: 2073 6967 6e20 2b20 7175 616e 7469 7479   sign + quantity
-000165e0: 2c20 7369 6c65 6e74 2929 0d0a 2020 2020  , silent))..    
-000165f0: 2020 2020 2020 2020 666f 7220 656e 7472          for entr
-00016600: 7920 696e 2061 322e 7370 6c69 7428 225c  y in a2.split("\
-00016610: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-00016620: 2020 2020 2020 6966 2065 6e74 7279 2021        if entry !
-00016630: 3d20 2222 2061 6e64 2065 6e74 7279 2021  = "" and entry !
-00016640: 3d20 225c 6e22 3a0d 0a20 2020 2020 2020  = "\n":..       
-00016650: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-00016660: 6e2c 2069 7465 6d2c 2073 696c 656e 7420  n, item, silent 
-00016670: 3d20 7365 6c66 2e65 6e74 7279 5f74 6f5f  = self.entry_to_
-00016680: 7661 6c73 2865 6e74 7279 2c20 6167 656e  vals(entry, agen
-00016690: 7432 2c20 2241 7373 6574 7322 290d 0a20  t2, "Assets").. 
-000166a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166b0: 2020 2069 6620 7369 676e 2069 7320 6e6f     if sign is no
-000166c0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-000166d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166e0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
-000166f0: 2822 2573 2e62 616c 616e 6365 5f73 6865  ("%s.balance_she
-00016700: 6574 2e63 6861 6e67 655f 6974 656d 2827  et.change_item('
-00016710: 2573 272c 2025 732c 2025 732c 2073 7570  %s', %s, %s, sup
-00016720: 7072 6573 735f 7374 6f63 6b3d 2573 2922  press_stock=%s)"
-00016730: 2025 2028 0d0a 2020 2020 2020 2020 2020   % (..          
-00016740: 2020 2020 2020 2020 2020 2020 2020 6167                ag
-00016750: 656e 7432 2c20 6974 656d 2c20 2242 616c  ent2, item, "Bal
-00016760: 616e 6365 456e 7472 792e 4153 5345 5453  anceEntry.ASSETS
-00016770: 222c 2073 6967 6e20 2b20 7175 616e 7469  ", sign + quanti
-00016780: 7479 2c20 7369 6c65 6e74 2929 0d0a 2020  ty, silent))..  
-00016790: 2020 2020 2020 2020 2020 666f 7220 656e            for en
-000167a0: 7472 7920 696e 206c 322e 7370 6c69 7428  try in l2.split(
-000167b0: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-000167c0: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
-000167d0: 2021 3d20 2222 2061 6e64 2065 6e74 7279   != "" and entry
-000167e0: 2021 3d20 225c 6e22 3a0d 0a20 2020 2020   != "\n":..     
-000167f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00016800: 6967 6e2c 2069 7465 6d2c 2073 696c 656e  ign, item, silen
-00016810: 7420 3d20 7365 6c66 2e65 6e74 7279 5f74  t = self.entry_t
-00016820: 6f5f 7661 6c73 2865 6e74 7279 2c20 6167  o_vals(entry, ag
-00016830: 656e 7432 2c20 224c 6961 6269 6c69 7469  ent2, "Liabiliti
-00016840: 6573 2229 0d0a 2020 2020 2020 2020 2020  es")..          
-00016850: 2020 2020 2020 2020 2020 6966 2073 6967            if sig
-00016860: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
-00016870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016880: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
-00016890: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
-000168a0: 6e63 655f 7368 6565 742e 6368 616e 6765  nce_sheet.change
-000168b0: 5f69 7465 6d28 2725 7327 2c20 2573 2c20  _item('%s', %s, 
-000168c0: 2573 2c20 7375 7070 7265 7373 5f73 746f  %s, suppress_sto
-000168d0: 636b 3d25 7329 2220 2520 280d 0a20 2020  ck=%s)" % (..   
-000168e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000168f0: 2020 2020 2061 6765 6e74 322c 2069 7465       agent2, ite
-00016900: 6d2c 2022 4261 6c61 6e63 6545 6e74 7279  m, "BalanceEntry
-00016910: 2e4c 4941 4249 4c49 5449 4553 222c 2073  .LIABILITIES", s
-00016920: 6967 6e20 2b20 7175 616e 7469 7479 2c20  ign + quantity, 
-00016930: 7369 6c65 6e74 2929 0d0a 0d0a 2020 2020  silent))....    
-00016940: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
-00016950: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
-00016960: 6e63 655f 7368 6565 742e 656e 6761 6765  nce_sheet.engage
-00016970: 2829 2220 2520 6167 656e 7431 290d 0a20  ()" % agent1).. 
-00016980: 2020 2020 2020 2020 2020 2069 6620 5472             if Tr
-00016990: 7565 3a20 2320 6167 656e 7431 213d 6167  ue: # agent1!=ag
-000169a0: 656e 7432 3a0d 0a20 2020 2020 2020 2020  ent2:..         
-000169b0: 2020 2020 2020 2063 6f6d 6d61 6e64 732e         commands.
-000169c0: 6170 7065 6e64 2822 2573 2e62 616c 616e  append("%s.balan
-000169d0: 6365 5f73 6865 6574 2e65 6e67 6167 6528  ce_sheet.engage(
-000169e0: 2922 2025 2061 6765 6e74 3229 0d0a 0d0a  )" % agent2)....
-000169f0: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-00016a00: 666c 6f77 203d 2066 6c6f 775f 6368 6563  flow = flow_chec
-00016a10: 6b0d 0a20 2020 2020 2020 2020 2020 2069  k..            i
-00016a20: 6620 6164 645f 666c 6f77 3a0d 0a20 2020  f add_flow:..   
-00016a30: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00016a40: 6e74 2873 7562 6a65 6374 5f73 7472 2c22  nt(subject_str,"
-00016a50: 666c 6f77 2063 6865 636b 222c 666c 6f77  flow check",flow
-00016a60: 5f63 6865 636b 290d 0a0d 0a20 2020 2020  _check)....     
-00016a70: 2020 2020 2020 2020 2020 206b 696e 645f             kind_
-00016a80: 656e 756d 203d 2022 2825 732c 2573 2922  enum = "(%s,%s)"
-00016a90: 2025 2028 6b69 6e64 2e73 706c 6974 2822   % (kind.split("
-00016aa0: 2d3e 2229 5b30 5d2e 7374 7269 7028 292c  ->")[0].strip(),
-00016ab0: 6b69 6e64 2e73 706c 6974 2822 2d3e 2229  kind.split("->")
-00016ac0: 5b31 5d2e 7374 7269 7028 2929 0d0a 0d0a  [1].strip())....
-00016ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ae0: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
-00016af0: 2246 6c6f 774d 6174 7269 7828 292e 6c6f  "FlowMatrix().lo
-00016b00: 675f 666c 6f77 2825 732c 2025 732c 2025  g_flow(%s, %s, %
-00016b10: 732c 2025 732c 2073 7562 6a65 6374 3d27  s, %s, subject='
-00016b20: 2573 2729 2220 2520 286b 696e 645f 656e  %s')" % (kind_en
-00016b30: 756d 2c20 7175 616e 7469 7479 2c20 6167  um, quantity, ag
-00016b40: 656e 7431 2c20 6167 656e 7432 2c20 7375  ent1, agent2, su
-00016b50: 626a 6563 745f 7374 7229 290d 0a0d 0a20  bject_str)).... 
-00016b60: 2020 2020 2020 2020 2020 2023 2061 7070             # app
-00016b70: 656e 6420 696e 7365 7274 5f6c 696e 6b20  end insert_link 
-00016b80: 636f 6d6d 616e 6420 746f 2063 6f64 650d  command to code.
-00016b90: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00016ba0: 206d 795f 696e 636f 6d65 5f64 6963 7420   my_income_dict 
-00016bb0: 3d20 7b20 2320 2374 7261 6e73 6c61 7465  = { # #translate
-00016bc0: 7320 7374 7269 6e67 2069 6e74 6f20 4943  s string into IC
-00016bd0: 5345 6e74 7279 2028 666f 7220 6265 7474  SEntry (for bett
-00016be0: 6572 2065 6666 6963 6965 6e63 7929 0d0a  er efficiency)..
-00016bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c00: 2252 6576 656e 7565 223a 2022 4943 5345  "Revenue": "ICSE
-00016c10: 6e74 7279 2e52 4556 454e 5545 5322 2c0d  ntry.REVENUES",.
-00016c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016c30: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
-00016c40: 223a 2022 4943 5345 6e74 7279 2e4e 4f49  ": "ICSEntry.NOI
-00016c50: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00016c60: 2020 2020 2245 7870 656e 7365 223a 2022      "Expense": "
-00016c70: 4943 5345 6e74 7279 2e45 5850 454e 5345  ICSEntry.EXPENSE
-00016c80: 5322 2c0d 0a20 2020 2020 2020 2020 2020  S",..           
-00016c90: 2020 2020 2022 5461 7822 3a20 2249 4353       "Tax": "ICS
-00016ca0: 456e 7472 792e 5441 5845 5322 2c0d 0a20  Entry.TAXES",.. 
-00016cb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016cc0: 496e 7465 7265 7374 223a 2022 4943 5345  Interest": "ICSE
-00016cd0: 6e74 7279 2e49 4e54 4552 4553 5422 2c0d  ntry.INTEREST",.
-00016ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016cf0: 2022 4761 696e 223a 2022 4943 5345 6e74   "Gain": "ICSEnt
-00016d00: 7279 2e47 4149 4e53 222c 0d0a 2020 2020  ry.GAINS",..    
-00016d10: 2020 2020 2020 2020 2020 2020 224e 6f6e              "Non
-00016d20: 7461 782e 5072 6f66 6974 223a 2022 4943  tax.Profit": "IC
-00016d30: 5345 6e74 7279 2e4e 4f4e 5441 585f 5052  SEntry.NONTAX_PR
-00016d40: 4f46 4954 5322 2c0d 0a20 2020 2020 2020  OFITS",..       
-00016d50: 2020 2020 2020 2020 2022 4e6f 6e74 6178           "Nontax
-00016d60: 2e20 5072 6f66 6974 223a 2022 4943 5345  . Profit": "ICSE
-00016d70: 6e74 7279 2e4e 4f4e 5441 585f 5052 4f46  ntry.NONTAX_PROF
-00016d80: 4954 5322 2c20 2320 7175 6963 6b20 616e  ITS", # quick an
-00016d90: 6420 6469 7274 7920 6275 6766 6978 0d0a  d dirty bugfix..
-00016da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016db0: 224e 6f6e 7461 782e 204c 6f73 7322 3a20  "Nontax. Loss": 
-00016dc0: 2022 4943 5345 6e74 7279 2e4e 4f4e 5441   "ICSEntry.NONTA
-00016dd0: 585f 4c4f 5353 4553 222c 0d0a 2020 2020  X_LOSSES",..    
-00016de0: 2020 2020 2020 2020 2020 2020 224c 6f73              "Los
-00016df0: 7322 3a20 2022 4943 5345 6e74 7279 2e4c  s":  "ICSEntry.L
-00016e00: 4f53 5345 5322 0d0a 2020 2020 2020 2020  OSSES"..        
-00016e10: 2020 2020 7d0d 0a0d 0a20 2020 2020 2020      }....       
-00016e20: 2020 2020 2023 2069 6e63 6f6d 6520 7374       # income st
-00016e30: 6174 656d 656e 743f 0d0a 2020 2020 2020  atement?..      
-00016e40: 2020 2020 2020 6966 2022 696e 636f 6d65        if "income
-00016e50: 3122 2069 6e20 6669 6c65 6461 7461 3a0d  1" in filedata:.
-00016e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016e70: 2069 6620 7374 7228 6669 6c65 6461 7461   if str(filedata
-00016e80: 5b22 696e 636f 6d65 3122 5d29 2021 3d20  ["income1"]) != 
-00016e90: 274e 6f6e 6527 3a0d 0a20 2020 2020 2020  'None':..       
-00016ea0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00016eb0: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
-00016ec0: 2e69 6e63 6f6d 655f 7374 6174 656d 656e  .income_statemen
-00016ed0: 742e 6e65 775f 656e 7472 7928 2573 2c27  t.new_entry(%s,'
-00016ee0: 2573 272c 2573 2922 2025 2028 6167 656e  %s',%s)" % (agen
-00016ef0: 7431 2c6d 795f 696e 636f 6d65 5f64 6963  t1,my_income_dic
-00016f00: 745b 6669 6c65 6461 7461 5b22 696e 636f  t[filedata["inco
-00016f10: 6d65 3122 5d5d 2c73 7562 6a65 6374 2c71  me1"]],subject,q
-00016f20: 7561 6e74 6974 7929 290d 0a0d 0a20 2020  uantity))....   
-00016f30: 2020 2020 2020 2020 2069 6620 2269 6e63           if "inc
-00016f40: 6f6d 6532 2220 696e 2066 696c 6564 6174  ome2" in filedat
-00016f50: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-00016f60: 2020 2020 6966 2073 7472 2866 696c 6564      if str(filed
-00016f70: 6174 615b 2269 6e63 6f6d 6532 225d 2920  ata["income2"]) 
-00016f80: 213d 2027 4e6f 6e65 273a 0d0a 2020 2020  != 'None':..    
-00016f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016fa0: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
-00016fb0: 2225 732e 696e 636f 6d65 5f73 7461 7465  "%s.income_state
-00016fc0: 6d65 6e74 2e6e 6577 5f65 6e74 7279 2825  ment.new_entry(%
-00016fd0: 732c 2725 7327 2c25 7329 2220 2520 2861  s,'%s',%s)" % (a
-00016fe0: 6765 6e74 322c 206d 795f 696e 636f 6d65  gent2, my_income
-00016ff0: 5f64 6963 745b 6669 6c65 6461 7461 5b22  _dict[filedata["
-00017000: 696e 636f 6d65 3222 5d5d 2c20 7375 626a  income2"]], subj
-00017010: 6563 742c 2071 7561 6e74 6974 7929 290d  ect, quantity)).
-00017020: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00017030: 2063 6173 6820 666c 6f77 2073 7461 7465   cash flow state
-00017040: 6d65 6e74 0d0a 2020 2020 2020 2020 2020  ment..          
-00017050: 2020 6966 2022 6361 7368 666c 6f77 3122    if "cashflow1"
-00017060: 2069 6e20 6669 6c65 6461 7461 3a0d 0a20   in filedata:.. 
-00017070: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00017080: 6620 7374 7228 6669 6c65 6461 7461 5b22  f str(filedata["
-00017090: 6361 7368 666c 6f77 3122 5d29 2021 3d20  cashflow1"]) != 
-000170a0: 274e 6f6e 6527 3a0d 0a20 2020 2020 2020  'None':..       
-000170b0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-000170c0: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
-000170d0: 2e63 6173 685f 666c 6f77 5f73 7461 7465  .cash_flow_state
-000170e0: 6d65 6e74 2e6e 6577 5f65 6e74 7279 2825  ment.new_entry(%
-000170f0: 732c 2725 7327 2c2d 2573 2922 2025 2028  s,'%s',-%s)" % (
-00017100: 6167 656e 7431 2c22 4361 7368 466c 6f77  agent1,"CashFlow
-00017110: 456e 7472 792e 2220 2b20 6669 6c65 6461  Entry." + fileda
-00017120: 7461 5b22 6361 7368 666c 6f77 3122 5d2e  ta["cashflow1"].
-00017130: 7570 7065 7228 292c 7375 626a 6563 742c  upper(),subject,
-00017140: 7175 616e 7469 7479 2929 0d0a 0d0a 2020  quantity))....  
-00017150: 2020 2020 2020 2020 2020 6966 2022 6361            if "ca
-00017160: 7368 666c 6f77 3222 2069 6e20 6669 6c65  shflow2" in file
-00017170: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
-00017180: 2020 2020 2020 2069 6620 7374 7228 6669         if str(fi
-00017190: 6c65 6461 7461 5b22 6361 7368 666c 6f77  ledata["cashflow
-000171a0: 3222 5d29 2021 3d20 274e 6f6e 6527 3a0d  2"]) != 'None':.
-000171b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000171c0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
-000171d0: 7065 6e64 2822 2573 2e63 6173 685f 666c  pend("%s.cash_fl
-000171e0: 6f77 5f73 7461 7465 6d65 6e74 2e6e 6577  ow_statement.new
-000171f0: 5f65 6e74 7279 2825 732c 2725 7327 2c25  _entry(%s,'%s',%
-00017200: 7329 2220 2520 2861 6765 6e74 322c 2243  s)" % (agent2,"C
-00017210: 6173 6846 6c6f 7745 6e74 7279 2e22 202b  ashFlowEntry." +
-00017220: 2066 696c 6564 6174 615b 2263 6173 6866   filedata["cashf
-00017230: 6c6f 7732 225d 2e75 7070 6572 2829 2c73  low2"].upper(),s
-00017240: 7562 6a65 6374 2c71 7561 6e74 6974 7929  ubject,quantity)
-00017250: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00017260: 2069 6620 5472 7565 3a20 2320 6167 656e   if True: # agen
-00017270: 7431 2021 3d20 6167 656e 7432 3a0d 0a20  t1 != agent2:.. 
-00017280: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00017290: 6574 686f 6420 3d20 2264 6566 2025 7328  ethod = "def %s(
-000172a0: 2573 2c20 2573 2c20 2573 293a 5c6e 2220  %s, %s, %s):\n" 
-000172b0: 2520 2873 7562 6a65 6374 2c61 6765 6e74  % (subject,agent
-000172c0: 312c 6167 656e 7432 2c71 7561 6e74 6974  1,agent2,quantit
-000172d0: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
-000172e0: 2365 6c73 653a 0d0a 2020 2020 2020 2020  #else:..        
-000172f0: 2020 2020 2320 2020 206d 6574 686f 6420      #    method 
-00017300: 3d20 2264 6566 2025 7328 2573 2c20 2573  = "def %s(%s, %s
-00017310: 293a 5c6e 2220 2520 2873 7562 6a65 6374  ):\n" % (subject
-00017320: 2c20 6167 656e 7431 2c20 7175 616e 7469  , agent1, quanti
-00017330: 7479 290d 0a0d 0a20 2020 2020 2020 2020  ty)....         
-00017340: 2020 2069 6620 2264 6573 6372 6970 7469     if "descripti
-00017350: 6f6e 2220 696e 2066 696c 6564 6174 613a  on" in filedata:
-00017360: 2023 2061 6464 2074 6865 2064 6573 6372   # add the descr
-00017370: 6970 7469 6f6e 2069 6e20 7468 6520 646f  iption in the do
-00017380: 6373 7472 696e 6720 6f66 2074 6865 2066  cstring of the f
-00017390: 756e 6374 696f 6e20 6465 6669 6e69 7469  unction definiti
-000173a0: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
-000173b0: 2020 2020 6d65 7468 6f64 202b 3d20 2220      method += " 
-000173c0: 2020 2023 2220 2b20 6669 6c65 6461 7461     #" + filedata
-000173d0: 5b22 6465 7363 7269 7074 696f 6e22 5d20  ["description"] 
-000173e0: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
-000173f0: 2020 2020 2020 666f 7220 636f 6d6d 616e        for comman
-00017400: 6420 696e 2063 6f6d 6d61 6e64 733a 0d0a  d in commands:..
-00017410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017420: 6d65 7468 6f64 202b 3d20 2220 2020 2022  method += "    "
-00017430: 202b 2063 6f6d 6d61 6e64 202b 2022 5c6e   + command + "\n
-00017440: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-00017450: 206d 6574 686f 6420 2b3d 2022 5c6e 5c6e   method += "\n\n
-00017460: 220d 0a20 2020 2020 2020 2020 2020 2063  "..            c
-00017470: 6f64 6520 2b3d 206d 6574 686f 640d 0a0d  ode += method...
-00017480: 0a20 2020 2020 2020 2066 6f6c 6465 7220  .        folder 
-00017490: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-000174a0: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-000174b0: 696c 6529 2023 2073 7461 7475 7342 6172  ile) # statusBar
-000174c0: 2829 2e63 7572 7265 6e74 4d65 7373 6167  ().currentMessag
-000174d0: 6528 2929 0d0a 2020 2020 2020 2020 666e  e())..        fn
-000174e0: 616d 6520 3d20 2066 6f6c 6465 7220 2b20  ame =  folder + 
-000174f0: 222f 7079 7468 6f6e 5f63 6f64 652f 7472  "/python_code/tr
-00017500: 616e 7361 6374 696f 6e73 2e70 7922 0d0a  ansactions.py"..
-00017510: 0d0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
-00017520: 7065 6e28 666e 616d 652c 2277 222c 656e  pen(fname,"w",en
-00017530: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
-00017540: 6173 2066 696c 653a 0d0a 2020 2020 2020  as file:..      
-00017550: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-00017560: 2863 6f64 6529 0d0a 0d0a 2020 2020 2020  (code)....      
-00017570: 2020 6966 2073 686f 775f 6e6f 7469 6669    if show_notifi
-00017580: 6361 7469 6f6e 3a0d 0a20 2020 2020 2020  cation:..       
-00017590: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-000175a0: 286d 6573 7361 6765 3d22 436f 6465 2065  (message="Code e
-000175b0: 7870 6f72 7465 6420 746f 2025 7322 2025  xported to %s" %
-000175c0: 2028 666e 616d 6529 2c74 6974 6c65 3d22   (fname),title="
-000175d0: 5375 6363 6573 7322 290d 0a0d 0a0d 0a20  Success")...... 
-000175e0: 2020 2064 6566 2067 656e 5f69 6373 5f73     def gen_ics_s
-000175f0: 696e 676c 6528 7365 6c66 293a 0d0a 2020  ingle(self):..  
-00017600: 2020 2020 2020 6966 2073 656c 662e 6472        if self.dr
-00017610: 6177 6361 6e76 6173 2e68 6967 686c 6967  awcanvas.highlig
-00017620: 6874 6564 2069 7320 4e6f 6e65 3a0d 0a20  hted is None:.. 
-00017630: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00017640: 6e6f 7469 6679 2874 6974 6c65 3d22 4e6f  notify(title="No
-00017650: 2061 6765 6e74 2073 656c 6563 7465 6422   agent selected"
-00017660: 2c20 6d65 7373 6167 653d 224e 6f20 6167  , message="No ag
-00017670: 656e 7420 7365 6c65 6374 6564 2e20 506c  ent selected. Pl
-00017680: 6561 7365 2073 656c 6563 7420 6f6e 6520  ease select one 
-00017690: 6669 7273 742e 2229 0d0a 2020 2020 2020  first.")..      
-000176a0: 2020 2020 2020 7265 7475 726e 0d0a 2020        return..  
-000176b0: 2020 2020 2020 6966 2073 656c 662e 6472        if self.dr
-000176c0: 6177 6361 6e76 6173 2e68 6967 686c 6967  awcanvas.highlig
-000176d0: 6874 6564 2e69 7368 656c 7065 723a 0d0a  hted.ishelper:..
-000176e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000176f0: 2e6e 6f74 6966 7928 7469 746c 653d 224e  .notify(title="N
-00017700: 6f20 6167 656e 7420 7365 6c65 6374 6564  o agent selected
-00017710: 222c 206d 6573 7361 6765 3d22 4e6f 2076  ", message="No v
-00017720: 616c 6964 2062 6f78 2073 656c 6563 7465  alid box selecte
-00017730: 642e 2050 6c65 6173 6520 7365 6c65 6374  d. Please select
-00017740: 2061 6e20 6167 656e 742e 2229 0d0a 2020   an agent.")..  
-00017750: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00017760: 0d0a 2020 2020 2020 2020 6d79 5f61 6765  ..        my_age
-00017770: 6e74 203d 2073 656c 662e 6472 6177 6361  nt = self.drawca
-00017780: 6e76 6173 2e68 6967 686c 6967 6874 6564  nvas.highlighted
-00017790: 2e6e 616d 650d 0a0d 0a20 2020 2020 2020  .name....       
-000177a0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
-000177b0: 203d 2020 7b22 5375 626a 6563 7422 3a5b   =  {"Subject":[
-000177c0: 5d2c 2253 686f 7274 204e 616d 6522 3a20  ],"Short Name": 
-000177d0: 5b5d 2c22 5175 616e 7469 7479 223a 5b5d  [],"Quantity":[]
-000177e0: 2c20 2254 7970 6522 3a5b 5d2c 2022 5261  , "Type":[], "Ra
-000177f0: 6e6b 696e 6722 3a5b 5d7d 2023 2072 616e  nking":[]} # ran
-00017800: 6b69 6e67 2077 696c 6c20 6265 2072 656d  king will be rem
-00017810: 6f76 6564 206c 6174 6572 0d0a 2020 2020  oved later..    
-00017820: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00017830: 2022 4761 696e 7322 3a20 5b5d 2c20 224c   "Gains": [], "L
-00017840: 6f73 7365 7322 3a20 5b5d 2c20 2252 6576  osses": [], "Rev
-00017850: 656e 7565 7322 3a20 5b5d 2c20 2254 6178  enues": [], "Tax
-00017860: 6573 223a 205b 5d2c 2022 4578 7065 6e73  es": [], "Expens
-00017870: 6573 223a 205b 5d2c 0d0a 2020 2020 2020  es": [],..      
-00017880: 2020 2022 4e6f 6e74 6178 6162 6c65 204c     "Nontaxable L
-00017890: 6f73 7365 7322 3a20 5b5d 2c20 224e 6f6e  osses": [], "Non
-000178a0: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
-000178b0: 3a20 5b5d 2c0d 0a20 2020 2020 2020 2020  : [],..         
-000178c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000178d0: 2020 2020 2020 224e 6f6e 2d4f 7065 7261        "Non-Opera
-000178e0: 7469 6f6e 616c 2049 6e63 6f6d 6522 3a20  tional Income": 
-000178f0: 5b5d 2c0d 0a20 2020 2020 2020 2020 2020  [],..           
-00017900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017920: 2020 2020 2249 6e74 6572 6573 7420 5061      "Interest Pa
-00017930: 796d 656e 7473 223a 205b 5d0d 0a20 2020  yments": []..   
-00017940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017960: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
-00017970: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00017980: 2020 2020 6b20 3d20 300d 0a20 2020 2020      k = 0..     
-00017990: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-000179a0: 2020 2020 2066 6f72 2066 696c 6564 6174       for filedat
-000179b0: 6120 696e 2073 656c 662e 656e 7472 795f  a in self.entry_
-000179c0: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
-000179d0: 2020 2020 2020 2061 6765 6e74 3120 3d20         agent1 = 
-000179e0: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
-000179f0: 225d 2e73 7472 6970 2829 0d0a 2020 2020  "].strip()..    
-00017a00: 2020 2020 2020 2020 2020 2020 6167 656e              agen
-00017a10: 7432 203d 2066 696c 6564 6174 615b 2261  t2 = filedata["a
-00017a20: 6765 6e74 3222 5d2e 7374 7269 7028 290d  gent2"].strip().
-00017a30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00017a40: 2020 2070 7269 6e74 2822 6167 656e 7431     print("agent1
-00017a50: 222c 6167 656e 7431 2c22 6167 656e 7432  ",agent1,"agent2
-00017a60: 222c 6167 656e 7432 290d 0a20 2020 2020  ",agent2)..     
-00017a70: 2020 2020 2020 2020 2020 2069 6620 6167             if ag
-00017a80: 656e 7431 203d 3d20 6d79 5f61 6765 6e74  ent1 == my_agent
-00017a90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00017aa0: 2020 2020 2020 2072 6566 5f61 6765 6e74         ref_agent
-00017ab0: 203d 2022 6167 656e 7431 220d 0a20 2020   = "agent1"..   
-00017ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ad0: 2072 6566 5f69 6e63 6f6d 6520 3d20 2269   ref_income = "i
-00017ae0: 6e63 6f6d 6531 220d 0a0d 0a20 2020 2020  ncome1"....     
-00017af0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00017b00: 6167 656e 7432 203d 3d20 6d79 5f61 6765  agent2 == my_age
-00017b10: 6e74 3a0d 0a20 2020 2020 2020 2020 2020  nt:..           
-00017b20: 2020 2020 2020 2020 2072 6566 5f61 6765           ref_age
-00017b30: 6e74 203d 2022 6167 656e 7432 220d 0a20  nt = "agent2".. 
-00017b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b50: 2020 2072 6566 5f69 6e63 6f6d 6520 3d20     ref_income = 
-00017b60: 2269 6e63 6f6d 6532 220d 0a20 2020 2020  "income2"..     
-00017b70: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00017b80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00017b90: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
-00017ba0: 2020 2020 2020 2020 2020 2020 2020 2361                #a
-00017bb0: 7373 6574 7331 203d 2066 696c 6564 6174  ssets1 = filedat
-00017bc0: 615b 2261 3122 5d20 2b20 225c 6e22 0d0a  a["a1"] + "\n"..
-00017bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017be0: 236c 6961 6273 3120 3d20 6669 6c65 6461  #liabs1 = fileda
-00017bf0: 7461 5b22 6c31 225d 202b 2022 5c6e 2220  ta["l1"] + "\n" 
-00017c00: 2b20 6669 6c65 6461 7461 5b22 6531 225d  + filedata["e1"]
-00017c10: 202b 2022 5c6e 220d 0a0d 0a20 2020 2020   + "\n"....     
-00017c20: 2020 2020 2020 2020 2020 2023 6173 7365             #asse
-00017c30: 7473 3220 3d20 6669 6c65 6461 7461 5b22  ts2 = filedata["
-00017c40: 6132 225d 202b 2022 5c6e 220d 0a20 2020  a2"] + "\n"..   
-00017c50: 2020 2020 2020 2020 2020 2020 2023 6c69               #li
-00017c60: 6162 7332 203d 2066 696c 6564 6174 615b  abs2 = filedata[
-00017c70: 226c 3222 5d20 2b20 225c 6e22 202b 2066  "l2"] + "\n" + f
-00017c80: 696c 6564 6174 615b 2265 3222 5d20 2b20  iledata["e2"] + 
-00017c90: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-00017ca0: 2020 2020 2020 2020 6966 2028 6167 656e          if (agen
-00017cb0: 7431 203d 3d20 6d79 5f61 6765 6e74 206f  t1 == my_agent o
-00017cc0: 7220 6167 656e 7432 203d 3d20 6d79 5f61  r agent2 == my_a
-00017cd0: 6765 6e74 2920 616e 6420 7374 7228 6669  gent) and str(fi
-00017ce0: 6c65 6461 7461 5b72 6566 5f69 6e63 6f6d  ledata[ref_incom
-00017cf0: 655d 2920 213d 2027 4e6f 6e65 273a 0d0a  e]) != 'None':..
-00017d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d10: 2020 2020 6d79 6469 6374 203d 207b 2247      mydict = {"G
-00017d20: 6169 6e22 3a20 2247 6169 6e73 222c 0d0a  ain": "Gains",..
-00017d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d40: 2020 2020 2020 2020 2020 2020 2020 224c                "L
-00017d50: 6f73 7322 3a20 224c 6f73 7365 7322 2c0d  oss": "Losses",.
-00017d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017d70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00017d80: 4578 7065 6e73 6522 3a20 2245 7870 656e  Expense": "Expen
-00017d90: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
-00017da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017db0: 2020 2020 2022 5265 7665 6e75 6522 3a20       "Revenue": 
-00017dc0: 2252 6576 656e 7565 7322 2c0d 0a20 2020  "Revenues",..   
-00017dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017de0: 2020 2020 2020 2020 2020 2022 5461 7822             "Tax"
-00017df0: 3a20 2254 6178 6573 222c 0d0a 2020 2020  : "Taxes",..    
-00017e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e10: 2020 2020 2020 2020 2020 224e 6f6e 7461            "Nonta
-00017e20: 782e 2050 726f 6669 7422 3a20 224e 6f6e  x. Profit": "Non
-00017e30: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
-00017e40: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00017e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e60: 2022 4e6f 6e74 6178 2e20 4c6f 7373 223a   "Nontax. Loss":
-00017e70: 2022 4e6f 6e74 6178 6162 6c65 204c 6f73   "Nontaxable Los
-00017e80: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
-00017e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ea0: 2020 2020 2022 4e6f 6e2d 4f70 2e20 496e       "Non-Op. In
-00017eb0: 636f 6d65 223a 2022 4e6f 6e2d 4f70 6572  come": "Non-Oper
-00017ec0: 6174 696f 6e61 6c20 496e 636f 6d65 222c  ational Income",
-00017ed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00017ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ef0: 2249 6e74 6572 6573 7422 3a20 2249 6e74  "Interest": "Int
-00017f00: 6572 6573 7420 5061 796d 656e 7473 227d  erest Payments"}
-00017f10: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00017f20: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00017f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f40: 2020 2020 2020 6966 2061 6765 6e74 3120        if agent1 
-00017f50: 3d3d 206d 795f 6167 656e 743a 0d0a 2020  == my_agent:..  
+00014ce0: 2066 726f 6d20 7064 666c 6174 6578 2069   from pdflatex i
+00014cf0: 6d70 6f72 7420 5044 464c 6154 6558 0d0a  mport PDFLaTeX..
+00014d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014d10: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
+00014d20: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
+00014d30: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
+00014d40: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00014d50: 2020 206d 795f 6669 6c65 203d 206f 732e     my_file = os.
+00014d60: 7061 7468 2e6a 6f69 6e28 7061 7468 2c22  path.join(path,"
+00014d70: 6d79 6d61 7472 6978 2229 0d0a 0d0a 2020  mymatrix")....  
+00014d80: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00014d90: 6c65 203d 206f 7065 6e28 6d79 5f66 696c  le = open(my_fil
+00014da0: 652c 2022 7722 290d 0a20 2020 2020 2020  e, "w")..       
+00014db0: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
+00014dc0: 6974 6528 2222 220d 0a20 2020 2020 2020  ite("""..       
+00014dd0: 205c 5c64 6f63 756d 656e 7463 6c61 7373   \\documentclass
+00014de0: 5b61 3370 6170 6572 2c6c 616e 6473 6361  [a3paper,landsca
+00014df0: 7065 5d7b 6172 7469 636c 657d 0d0a 2020  pe]{article}..  
+00014e00: 2020 2020 2020 5c5c 7573 6570 6163 6b61        \\usepacka
+00014e10: 6765 7b62 6f6f 6b74 6162 737d 0d0a 2020  ge{booktabs}..  
+00014e20: 2020 2020 2020 5c5c 7573 6570 6163 6b61        \\usepacka
+00014e30: 6765 7b61 646a 7573 7462 6f78 7d0d 0a20  ge{adjustbox}.. 
+00014e40: 2020 2020 2020 205c 5c75 7365 7061 636b         \\usepack
+00014e50: 6167 655b 7461 626c 655d 7b78 636f 6c6f  age[table]{xcolo
+00014e60: 727d 0d0a 2020 2020 2020 2020 5c5c 7573  r}..        \\us
+00014e70: 6570 6163 6b61 6765 7b6c 6f6e 6774 6162  epackage{longtab
+00014e80: 6c65 7d0d 0a20 2020 2020 2020 205c 5c75  le}..        \\u
+00014e90: 7365 7061 636b 6167 657b 7461 6275 6c61  sepackage{tabula
+00014ea0: 7278 2c72 6167 6765 6432 657d 0d0a 2020  rx,ragged2e}..  
+00014eb0: 2020 2020 2020 5c5c 6465 6669 6e65 636f        \\defineco
+00014ec0: 6c6f 727b 4772 6179 7d7b 6772 6179 7d7b  lor{Gray}{gray}{
+00014ed0: 302e 3930 7d0d 0a20 2020 2020 2020 205c  0.90}..        \
+00014ee0: 5c64 6566 696e 6563 6f6c 6f72 7b4c 6967  \definecolor{Lig
+00014ef0: 6874 4772 6179 7d7b 6772 6179 7d7b 302e  htGray}{gray}{0.
+00014f00: 3935 7d0d 0a20 2020 2020 2020 205c 5c64  95}..        \\d
+00014f10: 6566 696e 6563 6f6c 6f72 7b57 6869 7465  efinecolor{White
+00014f20: 7d7b 7267 627d 7b31 2c31 2c31 7d0d 0a0d  }{rgb}{1,1,1}...
+00014f30: 0a20 2020 2020 2020 205c 5c6e 6577 636f  .        \\newco
+00014f40: 6c75 6d6e 7479 7065 7b67 7d7b 3e7b 5c5c  lumntype{g}{>{\\
+00014f50: 636f 6c75 6d6e 636f 6c6f 727b 5768 6974  columncolor{Whit
+00014f60: 657d 5c5c 6172 7261 7962 6163 6b73 6c61  e}\\arraybacksla
+00014f70: 7368 7d4c 7d20 250d 0a20 2020 2020 2020  sh}L} %..       
+00014f80: 205c 5c6e 6577 636f 6c75 6d6e 7479 7065   \\newcolumntype
+00014f90: 7b6c 7d7b 3e7b 5c5c 636f 6c75 6d6e 636f  {l}{>{\\columnco
+00014fa0: 6c6f 727b 5768 6974 657d 5c5c 6172 7261  lor{White}\\arra
+00014fb0: 7962 6163 6b73 6c61 7368 7d70 7b33 636d  ybackslash}p{3cm
+00014fc0: 7d7d 2025 6365 6e74 6572 6564 2022 5822  }} %centered "X"
+00014fd0: 2063 6f6c 756d 6e0d 0a20 2020 2020 2020   column..       
+00014fe0: 205c 5c6e 6577 636f 6c75 6d6e 7479 7065   \\newcolumntype
+00014ff0: 7b4c 7d5b 315d 7b3e 7b5c 5c72 6167 6765  {L}[1]{>{\\ragge
+00015000: 6472 6967 6874 5c5c 6172 7261 7962 6163  dright\\arraybac
+00015010: 6b73 6c61 7368 7d70 7b5c 5c64 696d 6578  kslash}p{\\dimex
+00015020: 7072 2331 2d32 5c5c 7461 6263 6f6c 7365  pr#1-2\\tabcolse
+00015030: 702d 325c 5c61 7272 6179 7275 6c65 7769  p-2\\arrayrulewi
+00015040: 6474 682b 2e32 3170 747d 7d0d 0a0d 0a20  dth+.21pt}}.... 
+00015050: 2020 2020 2020 205c 5c75 7365 7061 636b         \\usepack
+00015060: 6167 655b 6c65 6674 3d31 636d 2c72 6967  age[left=1cm,rig
+00015070: 6874 3d31 2e35 636d 5d7b 6765 6f6d 6574  ht=1.5cm]{geomet
+00015080: 7279 7d0d 0a0d 0a20 2020 2020 2020 205c  ry}....        \
+00015090: 5c62 6567 696e 7b64 6f63 756d 656e 747d  \begin{document}
+000150a0: 2222 2229 0d0a 2020 2020 2020 2020 2020  """)..          
+000150b0: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
+000150c0: 2864 665f 6c61 7465 7829 0d0a 2020 2020  (df_latex)..    
+000150d0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+000150e0: 2e77 7269 7465 2822 2222 0d0a 2020 2020  .write("""..    
+000150f0: 2020 2020 5c5c 656e 647b 646f 6375 6d65      \\end{docume
+00015100: 6e74 7d22 2222 290d 0a20 2020 2020 2020  nt}""")..       
+00015110: 2020 2020 2020 2020 2066 696c 652e 636c           file.cl
+00015120: 6f73 6528 290d 0a20 2020 2020 2020 2020  ose()..         
+00015130: 2020 2020 2020 2023 2070 6466 6c20 3d20         # pdfl = 
+00015140: 5044 464c 6154 6558 2e66 726f 6d5f 7465  PDFLaTeX.from_te
+00015150: 7866 696c 6528 276d 795f 7465 7866 696c  xfile('my_texfil
+00015160: 652e 7465 7827 290d 0a20 2020 2020 2020  e.tex')..       
+00015170: 2020 2020 2020 2020 2023 2070 6466 2c20           # pdf, 
+00015180: 6c6f 672c 2063 6f6d 706c 6574 6564 5f70  log, completed_p
+00015190: 726f 6365 7373 203d 2070 6466 6c2e 6372  rocess = pdfl.cr
+000151a0: 6561 7465 5f70 6466 286b 6565 705f 7064  eate_pdf(keep_pd
+000151b0: 665f 6669 6c65 3d54 7275 652c 206b 6565  f_file=True, kee
+000151c0: 705f 6c6f 675f 6669 6c65 3d54 7275 6529  p_log_file=True)
+000151d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000151e0: 2020 2320 6f73 2e70 6f70 656e 2822 7064    # os.popen("pd
+000151f0: 666c 6174 6578 2025 7322 2025 2028 6f73  flatex %s" % (os
+00015200: 2e67 6574 6377 6428 292b 222f 6d79 5f74  .getcwd()+"/my_t
+00015210: 6578 6669 6c65 2e74 6578 2229 290d 0a20  exfile.tex")).. 
+00015220: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00015230: 6d70 6f72 7420 7375 6270 726f 6365 7373  mport subprocess
+00015240: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015250: 2020 7061 7468 203d 206f 732e 7061 7468    path = os.path
+00015260: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
+00015270: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
+00015280: 5f29 290d 0a20 2020 2020 2020 2020 2020  _))..           
+00015290: 2020 2020 2073 7562 7072 6f63 6573 732e       subprocess.
+000152a0: 7275 6e28 2270 6466 6c61 7465 7820 2573  run("pdflatex %s
+000152b0: 2220 2520 286f 732e 7061 7468 2e6a 6f69  " % (os.path.joi
+000152c0: 6e28 7061 7468 2c22 6d79 6d61 7472 6978  n(path,"mymatrix
+000152d0: 2e74 6578 2229 2929 2e63 6865 636b 5f72  .tex"))).check_r
+000152e0: 6574 7572 6e63 6f64 6528 290d 0a0d 0a20  eturncode().... 
+000152f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00015300: 6f73 2e73 7461 7274 6669 6c65 286f 732e  os.startfile(os.
+00015310: 6765 7463 7764 2829 202b 2022 5c5c 6d79  getcwd() + "\\my
+00015320: 6d61 7472 6978 2e70 6466 2229 0d0a 2020  matrix.pdf")..  
+00015330: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00015340: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00015350: 2020 2020 2020 2020 2320 7368 7574 696c          # shutil
+00015360: 2e72 6d74 7265 6528 6f73 2e67 6574 6377  .rmtree(os.getcw
+00015370: 6428 292b 225c 5c66 696c 6573 2229 0d0a  d()+"\\files")..
+00015380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015390: 2020 2020 2320 6f73 2e6d 6b64 6972 286f      # os.mkdir(o
+000153a0: 732e 6765 7463 7764 2829 2b22 5c5c 6669  s.getcwd()+"\\fi
+000153b0: 6c65 7322 290d 0a0d 0a20 2020 2020 2020  les")....       
+000153c0: 2020 2020 2020 2020 2020 2020 2070 6174               pat
+000153d0: 6820 3d20 6f73 2e70 6174 682e 6469 726e  h = os.path.dirn
+000153e0: 616d 6528 6f73 2e70 6174 682e 6162 7370  ame(os.path.absp
+000153f0: 6174 6828 5f5f 6669 6c65 5f5f 2929 0d0a  ath(__file__))..
+00015400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015410: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
+00015420: 7061 7468 2b22 5c5c 6d79 6d61 7472 6978  path+"\\mymatrix
+00015430: 2e74 6578 2220 2c20 7061 7468 2b20 225c  .tex" , path+ "\
+00015440: 5c66 696c 6573 5c5c 6d79 6d61 7472 6978  \files\\mymatrix
+00015450: 2e74 6578 2229 0d0a 2020 2020 2020 2020  .tex")..        
+00015460: 2020 2020 2020 2020 2020 2020 7368 7574              shut
+00015470: 696c 2e6d 6f76 6528 7061 7468 202b 2022  il.move(path + "
+00015480: 5c5c 6d79 6d61 7472 6978 2e6c 6f67 222c  \\mymatrix.log",
+00015490: 2070 6174 6820 2b20 225c 5c66 696c 6573   path + "\\files
+000154a0: 5c5c 6d79 6d61 7472 6978 2e6c 6f67 2229  \\mymatrix.log")
+000154b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000154c0: 2020 2020 2020 7368 7574 696c 2e6d 6f76        shutil.mov
+000154d0: 6528 7061 7468 202b 2022 5c5c 6d79 6d61  e(path + "\\myma
+000154e0: 7472 6978 2e61 7578 222c 2070 6174 6820  trix.aux", path 
+000154f0: 2b20 225c 5c66 696c 6573 5c5c 5c6d 796d  + "\\files\\\mym
+00015500: 6174 7269 782e 6175 7822 290d 0a20 2020  atrix.aux")..   
+00015510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015520: 2073 6875 7469 6c2e 6d6f 7665 2870 6174   shutil.move(pat
+00015530: 6820 2b20 225c 5c6d 796d 6174 7269 782e  h + "\\mymatrix.
+00015540: 7064 6622 2c20 7061 7468 202b 2022 5c5c  pdf", path + "\\
+00015550: 6669 6c65 735c 5c6d 796d 6174 7269 782e  files\\mymatrix.
+00015560: 7064 6622 290d 0a20 2020 2020 2020 2020  pdf")..         
+00015570: 2020 2020 2020 2020 2020 2023 7368 7574             #shut
+00015580: 696c 2e63 6f70 7928 6f73 2e67 6574 6377  il.copy(os.getcw
+00015590: 6428 2920 2b20 225c 5c66 696c 6573 5c5c  d() + "\\files\\
+000155a0: 6d79 6d61 7472 6978 2e68 746d 6c22 2c6f  mymatrix.html",o
+000155b0: 732e 6765 7463 7764 2829 202b 2022 5c5c  s.getcwd() + "\\
+000155c0: 6669 6c65 735c 5c6d 796d 6174 7269 782e  files\\mymatrix.
+000155d0: 6874 6d6c 2229 0d0a 2020 2020 2020 2020  html")..        
+000155e0: 2020 2020 2020 2020 2020 2020 2373 6875              #shu
+000155f0: 7469 6c2e 636f 7079 286f 732e 6765 7463  til.copy(os.getc
+00015600: 7764 2829 202b 2022 5c5c 6669 6c65 735c  wd() + "\\files\
+00015610: 5c6d 7973 7479 6c65 2e63 7373 222c 206f  \mystyle.css", o
+00015620: 732e 6765 7463 7764 2829 202b 2022 5c5c  s.getcwd() + "\\
+00015630: 6669 6c65 735c 5c6d 7973 7479 6c65 2e63  files\\mystyle.c
+00015640: 7373 2229 0d0a 2020 2020 2020 2020 2020  ss")..          
+00015650: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00015660: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+00015670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015680: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
+00015690: 7373 6167 653d 7374 7228 6529 2c74 6974  ssage=str(e),tit
+000156a0: 6c65 3d22 416e 2045 7272 6f72 206f 6363  le="An Error occ
+000156b0: 7572 7265 642e 2e2e 2849 4420 3133 3038  urred...(ID 1308
+000156c0: 2922 290d 0a0d 0a20 2020 2020 2020 2020  )")....         
+000156d0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+000156e0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+000156f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00015700: 6e6f 7469 6679 286d 6573 7361 6765 3d73  notify(message=s
+00015710: 7472 2865 292c 7469 746c 653d 2241 6e20  tr(e),title="An 
+00015720: 4572 726f 7220 6f63 6375 7272 6564 2e2e  Error occurred..
+00015730: 2e28 4944 2031 3331 3129 2229 0d0a 2020  .(ID 1311)")..  
+00015740: 2020 2020 2020 2020 2020 2320 2d2d 2d2d            # ----
+00015750: 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d 0a20 2020  ---------....   
+00015760: 2020 2020 2020 2020 2070 642e 6f70 7469           pd.opti
+00015770: 6f6e 732e 6469 7370 6c61 792e 6d61 785f  ons.display.max_
+00015780: 636f 6c77 6964 7468 203d 2032 0d0a 0d0a  colwidth = 2....
+00015790: 2020 2020 2020 2020 2020 2020 6466 5f64              df_d
+000157a0: 6973 706c 6179 203d 2064 665f 6261 636b  isplay = df_back
+000157b0: 7570 2e61 7070 6c79 6d61 7028 6162 6272  up.applymap(abbr
+000157c0: 6576 6961 7465 5f7a 6572 6f73 292e 746f  eviate_zeros).to
+000157d0: 5f73 7472 696e 6728 6c69 6e65 5f77 6964  _string(line_wid
+000157e0: 7468 3d4e 6f6e 6529 2e72 6570 6c61 6365  th=None).replace
+000157f0: 2822 5c5f 222c 2022 5f22 290d 0a0d 0a20  ("\_", "_").... 
+00015800: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
+00015810: 662e 7061 7265 6e74 2e70 6172 656e 7441  f.parent.parentA
+00015820: 7070 2e67 6574 466f 726d 2822 4147 4752  pp.getForm("AGGR
+00015830: 5f46 4c4f 5722 292e 6461 7461 5f62 6f78  _FLOW").data_box
+00015840: 2e76 616c 7565 7320 3d20 6466 5f64 6973  .values = df_dis
+00015850: 706c 6179 2e73 706c 6974 2822 5c6e 2229  play.split("\n")
+00015860: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00015870: 7365 6c66 2e70 6172 656e 742e 7061 7265  self.parent.pare
+00015880: 6e74 4170 702e 7377 6974 6368 466f 726d  ntApp.switchForm
+00015890: 2822 4147 4752 5f46 4c4f 5722 290d 0a0d  ("AGGR_FLOW")...
+000158a0: 0a0d 0a20 2020 2064 6566 2067 656e 5f63  ...    def gen_c
+000158b0: 6f64 6528 7365 6c66 2c73 686f 775f 6e6f  ode(self,show_no
+000158c0: 7469 6669 6361 7469 6f6e 3d46 616c 7365  tification=False
+000158d0: 293a 0d0a 0d0a 2020 2020 2020 2020 636f  ):....        co
+000158e0: 6465 203d 2022 220d 0a20 2020 2020 2020  de = ""..       
+000158f0: 2063 6f64 6520 2b3d 2022 6672 6f6d 2073   code += "from s
+00015900: 6663 746f 6f6c 7320 696d 706f 7274 2046  fctools import F
+00015910: 6c6f 774d 6174 7269 7820 5c6e 696d 706f  lowMatrix \nimpo
+00015920: 7274 206e 756d 7079 2061 7320 6e70 5c6e  rt numpy as np\n
+00015930: 220d 0a20 2020 2020 2020 2063 6f64 6520  "..        code 
+00015940: 2b3d 2022 6672 6f6d 2073 6663 746f 6f6c  += "from sfctool
+00015950: 7320 696d 706f 7274 2042 616c 616e 6365  s import Balance
+00015960: 456e 7472 792c 4163 636f 756e 7473 5c6e  Entry,Accounts\n
+00015970: 220d 0a20 2020 2020 2020 2063 6f64 6520  "..        code 
+00015980: 2b3d 2022 6672 6f6d 2073 6663 746f 6f6c  += "from sfctool
+00015990: 7320 696d 706f 7274 2043 6173 6846 6c6f  s import CashFlo
+000159a0: 7745 6e74 7279 5c6e 220d 0a20 2020 2020  wEntry\n"..     
+000159b0: 2020 2063 6f64 6520 2b3d 2022 6672 6f6d     code += "from
+000159c0: 2073 6663 746f 6f6c 7320 696d 706f 7274   sfctools import
+000159d0: 2049 4353 456e 7472 795c 6e22 0d0a 2020   ICSEntry\n"..  
+000159e0: 2020 2020 2020 636f 6465 202b 3d20 2243        code += "C
+000159f0: 4120 3d20 4163 636f 756e 7473 2e43 415c  A = Accounts.CA\
+00015a00: 6e4b 4120 3d20 4163 636f 756e 7473 2e4b  nKA = Accounts.K
+00015a10: 415c 6e5c 6e22 0d0a 0d0a 2020 2020 2020  A\n\n"....      
+00015a20: 2020 7375 626a 6563 7473 5f63 6f75 6e74    subjects_count
+00015a30: 203d 2064 6566 6175 6c74 6469 6374 286c   = defaultdict(l
+00015a40: 616d 6264 613a 2030 2e30 290d 0a0d 0a20  ambda: 0.0).... 
+00015a50: 2020 2020 2020 2066 6f72 2066 696c 6564         for filed
+00015a60: 6174 6120 696e 2073 656c 662e 656e 7472  ata in self.entr
+00015a70: 795f 6461 7461 3a0d 0a20 2020 2020 2020  y_data:..       
+00015a80: 2020 2020 2061 6765 6e74 3120 3d20 6669       agent1 = fi
+00015a90: 6c65 6461 7461 5b22 6167 656e 7431 225d  ledata["agent1"]
+00015aa0: 0d0a 2020 2020 2020 2020 2020 2020 6167  ..            ag
+00015ab0: 656e 7432 203d 2066 696c 6564 6174 615b  ent2 = filedata[
+00015ac0: 2261 6765 6e74 3222 5d0d 0a0d 0a20 2020  "agent2"]....   
+00015ad0: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
+00015ae0: 7431 203d 3d20 6167 656e 7432 3a0d 0a20  t1 == agent2:.. 
+00015af0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00015b00: 6765 6e74 3220 3d20 226f 7468 6572 5f22  gent2 = "other_"
+00015b10: 202b 2061 6765 6e74 320d 0a0d 0a20 2020   + agent2....   
+00015b20: 2020 2020 2020 2020 2061 3120 3d20 6669           a1 = fi
+00015b30: 6c65 6461 7461 5b22 6131 225d 2020 2320  ledata["a1"]  # 
+00015b40: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
+00015b50: 2020 2020 6531 203d 2066 696c 6564 6174      e1 = filedat
+00015b60: 615b 2265 3122 5d20 2023 202b 2022 5c6e  a["e1"]  # + "\n
+00015b70: 220d 0a20 2020 2020 2020 2020 2020 206c  "..            l
+00015b80: 3120 3d20 6669 6c65 6461 7461 5b22 6c31  1 = filedata["l1
+00015b90: 225d 2020 2320 2b20 225c 6e22 0d0a 2020  "]  # + "\n"..  
+00015ba0: 2020 2020 2020 2020 2020 6132 203d 2066            a2 = f
+00015bb0: 696c 6564 6174 615b 2261 3222 5d20 2023  iledata["a2"]  #
+00015bc0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+00015bd0: 2020 2020 2065 3220 3d20 6669 6c65 6461       e2 = fileda
+00015be0: 7461 5b22 6532 225d 2020 2320 2b20 225c  ta["e2"]  # + "\
+00015bf0: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
+00015c00: 6c32 203d 2066 696c 6564 6174 615b 226c  l2 = filedata["l
+00015c10: 3222 5d20 2023 202b 2022 5c6e 220d 0a0d  2"]  # + "\n"...
+00015c20: 0a20 2020 2020 2020 2020 2020 2066 6c6f  .            flo
+00015c30: 775f 6368 6563 6b20 3d20 5472 7565 0d0a  w_check = True..
+00015c40: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00015c50: 7428 2246 4c4f 5720 4348 4543 4b22 2c20  t("FLOW CHECK", 
+00015c60: 6669 6c65 6461 7461 5b22 7368 6f72 746e  filedata["shortn
+00015c70: 616d 6522 5d2c 6669 6c65 6461 7461 5b22  ame"],filedata["
+00015c80: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
+00015c90: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+00015ca0: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
+00015cb0: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
+00015cc0: 7361 6374 696f 6e22 5d2c 7374 7229 2061  saction"],str) a
+00015cd0: 6e64 2066 696c 6564 6174 615b 226c 6f67  nd filedata["log
+00015ce0: 2074 7261 6e73 6163 7469 6f6e 225d 2e73   transaction"].s
+00015cf0: 7472 6970 2829 203d 3d20 2254 7275 6522  trip() == "True"
+00015d00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00015d10: 2020 2023 2062 6f6f 6c28 6669 6c65 6461     # bool(fileda
+00015d20: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
+00015d30: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
+00015d40: 2020 2020 2020 2020 666c 6f77 5f63 6865          flow_che
+00015d50: 636b 203d 2054 7275 650d 0a20 2020 2020  ck = True..     
+00015d60: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00015d70: 2866 6c6f 775f 6368 6563 6b29 0d0a 2020  (flow_check)..  
+00015d80: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+00015d90: 7369 6e73 7461 6e63 6528 6669 6c65 6461  sinstance(fileda
+00015da0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
+00015db0: 696f 6e22 5d2c 7374 7229 2061 6e64 2066  ion"],str) and f
+00015dc0: 696c 6564 6174 615b 226c 6f67 2074 7261  iledata["log tra
+00015dd0: 6e73 6163 7469 6f6e 225d 2e73 7472 6970  nsaction"].strip
+00015de0: 2829 203d 3d20 2246 616c 7365 223a 0d0a  () == "False":..
+00015df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e00: 2320 626f 6f6c 2866 696c 6564 6174 615b  # bool(filedata[
+00015e10: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
+00015e20: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
+00015e30: 2020 2020 2066 6c6f 775f 6368 6563 6b20       flow_check 
+00015e40: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+00015e50: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
+00015e60: 6c6f 775f 6368 6563 6b29 0d0a 2020 2020  low_check)..    
+00015e70: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00015e80: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00015e90: 6c6f 775f 6368 6563 6b20 3d20 6669 6c65  low_check = file
+00015ea0: 6461 7461 5b22 6c6f 6720 7472 616e 7361  data["log transa
+00015eb0: 6374 696f 6e22 5d0d 0a20 2020 2020 2020  ction"]..       
+00015ec0: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
+00015ed0: 6c6f 775f 6368 6563 6b29 0d0a 2020 2020  low_check)..    
+00015ee0: 2020 2020 2020 2020 2370 7269 6e74 2822          #print("
+00015ef0: 464c 4f57 2043 4845 434b 222c 2066 696c  FLOW CHECK", fil
+00015f00: 656e 616d 652c 2066 6c6f 775f 6368 6563  ename, flow_chec
+00015f10: 6b29 0d0a 2020 2020 2020 2020 2020 2020  k)..            
+00015f20: 7072 696e 7428 2274 7970 6522 2c20 7479  print("type", ty
+00015f30: 7065 2866 6c6f 775f 6368 6563 6b29 290d  pe(flow_check)).
+00015f40: 0a0d 0a20 2020 2020 2020 2020 2020 206b  ...            k
+00015f50: 696e 6420 3d20 6669 6c65 6461 7461 5b22  ind = filedata["
+00015f60: 6b69 6e64 225d 0d0a 0d0a 2020 2020 2020  kind"]....      
+00015f70: 2020 2020 2020 2373 7562 6a65 6374 203d        #subject =
+00015f80: 2020 6669 6c65 6461 7461 5b22 7375 626a    filedata["subj
+00015f90: 6563 7422 5d2e 7265 706c 6163 6528 2220  ect"].replace(" 
+00015fa0: 222c 225f 2229 202b 2022 5f22 202b 2066  ","_") + "_" + f
+00015fb0: 696c 6564 6174 615b 2273 686f 7274 6e61  iledata["shortna
+00015fc0: 6d65 222e 7265 706c 6163 6528 2220 222c  me".replace(" ",
+00015fd0: 225f 2229 5d2e 6c6f 7765 7228 290d 0a20  "_")].lower().. 
+00015fe0: 2020 2020 2020 2020 2020 2073 7562 6a65             subje
+00015ff0: 6374 203d 2020 6669 6c65 6461 7461 5b22  ct =  filedata["
+00016000: 7368 6f72 746e 616d 6522 2e72 6570 6c61  shortname".repla
+00016010: 6365 2822 2022 2c22 5f22 295d 2e72 6570  ce(" ","_")].rep
+00016020: 6c61 6365 2822 2822 2c22 5f22 292e 7265  lace("(","_").re
+00016030: 706c 6163 6528 2229 222c 2222 292e 6c6f  place(")","").lo
+00016040: 7765 7228 290d 0a20 2020 2020 2020 2020  wer()..         
+00016050: 2020 2073 7562 6a65 6374 5f73 7472 203d     subject_str =
+00016060: 2020 6669 6c65 6461 7461 5b22 7375 626a    filedata["subj
+00016070: 6563 7422 2e72 6570 6c61 6365 2822 2022  ect".replace(" "
+00016080: 2c22 5f22 295d 2e6c 6f77 6572 2829 2e63  ,"_")].lower().c
+00016090: 6170 6974 616c 697a 6528 292e 7265 706c  apitalize().repl
+000160a0: 6163 6528 225f 222c 2022 2022 290d 0a0d  ace("_", " ")...
+000160b0: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
+000160c0: 6a65 6374 735f 636f 756e 745b 7375 626a  jects_count[subj
+000160d0: 6563 745d 202b 3d20 310d 0a20 2020 2020  ect] += 1..     
+000160e0: 2020 2020 2020 2069 6620 7375 626a 6563         if subjec
+000160f0: 7473 5f63 6f75 6e74 5b73 7562 6a65 6374  ts_count[subject
+00016100: 5d20 3e20 313a 2023 2073 7566 6669 7820  ] > 1: # suffix 
+00016110: 666f 7220 7361 6d65 206e 616d 6573 0d0a  for same names..
+00016120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016130: 7375 626a 6563 7420 2b3d 2022 5f25 6922  subject += "_%i"
+00016140: 2025 2069 6e74 2873 7562 6a65 6374 735f   % int(subjects_
+00016150: 636f 756e 745b 7375 626a 6563 745d 290d  count[subject]).
+00016160: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00016170: 2071 7561 6e74 6974 7920 3d20 2271 2220   quantity = "q" 
+00016180: 2320 6669 6c65 6461 7461 5b22 7175 616e  # filedata["quan
+00016190: 7469 7479 225d 0d0a 0d0a 2020 2020 2020  tity"]....      
+000161a0: 2020 2020 2020 636f 6d6d 616e 6473 203d        commands =
+000161b0: 205b 5d0d 0a0d 0a20 2020 2020 2020 2020   []....         
+000161c0: 2020 2069 6620 2275 6e69 2d64 6972 6563     if "uni-direc
+000161d0: 7469 6f6e 616c 2220 696e 2066 696c 6564  tional" in filed
+000161e0: 6174 613a 0d0a 2020 2020 2020 2020 2020  ata:..          
+000161f0: 2020 2020 2020 756e 6964 6972 203d 2066        unidir = f
+00016200: 696c 6564 6174 615b 2275 6e69 2d64 6972  iledata["uni-dir
+00016210: 6563 7469 6f6e 616c 225d 0d0a 0d0a 2020  ectional"]....  
+00016220: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00016230: 6d6d 616e 6473 2e61 7070 656e 6428 2263  mmands.append("c
+00016240: 6f6e 6420 3d20 2869 7369 6e73 7461 6e63  ond = (isinstanc
+00016250: 6528 712c 666c 6f61 7429 206f 7220 6973  e(q,float) or is
+00016260: 696e 7374 616e 6365 2871 2c69 6e74 2929  instance(q,int))
+00016270: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00016280: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
+00016290: 656e 6428 2269 6620 636f 6e64 3a20 6173  end("if cond: as
+000162a0: 7365 7274 206e 6f74 206e 702e 6973 6e61  sert not np.isna
+000162b0: 6e28 7129 2229 0d0a 2020 2020 2020 2020  n(q)")..        
+000162c0: 2020 2020 2020 2020 2320 5e20 7769 6c6c          # ^ will
+000162d0: 2061 6c73 6f20 7061 7373 2066 6f72 206e   also pass for n
+000162e0: 702e 666c 6f61 7436 340d 0a20 2020 2020  p.float64..     
+000162f0: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
+00016300: 6e64 732e 6170 7065 6e64 2822 6966 2063  nds.append("if c
+00016310: 6f6e 643a 2061 7373 6572 7420 7120 3c20  ond: assert q < 
+00016320: 2b6e 702e 696e 6622 290d 0a20 2020 2020  +np.inf")..     
+00016330: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
+00016340: 6e64 732e 6170 7065 6e64 2822 6966 2063  nds.append("if c
+00016350: 6f6e 643a 2061 7373 6572 7420 7120 3e20  ond: assert q > 
+00016360: 2d6e 702e 696e 6622 290d 0a0d 0a20 2020  -np.inf")....   
+00016370: 2020 2020 2020 2020 2020 2020 2023 7072               #pr
+00016380: 696e 7428 2275 6e69 2d64 6972 6563 7469  int("uni-directi
+00016390: 6f6e 616c 222c 756e 6964 6972 290d 0a20  onal",unidir).. 
+000163a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000163b0: 6620 7374 7228 756e 6964 6972 2920 3d3d  f str(unidir) ==
+000163c0: 2022 5472 7565 223a 2023 2064 6f20 6e6f   "True": # do no
+000163d0: 7420 646f 2062 6f6f 6c28 756e 6964 6972  t do bool(unidir
+000163e0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000163f0: 2020 2020 2020 2023 6e61 6d61 6161 203d         #namaaa =
+00016400: 2066 696c 6564 6174 615b 2273 686f 7274   filedata["short
+00016410: 6e61 6d65 225d 0d0a 2020 2020 2020 2020  name"]..        
+00016420: 2020 2020 2020 2020 2020 2020 2373 656c              #sel
+00016430: 662e 6e6f 7469 6679 2820 286e 616d 6161  f.notify( (namaa
+00016440: 612b 2073 7472 2875 6e69 6469 7229 2b20  a+ str(unidir)+ 
+00016450: 223d 222b 2873 7472 2862 6f6f 6c28 756e  "="+(str(bool(un
+00016460: 6964 6972 2929 2929 2c74 6974 6c65 3d22  idir)))),title="
+00016470: 6368 6563 6b22 290d 0a20 2020 2020 2020  check")..       
+00016480: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+00016490: 6d61 6e64 732e 6170 7065 6e64 2822 6966  mands.append("if
+000164a0: 2063 6f6e 643a 2061 7373 6572 7420 7120   cond: assert q 
+000164b0: 3e3d 2030 2c20 2768 6176 6520 746f 2070  >= 0, 'have to p
+000164c0: 6173 7320 706f 7369 7469 7665 2071 7561  ass positive qua
+000164d0: 6e74 6974 793a 2075 6e69 6469 7265 6374  ntity: unidirect
+000164e0: 696f 6e61 6c20 7472 616e 7361 6374 696f  ional transactio
+000164f0: 6e27 2229 0d0a 0d0a 2020 2020 2020 2020  n'")....        
+00016500: 2020 2020 636f 6d6d 616e 6473 203d 2063      commands = c
+00016510: 6f6d 6d61 6e64 7320 2b20 5b22 2573 2e62  ommands + ["%s.b
+00016520: 616c 616e 6365 5f73 6865 6574 2e64 6973  alance_sheet.dis
+00016530: 656e 6761 6765 2829 2220 2520 6167 656e  engage()" % agen
+00016540: 7431 5d0d 0a20 2020 2020 2020 2020 2020  t1]..           
+00016550: 2069 6620 5472 7565 3a20 2320 6167 656e   if True: # agen
+00016560: 7431 2021 3d20 6167 656e 7432 3a0d 0a20  t1 != agent2:.. 
+00016570: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00016580: 6f6d 6d61 6e64 732b 3d20 5b22 2573 2e62  ommands+= ["%s.b
+00016590: 616c 616e 6365 5f73 6865 6574 2e64 6973  alance_sheet.dis
+000165a0: 656e 6761 6765 2829 2220 2520 6167 656e  engage()" % agen
+000165b0: 7432 5d0d 0a0d 0a20 2020 2020 2020 2020  t2]....         
+000165c0: 2020 2066 6f72 2065 6e74 7279 2069 6e20     for entry in 
+000165d0: 6531 2e73 706c 6974 2822 5c6e 2229 3a0d  e1.split("\n"):.
+000165e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000165f0: 2069 6620 656e 7472 7920 213d 2022 2220   if entry != "" 
+00016600: 616e 6420 656e 7472 7920 213d 2022 5c6e  and entry != "\n
+00016610: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00016620: 2020 2020 2020 2020 7369 676e 2c20 6974          sign, it
+00016630: 656d 2c20 7369 6c65 6e74 203d 2073 656c  em, silent = sel
+00016640: 662e 656e 7472 795f 746f 5f76 616c 7328  f.entry_to_vals(
+00016650: 656e 7472 792c 2061 6765 6e74 312c 2022  entry, agent1, "
+00016660: 4571 7569 7479 2229 0d0a 2020 2020 2020  Equity")..      
+00016670: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00016680: 2073 6967 6e20 6973 206e 6f74 204e 6f6e   sign is not Non
+00016690: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000166a0: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
+000166b0: 616e 6473 2e61 7070 656e 6428 2225 732e  ands.append("%s.
+000166c0: 6261 6c61 6e63 655f 7368 6565 742e 6368  balance_sheet.ch
+000166d0: 616e 6765 5f69 7465 6d28 2725 7327 2c20  ange_item('%s', 
+000166e0: 2573 2c20 2573 2c20 7375 7070 7265 7373  %s, %s, suppress
+000166f0: 5f73 746f 636b 3d25 7329 2220 2520 280d  _stock=%s)" % (.
+00016700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016710: 2020 2020 2020 2020 2061 6765 6e74 312c           agent1,
+00016720: 2069 7465 6d2c 2022 4261 6c61 6e63 6545   item, "BalanceE
+00016730: 6e74 7279 2e45 5155 4954 5922 2c20 7369  ntry.EQUITY", si
+00016740: 676e 202b 2071 7561 6e74 6974 792c 2073  gn + quantity, s
+00016750: 696c 656e 7429 290d 0a20 2020 2020 2020  ilent))..       
+00016760: 2020 2020 2066 6f72 2065 6e74 7279 2069       for entry i
+00016770: 6e20 6131 2e73 706c 6974 2822 5c6e 2229  n a1.split("\n")
+00016780: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00016790: 2020 2069 6620 656e 7472 7920 213d 2022     if entry != "
+000167a0: 2220 616e 6420 656e 7472 7920 213d 2022  " and entry != "
+000167b0: 5c6e 223a 0d0a 2020 2020 2020 2020 2020  \n":..          
+000167c0: 2020 2020 2020 2020 2020 7369 676e 2c20            sign, 
+000167d0: 6974 656d 2c20 7369 6c65 6e74 203d 2073  item, silent = s
+000167e0: 656c 662e 656e 7472 795f 746f 5f76 616c  elf.entry_to_val
+000167f0: 7328 656e 7472 792c 2061 6765 6e74 312c  s(entry, agent1,
+00016800: 2022 4173 7365 7473 2229 0d0a 2020 2020   "Assets")..    
+00016810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016820: 6966 2073 6967 6e20 6973 206e 6f74 204e  if sign is not N
+00016830: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00016840: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00016850: 6d6d 616e 6473 2e61 7070 656e 6428 2225  mmands.append("%
+00016860: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
+00016870: 6368 616e 6765 5f69 7465 6d28 2725 7327  change_item('%s'
+00016880: 2c20 2573 2c20 2573 2c20 7375 7070 7265  , %s, %s, suppre
+00016890: 7373 5f73 746f 636b 3d25 7329 2220 2520  ss_stock=%s)" % 
+000168a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+000168b0: 2020 2020 2020 2020 2020 2061 6765 6e74             agent
+000168c0: 312c 2069 7465 6d2c 2022 4261 6c61 6e63  1, item, "Balanc
+000168d0: 6545 6e74 7279 2e41 5353 4554 5322 2c20  eEntry.ASSETS", 
+000168e0: 7369 676e 202b 2071 7561 6e74 6974 792c  sign + quantity,
+000168f0: 2073 696c 656e 7429 290d 0a20 2020 2020   silent))..     
+00016900: 2020 2020 2020 2066 6f72 2065 6e74 7279         for entry
+00016910: 2069 6e20 6c31 2e73 706c 6974 2822 5c6e   in l1.split("\n
+00016920: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00016930: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
+00016940: 2022 2220 616e 6420 656e 7472 7920 213d   "" and entry !=
+00016950: 2022 5c6e 223a 0d0a 2020 2020 2020 2020   "\n":..        
+00016960: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00016970: 2c20 6974 656d 2c20 7369 6c65 6e74 203d  , item, silent =
+00016980: 2073 656c 662e 656e 7472 795f 746f 5f76   self.entry_to_v
+00016990: 616c 7328 656e 7472 792c 2061 6765 6e74  als(entry, agent
+000169a0: 312c 2022 4c69 6162 696c 6974 6965 7322  1, "Liabilities"
+000169b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000169c0: 2020 2020 2020 2069 6620 7369 676e 2069         if sign i
+000169d0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000169e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000169f0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
+00016a00: 7065 6e64 2822 2573 2e62 616c 616e 6365  pend("%s.balance
+00016a10: 5f73 6865 6574 2e63 6861 6e67 655f 6974  _sheet.change_it
+00016a20: 656d 2827 2573 272c 2025 732c 2025 732c  em('%s', %s, %s,
+00016a30: 2073 7570 7072 6573 735f 7374 6f63 6b3d   suppress_stock=
+00016a40: 2573 2922 2025 2028 0d0a 2020 2020 2020  %s)" % (..      
+00016a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a60: 2020 6167 656e 7431 2c20 6974 656d 2c20    agent1, item, 
+00016a70: 2242 616c 616e 6365 456e 7472 792e 4c49  "BalanceEntry.LI
+00016a80: 4142 494c 4954 4945 5322 2c20 7369 676e  ABILITIES", sign
+00016a90: 202b 2071 7561 6e74 6974 792c 2073 696c   + quantity, sil
+00016aa0: 656e 7429 290d 0a20 2020 2020 2020 2020  ent))..         
+00016ab0: 2020 2066 6f72 2065 6e74 7279 2069 6e20     for entry in 
+00016ac0: 6532 2e73 706c 6974 2822 5c6e 2229 3a0d  e2.split("\n"):.
+00016ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016ae0: 2069 6620 656e 7472 7920 213d 2022 2220   if entry != "" 
+00016af0: 616e 6420 656e 7472 7920 213d 2022 5c6e  and entry != "\n
+00016b00: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00016b10: 2020 2020 2020 2020 7369 676e 2c20 6974          sign, it
+00016b20: 656d 2c20 7369 6c65 6e74 203d 2073 656c  em, silent = sel
+00016b30: 662e 656e 7472 795f 746f 5f76 616c 7328  f.entry_to_vals(
+00016b40: 656e 7472 792c 2061 6765 6e74 322c 2022  entry, agent2, "
+00016b50: 4571 7569 7479 2229 0d0a 2020 2020 2020  Equity")..      
+00016b60: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00016b70: 2073 6967 6e20 6973 206e 6f74 204e 6f6e   sign is not Non
+00016b80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00016b90: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
+00016ba0: 616e 6473 2e61 7070 656e 6428 2225 732e  ands.append("%s.
+00016bb0: 6261 6c61 6e63 655f 7368 6565 742e 6368  balance_sheet.ch
+00016bc0: 616e 6765 5f69 7465 6d28 2725 7327 2c20  ange_item('%s', 
+00016bd0: 2573 2c20 2573 2c20 7375 7070 7265 7373  %s, %s, suppress
+00016be0: 5f73 746f 636b 3d25 7329 2220 2520 280d  _stock=%s)" % (.
+00016bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016c00: 2020 2020 2020 2020 2061 6765 6e74 322c           agent2,
+00016c10: 2069 7465 6d2c 2022 4261 6c61 6e63 6545   item, "BalanceE
+00016c20: 6e74 7279 2e45 5155 4954 5922 2c20 7369  ntry.EQUITY", si
+00016c30: 676e 202b 2071 7561 6e74 6974 792c 2073  gn + quantity, s
+00016c40: 696c 656e 7429 290d 0a20 2020 2020 2020  ilent))..       
+00016c50: 2020 2020 2066 6f72 2065 6e74 7279 2069       for entry i
+00016c60: 6e20 6132 2e73 706c 6974 2822 5c6e 2229  n a2.split("\n")
+00016c70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00016c80: 2020 2069 6620 656e 7472 7920 213d 2022     if entry != "
+00016c90: 2220 616e 6420 656e 7472 7920 213d 2022  " and entry != "
+00016ca0: 5c6e 223a 0d0a 2020 2020 2020 2020 2020  \n":..          
+00016cb0: 2020 2020 2020 2020 2020 7369 676e 2c20            sign, 
+00016cc0: 6974 656d 2c20 7369 6c65 6e74 203d 2073  item, silent = s
+00016cd0: 656c 662e 656e 7472 795f 746f 5f76 616c  elf.entry_to_val
+00016ce0: 7328 656e 7472 792c 2061 6765 6e74 322c  s(entry, agent2,
+00016cf0: 2022 4173 7365 7473 2229 0d0a 2020 2020   "Assets")..    
+00016d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016d10: 6966 2073 6967 6e20 6973 206e 6f74 204e  if sign is not N
+00016d20: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00016d30: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00016d40: 6d6d 616e 6473 2e61 7070 656e 6428 2225  mmands.append("%
+00016d50: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
+00016d60: 6368 616e 6765 5f69 7465 6d28 2725 7327  change_item('%s'
+00016d70: 2c20 2573 2c20 2573 2c20 7375 7070 7265  , %s, %s, suppre
+00016d80: 7373 5f73 746f 636b 3d25 7329 2220 2520  ss_stock=%s)" % 
+00016d90: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00016da0: 2020 2020 2020 2020 2020 2061 6765 6e74             agent
+00016db0: 322c 2069 7465 6d2c 2022 4261 6c61 6e63  2, item, "Balanc
+00016dc0: 6545 6e74 7279 2e41 5353 4554 5322 2c20  eEntry.ASSETS", 
+00016dd0: 7369 676e 202b 2071 7561 6e74 6974 792c  sign + quantity,
+00016de0: 2073 696c 656e 7429 290d 0a20 2020 2020   silent))..     
+00016df0: 2020 2020 2020 2066 6f72 2065 6e74 7279         for entry
+00016e00: 2069 6e20 6c32 2e73 706c 6974 2822 5c6e   in l2.split("\n
+00016e10: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00016e20: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
+00016e30: 2022 2220 616e 6420 656e 7472 7920 213d   "" and entry !=
+00016e40: 2022 5c6e 223a 0d0a 2020 2020 2020 2020   "\n":..        
+00016e50: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+00016e60: 2c20 6974 656d 2c20 7369 6c65 6e74 203d  , item, silent =
+00016e70: 2073 656c 662e 656e 7472 795f 746f 5f76   self.entry_to_v
+00016e80: 616c 7328 656e 7472 792c 2061 6765 6e74  als(entry, agent
+00016e90: 322c 2022 4c69 6162 696c 6974 6965 7322  2, "Liabilities"
+00016ea0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00016eb0: 2020 2020 2020 2069 6620 7369 676e 2069         if sign i
+00016ec0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00016ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ee0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
+00016ef0: 7065 6e64 2822 2573 2e62 616c 616e 6365  pend("%s.balance
+00016f00: 5f73 6865 6574 2e63 6861 6e67 655f 6974  _sheet.change_it
+00016f10: 656d 2827 2573 272c 2025 732c 2025 732c  em('%s', %s, %s,
+00016f20: 2073 7570 7072 6573 735f 7374 6f63 6b3d   suppress_stock=
+00016f30: 2573 2922 2025 2028 0d0a 2020 2020 2020  %s)" % (..      
+00016f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016f50: 2020 6167 656e 7432 2c20 6974 656d 2c20    agent2, item, 
+00016f60: 2242 616c 616e 6365 456e 7472 792e 4c49  "BalanceEntry.LI
+00016f70: 4142 494c 4954 4945 5322 2c20 7369 676e  ABILITIES", sign
+00016f80: 202b 2071 7561 6e74 6974 792c 2073 696c   + quantity, sil
+00016f90: 656e 7429 290d 0a0d 0a20 2020 2020 2020  ent))....       
+00016fa0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
+00016fb0: 7065 6e64 2822 2573 2e62 616c 616e 6365  pend("%s.balance
+00016fc0: 5f73 6865 6574 2e65 6e67 6167 6528 2922  _sheet.engage()"
+00016fd0: 2025 2061 6765 6e74 3129 0d0a 2020 2020   % agent1)..    
+00016fe0: 2020 2020 2020 2020 6966 2054 7275 653a          if True:
+00016ff0: 2023 2061 6765 6e74 3121 3d61 6765 6e74   # agent1!=agent
+00017000: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
+00017010: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
+00017020: 656e 6428 2225 732e 6261 6c61 6e63 655f  end("%s.balance_
+00017030: 7368 6565 742e 656e 6761 6765 2829 2220  sheet.engage()" 
+00017040: 2520 6167 656e 7432 290d 0a0d 0a20 2020  % agent2)....   
+00017050: 2020 2020 2020 2020 2061 6464 5f66 6c6f           add_flo
+00017060: 7720 3d20 666c 6f77 5f63 6865 636b 0d0a  w = flow_check..
+00017070: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00017080: 6464 5f66 6c6f 773a 0d0a 2020 2020 2020  dd_flow:..      
+00017090: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+000170a0: 7375 626a 6563 745f 7374 722c 2266 6c6f  subject_str,"flo
+000170b0: 7720 6368 6563 6b22 2c66 6c6f 775f 6368  w check",flow_ch
+000170c0: 6563 6b29 0d0a 0d0a 2020 2020 2020 2020  eck)....        
+000170d0: 2020 2020 2020 2020 6b69 6e64 5f65 6e75          kind_enu
+000170e0: 6d20 3d20 2228 2573 2c25 7329 2220 2520  m = "(%s,%s)" % 
+000170f0: 286b 696e 642e 7370 6c69 7428 222d 3e22  (kind.split("->"
+00017100: 295b 305d 2e73 7472 6970 2829 2c6b 696e  )[0].strip(),kin
+00017110: 642e 7370 6c69 7428 222d 3e22 295b 315d  d.split("->")[1]
+00017120: 2e73 7472 6970 2829 290d 0a0d 0a20 2020  .strip())....   
+00017130: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+00017140: 6d61 6e64 732e 6170 7065 6e64 2822 466c  mands.append("Fl
+00017150: 6f77 4d61 7472 6978 2829 2e6c 6f67 5f66  owMatrix().log_f
+00017160: 6c6f 7728 2573 2c20 2573 2c20 2573 2c20  low(%s, %s, %s, 
+00017170: 2573 2c20 7375 626a 6563 743d 2725 7327  %s, subject='%s'
+00017180: 2922 2025 2028 6b69 6e64 5f65 6e75 6d2c  )" % (kind_enum,
+00017190: 2071 7561 6e74 6974 792c 2061 6765 6e74   quantity, agent
+000171a0: 312c 2061 6765 6e74 322c 2073 7562 6a65  1, agent2, subje
+000171b0: 6374 5f73 7472 2929 0d0a 0d0a 2020 2020  ct_str))....    
+000171c0: 2020 2020 2020 2020 2320 6170 7065 6e64          # append
+000171d0: 2069 6e73 6572 745f 6c69 6e6b 2063 6f6d   insert_link com
+000171e0: 6d61 6e64 2074 6f20 636f 6465 0d0a 0d0a  mand to code....
+000171f0: 0d0a 2020 2020 2020 2020 2020 2020 6d79  ..            my
+00017200: 5f69 6e63 6f6d 655f 6469 6374 203d 207b  _income_dict = {
+00017210: 2023 2023 7472 616e 736c 6174 6573 2073   # #translates s
+00017220: 7472 696e 6720 696e 746f 2049 4353 456e  tring into ICSEn
+00017230: 7472 7920 2866 6f72 2062 6574 7465 7220  try (for better 
+00017240: 6566 6669 6369 656e 6379 290d 0a20 2020  efficiency)..   
+00017250: 2020 2020 2020 2020 2020 2020 2022 5265               "Re
+00017260: 7665 6e75 6522 3a20 2249 4353 456e 7472  venue": "ICSEntr
+00017270: 792e 5245 5645 4e55 4553 222c 0d0a 2020  y.REVENUES",..  
+00017280: 2020 2020 2020 2020 2020 2020 2020 224e                "N
+00017290: 6f6e 2d4f 702e 2049 6e63 6f6d 6522 3a20  on-Op. Income": 
+000172a0: 2249 4353 456e 7472 792e 4e4f 4922 2c0d  "ICSEntry.NOI",.
+000172b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000172c0: 2022 4578 7065 6e73 6522 3a20 2249 4353   "Expense": "ICS
+000172d0: 456e 7472 792e 4558 5045 4e53 4553 222c  Entry.EXPENSES",
+000172e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000172f0: 2020 2254 6178 223a 2022 4943 5345 6e74    "Tax": "ICSEnt
+00017300: 7279 2e54 4158 4553 222c 0d0a 2020 2020  ry.TAXES",..    
+00017310: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
+00017320: 6572 6573 7422 3a20 2249 4353 456e 7472  erest": "ICSEntr
+00017330: 792e 494e 5445 5245 5354 222c 0d0a 2020  y.INTEREST",..  
+00017340: 2020 2020 2020 2020 2020 2020 2020 2247                "G
+00017350: 6169 6e22 3a20 2249 4353 456e 7472 792e  ain": "ICSEntry.
+00017360: 4741 494e 5322 2c0d 0a20 2020 2020 2020  GAINS",..       
+00017370: 2020 2020 2020 2020 2022 4e6f 6e74 6178           "Nontax
+00017380: 2e50 726f 6669 7422 3a20 2249 4353 456e  .Profit": "ICSEn
+00017390: 7472 792e 4e4f 4e54 4158 5f50 524f 4649  try.NONTAX_PROFI
+000173a0: 5453 222c 0d0a 2020 2020 2020 2020 2020  TS",..          
+000173b0: 2020 2020 2020 224e 6f6e 7461 782e 2050        "Nontax. P
+000173c0: 726f 6669 7422 3a20 2249 4353 456e 7472  rofit": "ICSEntr
+000173d0: 792e 4e4f 4e54 4158 5f50 524f 4649 5453  y.NONTAX_PROFITS
+000173e0: 222c 2023 2071 7569 636b 2061 6e64 2064  ", # quick and d
+000173f0: 6972 7479 2062 7567 6669 780d 0a20 2020  irty bugfix..   
+00017400: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
+00017410: 6e74 6178 2e20 4c6f 7373 223a 2020 2249  ntax. Loss":  "I
+00017420: 4353 456e 7472 792e 4e4f 4e54 4158 5f4c  CSEntry.NONTAX_L
+00017430: 4f53 5345 5322 2c0d 0a20 2020 2020 2020  OSSES",..       
+00017440: 2020 2020 2020 2020 2022 4c6f 7373 223a           "Loss":
+00017450: 2020 2249 4353 456e 7472 792e 4c4f 5353    "ICSEntry.LOSS
+00017460: 4553 220d 0a20 2020 2020 2020 2020 2020  ES"..           
+00017470: 207d 0d0a 0d0a 2020 2020 2020 2020 2020   }....          
+00017480: 2020 2320 696e 636f 6d65 2073 7461 7465    # income state
+00017490: 6d65 6e74 3f0d 0a20 2020 2020 2020 2020  ment?..         
+000174a0: 2020 2069 6620 2269 6e63 6f6d 6531 2220     if "income1" 
+000174b0: 696e 2066 696c 6564 6174 613a 0d0a 2020  in filedata:..  
+000174c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000174d0: 2073 7472 2866 696c 6564 6174 615b 2269   str(filedata["i
+000174e0: 6e63 6f6d 6531 225d 2920 213d 2027 4e6f  ncome1"]) != 'No
+000174f0: 6e65 273a 0d0a 2020 2020 2020 2020 2020  ne':..          
+00017500: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
+00017510: 6473 2e61 7070 656e 6428 2225 732e 696e  ds.append("%s.in
+00017520: 636f 6d65 5f73 7461 7465 6d65 6e74 2e6e  come_statement.n
+00017530: 6577 5f65 6e74 7279 2825 732c 2725 7327  ew_entry(%s,'%s'
+00017540: 2c25 7329 2220 2520 2861 6765 6e74 312c  ,%s)" % (agent1,
+00017550: 6d79 5f69 6e63 6f6d 655f 6469 6374 5b66  my_income_dict[f
+00017560: 696c 6564 6174 615b 2269 6e63 6f6d 6531  iledata["income1
+00017570: 225d 5d2c 7375 626a 6563 742c 7175 616e  "]],subject,quan
+00017580: 7469 7479 2929 0d0a 0d0a 2020 2020 2020  tity))....      
+00017590: 2020 2020 2020 6966 2022 696e 636f 6d65        if "income
+000175a0: 3222 2069 6e20 6669 6c65 6461 7461 3a0d  2" in filedata:.
+000175b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000175c0: 2069 6620 7374 7228 6669 6c65 6461 7461   if str(filedata
+000175d0: 5b22 696e 636f 6d65 3222 5d29 2021 3d20  ["income2"]) != 
+000175e0: 274e 6f6e 6527 3a0d 0a20 2020 2020 2020  'None':..       
+000175f0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+00017600: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
+00017610: 2e69 6e63 6f6d 655f 7374 6174 656d 656e  .income_statemen
+00017620: 742e 6e65 775f 656e 7472 7928 2573 2c27  t.new_entry(%s,'
+00017630: 2573 272c 2573 2922 2025 2028 6167 656e  %s',%s)" % (agen
+00017640: 7432 2c20 6d79 5f69 6e63 6f6d 655f 6469  t2, my_income_di
+00017650: 6374 5b66 696c 6564 6174 615b 2269 6e63  ct[filedata["inc
+00017660: 6f6d 6532 225d 5d2c 2073 7562 6a65 6374  ome2"]], subject
+00017670: 2c20 7175 616e 7469 7479 2929 0d0a 0d0a  , quantity))....
+00017680: 2020 2020 2020 2020 2020 2020 2320 6361              # ca
+00017690: 7368 2066 6c6f 7720 7374 6174 656d 656e  sh flow statemen
+000176a0: 740d 0a20 2020 2020 2020 2020 2020 2069  t..            i
+000176b0: 6620 2263 6173 6866 6c6f 7731 2220 696e  f "cashflow1" in
+000176c0: 2066 696c 6564 6174 613a 0d0a 2020 2020   filedata:..    
+000176d0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+000176e0: 7472 2866 696c 6564 6174 615b 2263 6173  tr(filedata["cas
+000176f0: 6866 6c6f 7731 225d 2920 213d 2027 4e6f  hflow1"]) != 'No
+00017700: 6e65 273a 0d0a 2020 2020 2020 2020 2020  ne':..          
+00017710: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
+00017720: 6473 2e61 7070 656e 6428 2225 732e 6361  ds.append("%s.ca
+00017730: 7368 5f66 6c6f 775f 7374 6174 656d 656e  sh_flow_statemen
+00017740: 742e 6e65 775f 656e 7472 7928 2573 2c27  t.new_entry(%s,'
+00017750: 2573 272c 2d25 7329 2220 2520 2861 6765  %s',-%s)" % (age
+00017760: 6e74 312c 2243 6173 6846 6c6f 7745 6e74  nt1,"CashFlowEnt
+00017770: 7279 2e22 202b 2066 696c 6564 6174 615b  ry." + filedata[
+00017780: 2263 6173 6866 6c6f 7731 225d 2e75 7070  "cashflow1"].upp
+00017790: 6572 2829 2c73 7562 6a65 6374 2c71 7561  er(),subject,qua
+000177a0: 6e74 6974 7929 290d 0a0d 0a20 2020 2020  ntity))....     
+000177b0: 2020 2020 2020 2069 6620 2263 6173 6866         if "cashf
+000177c0: 6c6f 7732 2220 696e 2066 696c 6564 6174  low2" in filedat
+000177d0: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
+000177e0: 2020 2020 6966 2073 7472 2866 696c 6564      if str(filed
+000177f0: 6174 615b 2263 6173 6866 6c6f 7732 225d  ata["cashflow2"]
+00017800: 2920 213d 2027 4e6f 6e65 273a 0d0a 2020  ) != 'None':..  
+00017810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017820: 2020 636f 6d6d 616e 6473 2e61 7070 656e    commands.appen
+00017830: 6428 2225 732e 6361 7368 5f66 6c6f 775f  d("%s.cash_flow_
+00017840: 7374 6174 656d 656e 742e 6e65 775f 656e  statement.new_en
+00017850: 7472 7928 2573 2c27 2573 272c 2573 2922  try(%s,'%s',%s)"
+00017860: 2025 2028 6167 656e 7432 2c22 4361 7368   % (agent2,"Cash
+00017870: 466c 6f77 456e 7472 792e 2220 2b20 6669  FlowEntry." + fi
+00017880: 6c65 6461 7461 5b22 6361 7368 666c 6f77  ledata["cashflow
+00017890: 3222 5d2e 7570 7065 7228 292c 7375 626a  2"].upper(),subj
+000178a0: 6563 742c 7175 616e 7469 7479 2929 0d0a  ect,quantity))..
+000178b0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000178c0: 2054 7275 653a 2023 2061 6765 6e74 3120   True: # agent1 
+000178d0: 213d 2061 6765 6e74 323a 0d0a 2020 2020  != agent2:..    
+000178e0: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
+000178f0: 6f64 203d 2022 6465 6620 2573 2825 732c  od = "def %s(%s,
+00017900: 2025 732c 2025 7329 3a5c 6e22 2025 2028   %s, %s):\n" % (
+00017910: 7375 626a 6563 742c 6167 656e 7431 2c61  subject,agent1,a
+00017920: 6765 6e74 322c 7175 616e 7469 7479 290d  gent2,quantity).
+00017930: 0a20 2020 2020 2020 2020 2020 2023 656c  .            #el
+00017940: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00017950: 2023 2020 2020 6d65 7468 6f64 203d 2022   #    method = "
+00017960: 6465 6620 2573 2825 732c 2025 7329 3a5c  def %s(%s, %s):\
+00017970: 6e22 2025 2028 7375 626a 6563 742c 2061  n" % (subject, a
+00017980: 6765 6e74 312c 2071 7561 6e74 6974 7929  gent1, quantity)
+00017990: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000179a0: 6966 2022 6465 7363 7269 7074 696f 6e22  if "description"
+000179b0: 2069 6e20 6669 6c65 6461 7461 3a20 2320   in filedata: # 
+000179c0: 6164 6420 7468 6520 6465 7363 7269 7074  add the descript
+000179d0: 696f 6e20 696e 2074 6865 2064 6f63 7374  ion in the docst
+000179e0: 7269 6e67 206f 6620 7468 6520 6675 6e63  ring of the func
+000179f0: 7469 6f6e 2064 6566 696e 6974 696f 6e0d  tion definition.
+00017a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017a10: 206d 6574 686f 6420 2b3d 2022 2020 2020   method += "    
+00017a20: 2322 202b 2066 696c 6564 6174 615b 2264  #" + filedata["d
+00017a30: 6573 6372 6970 7469 6f6e 225d 202b 2022  escription"] + "
+00017a40: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
+00017a50: 2020 2066 6f72 2063 6f6d 6d61 6e64 2069     for command i
+00017a60: 6e20 636f 6d6d 616e 6473 3a0d 0a20 2020  n commands:..   
+00017a70: 2020 2020 2020 2020 2020 2020 206d 6574               met
+00017a80: 686f 6420 2b3d 2022 2020 2020 2220 2b20  hod += "    " + 
+00017a90: 636f 6d6d 616e 6420 2b20 225c 6e22 0d0a  command + "\n"..
+00017aa0: 0d0a 2020 2020 2020 2020 2020 2020 6d65  ..            me
+00017ab0: 7468 6f64 202b 3d20 225c 6e5c 6e22 0d0a  thod += "\n\n"..
+00017ac0: 2020 2020 2020 2020 2020 2020 636f 6465              code
+00017ad0: 202b 3d20 6d65 7468 6f64 0d0a 0d0a 2020   += method....  
+00017ae0: 2020 2020 2020 666f 6c64 6572 203d 206f        folder = o
+00017af0: 732e 7061 7468 2e64 6972 6e61 6d65 2873  s.path.dirname(s
+00017b00: 656c 662e 6375 7272 656e 745f 6669 6c65  elf.current_file
+00017b10: 2920 2320 7374 6174 7573 4261 7228 292e  ) # statusBar().
+00017b20: 6375 7272 656e 744d 6573 7361 6765 2829  currentMessage()
+00017b30: 290d 0a20 2020 2020 2020 2066 6e61 6d65  )..        fname
+00017b40: 203d 2020 666f 6c64 6572 202b 2022 2f70   =  folder + "/p
+00017b50: 7974 686f 6e5f 636f 6465 2f74 7261 6e73  ython_code/trans
+00017b60: 6163 7469 6f6e 732e 7079 220d 0a0d 0a20  actions.py".... 
+00017b70: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+00017b80: 2866 6e61 6d65 2c22 7722 2c65 6e63 6f64  (fname,"w",encod
+00017b90: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
+00017ba0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
+00017bb0: 2020 2066 696c 652e 7772 6974 6528 636f     file.write(co
+00017bc0: 6465 290d 0a0d 0a20 2020 2020 2020 2069  de)....        i
+00017bd0: 6620 7368 6f77 5f6e 6f74 6966 6963 6174  f show_notificat
+00017be0: 696f 6e3a 0d0a 2020 2020 2020 2020 2020  ion:..          
+00017bf0: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
+00017c00: 7373 6167 653d 2243 6f64 6520 6578 706f  ssage="Code expo
+00017c10: 7274 6564 2074 6f20 2573 2220 2520 2866  rted to %s" % (f
+00017c20: 6e61 6d65 292c 7469 746c 653d 2253 7563  name),title="Suc
+00017c30: 6365 7373 2229 0d0a 0d0a 0d0a 2020 2020  cess")......    
+00017c40: 6465 6620 6765 6e5f 6963 735f 7369 6e67  def gen_ics_sing
+00017c50: 6c65 2873 656c 6629 3a0d 0a20 2020 2020  le(self):..     
+00017c60: 2020 2069 6620 7365 6c66 2e64 7261 7763     if self.drawc
+00017c70: 616e 7661 732e 6869 6768 6c69 6768 7465  anvas.highlighte
+00017c80: 6420 6973 204e 6f6e 653a 0d0a 2020 2020  d is None:..    
+00017c90: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00017ca0: 6966 7928 7469 746c 653d 224e 6f20 6167  ify(title="No ag
+00017cb0: 656e 7420 7365 6c65 6374 6564 222c 206d  ent selected", m
+00017cc0: 6573 7361 6765 3d22 4e6f 2061 6765 6e74  essage="No agent
+00017cd0: 2073 656c 6563 7465 642e 2050 6c65 6173   selected. Pleas
+00017ce0: 6520 7365 6c65 6374 206f 6e65 2066 6972  e select one fir
+00017cf0: 7374 2e22 290d 0a20 2020 2020 2020 2020  st.")..         
+00017d00: 2020 2072 6574 7572 6e0d 0a20 2020 2020     return..     
+00017d10: 2020 2069 6620 7365 6c66 2e64 7261 7763     if self.drawc
+00017d20: 616e 7661 732e 6869 6768 6c69 6768 7465  anvas.highlighte
+00017d30: 642e 6973 6865 6c70 6572 3a0d 0a20 2020  d.ishelper:..   
+00017d40: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+00017d50: 7469 6679 2874 6974 6c65 3d22 4e6f 2061  tify(title="No a
+00017d60: 6765 6e74 2073 656c 6563 7465 6422 2c20  gent selected", 
+00017d70: 6d65 7373 6167 653d 224e 6f20 7661 6c69  message="No vali
+00017d80: 6420 626f 7820 7365 6c65 6374 6564 2e20  d box selected. 
+00017d90: 506c 6561 7365 2073 656c 6563 7420 616e  Please select an
+00017da0: 2061 6765 6e74 2e22 290d 0a20 2020 2020   agent.")..     
+00017db0: 2020 2020 2020 2072 6574 7572 6e0d 0a20         return.. 
+00017dc0: 2020 2020 2020 206d 795f 6167 656e 7420         my_agent 
+00017dd0: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
+00017de0: 732e 6869 6768 6c69 6768 7465 642e 6e61  s.highlighted.na
+00017df0: 6d65 0d0a 0d0a 2020 2020 2020 2020 636f  me....        co
+00017e00: 6d62 696e 6564 5f69 6e63 6f6d 6520 3d20  mbined_income = 
+00017e10: 207b 2253 7562 6a65 6374 223a 5b5d 2c22   {"Subject":[],"
+00017e20: 5368 6f72 7420 4e61 6d65 223a 205b 5d2c  Short Name": [],
+00017e30: 2251 7561 6e74 6974 7922 3a5b 5d2c 2022  "Quantity":[], "
+00017e40: 5479 7065 223a 5b5d 2c20 2252 616e 6b69  Type":[], "Ranki
+00017e50: 6e67 223a 5b5d 7d20 2320 7261 6e6b 696e  ng":[]} # rankin
+00017e60: 6720 7769 6c6c 2062 6520 7265 6d6f 7665  g will be remove
+00017e70: 6420 6c61 7465 720d 0a20 2020 2020 2020  d later..       
+00017e80: 2022 2222 0d0a 2020 2020 2020 2020 2247   """..        "G
+00017e90: 6169 6e73 223a 205b 5d2c 2022 4c6f 7373  ains": [], "Loss
+00017ea0: 6573 223a 205b 5d2c 2022 5265 7665 6e75  es": [], "Revenu
+00017eb0: 6573 223a 205b 5d2c 2022 5461 7865 7322  es": [], "Taxes"
+00017ec0: 3a20 5b5d 2c20 2245 7870 656e 7365 7322  : [], "Expenses"
+00017ed0: 3a20 5b5d 2c0d 0a20 2020 2020 2020 2020  : [],..         
+00017ee0: 224e 6f6e 7461 7861 626c 6520 4c6f 7373  "Nontaxable Loss
+00017ef0: 6573 223a 205b 5d2c 2022 4e6f 6e74 6178  es": [], "Nontax
+00017f00: 6162 6c65 2050 726f 6669 7473 223a 205b  able Profits": [
+00017f10: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00017f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f30: 2020 2022 4e6f 6e2d 4f70 6572 6174 696f     "Non-Operatio
+00017f40: 6e61 6c20 496e 636f 6d65 223a 205b 5d2c  nal Income": [],
+00017f50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 00017f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f70: 2020 2020 2020 2020 2020 7369 676e 203d            sign =
-00017f80: 2022 2d22 0d0a 2020 2020 2020 2020 2020   "-"..          
-00017f90: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00017fa0: 2061 6765 6e74 3220 3d3d 206d 795f 6167   agent2 == my_ag
-00017fb0: 656e 743a 0d0a 2020 2020 2020 2020 2020  ent:..          
-00017fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017fd0: 2020 7369 676e 203d 2022 2b22 0d0a 0d0a    sign = "+"....
-00017fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ff0: 2020 2020 2020 2020 7120 3d20 7379 6d70          q = symp
-00018000: 792e 6c61 7465 7828 7379 6d70 792e 7369  y.latex(sympy.si
-00018010: 6d70 6c69 6679 2873 6967 6e20 2b20 6669  mplify(sign + fi
-00018020: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
-00018030: 225d 292c 206d 6f64 653d 2270 6c61 696e  "]), mode="plain
-00018040: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00018050: 2020 2020 2020 2020 2020 2020 7375 626a              subj
-00018060: 6563 7420 3d20 6669 6c65 6461 7461 5b22  ect = filedata["
-00018070: 7375 626a 6563 7422 5d2e 7265 706c 6163  subject"].replac
-00018080: 6528 225f 222c 2022 2022 292e 6361 7069  e("_", " ").capi
-00018090: 7461 6c69 7a65 2829 0d0a 2020 2020 2020  talize()..      
-000180a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000180b0: 2020 7072 696e 7428 2220 2020 2020 2066    print("      f
-000180c0: 6f75 6e64 222c 712c 7375 626a 6563 7429  ound",q,subject)
-000180d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000180e0: 2020 2020 2020 2020 2020 7470 6520 3d20            tpe = 
-000180f0: 6d79 6469 6374 5b66 696c 6564 6174 615b  mydict[filedata[
-00018100: 7265 665f 696e 636f 6d65 5d5d 0d0a 2020  ref_income]]..  
-00018110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018120: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
-00018130: 6e63 6f6d 655b 2254 7970 6522 5d2e 6170  ncome["Type"].ap
-00018140: 7065 6e64 2874 7065 290d 0a20 2020 2020  pend(tpe)..     
-00018150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018160: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
-00018170: 6d65 5b22 5375 626a 6563 7422 5d2e 6170  me["Subject"].ap
-00018180: 7065 6e64 2873 7562 6a65 6374 290d 0a20  pend(subject).. 
-00018190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181a0: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-000181b0: 696e 636f 6d65 5b22 5175 616e 7469 7479  income["Quantity
-000181c0: 225d 2e61 7070 656e 6428 7374 7228 7129  "].append(str(q)
-000181d0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000181e0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-000181f0: 6e65 645f 696e 636f 6d65 5b22 5368 6f72  ned_income["Shor
-00018200: 7420 4e61 6d65 225d 2e61 7070 656e 6428  t Name"].append(
-00018210: 6669 6c65 6461 7461 5b22 7368 6f72 746e  filedata["shortn
-00018220: 616d 6522 5d2e 7374 7269 7028 2929 0d0a  ame"].strip())..
-00018230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018240: 2020 2020 2020 2020 2020 6966 2074 7065            if tpe
-00018250: 2069 6e20 5b22 4761 696e 7322 2c22 4c6f   in ["Gains","Lo
-00018260: 7373 6573 222c 2245 7870 656e 7365 7322  sses","Expenses"
-00018270: 2c22 5265 7665 6e75 6573 225d 3a0d 0a20  ,"Revenues"]:.. 
-00018280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018290: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-000182a0: 6e65 645f 696e 636f 6d65 5b22 5261 6e6b  ned_income["Rank
-000182b0: 696e 6722 5d2e 6170 7065 6e64 2830 290d  ing"].append(0).
-000182c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000182d0: 2020 2020 2020 2020 2065 6c69 6620 7470           elif tp
-000182e0: 6520 696e 205b 224e 6f6e 2d4f 7065 7261  e in ["Non-Opera
-000182f0: 7469 6f6e 616c 2049 6e63 6f6d 6522 2c22  tional Income","
-00018300: 496e 7465 7265 7374 2050 6179 6d65 6e74  Interest Payment
-00018310: 7322 5d3a 0d0a 2020 2020 2020 2020 2020  s"]:..          
-00018320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018330: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
-00018340: 655b 2252 616e 6b69 6e67 225d 2e61 7070  e["Ranking"].app
-00018350: 656e 6428 3129 0d0a 2020 2020 2020 2020  end(1)..        
+00017f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f80: 2022 496e 7465 7265 7374 2050 6179 6d65   "Interest Payme
+00017f90: 6e74 7322 3a20 5b5d 0d0a 2020 2020 2020  nts": []..      
+00017fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017fc0: 2020 2020 2020 2020 207d 0d0a 2020 2020           }..    
+00017fd0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00017fe0: 206b 203d 2030 0d0a 2020 2020 2020 2020   k = 0..        
+00017ff0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00018000: 2020 666f 7220 6669 6c65 6461 7461 2069    for filedata i
+00018010: 6e20 7365 6c66 2e65 6e74 7279 5f64 6174  n self.entry_dat
+00018020: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
+00018030: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
+00018040: 6564 6174 615b 2261 6765 6e74 3122 5d2e  edata["agent1"].
+00018050: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
+00018060: 2020 2020 2020 2020 2061 6765 6e74 3220           agent2 
+00018070: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
+00018080: 7432 225d 2e73 7472 6970 2829 0d0a 0d0a  t2"].strip()....
+00018090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000180a0: 7072 696e 7428 2261 6765 6e74 3122 2c61  print("agent1",a
+000180b0: 6765 6e74 312c 2261 6765 6e74 3222 2c61  gent1,"agent2",a
+000180c0: 6765 6e74 3229 0d0a 2020 2020 2020 2020  gent2)..        
+000180d0: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
+000180e0: 3120 3d3d 206d 795f 6167 656e 743a 0d0a  1 == my_agent:..
+000180f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018100: 2020 2020 7265 665f 6167 656e 7420 3d20      ref_agent = 
+00018110: 2261 6765 6e74 3122 0d0a 2020 2020 2020  "agent1"..      
+00018120: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00018130: 665f 696e 636f 6d65 203d 2022 696e 636f  f_income = "inco
+00018140: 6d65 3122 0d0a 0d0a 2020 2020 2020 2020  me1"....        
+00018150: 2020 2020 2020 2020 656c 6966 2061 6765          elif age
+00018160: 6e74 3220 3d3d 206d 795f 6167 656e 743a  nt2 == my_agent:
+00018170: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018180: 2020 2020 2020 7265 665f 6167 656e 7420        ref_agent 
+00018190: 3d20 2261 6765 6e74 3222 0d0a 2020 2020  = "agent2"..    
+000181a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000181b0: 7265 665f 696e 636f 6d65 203d 2022 696e  ref_income = "in
+000181c0: 636f 6d65 3222 0d0a 2020 2020 2020 2020  come2"..        
+000181d0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000181e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000181f0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
+00018200: 2020 2020 2020 2020 2020 2023 6173 7365             #asse
+00018210: 7473 3120 3d20 6669 6c65 6461 7461 5b22  ts1 = filedata["
+00018220: 6131 225d 202b 2022 5c6e 220d 0a20 2020  a1"] + "\n"..   
+00018230: 2020 2020 2020 2020 2020 2020 2023 6c69               #li
+00018240: 6162 7331 203d 2066 696c 6564 6174 615b  abs1 = filedata[
+00018250: 226c 3122 5d20 2b20 225c 6e22 202b 2066  "l1"] + "\n" + f
+00018260: 696c 6564 6174 615b 2265 3122 5d20 2b20  iledata["e1"] + 
+00018270: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
+00018280: 2020 2020 2020 2020 2361 7373 6574 7332          #assets2
+00018290: 203d 2066 696c 6564 6174 615b 2261 3222   = filedata["a2"
+000182a0: 5d20 2b20 225c 6e22 0d0a 2020 2020 2020  ] + "\n"..      
+000182b0: 2020 2020 2020 2020 2020 236c 6961 6273            #liabs
+000182c0: 3220 3d20 6669 6c65 6461 7461 5b22 6c32  2 = filedata["l2
+000182d0: 225d 202b 2022 5c6e 2220 2b20 6669 6c65  "] + "\n" + file
+000182e0: 6461 7461 5b22 6532 225d 202b 2022 5c6e  data["e2"] + "\n
+000182f0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+00018300: 2020 2020 2069 6620 2861 6765 6e74 3120       if (agent1 
+00018310: 3d3d 206d 795f 6167 656e 7420 6f72 2061  == my_agent or a
+00018320: 6765 6e74 3220 3d3d 206d 795f 6167 656e  gent2 == my_agen
+00018330: 7429 2061 6e64 2073 7472 2866 696c 6564  t) and str(filed
+00018340: 6174 615b 7265 665f 696e 636f 6d65 5d29  ata[ref_income])
+00018350: 2021 3d20 274e 6f6e 6527 3a0d 0a20 2020   != 'None':..   
 00018360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018370: 656c 6966 2074 7065 2069 6e20 5b22 5461  elif tpe in ["Ta
-00018380: 7865 7322 5d3a 0d0a 2020 2020 2020 2020  xes"]:..        
+00018370: 206d 7964 6963 7420 3d20 7b22 4761 696e   mydict = {"Gain
+00018380: 223a 2022 4761 696e 7322 2c0d 0a20 2020  ": "Gains",..   
 00018390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183a0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-000183b0: 6f6d 655b 2252 616e 6b69 6e67 225d 2e61  ome["Ranking"].a
-000183c0: 7070 656e 6428 3229 0d0a 2020 2020 2020  ppend(2)..      
-000183d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183e0: 2020 656c 6966 2074 7065 2069 6e20 5b22    elif tpe in ["
-000183f0: 4e6f 6e74 6178 6162 6c65 2050 726f 6669  Nontaxable Profi
-00018400: 7473 222c 2022 4e6f 6e74 6178 6162 6c65  ts", "Nontaxable
-00018410: 204c 6f73 7365 7322 5d3a 0d0a 2020 2020   Losses"]:..    
-00018420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018430: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00018440: 5f69 6e63 6f6d 655b 2252 616e 6b69 6e67  _income["Ranking
-00018450: 225d 2e61 7070 656e 6428 3329 0d0a 2020  "].append(3)..  
+000183a0: 2020 2020 2020 2020 2020 2022 4c6f 7373             "Loss
+000183b0: 223a 2022 4c6f 7373 6573 222c 0d0a 2020  ": "Losses",..  
+000183c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000183d0: 2020 2020 2020 2020 2020 2020 2245 7870              "Exp
+000183e0: 656e 7365 223a 2022 4578 7065 6e73 6573  ense": "Expenses
+000183f0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00018400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018410: 2020 2252 6576 656e 7565 223a 2022 5265    "Revenue": "Re
+00018420: 7665 6e75 6573 222c 0d0a 2020 2020 2020  venues",..      
+00018430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018440: 2020 2020 2020 2020 2254 6178 223a 2022          "Tax": "
+00018450: 5461 7865 7322 2c0d 0a20 2020 2020 2020  Taxes",..       
 00018460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018470: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00018480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018490: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
-000184a0: 645f 696e 636f 6d65 5b22 5261 6e6b 696e  d_income["Rankin
-000184b0: 6722 5d2e 6170 7065 6e64 2834 290d 0a0d  g"].append(4)...
-000184c0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000184d0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-000184e0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+00018470: 2020 2020 2020 2022 4e6f 6e74 6178 2e20         "Nontax. 
+00018480: 5072 6f66 6974 223a 2022 4e6f 6e74 6178  Profit": "Nontax
+00018490: 6162 6c65 2050 726f 6669 7473 222c 0d0a  able Profits",..
+000184a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000184b0: 2020 2020 2020 2020 2020 2020 2020 224e                "N
+000184c0: 6f6e 7461 782e 204c 6f73 7322 3a20 224e  ontax. Loss": "N
+000184d0: 6f6e 7461 7861 626c 6520 4c6f 7373 6573  ontaxable Losses
+000184e0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
 000184f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018500: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00018510: 6679 280d 0a20 2020 2020 2020 2020 2020  fy(..           
-00018520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018530: 2022 4361 6e6e 6f74 2068 616e 646c 6520   "Cannot handle 
-00018540: 7468 6520 7379 6d62 6f6c 6963 2065 7870  the symbolic exp
-00018550: 7265 7373 696f 6e20 2573 2220 2520 7369  ression %s" % si
-00018560: 676e 202b 2066 696c 6564 6174 615b 2271  gn + filedata["q
-00018570: 7561 6e74 6974 7922 5d2c 7469 746c 653d  uantity"],title=
-00018580: 2245 7272 6f72 2229 0d0a 0d0a 2020 2020  "Error")....    
-00018590: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-000185a0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-000185b0: 7469 6679 2874 6974 6c65 3d22 4572 726f  tify(title="Erro
-000185c0: 7222 2c20 6d65 7373 6167 653d 2241 6e20  r", message="An 
-000185d0: 6572 726f 7220 6f63 6375 7272 6564 2e22  error occurred."
-000185e0: 290d 0a0d 0a20 2020 2020 2020 2074 7279  )....        try
-000185f0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00018600: 6573 756c 7420 3d20 7064 2e44 6174 6146  esult = pd.DataF
-00018610: 7261 6d65 2863 6f6d 6269 6e65 645f 696e  rame(combined_in
-00018620: 636f 6d65 292e 7365 745f 696e 6465 7828  come).set_index(
-00018630: 2253 7562 6a65 6374 2229 0d0a 0d0a 0d0a  "Subject")......
-00018640: 2020 2020 2020 2020 2020 2020 2320 736f              # so
-00018650: 7274 2061 6674 6572 2072 616e 6b69 6e67  rt after ranking
-00018660: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00018670: 7375 6c74 203d 2072 6573 756c 742e 736f  sult = result.so
-00018680: 7274 5f76 616c 7565 7328 2752 616e 6b69  rt_values('Ranki
-00018690: 6e67 2729 0d0a 0d0a 2020 2020 2020 2020  ng')....        
-000186a0: 2020 2020 2320 7265 6d6f 7665 2072 616e      # remove ran
-000186b0: 6b69 6e67 0d0a 2020 2020 2020 2020 2020  king..          
-000186c0: 2020 7265 7375 6c74 203d 2072 6573 756c    result = resul
-000186d0: 742e 6472 6f70 2863 6f6c 756d 6e73 3d20  t.drop(columns= 
-000186e0: 2252 616e 6b69 6e67 2229 0d0a 0d0a 2020  "Ranking")....  
-000186f0: 2020 2020 2020 2020 2020 6d6f 6465 6c20            model 
-00018700: 3d20 5061 6e64 6173 4d6f 6465 6c28 7265  = PandasModel(re
-00018710: 7375 6c74 290d 0a0d 0a20 2020 2020 2020  sult)....       
-00018720: 2020 2020 2069 6620 6d79 5f61 6765 6e74       if my_agent
-00018730: 206e 6f74 2069 6e20 496e 636f 6d65 5669   not in IncomeVi
-00018740: 6577 6572 2e69 6e73 7461 6e63 6573 3a0d  ewer.instances:.
-00018750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018760: 206d 7976 6965 7720 3d20 496e 636f 6d65   myview = Income
-00018770: 5669 6577 6572 2873 656c 662c 6e61 6d65  Viewer(self,name
-00018780: 3d6d 795f 6167 656e 7429 0d0a 2020 2020  =my_agent)..    
-00018790: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000187a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000187b0: 7976 6965 7720 3d20 496e 636f 6d65 5669  yview = IncomeVi
-000187c0: 6577 6572 2e69 6e73 7461 6e63 6573 5b6d  ewer.instances[m
-000187d0: 795f 6167 656e 745d 0d0a 2020 2020 2020  y_agent]..      
-000187e0: 2020 2020 2020 2320 6d76 6965 772e 7365        # mview.se
-000187f0: 7447 656f 6d65 7472 7928 3130 302c 3530  tGeometry(100,50
-00018800: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-00018810: 6d79 7669 6577 2e73 6574 5f6d 6f64 656c  myview.set_model
-00018820: 286d 6f64 656c 290d 0a20 2020 2020 2020  (model)..       
-00018830: 2020 2020 2023 206d 7669 6577 2e77 6562       # mview.web
-00018840: 5669 6577 2e73 6574 4874 6d6c 2864 665f  View.setHtml(df_
-00018850: 6874 6d6c 290d 0a0d 0a20 2020 2020 2020  html)....       
-00018860: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-00018870: 2e74 6573 745f 6d6f 6465 3a0d 0a20 2020  .test_mode:..   
-00018880: 2020 2020 2020 2020 2020 2020 206d 7976               myv
-00018890: 6965 772e 7368 6f77 2829 0d0a 0d0a 2020  iew.show()....  
-000188a0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-000188b0: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-000188c0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-000188d0: 6f74 6966 7928 7469 746c 653d 2245 7272  otify(title="Err
-000188e0: 6f72 222c 206d 6573 7361 6765 3d22 416e  or", message="An
-000188f0: 2065 7272 6f72 206f 6363 7572 7265 642e   error occurred.
-00018900: 2220 2b20 7374 7228 6529 290d 0a0d 0a0d  " + str(e)).....
-00018910: 0a20 2020 2064 6566 2067 656e 5f63 6173  .    def gen_cas
-00018920: 6866 6c6f 775f 7369 6e67 6c65 2873 656c  hflow_single(sel
-00018930: 6629 3a0d 0a20 2020 2020 2020 2069 6620  f):..        if 
-00018940: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-00018950: 6869 6768 6c69 6768 7465 6420 6973 204e  highlighted is N
-00018960: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00018970: 2020 7365 6c66 2e6e 6f74 6966 7928 7469    self.notify(ti
-00018980: 746c 653d 224e 6f20 6167 656e 7420 7365  tle="No agent se
-00018990: 6c65 6374 6564 222c 206d 6573 7361 6765  lected", message
-000189a0: 3d22 4e6f 2061 6765 6e74 2073 656c 6563  ="No agent selec
-000189b0: 7465 642e 2050 6c65 6173 6520 7365 6c65  ted. Please sele
-000189c0: 6374 206f 6e65 2066 6972 7374 2e22 290d  ct one first.").
-000189d0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000189e0: 7572 6e0d 0a20 2020 2020 2020 2069 6620  urn..        if 
-000189f0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-00018a00: 6869 6768 6c69 6768 7465 642e 6973 6865  highlighted.ishe
-00018a10: 6c70 6572 3a0d 0a20 2020 2020 2020 2020  lper:..         
-00018a20: 2020 2073 656c 662e 6e6f 7469 6679 2874     self.notify(t
-00018a30: 6974 6c65 3d22 4e6f 2061 6765 6e74 2073  itle="No agent s
-00018a40: 656c 6563 7465 6422 2c20 6d65 7373 6167  elected", messag
-00018a50: 653d 224e 6f20 7661 6c69 6420 626f 7820  e="No valid box 
-00018a60: 7365 6c65 6374 6564 2e20 506c 6561 7365  selected. Please
-00018a70: 2073 656c 6563 7420 616e 2061 6765 6e74   select an agent
-00018a80: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
-00018a90: 2072 6574 7572 6e0d 0a20 2020 2020 2020   return..       
-00018aa0: 206d 795f 6167 656e 7420 3d20 7365 6c66   my_agent = self
-00018ab0: 2e64 7261 7763 616e 7661 732e 6869 6768  .drawcanvas.high
-00018ac0: 6c69 6768 7465 642e 6e61 6d65 0d0a 0d0a  lighted.name....
-00018ad0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00018ae0: 5f69 6e63 6f6d 6520 3d20 207b 2253 7562  _income =  {"Sub
-00018af0: 6a65 6374 223a 5b5d 2c22 5368 6f72 7420  ject":[],"Short 
-00018b00: 4e61 6d65 223a 205b 5d2c 2251 7561 6e74  Name": [],"Quant
-00018b10: 6974 7922 3a5b 5d2c 2022 5479 7065 223a  ity":[], "Type":
-00018b20: 5b5d 2c20 2252 616e 6b69 6e67 223a 5b5d  [], "Ranking":[]
-00018b30: 7d20 2320 7261 6e6b 696e 6720 7769 6c6c  } # ranking will
-00018b40: 2062 6520 7265 6d6f 7665 6420 6c61 7465   be removed late
-00018b50: 720d 0a20 2020 2020 2020 2022 2222 0d0a  r..        """..
-00018b60: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00018b70: 2020 2020 206b 203d 2030 0d0a 2020 2020       k = 0..    
-00018b80: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00018b90: 2020 2020 2020 666f 7220 6669 6c65 6461        for fileda
-00018ba0: 7461 2069 6e20 7365 6c66 2e65 6e74 7279  ta in self.entry
-00018bb0: 5f64 6174 613a 0d0a 2020 2020 2020 2020  _data:..        
-00018bc0: 2020 2020 2020 2020 6167 656e 7431 203d          agent1 =
-00018bd0: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
-00018be0: 3122 5d2e 7374 7269 7028 290d 0a20 2020  1"].strip()..   
-00018bf0: 2020 2020 2020 2020 2020 2020 2061 6765               age
-00018c00: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
-00018c10: 6167 656e 7432 225d 2e73 7472 6970 2829  agent2"].strip()
-00018c20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00018c30: 2020 2020 7072 696e 7428 2261 6765 6e74      print("agent
-00018c40: 3122 2c61 6765 6e74 312c 2261 6765 6e74  1",agent1,"agent
-00018c50: 3222 2c61 6765 6e74 3229 0d0a 2020 2020  2",agent2)..    
-00018c60: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00018c70: 6765 6e74 3120 3d3d 206d 795f 6167 656e  gent1 == my_agen
-00018c80: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00018c90: 2020 2020 2020 2020 7265 665f 6167 656e          ref_agen
-00018ca0: 7420 3d20 2261 6765 6e74 3122 0d0a 2020  t = "agent1"..  
-00018cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018cc0: 2020 7265 665f 696e 636f 6d65 203d 2022    ref_income = "
-00018cd0: 6361 7368 666c 6f77 3122 0d0a 0d0a 2020  cashflow1"....  
-00018ce0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00018cf0: 6966 2061 6765 6e74 3220 3d3d 206d 795f  if agent2 == my_
-00018d00: 6167 656e 743a 0d0a 2020 2020 2020 2020  agent:..        
-00018d10: 2020 2020 2020 2020 2020 2020 7265 665f              ref_
-00018d20: 6167 656e 7420 3d20 2261 6765 6e74 3222  agent = "agent2"
-00018d30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018d40: 2020 2020 2020 7265 665f 696e 636f 6d65        ref_income
-00018d50: 203d 2022 6361 7368 666c 6f77 3222 0d0a   = "cashflow2"..
-00018d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d70: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00018d80: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-00018d90: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00018da0: 2020 2023 6173 7365 7473 3120 3d20 6669     #assets1 = fi
-00018db0: 6c65 6461 7461 5b22 6131 225d 202b 2022  ledata["a1"] + "
-00018dc0: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-00018dd0: 2020 2020 2023 6c69 6162 7331 203d 2066       #liabs1 = f
-00018de0: 696c 6564 6174 615b 226c 3122 5d20 2b20  iledata["l1"] + 
-00018df0: 225c 6e22 202b 2066 696c 6564 6174 615b  "\n" + filedata[
-00018e00: 2265 3122 5d20 2b20 225c 6e22 0d0a 0d0a  "e1"] + "\n"....
-00018e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e20: 2361 7373 6574 7332 203d 2066 696c 6564  #assets2 = filed
-00018e30: 6174 615b 2261 3222 5d20 2b20 225c 6e22  ata["a2"] + "\n"
-00018e40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018e50: 2020 236c 6961 6273 3220 3d20 6669 6c65    #liabs2 = file
-00018e60: 6461 7461 5b22 6c32 225d 202b 2022 5c6e  data["l2"] + "\n
-00018e70: 2220 2b20 6669 6c65 6461 7461 5b22 6532  " + filedata["e2
-00018e80: 225d 202b 2022 5c6e 220d 0a0d 0a20 2020  "] + "\n"....   
-00018e90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00018ea0: 2861 6765 6e74 3120 3d3d 206d 795f 6167  (agent1 == my_ag
-00018eb0: 656e 7420 6f72 2061 6765 6e74 3220 3d3d  ent or agent2 ==
-00018ec0: 206d 795f 6167 656e 7429 2061 6e64 2073   my_agent) and s
-00018ed0: 7472 2866 696c 6564 6174 615b 7265 665f  tr(filedata[ref_
-00018ee0: 696e 636f 6d65 5d29 2021 3d20 274e 6f6e  income]) != 'Non
-00018ef0: 6527 3a0d 0a20 2020 2020 2020 2020 2020  e':..           
-00018f00: 2020 2020 2020 2020 206d 7964 6963 7420           mydict 
-00018f10: 3d20 7b22 4761 696e 223a 2022 4761 696e  = {"Gain": "Gain
-00018f20: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
-00018f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f40: 2020 2022 4c6f 7373 223a 2022 4c6f 7373     "Loss": "Loss
-00018f50: 6573 222c 0d0a 2020 2020 2020 2020 2020  es",..          
-00018f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f70: 2020 2020 2245 7870 656e 7365 223a 2022      "Expense": "
-00018f80: 4578 7065 6e73 6573 222c 0d0a 2020 2020  Expenses",..    
-00018f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018fa0: 2020 2020 2020 2020 2020 2252 6576 656e            "Reven
-00018fb0: 7565 223a 2022 5265 7665 6e75 6573 222c  ue": "Revenues",
-00018fc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018fe0: 2254 6178 223a 2022 5461 7865 7322 2c0d  "Tax": "Taxes",.
-00018ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019000: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019010: 4e6f 6e74 6178 2e20 5072 6f66 6974 223a  Nontax. Profit":
-00019020: 2022 4e6f 6e74 6178 6162 6c65 2050 726f   "Nontaxable Pro
-00019030: 6669 7473 222c 0d0a 2020 2020 2020 2020  fits",..        
-00019040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019050: 2020 2020 2020 224e 6f6e 7461 782e 204c        "Nontax. L
-00019060: 6f73 7322 3a20 224e 6f6e 7461 7861 626c  oss": "Nontaxabl
-00019070: 6520 4c6f 7373 6573 222c 0d0a 2020 2020  e Losses",..    
-00019080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019090: 2020 2020 2020 2020 2020 224e 6f6e 2d4f            "Non-O
-000190a0: 702e 2049 6e63 6f6d 6522 3a20 224e 6f6e  p. Income": "Non
-000190b0: 2d4f 7065 7261 7469 6f6e 616c 2049 6e63  -Operational Inc
-000190c0: 6f6d 6522 2c0d 0a20 2020 2020 2020 2020  ome",..         
-000190d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000190e0: 2020 2020 2022 496e 7465 7265 7374 223a       "Interest":
-000190f0: 2022 496e 7465 7265 7374 2050 6179 6d65   "Interest Payme
-00019100: 6e74 7322 7d0d 0a0d 0a20 2020 2020 2020  nts"}....       
-00019110: 2020 2020 2020 2020 2020 2020 2074 7279               try
-00019120: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00019130: 2020 2020 2020 2020 2020 2069 6620 6167             if ag
-00019140: 656e 7431 203d 3d20 6d79 5f61 6765 6e74  ent1 == my_agent
-00019150: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00019160: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00019170: 6967 6e20 3d20 222d 220d 0a20 2020 2020  ign = "-"..     
-00019180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019190: 2020 2069 6620 6167 656e 7432 203d 3d20     if agent2 == 
-000191a0: 6d79 5f61 6765 6e74 3a0d 0a20 2020 2020  my_agent:..     
-000191b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000191c0: 2020 2020 2020 2073 6967 6e20 3d20 222b         sign = "+
-000191d0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-000191e0: 2020 2020 2020 2020 2020 2020 2071 203d               q =
-000191f0: 2073 796d 7079 2e6c 6174 6578 2873 796d   sympy.latex(sym
-00019200: 7079 2e73 696d 706c 6966 7928 7369 676e  py.simplify(sign
-00019210: 202b 2066 696c 6564 6174 615b 2271 7561   + filedata["qua
-00019220: 6e74 6974 7922 5d29 2c20 6d6f 6465 3d22  ntity"]), mode="
-00019230: 706c 6169 6e22 290d 0a20 2020 2020 2020  plain")..       
-00019240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019250: 2073 7562 6a65 6374 203d 2066 696c 6564   subject = filed
-00019260: 6174 615b 2273 7562 6a65 6374 225d 2e72  ata["subject"].r
-00019270: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
-00019280: 2e63 6170 6974 616c 697a 6528 290d 0a20  .capitalize().. 
-00019290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192a0: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
-000192b0: 2020 2020 666f 756e 6422 2c71 2c73 7562      found",q,sub
-000192c0: 6a65 6374 290d 0a20 2020 2020 2020 2020  ject)..         
-000192d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000192e0: 7065 203d 2066 696c 6564 6174 615b 7265  pe = filedata[re
-000192f0: 665f 696e 636f 6d65 5d0d 0a20 2020 2020  f_income]..     
-00019300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019310: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
-00019320: 6d65 5b22 5479 7065 225d 2e61 7070 656e  me["Type"].appen
-00019330: 6428 7470 6529 0d0a 2020 2020 2020 2020  d(tpe)..        
-00019340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019350: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
-00019360: 2253 7562 6a65 6374 225d 2e61 7070 656e  "Subject"].appen
-00019370: 6428 7375 626a 6563 7429 0d0a 2020 2020  d(subject)..    
-00019380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019390: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-000193a0: 6f6d 655b 2251 7561 6e74 6974 7922 5d2e  ome["Quantity"].
-000193b0: 6170 7065 6e64 2873 7472 2871 2929 0d0a  append(str(q))..
-000193c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000193d0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-000193e0: 5f69 6e63 6f6d 655b 2253 686f 7274 204e  _income["Short N
-000193f0: 616d 6522 5d2e 6170 7065 6e64 2866 696c  ame"].append(fil
-00019400: 6564 6174 615b 2273 686f 7274 6e61 6d65  edata["shortname
-00019410: 225d 2e73 7472 6970 2829 290d 0a20 2020  "].strip())..   
-00019420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019430: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
-00019440: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
-00019450: 6170 7065 6e64 2830 290d 0a20 2020 2020  append(0)..     
-00019460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019470: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00019480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019490: 6966 2074 7065 2069 6e20 5b22 4761 696e  if tpe in ["Gain
-000194a0: 7322 2c22 4c6f 7373 6573 222c 2245 7870  s","Losses","Exp
-000194b0: 656e 7365 7322 2c22 5265 7665 6e75 6573  enses","Revenues
-000194c0: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
-000194d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000194e0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
-000194f0: 5b22 5261 6e6b 696e 6722 5d2e 6170 7065  ["Ranking"].appe
-00019500: 6e64 2830 290d 0a20 2020 2020 2020 2020  nd(0)..         
-00019510: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00019520: 6c69 6620 7470 6520 696e 205b 224e 6f6e  lif tpe in ["Non
-00019530: 2d4f 7065 7261 7469 6f6e 616c 2049 6e63  -Operational Inc
-00019540: 6f6d 6522 2c22 496e 7465 7265 7374 2050  ome","Interest P
-00019550: 6179 6d65 6e74 7322 5d3a 0d0a 2020 2020  ayments"]:..    
-00019560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019570: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00019580: 5f69 6e63 6f6d 655b 2252 616e 6b69 6e67  _income["Ranking
-00019590: 225d 2e61 7070 656e 6428 3129 0d0a 2020  "].append(1)..  
-000195a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000195b0: 2020 2020 2020 656c 6966 2074 7065 2069        elif tpe i
-000195c0: 6e20 5b22 5461 7865 7322 5d3a 0d0a 2020  n ["Taxes"]:..  
-000195d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000195e0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
-000195f0: 6564 5f69 6e63 6f6d 655b 2252 616e 6b69  ed_income["Ranki
-00019600: 6e67 225d 2e61 7070 656e 6428 3229 0d0a  ng"].append(2)..
-00019610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019620: 2020 2020 2020 2020 656c 6966 2074 7065          elif tpe
-00019630: 2069 6e20 5b22 4e6f 6e74 6178 6162 6c65   in ["Nontaxable
-00019640: 2050 726f 6669 7473 222c 2022 4e6f 6e74   Profits", "Nont
-00019650: 6178 6162 6c65 204c 6f73 7365 7322 5d3a  axable Losses"]:
-00019660: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019670: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00019680: 6d62 696e 6564 5f69 6e63 6f6d 655b 2252  mbined_income["R
-00019690: 616e 6b69 6e67 225d 2e61 7070 656e 6428  anking"].append(
-000196a0: 3329 0d0a 2020 2020 2020 2020 2020 2020  3)..            
-000196b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000196c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000196d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000196e0: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
-000196f0: 5261 6e6b 696e 6722 5d2e 6170 7065 6e64  Ranking"].append
-00019700: 2834 290d 0a20 2020 2020 2020 2020 2020  (4)..           
-00019710: 2020 2020 2020 2020 2020 2020 2022 2222               """
-00019720: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00019730: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00019740: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
-00019750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019760: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00019770: 6966 7928 0d0a 2020 2020 2020 2020 2020  ify(..          
+00018500: 2020 224e 6f6e 2d4f 702e 2049 6e63 6f6d    "Non-Op. Incom
+00018510: 6522 3a20 224e 6f6e 2d4f 7065 7261 7469  e": "Non-Operati
+00018520: 6f6e 616c 2049 6e63 6f6d 6522 2c0d 0a20  onal Income",.. 
+00018530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018540: 2020 2020 2020 2020 2020 2020 2022 496e               "In
+00018550: 7465 7265 7374 223a 2022 496e 7465 7265  terest": "Intere
+00018560: 7374 2050 6179 6d65 6e74 7322 7d0d 0a0d  st Payments"}...
+00018570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018580: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00018590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185a0: 2020 2069 6620 6167 656e 7431 203d 3d20     if agent1 == 
+000185b0: 6d79 5f61 6765 6e74 3a0d 0a20 2020 2020  my_agent:..     
+000185c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185d0: 2020 2020 2020 2073 6967 6e20 3d20 222d         sign = "-
+000185e0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+000185f0: 2020 2020 2020 2020 2020 2069 6620 6167             if ag
+00018600: 656e 7432 203d 3d20 6d79 5f61 6765 6e74  ent2 == my_agent
+00018610: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00018620: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00018630: 6967 6e20 3d20 222b 220d 0a0d 0a20 2020  ign = "+"....   
+00018640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018650: 2020 2020 2071 203d 2073 796d 7079 2e6c       q = sympy.l
+00018660: 6174 6578 2873 796d 7079 2e73 696d 706c  atex(sympy.simpl
+00018670: 6966 7928 7369 676e 202b 2066 696c 6564  ify(sign + filed
+00018680: 6174 615b 2271 7561 6e74 6974 7922 5d29  ata["quantity"])
+00018690: 2c20 6d6f 6465 3d22 706c 6169 6e22 290d  , mode="plain").
+000186a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000186b0: 2020 2020 2020 2020 2073 7562 6a65 6374           subject
+000186c0: 203d 2066 696c 6564 6174 615b 2273 7562   = filedata["sub
+000186d0: 6a65 6374 225d 2e72 6570 6c61 6365 2822  ject"].replace("
+000186e0: 5f22 2c20 2220 2229 2e63 6170 6974 616c  _", " ").capital
+000186f0: 697a 6528 290d 0a20 2020 2020 2020 2020  ize()..         
+00018700: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00018710: 7269 6e74 2822 2020 2020 2020 666f 756e  rint("      foun
+00018720: 6422 2c71 2c73 7562 6a65 6374 290d 0a20  d",q,subject).. 
+00018730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018740: 2020 2020 2020 2074 7065 203d 206d 7964         tpe = myd
+00018750: 6963 745b 6669 6c65 6461 7461 5b72 6566  ict[filedata[ref
+00018760: 5f69 6e63 6f6d 655d 5d0d 0a20 2020 2020  _income]]..     
+00018770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018780: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
+00018790: 6d65 5b22 5479 7065 225d 2e61 7070 656e  me["Type"].appen
+000187a0: 6428 7470 6529 0d0a 2020 2020 2020 2020  d(tpe)..        
+000187b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187c0: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
+000187d0: 2253 7562 6a65 6374 225d 2e61 7070 656e  "Subject"].appen
+000187e0: 6428 7375 626a 6563 7429 0d0a 2020 2020  d(subject)..    
+000187f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018800: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
+00018810: 6f6d 655b 2251 7561 6e74 6974 7922 5d2e  ome["Quantity"].
+00018820: 6170 7065 6e64 2873 7472 2871 2929 0d0a  append(str(q))..
+00018830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018840: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00018850: 5f69 6e63 6f6d 655b 2253 686f 7274 204e  _income["Short N
+00018860: 616d 6522 5d2e 6170 7065 6e64 2866 696c  ame"].append(fil
+00018870: 6564 6174 615b 2273 686f 7274 6e61 6d65  edata["shortname
+00018880: 225d 2e73 7472 6970 2829 290d 0a0d 0a20  "].strip()).... 
+00018890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000188a0: 2020 2020 2020 2069 6620 7470 6520 696e         if tpe in
+000188b0: 205b 2247 6169 6e73 222c 224c 6f73 7365   ["Gains","Losse
+000188c0: 7322 2c22 4578 7065 6e73 6573 222c 2252  s","Expenses","R
+000188d0: 6576 656e 7565 7322 5d3a 0d0a 2020 2020  evenues"]:..    
+000188e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000188f0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00018900: 5f69 6e63 6f6d 655b 2252 616e 6b69 6e67  _income["Ranking
+00018910: 225d 2e61 7070 656e 6428 3029 0d0a 2020  "].append(0)..  
+00018920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018930: 2020 2020 2020 656c 6966 2074 7065 2069        elif tpe i
+00018940: 6e20 5b22 4e6f 6e2d 4f70 6572 6174 696f  n ["Non-Operatio
+00018950: 6e61 6c20 496e 636f 6d65 222c 2249 6e74  nal Income","Int
+00018960: 6572 6573 7420 5061 796d 656e 7473 225d  erest Payments"]
+00018970: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00018980: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00018990: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
+000189a0: 5261 6e6b 696e 6722 5d2e 6170 7065 6e64  Ranking"].append
+000189b0: 2831 290d 0a20 2020 2020 2020 2020 2020  (1)..           
+000189c0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+000189d0: 6620 7470 6520 696e 205b 2254 6178 6573  f tpe in ["Taxes
+000189e0: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
+000189f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a00: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
+00018a10: 5b22 5261 6e6b 696e 6722 5d2e 6170 7065  ["Ranking"].appe
+00018a20: 6e64 2832 290d 0a20 2020 2020 2020 2020  nd(2)..         
+00018a30: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00018a40: 6c69 6620 7470 6520 696e 205b 224e 6f6e  lif tpe in ["Non
+00018a50: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
+00018a60: 2c20 224e 6f6e 7461 7861 626c 6520 4c6f  , "Nontaxable Lo
+00018a70: 7373 6573 225d 3a0d 0a20 2020 2020 2020  sses"]:..       
+00018a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a90: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00018aa0: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
+00018ab0: 6170 7065 6e64 2833 290d 0a20 2020 2020  append(3)..     
+00018ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ad0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00018ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018af0: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
+00018b00: 6e63 6f6d 655b 2252 616e 6b69 6e67 225d  ncome["Ranking"]
+00018b10: 2e61 7070 656e 6428 3429 0d0a 0d0a 0d0a  .append(4)......
+00018b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b30: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00018b40: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+00018b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b60: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+00018b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018b80: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+00018b90: 616e 6e6f 7420 6861 6e64 6c65 2074 6865  annot handle the
+00018ba0: 2073 796d 626f 6c69 6320 6578 7072 6573   symbolic expres
+00018bb0: 7369 6f6e 2025 7322 2025 2073 6967 6e20  sion %s" % sign 
+00018bc0: 2b20 6669 6c65 6461 7461 5b22 7175 616e  + filedata["quan
+00018bd0: 7469 7479 225d 2c74 6974 6c65 3d22 4572  tity"],title="Er
+00018be0: 726f 7222 290d 0a0d 0a20 2020 2020 2020  ror")....       
+00018bf0: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+00018c00: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+00018c10: 7928 7469 746c 653d 2245 7272 6f72 222c  y(title="Error",
+00018c20: 206d 6573 7361 6765 3d22 416e 2065 7272   message="An err
+00018c30: 6f72 206f 6363 7572 7265 642e 2229 0d0a  or occurred.")..
+00018c40: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+00018c50: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00018c60: 6c74 203d 2070 642e 4461 7461 4672 616d  lt = pd.DataFram
+00018c70: 6528 636f 6d62 696e 6564 5f69 6e63 6f6d  e(combined_incom
+00018c80: 6529 2e73 6574 5f69 6e64 6578 2822 5375  e).set_index("Su
+00018c90: 626a 6563 7422 290d 0a0d 0a0d 0a20 2020  bject")......   
+00018ca0: 2020 2020 2020 2020 2023 2073 6f72 7420           # sort 
+00018cb0: 6166 7465 7220 7261 6e6b 696e 670d 0a20  after ranking.. 
+00018cc0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00018cd0: 7420 3d20 7265 7375 6c74 2e73 6f72 745f  t = result.sort_
+00018ce0: 7661 6c75 6573 2827 5261 6e6b 696e 6727  values('Ranking'
+00018cf0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00018d00: 2023 2072 656d 6f76 6520 7261 6e6b 696e   # remove rankin
+00018d10: 670d 0a20 2020 2020 2020 2020 2020 2072  g..            r
+00018d20: 6573 756c 7420 3d20 7265 7375 6c74 2e64  esult = result.d
+00018d30: 726f 7028 636f 6c75 6d6e 733d 2022 5261  rop(columns= "Ra
+00018d40: 6e6b 696e 6722 290d 0a0d 0a20 2020 2020  nking")....     
+00018d50: 2020 2020 2020 206d 6f64 656c 203d 2050         model = P
+00018d60: 616e 6461 734d 6f64 656c 2872 6573 756c  andasModel(resul
+00018d70: 7429 0d0a 0d0a 2020 2020 2020 2020 2020  t)....          
+00018d80: 2020 6966 206d 795f 6167 656e 7420 6e6f    if my_agent no
+00018d90: 7420 696e 2049 6e63 6f6d 6556 6965 7765  t in IncomeViewe
+00018da0: 722e 696e 7374 616e 6365 733a 0d0a 2020  r.instances:..  
+00018db0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+00018dc0: 7669 6577 203d 2049 6e63 6f6d 6556 6965  view = IncomeVie
+00018dd0: 7765 7228 7365 6c66 2c6e 616d 653d 6d79  wer(self,name=my
+00018de0: 5f61 6765 6e74 290d 0a20 2020 2020 2020  _agent)..       
+00018df0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00018e00: 2020 2020 2020 2020 2020 2020 6d79 7669              myvi
+00018e10: 6577 203d 2049 6e63 6f6d 6556 6965 7765  ew = IncomeViewe
+00018e20: 722e 696e 7374 616e 6365 735b 6d79 5f61  r.instances[my_a
+00018e30: 6765 6e74 5d0d 0a20 2020 2020 2020 2020  gent]..         
+00018e40: 2020 2023 206d 7669 6577 2e73 6574 4765     # mview.setGe
+00018e50: 6f6d 6574 7279 2831 3030 2c35 3030 290d  ometry(100,500).
+00018e60: 0a20 2020 2020 2020 2020 2020 206d 7976  .            myv
+00018e70: 6965 772e 7365 745f 6d6f 6465 6c28 6d6f  iew.set_model(mo
+00018e80: 6465 6c29 0d0a 2020 2020 2020 2020 2020  del)..          
+00018e90: 2020 2320 6d76 6965 772e 7765 6256 6965    # mview.webVie
+00018ea0: 772e 7365 7448 746d 6c28 6466 5f68 746d  w.setHtml(df_htm
+00018eb0: 6c29 0d0a 0d0a 2020 2020 2020 2020 2020  l)....          
+00018ec0: 2020 6966 206e 6f74 2073 656c 662e 7465    if not self.te
+00018ed0: 7374 5f6d 6f64 653a 0d0a 2020 2020 2020  st_mode:..      
+00018ee0: 2020 2020 2020 2020 2020 6d79 7669 6577            myview
+00018ef0: 2e73 686f 7728 290d 0a0d 0a20 2020 2020  .show()....     
+00018f00: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00018f10: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+00018f20: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+00018f30: 6679 2874 6974 6c65 3d22 4572 726f 7222  fy(title="Error"
+00018f40: 2c20 6d65 7373 6167 653d 2241 6e20 6572  , message="An er
+00018f50: 726f 7220 6f63 6375 7272 6564 2e22 202b  ror occurred." +
+00018f60: 2073 7472 2865 2929 0d0a 0d0a 0d0a 2020   str(e))......  
+00018f70: 2020 6465 6620 6765 6e5f 6361 7368 666c    def gen_cashfl
+00018f80: 6f77 5f73 696e 676c 6528 7365 6c66 293a  ow_single(self):
+00018f90: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+00018fa0: 662e 6472 6177 6361 6e76 6173 2e68 6967  f.drawcanvas.hig
+00018fb0: 686c 6967 6874 6564 2069 7320 4e6f 6e65  hlighted is None
+00018fc0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00018fd0: 656c 662e 6e6f 7469 6679 2874 6974 6c65  elf.notify(title
+00018fe0: 3d22 4e6f 2061 6765 6e74 2073 656c 6563  ="No agent selec
+00018ff0: 7465 6422 2c20 6d65 7373 6167 653d 224e  ted", message="N
+00019000: 6f20 6167 656e 7420 7365 6c65 6374 6564  o agent selected
+00019010: 2e20 506c 6561 7365 2073 656c 6563 7420  . Please select 
+00019020: 6f6e 6520 6669 7273 742e 2229 0d0a 2020  one first.")..  
+00019030: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00019040: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+00019050: 662e 6472 6177 6361 6e76 6173 2e68 6967  f.drawcanvas.hig
+00019060: 686c 6967 6874 6564 2e69 7368 656c 7065  hlighted.ishelpe
+00019070: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+00019080: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
+00019090: 653d 224e 6f20 6167 656e 7420 7365 6c65  e="No agent sele
+000190a0: 6374 6564 222c 206d 6573 7361 6765 3d22  cted", message="
+000190b0: 4e6f 2076 616c 6964 2062 6f78 2073 656c  No valid box sel
+000190c0: 6563 7465 642e 2050 6c65 6173 6520 7365  ected. Please se
+000190d0: 6c65 6374 2061 6e20 6167 656e 742e 2229  lect an agent.")
+000190e0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000190f0: 7475 726e 0d0a 2020 2020 2020 2020 6d79  turn..        my
+00019100: 5f61 6765 6e74 203d 2073 656c 662e 6472  _agent = self.dr
+00019110: 6177 6361 6e76 6173 2e68 6967 686c 6967  awcanvas.highlig
+00019120: 6874 6564 2e6e 616d 650d 0a0d 0a20 2020  hted.name....   
+00019130: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00019140: 636f 6d65 203d 2020 7b22 5375 626a 6563  come =  {"Subjec
+00019150: 7422 3a5b 5d2c 2253 686f 7274 204e 616d  t":[],"Short Nam
+00019160: 6522 3a20 5b5d 2c22 5175 616e 7469 7479  e": [],"Quantity
+00019170: 223a 5b5d 2c20 2254 7970 6522 3a5b 5d2c  ":[], "Type":[],
+00019180: 2022 5261 6e6b 696e 6722 3a5b 5d7d 2023   "Ranking":[]} #
+00019190: 2072 616e 6b69 6e67 2077 696c 6c20 6265   ranking will be
+000191a0: 2072 656d 6f76 6564 206c 6174 6572 0d0a   removed later..
+000191b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000191c0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+000191d0: 2020 6b20 3d20 300d 0a20 2020 2020 2020    k = 0..       
+000191e0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+000191f0: 2020 2066 6f72 2066 696c 6564 6174 6120     for filedata 
+00019200: 696e 2073 656c 662e 656e 7472 795f 6461  in self.entry_da
+00019210: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
+00019220: 2020 2020 2061 6765 6e74 3120 3d20 6669       agent1 = fi
+00019230: 6c65 6461 7461 5b22 6167 656e 7431 225d  ledata["agent1"]
+00019240: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
+00019250: 2020 2020 2020 2020 2020 6167 656e 7432            agent2
+00019260: 203d 2066 696c 6564 6174 615b 2261 6765   = filedata["age
+00019270: 6e74 3222 5d2e 7374 7269 7028 290d 0a0d  nt2"].strip()...
+00019280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019290: 2070 7269 6e74 2822 6167 656e 7431 222c   print("agent1",
+000192a0: 6167 656e 7431 2c22 6167 656e 7432 222c  agent1,"agent2",
+000192b0: 6167 656e 7432 290d 0a20 2020 2020 2020  agent2)..       
+000192c0: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
+000192d0: 7431 203d 3d20 6d79 5f61 6765 6e74 3a0d  t1 == my_agent:.
+000192e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000192f0: 2020 2020 2072 6566 5f61 6765 6e74 203d       ref_agent =
+00019300: 2022 6167 656e 7431 220d 0a20 2020 2020   "agent1"..     
+00019310: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00019320: 6566 5f69 6e63 6f6d 6520 3d20 2263 6173  ef_income = "cas
+00019330: 6866 6c6f 7731 220d 0a0d 0a20 2020 2020  hflow1"....     
+00019340: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00019350: 6167 656e 7432 203d 3d20 6d79 5f61 6765  agent2 == my_age
+00019360: 6e74 3a0d 0a20 2020 2020 2020 2020 2020  nt:..           
+00019370: 2020 2020 2020 2020 2072 6566 5f61 6765           ref_age
+00019380: 6e74 203d 2022 6167 656e 7432 220d 0a20  nt = "agent2".. 
+00019390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000193a0: 2020 2072 6566 5f69 6e63 6f6d 6520 3d20     ref_income = 
+000193b0: 2263 6173 6866 6c6f 7732 220d 0a20 2020  "cashflow2"..   
+000193c0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000193d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000193e0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+000193f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019400: 2361 7373 6574 7331 203d 2066 696c 6564  #assets1 = filed
+00019410: 6174 615b 2261 3122 5d20 2b20 225c 6e22  ata["a1"] + "\n"
+00019420: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019430: 2020 236c 6961 6273 3120 3d20 6669 6c65    #liabs1 = file
+00019440: 6461 7461 5b22 6c31 225d 202b 2022 5c6e  data["l1"] + "\n
+00019450: 2220 2b20 6669 6c65 6461 7461 5b22 6531  " + filedata["e1
+00019460: 225d 202b 2022 5c6e 220d 0a0d 0a20 2020  "] + "\n"....   
+00019470: 2020 2020 2020 2020 2020 2020 2023 6173               #as
+00019480: 7365 7473 3220 3d20 6669 6c65 6461 7461  sets2 = filedata
+00019490: 5b22 6132 225d 202b 2022 5c6e 220d 0a20  ["a2"] + "\n".. 
+000194a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000194b0: 6c69 6162 7332 203d 2066 696c 6564 6174  liabs2 = filedat
+000194c0: 615b 226c 3222 5d20 2b20 225c 6e22 202b  a["l2"] + "\n" +
+000194d0: 2066 696c 6564 6174 615b 2265 3222 5d20   filedata["e2"] 
+000194e0: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
+000194f0: 2020 2020 2020 2020 2020 6966 2028 6167            if (ag
+00019500: 656e 7431 203d 3d20 6d79 5f61 6765 6e74  ent1 == my_agent
+00019510: 206f 7220 6167 656e 7432 203d 3d20 6d79   or agent2 == my
+00019520: 5f61 6765 6e74 2920 616e 6420 7374 7228  _agent) and str(
+00019530: 6669 6c65 6461 7461 5b72 6566 5f69 6e63  filedata[ref_inc
+00019540: 6f6d 655d 2920 213d 2027 4e6f 6e65 273a  ome]) != 'None':
+00019550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019560: 2020 2020 2020 6d79 6469 6374 203d 207b        mydict = {
+00019570: 2247 6169 6e22 3a20 2247 6169 6e73 222c  "Gain": "Gains",
+00019580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195a0: 224c 6f73 7322 3a20 224c 6f73 7365 7322  "Loss": "Losses"
+000195b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000195c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195d0: 2022 4578 7065 6e73 6522 3a20 2245 7870   "Expense": "Exp
+000195e0: 656e 7365 7322 2c0d 0a20 2020 2020 2020  enses",..       
+000195f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019600: 2020 2020 2020 2022 5265 7665 6e75 6522         "Revenue"
+00019610: 3a20 2252 6576 656e 7565 7322 2c0d 0a20  : "Revenues",.. 
+00019620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019630: 2020 2020 2020 2020 2020 2020 2022 5461               "Ta
+00019640: 7822 3a20 2254 6178 6573 222c 0d0a 2020  x": "Taxes",..  
+00019650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019660: 2020 2020 2020 2020 2020 2020 224e 6f6e              "Non
+00019670: 7461 782e 2050 726f 6669 7422 3a20 224e  tax. Profit": "N
+00019680: 6f6e 7461 7861 626c 6520 5072 6f66 6974  ontaxable Profit
+00019690: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
+000196a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196b0: 2020 2022 4e6f 6e74 6178 2e20 4c6f 7373     "Nontax. Loss
+000196c0: 223a 2022 4e6f 6e74 6178 6162 6c65 204c  ": "Nontaxable L
+000196d0: 6f73 7365 7322 2c0d 0a20 2020 2020 2020  osses",..       
+000196e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196f0: 2020 2020 2020 2022 4e6f 6e2d 4f70 2e20         "Non-Op. 
+00019700: 496e 636f 6d65 223a 2022 4e6f 6e2d 4f70  Income": "Non-Op
+00019710: 6572 6174 696f 6e61 6c20 496e 636f 6d65  erational Income
+00019720: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00019730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019740: 2020 2249 6e74 6572 6573 7422 3a20 2249    "Interest": "I
+00019750: 6e74 6572 6573 7420 5061 796d 656e 7473  nterest Payments
+00019760: 227d 0d0a 0d0a 2020 2020 2020 2020 2020  "}....          
+00019770: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
 00019780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019790: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
-000197a0: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
-000197b0: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
-000197c0: 6967 6e20 2b20 6669 6c65 6461 7461 5b22  ign + filedata["
-000197d0: 7175 616e 7469 7479 225d 202b 2073 7472  quantity"] + str
-000197e0: 2865 292c 7469 746c 653d 2245 7272 6f72  (e),title="Error
-000197f0: 2229 0d0a 0d0a 2020 2020 2020 2020 6578  ")....        ex
-00019800: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-00019810: 2020 2073 656c 662e 6e6f 7469 6679 2874     self.notify(t
-00019820: 6974 6c65 3d22 4572 726f 7222 2c20 6d65  itle="Error", me
-00019830: 7373 6167 653d 2241 6e20 6572 726f 7220  ssage="An error 
-00019840: 6f63 6375 7272 6564 2e22 290d 0a0d 0a20  occurred.").... 
-00019850: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00019860: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00019870: 3d20 7064 2e44 6174 6146 7261 6d65 2863  = pd.DataFrame(c
-00019880: 6f6d 6269 6e65 645f 696e 636f 6d65 292e  ombined_income).
-00019890: 7365 745f 696e 6465 7828 2253 7562 6a65  set_index("Subje
-000198a0: 6374 2229 0d0a 0d0a 0d0a 2020 2020 2020  ct")......      
-000198b0: 2020 2020 2020 2320 736f 7274 2061 6674        # sort aft
-000198c0: 6572 2072 616e 6b69 6e67 0d0a 2020 2020  er ranking..    
-000198d0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000198e0: 2072 6573 756c 742e 736f 7274 5f76 616c   result.sort_val
-000198f0: 7565 7328 2752 616e 6b69 6e67 2729 0d0a  ues('Ranking')..
-00019900: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00019910: 7265 6d6f 7665 2072 616e 6b69 6e67 0d0a  remove ranking..
-00019920: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00019930: 6c74 203d 2072 6573 756c 742e 6472 6f70  lt = result.drop
-00019940: 2863 6f6c 756d 6e73 3d20 2252 616e 6b69  (columns= "Ranki
-00019950: 6e67 2229 0d0a 0d0a 2020 2020 2020 2020  ng")....        
-00019960: 2020 2020 6d6f 6465 6c20 3d20 5061 6e64      model = Pand
-00019970: 6173 4d6f 6465 6c28 7265 7375 6c74 290d  asModel(result).
-00019980: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-00019990: 6620 6d79 5f61 6765 6e74 206e 6f74 2069  f my_agent not i
-000199a0: 6e20 4361 7368 466c 6f77 5669 6577 6572  n CashFlowViewer
-000199b0: 2e69 6e73 7461 6e63 6573 3a0d 0a20 2020  .instances:..   
-000199c0: 2020 2020 2020 2020 2020 2020 206d 7976               myv
-000199d0: 6965 7720 3d20 4361 7368 466c 6f77 5669  iew = CashFlowVi
-000199e0: 6577 6572 2873 656c 662c 6e61 6d65 3d6d  ewer(self,name=m
-000199f0: 795f 6167 656e 7429 0d0a 2020 2020 2020  y_agent)..      
-00019a00: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00019a10: 2020 2020 2020 2020 2020 2020 206d 7976               myv
-00019a20: 6965 7720 3d20 4361 7368 466c 6f77 5669  iew = CashFlowVi
-00019a30: 6577 6572 2e69 6e73 7461 6e63 6573 5b6d  ewer.instances[m
-00019a40: 795f 6167 656e 745d 0d0a 2020 2020 2020  y_agent]..      
-00019a50: 2020 2020 2020 2320 6d76 6965 772e 7365        # mview.se
-00019a60: 7447 656f 6d65 7472 7928 3130 302c 3530  tGeometry(100,50
-00019a70: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-00019a80: 6d79 7669 6577 2e73 6574 5f6d 6f64 656c  myview.set_model
-00019a90: 286d 6f64 656c 290d 0a20 2020 2020 2020  (model)..       
-00019aa0: 2020 2020 2023 206d 7669 6577 2e77 6562       # mview.web
-00019ab0: 5669 6577 2e73 6574 4874 6d6c 2864 665f  View.setHtml(df_
-00019ac0: 6874 6d6c 290d 0a20 2020 2020 2020 2020  html)..         
-00019ad0: 2020 2069 6620 6e6f 7420 7365 6c66 2e74     if not self.t
-00019ae0: 6573 745f 6d6f 6465 3a0d 0a20 2020 2020  est_mode:..     
-00019af0: 2020 2020 2020 2020 2020 206d 7976 6965             myvie
-00019b00: 772e 7368 6f77 2829 0d0a 0d0a 2020 2020  w.show()....    
-00019b10: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00019b20: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-00019b30: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00019b40: 6966 7928 7469 746c 653d 2245 7272 6f72  ify(title="Error
-00019b50: 222c 206d 6573 7361 6765 3d22 416e 2065  ", message="An e
-00019b60: 7272 6f72 206f 6363 7572 7265 642e 2220  rror occurred." 
-00019b70: 2b20 7374 7228 6529 290d 0a0d 0a0d 0a20  + str(e))...... 
-00019b80: 2020 2064 6566 2067 656e 5f74 6578 5f69     def gen_tex_i
-00019b90: 6373 2873 656c 6629 3a0d 0a20 2020 2020  cs(self):..     
-00019ba0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-00019bb0: 7473 203d 207b 7d0d 0a0d 0a20 2020 2020  ts = {}....     
-00019bc0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00019bd0: 7b0d 0a20 2020 2020 2020 2061 6765 6e74  {..        agent
-00019be0: 5f6e 616d 653a 207b 0d0a 2020 2020 2020  _name: {..      
-00019bf0: 2020 2020 2020 2020 2020 2020 2020 2241                "A
-00019c00: 7373 6574 7322 3a20 7b0d 0a20 2020 2020  ssets": {..     
-00019c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c20: 2020 2020 2020 2020 2020 2061 7373 6574             asset
-00019c30: 5f6e 616d 6520 3a20 5b65 6e74 7269 6573  _name : [entries
-00019c40: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00019c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c60: 2020 2020 2e2e 2e7d 2c0d 0a0d 0a20 2020      ...},....   
+00019790: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
+000197a0: 3120 3d3d 206d 795f 6167 656e 743a 0d0a  1 == my_agent:..
+000197b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000197c0: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+000197d0: 203d 2022 2d22 0d0a 2020 2020 2020 2020   = "-"..        
+000197e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000197f0: 6966 2061 6765 6e74 3220 3d3d 206d 795f  if agent2 == my_
+00019800: 6167 656e 743a 0d0a 2020 2020 2020 2020  agent:..        
+00019810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019820: 2020 2020 7369 676e 203d 2022 2b22 0d0a      sign = "+"..
+00019830: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019840: 2020 2020 2020 2020 2020 7120 3d20 7379            q = sy
+00019850: 6d70 792e 6c61 7465 7828 7379 6d70 792e  mpy.latex(sympy.
+00019860: 7369 6d70 6c69 6679 2873 6967 6e20 2b20  simplify(sign + 
+00019870: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
+00019880: 7479 225d 292c 206d 6f64 653d 2270 6c61  ty"]), mode="pla
+00019890: 696e 2229 0d0a 2020 2020 2020 2020 2020  in")..          
+000198a0: 2020 2020 2020 2020 2020 2020 2020 7375                su
+000198b0: 626a 6563 7420 3d20 6669 6c65 6461 7461  bject = filedata
+000198c0: 5b22 7375 626a 6563 7422 5d2e 7265 706c  ["subject"].repl
+000198d0: 6163 6528 225f 222c 2022 2022 292e 6361  ace("_", " ").ca
+000198e0: 7069 7461 6c69 7a65 2829 0d0a 2020 2020  pitalize()..    
+000198f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019900: 2020 2020 7072 696e 7428 2220 2020 2020      print("     
+00019910: 2066 6f75 6e64 222c 712c 7375 626a 6563   found",q,subjec
+00019920: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+00019930: 2020 2020 2020 2020 2020 2020 7470 6520              tpe 
+00019940: 3d20 6669 6c65 6461 7461 5b72 6566 5f69  = filedata[ref_i
+00019950: 6e63 6f6d 655d 0d0a 2020 2020 2020 2020  ncome]..        
+00019960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019970: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
+00019980: 2254 7970 6522 5d2e 6170 7065 6e64 2874  "Type"].append(t
+00019990: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+000199a0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+000199b0: 6269 6e65 645f 696e 636f 6d65 5b22 5375  bined_income["Su
+000199c0: 626a 6563 7422 5d2e 6170 7065 6e64 2873  bject"].append(s
+000199d0: 7562 6a65 6374 290d 0a20 2020 2020 2020  ubject)..       
+000199e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000199f0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
+00019a00: 5b22 5175 616e 7469 7479 225d 2e61 7070  ["Quantity"].app
+00019a10: 656e 6428 7374 7228 7129 290d 0a20 2020  end(str(q))..   
+00019a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019a30: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00019a40: 636f 6d65 5b22 5368 6f72 7420 4e61 6d65  come["Short Name
+00019a50: 225d 2e61 7070 656e 6428 6669 6c65 6461  "].append(fileda
+00019a60: 7461 5b22 7368 6f72 746e 616d 6522 5d2e  ta["shortname"].
+00019a70: 7374 7269 7028 2929 0d0a 2020 2020 2020  strip())..      
+00019a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019a90: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
+00019aa0: 655b 2252 616e 6b69 6e67 225d 2e61 7070  e["Ranking"].app
+00019ab0: 656e 6428 3029 0d0a 2020 2020 2020 2020  end(0)..        
+00019ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ad0: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
+00019ae0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00019af0: 7470 6520 696e 205b 2247 6169 6e73 222c  tpe in ["Gains",
+00019b00: 224c 6f73 7365 7322 2c22 4578 7065 6e73  "Losses","Expens
+00019b10: 6573 222c 2252 6576 656e 7565 7322 5d3a  es","Revenues"]:
+00019b20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019b30: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00019b40: 6d62 696e 6564 5f69 6e63 6f6d 655b 2252  mbined_income["R
+00019b50: 616e 6b69 6e67 225d 2e61 7070 656e 6428  anking"].append(
+00019b60: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
+00019b70: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00019b80: 2074 7065 2069 6e20 5b22 4e6f 6e2d 4f70   tpe in ["Non-Op
+00019b90: 6572 6174 696f 6e61 6c20 496e 636f 6d65  erational Income
+00019ba0: 222c 2249 6e74 6572 6573 7420 5061 796d  ","Interest Paym
+00019bb0: 656e 7473 225d 3a0d 0a20 2020 2020 2020  ents"]:..       
+00019bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019bd0: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00019be0: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
+00019bf0: 6170 7065 6e64 2831 290d 0a20 2020 2020  append(1)..     
+00019c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c10: 2020 2065 6c69 6620 7470 6520 696e 205b     elif tpe in [
+00019c20: 2254 6178 6573 225d 3a0d 0a20 2020 2020  "Taxes"]:..     
+00019c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c40: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+00019c50: 696e 636f 6d65 5b22 5261 6e6b 696e 6722  income["Ranking"
+00019c60: 5d2e 6170 7065 6e64 2832 290d 0a20 2020  ].append(2)..   
 00019c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c80: 2022 4c69 6162 696c 6974 6965 7320 616e   "Liabilities an
-00019c90: 6420 4571 7569 7479 223a 207b 0d0a 2020  d Equity": {..  
-00019ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019cb0: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-00019cc0: 6d65 203a 205b 656e 7472 6965 735d 2c0d  me : [entries],.
-00019cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019cf0: 202e 2e2e 7d2c 0d0a 0d0a 2020 2020 2020   ...},....      
-00019d00: 2020 2020 2020 2020 2020 2020 2020 7d0d                }.
-00019d10: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
-00019d20: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-00019d30: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
-00019d40: 6d65 203d 2064 6566 6175 6c74 6469 6374  me = defaultdict
-00019d50: 286c 616d 6264 613a 207b 2247 6169 6e73  (lambda: {"Gains
-00019d60: 223a 205b 5d2c 2022 4c6f 7373 6573 223a  ": [], "Losses":
-00019d70: 205b 5d2c 2022 5265 7665 6e75 6573 223a   [], "Revenues":
-00019d80: 205b 5d2c 2022 5461 7865 7322 3a20 5b5d   [], "Taxes": []
-00019d90: 2c20 2245 7870 656e 7365 7322 3a20 5b5d  , "Expenses": []
-00019da0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00019c80: 2020 2020 2065 6c69 6620 7470 6520 696e       elif tpe in
+00019c90: 205b 224e 6f6e 7461 7861 626c 6520 5072   ["Nontaxable Pr
+00019ca0: 6f66 6974 7322 2c20 224e 6f6e 7461 7861  ofits", "Nontaxa
+00019cb0: 626c 6520 4c6f 7373 6573 225d 3a0d 0a20  ble Losses"]:.. 
+00019cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019cd0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+00019ce0: 6e65 645f 696e 636f 6d65 5b22 5261 6e6b  ned_income["Rank
+00019cf0: 696e 6722 5d2e 6170 7065 6e64 2833 290d  ing"].append(3).
+00019d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019d10: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00019d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d30: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+00019d40: 696e 6564 5f69 6e63 6f6d 655b 2252 616e  ined_income["Ran
+00019d50: 6b69 6e67 225d 2e61 7070 656e 6428 3429  king"].append(4)
+00019d60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019d70: 2020 2020 2020 2020 2020 2222 220d 0a0d            """...
+00019d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019d90: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00019da0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
 00019db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019dd0: 2020 224e 6f6e 7461 7861 626c 6520 4c6f    "Nontaxable Lo
-00019de0: 7373 6573 223a 205b 5d2c 2022 4e6f 6e74  sses": [], "Nont
-00019df0: 6178 6162 6c65 2050 726f 6669 7473 223a  axable Profits":
-00019e00: 205b 5d2c 0d0a 2020 2020 2020 2020 2020   [],..          
-00019e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e30: 2020 2020 2022 4e6f 6e2d 4f70 6572 6174       "Non-Operat
-00019e40: 696f 6e61 6c20 496e 636f 6d65 223a 205b  ional Income": [
-00019e50: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00019e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e80: 2020 2022 496e 7465 7265 7374 2050 6179     "Interest Pay
-00019e90: 6d65 6e74 7322 3a20 5b5d 0d0a 2020 2020  ments": []..    
-00019ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ec0: 2020 2020 2020 2020 2020 207d 290d 0a0d             })...
-00019ed0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00019ee0: 2020 2020 2020 7b0d 0a20 2020 2020 2020        {..       
-00019ef0: 2061 6765 6e74 5f6e 616d 653a 207b 0d0a   agent_name: {..
-00019f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f10: 2247 6169 6e73 223a 2020 5b65 6e74 7269  "Gains":  [entri
-00019f20: 6573 5d2c 0d0a 2020 2020 2020 2020 2020  es],..          
-00019f30: 2020 2020 2020 224c 6f73 7365 7322 3a5b        "Losses":[
-00019f40: 656e 7472 6965 735d 2c0d 0a20 2020 2020  entries],..     
-00019f50: 2020 2020 2020 2020 2020 2022 4578 7065             "Expe
-00019f60: 6e64 6974 7572 6573 223a 5b65 6e74 7269  nditures":[entri
-00019f70: 6573 5d2c 0d0a 2020 2020 2020 2020 2020  es],..          
-00019f80: 2020 2020 2020 2252 6576 656e 7565 7322        "Revenues"
-00019f90: 3a20 5b65 6e74 7269 6573 5d2c 0d0a 2020  : [entries],..  
-00019fa0: 2020 2020 2020 2020 2020 2020 2020 2254                "T
-00019fb0: 6178 6573 223a 5b65 6e74 7269 6573 5d0d  axes":[entries].
-00019fc0: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
-00019fd0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-00019fe0: 2020 206b 203d 2030 0d0a 2020 2020 2020     k = 0..      
-00019ff0: 2020 7465 7873 7472 203d 2022 220d 0a0d    texstr = ""...
-0001a000: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-0001a010: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
-0001a020: 696c 6564 6174 6120 696e 2073 656c 662e  iledata in self.
-0001a030: 656e 7472 795f 6461 7461 3a0d 0a20 2020  entry_data:..   
-0001a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a050: 2020 2020 2020 2020 2023 2020 2073 656c           #   sel
-0001a060: 662e 7061 7265 6e74 2e61 6765 6e74 312e  f.parent.agent1.
-0001a070: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
-0001a080: 5b22 6167 656e 7431 225d 0d0a 2020 2020  ["agent1"]..    
-0001a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a0a0: 2020 2020 2020 2020 2320 7365 6c66 2e70          # self.p
-0001a0b0: 6172 656e 742e 6167 656e 7432 2e76 616c  arent.agent2.val
-0001a0c0: 7565 203d 2066 696c 6564 6174 615b 2261  ue = filedata["a
-0001a0d0: 6765 6e74 3222 5d0d 0a0d 0a20 2020 2020  gent2"]....     
-0001a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a0f0: 2020 2020 2020 2023 2073 656c 662e 7061         # self.pa
-0001a100: 7265 6e74 2e66 6c6f 775f 6368 6563 6b2e  rent.flow_check.
-0001a110: 7661 6c75 6520 3d20 7374 7228 626f 6f6c  value = str(bool
-0001a120: 2866 696c 6564 6174 615b 226c 6f67 2074  (filedata["log t
-0001a130: 7261 6e73 6163 7469 6f6e 225d 2929 0d0a  ransaction"]))..
-0001a140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a150: 2020 2020 2020 2020 2020 2020 2320 7365              # se
-0001a160: 6c66 2e70 6172 656e 742e 6b69 6e64 2e76  lf.parent.kind.v
-0001a170: 616c 7565 203d 2066 696c 6564 6174 615b  alue = filedata[
-0001a180: 226b 696e 6422 5d0d 0a20 2020 2020 2020  "kind"]..       
-0001a190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a1a0: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
-0001a1b0: 6e74 2e73 7562 6a65 6374 2e76 616c 7565  nt.subject.value
-0001a1c0: 203d 2066 696c 6564 6174 615b 2273 7562   = filedata["sub
-0001a1d0: 6a65 6374 225d 0d0a 2020 2020 2020 2020  ject"]..        
-0001a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a1f0: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
-0001a200: 742e 7175 616e 7469 7479 2e76 616c 7565  t.quantity.value
-0001a210: 203d 2066 696c 6564 6174 615b 2271 7561   = filedata["qua
-0001a220: 6e74 6974 7922 5d0d 0a0d 0a20 2020 2020  ntity"]....     
-0001a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a240: 2020 2020 2020 2061 6765 6e74 3120 3d20         agent1 = 
-0001a250: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
-0001a260: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+00019dc0: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+00019dd0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00019de0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019df0: 4361 6e6e 6f74 2068 616e 646c 6520 7468  Cannot handle th
+00019e00: 6520 7379 6d62 6f6c 6963 2065 7870 7265  e symbolic expre
+00019e10: 7373 696f 6e20 2573 2220 2520 7369 676e  ssion %s" % sign
+00019e20: 202b 2066 696c 6564 6174 615b 2271 7561   + filedata["qua
+00019e30: 6e74 6974 7922 5d20 2b20 7374 7228 6529  ntity"] + str(e)
+00019e40: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
+00019e50: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+00019e60: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00019e70: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
+00019e80: 653d 2245 7272 6f72 222c 206d 6573 7361  e="Error", messa
+00019e90: 6765 3d22 416e 2065 7272 6f72 206f 6363  ge="An error occ
+00019ea0: 7572 7265 642e 2229 0d0a 0d0a 2020 2020  urred.")....    
+00019eb0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00019ec0: 2020 2020 2020 7265 7375 6c74 203d 2070        result = p
+00019ed0: 642e 4461 7461 4672 616d 6528 636f 6d62  d.DataFrame(comb
+00019ee0: 696e 6564 5f69 6e63 6f6d 6529 2e73 6574  ined_income).set
+00019ef0: 5f69 6e64 6578 2822 5375 626a 6563 7422  _index("Subject"
+00019f00: 290d 0a0d 0a0d 0a20 2020 2020 2020 2020  )......         
+00019f10: 2020 2023 2073 6f72 7420 6166 7465 7220     # sort after 
+00019f20: 7261 6e6b 696e 670d 0a20 2020 2020 2020  ranking..       
+00019f30: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
+00019f40: 7375 6c74 2e73 6f72 745f 7661 6c75 6573  sult.sort_values
+00019f50: 2827 5261 6e6b 696e 6727 290d 0a0d 0a20  ('Ranking').... 
+00019f60: 2020 2020 2020 2020 2020 2023 2072 656d             # rem
+00019f70: 6f76 6520 7261 6e6b 696e 670d 0a20 2020  ove ranking..   
+00019f80: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00019f90: 3d20 7265 7375 6c74 2e64 726f 7028 636f  = result.drop(co
+00019fa0: 6c75 6d6e 733d 2022 5261 6e6b 696e 6722  lumns= "Ranking"
+00019fb0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00019fc0: 206d 6f64 656c 203d 2050 616e 6461 734d   model = PandasM
+00019fd0: 6f64 656c 2872 6573 756c 7429 0d0a 0d0a  odel(result)....
+00019fe0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00019ff0: 795f 6167 656e 7420 6e6f 7420 696e 2043  y_agent not in C
+0001a000: 6173 6846 6c6f 7756 6965 7765 722e 696e  ashFlowViewer.in
+0001a010: 7374 616e 6365 733a 0d0a 2020 2020 2020  stances:..      
+0001a020: 2020 2020 2020 2020 2020 6d79 7669 6577            myview
+0001a030: 203d 2043 6173 6846 6c6f 7756 6965 7765   = CashFlowViewe
+0001a040: 7228 7365 6c66 2c6e 616d 653d 6d79 5f61  r(self,name=my_a
+0001a050: 6765 6e74 290d 0a20 2020 2020 2020 2020  gent)..         
+0001a060: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0001a070: 2020 2020 2020 2020 2020 6d79 7669 6577            myview
+0001a080: 203d 2043 6173 6846 6c6f 7756 6965 7765   = CashFlowViewe
+0001a090: 722e 696e 7374 616e 6365 735b 6d79 5f61  r.instances[my_a
+0001a0a0: 6765 6e74 5d0d 0a20 2020 2020 2020 2020  gent]..         
+0001a0b0: 2020 2023 206d 7669 6577 2e73 6574 4765     # mview.setGe
+0001a0c0: 6f6d 6574 7279 2831 3030 2c35 3030 290d  ometry(100,500).
+0001a0d0: 0a20 2020 2020 2020 2020 2020 206d 7976  .            myv
+0001a0e0: 6965 772e 7365 745f 6d6f 6465 6c28 6d6f  iew.set_model(mo
+0001a0f0: 6465 6c29 0d0a 2020 2020 2020 2020 2020  del)..          
+0001a100: 2020 2320 6d76 6965 772e 7765 6256 6965    # mview.webVie
+0001a110: 772e 7365 7448 746d 6c28 6466 5f68 746d  w.setHtml(df_htm
+0001a120: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
+0001a130: 6966 206e 6f74 2073 656c 662e 7465 7374  if not self.test
+0001a140: 5f6d 6f64 653a 0d0a 2020 2020 2020 2020  _mode:..        
+0001a150: 2020 2020 2020 2020 6d79 7669 6577 2e73          myview.s
+0001a160: 686f 7728 290d 0a0d 0a20 2020 2020 2020  how()....       
+0001a170: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+0001a180: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+0001a190: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+0001a1a0: 2874 6974 6c65 3d22 4572 726f 7222 2c20  (title="Error", 
+0001a1b0: 6d65 7373 6167 653d 2241 6e20 6572 726f  message="An erro
+0001a1c0: 7220 6f63 6375 7272 6564 2e22 202b 2073  r occurred." + s
+0001a1d0: 7472 2865 2929 0d0a 0d0a 0d0a 2020 2020  tr(e))......    
+0001a1e0: 6465 6620 6765 6e5f 7465 785f 6963 7328  def gen_tex_ics(
+0001a1f0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0001a200: 636f 6d62 696e 6564 5f73 6865 6574 7320  combined_sheets 
+0001a210: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
+0001a220: 2222 220d 0a20 2020 2020 2020 207b 0d0a  """..        {..
+0001a230: 2020 2020 2020 2020 6167 656e 745f 6e61          agent_na
+0001a240: 6d65 3a20 7b0d 0a20 2020 2020 2020 2020  me: {..         
+0001a250: 2020 2020 2020 2020 2020 2022 4173 7365             "Asse
+0001a260: 7473 223a 207b 0d0a 2020 2020 2020 2020  ts": {..        
 0001a270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a280: 6167 656e 7432 203d 2066 696c 6564 6174  agent2 = filedat
-0001a290: 615b 2261 6765 6e74 3222 5d0d 0a0d 0a20  a["agent2"].... 
-0001a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2b0: 2020 2020 2020 2020 2020 2061 7373 6574             asset
-0001a2c0: 7331 203d 2066 696c 6564 6174 615b 2261  s1 = filedata["a
-0001a2d0: 3122 5d20 2b20 225c 6e22 0d0a 2020 2020  1"] + "\n"..    
-0001a2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2f0: 2020 2020 2020 2020 6c69 6162 7331 203d          liabs1 =
-0001a300: 2066 696c 6564 6174 615b 226c 3122 5d20   filedata["l1"] 
-0001a310: 2b20 225c 6e22 202b 2066 696c 6564 6174  + "\n" + filedat
-0001a320: 615b 2265 3122 5d20 2b20 225c 6e22 0d0a  a["e1"] + "\n"..
-0001a330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a340: 2020 2020 2020 2020 2020 2020 2020 6173                as
-0001a350: 7365 7473 3220 3d20 6669 6c65 6461 7461  sets2 = filedata
-0001a360: 5b22 6132 225d 202b 2022 5c6e 220d 0a20  ["a2"] + "\n".. 
-0001a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a380: 2020 2020 2020 2020 2020 206c 6961 6273             liabs
-0001a390: 3220 3d20 6669 6c65 6461 7461 5b22 6c32  2 = filedata["l2
-0001a3a0: 225d 202b 2022 5c6e 2220 2b20 6669 6c65  "] + "\n" + file
-0001a3b0: 6461 7461 5b22 6532 225d 202b 2022 5c6e  data["e2"] + "\n
-0001a3c0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001a3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a3e0: 206d 795f 7461 626c 6520 3d20 7064 2e44   my_table = pd.D
-0001a3f0: 6174 6146 7261 6d65 2e66 726f 6d5f 6469  ataFrame.from_di
-0001a400: 6374 280d 0a20 2020 2020 2020 2020 2020  ct(..           
+0001a280: 2020 2020 2020 2020 6173 7365 745f 6e61          asset_na
+0001a290: 6d65 203a 205b 656e 7472 6965 735d 2c0d  me : [entries],.
+0001a2a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a2c0: 202e 2e2e 7d2c 0d0a 0d0a 2020 2020 2020   ...},....      
+0001a2d0: 2020 2020 2020 2020 2020 2020 2020 224c                "L
+0001a2e0: 6961 6269 6c69 7469 6573 2061 6e64 2045  iabilities and E
+0001a2f0: 7175 6974 7922 3a20 7b0d 0a20 2020 2020  quity": {..     
+0001a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a310: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+0001a320: 3a20 5b65 6e74 7269 6573 5d2c 0d0a 2020  : [entries],..  
+0001a330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a340: 2020 2020 2020 2020 2020 2020 2020 2e2e                ..
+0001a350: 2e7d 2c0d 0a0d 0a20 2020 2020 2020 2020  .},....         
+0001a360: 2020 2020 2020 2020 2020 207d 0d0a 2020             }..  
+0001a370: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+0001a380: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+0001a390: 636f 6d62 696e 6564 5f69 6e63 6f6d 6520  combined_income 
+0001a3a0: 3d20 6465 6661 756c 7464 6963 7428 6c61  = defaultdict(la
+0001a3b0: 6d62 6461 3a20 7b22 4761 696e 7322 3a20  mbda: {"Gains": 
+0001a3c0: 5b5d 2c20 224c 6f73 7365 7322 3a20 5b5d  [], "Losses": []
+0001a3d0: 2c20 2252 6576 656e 7565 7322 3a20 5b5d  , "Revenues": []
+0001a3e0: 2c20 2254 6178 6573 223a 205b 5d2c 2022  , "Taxes": [], "
+0001a3f0: 4578 7065 6e73 6573 223a 205b 5d2c 0d0a  Expenses": [],..
+0001a400: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001a410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a420: 2020 2020 207b 2241 7373 6574 7322 3a20       {"Assets": 
-0001a430: 6173 7365 7473 312e 7370 6c69 7428 225c  assets1.split("\
-0001a440: 6e22 292c 2022 4c69 6162 696c 6974 6965  n"), "Liabilitie
-0001a450: 7320 616e 6420 4571 7569 7479 223a 206c  s and Equity": l
-0001a460: 6961 6273 312e 7370 6c69 7428 225c 6e22  iabs1.split("\n"
-0001a470: 297d 2c0d 0a20 2020 2020 2020 2020 2020  )},..           
+0001a420: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001a430: 4e6f 6e74 6178 6162 6c65 204c 6f73 7365  Nontaxable Losse
+0001a440: 7322 3a20 5b5d 2c20 224e 6f6e 7461 7861  s": [], "Nontaxa
+0001a450: 626c 6520 5072 6f66 6974 7322 3a20 5b5d  ble Profits": []
+0001a460: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a490: 2020 2020 206f 7269 656e 743d 2769 6e64       orient='ind
-0001a4a0: 6578 2729 2e54 0d0a 2020 2020 2020 2020  ex').T..        
-0001a4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a4c0: 2020 2020 6d79 5f74 6162 6c65 3220 3d20      my_table2 = 
-0001a4d0: 7064 2e44 6174 6146 7261 6d65 2e66 726f  pd.DataFrame.fro
-0001a4e0: 6d5f 6469 6374 280d 0a20 2020 2020 2020  m_dict(..       
-0001a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a500: 2020 2020 2020 2020 207b 2241 7373 6574           {"Asset
-0001a510: 7322 3a20 6173 7365 7473 322e 7370 6c69  s": assets2.spli
-0001a520: 7428 225c 6e22 292c 2022 4c69 6162 696c  t("\n"), "Liabil
-0001a530: 6974 6965 7320 616e 6420 4571 7569 7479  ities and Equity
-0001a540: 223a 206c 6961 6273 322e 7370 6c69 7428  ": liabs2.split(
-0001a550: 225c 6e22 297d 2c0d 0a20 2020 2020 2020  "\n")},..       
-0001a560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a570: 2020 2020 2020 2020 206f 7269 656e 743d           orient=
-0001a580: 2769 6e64 6578 2729 2e54 0d0a 0d0a 2020  'index').T....  
-0001a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5a0: 2020 2020 2020 2020 2020 7465 785f 7461            tex_ta
-0001a5b0: 626c 6531 203d 206d 795f 7461 626c 652e  ble1 = my_table.
-0001a5c0: 746f 5f6c 6174 6578 2869 6e64 6578 5f6e  to_latex(index_n
-0001a5d0: 616d 6573 3d46 616c 7365 2c20 696e 6465  ames=False, inde
-0001a5e0: 783d 4661 6c73 6529 0d0a 2020 2020 2020  x=False)..      
-0001a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a600: 2020 2020 2020 7465 785f 7461 626c 6532        tex_table2
-0001a610: 203d 206d 795f 7461 626c 6532 2e74 6f5f   = my_table2.to_
-0001a620: 6c61 7465 7828 696e 6465 785f 6e61 6d65  latex(index_name
-0001a630: 733d 4661 6c73 652c 2069 6e64 6578 3d46  s=False, index=F
-0001a640: 616c 7365 290d 0a0d 0a20 2020 2020 2020  alse)....       
-0001a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a660: 2020 2020 2023 206d 6572 6765 5f74 6162       # merge_tab
-0001a670: 6c65 203d 2070 642e 636f 6e63 6174 2874  le = pd.concat(t
-0001a680: 6578 5f74 6162 6c65 312c 7465 785f 7461  ex_table1,tex_ta
-0001a690: 626c 6532 290d 0a0d 0a20 2020 2020 2020  ble2)....       
+0001a490: 2020 224e 6f6e 2d4f 7065 7261 7469 6f6e    "Non-Operation
+0001a4a0: 616c 2049 6e63 6f6d 6522 3a20 5b5d 2c0d  al Income": [],.
+0001a4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a4e0: 2249 6e74 6572 6573 7420 5061 796d 656e  "Interest Paymen
+0001a4f0: 7473 223a 205b 5d0d 0a20 2020 2020 2020  ts": []..       
+0001a500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a520: 2020 2020 2020 2020 7d29 0d0a 0d0a 2020          })....  
+0001a530: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0001a540: 2020 207b 0d0a 2020 2020 2020 2020 6167     {..        ag
+0001a550: 656e 745f 6e61 6d65 3a20 7b0d 0a20 2020  ent_name: {..   
+0001a560: 2020 2020 2020 2020 2020 2020 2022 4761               "Ga
+0001a570: 696e 7322 3a20 205b 656e 7472 6965 735d  ins":  [entries]
+0001a580: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a590: 2020 2022 4c6f 7373 6573 223a 5b65 6e74     "Losses":[ent
+0001a5a0: 7269 6573 5d2c 0d0a 2020 2020 2020 2020  ries],..        
+0001a5b0: 2020 2020 2020 2020 2245 7870 656e 6469          "Expendi
+0001a5c0: 7475 7265 7322 3a5b 656e 7472 6965 735d  tures":[entries]
+0001a5d0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a5e0: 2020 2022 5265 7665 6e75 6573 223a 205b     "Revenues": [
+0001a5f0: 656e 7472 6965 735d 2c0d 0a20 2020 2020  entries],..     
+0001a600: 2020 2020 2020 2020 2020 2022 5461 7865             "Taxe
+0001a610: 7322 3a5b 656e 7472 6965 735d 0d0a 2020  s":[entries]..  
+0001a620: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+0001a630: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+0001a640: 6b20 3d20 300d 0a20 2020 2020 2020 2074  k = 0..        t
+0001a650: 6578 7374 7220 3d20 2222 0d0a 0d0a 2020  exstr = ""....  
+0001a660: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+0001a670: 2020 2020 2020 2020 666f 7220 6669 6c65          for file
+0001a680: 6461 7461 2069 6e20 7365 6c66 2e65 6e74  data in self.ent
+0001a690: 7279 5f64 6174 613a 0d0a 2020 2020 2020  ry_data:..      
 0001a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a6b0: 2020 2020 2023 203d 3d3d 3d3d 3d3d 3d3d       # =========
-0001a6c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001a6d0: 3d3d 3d20 6d6f 6469 6679 2063 6f6d 6269  === modify combi
-0001a6e0: 6e65 6420 7368 6565 740d 0a0d 0a20 2020  ned sheet....   
+0001a6b0: 2020 2020 2020 2320 2020 7365 6c66 2e70        #   self.p
+0001a6c0: 6172 656e 742e 6167 656e 7431 2e76 616c  arent.agent1.val
+0001a6d0: 7565 203d 2066 696c 6564 6174 615b 2261  ue = filedata["a
+0001a6e0: 6765 6e74 3122 5d0d 0a20 2020 2020 2020  gent1"]..       
 0001a6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a700: 2020 2020 2020 2020 2023 0d0a 2020 2020           #..    
-0001a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a720: 2020 2020 2020 2020 2320 4147 454e 5420          # AGENT 
-0001a730: 310d 0a20 2020 2020 2020 2020 2020 2020  1..             
-0001a740: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001a750: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001a760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a770: 6966 2061 6765 6e74 3120 6e6f 7420 696e  if agent1 not in
-0001a780: 2063 6f6d 6269 6e65 645f 7368 6565 7473   combined_sheets
-0001a790: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001a700: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
+0001a710: 6e74 2e61 6765 6e74 322e 7661 6c75 6520  nt.agent2.value 
+0001a720: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
+0001a730: 7432 225d 0d0a 0d0a 2020 2020 2020 2020  t2"]....        
+0001a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a750: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
+0001a760: 742e 666c 6f77 5f63 6865 636b 2e76 616c  t.flow_check.val
+0001a770: 7565 203d 2073 7472 2862 6f6f 6c28 6669  ue = str(bool(fi
+0001a780: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
+0001a790: 7361 6374 696f 6e22 5d29 290d 0a20 2020  saction"]))..   
 0001a7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a7b0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-0001a7c0: 7473 5b61 6765 6e74 315d 203d 207b 7d0d  ts[agent1] = {}.
-0001a7d0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001a7e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001a7f0: 6620 2241 7373 6574 7322 206e 6f74 2069  f "Assets" not i
-0001a800: 6e20 636f 6d62 696e 6564 5f73 6865 6574  n combined_sheet
-0001a810: 735b 6167 656e 7431 5d3a 0d0a 2020 2020  s[agent1]:..    
-0001a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a830: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-0001a840: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
-0001a850: 7431 5d5b 2241 7373 6574 7322 5d20 3d20  t1]["Assets"] = 
-0001a860: 7b7d 0d0a 2020 2020 2020 2020 2020 2020  {}..            
-0001a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a880: 6966 2022 4c69 6162 696c 6974 6965 7320  if "Liabilities 
-0001a890: 616e 6420 4571 7569 7479 2220 6e6f 7420  and Equity" not 
-0001a8a0: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
-0001a8b0: 7473 5b61 6765 6e74 315d 3a0d 0a20 2020  ts[agent1]:..   
-0001a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a8d0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-0001a8e0: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
-0001a8f0: 6e74 315d 5b22 4c69 6162 696c 6974 6965  nt1]["Liabilitie
-0001a900: 7320 616e 6420 4571 7569 7479 225d 203d  s and Equity"] =
-0001a910: 207b 7d0d 0a0d 0a20 2020 2020 2020 2020   {}....         
-0001a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a930: 2020 2066 6f72 2063 6861 6e67 6520 696e     for change in
-0001a940: 2061 7373 6574 7331 2e73 706c 6974 2822   assets1.split("
-0001a950: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
-0001a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a970: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-0001a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a7b0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+0001a7c0: 7061 7265 6e74 2e6b 696e 642e 7661 6c75  parent.kind.valu
+0001a7d0: 6520 3d20 6669 6c65 6461 7461 5b22 6b69  e = filedata["ki
+0001a7e0: 6e64 225d 0d0a 2020 2020 2020 2020 2020  nd"]..          
+0001a7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a800: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
+0001a810: 7375 626a 6563 742e 7661 6c75 6520 3d20  subject.value = 
+0001a820: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
+0001a830: 7422 5d0d 0a20 2020 2020 2020 2020 2020  t"]..           
+0001a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a850: 2023 2073 656c 662e 7061 7265 6e74 2e71   # self.parent.q
+0001a860: 7561 6e74 6974 792e 7661 6c75 6520 3d20  uantity.value = 
+0001a870: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
+0001a880: 7479 225d 0d0a 0d0a 2020 2020 2020 2020  ty"]....        
+0001a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a8a0: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
+0001a8b0: 6564 6174 615b 2261 6765 6e74 3122 5d0d  edata["agent1"].
+0001a8c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a8d0: 2020 2020 2020 2020 2020 2020 2061 6765               age
+0001a8e0: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
+0001a8f0: 6167 656e 7432 225d 0d0a 0d0a 2020 2020  agent2"]....    
+0001a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a910: 2020 2020 2020 2020 6173 7365 7473 3120          assets1 
+0001a920: 3d20 6669 6c65 6461 7461 5b22 6131 225d  = filedata["a1"]
+0001a930: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+0001a940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a950: 2020 2020 206c 6961 6273 3120 3d20 6669       liabs1 = fi
+0001a960: 6c65 6461 7461 5b22 6c31 225d 202b 2022  ledata["l1"] + "
+0001a970: 5c6e 2220 2b20 6669 6c65 6461 7461 5b22  \n" + filedata["
+0001a980: 6531 225d 202b 2022 5c6e 220d 0a0d 0a20  e1"] + "\n".... 
 0001a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9a0: 2073 6967 6e20 3d20 6368 616e 6765 5b30   sign = change[0
-0001a9b0: 5d20 2023 2066 6972 7374 206c 6574 7465  ]  # first lette
-0001a9c0: 7220 6973 2073 6967 6e20 2b20 6f72 202d  r is sign + or -
-0001a9d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9f0: 2020 2020 2020 2020 6e61 6d65 203d 2063          name = c
-0001aa00: 6861 6e67 655b 313a 5d2e 7374 7269 7028  hange[1:].strip(
-0001aa10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa30: 2020 2020 2020 2071 203d 2073 796d 7079         q = sympy
-0001aa40: 2e6c 6174 6578 2873 796d 7079 2e73 696d  .latex(sympy.sim
-0001aa50: 706c 6966 7928 7369 676e 202b 2066 696c  plify(sign + fil
-0001aa60: 6564 6174 615b 2271 7561 6e74 6974 7922  edata["quantity"
-0001aa70: 5d29 2c20 6d6f 6465 3d22 696e 6c69 6e65  ]), mode="inline
-0001aa80: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0001aa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aaa0: 2020 2020 2020 2020 7375 626a 6563 7420          subject 
-0001aab0: 3d20 2220 2020 2822 202b 2066 696c 6564  = "   (" + filed
-0001aac0: 6174 615b 2273 7562 6a65 6374 225d 2e72  ata["subject"].r
-0001aad0: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
-0001aae0: 202b 2022 2922 0d0a 0d0a 2020 2020 2020   + ")"....      
-0001aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab00: 2020 2020 2020 2020 2020 2020 2020 2370                #p
-0001ab10: 7269 6e74 2822 6e61 6d65 222c 206e 616d  rint("name", nam
-0001ab20: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0001ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab40: 2020 2020 2020 2020 2370 7269 6e74 2822          #print("
-0001ab50: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
-0001ab60: 6167 656e 7431 5d22 2c20 636f 6d62 696e  agent1]", combin
-0001ab70: 6564 5f73 6865 6574 735b 6167 656e 7431  ed_sheets[agent1
-0001ab80: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-0001ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aba0: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-0001abb0: 6e6f 7420 696e 2063 6f6d 6269 6e65 645f  not in combined_
-0001abc0: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
-0001abd0: 4173 7365 7473 225d 3a0d 0a20 2020 2020  Assets"]:..     
-0001abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9a0: 2020 2020 2020 2020 2020 2061 7373 6574             asset
+0001a9b0: 7332 203d 2066 696c 6564 6174 615b 2261  s2 = filedata["a
+0001a9c0: 3222 5d20 2b20 225c 6e22 0d0a 2020 2020  2"] + "\n"..    
+0001a9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9e0: 2020 2020 2020 2020 6c69 6162 7332 203d          liabs2 =
+0001a9f0: 2066 696c 6564 6174 615b 226c 3222 5d20   filedata["l2"] 
+0001aa00: 2b20 225c 6e22 202b 2066 696c 6564 6174  + "\n" + filedat
+0001aa10: 615b 2265 3222 5d20 2b20 225c 6e22 0d0a  a["e2"] + "\n"..
+0001aa20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001aa30: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001aa40: 5f74 6162 6c65 203d 2070 642e 4461 7461  _table = pd.Data
+0001aa50: 4672 616d 652e 6672 6f6d 5f64 6963 7428  Frame.from_dict(
+0001aa60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001aa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa80: 2020 7b22 4173 7365 7473 223a 2061 7373    {"Assets": ass
+0001aa90: 6574 7331 2e73 706c 6974 2822 5c6e 2229  ets1.split("\n")
+0001aaa0: 2c20 224c 6961 6269 6c69 7469 6573 2061  , "Liabilities a
+0001aab0: 6e64 2045 7175 6974 7922 3a20 6c69 6162  nd Equity": liab
+0001aac0: 7331 2e73 706c 6974 2822 5c6e 2229 7d2c  s1.split("\n")},
+0001aad0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aaf0: 2020 6f72 6965 6e74 3d27 696e 6465 7827    orient='index'
+0001ab00: 292e 540d 0a20 2020 2020 2020 2020 2020  ).T..           
+0001ab10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ab20: 206d 795f 7461 626c 6532 203d 2070 642e   my_table2 = pd.
+0001ab30: 4461 7461 4672 616d 652e 6672 6f6d 5f64  DataFrame.from_d
+0001ab40: 6963 7428 0d0a 2020 2020 2020 2020 2020  ict(..          
+0001ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ab60: 2020 2020 2020 7b22 4173 7365 7473 223a        {"Assets":
+0001ab70: 2061 7373 6574 7332 2e73 706c 6974 2822   assets2.split("
+0001ab80: 5c6e 2229 2c20 224c 6961 6269 6c69 7469  \n"), "Liabiliti
+0001ab90: 6573 2061 6e64 2045 7175 6974 7922 3a20  es and Equity": 
+0001aba0: 6c69 6162 7332 2e73 706c 6974 2822 5c6e  liabs2.split("\n
+0001abb0: 2229 7d2c 0d0a 2020 2020 2020 2020 2020  ")},..          
+0001abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001abd0: 2020 2020 2020 6f72 6965 6e74 3d27 696e        orient='in
+0001abe0: 6465 7827 292e 540d 0a0d 0a20 2020 2020  dex').T....     
 0001abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac00: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-0001ac10: 7473 5b61 6765 6e74 315d 5b22 4173 7365  ts[agent1]["Asse
-0001ac20: 7473 225d 5b6e 616d 655d 203d 2022 220d  ts"][name] = "".
-0001ac30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac50: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-0001ac60: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
-0001ac70: 4173 7365 7473 225d 5b6e 616d 655d 202b  Assets"][name] +
-0001ac80: 3d20 7120 2b20 7375 626a 6563 7420 2b20  = q + subject + 
-0001ac90: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-0001aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001acb0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-0001acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ace0: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
-0001acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad00: 2020 2020 2066 6f72 2063 6861 6e67 6520       for change 
-0001ad10: 696e 206c 6961 6273 312e 7370 6c69 7428  in liabs1.split(
-0001ad20: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-0001ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad40: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001ac00: 2020 2020 2020 2074 6578 5f74 6162 6c65         tex_table
+0001ac10: 3120 3d20 6d79 5f74 6162 6c65 2e74 6f5f  1 = my_table.to_
+0001ac20: 6c61 7465 7828 696e 6465 785f 6e61 6d65  latex(index_name
+0001ac30: 733d 4661 6c73 652c 2069 6e64 6578 3d46  s=False, index=F
+0001ac40: 616c 7365 290d 0a20 2020 2020 2020 2020  alse)..         
+0001ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac60: 2020 2074 6578 5f74 6162 6c65 3220 3d20     tex_table2 = 
+0001ac70: 6d79 5f74 6162 6c65 322e 746f 5f6c 6174  my_table2.to_lat
+0001ac80: 6578 2869 6e64 6578 5f6e 616d 6573 3d46  ex(index_names=F
+0001ac90: 616c 7365 2c20 696e 6465 783d 4661 6c73  alse, index=Fals
+0001aca0: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+0001acb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001acc0: 2020 2320 6d65 7267 655f 7461 626c 6520    # merge_table 
+0001acd0: 3d20 7064 2e63 6f6e 6361 7428 7465 785f  = pd.concat(tex_
+0001ace0: 7461 626c 6531 2c74 6578 5f74 6162 6c65  table1,tex_table
+0001acf0: 3229 0d0a 0d0a 2020 2020 2020 2020 2020  2)....          
+0001ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad10: 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d    # ============
+0001ad20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001ad30: 206d 6f64 6966 7920 636f 6d62 696e 6564   modify combined
+0001ad40: 2073 6865 6574 0d0a 0d0a 2020 2020 2020   sheet....      
 0001ad50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad70: 2020 7369 676e 203d 2063 6861 6e67 655b    sign = change[
-0001ad80: 305d 2020 2320 6669 7273 7420 6c65 7474  0]  # first lett
-0001ad90: 6572 2069 7320 7369 676e 202b 206f 7220  er is sign + or 
-0001ada0: 2d0d 0a0d 0a20 2020 2020 2020 2020 2020  -....           
-0001adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001adc0: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
-0001add0: 6368 616e 6765 5b31 3a5d 2e73 7472 6970  change[1:].strip
-0001ade0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0001ad60: 2020 2020 2020 230d 0a20 2020 2020 2020        #..       
+0001ad70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad80: 2020 2020 2023 2041 4745 4e54 2031 0d0a       # AGENT 1..
+0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ada0: 2020 2020 2020 2020 2020 2020 230d 0a0d              #...
+0001adb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001adc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001add0: 6167 656e 7431 206e 6f74 2069 6e20 636f  agent1 not in co
+0001ade0: 6d62 696e 6564 5f73 6865 6574 733a 0d0a  mbined_sheets:..
 0001adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae00: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-0001ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae30: 2020 2020 2020 7120 3d20 7379 6d70 792e        q = sympy.
-0001ae40: 6c61 7465 7828 7379 6d70 792e 7369 6d70  latex(sympy.simp
-0001ae50: 6c69 6679 2873 6967 6e20 2b20 6669 6c65  lify(sign + file
-0001ae60: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
-0001ae70: 292c 206d 6f64 653d 2269 6e6c 696e 6522  ), mode="inline"
-0001ae80: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aea0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0001aeb0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-0001aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aee0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-0001aef0: 6679 280d 0a20 2020 2020 2020 2020 2020  fy(..           
-0001af00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af20: 2022 4361 6e6e 6f74 2068 616e 646c 6520   "Cannot handle 
-0001af30: 7468 6520 7379 6d62 6f6c 6963 2065 7870  the symbolic exp
-0001af40: 7265 7373 696f 6e20 2573 2220 2520 7369  ression %s" % si
-0001af50: 676e 202b 2066 696c 6564 6174 615b 0d0a  gn + filedata[..
-0001af60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae10: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
+0001ae20: 6167 656e 7431 5d20 3d20 7b7d 0d0a 0d0a  agent1] = {}....
+0001ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae40: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+0001ae50: 4173 7365 7473 2220 6e6f 7420 696e 2063  Assets" not in c
+0001ae60: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
+0001ae70: 6765 6e74 315d 3a0d 0a20 2020 2020 2020  gent1]:..       
+0001ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae90: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+0001aea0: 645f 7368 6565 7473 5b61 6765 6e74 315d  d_sheets[agent1]
+0001aeb0: 5b22 4173 7365 7473 225d 203d 207b 7d0d  ["Assets"] = {}.
+0001aec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001aed0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001aee0: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
+0001aef0: 2045 7175 6974 7922 206e 6f74 2069 6e20   Equity" not in 
+0001af00: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
+0001af10: 6167 656e 7431 5d3a 0d0a 2020 2020 2020  agent1]:..      
+0001af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af30: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
+0001af40: 6564 5f73 6865 6574 735b 6167 656e 7431  ed_sheets[agent1
+0001af50: 5d5b 224c 6961 6269 6c69 7469 6573 2061  ]["Liabilities a
+0001af60: 6e64 2045 7175 6974 7922 5d20 3d20 7b7d  nd Equity"] = {}
+0001af70: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0001af80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af90: 2271 7561 6e74 6974 7922 5d2c 7469 746c  "quantity"],titl
-0001afa0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
-0001afb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af90: 666f 7220 6368 616e 6765 2069 6e20 6173  for change in as
+0001afa0: 7365 7473 312e 7370 6c69 7428 225c 6e22  sets1.split("\n"
+0001afb0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
 0001afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afd0: 2020 7375 626a 6563 7420 3d20 2220 2020    subject = "   
-0001afe0: 2822 202b 2066 696c 6564 6174 615b 2273  (" + filedata["s
-0001aff0: 7562 6a65 6374 225d 2e72 6570 6c61 6365  ubject"].replace
-0001b000: 2822 5f22 2c20 2220 2229 202b 2022 2922  ("_", " ") + ")"
-0001b010: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b030: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-0001b040: 6e6f 7420 696e 2063 6f6d 6269 6e65 645f  not in combined_
-0001b050: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
-0001b060: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
-0001b070: 4571 7569 7479 225d 3a0d 0a20 2020 2020  Equity"]:..     
+0001afd0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0001afe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aff0: 2020 2020 2020 2020 2020 2020 2020 7369                si
+0001b000: 676e 203d 2063 6861 6e67 655b 305d 2020  gn = change[0]  
+0001b010: 2320 6669 7273 7420 6c65 7474 6572 2069  # first letter i
+0001b020: 7320 7369 676e 202b 206f 7220 2d0d 0a0d  s sign + or -...
+0001b030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b050: 2020 2020 206e 616d 6520 3d20 6368 616e       name = chan
+0001b060: 6765 5b31 3a5d 2e73 7472 6970 2829 0d0a  ge[1:].strip()..
+0001b070: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b0a0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-0001b0b0: 7473 5b61 6765 6e74 315d 5b22 4c69 6162  ts[agent1]["Liab
-0001b0c0: 696c 6974 6965 7320 616e 6420 4571 7569  ilities and Equi
-0001b0d0: 7479 225d 5b6e 616d 655d 203d 2022 220d  ty"][name] = "".
-0001b0e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001b090: 2020 2020 7120 3d20 7379 6d70 792e 6c61      q = sympy.la
+0001b0a0: 7465 7828 7379 6d70 792e 7369 6d70 6c69  tex(sympy.simpli
+0001b0b0: 6679 2873 6967 6e20 2b20 6669 6c65 6461  fy(sign + fileda
+0001b0c0: 7461 5b22 7175 616e 7469 7479 225d 292c  ta["quantity"]),
+0001b0d0: 206d 6f64 653d 2269 6e6c 696e 6522 290d   mode="inline").
+0001b0e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0001b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b100: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-0001b110: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
-0001b120: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
-0001b130: 4571 7569 7479 225d 5b6e 616d 655d 202b  Equity"][name] +
-0001b140: 3d20 7120 2b20 7375 626a 6563 7420 2b20  = q + subject + 
-0001b150: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-0001b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b170: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-0001b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b100: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
+0001b110: 2020 2028 2220 2b20 6669 6c65 6461 7461     (" + filedata
+0001b120: 5b22 7375 626a 6563 7422 5d2e 7265 706c  ["subject"].repl
+0001b130: 6163 6528 225f 222c 2022 2022 2920 2b20  ace("_", " ") + 
+0001b140: 2229 220d 0a0d 0a20 2020 2020 2020 2020  ")"....         
+0001b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b160: 2020 2020 2020 2020 2020 2023 7072 696e             #prin
+0001b170: 7428 226e 616d 6522 2c20 6e61 6d65 290d  t("name", name).
+0001b180: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0001b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1a0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
-0001b1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1c0: 2020 2020 2020 2069 6620 7374 7228 6669         if str(fi
-0001b1d0: 6c65 6461 7461 5b22 696e 636f 6d65 3122  ledata["income1"
-0001b1e0: 5d29 2021 3d20 274e 6f6e 6527 3a0d 0a20  ]) != 'None':.. 
+0001b1a0: 2020 2020 2023 7072 696e 7428 2263 6f6d       #print("com
+0001b1b0: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
+0001b1c0: 6e74 315d 222c 2063 6f6d 6269 6e65 645f  nt1]", combined_
+0001b1d0: 7368 6565 7473 5b61 6765 6e74 315d 290d  sheets[agent1]).
+0001b1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0001b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b200: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001b210: 7964 6963 7420 3d20 7b22 4761 696e 223a  ydict = {"Gain":
-0001b220: 2022 4761 696e 7322 2c0d 0a20 2020 2020   "Gains",..     
-0001b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b200: 2020 2020 2069 6620 6e61 6d65 206e 6f74       if name not
+0001b210: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
+0001b220: 6574 735b 6167 656e 7431 5d5b 2241 7373  ets[agent1]["Ass
+0001b230: 6574 7322 5d3a 0d0a 2020 2020 2020 2020  ets"]:..        
 0001b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b250: 2020 2020 2022 4c6f 7373 223a 2022 4c6f       "Loss": "Lo
-0001b260: 7373 6573 222c 0d0a 2020 2020 2020 2020  sses",..        
-0001b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b290: 2020 2245 7870 656e 7365 223a 2022 4578    "Expense": "Ex
-0001b2a0: 7065 6e73 6573 222c 0d0a 2020 2020 2020  penses",..      
-0001b2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2d0: 2020 2020 2252 6576 656e 7565 223a 2022      "Revenue": "
-0001b2e0: 5265 7665 6e75 6573 222c 0d0a 2020 2020  Revenues",..    
-0001b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b260: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
+0001b270: 6167 656e 7431 5d5b 2241 7373 6574 7322  agent1]["Assets"
+0001b280: 5d5b 6e61 6d65 5d20 3d20 2222 0d0a 0d0a  ][name] = ""....
+0001b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2b0: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
+0001b2c0: 6574 735b 6167 656e 7431 5d5b 2241 7373  ets[agent1]["Ass
+0001b2d0: 6574 7322 5d5b 6e61 6d65 5d20 2b3d 2071  ets"][name] += q
+0001b2e0: 202b 2073 7562 6a65 6374 202b 2022 5c6e   + subject + "\n
+0001b2f0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
 0001b300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b310: 2020 2020 2020 2254 6178 223a 2022 5461        "Tax": "Ta
-0001b320: 7865 7322 2c0d 0a20 2020 2020 2020 2020  xes",..         
+0001b310: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0001b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b350: 2022 4e6f 6e74 6178 2e20 5072 6f66 6974   "Nontax. Profit
-0001b360: 223a 2022 4e6f 6e74 6178 6162 6c65 2050  ": "Nontaxable P
-0001b370: 726f 6669 7473 222c 0d0a 2020 2020 2020  rofits",..      
-0001b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b340: 7061 7373 0d0a 2020 2020 2020 2020 2020  pass..          
+0001b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b360: 2020 666f 7220 6368 616e 6765 2069 6e20    for change in 
+0001b370: 6c69 6162 7331 2e73 706c 6974 2822 5c6e  liabs1.split("\n
+0001b380: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
 0001b390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b3a0: 2020 2020 224e 6f6e 7461 782e 204c 6f73      "Nontax. Los
-0001b3b0: 7322 3a20 224e 6f6e 7461 7861 626c 6520  s": "Nontaxable 
-0001b3c0: 4c6f 7373 6573 222c 0d0a 2020 2020 2020  Losses",..      
-0001b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b3f0: 2020 2020 224e 6f6e 2d4f 702e 2049 6e63      "Non-Op. Inc
-0001b400: 6f6d 6522 3a20 224e 6f6e 2d4f 7065 7261  ome": "Non-Opera
-0001b410: 7469 6f6e 616c 2049 6e63 6f6d 6522 2c0d  tional Income",.
-0001b420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b440: 2020 2020 2020 2020 2020 2022 496e 7465             "Inte
-0001b450: 7265 7374 223a 2022 496e 7465 7265 7374  rest": "Interest
-0001b460: 2050 6179 6d65 6e74 7322 7d0d 0a0d 0a20   Payments"}.... 
+0001b3a0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+0001b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001b3d0: 6967 6e20 3d20 6368 616e 6765 5b30 5d20  ign = change[0] 
+0001b3e0: 2023 2066 6972 7374 206c 6574 7465 7220   # first letter 
+0001b3f0: 6973 2073 6967 6e20 2b20 6f72 202d 0d0a  is sign + or -..
+0001b400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b420: 2020 2020 2020 6e61 6d65 203d 2063 6861        name = cha
+0001b430: 6e67 655b 313a 5d2e 7374 7269 7028 290d  nge[1:].strip().
+0001b440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b460: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
 0001b470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b480: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001b490: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-0001b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b4b0: 2020 2020 2020 2020 2071 203d 2073 796d           q = sym
-0001b4c0: 7079 2e6c 6174 6578 2873 796d 7079 2e73  py.latex(sympy.s
-0001b4d0: 696d 706c 6966 7928 7369 676e 202b 2066  implify(sign + f
-0001b4e0: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
-0001b4f0: 7922 5d29 2c20 6d6f 6465 3d22 696e 6c69  y"]), mode="inli
-0001b500: 6e65 2229 0d0a 2020 2020 2020 2020 2020  ne")..          
-0001b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b520: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
-0001b530: 7420 3d20 2220 2020 2822 202b 2066 696c  t = "   (" + fil
-0001b540: 6564 6174 615b 2273 7562 6a65 6374 225d  edata["subject"]
-0001b550: 2e72 6570 6c61 6365 2822 5f22 2c20 2220  .replace("_", " 
-0001b560: 2229 202b 2022 2922 0d0a 2020 2020 2020  ") + ")"..      
-0001b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b580: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0001b590: 6d62 696e 6564 5f69 6e63 6f6d 655b 6167  mbined_income[ag
-0001b5a0: 656e 7431 5d5b 6d79 6469 6374 5b66 696c  ent1][mydict[fil
-0001b5b0: 6564 6174 615b 2269 6e63 6f6d 6531 225d  edata["income1"]
-0001b5c0: 5d5d 2e61 7070 656e 6428 2873 7472 2871  ]].append((str(q
-0001b5d0: 292c 2073 7562 6a65 6374 2929 0d0a 0d0a  ), subject))....
-0001b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b600: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0001b610: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-0001b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b630: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001b640: 2e6e 6f74 6966 7928 0d0a 2020 2020 2020  .notify(..      
-0001b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b670: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
-0001b680: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
-0001b690: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
-0001b6a0: 6967 6e20 2b20 6669 6c65 6461 7461 5b22  ign + filedata["
-0001b6b0: 7175 616e 7469 7479 225d 2c74 6974 6c65  quantity"],title
-0001b6c0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
-0001b6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6e0: 2020 2020 2020 2020 2020 2023 0d0a 2020             #..  
+0001b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b490: 2020 2071 203d 2073 796d 7079 2e6c 6174     q = sympy.lat
+0001b4a0: 6578 2873 796d 7079 2e73 696d 706c 6966  ex(sympy.simplif
+0001b4b0: 7928 7369 676e 202b 2066 696c 6564 6174  y(sign + filedat
+0001b4c0: 615b 2271 7561 6e74 6974 7922 5d29 2c20  a["quantity"]), 
+0001b4d0: 6d6f 6465 3d22 696e 6c69 6e65 2229 0d0a  mode="inline")..
+0001b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b500: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+0001b510: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+0001b520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b540: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
+0001b550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b570: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+0001b580: 616e 6e6f 7420 6861 6e64 6c65 2074 6865  annot handle the
+0001b590: 2073 796d 626f 6c69 6320 6578 7072 6573   symbolic expres
+0001b5a0: 7369 6f6e 2025 7322 2025 2073 6967 6e20  sion %s" % sign 
+0001b5b0: 2b20 6669 6c65 6461 7461 5b0d 0a20 2020  + filedata[..   
+0001b5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b5e0: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
+0001b5f0: 616e 7469 7479 225d 2c74 6974 6c65 3d22  antity"],title="
+0001b600: 4572 726f 7222 290d 0a0d 0a20 2020 2020  Error")....     
+0001b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b620: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001b630: 7562 6a65 6374 203d 2022 2020 2028 2220  ubject = "   (" 
+0001b640: 2b20 6669 6c65 6461 7461 5b22 7375 626a  + filedata["subj
+0001b650: 6563 7422 5d2e 7265 706c 6163 6528 225f  ect"].replace("_
+0001b660: 222c 2022 2022 2920 2b20 2229 220d 0a0d  ", " ") + ")"...
+0001b670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b690: 2020 2020 2069 6620 6e61 6d65 206e 6f74       if name not
+0001b6a0: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
+0001b6b0: 6574 735b 6167 656e 7431 5d5b 224c 6961  ets[agent1]["Lia
+0001b6c0: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
+0001b6d0: 6974 7922 5d3a 0d0a 2020 2020 2020 2020  ity"]:..        
+0001b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b700: 2020 2020 2020 2020 2020 2320 4147 454e            # AGEN
-0001b710: 5420 320d 0a20 2020 2020 2020 2020 2020  T 2..           
-0001b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b730: 2023 0d0a 0d0a 2020 2020 2020 2020 2020   #....          
+0001b700: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
+0001b710: 6167 656e 7431 5d5b 224c 6961 6269 6c69  agent1]["Liabili
+0001b720: 7469 6573 2061 6e64 2045 7175 6974 7922  ties and Equity"
+0001b730: 5d5b 6e61 6d65 5d20 3d20 2222 0d0a 0d0a  ][name] = ""....
 0001b740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b750: 2020 6966 2061 6765 6e74 3220 6e6f 7420    if agent2 not 
-0001b760: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
-0001b770: 7473 3a0d 0a20 2020 2020 2020 2020 2020  ts:..           
-0001b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b790: 2020 2020 2063 6f6d 6269 6e65 645f 7368       combined_sh
-0001b7a0: 6565 7473 5b61 6765 6e74 325d 203d 207b  eets[agent2] = {
-0001b7b0: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
+0001b750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b760: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
+0001b770: 6574 735b 6167 656e 7431 5d5b 224c 6961  ets[agent1]["Lia
+0001b780: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
+0001b790: 6974 7922 5d5b 6e61 6d65 5d20 2b3d 2071  ity"][name] += q
+0001b7a0: 202b 2073 7562 6a65 6374 202b 2022 5c6e   + subject + "\n
+0001b7b0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
 0001b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b7d0: 2069 6620 2241 7373 6574 7322 206e 6f74   if "Assets" not
-0001b7e0: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
-0001b7f0: 6574 735b 6167 656e 7432 5d3a 0d0a 2020  ets[agent2]:..  
-0001b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b810: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0001b820: 6d62 696e 6564 5f73 6865 6574 735b 6167  mbined_sheets[ag
-0001b830: 656e 7432 5d5b 2241 7373 6574 7322 5d20  ent2]["Assets"] 
-0001b840: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
+0001b7d0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0001b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b800: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
+0001b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b820: 2020 2020 6966 2073 7472 2866 696c 6564      if str(filed
+0001b830: 6174 615b 2269 6e63 6f6d 6531 225d 2920  ata["income1"]) 
+0001b840: 213d 2027 4e6f 6e65 273a 0d0a 2020 2020  != 'None':..    
 0001b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b860: 2020 6966 2022 4c69 6162 696c 6974 6965    if "Liabilitie
-0001b870: 7320 616e 6420 4571 7569 7479 2220 6e6f  s and Equity" no
-0001b880: 7420 696e 2063 6f6d 6269 6e65 645f 7368  t in combined_sh
-0001b890: 6565 7473 5b61 6765 6e74 325d 3a0d 0a20  eets[agent2]:.. 
+0001b860: 2020 2020 2020 2020 2020 2020 6d79 6469              mydi
+0001b870: 6374 203d 207b 2247 6169 6e22 3a20 2247  ct = {"Gain": "G
+0001b880: 6169 6e73 222c 0d0a 2020 2020 2020 2020  ains",..        
+0001b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001b8c0: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
-0001b8d0: 6765 6e74 325d 5b22 4c69 6162 696c 6974  gent2]["Liabilit
-0001b8e0: 6965 7320 616e 6420 4571 7569 7479 225d  ies and Equity"]
-0001b8f0: 203d 207b 7d0d 0a0d 0a20 2020 2020 2020   = {}....       
-0001b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b910: 2020 2020 2066 6f72 2063 6861 6e67 6520       for change 
-0001b920: 696e 2061 7373 6574 7332 2e73 706c 6974  in assets2.split
-0001b930: 2822 5c6e 2229 3a0d 0a0d 0a20 2020 2020  ("\n"):....     
-0001b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b950: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-0001b960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b980: 2020 2020 2073 6967 6e20 3d20 6368 616e       sign = chan
-0001b990: 6765 5b30 5d20 2023 2066 6972 7374 206c  ge[0]  # first l
-0001b9a0: 6574 7465 7220 6973 2073 6967 6e20 2b20  etter is sign + 
-0001b9b0: 6f72 202d 0d0a 0d0a 2020 2020 2020 2020  or -....        
-0001b9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9d0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-0001b9e0: 203d 2063 6861 6e67 655b 313a 5d2e 7374   = change[1:].st
-0001b9f0: 7269 7028 290d 0a20 2020 2020 2020 2020  rip()..         
-0001ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba10: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-0001ba20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b8b0: 2020 224c 6f73 7322 3a20 224c 6f73 7365    "Loss": "Losse
+0001b8c0: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
+0001b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001b8f0: 4578 7065 6e73 6522 3a20 2245 7870 656e  Expense": "Expen
+0001b900: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
+0001b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b930: 2022 5265 7665 6e75 6522 3a20 2252 6576   "Revenue": "Rev
+0001b940: 656e 7565 7322 2c0d 0a20 2020 2020 2020  enues",..       
+0001b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b970: 2020 2022 5461 7822 3a20 2254 6178 6573     "Tax": "Taxes
+0001b980: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0001b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9a0: 2020 2020 2020 2020 2020 2020 2020 224e                "N
+0001b9b0: 6f6e 7461 782e 2050 726f 6669 7422 3a20  ontax. Profit": 
+0001b9c0: 224e 6f6e 7461 7861 626c 6520 5072 6f66  "Nontaxable Prof
+0001b9d0: 6974 7322 2c0d 0a20 2020 2020 2020 2020  its",..         
+0001b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba00: 2022 4e6f 6e74 6178 2e20 4c6f 7373 223a   "Nontax. Loss":
+0001ba10: 2022 4e6f 6e74 6178 6162 6c65 204c 6f73   "Nontaxable Los
+0001ba20: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
 0001ba30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba40: 2020 2020 2020 2020 2071 203d 2073 796d           q = sym
-0001ba50: 7079 2e6c 6174 6578 2873 796d 7079 2e73  py.latex(sympy.s
-0001ba60: 696d 706c 6966 7928 7369 676e 202b 2066  implify(sign + f
-0001ba70: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
-0001ba80: 7922 5d29 2c20 6d6f 6465 3d22 696e 6c69  y"]), mode="inli
-0001ba90: 6e65 2229 0d0a 2020 2020 2020 2020 2020  ne")..          
-0001baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bab0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-0001bac0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-0001bad0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001baf0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-0001bb00: 6f74 6966 7928 0d0a 2020 2020 2020 2020  otify(..        
-0001bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb30: 2020 2020 2243 616e 6e6f 7420 6861 6e64      "Cannot hand
-0001bb40: 6c65 2074 6865 2073 796d 626f 6c69 6320  le the symbolic 
-0001bb50: 6578 7072 6573 7369 6f6e 2025 7322 2025  expression %s" %
-0001bb60: 2073 6967 6e20 2b20 6669 6c65 6461 7461   sign + filedata
-0001bb70: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-0001bb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bba0: 2020 2022 7175 616e 7469 7479 225d 2c74     "quantity"],t
-0001bbb0: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
-0001bbc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba50: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
+0001ba60: 223a 2022 4e6f 6e2d 4f70 6572 6174 696f  ": "Non-Operatio
+0001ba70: 6e61 6c20 496e 636f 6d65 222c 0d0a 2020  nal Income",..  
+0001ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001baa0: 2020 2020 2020 2020 2249 6e74 6572 6573          "Interes
+0001bab0: 7422 3a20 2249 6e74 6572 6573 7420 5061  t": "Interest Pa
+0001bac0: 796d 656e 7473 227d 0d0a 0d0a 2020 2020  yments"}....    
+0001bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bae0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+0001baf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb10: 2020 2020 2020 7120 3d20 7379 6d70 792e        q = sympy.
+0001bb20: 6c61 7465 7828 7379 6d70 792e 7369 6d70  latex(sympy.simp
+0001bb30: 6c69 6679 2873 6967 6e20 2b20 6669 6c65  lify(sign + file
+0001bb40: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
+0001bb50: 292c 206d 6f64 653d 2269 6e6c 696e 6522  ), mode="inline"
+0001bb60: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001bb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb80: 2020 2020 2020 2073 7562 6a65 6374 203d         subject =
+0001bb90: 2022 2020 2028 2220 2b20 6669 6c65 6461   "   (" + fileda
+0001bba0: 7461 5b22 7375 626a 6563 7422 5d2e 7265  ta["subject"].re
+0001bbb0: 706c 6163 6528 225f 222c 2022 2022 2920  place("_", " ") 
+0001bbc0: 2b20 2229 220d 0a20 2020 2020 2020 2020  + ")"..         
 0001bbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bbe0: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
-0001bbf0: 2020 2028 2220 2b20 6669 6c65 6461 7461     (" + filedata
-0001bc00: 5b22 7375 626a 6563 7422 5d2e 7265 706c  ["subject"].repl
-0001bc10: 6163 6528 225f 222c 2022 2022 2920 2b20  ace("_", " ") + 
-0001bc20: 2229 220d 0a0d 0a20 2020 2020 2020 2020  ")"....         
-0001bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc40: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
-0001bc50: 6d65 206e 6f74 2069 6e20 636f 6d62 696e  me not in combin
-0001bc60: 6564 5f73 6865 6574 735b 6167 656e 7432  ed_sheets[agent2
-0001bc70: 5d5b 2241 7373 6574 7322 5d3a 0d0a 2020  ]["Assets"]:..  
+0001bbe0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+0001bbf0: 6e65 645f 696e 636f 6d65 5b61 6765 6e74  ned_income[agent
+0001bc00: 315d 5b6d 7964 6963 745b 6669 6c65 6461  1][mydict[fileda
+0001bc10: 7461 5b22 696e 636f 6d65 3122 5d5d 5d2e  ta["income1"]]].
+0001bc20: 6170 7065 6e64 2828 7374 7228 7129 2c20  append((str(q), 
+0001bc30: 7375 626a 6563 7429 290d 0a0d 0a20 2020  subject))....   
+0001bc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc50: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+0001bc60: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0001bc70: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
 0001bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bca0: 2020 2020 2020 636f 6d62 696e 6564 5f73        combined_s
-0001bcb0: 6865 6574 735b 6167 656e 7432 5d5b 2241  heets[agent2]["A
-0001bcc0: 7373 6574 7322 5d5b 6e61 6d65 5d20 3d20  ssets"][name] = 
-0001bcd0: 2222 0d0a 0d0a 2020 2020 2020 2020 2020  ""....          
-0001bce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bcf0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
-0001bd00: 6564 5f73 6865 6574 735b 6167 656e 7432  ed_sheets[agent2
-0001bd10: 5d5b 2241 7373 6574 7322 5d5b 6e61 6d65  ]["Assets"][name
-0001bd20: 5d20 2b3d 2071 202b 2073 7562 6a65 6374  ] += q + subject
-0001bd30: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-0001bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bd50: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-0001bd60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bd80: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
-0001bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bda0: 2020 2020 2020 2020 2020 666f 7220 6368            for ch
-0001bdb0: 616e 6765 2069 6e20 6c69 6162 7332 2e73  ange in liabs2.s
-0001bdc0: 706c 6974 2822 5c6e 2229 3a0d 0a20 2020  plit("\n"):..   
-0001bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bde0: 2020 2020 2020 2020 2020 2020 2074 7279               try
-0001bdf0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be10: 2020 2020 2020 2073 6967 6e20 3d20 6368         sign = ch
-0001be20: 616e 6765 5b30 5d20 2023 2066 6972 7374  ange[0]  # first
-0001be30: 206c 6574 7465 7220 6973 2073 6967 6e20   letter is sign 
-0001be40: 2b20 6f72 202d 0d0a 0d0a 2020 2020 2020  + or -....      
-0001be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be60: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-0001be70: 6d65 203d 2063 6861 6e67 655b 313a 5d2e  me = change[1:].
-0001be80: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
-0001be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bea0: 2020 2020 2020 2020 2020 2020 2074 7279               try
-0001beb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bed0: 2020 2020 2020 2020 2020 2071 203d 2073             q = s
-0001bee0: 796d 7079 2e6c 6174 6578 2873 796d 7079  ympy.latex(sympy
-0001bef0: 2e73 696d 706c 6966 7928 7369 676e 202b  .simplify(sign +
-0001bf00: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
-0001bf10: 6974 7922 5d29 2c20 6d6f 6465 3d22 696e  ity"]), mode="in
-0001bf20: 6c69 6e65 2229 0d0a 2020 2020 2020 2020  line")..        
-0001bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf40: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0001bf50: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0001bf60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001bf90: 2e6e 6f74 6966 7928 0d0a 2020 2020 2020  .notify(..      
+0001bc90: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001bca0: 7469 6679 280d 0a20 2020 2020 2020 2020  tify(..         
+0001bcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bcc0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001bcd0: 4361 6e6e 6f74 2068 616e 646c 6520 7468  Cannot handle th
+0001bce0: 6520 7379 6d62 6f6c 6963 2065 7870 7265  e symbolic expre
+0001bcf0: 7373 696f 6e20 2573 2220 2520 7369 676e  ssion %s" % sign
+0001bd00: 202b 2066 696c 6564 6174 615b 2271 7561   + filedata["qua
+0001bd10: 6e74 6974 7922 5d2c 7469 746c 653d 2245  ntity"],title="E
+0001bd20: 7272 6f72 2229 0d0a 0d0a 0d0a 2020 2020  rror")......    
+0001bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd40: 2020 2020 2020 2020 230d 0a20 2020 2020          #..     
+0001bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd60: 2020 2020 2020 2023 2041 4745 4e54 2032         # AGENT 2
+0001bd70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bd80: 2020 2020 2020 2020 2020 2020 2020 230d                #.
+0001bd90: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001bda0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001bdb0: 6620 6167 656e 7432 206e 6f74 2069 6e20  f agent2 not in 
+0001bdc0: 636f 6d62 696e 6564 5f73 6865 6574 733a  combined_sheets:
+0001bdd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bdf0: 2020 636f 6d62 696e 6564 5f73 6865 6574    combined_sheet
+0001be00: 735b 6167 656e 7432 5d20 3d20 7b7d 0d0a  s[agent2] = {}..
+0001be10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001be20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001be30: 2022 4173 7365 7473 2220 6e6f 7420 696e   "Assets" not in
+0001be40: 2063 6f6d 6269 6e65 645f 7368 6565 7473   combined_sheets
+0001be50: 5b61 6765 6e74 325d 3a0d 0a20 2020 2020  [agent2]:..     
+0001be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001be70: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+0001be80: 6e65 645f 7368 6565 7473 5b61 6765 6e74  ned_sheets[agent
+0001be90: 325d 5b22 4173 7365 7473 225d 203d 207b  2]["Assets"] = {
+0001bea0: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
+0001beb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001bec0: 6620 224c 6961 6269 6c69 7469 6573 2061  f "Liabilities a
+0001bed0: 6e64 2045 7175 6974 7922 206e 6f74 2069  nd Equity" not i
+0001bee0: 6e20 636f 6d62 696e 6564 5f73 6865 6574  n combined_sheet
+0001bef0: 735b 6167 656e 7432 5d3a 0d0a 2020 2020  s[agent2]:..    
+0001bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bf10: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+0001bf20: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
+0001bf30: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
+0001bf40: 2061 6e64 2045 7175 6974 7922 5d20 3d20   and Equity"] = 
+0001bf50: 7b7d 0d0a 0d0a 2020 2020 2020 2020 2020  {}....          
+0001bf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bf70: 2020 666f 7220 6368 616e 6765 2069 6e20    for change in 
+0001bf80: 6173 7365 7473 322e 7370 6c69 7428 225c  assets2.split("\
+0001bf90: 6e22 293a 0d0a 0d0a 2020 2020 2020 2020  n"):....        
 0001bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bfc0: 2020 2020 2020 2243 616e 6e6f 7420 6861        "Cannot ha
-0001bfd0: 6e64 6c65 2074 6865 2073 796d 626f 6c69  ndle the symboli
-0001bfe0: 6320 6578 7072 6573 7369 6f6e 2025 7322  c expression %s"
-0001bff0: 2025 2073 6967 6e20 2b20 6669 6c65 6461   % sign + fileda
-0001c000: 7461 5b0d 0a20 2020 2020 2020 2020 2020  ta[..           
-0001c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfb0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfe0: 2020 7369 676e 203d 2063 6861 6e67 655b    sign = change[
+0001bff0: 305d 2020 2320 6669 7273 7420 6c65 7474  0]  # first lett
+0001c000: 6572 2069 7320 7369 676e 202b 206f 7220  er is sign + or 
+0001c010: 2d0d 0a0d 0a20 2020 2020 2020 2020 2020  -....           
 0001c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c030: 2020 2020 2022 7175 616e 7469 7479 225d       "quantity"]
-0001c040: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
-0001c050: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001c030: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
+0001c040: 6368 616e 6765 5b31 3a5d 2e73 7472 6970  change[1:].strip
+0001c050: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
 0001c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c070: 2020 2020 2020 2073 7562 6a65 6374 203d         subject =
-0001c080: 2022 2020 2028 2220 2b20 6669 6c65 6461   "   (" + fileda
-0001c090: 7461 5b22 7375 626a 6563 7422 5d2e 7265  ta["subject"].re
-0001c0a0: 706c 6163 6528 225f 222c 2022 2022 2920  place("_", " ") 
-0001c0b0: 2b20 2229 220d 0a0d 0a20 2020 2020 2020  + ")"....       
-0001c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c0d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001c0e0: 6e61 6d65 206e 6f74 2069 6e20 636f 6d62  name not in comb
-0001c0f0: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
-0001c100: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
-0001c110: 2061 6e64 2045 7175 6974 7922 5d3a 0d0a   and Equity"]:..
-0001c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c070: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c0a0: 2020 2020 2020 7120 3d20 7379 6d70 792e        q = sympy.
+0001c0b0: 6c61 7465 7828 7379 6d70 792e 7369 6d70  latex(sympy.simp
+0001c0c0: 6c69 6679 2873 6967 6e20 2b20 6669 6c65  lify(sign + file
+0001c0d0: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
+0001c0e0: 292c 206d 6f64 653d 2269 6e6c 696e 6522  ), mode="inline"
+0001c0f0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c110: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0001c120: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
 0001c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c140: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-0001c150: 5f73 6865 6574 735b 6167 656e 7432 5d5b  _sheets[agent2][
-0001c160: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
-0001c170: 2045 7175 6974 7922 5d5b 6e61 6d65 5d20   Equity"][name] 
-0001c180: 3d20 2222 0d0a 0d0a 2020 2020 2020 2020  = ""....        
-0001c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1a0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-0001c1b0: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
-0001c1c0: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
-0001c1d0: 2061 6e64 2045 7175 6974 7922 5d5b 6e61   and Equity"][na
-0001c1e0: 6d65 5d20 2b3d 2071 202b 2073 7562 6a65  me] += q + subje
-0001c1f0: 6374 202b 2022 5c6e 220d 0a20 2020 2020  ct + "\n"..     
-0001c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c210: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0001c220: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+0001c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c150: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+0001c160: 6679 280d 0a20 2020 2020 2020 2020 2020  fy(..           
+0001c170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c190: 2022 4361 6e6e 6f74 2068 616e 646c 6520   "Cannot handle 
+0001c1a0: 7468 6520 7379 6d62 6f6c 6963 2065 7870  the symbolic exp
+0001c1b0: 7265 7373 696f 6e20 2573 2220 2520 7369  ression %s" % si
+0001c1c0: 676e 202b 2066 696c 6564 6174 615b 0d0a  gn + filedata[..
+0001c1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c200: 2271 7561 6e74 6974 7922 5d2c 7469 746c  "quantity"],titl
+0001c210: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
+0001c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c240: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-0001c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c260: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0001c270: 7472 2866 696c 6564 6174 615b 2269 6e63  tr(filedata["inc
-0001c280: 6f6d 6532 225d 2920 213d 2027 4e6f 6e65  ome2"]) != 'None
-0001c290: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
-0001c2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c2b0: 2020 2020 6d79 6469 6374 203d 207b 2247      mydict = {"G
-0001c2c0: 6169 6e22 3a20 2247 6169 6e73 222c 0d0a  ain": "Gains",..
-0001c2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c240: 2020 7375 626a 6563 7420 3d20 2220 2020    subject = "   
+0001c250: 2822 202b 2066 696c 6564 6174 615b 2273  (" + filedata["s
+0001c260: 7562 6a65 6374 225d 2e72 6570 6c61 6365  ubject"].replace
+0001c270: 2822 5f22 2c20 2220 2229 202b 2022 2922  ("_", " ") + ")"
+0001c280: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c2a0: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
+0001c2b0: 6e6f 7420 696e 2063 6f6d 6269 6e65 645f  not in combined_
+0001c2c0: 7368 6565 7473 5b61 6765 6e74 325d 5b22  sheets[agent2]["
+0001c2d0: 4173 7365 7473 225d 3a0d 0a20 2020 2020  Assets"]:..     
 0001c2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c2f0: 2020 2020 2020 2020 2020 224c 6f73 7322            "Loss"
-0001c300: 3a20 224c 6f73 7365 7322 2c0d 0a20 2020  : "Losses",..   
-0001c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c330: 2020 2020 2020 2022 4578 7065 6e73 6522         "Expense"
-0001c340: 3a20 2245 7870 656e 7365 7322 2c0d 0a20  : "Expenses",.. 
-0001c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c370: 2020 2020 2020 2020 2022 5265 7665 6e75           "Revenu
-0001c380: 6522 3a20 2252 6576 656e 7565 7322 2c0d  e": "Revenues",.
-0001c390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c300: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
+0001c310: 7473 5b61 6765 6e74 325d 5b22 4173 7365  ts[agent2]["Asse
+0001c320: 7473 225d 5b6e 616d 655d 203d 2022 220d  ts"][name] = "".
+0001c330: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001c340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c350: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+0001c360: 7368 6565 7473 5b61 6765 6e74 325d 5b22  sheets[agent2]["
+0001c370: 4173 7365 7473 225d 5b6e 616d 655d 202b  Assets"][name] +
+0001c380: 3d20 7120 2b20 7375 626a 6563 7420 2b20  = q + subject + 
+0001c390: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
 0001c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3b0: 2020 2020 2020 2020 2020 2022 5461 7822             "Tax"
-0001c3c0: 3a20 2254 6178 6573 222c 0d0a 2020 2020  : "Taxes",..    
+0001c3b0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+0001c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3f0: 2020 2020 2020 224e 6f6e 7461 782e 2050        "Nontax. P
-0001c400: 726f 6669 7422 3a20 224e 6f6e 7461 7861  rofit": "Nontaxa
-0001c410: 626c 6520 5072 6f66 6974 7322 2c0d 0a20  ble Profits",.. 
-0001c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c3e0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
+0001c3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c400: 2020 2020 2020 2066 6f72 2063 6861 6e67         for chang
+0001c410: 6520 696e 206c 6961 6273 322e 7370 6c69  e in liabs2.spli
+0001c420: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
 0001c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c440: 2020 2020 2020 2020 2022 4e6f 6e74 6178           "Nontax
-0001c450: 2e20 4c6f 7373 223a 2022 4e6f 6e74 6178  . Loss": "Nontax
-0001c460: 6162 6c65 204c 6f73 7365 7322 2c0d 0a20  able Losses",.. 
-0001c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c490: 2020 2020 2020 2020 2022 4e6f 6e2d 4f70           "Non-Op
-0001c4a0: 2e20 496e 636f 6d65 223a 2022 4e6f 6e2d  . Income": "Non-
-0001c4b0: 4f70 6572 6174 696f 6e61 6c20 496e 636f  Operational Inco
-0001c4c0: 6d65 222c 0d0a 2020 2020 2020 2020 2020  me",..          
-0001c4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4f0: 2249 6e74 6572 6573 7422 3a20 2249 6e74  "Interest": "Int
-0001c500: 6572 6573 7420 5061 796d 656e 7473 227d  erest Payments"}
-0001c510: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001c440: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0001c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c470: 2020 2020 7369 676e 203d 2063 6861 6e67      sign = chang
+0001c480: 655b 305d 2020 2320 6669 7273 7420 6c65  e[0]  # first le
+0001c490: 7474 6572 2069 7320 7369 676e 202b 206f  tter is sign + o
+0001c4a0: 7220 2d0d 0a0d 0a20 2020 2020 2020 2020  r -....         
+0001c4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c4c0: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+0001c4d0: 3d20 6368 616e 6765 5b31 3a5d 2e73 7472  = change[1:].str
+0001c4e0: 6970 2829 0d0a 2020 2020 2020 2020 2020  ip()..          
+0001c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c500: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0001c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c530: 2020 7120 3d20 7379 6d70 792e 6c61 7465    q = sympy.late
-0001c540: 7828 7379 6d70 792e 7369 6d70 6c69 6679  x(sympy.simplify
-0001c550: 2873 6967 6e20 2b20 6669 6c65 6461 7461  (sign + filedata
-0001c560: 5b22 7175 616e 7469 7479 225d 292c 206d  ["quantity"]), m
-0001c570: 6f64 653d 2269 6e6c 696e 6522 290d 0a20  ode="inline").. 
-0001c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c590: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001c5a0: 7562 6a65 6374 203d 2022 2020 2028 2220  ubject = "   (" 
-0001c5b0: 2b20 6669 6c65 6461 7461 5b22 7375 626a  + filedata["subj
-0001c5c0: 6563 7422 5d2e 7265 706c 6163 6528 225f  ect"].replace("_
-0001c5d0: 222c 2022 2022 2920 2b20 2229 220d 0a20  ", " ") + ")".. 
-0001c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c5f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001c600: 6f6d 6269 6e65 645f 696e 636f 6d65 5b61  ombined_income[a
-0001c610: 6765 6e74 325d 5b6d 7964 6963 745b 6669  gent2][mydict[fi
-0001c620: 6c65 6461 7461 5b22 696e 636f 6d65 3222  ledata["income2"
-0001c630: 5d5d 5d2e 6170 7065 6e64 2828 7374 7228  ]]].append((str(
-0001c640: 7129 2c20 7375 626a 6563 7429 290d 0a0d  q), subject))...
-0001c650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c670: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   # =============
-0001c680: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0d  ===============.
-0001c690: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001c6a0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001c6b0: 7261 6e73 6665 725f 7374 7220 3d20 2222  ransfer_str = ""
-0001c6c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6e0: 6966 2063 6f6e 7665 7274 5f62 6f6f 6c28  if convert_bool(
-0001c6f0: 6669 6c65 6461 7461 5b22 6c6f 6720 7472  filedata["log tr
-0001c700: 616e 7361 6374 696f 6e22 5d29 3a0d 0a20  ansaction"]):.. 
-0001c710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c720: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001c730: 7261 6e73 6665 725f 7374 7220 3d20 225c  ransfer_str = "\
-0001c740: 6e46 6c6f 773a 7e22 202b 2066 696c 6564  nFlow:~" + filed
-0001c750: 6174 615b 226b 696e 6422 5d2e 7374 7269  ata["kind"].stri
-0001c760: 7028 292e 7265 706c 6163 6528 222d 3e22  p().replace("->"
-0001c770: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001c530: 2020 2020 2020 2020 7120 3d20 7379 6d70          q = symp
+0001c540: 792e 6c61 7465 7828 7379 6d70 792e 7369  y.latex(sympy.si
+0001c550: 6d70 6c69 6679 2873 6967 6e20 2b20 6669  mplify(sign + fi
+0001c560: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
+0001c570: 225d 292c 206d 6f64 653d 2269 6e6c 696e  "]), mode="inlin
+0001c580: 6522 290d 0a20 2020 2020 2020 2020 2020  e")..           
+0001c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c5a0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+0001c5b0: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+0001c5c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c5e0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001c5f0: 7469 6679 280d 0a20 2020 2020 2020 2020  tify(..         
+0001c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c620: 2020 2022 4361 6e6e 6f74 2068 616e 646c     "Cannot handl
+0001c630: 6520 7468 6520 7379 6d62 6f6c 6963 2065  e the symbolic e
+0001c640: 7870 7265 7373 696f 6e20 2573 2220 2520  xpression %s" % 
+0001c650: 7369 676e 202b 2066 696c 6564 6174 615b  sign + filedata[
+0001c660: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001c670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c690: 2020 2271 7561 6e74 6974 7922 5d2c 7469    "quantity"],ti
+0001c6a0: 746c 653d 2245 7272 6f72 2229 0d0a 0d0a  tle="Error")....
+0001c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c6d0: 2020 2020 7375 626a 6563 7420 3d20 2220      subject = " 
+0001c6e0: 2020 2822 202b 2066 696c 6564 6174 615b    (" + filedata[
+0001c6f0: 2273 7562 6a65 6374 225d 2e72 6570 6c61  "subject"].repla
+0001c700: 6365 2822 5f22 2c20 2220 2229 202b 2022  ce("_", " ") + "
+0001c710: 2922 0d0a 0d0a 2020 2020 2020 2020 2020  )"....          
+0001c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c730: 2020 2020 2020 2020 2020 6966 206e 616d            if nam
+0001c740: 6520 6e6f 7420 696e 2063 6f6d 6269 6e65  e not in combine
+0001c750: 645f 7368 6565 7473 5b61 6765 6e74 325d  d_sheets[agent2]
+0001c760: 5b22 4c69 6162 696c 6974 6965 7320 616e  ["Liabilities an
+0001c770: 6420 4571 7569 7479 225d 3a0d 0a20 2020  d Equity"]:..   
 0001c780: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7d0: 2224 5c5c 7269 6768 7461 7272 6f77 2422  "$\\rightarrow$"
-0001c7e0: 2920 2b20 2226 7e5c 5c5c 5c22 202b 2022  ) + "&~\\\\" + "
-0001c7f0: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-0001c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c810: 2020 2020 2074 7261 6e73 6665 725f 7374       transfer_st
-0001c820: 7220 2b3d 2022 5375 626a 6563 743a 7e22  r += "Subject:~"
-0001c830: 202b 2066 696c 6564 6174 615b 2273 7562   + filedata["sub
-0001c840: 6a65 6374 225d 2e73 7472 6970 2829 2e74  ject"].strip().t
-0001c850: 6974 6c65 2829 202b 2022 267e 5c5c 5c5c  itle() + "&~\\\\
-0001c860: 2220 2b20 225c 6e22 0d0a 2020 2020 2020  " + "\n"..      
-0001c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c880: 2020 2020 2020 2020 2020 2320 7472 616e            # tran
-0001c890: 7366 6572 5f73 7472 202b 3d20 2251 7561  sfer_str += "Qua
-0001c8a0: 6e74 6974 793a 7e22 202b 2066 696c 6564  ntity:~" + filed
-0001c8b0: 6174 615b 2271 7561 6e74 6974 7922 5d2e  ata["quantity"].
-0001c8c0: 7374 7269 7028 2920 2b20 2226 7e5c 5c5c  strip() + "&~\\\
-0001c8d0: 5c22 2b20 225c 6e22 0d0a 0d0a 2020 2020  \"+ "\n"....    
-0001c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c8f0: 2020 2020 2020 2020 7461 626c 655f 7374          table_st
-0001c900: 7220 3d20 2222 225c 5c62 6567 696e 7b74  r = """\\begin{t
-0001c910: 6162 756c 6172 7d7b 6c6c 7d0d 0a0d 0a20  abular}{ll}.... 
-0001c920: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-0001c930: 7320 2620 2573 205c 5c5c 5c0d 0a20 2020  s & %s \\\\..   
-0001c940: 2020 2020 2020 2020 2020 2020 207e 2026               ~ &
-0001c950: 207e 205c 5c5c 5c0d 0a20 2020 2020 2020   ~ \\\\..       
-0001c960: 2020 2020 2020 2020 2022 2222 2025 2028           """ % (
-0001c970: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
-0001c980: 225d 2c20 6669 6c65 6461 7461 5b22 6167  "], filedata["ag
-0001c990: 656e 7432 225d 290d 0a20 2020 2020 2020  ent2"])..       
-0001c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c9b0: 2020 2020 2074 6162 6c65 5f73 7472 202b       table_str +
-0001c9c0: 3d20 7465 785f 7461 626c 6531 202b 2022  = tex_table1 + "
-0001c9d0: 2622 202b 2074 6578 5f74 6162 6c65 3220  &" + tex_table2 
-0001c9e0: 2b20 225c 5c5c 5c5c 5c5c 5c22 202b 2074  + "\\\\\\\\" + t
-0001c9f0: 7261 6e73 6665 725f 7374 720d 0a0d 0a20  ransfer_str.... 
+0001c7a0: 2020 2020 2063 6f6d 6269 6e65 645f 7368       combined_sh
+0001c7b0: 6565 7473 5b61 6765 6e74 325d 5b22 4c69  eets[agent2]["Li
+0001c7c0: 6162 696c 6974 6965 7320 616e 6420 4571  abilities and Eq
+0001c7d0: 7569 7479 225d 5b6e 616d 655d 203d 2022  uity"][name] = "
+0001c7e0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c800: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+0001c810: 645f 7368 6565 7473 5b61 6765 6e74 325d  d_sheets[agent2]
+0001c820: 5b22 4c69 6162 696c 6974 6965 7320 616e  ["Liabilities an
+0001c830: 6420 4571 7569 7479 225d 5b6e 616d 655d  d Equity"][name]
+0001c840: 202b 3d20 7120 2b20 7375 626a 6563 7420   += q + subject 
+0001c850: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
+0001c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c870: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0001c880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c8a0: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
+0001c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c8c0: 2020 2020 2020 2020 2069 6620 7374 7228           if str(
+0001c8d0: 6669 6c65 6461 7461 5b22 696e 636f 6d65  filedata["income
+0001c8e0: 3222 5d29 2021 3d20 274e 6f6e 6527 3a0d  2"]) != 'None':.
+0001c8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c910: 206d 7964 6963 7420 3d20 7b22 4761 696e   mydict = {"Gain
+0001c920: 223a 2022 4761 696e 7322 2c0d 0a20 2020  ": "Gains",..   
+0001c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c950: 2020 2020 2020 2022 4c6f 7373 223a 2022         "Loss": "
+0001c960: 4c6f 7373 6573 222c 0d0a 2020 2020 2020  Losses",..      
+0001c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c990: 2020 2020 2245 7870 656e 7365 223a 2022      "Expense": "
+0001c9a0: 4578 7065 6e73 6573 222c 0d0a 2020 2020  Expenses",..    
+0001c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9d0: 2020 2020 2020 2252 6576 656e 7565 223a        "Revenue":
+0001c9e0: 2022 5265 7665 6e75 6573 222c 0d0a 2020   "Revenues",..  
+0001c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca10: 2020 2020 2020 2020 2020 2074 6162 6c65             table
-0001ca20: 5f73 7472 202b 3d20 225c 6e5c 6e5c 5c65  _str += "\n\n\\e
-0001ca30: 6e64 7b74 6162 756c 6172 7d22 0d0a 2020  nd{tabular}"..  
+0001ca10: 2020 2020 2020 2020 2254 6178 223a 2022          "Tax": "
+0001ca20: 5461 7865 7322 2c0d 0a20 2020 2020 2020  Taxes",..       
+0001ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca50: 2020 2020 2020 2020 2020 7465 7873 7472            texstr
-0001ca60: 202b 3d20 2222 225c 5c62 6567 696e 7b74   += """\\begin{t
-0001ca70: 6162 6c65 7d5b 485d 5c6e 2222 220d 0a20  able}[H]\n""".. 
+0001ca50: 2020 2022 4e6f 6e74 6178 2e20 5072 6f66     "Nontax. Prof
+0001ca60: 6974 223a 2022 4e6f 6e74 6178 6162 6c65  it": "Nontaxable
+0001ca70: 2050 726f 6669 7473 222c 0d0a 2020 2020   Profits",..    
 0001ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca90: 2020 2020 2020 2020 2020 2074 6578 7374             texst
-0001caa0: 7220 2b3d 2074 6162 6c65 5f73 7472 0d0a  r += table_str..
-0001cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cac0: 2020 2020 2020 2020 2020 2020 7465 7873              texs
-0001cad0: 7472 202b 3d20 2222 225c 6361 7074 696f  tr += """\captio
-0001cae0: 6e7b 2573 7d5c 6e5c 656e 647b 7461 626c  n{%s}\n\end{tabl
-0001caf0: 657d 2222 2220 2520 2866 696c 6564 6174  e}""" % (filedat
-0001cb00: 615b 2273 7562 6a65 6374 225d 202b 2022  a["subject"] + "
-0001cb10: 2825 7329 2225 6669 6c65 6461 7461 5b22  (%s)"%filedata["
-0001cb20: 7368 6f72 746e 616d 6522 5d29 0d0a 0d0a  shortname"])....
-0001cb30: 2020 2020 2020 2020 2020 2020 7465 7873              texs
-0001cb40: 7472 203d 2074 6578 7374 722e 7265 706c  tr = texstr.repl
-0001cb50: 6163 6528 225f 222c 2022 2022 290d 0a20  ace("_", " ").. 
-0001cb60: 2020 2020 2020 2020 2020 2074 6578 7374             texst
-0001cb70: 7220 3d20 7465 7873 7472 2e72 6570 6c61  r = texstr.repla
-0001cb80: 6365 2822 4e6f 6e65 222c 2022 2229 0d0a  ce("None", "")..
-0001cb90: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0001cba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2061 6464  ============ add
-0001cbb0: 2063 6f6d 6269 6e65 6420 7368 6565 7473   combined sheets
-0001cbc0: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-0001cbd0: 3d3d 3d3d 3d3d 3d0d 0a20 2020 2020 2020  =======..       
-0001cbe0: 2020 2020 2070 7269 6e74 2863 6f6d 6269       print(combi
-0001cbf0: 6e65 645f 7368 6565 7473 290d 0a0d 0a20  ned_sheets).... 
-0001cc00: 2020 2020 2020 2020 2020 2023 2070 642e             # pd.
-0001cc10: 4461 7461 4672 616d 6528 636f 6d62 696e  DataFrame(combin
-0001cc20: 6564 5f73 6865 6574 7329 2e74 6f5f 6578  ed_sheets).to_ex
-0001cc30: 6365 6c28 2274 6573 742e 786c 7378 2229  cel("test.xlsx")
-0001cc40: 203c 2d20 666f 7220 6d61 6e75 616c 2074   <- for manual t
-0001cc50: 6573 7469 6e67 0d0a 0d0a 2020 2020 2020  esting....      
-0001cc60: 2020 2020 2020 2320 636f 6e76 6572 7420        # convert 
-0001cc70: 7468 6520 636f 6d62 696e 6564 2073 6865  the combined she
-0001cc80: 6574 7320 746f 2074 6578 0d0a 2020 2020  ets to tex..    
-0001cc90: 2020 2020 2020 2020 7465 7873 7472 5f63          texstr_c
-0001cca0: 6f6d 6269 6e65 6420 3d20 2222 0d0a 2020  ombined = ""..  
-0001ccb0: 2020 2020 2020 2020 2020 666f 7220 6167            for ag
-0001ccc0: 656e 742c 2064 6174 6120 696e 2063 6f6d  ent, data in com
-0001ccd0: 6269 6e65 645f 7368 6565 7473 2e69 7465  bined_sheets.ite
-0001cce0: 6d73 2829 3a0d 0a20 2020 2020 2020 2020  ms():..         
-0001ccf0: 2020 2020 2020 2061 6765 6e74 5f74 6974         agent_tit
-0001cd00: 6c65 6420 3d20 6167 656e 742e 7265 706c  led = agent.repl
-0001cd10: 6163 6528 225f 222c 2022 2022 292e 7469  ace("_", " ").ti
-0001cd20: 746c 6528 290d 0a0d 0a20 2020 2020 2020  tle()....       
-0001cd30: 2020 2020 2020 2020 2061 7373 6574 7320           assets 
-0001cd40: 3d20 6461 7461 5b22 4173 7365 7473 225d  = data["Assets"]
-0001cd50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cd60: 2020 6c69 6162 7320 3d20 6461 7461 5b22    liabs = data["
-0001cd70: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
-0001cd80: 4571 7569 7479 225d 0d0a 0d0a 2020 2020  Equity"]....    
-0001cd90: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
-0001cda0: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
-0001cdb0: 2020 205c 5c62 6567 696e 7b74 6162 6c65     \\begin{table
-0001cdc0: 7d5b 485d 0d0a 2020 2020 2020 2020 2020  }[H]..          
-0001cdd0: 2020 5c5c 6365 6e74 6572 696e 670d 0a20    \\centering.. 
-0001cde0: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
+0001ca90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001caa0: 2020 2020 2020 224e 6f6e 7461 782e 204c        "Nontax. L
+0001cab0: 6f73 7322 3a20 224e 6f6e 7461 7861 626c  oss": "Nontaxabl
+0001cac0: 6520 4c6f 7373 6573 222c 0d0a 2020 2020  e Losses",..    
+0001cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001caf0: 2020 2020 2020 224e 6f6e 2d4f 702e 2049        "Non-Op. I
+0001cb00: 6e63 6f6d 6522 3a20 224e 6f6e 2d4f 7065  ncome": "Non-Ope
+0001cb10: 7261 7469 6f6e 616c 2049 6e63 6f6d 6522  rational Income"
+0001cb20: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001cb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb40: 2020 2020 2020 2020 2020 2020 2022 496e               "In
+0001cb50: 7465 7265 7374 223a 2022 496e 7465 7265  terest": "Intere
+0001cb60: 7374 2050 6179 6d65 6e74 7322 7d0d 0a20  st Payments"}.. 
+0001cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb80: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0001cb90: 203d 2073 796d 7079 2e6c 6174 6578 2873   = sympy.latex(s
+0001cba0: 796d 7079 2e73 696d 706c 6966 7928 7369  ympy.simplify(si
+0001cbb0: 676e 202b 2066 696c 6564 6174 615b 2271  gn + filedata["q
+0001cbc0: 7561 6e74 6974 7922 5d29 2c20 6d6f 6465  uantity"]), mode
+0001cbd0: 3d22 696e 6c69 6e65 2229 0d0a 2020 2020  ="inline")..    
+0001cbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cbf0: 2020 2020 2020 2020 2020 2020 7375 626a              subj
+0001cc00: 6563 7420 3d20 2220 2020 2822 202b 2066  ect = "   (" + f
+0001cc10: 696c 6564 6174 615b 2273 7562 6a65 6374  iledata["subject
+0001cc20: 225d 2e72 6570 6c61 6365 2822 5f22 2c20  "].replace("_", 
+0001cc30: 2220 2229 202b 2022 2922 0d0a 2020 2020  " ") + ")"..    
+0001cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cc50: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+0001cc60: 696e 6564 5f69 6e63 6f6d 655b 6167 656e  ined_income[agen
+0001cc70: 7432 5d5b 6d79 6469 6374 5b66 696c 6564  t2][mydict[filed
+0001cc80: 6174 615b 2269 6e63 6f6d 6532 225d 5d5d  ata["income2"]]]
+0001cc90: 2e61 7070 656e 6428 2873 7472 2871 292c  .append((str(q),
+0001cca0: 2073 7562 6a65 6374 2929 0d0a 0d0a 2020   subject))....  
+0001ccb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ccc0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001ccd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001cce0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0d0a 0d0a  ============....
+0001ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd00: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+0001cd10: 7366 6572 5f73 7472 203d 2022 220d 0a0d  sfer_str = ""...
+0001cd20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001cd30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001cd40: 636f 6e76 6572 745f 626f 6f6c 2866 696c  convert_bool(fil
+0001cd50: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
+0001cd60: 6163 7469 6f6e 225d 293a 0d0a 2020 2020  action"]):..    
+0001cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd80: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+0001cd90: 7366 6572 5f73 7472 203d 2022 5c6e 466c  sfer_str = "\nFl
+0001cda0: 6f77 3a7e 2220 2b20 6669 6c65 6461 7461  ow:~" + filedata
+0001cdb0: 5b22 6b69 6e64 225d 2e73 7472 6970 2829  ["kind"].strip()
+0001cdc0: 2e72 6570 6c61 6365 2822 2d3e 222c 0d0a  .replace("->",..
+0001cdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001cdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce00: 6d79 7320 2b3d 2022 2222 0d0a 2020 2020  mys += """..    
-0001ce10: 2020 2020 2020 2020 5c5c 6265 6769 6e7b          \\begin{
-0001ce20: 7461 6275 6c61 727d 7b7c 6c7c 6c7c 7d0d  tabular}{|l|l|}.
-0001ce30: 0a20 2020 2020 2020 2020 2020 205c 686c  .            \hl
-0001ce40: 696e 650d 0a20 2020 2020 2020 2020 2020  ine..           
-0001ce50: 207e 267e 5c5c 5c5c 0d0a 2020 2020 2020   ~&~\\\\..      
-0001ce60: 2020 2020 2020 5c5c 7465 7874 6266 7b41        \\textbf{A
-0001ce70: 7373 6574 737d 2026 205c 5c74 6578 7462  ssets} & \\textb
-0001ce80: 667b 4c69 6162 696c 6974 6965 7320 616e  f{Liabilities an
-0001ce90: 6420 4571 7569 7479 7d5c 5c5c 5c0d 0a20  d Equity}\\\\.. 
-0001cea0: 2020 2020 2020 2020 2020 207e 267e 5c5c             ~&~\\
-0001ceb0: 5c5c 0d0a 0d0a 2020 2020 2020 2020 2020  \\....          
-0001cec0: 2020 2020 2020 2020 2020 2020 2020 2222                ""
-0001ced0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001cee0: 2020 2020 206d 7973 202b 3d20 2222 220d       mys += """.
-0001cef0: 0a20 2020 2020 2020 2020 2020 205c 5c62  .            \\b
-0001cf00: 6567 696e 7b74 6162 756c 6172 7d7b 6c6c  egin{tabular}{ll
-0001cf10: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
-0001cf20: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
-0001cf30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cf40: 2020 666f 7220 6974 656d 2c20 656e 7472    for item, entr
-0001cf50: 7920 696e 2061 7373 6574 732e 6974 656d  y in assets.item
-0001cf60: 7328 293a 0d0a 0d0a 2020 2020 2020 2020  s():....        
-0001cf70: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
-0001cf80: 2b3d 2069 7465 6d20 2b20 2226 7e20 5c5c  += item + "&~ \\
-0001cf90: 5c5c 5c68 6c69 6e65 7e26 7e5c 5c5c 5c5c  \\\hline~&~\\\\\
-0001cfa0: 6e22 0d0a 0d0a 2020 2020 2020 2020 2020  n"....          
-0001cfb0: 2020 2020 2020 2020 2020 666f 7220 7375            for su
-0001cfc0: 625f 656e 7472 7920 696e 2065 6e74 7279  b_entry in entry
-0001cfd0: 2e73 706c 6974 2822 5c6e 2229 3a0d 0a20  .split("\n"):.. 
-0001cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cff0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0001ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce20: 2020 2020 2020 2020 2020 2020 2022 245c               "$\
+0001ce30: 5c72 6967 6874 6172 726f 7724 2229 202b  \rightarrow$") +
+0001ce40: 2022 267e 5c5c 5c5c 2220 2b20 225c 6e22   "&~\\\\" + "\n"
+0001ce50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ce60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce70: 2020 7472 616e 7366 6572 5f73 7472 202b    transfer_str +
+0001ce80: 3d20 2253 7562 6a65 6374 3a7e 2220 2b20  = "Subject:~" + 
+0001ce90: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
+0001cea0: 7422 5d2e 7374 7269 7028 292e 7469 746c  t"].strip().titl
+0001ceb0: 6528 2920 2b20 2226 7e5c 5c5c 5c22 202b  e() + "&~\\\\" +
+0001cec0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+0001ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cee0: 2020 2020 2020 2023 2074 7261 6e73 6665         # transfe
+0001cef0: 725f 7374 7220 2b3d 2022 5175 616e 7469  r_str += "Quanti
+0001cf00: 7479 3a7e 2220 2b20 6669 6c65 6461 7461  ty:~" + filedata
+0001cf10: 5b22 7175 616e 7469 7479 225d 2e73 7472  ["quantity"].str
+0001cf20: 6970 2829 202b 2022 267e 5c5c 5c5c 222b  ip() + "&~\\\\"+
+0001cf30: 2022 5c6e 220d 0a0d 0a20 2020 2020 2020   "\n"....       
+0001cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf50: 2020 2020 2074 6162 6c65 5f73 7472 203d       table_str =
+0001cf60: 2022 2222 5c5c 6265 6769 6e7b 7461 6275   """\\begin{tabu
+0001cf70: 6c61 727d 7b6c 6c7d 0d0a 0d0a 2020 2020  lar}{ll}....    
+0001cf80: 2020 2020 2020 2020 2020 2020 2573 2026              %s &
+0001cf90: 2025 7320 5c5c 5c5c 0d0a 2020 2020 2020   %s \\\\..      
+0001cfa0: 2020 2020 2020 2020 2020 7e20 2620 7e20            ~ & ~ 
+0001cfb0: 5c5c 5c5c 0d0a 2020 2020 2020 2020 2020  \\\\..          
+0001cfc0: 2020 2020 2020 2222 2220 2520 2866 696c        """ % (fil
+0001cfd0: 6564 6174 615b 2261 6765 6e74 3122 5d2c  edata["agent1"],
+0001cfe0: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
+0001cff0: 3222 5d29 0d0a 2020 2020 2020 2020 2020  2"])..          
 0001d000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d010: 2020 2020 2020 2020 206c 745f 7375 6265           lt_sube
-0001d020: 6e74 7279 203d 2073 7562 5f65 6e74 7279  ntry = sub_entry
-0001d030: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d040: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-0001d050: 7320 2b3d 2022 7e26 2220 2b20 6c74 5f73  s += "~&" + lt_s
-0001d060: 7562 656e 7472 7920 2b20 225c 5c5c 5c22  ubentry + "\\\\"
-0001d070: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-0001d080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d090: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+0001d010: 2020 7461 626c 655f 7374 7220 2b3d 2074    table_str += t
+0001d020: 6578 5f74 6162 6c65 3120 2b20 2226 2220  ex_table1 + "&" 
+0001d030: 2b20 7465 785f 7461 626c 6532 202b 2022  + tex_table2 + "
+0001d040: 5c5c 5c5c 5c5c 5c5c 2220 2b20 7472 616e  \\\\\\\\" + tran
+0001d050: 7366 6572 5f73 7472 0d0a 0d0a 2020 2020  sfer_str....    
+0001d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d070: 2020 2020 2020 2020 7461 626c 655f 7374          table_st
+0001d080: 7220 2b3d 2022 5c6e 5c6e 5c5c 656e 647b  r += "\n\n\\end{
+0001d090: 7461 6275 6c61 727d 220d 0a20 2020 2020  tabular}"..     
 0001d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0b0: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
-0001d0c0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-0001d0d0: 7320 2b3d 2022 2222 0d0a 2020 2020 2020  s += """..      
-0001d0e0: 2020 2020 2020 5c65 6e64 7b74 6162 756c        \end{tabul
-0001d0f0: 6172 7d20 2620 5c5c 6265 6769 6e7b 7461  ar} & \\begin{ta
-0001d100: 6275 6c61 727d 7b6c 6c7d 2222 2220 2b20  bular}{ll}""" + 
-0001d110: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-0001d120: 2020 2020 2020 2020 666f 7220 6974 656d          for item
-0001d130: 2c20 656e 7472 7920 696e 206c 6961 6273  , entry in liabs
-0001d140: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
-0001d150: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001d160: 6620 6974 656d 2021 3d20 2245 7175 6974  f item != "Equit
-0001d170: 7922 3a0d 0a20 2020 2020 2020 2020 2020  y":..           
-0001d180: 2020 2020 2020 2020 2020 2020 206d 7973               mys
-0001d190: 202b 3d20 6974 656d 202b 2022 267e 205c   += item + "&~ \
-0001d1a0: 5c5c 5c5c 686c 696e 657e 267e 5c5c 5c5c  \\\\hline~&~\\\\
-0001d1b0: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
-0001d1c0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001d1d0: 6f72 2073 7562 5f65 6e74 7279 2069 6e20  or sub_entry in 
-0001d1e0: 656e 7472 792e 7370 6c69 7428 225c 6e22  entry.split("\n"
-0001d1f0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001d200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d210: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-0001d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d230: 2020 2020 2020 6c74 5f73 7562 656e 7472        lt_subentr
-0001d240: 7920 3d20 7375 625f 656e 7472 790d 0a20  y = sub_entry.. 
-0001d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d260: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001d270: 7973 202b 3d20 227e 2622 202b 206c 745f  ys += "~&" + lt_
-0001d280: 7375 6265 6e74 7279 202b 2022 5c5c 5c5c  subentry + "\\\\
-0001d290: 2220 2b20 225c 6e22 0d0a 2020 2020 2020  " + "\n"..      
-0001d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d2b0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-0001d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d2d0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001d2e0: 6173 730d 0a0d 0a20 2020 2020 2020 2020  ass....         
-0001d2f0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-0001d300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d310: 2069 7465 6d20 3d20 2245 7175 6974 7922   item = "Equity"
-0001d320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d330: 2020 2020 2020 656e 7472 7920 3d20 6c69        entry = li
-0001d340: 6162 735b 2245 7175 6974 7922 5d0d 0a20  abs["Equity"].. 
-0001d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d360: 2020 206d 7973 202b 3d20 6974 656d 202b     mys += item +
-0001d370: 2022 267e 205c 5c5c 5c5c 686c 696e 657e   "&~ \\\\\hline~
-0001d380: 267e 5c5c 5c5c 5c6e 220d 0a0d 0a20 2020  &~\\\\\n"....   
-0001d390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d3a0: 2066 6f72 2073 7562 5f65 6e74 7279 2069   for sub_entry i
-0001d3b0: 6e20 656e 7472 792e 7370 6c69 7428 225c  n entry.split("\
-0001d3c0: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-0001d3d0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-0001d3e0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0001d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d400: 6c74 5f73 7562 656e 7472 7920 3d20 7375  lt_subentry = su
-0001d410: 625f 656e 7472 790d 0a20 2020 2020 2020  b_entry..       
-0001d420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d430: 2020 2020 206d 7973 202b 3d20 227e 2622       mys += "~&"
-0001d440: 202b 206c 745f 7375 6265 6e74 7279 202b   + lt_subentry +
-0001d450: 2022 5c5c 5c5c 2220 2b20 225c 6e22 0d0a   "\\\\" + "\n"..
-0001d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d470: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
-0001d480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d490: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-0001d4a0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0001d4b0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0001d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d4d0: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
-0001d4e0: 2020 2020 2020 2020 6d79 7320 2b3d 2022          mys += "
-0001d4f0: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-0001d500: 5c5c 656e 647b 7461 6275 6c61 727d 0d0a  \\end{tabular}..
-0001d510: 2020 2020 2020 2020 2020 2020 5c5c 5c5c              \\\\
-0001d520: 7e26 7e0d 0a20 2020 2020 2020 2020 2020  ~&~..           
-0001d530: 205c 5c5c 5c5c 686c 696e 6522 2222 0d0a   \\\\\hline"""..
-0001d540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d550: 6d79 7320 2b3d 2022 2222 0d0a 2020 2020  mys += """..    
-0001d560: 2020 2020 2020 2020 5c5c 656e 647b 7461          \\end{ta
-0001d570: 6275 6c61 727d 2222 220d 0a20 2020 2020  bular}"""..     
-0001d580: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
-0001d590: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
-0001d5a0: 2020 205c 5c63 6170 7469 6f6e 7b42 616c     \\caption{Bal
-0001d5b0: 616e 6365 2053 6865 6574 206f 6620 2573  ance Sheet of %s
-0001d5c0: 7d22 2222 2025 2061 6765 6e74 5f74 6974  }""" % agent_tit
-0001d5d0: 6c65 6420 2b20 2222 220d 0a20 2020 2020  led + """..     
-0001d5e0: 2020 2020 2020 205c 5c65 6e64 7b74 6162         \\end{tab
-0001d5f0: 6c65 7d0d 0a20 2020 2020 2020 2020 2020  le}..           
-0001d600: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
-0001d610: 2020 2020 2020 7465 7873 7472 5f63 6f6d        texstr_com
-0001d620: 6269 6e65 6420 2b3d 206d 7973 0d0a 0d0a  bined += mys....
-0001d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d640: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 6164  # =========== ad
-0001d650: 6420 696e 636f 6d65 0d0a 0d0a 2020 2020  d income....    
-0001d660: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0001d670: 6765 6e74 2069 6e20 636f 6d62 696e 6564  gent in combined
-0001d680: 5f69 6e63 6f6d 653a 0d0a 2020 2020 2020  _income:..      
-0001d690: 2020 2020 2020 2020 2020 2020 2020 696e                in
-0001d6a0: 636f 6d65 5f64 6174 6120 3d20 636f 6d62  come_data = comb
-0001d6b0: 696e 6564 5f69 6e63 6f6d 655b 6167 656e  ined_income[agen
-0001d6c0: 745d 0d0a 2020 2020 2020 2020 2020 2020  t]..            
-0001d6d0: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
-0001d6e0: 7472 203d 2022 2222 0d0a 2020 2020 2020  tr = """..      
-0001d6f0: 2020 2020 2020 5c5c 6265 6769 6e7b 7461        \\begin{ta
-0001d700: 626c 657d 5b48 5d5c 6e5c 6365 6e74 6572  ble}[H]\n\center
-0001d710: 696e 675c 6e0d 0a20 2020 2020 2020 2020  ing\n..         
-0001d720: 2020 205c 5c62 6567 696e 7b74 6162 756c     \\begin{tabul
-0001d730: 6172 7d7b 7c6c 6c7c 7d5c 6e5c 686c 696e  ar}{|ll|}\n\hlin
-0001d740: 6522 2222 0d0a 0d0a 2020 2020 2020 2020  e"""....        
-0001d750: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001d760: 6b20 696e 2022 5265 7665 6e75 6573 222c  k in "Revenues",
-0001d770: 2022 4761 696e 7322 2c20 2245 7870 656e   "Gains", "Expen
-0001d780: 7365 7322 2c20 224c 6f73 7365 7322 2c20  ses", "Losses", 
-0001d790: 5c0d 0a20 2020 2020 2020 2020 2020 2020  \..             
-0001d7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d7b0: 2249 6e74 6572 6573 7420 5061 796d 656e  "Interest Paymen
-0001d7c0: 7473 222c 2022 4e6f 6e2d 4f70 6572 6174  ts", "Non-Operat
-0001d7d0: 696f 6e61 6c20 496e 636f 6d65 222c 2022  ional Income", "
-0001d7e0: 5461 7865 7322 2c20 224e 6f6e 7461 7861  Taxes", "Nontaxa
-0001d7f0: 626c 6520 5072 6f66 6974 7322 2c20 224e  ble Profits", "N
-0001d800: 6f6e 7461 7861 626c 6520 4c6f 7373 6573  ontaxable Losses
-0001d810: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0001d820: 2020 2020 2020 2020 2020 2020 7620 3d20              v = 
-0001d830: 696e 636f 6d65 5f64 6174 615b 6b5d 0d0a  income_data[k]..
-0001d840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d850: 2020 2020 2020 2020 2020 696e 636f 6d65            income
-0001d860: 5f73 7472 202b 3d20 227e 267e 5c5c 5c5c  _str += "~&~\\\\
-0001d870: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-0001d880: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
-0001d890: 655f 7374 7220 2b3d 2022 5c74 2220 2b20  e_str += "\t" + 
-0001d8a0: 6b20 2b20 2226 7e5c 5c5c 5c5c 6e22 0d0a  k + "&~\\\\\n"..
-0001d8b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d8c0: 2020 2020 2020 2020 2020 666f 7220 7375            for su
-0001d8d0: 625f 7661 6c75 6520 696e 2076 3a0d 0a20  b_value in v:.. 
-0001d8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d8f0: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
-0001d900: 655f 7374 7220 2b3d 2022 5c74 2220 2b20  e_str += "\t" + 
-0001d910: 227e 2622 202b 2073 7562 5f76 616c 7565  "~&" + sub_value
-0001d920: 5b30 5d20 2b20 7375 625f 7661 6c75 655b  [0] + sub_value[
-0001d930: 315d 202b 2022 5c5c 5c5c 5c6e 220d 0a20  1] + "\\\\\n".. 
-0001d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d950: 2020 2020 2020 2069 6620 6c65 6e28 7629         if len(v)
-0001d960: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
-0001d970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d980: 2020 2020 696e 636f 6d65 5f73 7472 202b      income_str +
-0001d990: 3d20 225c 7422 202b 2022 7e26 2220 2b20  = "\t" + "~&" + 
-0001d9a0: 222e 2d22 202b 2022 5c5c 5c5c 5c6e 220d  ".-" + "\\\\\n".
-0001d9b0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001d9c0: 2020 2020 2020 2020 2020 2069 6620 6b20             if k 
-0001d9d0: 213d 2022 4e6f 6e74 6178 6162 6c65 204c  != "Nontaxable L
-0001d9e0: 6f73 7365 7322 3a0d 0a20 2020 2020 2020  osses":..       
-0001d9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da00: 2020 2020 2069 6e63 6f6d 655f 7374 7220       income_str 
-0001da10: 2b3d 2022 7e26 7e5c 5c5c 5c5c 686c 696e  += "~&~\\\\\hlin
-0001da20: 655c 6e22 0d0a 0d0a 2020 2020 2020 2020  e\n"....        
-0001da30: 2020 2020 2020 2020 2020 2020 696e 636f              inco
-0001da40: 6d65 5f73 7472 202b 3d20 2222 225c 6e0d  me_str += """\n.
-0001da50: 0a20 2020 2020 2020 2020 2020 207e 267e  .            ~&~
-0001da60: 5c5c 5c5c 5c68 6c69 6e65 5c6e 5c5c 656e  \\\\\hline\n\\en
-0001da70: 647b 7461 6275 6c61 727d 2222 220d 0a20  d{tabular}""".. 
+0001d0b0: 2020 2020 2020 2074 6578 7374 7220 2b3d         texstr +=
+0001d0c0: 2022 2222 5c5c 6265 6769 6e7b 7461 626c   """\\begin{tabl
+0001d0d0: 657d 5b48 5d5c 6e22 2222 0d0a 2020 2020  e}[H]\n"""..    
+0001d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0f0: 2020 2020 2020 2020 7465 7873 7472 202b          texstr +
+0001d100: 3d20 7461 626c 655f 7374 720d 0a20 2020  = table_str..   
+0001d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d120: 2020 2020 2020 2020 2074 6578 7374 7220           texstr 
+0001d130: 2b3d 2022 2222 5c63 6170 7469 6f6e 7b25  += """\caption{%
+0001d140: 737d 5c6e 5c65 6e64 7b74 6162 6c65 7d22  s}\n\end{table}"
+0001d150: 2222 2025 2028 6669 6c65 6461 7461 5b22  "" % (filedata["
+0001d160: 7375 626a 6563 7422 5d20 2b20 2228 2573  subject"] + "(%s
+0001d170: 2922 2566 696c 6564 6174 615b 2273 686f  )"%filedata["sho
+0001d180: 7274 6e61 6d65 225d 290d 0a0d 0a20 2020  rtname"])....   
+0001d190: 2020 2020 2020 2020 2074 6578 7374 7220           texstr 
+0001d1a0: 3d20 7465 7873 7472 2e72 6570 6c61 6365  = texstr.replace
+0001d1b0: 2822 5f22 2c20 2220 2229 0d0a 2020 2020  ("_", " ")..    
+0001d1c0: 2020 2020 2020 2020 7465 7873 7472 203d          texstr =
+0001d1d0: 2074 6578 7374 722e 7265 706c 6163 6528   texstr.replace(
+0001d1e0: 224e 6f6e 6522 2c20 2222 290d 0a0d 0a20  "None", "").... 
+0001d1f0: 2020 2020 2020 2020 2020 2023 203d 3d3d             # ===
+0001d200: 3d3d 3d3d 3d3d 3d3d 3d20 6164 6420 636f  ========= add co
+0001d210: 6d62 696e 6564 2073 6865 6574 7320 3d3d  mbined sheets ==
+0001d220: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001d230: 3d3d 3d3d 0d0a 2020 2020 2020 2020 2020  ====..          
+0001d240: 2020 7072 696e 7428 636f 6d62 696e 6564    print(combined
+0001d250: 5f73 6865 6574 7329 0d0a 0d0a 2020 2020  _sheets)....    
+0001d260: 2020 2020 2020 2020 2320 7064 2e44 6174          # pd.Dat
+0001d270: 6146 7261 6d65 2863 6f6d 6269 6e65 645f  aFrame(combined_
+0001d280: 7368 6565 7473 292e 746f 5f65 7863 656c  sheets).to_excel
+0001d290: 2822 7465 7374 2e78 6c73 7822 2920 3c2d  ("test.xlsx") <-
+0001d2a0: 2066 6f72 206d 616e 7561 6c20 7465 7374   for manual test
+0001d2b0: 696e 670d 0a0d 0a20 2020 2020 2020 2020  ing....         
+0001d2c0: 2020 2023 2063 6f6e 7665 7274 2074 6865     # convert the
+0001d2d0: 2063 6f6d 6269 6e65 6420 7368 6565 7473   combined sheets
+0001d2e0: 2074 6f20 7465 780d 0a20 2020 2020 2020   to tex..       
+0001d2f0: 2020 2020 2074 6578 7374 725f 636f 6d62       texstr_comb
+0001d300: 696e 6564 203d 2022 220d 0a20 2020 2020  ined = ""..     
+0001d310: 2020 2020 2020 2066 6f72 2061 6765 6e74         for agent
+0001d320: 2c20 6461 7461 2069 6e20 636f 6d62 696e  , data in combin
+0001d330: 6564 5f73 6865 6574 732e 6974 656d 7328  ed_sheets.items(
+0001d340: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001d350: 2020 2020 6167 656e 745f 7469 746c 6564      agent_titled
+0001d360: 203d 2061 6765 6e74 2e72 6570 6c61 6365   = agent.replace
+0001d370: 2822 5f22 2c20 2220 2229 2e74 6974 6c65  ("_", " ").title
+0001d380: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
+0001d390: 2020 2020 2020 6173 7365 7473 203d 2064        assets = d
+0001d3a0: 6174 615b 2241 7373 6574 7322 5d0d 0a20  ata["Assets"].. 
+0001d3b0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0001d3c0: 6961 6273 203d 2064 6174 615b 224c 6961  iabs = data["Lia
+0001d3d0: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
+0001d3e0: 6974 7922 5d0d 0a0d 0a20 2020 2020 2020  ity"]....       
+0001d3f0: 2020 2020 2020 2020 206d 7973 203d 2022           mys = "
+0001d400: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+0001d410: 5c5c 6265 6769 6e7b 7461 626c 657d 5b48  \\begin{table}[H
+0001d420: 5d0d 0a20 2020 2020 2020 2020 2020 205c  ]..            \
+0001d430: 5c63 656e 7465 7269 6e67 0d0a 2020 2020  \centering..    
+0001d440: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0001d450: 2020 2020 2020 2020 2020 2020 206d 7973               mys
+0001d460: 202b 3d20 2222 220d 0a20 2020 2020 2020   += """..       
+0001d470: 2020 2020 205c 5c62 6567 696e 7b74 6162       \\begin{tab
+0001d480: 756c 6172 7d7b 7c6c 7c6c 7c7d 0d0a 2020  ular}{|l|l|}..  
+0001d490: 2020 2020 2020 2020 2020 5c68 6c69 6e65            \hline
+0001d4a0: 0d0a 2020 2020 2020 2020 2020 2020 7e26  ..            ~&
+0001d4b0: 7e5c 5c5c 5c0d 0a20 2020 2020 2020 2020  ~\\\\..         
+0001d4c0: 2020 205c 5c74 6578 7462 667b 4173 7365     \\textbf{Asse
+0001d4d0: 7473 7d20 2620 5c5c 7465 7874 6266 7b4c  ts} & \\textbf{L
+0001d4e0: 6961 6269 6c69 7469 6573 2061 6e64 2045  iabilities and E
+0001d4f0: 7175 6974 797d 5c5c 5c5c 0d0a 2020 2020  quity}\\\\..    
+0001d500: 2020 2020 2020 2020 7e26 7e5c 5c5c 5c0d          ~&~\\\\.
+0001d510: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001d520: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
+0001d530: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d540: 2020 6d79 7320 2b3d 2022 2222 0d0a 2020    mys += """..  
+0001d550: 2020 2020 2020 2020 2020 5c5c 6265 6769            \\begi
+0001d560: 6e7b 7461 6275 6c61 727d 7b6c 6c7d 0d0a  n{tabular}{ll}..
+0001d570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d580: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+0001d590: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001d5a0: 6f72 2069 7465 6d2c 2065 6e74 7279 2069  or item, entry i
+0001d5b0: 6e20 6173 7365 7473 2e69 7465 6d73 2829  n assets.items()
+0001d5c0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0001d5d0: 2020 2020 2020 2020 206d 7973 202b 3d20           mys += 
+0001d5e0: 6974 656d 202b 2022 267e 205c 5c5c 5c5c  item + "&~ \\\\\
+0001d5f0: 686c 696e 657e 267e 5c5c 5c5c 5c6e 220d  hline~&~\\\\\n".
+0001d600: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001d610: 2020 2020 2020 2066 6f72 2073 7562 5f65         for sub_e
+0001d620: 6e74 7279 2069 6e20 656e 7472 792e 7370  ntry in entry.sp
+0001d630: 6c69 7428 225c 6e22 293a 0d0a 2020 2020  lit("\n"):..    
+0001d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d650: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0001d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d670: 2020 2020 2020 6c74 5f73 7562 656e 7472        lt_subentr
+0001d680: 7920 3d20 7375 625f 656e 7472 790d 0a20  y = sub_entry.. 
+0001d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d6a0: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
+0001d6b0: 3d20 227e 2622 202b 206c 745f 7375 6265  = "~&" + lt_sube
+0001d6c0: 6e74 7279 202b 2022 5c5c 5c5c 2220 2b20  ntry + "\\\\" + 
+0001d6d0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+0001d6e0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+0001d6f0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
+0001d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d710: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
+0001d720: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
+0001d730: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
+0001d740: 2020 205c 656e 647b 7461 6275 6c61 727d     \end{tabular}
+0001d750: 2026 205c 5c62 6567 696e 7b74 6162 756c   & \\begin{tabul
+0001d760: 6172 7d7b 6c6c 7d22 2222 202b 2022 5c6e  ar}{ll}""" + "\n
+0001d770: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001d780: 2020 2020 2066 6f72 2069 7465 6d2c 2065       for item, e
+0001d790: 6e74 7279 2069 6e20 6c69 6162 732e 6974  ntry in liabs.it
+0001d7a0: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
+0001d7b0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001d7c0: 7465 6d20 213d 2022 4571 7569 7479 223a  tem != "Equity":
+0001d7d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d7e0: 2020 2020 2020 2020 2020 6d79 7320 2b3d            mys +=
+0001d7f0: 2069 7465 6d20 2b20 2226 7e20 5c5c 5c5c   item + "&~ \\\\
+0001d800: 5c68 6c69 6e65 7e26 7e5c 5c5c 5c5c 6e22  \hline~&~\\\\\n"
+0001d810: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001d820: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001d830: 7375 625f 656e 7472 7920 696e 2065 6e74  sub_entry in ent
+0001d840: 7279 2e73 706c 6974 2822 5c6e 2229 3a0d  ry.split("\n"):.
+0001d850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d860: 2020 2020 2020 2020 2020 2020 2074 7279               try
+0001d870: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001d880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d890: 2020 206c 745f 7375 6265 6e74 7279 203d     lt_subentry =
+0001d8a0: 2073 7562 5f65 6e74 7279 0d0a 2020 2020   sub_entry..    
+0001d8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d8c0: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
+0001d8d0: 2b3d 2022 7e26 2220 2b20 6c74 5f73 7562  += "~&" + lt_sub
+0001d8e0: 656e 7472 7920 2b20 225c 5c5c 5c22 202b  entry + "\\\\" +
+0001d8f0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+0001d900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d910: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0001d920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d930: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+0001d940: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001d950: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0001d960: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0001d970: 656d 203d 2022 4571 7569 7479 220d 0a20  em = "Equity".. 
+0001d980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d990: 2020 2065 6e74 7279 203d 206c 6961 6273     entry = liabs
+0001d9a0: 5b22 4571 7569 7479 225d 0d0a 2020 2020  ["Equity"]..    
+0001d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9c0: 6d79 7320 2b3d 2069 7465 6d20 2b20 2226  mys += item + "&
+0001d9d0: 7e20 5c5c 5c5c 5c68 6c69 6e65 7e26 7e5c  ~ \\\\\hline~&~\
+0001d9e0: 5c5c 5c5c 6e22 0d0a 0d0a 2020 2020 2020  \\\\n"....      
+0001d9f0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0001da00: 7220 7375 625f 656e 7472 7920 696e 2065  r sub_entry in e
+0001da10: 6e74 7279 2e73 706c 6974 2822 5c6e 2229  ntry.split("\n")
+0001da20: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001da30: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+0001da40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001da50: 2020 2020 2020 2020 2020 2020 206c 745f               lt_
+0001da60: 7375 6265 6e74 7279 203d 2073 7562 5f65  subentry = sub_e
+0001da70: 6e74 7279 0d0a 2020 2020 2020 2020 2020  ntry..          
 0001da80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da90: 2020 2069 6e63 6f6d 655f 7374 7220 2b3d     income_str +=
-0001daa0: 2022 2222 5c6e 0d0a 2020 2020 2020 2020   """\n..        
-0001dab0: 2020 2020 5c5c 6361 7074 696f 6e7b 496e      \\caption{In
-0001dac0: 636f 6d65 2053 7461 7465 6d65 6e74 206f  come Statement o
-0001dad0: 6620 2573 7d22 2222 2025 2061 6765 6e74  f %s}""" % agent
-0001dae0: 5f74 6974 6c65 6420 2b20 2222 220d 0a20  _titled + """.. 
-0001daf0: 2020 2020 2020 2020 2020 205c 5c65 6e64             \\end
-0001db00: 7b74 6162 6c65 7d22 2222 0d0a 0d0a 2020  {table}"""....  
-0001db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db20: 2020 7465 7873 7472 5f63 6f6d 6269 6e65    texstr_combine
-0001db30: 6420 2b3d 2069 6e63 6f6d 655f 7374 720d  d += income_str.
-0001db40: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-0001db50: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-0001db60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001db70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001db80: 3d3d 3d3d 3d3d 3d3d 0d0a 2020 2020 2020  ========..      
-0001db90: 2020 2020 2020 7079 7065 7263 6c69 702e        pyperclip.
-0001dba0: 636f 7079 2874 6578 7374 725f 636f 6d62  copy(texstr_comb
-0001dbb0: 696e 6564 290d 0a20 2020 2020 2020 2020  ined)..         
-0001dbc0: 2020 2073 656c 662e 6e6f 7469 6679 286d     self.notify(m
-0001dbd0: 6573 7361 6765 3d22 4c61 5465 5820 636f  essage="LaTeX co
-0001dbe0: 6465 2063 6f70 6965 6420 746f 2063 6c69  de copied to cli
-0001dbf0: 7062 6f61 7264 2e20 4861 7665 2066 756e  pboard. Have fun
-0001dc00: 2122 2c20 7469 746c 653d 2248 6176 6520  !", title="Have 
-0001dc10: 6675 6e22 290d 0a0d 0a20 2020 2020 2020  fun")....       
-0001dc20: 2020 2020 2069 6620 4661 6c73 653a 2023       if False: #
-0001dc30: 2064 6570 7265 6369 6174 6564 0d0a 0d0a   depreciated....
-0001dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc50: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
-0001dc60: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
-0001dc70: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
-0001dc80: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001dc90: 2020 2077 6974 6820 6f70 656e 286f 732e     with open(os.
-0001dca0: 7061 7468 2e6a 6f69 6e28 7061 7468 202c  path.join(path ,
-0001dcb0: 2022 6669 6c65 732f 696e 636f 6d65 5f73   "files/income_s
-0001dcc0: 7461 746d 656e 7473 2e74 6578 2229 2c20  tatments.tex"), 
-0001dcd0: 2277 2229 2061 7320 6669 6c65 3a0d 0a20  "w") as file:.. 
-0001dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcf0: 2020 2066 696c 652e 7772 6974 6528 2222     file.write(""
-0001dd00: 220d 0a20 2020 205c 646f 6375 6d65 6e74  "..    \document
-0001dd10: 636c 6173 737b 6172 7469 636c 657d 0d0a  class{article}..
-0001dd20: 2020 2020 5c5c 7573 6570 6163 6b61 6765      \\usepackage
-0001dd30: 7b74 6162 756c 6172 787d 0d0a 2020 2020  {tabularx}..    
-0001dd40: 5c5c 7573 6570 6163 6b61 6765 7b61 6d73  \\usepackage{ams
-0001dd50: 6d61 7468 7d0d 0a20 2020 205c 5c75 7365  math}..    \\use
-0001dd60: 7061 636b 6167 657b 666c 6f61 747d 0d0a  package{float}..
-0001dd70: 0d0a 2020 2020 5c5c 6265 6769 6e7b 646f  ..    \\begin{do
-0001dd80: 6375 6d65 6e74 7d0d 0a0d 0a20 2020 2022  cument}....    "
-0001dd90: 2222 290d 0a20 2020 2020 2020 2020 2020  "")..           
-0001dda0: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
-0001ddb0: 6974 6528 7465 7873 7472 5f63 6f6d 6269  ite(texstr_combi
-0001ddc0: 6e65 6429 0d0a 2020 2020 2020 2020 2020  ned)..          
-0001ddd0: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
-0001dde0: 7269 7465 2822 2222 0d0a 2020 2020 5c5c  rite("""..    \\
-0001ddf0: 656e 647b 646f 6375 6d65 6e74 7d0d 0a20  end{document}.. 
-0001de00: 2020 2022 2222 290d 0a0d 0a20 2020 2020     """)....     
-0001de10: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
-0001de20: 7420 7375 6270 726f 6365 7373 0d0a 2020  t subprocess..  
-0001de30: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-0001de40: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
-0001de50: 2020 2020 2020 2020 2020 7061 7468 203d            path =
-0001de60: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
-0001de70: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
-0001de80: 285f 5f66 696c 655f 5f29 290d 0a20 2020  (__file__))..   
-0001de90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dea0: 2073 7562 7072 6f63 6573 732e 7275 6e28   subprocess.run(
-0001deb0: 2270 6466 6c61 7465 7820 2573 2220 2520  "pdflatex %s" % 
-0001dec0: 286f 732e 7061 7468 2e6a 6f69 6e28 7061  (os.path.join(pa
-0001ded0: 7468 2c20 2266 696c 6573 2f69 6e63 6f6d  th, "files/incom
-0001dee0: 655f 7374 6174 6d65 6e74 732e 7465 7822  e_statments.tex"
-0001def0: 2929 292e 6368 6563 6b5f 7265 7475 726e  ))).check_return
-0001df00: 636f 6465 2829 0d0a 0d0a 2020 2020 2020  code()....      
-0001df10: 2020 2020 2020 2020 2020 2020 2020 7368                sh
-0001df20: 7574 696c 2e6d 6f76 6528 7061 7468 202b  util.move(path +
-0001df30: 2022 696e 636f 6d65 5f73 7461 746d 656e   "income_statmen
-0001df40: 7473 2e74 6578 222c 2070 6174 6820 2b20  ts.tex", path + 
-0001df50: 2266 696c 6573 5c5c 696e 636f 6d65 5f73  "files\\income_s
-0001df60: 7461 746d 656e 7473 2e74 6578 2229 0d0a  tatments.tex")..
-0001df70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001df80: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
-0001df90: 7061 7468 202b 2022 696e 636f 6d65 5f73  path + "income_s
-0001dfa0: 7461 746d 656e 7473 2e6c 6f67 222c 2070  tatments.log", p
-0001dfb0: 6174 6820 2b20 2266 696c 6573 5c5c 696e  ath + "files\\in
-0001dfc0: 636f 6d65 5f73 7461 746d 656e 7473 2e6c  come_statments.l
-0001dfd0: 6f67 2229 0d0a 2020 2020 2020 2020 2020  og")..          
-0001dfe0: 2020 2020 2020 2020 2020 7368 7574 696c            shutil
-0001dff0: 2e6d 6f76 6528 7061 7468 202b 2022 696e  .move(path + "in
-0001e000: 636f 6d65 5f73 7461 746d 656e 7473 2e61  come_statments.a
-0001e010: 7578 222c 2070 6174 6820 2b20 2266 696c  ux", path + "fil
-0001e020: 6573 5c5c 5c6d 696e 636f 6d65 5f73 7461  es\\\mincome_sta
-0001e030: 746d 656e 7473 2e61 7578 2229 0d0a 2020  tments.aux")..  
-0001e040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e050: 2020 7368 7574 696c 2e6d 6f76 6528 7061    shutil.move(pa
-0001e060: 7468 202b 2022 696e 636f 6d65 5f73 7461  th + "income_sta
-0001e070: 746d 656e 7473 2e70 6466 222c 2070 6174  tments.pdf", pat
-0001e080: 6820 2b20 2266 696c 6573 5c5c 696e 636f  h + "files\\inco
-0001e090: 6d65 5f73 7461 746d 656e 7473 2e70 6466  me_statments.pdf
-0001e0a0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0001e0b0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-0001e0c0: 6966 7928 6d65 7373 6167 653d 2254 6558  ify(message="TeX
-0001e0d0: 2046 696c 6520 6372 6561 7465 6420 696e   File created in
-0001e0e0: 2025 7322 2025 2070 6174 6820 2b20 225c   %s" % path + "\
-0001e0f0: 5c66 696c 6573 2220 2c74 6974 6c65 3d22  \files" ,title="
-0001e100: 5375 6363 6573 7322 290d 0a0d 0a20 2020  Success")....   
-0001e110: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-0001e120: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-0001e130: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-0001e140: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0001e150: 7469 6679 286d 6573 7361 6765 3d73 7472  tify(message=str
-0001e160: 2865 2e5f 5f63 6f6e 7465 7874 5f5f 2920  (e.__context__) 
-0001e170: 2b20 225c 6e22 202b 2073 7472 2865 292c  + "\n" + str(e),
-0001e180: 2074 6974 6c65 3d65 2e5f 5f63 6c61 7373   title=e.__class
-0001e190: 5f5f 2e5f 5f6e 616d 655f 5f29 0d0a 0d0a  __.__name__)....
-0001e1a0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-0001e1b0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-0001e1c0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0001e1d0: 6c66 2e6e 6f74 6966 7928 6d65 7373 6167  lf.notify(messag
-0001e1e0: 653d 7374 7228 652e 5f5f 636f 6e74 6578  e=str(e.__contex
-0001e1f0: 745f 5f29 202b 2022 5c6e 2220 2b20 7374  t__) + "\n" + st
-0001e200: 7228 6529 2c20 7469 746c 653d 652e 5f5f  r(e), title=e.__
-0001e210: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-0001e220: 290d 0a0d 0a20 2020 2064 6566 2061 6464  )....    def add
-0001e230: 5f68 656c 7065 7228 7365 6c66 293a 0d0a  _helper(self):..
-0001e240: 2020 2020 2020 2020 6e65 775f 6e61 6d65          new_name
-0001e250: 203d 2073 656c 662e 4865 6c70 6572 4e61   = self.HelperNa
-0001e260: 6d65 4564 6974 2e74 6578 7428 290d 0a20  meEdit.text().. 
-0001e270: 2020 2020 2020 2023 2054 4f44 4f20 6164         # TODO ad
-0001e280: 6420 7365 6375 7269 7479 206d 6563 6861  d security mecha
-0001e290: 6e69 736d 2074 6f20 6176 6f69 6420 6f76  nism to avoid ov
-0001e2a0: 6572 7772 6974 696e 6720 616e 2061 6765  erwriting an age
-0001e2b0: 6e74 0d0a 2020 2020 2020 2020 6966 206e  nt..        if n
-0001e2c0: 6577 5f6e 616d 6520 3d3d 2022 223a 0d0a  ew_name == "":..
-0001e2d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001e2e0: 2e6e 6f74 6966 7928 2250 6c65 6173 6520  .notify("Please 
-0001e2f0: 656e 7465 7220 6120 7661 6c69 6420 6e61  enter a valid na
-0001e300: 6d65 222c 2074 6974 6c65 3d22 4942 4d20  me", title="IBM 
-0001e310: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
-0001e320: 2065 6c69 6620 6e6f 7420 6e65 775f 6e61   elif not new_na
-0001e330: 6d65 5b30 5d2e 6973 7570 7065 7228 293a  me[0].isupper():
-0001e340: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0001e350: 6c66 2e6e 6f74 6966 7928 2250 6c65 6173  lf.notify("Pleas
-0001e360: 6520 656e 7465 7220 6120 7661 6c69 6420  e enter a valid 
-0001e370: 6e61 6d65 2077 6974 685c 6e75 7070 6572  name with\nupper
-0001e380: 6361 7365 2066 6972 7374 206c 6574 7465  case first lette
-0001e390: 7220 6f72 2063 616d 656c 6361 7365 2c20  r or camelcase, 
-0001e3a0: 652e 672e 2027 4d79 4167 656e 7427 222c  e.g. 'MyAgent'",
-0001e3b0: 2074 6974 6c65 3d22 4942 4d20 4572 726f   title="IBM Erro
-0001e3c0: 7222 290d 0a20 2020 2020 2020 2065 6c73  r")..        els
-0001e3d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001e3e0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0001e3f0: 6164 645f 6167 656e 7428 6e65 775f 6e61  add_agent(new_na
-0001e400: 6d65 290d 0a0d 0a20 2020 2064 6566 2072  me)....    def r
-0001e410: 656d 6f76 655f 6865 6c70 6572 2873 656c  emove_helper(sel
-0001e420: 6629 3a0d 0a20 2020 2020 2020 2073 656c  f):..        sel
-0001e430: 662e 6472 6177 6361 6e76 6173 2e72 656d  f.drawcanvas.rem
-0001e440: 6f76 655f 6167 656e 7428 290d 0a0d 0a20  ove_agent().... 
-0001e450: 2020 2064 6566 2061 6464 5f6e 6577 2873     def add_new(s
-0001e460: 656c 6629 3a0d 0a0d 0a20 2020 2020 2020  elf):....       
-0001e470: 2023 2054 4f44 4f20 6173 7365 7274 2074   # TODO assert t
-0001e480: 6861 7420 7175 616e 7469 7479 2069 7320  hat quantity is 
-0001e490: 6e6f 7420 7965 7420 696e 2061 6e79 206f  not yet in any o
-0001e4a0: 7468 6572 2074 7261 6e73 6163 7469 6f6e  ther transaction
-0001e4b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
-0001e4c0: 6164 655f 6368 616e 6765 7320 3d20 4661  ade_changes = Fa
-0001e4d0: 6c73 650d 0a0d 0a0d 0a20 2020 2020 2020  lse......       
-0001e4e0: 206e 6577 5f65 6e74 7279 203d 207b 7d0d   new_entry = {}.
-0001e4f0: 0a0d 0a20 2020 2020 2020 206e 6577 5f65  ...        new_e
-0001e500: 6e74 7279 5b22 6131 225d 203d 2073 656c  ntry["a1"] = sel
-0001e510: 662e 4173 7365 744c 6973 744c 6566 742e  f.AssetListLeft.
-0001e520: 746f 506c 6169 6e54 6578 7428 290d 0a20  toPlainText().. 
-0001e530: 2020 2020 2020 206e 6577 5f65 6e74 7279         new_entry
-0001e540: 5b22 6132 225d 203d 2073 656c 662e 4173  ["a2"] = self.As
-0001e550: 7365 744c 6973 7452 6967 6874 2e74 6f50  setListRight.toP
-0001e560: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
-0001e570: 2020 2020 6e65 775f 656e 7472 795b 226c      new_entry["l
-0001e580: 3122 5d20 3d20 7365 6c66 2e4c 6961 6269  1"] = self.Liabi
-0001e590: 6c69 7479 4c69 7374 4c65 6674 2e74 6f50  lityListLeft.toP
-0001e5a0: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
-0001e5b0: 2020 2020 6e65 775f 656e 7472 795b 226c      new_entry["l
-0001e5c0: 3222 5d20 3d20 7365 6c66 2e4c 6961 6269  2"] = self.Liabi
-0001e5d0: 6c69 7479 4c69 7374 5269 6768 742e 746f  lityListRight.to
-0001e5e0: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
-0001e5f0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001e600: 6531 225d 203d 2073 656c 662e 4571 7569  e1"] = self.Equi
-0001e610: 7479 4c69 7374 4c65 6674 2e74 6f50 6c61  tyListLeft.toPla
-0001e620: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
-0001e630: 2020 6e65 775f 656e 7472 795b 2265 3222    new_entry["e2"
-0001e640: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
-0001e650: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
-0001e660: 5465 7874 2829 0d0a 0d0a 2020 2020 2020  Text()....      
-0001e670: 2020 2320 6e65 775f 656e 7472 795b 2261    # new_entry["a
-0001e680: 3122 5d20 3d20 7365 6c66 2e41 7373 6574  1"] = self.Asset
-0001e690: 4c69 7374 4c65 6674 2e74 6f50 6c61 696e  ListLeft.toPlain
-0001e6a0: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
-0001e6b0: 2320 6e65 775f 656e 7472 795b 226c 3122  # new_entry["l1"
-0001e6c0: 5d20 3d20 7365 6c66 2e4c 6961 6269 6c69  ] = self.Liabili
-0001e6d0: 7479 4c69 7374 4c65 6674 2e74 6f50 6c61  tyListLeft.toPla
-0001e6e0: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
-0001e6f0: 2020 2320 6e65 775f 656e 7472 795b 2261    # new_entry["a
-0001e700: 3222 5d20 3d20 7365 6c66 2e4c 6961 6269  2"] = self.Liabi
-0001e710: 6c69 7479 4c69 7374 5269 6768 742e 746f  lityListRight.to
-0001e720: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
-0001e730: 2020 2020 2023 206e 6577 5f65 6e74 7279       # new_entry
-0001e740: 5b22 6c32 225d 203d 2073 656c 662e 4173  ["l2"] = self.As
-0001e750: 7365 744c 6973 7452 6967 6874 2e74 6f50  setListRight.toP
-0001e760: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
-0001e770: 2020 2020 2320 6e65 775f 656e 7472 795b      # new_entry[
-0001e780: 2265 3122 5d20 3d20 7365 6c66 2e45 7175  "e1"] = self.Equ
-0001e790: 6974 794c 6973 744c 6566 742e 746f 506c  ityListLeft.toPl
-0001e7a0: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
-0001e7b0: 2020 2023 206e 6577 5f65 6e74 7279 5b22     # new_entry["
-0001e7c0: 6532 225d 203d 2073 656c 662e 4571 7569  e2"] = self.Equi
-0001e7d0: 7479 4c69 7374 5269 6768 742e 746f 506c  tyListRight.toPl
-0001e7e0: 6169 6e54 6578 7428 290d 0a0d 0a20 2020  ainText()....   
-0001e7f0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001e800: 6167 656e 7431 225d 203d 2063 616d 656c  agent1"] = camel
-0001e810: 2873 656c 662e 6167 656e 7431 4564 6974  (self.agent1Edit
-0001e820: 2e74 6578 7428 2929 2023 2e63 6170 6974  .text()) #.capit
-0001e830: 616c 697a 6528 290d 0a20 2020 2020 2020  alize()..       
-0001e840: 206e 6577 5f65 6e74 7279 5b22 6167 656e   new_entry["agen
-0001e850: 7432 225d 203d 2063 616d 656c 2873 656c  t2"] = camel(sel
-0001e860: 662e 6167 656e 7432 4564 6974 2e74 6578  f.agent2Edit.tex
-0001e870: 7428 2929 2023 2e63 6170 6974 616c 697a  t()) #.capitaliz
-0001e880: 6528 290d 0a0d 0a20 2020 2020 2020 2073  e()....        s
-0001e890: 656c 662e 6167 656e 7431 4564 6974 2e73  elf.agent1Edit.s
-0001e8a0: 6574 5465 7874 2863 616d 656c 2873 656c  etText(camel(sel
-0001e8b0: 662e 6167 656e 7431 4564 6974 2e74 6578  f.agent1Edit.tex
-0001e8c0: 7428 2929 2920 2320 2e63 6170 6974 616c  t())) # .capital
-0001e8d0: 697a 6528 2929 0d0a 2020 2020 2020 2020  ize())..        
-0001e8e0: 7365 6c66 2e61 6765 6e74 3245 6469 742e  self.agent2Edit.
-0001e8f0: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
-0001e900: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
-0001e910: 7874 2829 2929 2023 2e63 6170 6974 616c  xt())) #.capital
-0001e920: 697a 6528 2929 0d0a 0d0a 2020 2020 2020  ize())....      
-0001e930: 2020 6966 206e 6f74 2073 656c 662e 6472    if not self.dr
-0001e940: 6177 6361 6e76 6173 2e63 6865 636b 5f65  awcanvas.check_e
-0001e950: 7869 7374 286e 6577 5f65 6e74 7279 5b22  xist(new_entry["
-0001e960: 6167 656e 7431 225d 293a 0d0a 2020 2020  agent1"]):..    
-0001e970: 2020 2020 2020 2020 6966 206e 6577 5f65          if new_e
-0001e980: 6e74 7279 5b22 6167 656e 7431 225d 2021  ntry["agent1"] !
-0001e990: 3d20 2222 3a0d 0a20 2020 2020 2020 2020  = "":..         
-0001e9a0: 2020 2020 2020 2079 6573 203d 2020 7365         yes =  se
-0001e9b0: 6c66 2e61 736b 5f71 7565 7374 696f 6e28  lf.ask_question(
-0001e9c0: 2727 2c22 5468 6520 6167 656e 7420 2573  '',"The agent %s
-0001e9d0: 2064 6f65 7320 6e6f 7420 6578 6973 742e   does not exist.
-0001e9e0: 5c6e 446f 2079 6f75 2077 6973 6820 746f  \nDo you wish to
-0001e9f0: 2063 6f6e 7469 6e75 6520 616e 6420 6175   continue and au
-0001ea00: 746f 6d61 7469 6361 6c6c 7920 6372 6561  tomatically crea
-0001ea10: 7465 2061 206e 6577 2061 6765 6e74 3f22  te a new agent?"
-0001ea20: 256e 6577 5f65 6e74 7279 5b22 6167 656e  %new_entry["agen
-0001ea30: 7431 225d 290d 0a20 2020 2020 2020 2020  t1"])..         
-0001ea40: 2020 2020 2020 2069 6620 6e6f 7420 7965         if not ye
-0001ea50: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0001ea60: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
-0001ea70: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-0001ea80: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-0001ea90: 2e63 6865 636b 5f65 7869 7374 286e 6577  .check_exist(new
-0001eaa0: 5f65 6e74 7279 5b22 6167 656e 7432 225d  _entry["agent2"]
-0001eab0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001eac0: 6966 206e 6577 5f65 6e74 7279 5b22 6167  if new_entry["ag
-0001ead0: 656e 7432 225d 2021 3d20 2222 3a0d 0a20  ent2"] != "":.. 
-0001eae0: 2020 2020 2020 2020 2020 2020 2020 2079                 y
-0001eaf0: 6573 203d 2020 7365 6c66 2e61 736b 5f71  es =  self.ask_q
-0001eb00: 7565 7374 696f 6e28 2727 2c20 2254 6865  uestion('', "The
-0001eb10: 2061 6765 6e74 2025 7320 646f 6573 206e   agent %s does n
-0001eb20: 6f74 2065 7869 7374 2e5c 6e44 6f20 796f  ot exist.\nDo yo
-0001eb30: 7520 7769 7368 2074 6f20 636f 6e74 696e  u wish to contin
-0001eb40: 7565 2061 6e64 2061 7574 6f6d 6174 6963  ue and automatic
-0001eb50: 616c 6c79 2063 7265 6174 6520 6120 6e65  ally create a ne
-0001eb60: 7720 6167 656e 743f 2225 6e65 775f 656e  w agent?"%new_en
-0001eb70: 7472 795b 2261 6765 6e74 3222 5d29 0d0a  try["agent2"])..
-0001eb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eb90: 6966 206e 6f74 2079 6573 3a0d 0a20 2020  if not yes:..   
-0001eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ebb0: 2072 6574 7572 6e0d 0a0d 0a0d 0a20 2020   return......   
-0001ebc0: 2020 2020 2062 6f78 3120 3d20 7365 6c66       box1 = self
-0001ebd0: 2e64 7261 7763 616e 7661 732e 6164 645f  .drawcanvas.add_
-0001ebe0: 6167 656e 7428 6e65 775f 656e 7472 795b  agent(new_entry[
-0001ebf0: 2261 6765 6e74 3122 5d29 0d0a 2020 2020  "agent1"])..    
-0001ec00: 2020 2020 626f 7832 203d 2073 656c 662e      box2 = self.
-0001ec10: 6472 6177 6361 6e76 6173 2e61 6464 5f61  drawcanvas.add_a
-0001ec20: 6765 6e74 286e 6577 5f65 6e74 7279 5b22  gent(new_entry["
-0001ec30: 6167 656e 7432 225d 290d 0a0d 0a20 2020  agent2"])....   
-0001ec40: 2020 2020 206d 795f 6974 656d 7320 3d20       my_items = 
-0001ec50: 5b5d 0d0a 2020 2020 2020 2020 6461 7461  []..        data
-0001ec60: 203d 206e 6577 5f65 6e74 7279 0d0a 2020   = new_entry..  
-0001ec70: 2020 2020 2020 616c 6c65 6e74 7269 6573        allentries
-0001ec80: 203d 2022 5c6e 222e 6a6f 696e 285b 6461   = "\n".join([da
-0001ec90: 7461 5b22 6c31 225d 2c20 6461 7461 5b22  ta["l1"], data["
-0001eca0: 6131 225d 2c20 6461 7461 5b22 6531 225d  a1"], data["e1"]
-0001ecb0: 2c20 6461 7461 5b22 6c32 225d 2c20 6461  , data["l2"], da
-0001ecc0: 7461 5b22 6132 225d 2c20 6461 7461 5b22  ta["a2"], data["
-0001ecd0: 6532 225d 5d29 0d0a 2020 2020 2020 2020  e2"]])..        
-0001ece0: 666f 7220 7375 625f 6974 656d 2069 6e20  for sub_item in 
-0001ecf0: 616c 6c65 6e74 7269 6573 2e73 706c 6974  allentries.split
-0001ed00: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-0001ed10: 2020 2020 2066 6f72 2073 7562 5f65 6e74       for sub_ent
-0001ed20: 7279 2069 6e20 7375 625f 6974 656d 2e73  ry in sub_item.s
-0001ed30: 706c 6974 2822 5c6e 2229 3a0d 0a20 2020  plit("\n"):..   
-0001ed40: 2020 2020 2020 2020 2020 2020 2065 6e74               ent
-0001ed50: 7279 203d 2073 7562 5f65 6e74 7279 2e72  ry = sub_entry.r
-0001ed60: 6570 6c61 6365 2822 2d22 2c22 2229 2e72  eplace("-","").r
-0001ed70: 6570 6c61 6365 2822 2b22 2c22 2229 2e73  eplace("+","").s
-0001ed80: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
-0001ed90: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
-0001eda0: 2021 3d20 2022 223a 0d0a 2020 2020 2020   !=  "":..      
-0001edb0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-0001edc0: 5f69 7465 6d73 2e61 7070 656e 6428 656e  _items.append(en
-0001edd0: 7472 7929 0d0a 0d0a 2020 2020 2020 2020  try)....        
-0001ede0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0001edf0: 6164 645f 636f 6e6e 6563 7469 6f6e 2862  add_connection(b
-0001ee00: 6f78 312c 2062 6f78 322c 206e 616d 653d  ox1, box2, name=
-0001ee10: 2073 7472 2873 656c 662e 6564 6974 5368   str(self.editSh
-0001ee20: 6f72 746e 616d 652e 7465 7874 2829 292c  ortname.text()),
-0001ee30: 7375 626a 6563 743d 7365 6c66 2e65 6469  subject=self.edi
-0001ee40: 7453 7562 6a65 6374 2e74 6578 7428 292c  tSubject.text(),
-0001ee50: 6974 656d 733d 6d79 5f69 7465 6d73 290d  items=my_items).
-0001ee60: 0a0d 0a20 2020 2020 2020 206e 6577 5f65  ...        new_e
-0001ee70: 6e74 7279 5b22 756e 692d 6469 7265 6374  ntry["uni-direct
-0001ee80: 696f 6e61 6c22 5d20 3d20 5c0d 0a20 2020  ional"] = \..   
-0001ee90: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
-0001eea0: 662e 636f 6d62 6f55 6e69 6469 722e 6375  f.comboUnidir.cu
-0001eeb0: 7272 656e 7454 6578 7428 2929 0d0a 0d0a  rrentText())....
-0001eec0: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
-0001eed0: 795b 226c 6f67 2074 7261 6e73 6163 7469  y["log transacti
-0001eee0: 6f6e 225d 203d 205c 0d0a 2020 2020 2020  on"] = \..      
-0001eef0: 2020 2020 2020 7365 6c66 2e72 6567 6973        self.regis
-0001ef00: 7465 7246 6c6f 7742 6f78 2e63 7572 7265  terFlowBox.curre
-0001ef10: 6e74 5465 7874 2829 0d0a 0d0a 2020 2020  ntText()....    
-0001ef20: 2020 2020 6e65 775f 656e 7472 795b 2263      new_entry["c
-0001ef30: 6173 6866 6c6f 7731 225d 203d 205c 0d0a  ashflow1"] = \..
-0001ef40: 2020 2020 2020 2020 2020 2020 7374 7228              str(
-0001ef50: 7365 6c66 2e63 6f6d 626f 4361 7368 4c65  self.comboCashLe
-0001ef60: 6674 2e63 7572 7265 6e74 5465 7874 2829  ft.currentText()
-0001ef70: 290d 0a20 2020 2020 2020 206e 6577 5f65  )..        new_e
-0001ef80: 6e74 7279 5b22 6361 7368 666c 6f77 3222  ntry["cashflow2"
-0001ef90: 5d20 3d20 5c0d 0a20 2020 2020 2020 2020  ] = \..         
-0001efa0: 2020 2073 7472 2873 656c 662e 636f 6d62     str(self.comb
-0001efb0: 6f43 6173 6852 6967 6874 2e63 7572 7265  oCashRight.curre
-0001efc0: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
-0001efd0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001efe0: 6b69 6e64 225d 203d 205c 0d0a 2020 2020  kind"] = \..    
-0001eff0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0001f000: 2e65 6469 7454 7970 652e 6375 7272 656e  .editType.curren
-0001f010: 7454 6578 7428 2929 0d0a 0d0a 2020 2020  tText())....    
-0001f020: 2020 2020 6e65 775f 656e 7472 795b 2269      new_entry["i
-0001f030: 6e63 6f6d 6531 225d 203d 205c 0d0a 2020  ncome1"] = \..  
-0001f040: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
-0001f050: 6c66 2e63 6f6d 626f 496e 636f 6d65 4c65  lf.comboIncomeLe
-0001f060: 6674 2e63 7572 7265 6e74 5465 7874 2829  ft.currentText()
-0001f070: 290d 0a20 2020 2020 2020 206e 6577 5f65  )..        new_e
-0001f080: 6e74 7279 5b22 696e 636f 6d65 3222 5d20  ntry["income2"] 
-0001f090: 3d20 5c0d 0a20 2020 2020 2020 2020 2020  = \..           
-0001f0a0: 2073 7472 2873 656c 662e 636f 6d62 6f49   str(self.comboI
-0001f0b0: 6e63 6f6d 6552 6967 6874 2e63 7572 7265  ncomeRight.curre
-0001f0c0: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
-0001f0d0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001f0e0: 7175 616e 7469 7479 225d 203d 205c 0d0a  quantity"] = \..
-0001f0f0: 2020 2020 2020 2020 2020 2020 7374 7228              str(
-0001f100: 7365 6c66 2e65 6469 7451 7561 6e74 6974  self.editQuantit
-0001f110: 792e 7465 7874 2829 290d 0a0d 0a20 2020  y.text())....   
-0001f120: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001f130: 7375 626a 6563 7422 5d20 3d20 5c0d 0a20  subject"] = \.. 
-0001f140: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
-0001f150: 656c 662e 6564 6974 5375 626a 6563 742e  elf.editSubject.
-0001f160: 7465 7874 2829 290d 0a0d 0a20 2020 2020  text())....     
-0001f170: 2020 206e 6577 5f65 6e74 7279 5b22 7368     new_entry["sh
-0001f180: 6f72 746e 616d 6522 5d20 3d20 5c0d 0a20  ortname"] = \.. 
-0001f190: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
-0001f1a0: 656c 662e 6564 6974 5368 6f72 746e 616d  elf.editShortnam
-0001f1b0: 652e 7465 7874 2829 290d 0a0d 0a20 2020  e.text())....   
-0001f1c0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
-0001f1d0: 6465 7363 7269 7074 696f 6e22 5d20 3d20  description"] = 
-0001f1e0: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
-0001f1f0: 7472 2873 656c 662e 6564 6974 4465 7363  tr(self.editDesc
-0001f200: 7269 7074 696f 6e2e 7465 7874 2829 290d  ription.text()).
-0001f210: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-0001f220: 656e 7472 795f 6461 7461 2e61 7070 656e  entry_data.appen
-0001f230: 6428 6e65 775f 656e 7472 7929 0d0a 2020  d(new_entry)..  
-0001f240: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
-0001f250: 655f 7461 626c 6528 290d 0a0d 0a0d 0a0d  e_table().......
-0001f260: 0a20 2020 2020 2020 2064 6172 6b4d 6f64  .        darkMod
-0001f270: 6520 3d20 5472 7565 0d0a 2020 2020 2020  e = True..      
-0001f280: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-0001f290: 2020 2020 6966 2073 656c 662e 7468 656d      if self.them
-0001f2a0: 655f 6d61 6e61 6765 722e 7468 656d 6520  e_manager.theme 
-0001f2b0: 3d3d 2022 6272 6967 6874 223a 0d0a 2020  == "bright":..  
-0001f2c0: 2020 2020 2020 2020 2020 2020 2020 6461                da
-0001f2d0: 726b 4d6f 6465 203d 2046 616c 7365 0d0a  rkMode = False..
-0001f2e0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
-0001f2f0: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
-0001f300: 730d 0a0d 0a20 2020 2020 2020 2074 7279  s....        try
-0001f310: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-0001f320: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0001f330: 7820 3d20 6c65 6e28 7365 6c66 2e65 6e74  x = len(self.ent
-0001f340: 7279 5f64 6174 6129 2d31 0d0a 2020 2020  ry_data)-1..    
-0001f350: 2020 2020 2020 2020 7365 6c66 2e72 6f77          self.row
-0001f360: 5f73 656c 6563 7428 7365 6c66 2e73 656c  _select(self.sel
-0001f370: 6563 7469 6f6e 5f69 6478 290d 0a20 2020  ection_idx)..   
-0001f380: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-0001f390: 7074 696f 6e20 6173 2065 203a 0d0a 2020  ption as e :..  
-0001f3a0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-0001f3b0: 6f74 6966 7928 2245 5252 4f52 3a22 202b  otify("ERROR:" +
-0001f3c0: 2074 7228 6529 2c74 6974 6c65 3d22 4572   tr(e),title="Er
-0001f3d0: 726f 7222 290d 0a0d 0a20 2020 2020 2020  ror")....       
-0001f3e0: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
-0001f3f0: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
-0001f400: 6964 7820 6973 206e 6f74 204e 6f6e 653a  idx is not None:
-0001f410: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-0001f420: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
-0001f430: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0001f440: 772e 636f 6c75 6d6e 436f 756e 7428 2929  w.columnCount())
-0001f450: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0001f460: 2020 2020 2069 6620 6461 726b 4d6f 6465       if darkMode
-0001f470: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001f480: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0001f490: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
-0001f4a0: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
-0001f4b0: 6964 782c 2069 292e 7365 7442 6163 6b67  idx, i).setBackg
-0001f4c0: 726f 756e 6428 5174 4775 692e 5143 6f6c  round(QtGui.QCol
-0001f4d0: 6f72 2832 312c 2032 312c 2032 3129 290d  or(21, 21, 21)).
-0001f4e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f4f0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0001f500: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001f510: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0001f520: 2e69 7465 6d28 7365 6c66 2e73 656c 6563  .item(self.selec
-0001f530: 7469 6f6e 5f69 6478 2c20 6929 2e73 6574  tion_idx, i).set
-0001f540: 4261 636b 6772 6f75 6e64 2851 7447 7569  Background(QtGui
-0001f550: 2e51 436f 6c6f 7228 3233 332c 2032 3334  .QColor(233, 234
-0001f560: 2c20 3232 3729 290d 0a0d 0a20 2020 2020  , 227))....     
-0001f570: 2020 2020 2020 2073 656c 662e 7365 6c65         self.sele
-0001f580: 6374 696f 6e5f 6964 7820 3d20 7365 6c66  ction_idx = self
-0001f590: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0001f5a0: 2e72 6f77 436f 756e 7428 292d 310d 0a20  .rowCount()-1.. 
-0001f5b0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0001f5c0: 2069 6e20 7261 6e67 6528 7365 6c66 2e74   in range(self.t
-0001f5d0: 7261 6e73 6163 7469 6f6e 5669 6577 2e63  ransactionView.c
-0001f5e0: 6f6c 756d 6e43 6f75 6e74 2829 293a 0d0a  olumnCount()):..
-0001f5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f600: 6966 2064 6172 6b4d 6f64 653a 0d0a 2020  if darkMode:..  
-0001f610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f620: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
-0001f630: 6f6e 5669 6577 2e69 7465 6d28 7365 6c66  onView.item(self
-0001f640: 2e73 656c 6563 7469 6f6e 5f69 6478 2c20  .selection_idx, 
-0001f650: 6929 2e73 6574 4261 636b 6772 6f75 6e64  i).setBackground
-0001f660: 2851 7447 7569 2e51 436f 6c6f 7228 3138  (QtGui.QColor(18
-0001f670: 2c20 3138 2c20 3138 2929 0d0a 2020 2020  , 18, 18))..    
-0001f680: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001f690: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001f6a0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0001f6b0: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
-0001f6c0: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
-0001f6d0: 6964 782c 2069 292e 7365 7442 6163 6b67  idx, i).setBackg
-0001f6e0: 726f 756e 6428 5174 4775 692e 5143 6f6c  round(QtGui.QCol
-0001f6f0: 6f72 2831 3539 2c20 3135 392c 2031 3539  or(159, 159, 159
-0001f700: 2929 0d0a 2020 2020 2020 2020 2222 220d  ))..        """.
-0001f710: 0a0d 0a0d 0a0d 0a0d 0a20 2020 2064 6566  .........    def
-0001f720: 2067 6f74 6f5f 6e65 7874 2873 656c 6629   goto_next(self)
-0001f730: 3a0d 0a20 2020 2020 2020 2070 6173 730d  :..        pass.
-0001f740: 0a0d 0a0d 0a20 2020 2064 6566 2075 6470  .....    def udp
-0001f750: 6174 655f 6469 7370 6c61 7928 7365 6c66  ate_display(self
-0001f760: 293a 0d0a 2020 2020 2020 2020 7472 793a  ):..        try:
-0001f770: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001f780: 6669 6c65 6e61 6d65 203d 2073 656c 662e  filename = self.
-0001f790: 6669 6c65 6e61 6d65 0d0a 0d0a 2020 2020  filename....    
-0001f7a0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-0001f7b0: 6e28 6669 6c65 6e61 6d65 2c20 2772 2729  n(filename, 'r')
-0001f7c0: 2061 7320 7374 7265 616d 3a0d 0a20 2020   as stream:..   
-0001f7d0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-0001f7e0: 6564 6174 6120 3d20 7961 6d6c 2e73 6166  edata = yaml.saf
-0001f7f0: 655f 6c6f 6164 2873 7472 6561 6d29 0d0a  e_load(stream)..
-0001f800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f810: 7072 696e 7428 6669 6c65 6461 7461 290d  print(filedata).
-0001f820: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001f830: 2020 2073 656c 662e 6167 656e 7431 4c61     self.agent1La
-0001f840: 6265 6c2e 7465 7874 203d 2066 696c 6564  bel.text = filed
-0001f850: 6174 615b 2261 6765 6e74 3122 5d0d 0a20  ata["agent1"].. 
-0001f860: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001f870: 656c 662e 6167 656e 7432 4c61 6265 6c2e  elf.agent2Label.
-0001f880: 7465 7874 203d 2066 696c 6564 6174 615b  text = filedata[
-0001f890: 2261 6765 6e74 3222 5d0d 0a0d 0a20 2020  "agent2"]....   
-0001f8a0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-0001f8b0: 656c 662e 6131 2e76 616c 7565 203d 2066  elf.a1.value = f
-0001f8c0: 696c 6564 6174 615b 2261 3122 5d20 2023  iledata["a1"]  #
-0001f8d0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-0001f8e0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-0001f8f0: 6531 2e76 616c 7565 203d 2066 696c 6564  e1.value = filed
-0001f900: 6174 615b 2265 3122 5d20 2023 202b 2022  ata["e1"]  # + "
-0001f910: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-0001f920: 2020 2020 2023 2073 656c 662e 6c31 2e76       # self.l1.v
-0001f930: 616c 7565 203d 2066 696c 6564 6174 615b  alue = filedata[
-0001f940: 226c 3122 5d20 2023 202b 2022 5c6e 220d  "l1"]  # + "\n".
-0001f950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f960: 2023 2073 656c 662e 6132 2e76 616c 7565   # self.a2.value
-0001f970: 203d 2066 696c 6564 6174 615b 2261 3222   = filedata["a2"
-0001f980: 5d20 2023 202b 2022 5c6e 220d 0a20 2020  ]  # + "\n"..   
-0001f990: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-0001f9a0: 656c 662e 6532 2e76 616c 7565 203d 2066  elf.e2.value = f
-0001f9b0: 696c 6564 6174 615b 2265 3222 5d20 2023  iledata["e2"]  #
-0001f9c0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-0001f9d0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-0001f9e0: 6c32 2e76 616c 7565 203d 2066 696c 6564  l2.value = filed
-0001f9f0: 6174 615b 226c 3222 5d20 2023 202b 2022  ata["l2"]  # + "
-0001fa00: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
-0001fa10: 2020 2020 2020 2023 2069 6620 2273 686f         # if "sho
-0001fa20: 7274 6e61 6d65 2220 696e 2066 696c 6564  rtname" in filed
-0001fa30: 6174 613a 0d0a 2020 2020 2020 2020 2020  ata:..          
-0001fa40: 2020 2020 2020 2320 2020 2073 656c 662e        #    self.
-0001fa50: 7061 7265 6e74 2e73 686f 7274 6e61 6d65  parent.shortname
-0001fa60: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
-0001fa70: 615b 2273 686f 7274 6e61 6d65 225d 0d0a  a["shortname"]..
-0001fa80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fa90: 2020 2320 6966 2022 756e 692d 6469 7265    # if "uni-dire
-0001faa0: 6374 696f 6e61 6c22 2069 6e20 6669 6c65  ctional" in file
-0001fab0: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
-0001fac0: 2020 2020 2020 2023 2020 2020 7365 6c66         #    self
-0001fad0: 2e70 6172 656e 742e 6469 7265 6374 696f  .parent.directio
-0001fae0: 6e5f 6368 6563 6b2e 7661 6c75 6520 3d20  n_check.value = 
-0001faf0: 626f 6f6c 2873 7472 2866 696c 6564 6174  bool(str(filedat
-0001fb00: 615b 2275 6e69 2d64 6972 6563 7469 6f6e  a["uni-direction
-0001fb10: 616c 225d 2929 0d0a 2020 2020 2020 2020  al"]))..        
-0001fb20: 2020 2020 2020 2020 2320 656c 7365 3a0d          # else:.
-0001fb30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fb40: 2023 2020 2020 7365 6c66 2e70 6172 656e   #    self.paren
-0001fb50: 742e 6469 7265 6374 696f 6e5f 6368 6563  t.direction_chec
-0001fb60: 6b2e 7661 6c75 6520 3d20 4661 6c73 650d  k.value = False.
-0001fb70: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001fb80: 2020 2023 2069 6620 2264 6573 6372 6970     # if "descrip
-0001fb90: 7469 6f6e 2220 696e 2066 696c 6564 6174  tion" in filedat
-0001fba0: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-0001fbb0: 2020 2020 2320 2020 2073 656c 662e 7061      #    self.pa
-0001fbc0: 7265 6e74 2e64 6573 6372 6970 7469 6f6e  rent.description
-0001fbd0: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
-0001fbe0: 615b 2264 6573 6372 6970 7469 6f6e 225d  a["description"]
-0001fbf0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001fc00: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
-0001fc10: 742e 666c 6f77 5f63 6865 636b 2e76 616c  t.flow_check.val
-0001fc20: 7565 203d 2066 696c 6564 6174 615b 226c  ue = filedata["l
-0001fc30: 6f67 2074 7261 6e73 6163 7469 6f6e 225d  og transaction"]
-0001fc40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fc50: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
-0001fc60: 6b69 6e64 2e76 616c 7565 203d 2066 696c  kind.value = fil
-0001fc70: 6564 6174 615b 226b 696e 6422 5d0d 0a20  edata["kind"].. 
-0001fc80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001fc90: 2073 656c 662e 7061 7265 6e74 2e73 7562   self.parent.sub
-0001fca0: 6a65 6374 2e76 616c 7565 203d 2066 696c  ject.value = fil
-0001fcb0: 6564 6174 615b 2273 7562 6a65 6374 225d  edata["subject"]
-0001fcc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fcd0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
-0001fce0: 7175 616e 7469 7479 2e76 616c 7565 203d  quantity.value =
-0001fcf0: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
-0001fd00: 6974 7922 5d0d 0a0d 0a20 2020 2020 2020  ity"]....       
-0001fd10: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-0001fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd30: 2020 2023 205b 224e 6f6e 6522 2c22 5265     # ["None","Re
-0001fd40: 7665 6e75 6522 2c22 4578 7065 6e73 6522  venue","Expense"
-0001fd50: 2c22 4761 696e 222c 224c 6f73 7322 2c22  ,"Gain","Loss","
-0001fd60: 5461 7822 5d0d 0a0d 0a20 2020 2020 2020  Tax"]....       
-0001fd70: 2020 2020 2020 2020 2020 2020 206d 795f               my_
-0001fd80: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
-0001fd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fda0: 2020 224e 6f6e 6522 3a20 302c 0d0a 2020    "None": 0,..  
-0001fdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fdc0: 2020 2020 2020 2252 6576 656e 7565 223a        "Revenue":
-0001fdd0: 2031 2c0d 0a20 2020 2020 2020 2020 2020   1,..           
-0001fde0: 2020 2020 2020 2020 2020 2020 2022 4578               "Ex
-0001fdf0: 7065 6e73 6522 3a20 322c 0d0a 2020 2020  pense": 2,..    
-0001fe00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe10: 2020 2020 2247 6169 6e22 3a20 332c 0d0a      "Gain": 3,..
-0001fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe30: 2020 2020 2020 2020 224c 6f73 7322 3a20          "Loss": 
-0001fe40: 342c 0d0a 2020 2020 2020 2020 2020 2020  4,..            
-0001fe50: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
-0001fe60: 6572 6573 7422 3a20 352c 0d0a 2020 2020  erest": 5,..    
-0001fe70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe80: 2020 2020 224e 6f6e 2d4f 702e 2049 6e63      "Non-Op. Inc
-0001fe90: 6f6d 6522 3a20 362c 0d0a 2020 2020 2020  ome": 6,..      
-0001fea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001feb0: 2020 2254 6178 223a 2037 2c0d 0a20 2020    "Tax": 7,..   
-0001fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fed0: 2020 2020 2022 4e6f 6e74 6178 2e20 5072       "Nontax. Pr
-0001fee0: 6f66 6974 223a 2038 2c0d 0a20 2020 2020  ofit": 8,..     
-0001fef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ff00: 2020 2022 4e6f 6e74 6178 2e20 4c6f 7373     "Nontax. Loss
-0001ff10: 223a 2039 0d0a 2020 2020 2020 2020 2020  ": 9..          
-0001ff20: 2020 2020 2020 2020 2020 7d0d 0a0d 0a20            }.... 
-0001ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ff40: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
-0001ff50: 2e69 6e63 6f6d 6531 2e76 616c 7565 203d  .income1.value =
-0001ff60: 205b 6d79 5f64 6963 745b 6669 6c65 6461   [my_dict[fileda
-0001ff70: 7461 5b22 696e 636f 6d65 3122 5d5d 5d0d  ta["income1"]]].
-0001ff80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ff90: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
-0001ffa0: 6e74 2e69 6e63 6f6d 6532 2e76 616c 7565  nt.income2.value
-0001ffb0: 203d 205b 6d79 5f64 6963 745b 6669 6c65   = [my_dict[file
-0001ffc0: 6461 7461 5b22 696e 636f 6d65 3222 5d5d  data["income2"]]
-0001ffd0: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-0001ffe0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-0001fff0: 7061 7265 6e74 2e63 6173 6866 6c6f 7731  parent.cashflow1
-00020000: 2e76 616c 7565 203d 205b 6669 6c65 6461  .value = [fileda
-00020010: 7461 5b22 6361 7368 666c 6f77 3122 5d5d  ta["cashflow1"]]
-00020020: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020030: 2020 2020 2020 2320 7365 6c66 2e70 6172        # self.par
-00020040: 656e 742e 6361 7368 666c 6f77 322e 7661  ent.cashflow2.va
-00020050: 6c75 6520 3d20 5b66 696c 6564 6174 615b  lue = [filedata[
-00020060: 2263 6173 6866 6c6f 7732 225d 5d0d 0a0d  "cashflow2"]]...
-00020070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020080: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
-00020090: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-000200a0: 7373 0d0a 0d0a 2020 2020 2020 2020 2020  ss....          
-000200b0: 2020 2020 2020 2373 656c 662e 7061 7265        #self.pare
-000200c0: 6e74 2e64 6973 706c 6179 2829 0d0a 0d0a  nt.display()....
-000200d0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-000200e0: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
-000200f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00020100: 7428 7374 7228 6529 2920 2320 7365 6c66  t(str(e)) # self
-00020110: 2e6e 6f74 6966 7928 7374 7228 6529 2c22  .notify(str(e),"
-00020120: 4578 6365 7074 696f 6e22 2920 3c20 7468  Exception") < th
-00020130: 6973 2073 686f 756c 6420 6e6f 7420 7468  is should not th
-00020140: 726f 7720 616e 2065 7863 6570 7469 6f6e  row an exception
-00020150: 0d0a 0d0a 0d0a 0d0a 6465 6620 7275 6e5f  ........def run_
-00020160: 6170 7028 293a 0d0a 2020 2020 2320 7275  app():..    # ru
-00020170: 6e73 2074 6865 206d 6169 6e20 6170 706c  ns the main appl
-00020180: 6963 6174 696f 6e20 7769 6e64 6f77 0d0a  ication window..
-00020190: 0d0a 2020 2020 6170 7020 3d20 5174 5769  ..    app = QtWi
-000201a0: 6467 6574 732e 5141 7070 6c69 6361 7469  dgets.QApplicati
-000201b0: 6f6e 2873 7973 2e61 7267 7629 0d0a 0d0a  on(sys.argv)....
-000201c0: 2020 2020 2320 7069 786d 6170 203d 2051      # pixmap = Q
-000201d0: 5069 786d 6170 2822 2e2f 7370 6c61 7368  Pixmap("./splash
-000201e0: 2e70 6e67 2229 0d0a 2020 2020 2320 7370  .png")..    # sp
-000201f0: 6c61 7368 203d 2051 5370 6c61 7368 5363  lash = QSplashSc
-00020200: 7265 656e 2870 6978 6d61 7029 0d0a 2020  reen(pixmap)..  
-00020210: 2020 2320 7370 6c61 7368 2e73 686f 7728    # splash.show(
-00020220: 290d 0a0d 0a20 2020 2023 2061 7070 2e73  )....    # app.s
-00020230: 6574 5374 796c 6528 2746 7573 696f 6e27  etStyle('Fusion'
-00020240: 290d 0a0d 0a20 2020 2077 696e 646f 7720  )....    window 
-00020250: 3d20 5472 616e 7361 6374 696f 6e44 6573  = TransactionDes
-00020260: 6967 6e65 7228 290d 0a20 2020 2023 2073  igner()..    # s
-00020270: 706c 6173 682e 6669 6e69 7368 2877 696e  plash.finish(win
-00020280: 646f 7729 0d0a 0d0a 2020 2020 2320 7365  dow)....    # se
-00020290: 7475 7020 7374 796c 6573 6865 6574 0d0a  tup stylesheet..
-000202a0: 2020 2020 2320 6170 706c 795f 7374 796c      # apply_styl
-000202b0: 6573 6865 6574 2861 7070 2c20 7468 656d  esheet(app, them
-000202c0: 653d 2764 6172 6b5f 7465 616c 2e78 6d6c  e='dark_teal.xml
-000202d0: 272c 2069 6e76 6572 745f 7365 636f 6e64  ', invert_second
-000202e0: 6172 793d 5472 7565 290d 0a20 2020 2023  ary=True)..    #
-000202f0: 2061 7070 6c79 5f73 7479 6c65 7368 6565   apply_styleshee
-00020300: 7428 7769 6e64 6f77 2c20 7468 656d 653d  t(window, theme=
-00020310: 2764 6172 6b5f 7465 616c 2e78 6d6c 272c  'dark_teal.xml',
-00020320: 2069 6e76 6572 745f 7365 636f 6e64 6172   invert_secondar
-00020330: 793d 5472 7565 290d 0a0d 0a20 2020 2077  y=True)....    w
-00020340: 696e 646f 772e 7368 6f77 2829 0d0a 2020  indow.show()..  
-00020350: 2020 7769 6e64 6f77 2e73 7769 7463 685f    window.switch_
-00020360: 7468 656d 6528 290d 0a20 2020 2077 696e  theme()..    win
-00020370: 646f 772e 7377 6974 6368 5f74 6865 6d65  dow.switch_theme
-00020380: 2829 0d0a 0d0a 2020 2020 6170 702e 6578  ()....    app.ex
-00020390: 6563 5f28 290d 0a0d 0a0d 0a0d 0a0d 0a0d  ec_()...........
-000203a0: 0a69 6620 5f5f 6e61 6d65 5f5f 203d 3d20  .if __name__ == 
-000203b0: 225f 5f6d 6169 6e5f 5f22 3a0d 0a0d 0a20  "__main__":.... 
-000203c0: 2020 2072 756e 5f61 7070 2829 0d0a          run_app()..
+0001da90: 2020 6d79 7320 2b3d 2022 7e26 2220 2b20    mys += "~&" + 
+0001daa0: 6c74 5f73 7562 656e 7472 7920 2b20 225c  lt_subentry + "\
+0001dab0: 5c5c 5c22 202b 2022 5c6e 220d 0a20 2020  \\\" + "\n"..   
+0001dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dad0: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
+0001dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001daf0: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
+0001db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db10: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
+0001db20: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+0001db30: 730d 0a0d 0a20 2020 2020 2020 2020 2020  s....           
+0001db40: 2020 2020 206d 7973 202b 3d20 2222 220d       mys += """.
+0001db50: 0a20 2020 2020 2020 2020 2020 205c 5c65  .            \\e
+0001db60: 6e64 7b74 6162 756c 6172 7d0d 0a20 2020  nd{tabular}..   
+0001db70: 2020 2020 2020 2020 205c 5c5c 5c7e 267e           \\\\~&~
+0001db80: 0d0a 2020 2020 2020 2020 2020 2020 5c5c  ..            \\
+0001db90: 5c5c 5c68 6c69 6e65 2222 220d 0a20 2020  \\\hline"""..   
+0001dba0: 2020 2020 2020 2020 2020 2020 206d 7973               mys
+0001dbb0: 202b 3d20 2222 220d 0a20 2020 2020 2020   += """..       
+0001dbc0: 2020 2020 205c 5c65 6e64 7b74 6162 756c       \\end{tabul
+0001dbd0: 6172 7d22 2222 0d0a 2020 2020 2020 2020  ar}"""..        
+0001dbe0: 2020 2020 2020 2020 6d79 7320 2b3d 2022          mys += "
+0001dbf0: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+0001dc00: 5c5c 6361 7074 696f 6e7b 4261 6c61 6e63  \\caption{Balanc
+0001dc10: 6520 5368 6565 7420 6f66 2025 737d 2222  e Sheet of %s}""
+0001dc20: 2220 2520 6167 656e 745f 7469 746c 6564  " % agent_titled
+0001dc30: 202b 2022 2222 0d0a 2020 2020 2020 2020   + """..        
+0001dc40: 2020 2020 5c5c 656e 647b 7461 626c 657d      \\end{table}
+0001dc50: 0d0a 2020 2020 2020 2020 2020 2020 2222  ..            ""
+0001dc60: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+0001dc70: 2020 2074 6578 7374 725f 636f 6d62 696e     texstr_combin
+0001dc80: 6564 202b 3d20 6d79 730d 0a0d 0a20 2020  ed += mys....   
+0001dc90: 2020 2020 2020 2020 2020 2020 2023 203d               # =
+0001dca0: 3d3d 3d3d 3d3d 3d3d 3d3d 2061 6464 2069  ========== add i
+0001dcb0: 6e63 6f6d 650d 0a0d 0a20 2020 2020 2020  ncome....       
+0001dcc0: 2020 2020 2020 2020 2069 6620 6167 656e           if agen
+0001dcd0: 7420 696e 2063 6f6d 6269 6e65 645f 696e  t in combined_in
+0001dce0: 636f 6d65 3a0d 0a20 2020 2020 2020 2020  come:..         
+0001dcf0: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
+0001dd00: 655f 6461 7461 203d 2063 6f6d 6269 6e65  e_data = combine
+0001dd10: 645f 696e 636f 6d65 5b61 6765 6e74 5d0d  d_income[agent].
+0001dd20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001dd30: 2020 2020 2069 6e63 6f6d 655f 7374 7220       income_str 
+0001dd40: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
+0001dd50: 2020 205c 5c62 6567 696e 7b74 6162 6c65     \\begin{table
+0001dd60: 7d5b 485d 5c6e 5c63 656e 7465 7269 6e67  }[H]\n\centering
+0001dd70: 5c6e 0d0a 2020 2020 2020 2020 2020 2020  \n..            
+0001dd80: 5c5c 6265 6769 6e7b 7461 6275 6c61 727d  \\begin{tabular}
+0001dd90: 7b7c 6c6c 7c7d 5c6e 5c68 6c69 6e65 2222  {|ll|}\n\hline""
+0001dda0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001ddb0: 2020 2020 2020 2020 2066 6f72 206b 2069           for k i
+0001ddc0: 6e20 2252 6576 656e 7565 7322 2c20 2247  n "Revenues", "G
+0001ddd0: 6169 6e73 222c 2022 4578 7065 6e73 6573  ains", "Expenses
+0001dde0: 222c 2022 4c6f 7373 6573 222c 205c 0d0a  ", "Losses", \..
+0001ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de00: 2020 2020 2020 2020 2020 2020 2022 496e               "In
+0001de10: 7465 7265 7374 2050 6179 6d65 6e74 7322  terest Payments"
+0001de20: 2c20 224e 6f6e 2d4f 7065 7261 7469 6f6e  , "Non-Operation
+0001de30: 616c 2049 6e63 6f6d 6522 2c20 2254 6178  al Income", "Tax
+0001de40: 6573 222c 2022 4e6f 6e74 6178 6162 6c65  es", "Nontaxable
+0001de50: 2050 726f 6669 7473 222c 2022 4e6f 6e74   Profits", "Nont
+0001de60: 6178 6162 6c65 204c 6f73 7365 7322 3a0d  axable Losses":.
+0001de70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001de80: 2020 2020 2020 2020 2076 203d 2069 6e63           v = inc
+0001de90: 6f6d 655f 6461 7461 5b6b 5d0d 0a0d 0a20  ome_data[k].... 
+0001dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001deb0: 2020 2020 2020 2069 6e63 6f6d 655f 7374         income_st
+0001dec0: 7220 2b3d 2022 7e26 7e5c 5c5c 5c22 0d0a  r += "~&~\\\\"..
+0001ded0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dee0: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
+0001def0: 7472 202b 3d20 225c 7422 202b 206b 202b  tr += "\t" + k +
+0001df00: 2022 267e 5c5c 5c5c 5c6e 220d 0a0d 0a20   "&~\\\\\n".... 
+0001df10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df20: 2020 2020 2020 2066 6f72 2073 7562 5f76         for sub_v
+0001df30: 616c 7565 2069 6e20 763a 0d0a 2020 2020  alue in v:..    
+0001df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df50: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
+0001df60: 7472 202b 3d20 225c 7422 202b 2022 7e26  tr += "\t" + "~&
+0001df70: 2220 2b20 7375 625f 7661 6c75 655b 305d  " + sub_value[0]
+0001df80: 202b 2073 7562 5f76 616c 7565 5b31 5d20   + sub_value[1] 
+0001df90: 2b20 225c 5c5c 5c5c 6e22 0d0a 2020 2020  + "\\\\\n"..    
+0001dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfb0: 2020 2020 6966 206c 656e 2876 2920 3d3d      if len(v) ==
+0001dfc0: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+0001dfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfe0: 2069 6e63 6f6d 655f 7374 7220 2b3d 2022   income_str += "
+0001dff0: 5c74 2220 2b20 227e 2622 202b 2022 2e2d  \t" + "~&" + ".-
+0001e000: 2220 2b20 225c 5c5c 5c5c 6e22 0d0a 0d0a  " + "\\\\\n"....
+0001e010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e020: 2020 2020 2020 2020 6966 206b 2021 3d20          if k != 
+0001e030: 224e 6f6e 7461 7861 626c 6520 4c6f 7373  "Nontaxable Loss
+0001e040: 6573 223a 0d0a 2020 2020 2020 2020 2020  es":..          
+0001e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e060: 2020 696e 636f 6d65 5f73 7472 202b 3d20    income_str += 
+0001e070: 227e 267e 5c5c 5c5c 5c68 6c69 6e65 5c6e  "~&~\\\\\hline\n
+0001e080: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001e090: 2020 2020 2020 2020 2069 6e63 6f6d 655f           income_
+0001e0a0: 7374 7220 2b3d 2022 2222 5c6e 0d0a 2020  str += """\n..  
+0001e0b0: 2020 2020 2020 2020 2020 7e26 7e5c 5c5c            ~&~\\\
+0001e0c0: 5c5c 686c 696e 655c 6e5c 5c65 6e64 7b74  \\hline\n\\end{t
+0001e0d0: 6162 756c 6172 7d22 2222 0d0a 2020 2020  abular}"""..    
+0001e0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e0f0: 696e 636f 6d65 5f73 7472 202b 3d20 2222  income_str += ""
+0001e100: 225c 6e0d 0a20 2020 2020 2020 2020 2020  "\n..           
+0001e110: 205c 5c63 6170 7469 6f6e 7b49 6e63 6f6d   \\caption{Incom
+0001e120: 6520 5374 6174 656d 656e 7420 6f66 2025  e Statement of %
+0001e130: 737d 2222 2220 2520 6167 656e 745f 7469  s}""" % agent_ti
+0001e140: 746c 6564 202b 2022 2222 0d0a 2020 2020  tled + """..    
+0001e150: 2020 2020 2020 2020 5c5c 656e 647b 7461          \\end{ta
+0001e160: 626c 657d 2222 220d 0a0d 0a20 2020 2020  ble}"""....     
+0001e170: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001e180: 6578 7374 725f 636f 6d62 696e 6564 202b  exstr_combined +
+0001e190: 3d20 696e 636f 6d65 5f73 7472 0d0a 0d0a  = income_str....
+0001e1a0: 2020 2020 2020 2020 2020 2020 2320 3d3d              # ==
+0001e1b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001e1c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001e1d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001e1e0: 3d3d 3d3d 3d0d 0a20 2020 2020 2020 2020  =====..         
+0001e1f0: 2020 2070 7970 6572 636c 6970 2e63 6f70     pyperclip.cop
+0001e200: 7928 7465 7873 7472 5f63 6f6d 6269 6e65  y(texstr_combine
+0001e210: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
+0001e220: 7365 6c66 2e6e 6f74 6966 7928 6d65 7373  self.notify(mess
+0001e230: 6167 653d 224c 6154 6558 2063 6f64 6520  age="LaTeX code 
+0001e240: 636f 7069 6564 2074 6f20 636c 6970 626f  copied to clipbo
+0001e250: 6172 642e 2048 6176 6520 6675 6e21 222c  ard. Have fun!",
+0001e260: 2074 6974 6c65 3d22 4861 7665 2066 756e   title="Have fun
+0001e270: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
+0001e280: 2020 6966 2046 616c 7365 3a20 2320 6465    if False: # de
+0001e290: 7072 6563 6961 7465 640d 0a0d 0a20 2020  preciated....   
+0001e2a0: 2020 2020 2020 2020 2020 2020 2070 6174               pat
+0001e2b0: 6820 3d20 6f73 2e70 6174 682e 6469 726e  h = os.path.dirn
+0001e2c0: 616d 6528 6f73 2e70 6174 682e 6162 7370  ame(os.path.absp
+0001e2d0: 6174 6828 5f5f 6669 6c65 5f5f 2929 0d0a  ath(__file__))..
+0001e2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e2f0: 7769 7468 206f 7065 6e28 6f73 2e70 6174  with open(os.pat
+0001e300: 682e 6a6f 696e 2870 6174 6820 2c20 2266  h.join(path , "f
+0001e310: 696c 6573 2f69 6e63 6f6d 655f 7374 6174  iles/income_stat
+0001e320: 6d65 6e74 732e 7465 7822 292c 2022 7722  ments.tex"), "w"
+0001e330: 2920 6173 2066 696c 653a 0d0a 2020 2020  ) as file:..    
+0001e340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e350: 6669 6c65 2e77 7269 7465 2822 2222 0d0a  file.write("""..
+0001e360: 2020 2020 5c64 6f63 756d 656e 7463 6c61      \documentcla
+0001e370: 7373 7b61 7274 6963 6c65 7d0d 0a20 2020  ss{article}..   
+0001e380: 205c 5c75 7365 7061 636b 6167 657b 7461   \\usepackage{ta
+0001e390: 6275 6c61 7278 7d0d 0a20 2020 205c 5c75  bularx}..    \\u
+0001e3a0: 7365 7061 636b 6167 657b 616d 736d 6174  sepackage{amsmat
+0001e3b0: 687d 0d0a 2020 2020 5c5c 7573 6570 6163  h}..    \\usepac
+0001e3c0: 6b61 6765 7b66 6c6f 6174 7d0d 0a0d 0a20  kage{float}.... 
+0001e3d0: 2020 205c 5c62 6567 696e 7b64 6f63 756d     \\begin{docum
+0001e3e0: 656e 747d 0d0a 0d0a 2020 2020 2222 2229  ent}....    """)
+0001e3f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e400: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
+0001e410: 2874 6578 7374 725f 636f 6d62 696e 6564  (texstr_combined
+0001e420: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001e430: 2020 2020 2020 2066 696c 652e 7772 6974         file.writ
+0001e440: 6528 2222 220d 0a20 2020 205c 5c65 6e64  e("""..    \\end
+0001e450: 7b64 6f63 756d 656e 747d 0d0a 2020 2020  {document}..    
+0001e460: 2222 2229 0d0a 0d0a 2020 2020 2020 2020  """)....        
+0001e470: 2020 2020 2020 2020 696d 706f 7274 2073          import s
+0001e480: 7562 7072 6f63 6573 730d 0a20 2020 2020  ubprocess..     
+0001e490: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+0001e4a0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001e4b0: 2020 2020 2020 2070 6174 6820 3d20 6f73         path = os
+0001e4c0: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
+0001e4d0: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
+0001e4e0: 6669 6c65 5f5f 2929 0d0a 2020 2020 2020  file__))..      
+0001e4f0: 2020 2020 2020 2020 2020 2020 2020 7375                su
+0001e500: 6270 726f 6365 7373 2e72 756e 2822 7064  bprocess.run("pd
+0001e510: 666c 6174 6578 2025 7322 2025 2028 6f73  flatex %s" % (os
+0001e520: 2e70 6174 682e 6a6f 696e 2870 6174 682c  .path.join(path,
+0001e530: 2022 6669 6c65 732f 696e 636f 6d65 5f73   "files/income_s
+0001e540: 7461 746d 656e 7473 2e74 6578 2229 2929  tatments.tex")))
+0001e550: 2e63 6865 636b 5f72 6574 7572 6e63 6f64  .check_returncod
+0001e560: 6528 290d 0a0d 0a20 2020 2020 2020 2020  e()....         
+0001e570: 2020 2020 2020 2020 2020 2073 6875 7469             shuti
+0001e580: 6c2e 6d6f 7665 2870 6174 6820 2b20 2269  l.move(path + "i
+0001e590: 6e63 6f6d 655f 7374 6174 6d65 6e74 732e  ncome_statments.
+0001e5a0: 7465 7822 2c20 7061 7468 202b 2022 6669  tex", path + "fi
+0001e5b0: 6c65 735c 5c69 6e63 6f6d 655f 7374 6174  les\\income_stat
+0001e5c0: 6d65 6e74 732e 7465 7822 290d 0a20 2020  ments.tex")..   
+0001e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e5e0: 2073 6875 7469 6c2e 6d6f 7665 2870 6174   shutil.move(pat
+0001e5f0: 6820 2b20 2269 6e63 6f6d 655f 7374 6174  h + "income_stat
+0001e600: 6d65 6e74 732e 6c6f 6722 2c20 7061 7468  ments.log", path
+0001e610: 202b 2022 6669 6c65 735c 5c69 6e63 6f6d   + "files\\incom
+0001e620: 655f 7374 6174 6d65 6e74 732e 6c6f 6722  e_statments.log"
+0001e630: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001e640: 2020 2020 2020 2073 6875 7469 6c2e 6d6f         shutil.mo
+0001e650: 7665 2870 6174 6820 2b20 2269 6e63 6f6d  ve(path + "incom
+0001e660: 655f 7374 6174 6d65 6e74 732e 6175 7822  e_statments.aux"
+0001e670: 2c20 7061 7468 202b 2022 6669 6c65 735c  , path + "files\
+0001e680: 5c5c 6d69 6e63 6f6d 655f 7374 6174 6d65  \\mincome_statme
+0001e690: 6e74 732e 6175 7822 290d 0a20 2020 2020  nts.aux")..     
+0001e6a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e6b0: 6875 7469 6c2e 6d6f 7665 2870 6174 6820  hutil.move(path 
+0001e6c0: 2b20 2269 6e63 6f6d 655f 7374 6174 6d65  + "income_statme
+0001e6d0: 6e74 732e 7064 6622 2c20 7061 7468 202b  nts.pdf", path +
+0001e6e0: 2022 6669 6c65 735c 5c69 6e63 6f6d 655f   "files\\income_
+0001e6f0: 7374 6174 6d65 6e74 732e 7064 6622 290d  statments.pdf").
+0001e700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e710: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+0001e720: 286d 6573 7361 6765 3d22 5465 5820 4669  (message="TeX Fi
+0001e730: 6c65 2063 7265 6174 6564 2069 6e20 2573  le created in %s
+0001e740: 2220 2520 7061 7468 202b 2022 5c5c 6669  " % path + "\\fi
+0001e750: 6c65 7322 202c 7469 746c 653d 2253 7563  les" ,title="Suc
+0001e760: 6365 7373 2229 0d0a 0d0a 2020 2020 2020  cess")....      
+0001e770: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001e780: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+0001e790: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e7a0: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+0001e7b0: 7928 6d65 7373 6167 653d 7374 7228 652e  y(message=str(e.
+0001e7c0: 5f5f 636f 6e74 6578 745f 5f29 202b 2022  __context__) + "
+0001e7d0: 5c6e 2220 2b20 7374 7228 6529 2c20 7469  \n" + str(e), ti
+0001e7e0: 746c 653d 652e 5f5f 636c 6173 735f 5f2e  tle=e.__class__.
+0001e7f0: 5f5f 6e61 6d65 5f5f 290d 0a0d 0a0d 0a20  __name__)...... 
+0001e800: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0001e810: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+0001e820: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001e830: 6e6f 7469 6679 286d 6573 7361 6765 3d73  notify(message=s
+0001e840: 7472 2865 2e5f 5f63 6f6e 7465 7874 5f5f  tr(e.__context__
+0001e850: 2920 2b20 225c 6e22 202b 2073 7472 2865  ) + "\n" + str(e
+0001e860: 292c 2074 6974 6c65 3d65 2e5f 5f63 6c61  ), title=e.__cla
+0001e870: 7373 5f5f 2e5f 5f6e 616d 655f 5f29 0d0a  ss__.__name__)..
+0001e880: 0d0a 2020 2020 6465 6620 6164 645f 6865  ..    def add_he
+0001e890: 6c70 6572 2873 656c 6629 3a0d 0a20 2020  lper(self):..   
+0001e8a0: 2020 2020 206e 6577 5f6e 616d 6520 3d20       new_name = 
+0001e8b0: 7365 6c66 2e48 656c 7065 724e 616d 6545  self.HelperNameE
+0001e8c0: 6469 742e 7465 7874 2829 0d0a 2020 2020  dit.text()..    
+0001e8d0: 2020 2020 2320 544f 444f 2061 6464 2073      # TODO add s
+0001e8e0: 6563 7572 6974 7920 6d65 6368 616e 6973  ecurity mechanis
+0001e8f0: 6d20 746f 2061 766f 6964 206f 7665 7277  m to avoid overw
+0001e900: 7269 7469 6e67 2061 6e20 6167 656e 740d  riting an agent.
+0001e910: 0a20 2020 2020 2020 2069 6620 6e65 775f  .        if new_
+0001e920: 6e61 6d65 203d 3d20 2222 3a0d 0a20 2020  name == "":..   
+0001e930: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001e940: 7469 6679 2822 506c 6561 7365 2065 6e74  tify("Please ent
+0001e950: 6572 2061 2076 616c 6964 206e 616d 6522  er a valid name"
+0001e960: 2c20 7469 746c 653d 2249 424d 2045 7272  , title="IBM Err
+0001e970: 6f72 2229 0d0a 2020 2020 2020 2020 656c  or")..        el
+0001e980: 6966 206e 6f74 206e 6577 5f6e 616d 655b  if not new_name[
+0001e990: 305d 2e69 7375 7070 6572 2829 3a0d 0a20  0].isupper():.. 
+0001e9a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001e9b0: 6e6f 7469 6679 2822 506c 6561 7365 2065  notify("Please e
+0001e9c0: 6e74 6572 2061 2076 616c 6964 206e 616d  nter a valid nam
+0001e9d0: 6520 7769 7468 5c6e 7570 7065 7263 6173  e with\nuppercas
+0001e9e0: 6520 6669 7273 7420 6c65 7474 6572 206f  e first letter o
+0001e9f0: 7220 6361 6d65 6c63 6173 652c 2065 2e67  r camelcase, e.g
+0001ea00: 2e20 274d 7941 6765 6e74 2722 2c20 7469  . 'MyAgent'", ti
+0001ea10: 746c 653d 2249 424d 2045 7272 6f72 2229  tle="IBM Error")
+0001ea20: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+0001ea30: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001ea40: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
+0001ea50: 5f61 6765 6e74 286e 6577 5f6e 616d 6529  _agent(new_name)
+0001ea60: 0d0a 0d0a 2020 2020 6465 6620 7265 6d6f  ....    def remo
+0001ea70: 7665 5f68 656c 7065 7228 7365 6c66 293a  ve_helper(self):
+0001ea80: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+0001ea90: 7261 7763 616e 7661 732e 7265 6d6f 7665  rawcanvas.remove
+0001eaa0: 5f61 6765 6e74 2829 0d0a 0d0a 2020 2020  _agent()....    
+0001eab0: 6465 6620 6164 645f 6e65 7728 7365 6c66  def add_new(self
+0001eac0: 293a 0d0a 0d0a 2020 2020 2020 2020 2320  ):....        # 
+0001ead0: 544f 444f 2061 7373 6572 7420 7468 6174  TODO assert that
+0001eae0: 2071 7561 6e74 6974 7920 6973 206e 6f74   quantity is not
+0001eaf0: 2079 6574 2069 6e20 616e 7920 6f74 6865   yet in any othe
+0001eb00: 7220 7472 616e 7361 6374 696f 6e0d 0a20  r transaction.. 
+0001eb10: 2020 2020 2020 2073 656c 662e 6d61 6465         self.made
+0001eb20: 5f63 6861 6e67 6573 203d 2046 616c 7365  _changes = False
+0001eb30: 0d0a 0d0a 0d0a 2020 2020 2020 2020 6e65  ......        ne
+0001eb40: 775f 656e 7472 7920 3d20 7b7d 0d0a 0d0a  w_entry = {}....
+0001eb50: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
+0001eb60: 795b 2261 3122 5d20 3d20 7365 6c66 2e41  y["a1"] = self.A
+0001eb70: 7373 6574 4c69 7374 4c65 6674 2e74 6f50  ssetListLeft.toP
+0001eb80: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
+0001eb90: 2020 2020 6e65 775f 656e 7472 795b 2261      new_entry["a
+0001eba0: 3222 5d20 3d20 7365 6c66 2e41 7373 6574  2"] = self.Asset
+0001ebb0: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
+0001ebc0: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
+0001ebd0: 206e 6577 5f65 6e74 7279 5b22 6c31 225d   new_entry["l1"]
+0001ebe0: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
+0001ebf0: 794c 6973 744c 6566 742e 746f 506c 6169  yListLeft.toPlai
+0001ec00: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
+0001ec10: 206e 6577 5f65 6e74 7279 5b22 6c32 225d   new_entry["l2"]
+0001ec20: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
+0001ec30: 794c 6973 7452 6967 6874 2e74 6f50 6c61  yListRight.toPla
+0001ec40: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
+0001ec50: 2020 6e65 775f 656e 7472 795b 2265 3122    new_entry["e1"
+0001ec60: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
+0001ec70: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
+0001ec80: 6578 7428 290d 0a20 2020 2020 2020 206e  ext()..        n
+0001ec90: 6577 5f65 6e74 7279 5b22 6532 225d 203d  ew_entry["e2"] =
+0001eca0: 2073 656c 662e 4571 7569 7479 4c69 7374   self.EquityList
+0001ecb0: 5269 6768 742e 746f 506c 6169 6e54 6578  Right.toPlainTex
+0001ecc0: 7428 290d 0a0d 0a20 2020 2020 2020 2023  t()....        #
+0001ecd0: 206e 6577 5f65 6e74 7279 5b22 6131 225d   new_entry["a1"]
+0001ece0: 203d 2073 656c 662e 4173 7365 744c 6973   = self.AssetLis
+0001ecf0: 744c 6566 742e 746f 506c 6169 6e54 6578  tLeft.toPlainTex
+0001ed00: 7428 290d 0a20 2020 2020 2020 2023 206e  t()..        # n
+0001ed10: 6577 5f65 6e74 7279 5b22 6c31 225d 203d  ew_entry["l1"] =
+0001ed20: 2073 656c 662e 4c69 6162 696c 6974 794c   self.LiabilityL
+0001ed30: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
+0001ed40: 6578 7428 290d 0a20 2020 2020 2020 2023  ext()..        #
+0001ed50: 206e 6577 5f65 6e74 7279 5b22 6132 225d   new_entry["a2"]
+0001ed60: 203d 2073 656c 662e 4c69 6162 696c 6974   = self.Liabilit
+0001ed70: 794c 6973 7452 6967 6874 2e74 6f50 6c61  yListRight.toPla
+0001ed80: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
+0001ed90: 2020 2320 6e65 775f 656e 7472 795b 226c    # new_entry["l
+0001eda0: 3222 5d20 3d20 7365 6c66 2e41 7373 6574  2"] = self.Asset
+0001edb0: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
+0001edc0: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
+0001edd0: 2023 206e 6577 5f65 6e74 7279 5b22 6531   # new_entry["e1
+0001ede0: 225d 203d 2073 656c 662e 4571 7569 7479  "] = self.Equity
+0001edf0: 4c69 7374 4c65 6674 2e74 6f50 6c61 696e  ListLeft.toPlain
+0001ee00: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
+0001ee10: 2320 6e65 775f 656e 7472 795b 2265 3222  # new_entry["e2"
+0001ee20: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
+0001ee30: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
+0001ee40: 5465 7874 2829 0d0a 0d0a 2020 2020 2020  Text()....      
+0001ee50: 2020 6e65 775f 656e 7472 795b 2261 6765    new_entry["age
+0001ee60: 6e74 3122 5d20 3d20 6361 6d65 6c28 7365  nt1"] = camel(se
+0001ee70: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
+0001ee80: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
+0001ee90: 7a65 2829 0d0a 2020 2020 2020 2020 6e65  ze()..        ne
+0001eea0: 775f 656e 7472 795b 2261 6765 6e74 3222  w_entry["agent2"
+0001eeb0: 5d20 3d20 6361 6d65 6c28 7365 6c66 2e61  ] = camel(self.a
+0001eec0: 6765 6e74 3245 6469 742e 7465 7874 2829  gent2Edit.text()
+0001eed0: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
+0001eee0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+0001eef0: 2e61 6765 6e74 3145 6469 742e 7365 7454  .agent1Edit.setT
+0001ef00: 6578 7428 6361 6d65 6c28 7365 6c66 2e61  ext(camel(self.a
+0001ef10: 6765 6e74 3145 6469 742e 7465 7874 2829  gent1Edit.text()
+0001ef20: 2929 2023 202e 6361 7069 7461 6c69 7a65  )) # .capitalize
+0001ef30: 2829 290d 0a20 2020 2020 2020 2073 656c  ())..        sel
+0001ef40: 662e 6167 656e 7432 4564 6974 2e73 6574  f.agent2Edit.set
+0001ef50: 5465 7874 2863 616d 656c 2873 656c 662e  Text(camel(self.
+0001ef60: 6167 656e 7432 4564 6974 2e74 6578 7428  agent2Edit.text(
+0001ef70: 2929 2920 232e 6361 7069 7461 6c69 7a65  ))) #.capitalize
+0001ef80: 2829 290d 0a0d 0a20 2020 2020 2020 2069  ())....        i
+0001ef90: 6620 6e6f 7420 7365 6c66 2e64 7261 7763  f not self.drawc
+0001efa0: 616e 7661 732e 6368 6563 6b5f 6578 6973  anvas.check_exis
+0001efb0: 7428 6e65 775f 656e 7472 795b 2261 6765  t(new_entry["age
+0001efc0: 6e74 3122 5d29 3a0d 0a20 2020 2020 2020  nt1"]):..       
+0001efd0: 2020 2020 2069 6620 6e65 775f 656e 7472       if new_entr
+0001efe0: 795b 2261 6765 6e74 3122 5d20 213d 2022  y["agent1"] != "
+0001eff0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0001f000: 2020 2020 7965 7320 3d20 2073 656c 662e      yes =  self.
+0001f010: 6173 6b5f 7175 6573 7469 6f6e 2827 272c  ask_question('',
+0001f020: 2254 6865 2061 6765 6e74 2025 7320 646f  "The agent %s do
+0001f030: 6573 206e 6f74 2065 7869 7374 2e5c 6e44  es not exist.\nD
+0001f040: 6f20 796f 7520 7769 7368 2074 6f20 636f  o you wish to co
+0001f050: 6e74 696e 7565 2061 6e64 2061 7574 6f6d  ntinue and autom
+0001f060: 6174 6963 616c 6c79 2063 7265 6174 6520  atically create 
+0001f070: 6120 6e65 7720 6167 656e 743f 2225 6e65  a new agent?"%ne
+0001f080: 775f 656e 7472 795b 2261 6765 6e74 3122  w_entry["agent1"
+0001f090: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0001f0a0: 2020 2020 6966 206e 6f74 2079 6573 3a0d      if not yes:.
+0001f0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f0c0: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
+0001f0d0: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
+0001f0e0: 6c66 2e64 7261 7763 616e 7661 732e 6368  lf.drawcanvas.ch
+0001f0f0: 6563 6b5f 6578 6973 7428 6e65 775f 656e  eck_exist(new_en
+0001f100: 7472 795b 2261 6765 6e74 3222 5d29 3a0d  try["agent2"]):.
+0001f110: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001f120: 6e65 775f 656e 7472 795b 2261 6765 6e74  new_entry["agent
+0001f130: 3222 5d20 213d 2022 223a 0d0a 2020 2020  2"] != "":..    
+0001f140: 2020 2020 2020 2020 2020 2020 7965 7320              yes 
+0001f150: 3d20 2073 656c 662e 6173 6b5f 7175 6573  =  self.ask_ques
+0001f160: 7469 6f6e 2827 272c 2022 5468 6520 6167  tion('', "The ag
+0001f170: 656e 7420 2573 2064 6f65 7320 6e6f 7420  ent %s does not 
+0001f180: 6578 6973 742e 5c6e 446f 2079 6f75 2077  exist.\nDo you w
+0001f190: 6973 6820 746f 2063 6f6e 7469 6e75 6520  ish to continue 
+0001f1a0: 616e 6420 6175 746f 6d61 7469 6361 6c6c  and automaticall
+0001f1b0: 7920 6372 6561 7465 2061 206e 6577 2061  y create a new a
+0001f1c0: 6765 6e74 3f22 256e 6577 5f65 6e74 7279  gent?"%new_entry
+0001f1d0: 5b22 6167 656e 7432 225d 290d 0a20 2020  ["agent2"])..   
+0001f1e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001f1f0: 6e6f 7420 7965 733a 0d0a 2020 2020 2020  not yes:..      
+0001f200: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001f210: 7475 726e 0d0a 0d0a 0d0a 2020 2020 2020  turn......      
+0001f220: 2020 626f 7831 203d 2073 656c 662e 6472    box1 = self.dr
+0001f230: 6177 6361 6e76 6173 2e61 6464 5f61 6765  awcanvas.add_age
+0001f240: 6e74 286e 6577 5f65 6e74 7279 5b22 6167  nt(new_entry["ag
+0001f250: 656e 7431 225d 290d 0a20 2020 2020 2020  ent1"])..       
+0001f260: 2062 6f78 3220 3d20 7365 6c66 2e64 7261   box2 = self.dra
+0001f270: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
+0001f280: 7428 6e65 775f 656e 7472 795b 2261 6765  t(new_entry["age
+0001f290: 6e74 3222 5d29 0d0a 0d0a 2020 2020 2020  nt2"])....      
+0001f2a0: 2020 6d79 5f69 7465 6d73 203d 205b 5d0d    my_items = [].
+0001f2b0: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
+0001f2c0: 6e65 775f 656e 7472 790d 0a20 2020 2020  new_entry..     
+0001f2d0: 2020 2061 6c6c 656e 7472 6965 7320 3d20     allentries = 
+0001f2e0: 225c 6e22 2e6a 6f69 6e28 5b64 6174 615b  "\n".join([data[
+0001f2f0: 226c 3122 5d2c 2064 6174 615b 2261 3122  "l1"], data["a1"
+0001f300: 5d2c 2064 6174 615b 2265 3122 5d2c 2064  ], data["e1"], d
+0001f310: 6174 615b 226c 3222 5d2c 2064 6174 615b  ata["l2"], data[
+0001f320: 2261 3222 5d2c 2064 6174 615b 2265 3222  "a2"], data["e2"
+0001f330: 5d5d 290d 0a20 2020 2020 2020 2066 6f72  ]])..        for
+0001f340: 2073 7562 5f69 7465 6d20 696e 2061 6c6c   sub_item in all
+0001f350: 656e 7472 6965 732e 7370 6c69 7428 225c  entries.split("\
+0001f360: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+0001f370: 2020 666f 7220 7375 625f 656e 7472 7920    for sub_entry 
+0001f380: 696e 2073 7562 5f69 7465 6d2e 7370 6c69  in sub_item.spli
+0001f390: 7428 225c 6e22 293a 0d0a 2020 2020 2020  t("\n"):..      
+0001f3a0: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
+0001f3b0: 3d20 7375 625f 656e 7472 792e 7265 706c  = sub_entry.repl
+0001f3c0: 6163 6528 222d 222c 2222 292e 7265 706c  ace("-","").repl
+0001f3d0: 6163 6528 222b 222c 2222 292e 7374 7269  ace("+","").stri
+0001f3e0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+0001f3f0: 2020 2020 2069 6620 656e 7472 7920 213d       if entry !=
+0001f400: 2020 2222 3a0d 0a20 2020 2020 2020 2020    "":..         
+0001f410: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
+0001f420: 656d 732e 6170 7065 6e64 2865 6e74 7279  ems.append(entry
+0001f430: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+0001f440: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
+0001f450: 5f63 6f6e 6e65 6374 696f 6e28 626f 7831  _connection(box1
+0001f460: 2c20 626f 7832 2c20 6e61 6d65 3d20 7374  , box2, name= st
+0001f470: 7228 7365 6c66 2e65 6469 7453 686f 7274  r(self.editShort
+0001f480: 6e61 6d65 2e74 6578 7428 2929 2c73 7562  name.text()),sub
+0001f490: 6a65 6374 3d73 656c 662e 6564 6974 5375  ject=self.editSu
+0001f4a0: 626a 6563 742e 7465 7874 2829 2c69 7465  bject.text(),ite
+0001f4b0: 6d73 3d6d 795f 6974 656d 7329 0d0a 0d0a  ms=my_items)....
+0001f4c0: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
+0001f4d0: 795b 2275 6e69 2d64 6972 6563 7469 6f6e  y["uni-direction
+0001f4e0: 616c 225d 203d 205c 0d0a 2020 2020 2020  al"] = \..      
+0001f4f0: 2020 2020 2020 7374 7228 7365 6c66 2e63        str(self.c
+0001f500: 6f6d 626f 556e 6964 6972 2e63 7572 7265  omboUnidir.curre
+0001f510: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
+0001f520: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001f530: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
+0001f540: 5d20 3d20 5c0d 0a20 2020 2020 2020 2020  ] = \..         
+0001f550: 2020 2073 656c 662e 7265 6769 7374 6572     self.register
+0001f560: 466c 6f77 426f 782e 6375 7272 656e 7454  FlowBox.currentT
+0001f570: 6578 7428 290d 0a0d 0a20 2020 2020 2020  ext()....       
+0001f580: 206e 6577 5f65 6e74 7279 5b22 6361 7368   new_entry["cash
+0001f590: 666c 6f77 3122 5d20 3d20 5c0d 0a20 2020  flow1"] = \..   
+0001f5a0: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+0001f5b0: 662e 636f 6d62 6f43 6173 684c 6566 742e  f.comboCashLeft.
+0001f5c0: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
+0001f5d0: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
+0001f5e0: 795b 2263 6173 6866 6c6f 7732 225d 203d  y["cashflow2"] =
+0001f5f0: 205c 0d0a 2020 2020 2020 2020 2020 2020   \..            
+0001f600: 7374 7228 7365 6c66 2e63 6f6d 626f 4361  str(self.comboCa
+0001f610: 7368 5269 6768 742e 6375 7272 656e 7454  shRight.currentT
+0001f620: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
+0001f630: 2020 6e65 775f 656e 7472 795b 226b 696e    new_entry["kin
+0001f640: 6422 5d20 3d20 5c0d 0a20 2020 2020 2020  d"] = \..       
+0001f650: 2020 2020 2073 7472 2873 656c 662e 6564       str(self.ed
+0001f660: 6974 5479 7065 2e63 7572 7265 6e74 5465  itType.currentTe
+0001f670: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
+0001f680: 206e 6577 5f65 6e74 7279 5b22 696e 636f   new_entry["inco
+0001f690: 6d65 3122 5d20 3d20 5c0d 0a20 2020 2020  me1"] = \..     
+0001f6a0: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
+0001f6b0: 636f 6d62 6f49 6e63 6f6d 654c 6566 742e  comboIncomeLeft.
+0001f6c0: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
+0001f6d0: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
+0001f6e0: 795b 2269 6e63 6f6d 6532 225d 203d 205c  y["income2"] = \
+0001f6f0: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+0001f700: 7228 7365 6c66 2e63 6f6d 626f 496e 636f  r(self.comboInco
+0001f710: 6d65 5269 6768 742e 6375 7272 656e 7454  meRight.currentT
+0001f720: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
+0001f730: 2020 6e65 775f 656e 7472 795b 2271 7561    new_entry["qua
+0001f740: 6e74 6974 7922 5d20 3d20 5c0d 0a20 2020  ntity"] = \..   
+0001f750: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+0001f760: 662e 6564 6974 5175 616e 7469 7479 2e74  f.editQuantity.t
+0001f770: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
+0001f780: 2020 6e65 775f 656e 7472 795b 2273 7562    new_entry["sub
+0001f790: 6a65 6374 225d 203d 205c 0d0a 2020 2020  ject"] = \..    
+0001f7a0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
+0001f7b0: 2e65 6469 7453 7562 6a65 6374 2e74 6578  .editSubject.tex
+0001f7c0: 7428 2929 0d0a 0d0a 2020 2020 2020 2020  t())....        
+0001f7d0: 6e65 775f 656e 7472 795b 2273 686f 7274  new_entry["short
+0001f7e0: 6e61 6d65 225d 203d 205c 0d0a 2020 2020  name"] = \..    
+0001f7f0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
+0001f800: 2e65 6469 7453 686f 7274 6e61 6d65 2e74  .editShortname.t
+0001f810: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
+0001f820: 2020 6e65 775f 656e 7472 795b 2264 6573    new_entry["des
+0001f830: 6372 6970 7469 6f6e 225d 203d 205c 0d0a  cription"] = \..
+0001f840: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0001f850: 7365 6c66 2e65 6469 7444 6573 6372 6970  self.editDescrip
+0001f860: 7469 6f6e 2e74 6578 7428 2929 0d0a 0d0a  tion.text())....
+0001f870: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0001f880: 7279 5f64 6174 612e 6170 7065 6e64 286e  ry_data.append(n
+0001f890: 6577 5f65 6e74 7279 290d 0a20 2020 2020  ew_entry)..     
+0001f8a0: 2020 2073 656c 662e 7570 6461 7465 5f74     self.update_t
+0001f8b0: 6162 6c65 2829 0d0a 0d0a 0d0a 0d0a 2020  able()........  
+0001f8c0: 2020 2020 2020 6461 726b 4d6f 6465 203d        darkMode =
+0001f8d0: 2054 7275 650d 0a20 2020 2020 2020 2074   True..        t
+0001f8e0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0001f8f0: 2069 6620 7365 6c66 2e74 6865 6d65 5f6d   if self.theme_m
+0001f900: 616e 6167 6572 2e74 6865 6d65 203d 3d20  anager.theme == 
+0001f910: 2262 7269 6768 7422 3a0d 0a20 2020 2020  "bright":..     
+0001f920: 2020 2020 2020 2020 2020 2064 6172 6b4d             darkM
+0001f930: 6f64 6520 3d20 4661 6c73 650d 0a20 2020  ode = False..   
+0001f940: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
+0001f950: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
+0001f960: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+0001f970: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001f980: 2e73 656c 6563 7469 6f6e 5f69 6478 203d  .selection_idx =
+0001f990: 206c 656e 2873 656c 662e 656e 7472 795f   len(self.entry_
+0001f9a0: 6461 7461 292d 310d 0a20 2020 2020 2020  data)-1..       
+0001f9b0: 2020 2020 2073 656c 662e 726f 775f 7365       self.row_se
+0001f9c0: 6c65 6374 2873 656c 662e 7365 6c65 6374  lect(self.select
+0001f9d0: 696f 6e5f 6964 7829 0d0a 2020 2020 2020  ion_idx)..      
+0001f9e0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+0001f9f0: 6f6e 2061 7320 6520 3a0d 0a20 2020 2020  on as e :..     
+0001fa00: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+0001fa10: 6679 2822 4552 524f 523a 2220 2b20 7472  fy("ERROR:" + tr
+0001fa20: 2865 292c 7469 746c 653d 2245 7272 6f72  (e),title="Error
+0001fa30: 2229 0d0a 0d0a 2020 2020 2020 2020 2222  ")....        ""
+0001fa40: 220d 0a20 2020 2020 2020 2069 6620 7365  "..        if se
+0001fa50: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+0001fa60: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0001fa70: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+0001fa80: 2069 6e20 7261 6e67 6528 7365 6c66 2e74   in range(self.t
+0001fa90: 7261 6e73 6163 7469 6f6e 5669 6577 2e63  ransactionView.c
+0001faa0: 6f6c 756d 6e43 6f75 6e74 2829 293a 0d0a  olumnCount()):..
+0001fab0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001fac0: 2020 6966 2064 6172 6b4d 6f64 653a 0d0a    if darkMode:..
+0001fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fae0: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0001faf0: 7469 6f6e 5669 6577 2e69 7465 6d28 7365  tionView.item(se
+0001fb00: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+0001fb10: 2c20 6929 2e73 6574 4261 636b 6772 6f75  , i).setBackgrou
+0001fb20: 6e64 2851 7447 7569 2e51 436f 6c6f 7228  nd(QtGui.QColor(
+0001fb30: 3231 2c20 3231 2c20 3231 2929 0d0a 2020  21, 21, 21))..  
+0001fb40: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001fb50: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0001fb60: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0001fb70: 616e 7361 6374 696f 6e56 6965 772e 6974  ansactionView.it
+0001fb80: 656d 2873 656c 662e 7365 6c65 6374 696f  em(self.selectio
+0001fb90: 6e5f 6964 782c 2069 292e 7365 7442 6163  n_idx, i).setBac
+0001fba0: 6b67 726f 756e 6428 5174 4775 692e 5143  kground(QtGui.QC
+0001fbb0: 6f6c 6f72 2832 3333 2c20 3233 342c 2032  olor(233, 234, 2
+0001fbc0: 3237 2929 0d0a 0d0a 2020 2020 2020 2020  27))....        
+0001fbd0: 2020 2020 7365 6c66 2e73 656c 6563 7469      self.selecti
+0001fbe0: 6f6e 5f69 6478 203d 2073 656c 662e 7472  on_idx = self.tr
+0001fbf0: 616e 7361 6374 696f 6e56 6965 772e 726f  ansactionView.ro
+0001fc00: 7743 6f75 6e74 2829 2d31 0d0a 2020 2020  wCount()-1..    
+0001fc10: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0001fc20: 2072 616e 6765 2873 656c 662e 7472 616e   range(self.tran
+0001fc30: 7361 6374 696f 6e56 6965 772e 636f 6c75  sactionView.colu
+0001fc40: 6d6e 436f 756e 7428 2929 3a0d 0a20 2020  mnCount()):..   
+0001fc50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001fc60: 6461 726b 4d6f 6465 3a0d 0a20 2020 2020  darkMode:..     
+0001fc70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001fc80: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0001fc90: 6965 772e 6974 656d 2873 656c 662e 7365  iew.item(self.se
+0001fca0: 6c65 6374 696f 6e5f 6964 782c 2069 292e  lection_idx, i).
+0001fcb0: 7365 7442 6163 6b67 726f 756e 6428 5174  setBackground(Qt
+0001fcc0: 4775 692e 5143 6f6c 6f72 2831 382c 2031  Gui.QColor(18, 1
+0001fcd0: 382c 2031 3829 290d 0a20 2020 2020 2020  8, 18))..       
+0001fce0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0001fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd00: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
+0001fd10: 7469 6f6e 5669 6577 2e69 7465 6d28 7365  tionView.item(se
+0001fd20: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+0001fd30: 2c20 6929 2e73 6574 4261 636b 6772 6f75  , i).setBackgrou
+0001fd40: 6e64 2851 7447 7569 2e51 436f 6c6f 7228  nd(QtGui.QColor(
+0001fd50: 3135 392c 2031 3539 2c20 3135 3929 290d  159, 159, 159)).
+0001fd60: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
+0001fd70: 0d0a 0d0a 0d0a 2020 2020 6465 6620 676f  ......    def go
+0001fd80: 746f 5f6e 6578 7428 7365 6c66 293a 0d0a  to_next(self):..
+0001fd90: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+0001fda0: 0d0a 2020 2020 6465 6620 7564 7061 7465  ..    def udpate
+0001fdb0: 5f64 6973 706c 6179 2873 656c 6629 3a0d  _display(self):.
+0001fdc0: 0a20 2020 2020 2020 2074 7279 3a0d 0a0d  .        try:...
+0001fdd0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+0001fde0: 656e 616d 6520 3d20 7365 6c66 2e66 696c  ename = self.fil
+0001fdf0: 656e 616d 650d 0a0d 0a20 2020 2020 2020  ename....       
+0001fe00: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
+0001fe10: 696c 656e 616d 652c 2027 7227 2920 6173  ilename, 'r') as
+0001fe20: 2073 7472 6561 6d3a 0d0a 2020 2020 2020   stream:..      
+0001fe30: 2020 2020 2020 2020 2020 6669 6c65 6461            fileda
+0001fe40: 7461 203d 2079 616d 6c2e 7361 6665 5f6c  ta = yaml.safe_l
+0001fe50: 6f61 6428 7374 7265 616d 290d 0a20 2020  oad(stream)..   
+0001fe60: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0001fe70: 6e74 2866 696c 6564 6174 6129 0d0a 0d0a  nt(filedata)....
+0001fe80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe90: 7365 6c66 2e61 6765 6e74 314c 6162 656c  self.agent1Label
+0001fea0: 2e74 6578 7420 3d20 6669 6c65 6461 7461  .text = filedata
+0001feb0: 5b22 6167 656e 7431 225d 0d0a 2020 2020  ["agent1"]..    
+0001fec0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001fed0: 2e61 6765 6e74 324c 6162 656c 2e74 6578  .agent2Label.tex
+0001fee0: 7420 3d20 6669 6c65 6461 7461 5b22 6167  t = filedata["ag
+0001fef0: 656e 7432 225d 0d0a 0d0a 2020 2020 2020  ent2"]....      
+0001ff00: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+0001ff10: 2e61 312e 7661 6c75 6520 3d20 6669 6c65  .a1.value = file
+0001ff20: 6461 7461 5b22 6131 225d 2020 2320 2b20  data["a1"]  # + 
+0001ff30: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+0001ff40: 2020 2020 2020 2320 7365 6c66 2e65 312e        # self.e1.
+0001ff50: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
+0001ff60: 5b22 6531 225d 2020 2320 2b20 225c 6e22  ["e1"]  # + "\n"
+0001ff70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ff80: 2020 2320 7365 6c66 2e6c 312e 7661 6c75    # self.l1.valu
+0001ff90: 6520 3d20 6669 6c65 6461 7461 5b22 6c31  e = filedata["l1
+0001ffa0: 225d 2020 2320 2b20 225c 6e22 0d0a 2020  "]  # + "\n"..  
+0001ffb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001ffc0: 7365 6c66 2e61 322e 7661 6c75 6520 3d20  self.a2.value = 
+0001ffd0: 6669 6c65 6461 7461 5b22 6132 225d 2020  filedata["a2"]  
+0001ffe0: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
+0001fff0: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+00020000: 2e65 322e 7661 6c75 6520 3d20 6669 6c65  .e2.value = file
+00020010: 6461 7461 5b22 6532 225d 2020 2320 2b20  data["e2"]  # + 
+00020020: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+00020030: 2020 2020 2020 2320 7365 6c66 2e6c 322e        # self.l2.
+00020040: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
+00020050: 5b22 6c32 225d 2020 2320 2b20 225c 6e22  ["l2"]  # + "\n"
+00020060: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00020070: 2020 2020 2320 6966 2022 7368 6f72 746e      # if "shortn
+00020080: 616d 6522 2069 6e20 6669 6c65 6461 7461  ame" in filedata
+00020090: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000200a0: 2020 2023 2020 2020 7365 6c66 2e70 6172     #    self.par
+000200b0: 656e 742e 7368 6f72 746e 616d 652e 7661  ent.shortname.va
+000200c0: 6c75 6520 3d20 6669 6c65 6461 7461 5b22  lue = filedata["
+000200d0: 7368 6f72 746e 616d 6522 5d0d 0a0d 0a20  shortname"].... 
+000200e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000200f0: 2069 6620 2275 6e69 2d64 6972 6563 7469   if "uni-directi
+00020100: 6f6e 616c 2220 696e 2066 696c 6564 6174  onal" in filedat
+00020110: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
+00020120: 2020 2020 2320 2020 2073 656c 662e 7061      #    self.pa
+00020130: 7265 6e74 2e64 6972 6563 7469 6f6e 5f63  rent.direction_c
+00020140: 6865 636b 2e76 616c 7565 203d 2062 6f6f  heck.value = boo
+00020150: 6c28 7374 7228 6669 6c65 6461 7461 5b22  l(str(filedata["
+00020160: 756e 692d 6469 7265 6374 696f 6e61 6c22  uni-directional"
+00020170: 5d29 290d 0a20 2020 2020 2020 2020 2020  ]))..           
+00020180: 2020 2020 2023 2065 6c73 653a 0d0a 2020       # else:..  
+00020190: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000201a0: 2020 2073 656c 662e 7061 7265 6e74 2e64     self.parent.d
+000201b0: 6972 6563 7469 6f6e 5f63 6865 636b 2e76  irection_check.v
+000201c0: 616c 7565 203d 2046 616c 7365 0d0a 0d0a  alue = False....
+000201d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201e0: 2320 6966 2022 6465 7363 7269 7074 696f  # if "descriptio
+000201f0: 6e22 2069 6e20 6669 6c65 6461 7461 3a0d  n" in filedata:.
+00020200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020210: 2023 2020 2020 7365 6c66 2e70 6172 656e   #    self.paren
+00020220: 742e 6465 7363 7269 7074 696f 6e2e 7661  t.description.va
+00020230: 6c75 6520 3d20 6669 6c65 6461 7461 5b22  lue = filedata["
+00020240: 6465 7363 7269 7074 696f 6e22 5d0d 0a0d  description"]...
+00020250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020260: 2023 2073 656c 662e 7061 7265 6e74 2e66   # self.parent.f
+00020270: 6c6f 775f 6368 6563 6b2e 7661 6c75 6520  low_check.value 
+00020280: 3d20 6669 6c65 6461 7461 5b22 6c6f 6720  = filedata["log 
+00020290: 7472 616e 7361 6374 696f 6e22 5d0d 0a20  transaction"].. 
+000202a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000202b0: 2073 656c 662e 7061 7265 6e74 2e6b 696e   self.parent.kin
+000202c0: 642e 7661 6c75 6520 3d20 6669 6c65 6461  d.value = fileda
+000202d0: 7461 5b22 6b69 6e64 225d 0d0a 2020 2020  ta["kind"]..    
+000202e0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
+000202f0: 6c66 2e70 6172 656e 742e 7375 626a 6563  lf.parent.subjec
+00020300: 742e 7661 6c75 6520 3d20 6669 6c65 6461  t.value = fileda
+00020310: 7461 5b22 7375 626a 6563 7422 5d0d 0a20  ta["subject"].. 
+00020320: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00020330: 2073 656c 662e 7061 7265 6e74 2e71 7561   self.parent.qua
+00020340: 6e74 6974 792e 7661 6c75 6520 3d20 6669  ntity.value = fi
+00020350: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
+00020360: 225d 0d0a 0d0a 2020 2020 2020 2020 2020  "]....          
+00020370: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00020380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020390: 2320 5b22 4e6f 6e65 222c 2252 6576 656e  # ["None","Reven
+000203a0: 7565 222c 2245 7870 656e 7365 222c 2247  ue","Expense","G
+000203b0: 6169 6e22 2c22 4c6f 7373 222c 2254 6178  ain","Loss","Tax
+000203c0: 225d 0d0a 0d0a 2020 2020 2020 2020 2020  "]....          
+000203d0: 2020 2020 2020 2020 2020 6d79 5f64 6963            my_dic
+000203e0: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
+000203f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00020400: 4e6f 6e65 223a 2030 2c0d 0a20 2020 2020  None": 0,..     
+00020410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020420: 2020 2022 5265 7665 6e75 6522 3a20 312c     "Revenue": 1,
+00020430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020440: 2020 2020 2020 2020 2020 2245 7870 656e            "Expen
+00020450: 7365 223a 2032 2c0d 0a20 2020 2020 2020  se": 2,..       
+00020460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020470: 2022 4761 696e 223a 2033 2c0d 0a20 2020   "Gain": 3,..   
+00020480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020490: 2020 2020 2022 4c6f 7373 223a 2034 2c0d       "Loss": 4,.
+000204a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000204b0: 2020 2020 2020 2020 2022 496e 7465 7265           "Intere
+000204c0: 7374 223a 2035 2c0d 0a20 2020 2020 2020  st": 5,..       
+000204d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000204e0: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
+000204f0: 223a 2036 2c0d 0a20 2020 2020 2020 2020  ": 6,..         
+00020500: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00020510: 5461 7822 3a20 372c 0d0a 2020 2020 2020  Tax": 7,..      
+00020520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020530: 2020 224e 6f6e 7461 782e 2050 726f 6669    "Nontax. Profi
+00020540: 7422 3a20 382c 0d0a 2020 2020 2020 2020  t": 8,..        
+00020550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020560: 224e 6f6e 7461 782e 204c 6f73 7322 3a20  "Nontax. Loss": 
+00020570: 390d 0a20 2020 2020 2020 2020 2020 2020  9..             
+00020580: 2020 2020 2020 207d 0d0a 0d0a 2020 2020         }....    
+00020590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000205a0: 2320 7365 6c66 2e70 6172 656e 742e 696e  # self.parent.in
+000205b0: 636f 6d65 312e 7661 6c75 6520 3d20 5b6d  come1.value = [m
+000205c0: 795f 6469 6374 5b66 696c 6564 6174 615b  y_dict[filedata[
+000205d0: 2269 6e63 6f6d 6531 225d 5d5d 0d0a 2020  "income1"]]]..  
+000205e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000205f0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
+00020600: 696e 636f 6d65 322e 7661 6c75 6520 3d20  income2.value = 
+00020610: 5b6d 795f 6469 6374 5b66 696c 6564 6174  [my_dict[filedat
+00020620: 615b 2269 6e63 6f6d 6532 225d 5d5d 0d0a  a["income2"]]]..
+00020630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020640: 2020 2020 2020 2320 7365 6c66 2e70 6172        # self.par
+00020650: 656e 742e 6361 7368 666c 6f77 312e 7661  ent.cashflow1.va
+00020660: 6c75 6520 3d20 5b66 696c 6564 6174 615b  lue = [filedata[
+00020670: 2263 6173 6866 6c6f 7731 225d 5d0d 0a20  "cashflow1"]].. 
+00020680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020690: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
+000206a0: 2e63 6173 6866 6c6f 7732 2e76 616c 7565  .cashflow2.value
+000206b0: 203d 205b 6669 6c65 6461 7461 5b22 6361   = [filedata["ca
+000206c0: 7368 666c 6f77 3222 5d5d 0d0a 0d0a 2020  shflow2"]]....  
+000206d0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+000206e0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
+000206f0: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
+00020700: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00020710: 2020 2023 7365 6c66 2e70 6172 656e 742e     #self.parent.
+00020720: 6469 7370 6c61 7928 290d 0a0d 0a20 2020  display()....   
+00020730: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00020740: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+00020750: 2020 2020 2020 2020 2070 7269 6e74 2873           print(s
+00020760: 7472 2865 2929 2023 2073 656c 662e 6e6f  tr(e)) # self.no
+00020770: 7469 6679 2873 7472 2865 292c 2245 7863  tify(str(e),"Exc
+00020780: 6570 7469 6f6e 2229 203c 2074 6869 7320  eption") < this 
+00020790: 7368 6f75 6c64 206e 6f74 2074 6872 6f77  should not throw
+000207a0: 2061 6e20 6578 6365 7074 696f 6e0d 0a0d   an exception...
+000207b0: 0a0d 0a0d 0a64 6566 2072 756e 5f61 7070  .....def run_app
+000207c0: 2829 3a0d 0a20 2020 2023 2072 756e 7320  ():..    # runs 
+000207d0: 7468 6520 6d61 696e 2061 7070 6c69 6361  the main applica
+000207e0: 7469 6f6e 2077 696e 646f 770d 0a0d 0a20  tion window.... 
+000207f0: 2020 2061 7070 203d 2051 7457 6964 6765     app = QtWidge
+00020800: 7473 2e51 4170 706c 6963 6174 696f 6e28  ts.QApplication(
+00020810: 7379 732e 6172 6776 290d 0a0d 0a20 2020  sys.argv)....   
+00020820: 2023 2070 6978 6d61 7020 3d20 5150 6978   # pixmap = QPix
+00020830: 6d61 7028 222e 2f73 706c 6173 682e 706e  map("./splash.pn
+00020840: 6722 290d 0a20 2020 2023 2073 706c 6173  g")..    # splas
+00020850: 6820 3d20 5153 706c 6173 6853 6372 6565  h = QSplashScree
+00020860: 6e28 7069 786d 6170 290d 0a20 2020 2023  n(pixmap)..    #
+00020870: 2073 706c 6173 682e 7368 6f77 2829 0d0a   splash.show()..
+00020880: 0d0a 2020 2020 2320 6170 702e 7365 7453  ..    # app.setS
+00020890: 7479 6c65 2827 4675 7369 6f6e 2729 0d0a  tyle('Fusion')..
+000208a0: 0d0a 2020 2020 7769 6e64 6f77 203d 2054  ..    window = T
+000208b0: 7261 6e73 6163 7469 6f6e 4465 7369 676e  ransactionDesign
+000208c0: 6572 2829 0d0a 2020 2020 2320 7370 6c61  er()..    # spla
+000208d0: 7368 2e66 696e 6973 6828 7769 6e64 6f77  sh.finish(window
+000208e0: 290d 0a0d 0a20 2020 2023 2073 6574 7570  )....    # setup
+000208f0: 2073 7479 6c65 7368 6565 740d 0a20 2020   stylesheet..   
+00020900: 2023 2061 7070 6c79 5f73 7479 6c65 7368   # apply_stylesh
+00020910: 6565 7428 6170 702c 2074 6865 6d65 3d27  eet(app, theme='
+00020920: 6461 726b 5f74 6561 6c2e 786d 6c27 2c20  dark_teal.xml', 
+00020930: 696e 7665 7274 5f73 6563 6f6e 6461 7279  invert_secondary
+00020940: 3d54 7275 6529 0d0a 2020 2020 2320 6170  =True)..    # ap
+00020950: 706c 795f 7374 796c 6573 6865 6574 2877  ply_stylesheet(w
+00020960: 696e 646f 772c 2074 6865 6d65 3d27 6461  indow, theme='da
+00020970: 726b 5f74 6561 6c2e 786d 6c27 2c20 696e  rk_teal.xml', in
+00020980: 7665 7274 5f73 6563 6f6e 6461 7279 3d54  vert_secondary=T
+00020990: 7275 6529 0d0a 0d0a 2020 2020 7769 6e64  rue)....    wind
+000209a0: 6f77 2e73 686f 7728 290d 0a20 2020 2077  ow.show()..    w
+000209b0: 696e 646f 772e 7377 6974 6368 5f74 6865  indow.switch_the
+000209c0: 6d65 2829 0d0a 2020 2020 7769 6e64 6f77  me()..    window
+000209d0: 2e73 7769 7463 685f 7468 656d 6528 290d  .switch_theme().
+000209e0: 0a0d 0a20 2020 2061 7070 2e65 7865 635f  ...    app.exec_
+000209f0: 2829 0d0a 0d0a 0d0a 0d0a 0d0a 0d0a 6966  ()............if
+00020a00: 205f 5f6e 616d 655f 5f20 3d3d 2022 5f5f   __name__ == "__
+00020a10: 6d61 696e 5f5f 223a 0d0a 0d0a 2020 2020  main__":....    
+00020a20: 7275 6e5f 6170 7028 290d 0a              run_app()..
```

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/resources.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/resources.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/settings_edit.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/settings_edit.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/simulation_edit.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/simulation_edit.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/main.txt` & `sfctools-1.0.5.3/sfctools/gui/attune/src/styles/bright/main.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/background.txt` & `sfctools-1.0.5.3/sfctools/gui/attune/src/styles/dark/background.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/main.txt` & `sfctools-1.0.5.3/sfctools/gui/attune/src/styles/dark/main.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/theme_manager.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/theme_manager.py`

 * *Files 4% similar despite different names*

```diff
@@ -69,14 +69,17 @@
             "bright": self.bright_theme
         }
         self.restore_buttons()
         self.parent.update()
 
 
     def load_colors(self, filename=None):
+
+        self.restore()
+
         if filename is None:
             filename = QFileDialog.getOpenFileName(self.parent, 'Open file',os.getcwd(), "Attune Theme Files (*.sfctheme)")[0]
 
         if filename is not None and filename != "":
 
             success = False
             try:
@@ -125,16 +128,19 @@
                     5: self.parent.bc5,
                     6: self.parent.bc6,
                     7: self.parent.bc7,
                     8: self.parent.bc8,
                 }
 
             ssheets = []
-            for i,color in enumerate(self.bright_theme):
-                ssheets.append(btn_table[i+1].palette().button().color())
+            for i,color in enumerate(self.colors[self.theme]):
+                clr = btn_table[i+1].palette().button().color()
+                clr.setAlpha(color.alpha())
+                ssheets.append(clr)
+                print("save theme", clr.alpha())
 
             print(ssheets)
 
             if filename is None:
                 filename = QFileDialog.getSaveFileName(self.parent, 'Save file',os.getcwd(), "Attune Theme Files (*.sfctheme)")[0]
```

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/transaction_designer_mainwindow.ui` & `sfctools-1.0.5.3/sfctools/gui/attune/src/transaction_designer_mainwindow.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/attune/src/yaml_editor.py` & `sfctools-1.0.5.3/sfctools/gui/attune/src/yaml_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/CLA.pdf` & `sfctools-1.0.5.3/sfctools/gui/CLA.pdf`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/CONTRIBUTING.md` & `sfctools-1.0.5.3/sfctools/gui/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/LICENSE` & `sfctools-1.0.5.3/sfctools/gui/LICENSE`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/gui/README.md` & `sfctools-1.0.5.3/sfctools/gui/README.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/misc/mpl_plotting.py` & `sfctools-1.0.5.3/sfctools/misc/mpl_plotting.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/misc/reporting_sheet.py` & `sfctools-1.0.5.3/sfctools/misc/reporting_sheet.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/sfctools/misc/timeseries.py` & `sfctools-1.0.5.3/sfctools/misc/timeseries.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.2/setup.py` & `sfctools-1.0.5.3/setup.py`

 * *Files 6% similar despite different names*

```diff
@@ -21,15 +21,19 @@
 
 package_data = \
 {'': ['*'],
  'sfctools.examples': ['exampleabm/data/processed/*',
                        'exampleabm/data/raw/*',
                        'exampleabm/figures/*',
                        'monte_carlo/result/*'],
- 'sfctools.gui': ['attune/src/styles/bright/*', 'attune/src/styles/dark/*']}
+ 'sfctools.gui': ['.pytest_cache/*',
+                  '.pytest_cache/v/cache/*',
+                  'attune/projects/*',
+                  'attune/src/styles/bright/*',
+                  'attune/src/styles/dark/*']}
 
 install_requires = \
 ['PyQt5>=5.9',
  'attrs',
  'graphviz',
  'matplotlib>=2.0.0',
  'networkx>=2.2',
@@ -44,15 +48,15 @@
  'scipy>1.9.1',
  'seaborn',
  'setuptools>=50.0.0',
  'sympy>=1.10.0']
 
 setup_kwargs = {
     'name': 'sfctools',
-    'version': '1.0.5.2',
+    'version': '1.0.5.3',
     'description': 'Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields.',
     'long_description': '# sfctools - A toolbox for stock-flow consistent, agent-based models\n\nSfctools is a lightweight and easy-to-use Python framework for agent-based macroeconomic, stock-flow consistent (ABM-SFC) modeling. It concentrates on agents in economics and helps you to construct agents, helps you to manage and document your model parameters, assures stock-flow consistency, and facilitates basic economic data structures (such as the balance sheet).\n\n\n## Installation\n\nWe recommend to install sfctools in a fresh Python 3.8 environment. For example, with conda, do\n\n    conda create --name sfcenv python=3.8\n    conda activate sfcenv\n    conda install pip\n\nThen, in a terminal of your choice, type:\n\n    pip install sfctools\n\nsee https://pypi.org/project/sfctools/\n\n## Usage with Graphical User Interface \'Attune\'\n\nType\n\n    python -m sfctools attune\n\nto start the GUI.\n\n## Usage inside Python\n\n```console\nfrom sfctools import Agent,World\nclass MyAgent(Agent):\n    def __init__(self, a):\n        super().__init__(self)\n        self.some_attribute = a\nmy_agent = MyAgent()\nprint(my_agent)\nprint(World().get_agents_of_type("MyAgent"))\n```\n\n## Running examples\n\n\n\n\n| Author Thomas Baldauf, German Aerospace Center (DLR), Curiestr. 4 70563 Stuttgart | thomas.baldauf@dlr.de |\n',
     'author': 'Thomas Baldauf',
     'author_email': 'thomas.baldauf@dlr.de',
     'maintainer': 'Thomas Baldauf, Benjamin Fuchs',
     'maintainer_email': 'thomas.baldauf@dlr.de, benjamin.fuchs@dlr.de',
     'url': 'https://gitlab.com/dlr-ve/esy/sfctools/framework',
```

### Comparing `sfctools-1.0.5.2/PKG-INFO` & `sfctools-1.0.5.3/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sfctools
-Version: 1.0.5.2
+Version: 1.0.5.3
 Summary: Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields.
 Home-page: https://gitlab.com/dlr-ve/esy/sfctools/framework
 License: MIT
 Keywords: stock-flow-consistent,agent-based,agent,macroeconomics,computational economics
 Author: Thomas Baldauf
 Author-email: thomas.baldauf@dlr.de
 Maintainer: Thomas Baldauf, Benjamin Fuchs
```

